(window["discover_bundle_jsonpfunction"]=window["discover_bundle_jsonpfunction"]||[]).push([[1],{100:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(101);case"v7light":return __webpack_require__(103);case"v8dark":return __webpack_require__(105);case"v8light":return __webpack_require__(107)}},101:function(module,exports,__webpack_require__){var api=__webpack_require__(45);var content=__webpack_require__(102);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},102:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(46);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'.kbnDocViewerTable {\n  margin-top: 8px; }\n\n.kbnDocViewer pre,\n.kbnDocViewer .kbnDocViewer__value {\n  display: inline-block;\n  word-break: break-all;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  color: #FFF;\n  vertical-align: top;\n  padding-top: 2px; }\n\n.kbnDocViewer .kbnDocViewer__field {\n  padding-top: 8px; }\n\n.kbnDocViewer .dscFieldName {\n  color: #98A2B3; }\n\n.kbnDocViewer td,\n.kbnDocViewer pre {\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.kbnDocViewer tr:first-child td {\n  border-top-color: transparent; }\n\n.kbnDocViewer tr:hover .kbnDocViewer__actionButton {\n  opacity: 1; }\n\n.kbnDocViewer__buttons,\n.kbnDocViewer__field {\n  white-space: nowrap; }\n\n.kbnDocViewer__buttons {\n  width: 60px; }\n  .kbnDocViewer__buttons:focus-within .kbnDocViewer__actionButton {\n    opacity: 1; }\n\n.kbnDocViewer__field {\n  width: 160px; }\n\n.kbnDocViewer__actionButton {\n  opacity: 0; }\n  .kbnDocViewer__actionButton:focus {\n    opacity: 1; }\n\n.kbnDocViewer__warning {\n  margin-right: 8px; }\n',""]);module.exports=exports},103:function(module,exports,__webpack_require__){var api=__webpack_require__(45);var content=__webpack_require__(104);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},104:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(46);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'.kbnDocViewerTable {\n  margin-top: 8px; }\n\n.kbnDocViewer pre,\n.kbnDocViewer .kbnDocViewer__value {\n  display: inline-block;\n  word-break: break-all;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  color: #222;\n  vertical-align: top;\n  padding-top: 2px; }\n\n.kbnDocViewer .kbnDocViewer__field {\n  padding-top: 8px; }\n\n.kbnDocViewer .dscFieldName {\n  color: #6D6D6D; }\n\n.kbnDocViewer td,\n.kbnDocViewer pre {\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.kbnDocViewer tr:first-child td {\n  border-top-color: transparent; }\n\n.kbnDocViewer tr:hover .kbnDocViewer__actionButton {\n  opacity: 1; }\n\n.kbnDocViewer__buttons,\n.kbnDocViewer__field {\n  white-space: nowrap; }\n\n.kbnDocViewer__buttons {\n  width: 60px; }\n  .kbnDocViewer__buttons:focus-within .kbnDocViewer__actionButton {\n    opacity: 1; }\n\n.kbnDocViewer__field {\n  width: 160px; }\n\n.kbnDocViewer__actionButton {\n  opacity: 0; }\n  .kbnDocViewer__actionButton:focus {\n    opacity: 1; }\n\n.kbnDocViewer__warning {\n  margin-right: 8px; }\n',""]);module.exports=exports},105:function(module,exports,__webpack_require__){var api=__webpack_require__(45);var content=__webpack_require__(106);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},106:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(46);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'.kbnDocViewerTable {\n  margin-top: 8px; }\n\n.kbnDocViewer pre,\n.kbnDocViewer .kbnDocViewer__value {\n  display: inline-block;\n  word-break: break-all;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  color: #FFF;\n  vertical-align: top;\n  padding-top: 2px; }\n\n.kbnDocViewer .kbnDocViewer__field {\n  padding-top: 8px; }\n\n.kbnDocViewer .dscFieldName {\n  color: #98A2B3; }\n\n.kbnDocViewer td,\n.kbnDocViewer pre {\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.kbnDocViewer tr:first-child td {\n  border-top-color: transparent; }\n\n.kbnDocViewer tr:hover .kbnDocViewer__actionButton {\n  opacity: 1; }\n\n.kbnDocViewer__buttons,\n.kbnDocViewer__field {\n  white-space: nowrap; }\n\n.kbnDocViewer__buttons {\n  width: 60px; }\n  .kbnDocViewer__buttons:focus-within .kbnDocViewer__actionButton {\n    opacity: 1; }\n\n.kbnDocViewer__field {\n  width: 160px; }\n\n.kbnDocViewer__actionButton {\n  opacity: 0; }\n  .kbnDocViewer__actionButton:focus {\n    opacity: 1; }\n\n.kbnDocViewer__warning {\n  margin-right: 8px; }\n',""]);module.exports=exports},107:function(module,exports,__webpack_require__){var api=__webpack_require__(45);var content=__webpack_require__(108);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},108:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(46);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'.kbnDocViewerTable {\n  margin-top: 8px; }\n\n.kbnDocViewer pre,\n.kbnDocViewer .kbnDocViewer__value {\n  display: inline-block;\n  word-break: break-all;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  color: #222;\n  vertical-align: top;\n  padding-top: 2px; }\n\n.kbnDocViewer .kbnDocViewer__field {\n  padding-top: 8px; }\n\n.kbnDocViewer .dscFieldName {\n  color: #6D6D6D; }\n\n.kbnDocViewer td,\n.kbnDocViewer pre {\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.kbnDocViewer tr:first-child td {\n  border-top-color: transparent; }\n\n.kbnDocViewer tr:hover .kbnDocViewer__actionButton {\n  opacity: 1; }\n\n.kbnDocViewer__buttons,\n.kbnDocViewer__field {\n  white-space: nowrap; }\n\n.kbnDocViewer__buttons {\n  width: 60px; }\n  .kbnDocViewer__buttons:focus-within .kbnDocViewer__actionButton {\n    opacity: 1; }\n\n.kbnDocViewer__field {\n  width: 160px; }\n\n.kbnDocViewer__actionButton {\n  opacity: 0; }\n  .kbnDocViewer__actionButton:focus {\n    opacity: 1; }\n\n.kbnDocViewer__warning {\n  margin-right: 8px; }\n',""]);module.exports=exports},48:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MAX_CONTEXT_SIZE}));__webpack_require__.d(__webpack_exports__,"b",(function(){return MIN_CONTEXT_SIZE}));__webpack_require__.d(__webpack_exports__,"c",(function(){return QUERY_PARAMETER_KEYS}));var _state__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(52);const MAX_CONTEXT_SIZE=1e4;const MIN_CONTEXT_SIZE=0;const QUERY_PARAMETER_KEYS=Object.keys(Object(_state__WEBPACK_IMPORTED_MODULE_0__["a"])())},51:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FAILURE_REASONS}));__webpack_require__.d(__webpack_exports__,"b",(function(){return LOADING_STATUS}));const FAILURE_REASONS={UNKNOWN:"unknown",INVALID_TIEBREAKER:"invalid_tiebreaker"};const LOADING_STATUS={FAILED:"failed",LOADED:"loaded",LOADING:"loading",UNINITIALIZED:"uninitialized"}},52:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createInitialQueryParametersState}));function createInitialQueryParametersState(defaultStepSize=5,tieBreakerField="_doc"){return{anchorId:null,columns:[],defaultStepSize:defaultStepSize,filters:[],indexPatternId:null,predecessorCount:0,successorCount:0,sort:[],tieBreakerField:tieBreakerField}}},53:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createDocViewerDirective}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _components_doc_viewer_doc_viewer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(65);function createDocViewerDirective(reactDirective){return reactDirective(props=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_doc_viewer_doc_viewer__WEBPACK_IMPORTED_MODULE_1__["a"],props),["hit",["indexPattern",{watchDepth:"reference"}],["filter",{watchDepth:"reference"}],["columns",{watchDepth:"collection"}],["onAddColumn",{watchDepth:"reference"}],["onRemoveColumn",{watchDepth:"reference"}]],{restrict:"E",scope:{hit:"=",indexPattern:"=",filter:"=?",columns:"=?",onAddColumn:"=?",onRemoveColumn:"=?"}})}},56:function(module,exports,__webpack_require__){__webpack_require__(77);module.exports="ngSanitize"},58:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getFirstSortableField}));__webpack_require__.d(__webpack_exports__,"b",(function(){return reverseSortDir}));let SortDirection;(function(SortDirection){SortDirection["asc"]="asc";SortDirection["desc"]="desc"})(SortDirection||(SortDirection={}));const META_FIELD_NAMES=["_seq_no","_doc","_uid"];function getFirstSortableField(indexPattern,fieldNames){const sortableFields=fieldNames.filter(fieldName=>META_FIELD_NAMES.includes(fieldName)||(indexPattern.fields.getByName(fieldName)||{sortable:false}).sortable);return sortableFields[0]}function reverseSortDir(sortDirection){return sortDirection===SortDirection.asc?SortDirection.desc:SortDirection.asc}},59:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return popularizeField}));function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function popularizeField(_x,_x2,_x3){return _popularizeField.apply(this,arguments)}function _popularizeField(){_popularizeField=_asyncToGenerator(regeneratorRuntime.mark((function _callee(indexPattern,fieldName,indexPatternsService){var field;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(indexPattern.id){_context.next=2;break}return _context.abrupt("return");case 2:field=indexPattern.fields.getByName(fieldName);if(field){_context.next=5;break}return _context.abrupt("return");case 5:field.count++;_context.prev=6;_context.next=9;return indexPatternsService.updateSavedObject(indexPattern,0,true);case 9:_context.next=13;break;case 11:_context.prev=11;_context.t0=_context["catch"](6);case 13:case"end":return _context.stop()}}),_callee,null,[[6,11]])})));return _popularizeField.apply(this,arguments)}},60:function(module,exports,__webpack_require__){(function(root,factory){if(true){module.exports=factory()}else{}})(typeof self!=="undefined"?self:this,(function(){var rison={};rison.uri_ok={"~":true,"!":true,"*":true,"(":true,")":true,"-":true,_:true,".":true,",":true,":":true,"@":true,$:true,"'":true,"/":true};(function(){var l=[];for(var hi=0;hi<16;hi++){for(var lo=0;lo<16;lo++){if(hi+lo===0)continue;var c=String.fromCharCode(hi*16+lo);if(!/\w|[-_./~]/.test(c))l.push("\\u00"+hi.toString(16)+lo.toString(16))}}rison.not_idchar=l.join("")})();rison.not_idchar=" '!:(),*@$";rison.not_idstart="-0123456789";(function(){var idrx="[^"+rison.not_idstart+rison.not_idchar+"][^"+rison.not_idchar+"]*";rison.id_ok=new RegExp("^"+idrx+"$");rison.next_id=new RegExp(idrx,"g")})();rison.quote=function(x){if(/^[-A-Za-z0-9~!*()_.',:@$/]*$/.test(x))return x;return encodeURIComponent(x).replace(/%2C/g,",").replace(/%3A/g,":").replace(/%40/g,"@").replace(/%24/g,"$").replace(/%2F/g,"/").replace(/%20/g,"+")};(function(){var sq={"'":true,"!":true},enc=function(v){if(v&&typeof v.toJSON==="function")v=v.toJSON();var fn=s[typeof v];if(fn)return fn(v)},s={array:function(x){var a=["!("],b,i,l=x.length,v;for(i=0;i<l;i+=1){v=enc(x[i]);if(typeof v=="string"){if(b){a[a.length]=","}a[a.length]=v;b=true}}a[a.length]=")";return a.join("")},boolean:function(x){if(x)return"!t";return"!f"},null:function(){return"!n"},number:function(x){if(!isFinite(x))return"!n";return String(x).replace(/\+/,"")},object:function(x){if(x){if(x instanceof Array){return s.array(x)}if(typeof x.__prototype__==="object"&&typeof x.__prototype__.encode_rison!=="undefined")return x.encode_rison();var a=["("],b,i,v,ki,ks=[];for(i in x)ks[ks.length]=i;ks.sort();for(ki=0;ki<ks.length;ki++){i=ks[ki];v=enc(x[i]);if(typeof v=="string"){if(b){a[a.length]=","}a.push(s.string(i),":",v);b=true}}a[a.length]=")";return a.join("")}return"!n"},string:function(x){if(x==="")return"''";if(rison.id_ok.test(x))return x;x=x.replace(/(['!])/g,(function(a,b){if(sq[b])return"!"+b;return b}));return"'"+x+"'"},undefined:function(){return}};rison.encode=function(v){return enc(v)};rison.encode_object=function(v){if(typeof v!="object"||v===null||v instanceof Array)throw new Error("rison.encode_object expects an object argument");var r=s[typeof v](v);return r.substring(1,r.length-1)};rison.encode_array=function(v){if(!(v instanceof Array))throw new Error("rison.encode_array expects an array argument");var r=s[typeof v](v);return r.substring(2,r.length-1)};rison.encode_uri=function(v){return rison.quote(s[typeof v](v))}})();rison.decode=function(r){var errcb=function(e){throw Error("rison decoder error: "+e)};if(typeof r!=="string")return errcb("decode input must be a string");var p=new rison.parser(errcb);return p.parse(r)};rison.decode_object=function(r){return rison.decode("("+r+")")};rison.decode_array=function(r){return rison.decode("!("+r+")")};rison.parser=function(errcb){this.errorHandler=errcb};rison.parser.WHITESPACE="";rison.parser.prototype.setOptions=function(options){if(options["errorHandler"])this.errorHandler=options.errorHandler};rison.parser.prototype.parse=function(str){this.string=str;this.index=0;this.message=null;var value=this.readValue();if(!this.message&&this.next())value=this.error("unable to parse string as rison: '"+rison.encode(str)+"'");if(this.message&&this.errorHandler)this.errorHandler(this.message,this.index);return value};rison.parser.prototype.error=function(message){if(typeof console!=="undefined")console.log("rison parser error: ",message);this.message=message;return undefined};rison.parser.prototype.readValue=function(){var c=this.next();var fn=c&&this.table[c];if(fn)return fn.apply(this);var s=this.string;var i=this.index-1;rison.next_id.lastIndex=i;var m=rison.next_id.exec(s);if(m.length>0){var id=m[0];this.index=i+id.length;return id}if(c)return this.error("invalid character: '"+c+"'");return this.error("empty expression")};rison.parser.parse_array=function(parser){var ar=[];var c;while((c=parser.next())!==")"){if(!c)return parser.error("unmatched '!('");if(ar.length){if(c!==",")parser.error("missing ','")}else if(c===","){return parser.error("extra ','")}else--parser.index;var n=parser.readValue();if(typeof n=="undefined")return undefined;ar.push(n)}return ar};rison.parser.bangs={t:true,f:false,n:null,"(":rison.parser.parse_array};rison.parser.prototype.table={"!":function(){var s=this.string;var c=s.charAt(this.index++);if(!c)return this.error('"!" at end of input');var x=rison.parser.bangs[c];if(typeof x=="function"){return x.call(null,this)}else if(typeof x=="undefined"){return this.error('unknown literal: "!'+c+'"')}return x},"(":function(){var o={};var c;var count=0;while((c=this.next())!==")"){if(count){if(c!==",")this.error("missing ','")}else if(c===","){return this.error("extra ','")}else--this.index;var k=this.readValue();if(typeof k==="undefined")return undefined;if(this.next()!==":")return this.error("missing ':'");var v=this.readValue();if(typeof v==="undefined")return undefined;o[k]=v;count++}return o},"'":function(){var s=this.string;var i=this.index;var start=i;var segments=[];var c;while((c=s.charAt(i++))!=="'"){if(!c)return this.error('unmatched "\'"');if(c==="!"){if(start<i-1)segments.push(s.slice(start,i-1));c=s.charAt(i++);if("!'".indexOf(c)>=0){segments.push(c)}else{return this.error('invalid string escape: "!'+c+'"')}start=i}}if(start<i-1)segments.push(s.slice(start,i-1));this.index=i;return segments.length===1?segments[0]:segments.join("")},"-":function(){var s=this.string;var i=this.index;var start=i-1;var state="int";var permittedSigns="-";var transitions={"int+.":"frac","int+e":"exp","frac+e":"exp"};do{var c=s.charAt(i++);if(!c)break;if("0"<=c&&c<="9")continue;if(permittedSigns.indexOf(c)>=0){permittedSigns="";continue}state=transitions[state+"+"+c.toLowerCase()];if(state==="exp")permittedSigns="-"}while(state);this.index=--i;s=s.slice(start,i);if(s==="-")return this.error("invalid number");return Number(s)}};(function(table){for(var i=0;i<=9;i++)table[String(i)]=table["-"]})(rison.parser.prototype.table);rison.parser.prototype.next=function(){var c;var s=this.string;var i=this.index;do{if(i===s.length)return undefined;c=s.charAt(i++)}while(rison.parser.WHITESPACE.indexOf(c)>=0);this.index=i;return c};return rison}))},61:function(module,exports){},63:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return QueryActionsProvider}));__webpack_require__.d(__webpack_exports__,"a",(function(){return constants["a"]}));__webpack_require__.d(__webpack_exports__,"b",(function(){return constants["b"]}));__webpack_require__.d(__webpack_exports__,"d",(function(){return createInitialLoadingStatusState}));var external_kbnSharedDeps_Lodash_=__webpack_require__(11);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var kibana_services=__webpack_require__(3);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function fetchAnchorProvider(indexPatterns,searchSource){return function(){var _fetchAnchor=_asyncToGenerator(regeneratorRuntime.mark((function _callee(indexPatternId,anchorId,sort){var indexPattern,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return indexPatterns.get(indexPatternId);case 2:indexPattern=_context.sent;searchSource.setParent(undefined).setField("index",indexPattern).setField("version",true).setField("size",1).setField("query",{query:{constant_score:{filter:{ids:{values:[anchorId]}}}},language:"lucene"}).setField("sort",sort);_context.next=6;return searchSource.fetch();case 6:response=_context.sent;if(!(external_kbnSharedDeps_Lodash_default.a.get(response,["hits","total"],0)<1)){_context.next=9;break}throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.context.failedToLoadAnchorDocumentErrorDescription",{defaultMessage:"Failed to load anchor document."}));case 9:return _context.abrupt("return",_objectSpread(_objectSpread({},external_kbnSharedDeps_Lodash_default.a.get(response,["hits","hits",0])),{},{$$_isAnchor:true}));case 10:case"end":return _context.stop()}}),_callee)})));function fetchAnchor(_x,_x2,_x3){return _fetchAnchor.apply(this,arguments)}return fetchAnchor}()}var sorting=__webpack_require__(58);var external_kbnSharedDeps_Moment_=__webpack_require__(35);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);function extractNanos(timeFieldValue=""){const fieldParts=timeFieldValue.split(".");const fractionSeconds=fieldParts.length===2?fieldParts[1].replace("Z",""):"";return fractionSeconds.length!==9?fractionSeconds.padEnd(9,"0"):fractionSeconds}function convertIsoToMillis(isoValue){const date=new Date(isoValue);return date.getTime()}function convertTimeValueToIso(timeValueMillis,nanosValue){if(!timeValueMillis){return null}const isoString=external_kbnSharedDeps_Moment_default()(timeValueMillis).toISOString();if(!isoString){return null}else if(nanosValue!==""){return"".concat(isoString.substring(0,isoString.length-4)).concat(nanosValue,"Z")}return isoString}var public_=__webpack_require__(4);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function fetch_hits_in_interval_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function fetch_hits_in_interval_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){fetch_hits_in_interval_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){fetch_hits_in_interval_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function fetchHitsInInterval(_x,_x2,_x3,_x4,_x5,_x6,_x7,_x8,_x9){return _fetchHitsInInterval.apply(this,arguments)}function _fetchHitsInInterval(){_fetchHitsInInterval=fetch_hits_in_interval_asyncToGenerator(regeneratorRuntime.mark((function _callee(searchSource,timeField,sort,sortDir,interval,searchAfter,maxCount,nanosValue,anchorId){var _response$hits;var range,_interval,start,stop,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:range={format:"strict_date_optional_time"};_interval=_slicedToArray(interval,2),start=_interval[0],stop=_interval[1];if(start){range[sortDir===public_["SortDirection"].asc?"gte":"lte"]=convertTimeValueToIso(start,nanosValue)}if(stop){range[sortDir===public_["SortDirection"].asc?"lte":"gte"]=convertTimeValueToIso(stop,nanosValue)}_context.next=6;return searchSource.setField("size",maxCount).setField("query",{query:{bool:{must:{constant_score:{filter:{range:{[timeField]:range}}}},must_not:{ids:{values:[anchorId]}}}},language:"lucene"}).setField("searchAfter",searchAfter).setField("sort",sort).setField("version",true).fetch();case 6:response=_context.sent;return _context.abrupt("return",((_response$hits=response.hits)===null||_response$hits===void 0?void 0:_response$hits.hits)||[]);case 8:case"end":return _context.stop()}}),_callee)})));return _fetchHitsInInterval.apply(this,arguments)}var _marked=regeneratorRuntime.mark(asPairs);function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=generate_intervals_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function generate_intervals_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return generate_intervals_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return generate_intervals_arrayLikeToArray(o,minLen)}function generate_intervals_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asPairs(iterable){var currentPair,_iterator,_step,value;return regeneratorRuntime.wrap((function asPairs$(_context){while(1)switch(_context.prev=_context.next){case 0:currentPair=[];_iterator=_createForOfIteratorHelper(iterable);_context.prev=2;_iterator.s();case 4:if((_step=_iterator.n()).done){_context.next=12;break}value=_step.value;currentPair=[...currentPair,value].slice(-2);if(!(currentPair.length===2)){_context.next=10;break}_context.next=10;return currentPair;case 10:_context.next=4;break;case 12:_context.next=17;break;case 14:_context.prev=14;_context.t0=_context["catch"](2);_iterator.e(_context.t0);case 17:_context.prev=17;_iterator.f();return _context.finish(17);case 20:case"end":return _context.stop()}}),_marked,null,[[2,14,17,20]])}function generateIntervals(offsets,startTime,type,sort){const offsetSign=sort===public_["SortDirection"].asc&&type==="successors"||sort===public_["SortDirection"].desc&&type==="predecessors"?1:-1;return asPairs([...offsets.map(offset=>startTime+offset*offsetSign),null])}function getEsQuerySearchAfter(type,documents,timeFieldName,anchor,nanoSeconds){if(documents.length){const afterTimeRecIdx=type==="successors"&&documents.length?documents.length-1:0;const afterTimeDoc=documents[afterTimeRecIdx];const afterTimeValue=nanoSeconds?afterTimeDoc._source[timeFieldName]:afterTimeDoc.sort[0];return[afterTimeValue,afterTimeDoc.sort[1]]}return[nanoSeconds?anchor._source[timeFieldName]:anchor.sort[0],anchor.sort[1]]}function getEsQuerySort(timeField,tieBreakerField,sortDir){return[{[timeField]:sortDir},{[tieBreakerField]:sortDir}]}function context_createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=context_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function context_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return context_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return context_arrayLikeToArray(o,minLen)}function context_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function context_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function context_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){context_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){context_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const DAY_MILLIS=24*60*60*1e3;const LOOKUP_OFFSETS=[0,1,7,30,365,1e4].map(days=>days*DAY_MILLIS);function fetchContextProvider(indexPatterns){return{fetchSurroundingDocs:fetchSurroundingDocs};function fetchSurroundingDocs(_x,_x2,_x3,_x4,_x5,_x6,_x7,_x8){return _fetchSurroundingDocs.apply(this,arguments)}function _fetchSurroundingDocs(){_fetchSurroundingDocs=context_asyncToGenerator(regeneratorRuntime.mark((function _callee(type,indexPatternId,anchor,timeField,tieBreakerField,sortDir,size,filters){var indexPattern,searchSource,sortDirToApply,nanos,timeValueMillis,intervals,documents,_iterator,_step,interval,remainingSize,searchAfter,sort,hits;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(typeof anchor!=="object"||anchor===null||!size)){_context.next=2;break}return _context.abrupt("return",[]);case 2:_context.next=4;return indexPatterns.get(indexPatternId);case 4:indexPattern=_context.sent;_context.next=7;return createSearchSource(indexPattern,filters);case 7:searchSource=_context.sent;sortDirToApply=type==="successors"?sortDir:Object(sorting["b"])(sortDir);nanos=indexPattern.isTimeNanosBased()?extractNanos(anchor.fields[timeField][0]):"";timeValueMillis=nanos!==""?convertIsoToMillis(anchor.fields[timeField][0]):anchor.sort[0];intervals=generateIntervals(LOOKUP_OFFSETS,timeValueMillis,type,sortDir);documents=[];_iterator=context_createForOfIteratorHelper(intervals);_context.prev=14;_iterator.s();case 16:if((_step=_iterator.n()).done){_context.next=29;break}interval=_step.value;remainingSize=size-documents.length;if(!(remainingSize<=0)){_context.next=21;break}return _context.abrupt("break",29);case 21:searchAfter=getEsQuerySearchAfter(type,documents,timeField,anchor,nanos);sort=getEsQuerySort(timeField,tieBreakerField,sortDirToApply);_context.next=25;return fetchHitsInInterval(searchSource,timeField,sort,sortDirToApply,interval,searchAfter,remainingSize,nanos,anchor._id);case 25:hits=_context.sent;documents=type==="successors"?[...documents,...hits]:[...hits.slice().reverse(),...documents];case 27:_context.next=16;break;case 29:_context.next=34;break;case 31:_context.prev=31;_context.t0=_context["catch"](14);_iterator.e(_context.t0);case 34:_context.prev=34;_iterator.f();return _context.finish(34);case 37:return _context.abrupt("return",documents);case 38:case"end":return _context.stop()}}),_callee,null,[[14,31,34,37]])})));return _fetchSurroundingDocs.apply(this,arguments)}function createSearchSource(_x9,_x10){return _createSearchSource.apply(this,arguments)}function _createSearchSource(){_createSearchSource=context_asyncToGenerator(regeneratorRuntime.mark((function _callee2(indexPattern,filters){var _getServices,data,searchSource;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_getServices=Object(kibana_services["h"])(),data=_getServices.data;_context2.next=3;return data.search.searchSource.create();case 3:searchSource=_context2.sent;return _context2.abrupt("return",searchSource.setParent(undefined).setField("index",indexPattern).setField("filter",filters));case 5:case"end":return _context2.stop()}}),_callee2)})));return _createSearchSource.apply(this,arguments)}}var query_parameters=__webpack_require__(68);var kibanaReact_public_=__webpack_require__(19);function actions_slicedToArray(arr,i){return actions_arrayWithHoles(arr)||actions_iterableToArrayLimit(arr,i)||actions_unsupportedIterableToArray(arr,i)||actions_nonIterableRest()}function actions_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function actions_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return actions_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return actions_arrayLikeToArray(o,minLen)}function actions_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function actions_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function actions_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function actions_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function actions_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){actions_ownKeys(Object(source),true).forEach((function(key){actions_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{actions_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function actions_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function QueryActionsProvider(Promise){const _getServices=Object(kibana_services["h"])(),filterManager=_getServices.filterManager,indexPatterns=_getServices.indexPatterns,data=_getServices.data;const fetchAnchor=fetchAnchorProvider(indexPatterns,data.search.searchSource.createEmpty());const _fetchContextProvider=fetchContextProvider(indexPatterns),fetchSurroundingDocs=_fetchContextProvider.fetchSurroundingDocs;const _getQueryParameterAct=Object(query_parameters["c"])(filterManager,indexPatterns),setPredecessorCount=_getQueryParameterAct.setPredecessorCount,setQueryParameters=_getQueryParameterAct.setQueryParameters,setSuccessorCount=_getQueryParameterAct.setSuccessorCount;const setFailedStatus=state=>(subject,details={})=>state.loadingStatus[subject]=actions_objectSpread({status:constants["b"].FAILED,reason:constants["a"].UNKNOWN},details);const setLoadedStatus=state=>subject=>state.loadingStatus[subject]={status:constants["b"].LOADED};const setLoadingStatus=state=>subject=>state.loadingStatus[subject]={status:constants["b"].LOADING};const fetchAnchorRow=state=>()=>{const _state$queryParameter=state.queryParameters,indexPatternId=_state$queryParameter.indexPatternId,anchorId=_state$queryParameter.anchorId,sort=_state$queryParameter.sort,tieBreakerField=_state$queryParameter.tieBreakerField;if(!tieBreakerField){return Promise.reject(setFailedStatus(state)("anchor",{reason:constants["a"].INVALID_TIEBREAKER}))}setLoadingStatus(state)("anchor");return Promise.try(()=>fetchAnchor(indexPatternId,anchorId,[external_kbnSharedDeps_Lodash_default.a.fromPairs([sort]),{[tieBreakerField]:sort[1]}])).then(anchorDocument=>{setLoadedStatus(state)("anchor");state.rows.anchor=anchorDocument;return anchorDocument},error=>{setFailedStatus(state)("anchor",{error:error});Object(kibana_services["h"])().toastNotifications.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.context.unableToLoadAnchorDocumentDescription",{defaultMessage:"Unable to load the anchor document"}),text:external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["MarkdownSimple"],null,error.message)});throw error})};const fetchSurroundingRows=(type,state)=>{const _state$queryParameter2=state.queryParameters,indexPatternId=_state$queryParameter2.indexPatternId,sort=_state$queryParameter2.sort,tieBreakerField=_state$queryParameter2.tieBreakerField,anchor=state.rows.anchor;const filters=Object(kibana_services["h"])().filterManager.getFilters();const count=type==="successors"?state.queryParameters.successorCount:state.queryParameters.predecessorCount;if(!tieBreakerField){return Promise.reject(setFailedStatus(state)(type,{reason:constants["a"].INVALID_TIEBREAKER}))}setLoadingStatus(state)(type);const _sort=actions_slicedToArray(sort,2),sortField=_sort[0],sortDir=_sort[1];return Promise.try(()=>fetchSurroundingDocs(type,indexPatternId,anchor,sortField,tieBreakerField,sortDir,count,filters)).then(documents=>{setLoadedStatus(state)(type);state.rows[type]=documents;return documents},error=>{setFailedStatus(state)(type,{error:error});Object(kibana_services["h"])().toastNotifications.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.context.unableToLoadDocumentDescription",{defaultMessage:"Unable to load documents"}),text:external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["MarkdownSimple"],null,error.message)});throw error})};const fetchContextRows=state=>()=>Promise.all([fetchSurroundingRows("predecessors",state),fetchSurroundingRows("successors",state)]);const fetchAllRows=state=>()=>Promise.try(fetchAnchorRow(state)).then(fetchContextRows(state));const fetchContextRowsWithNewQueryParameters=state=>queryParameters=>{setQueryParameters(state)(queryParameters);return fetchContextRows(state)()};const fetchAllRowsWithNewQueryParameters=state=>queryParameters=>{setQueryParameters(state)(queryParameters);return fetchAllRows(state)()};const fetchGivenPredecessorRows=state=>count=>{setPredecessorCount(state)(count);return fetchSurroundingRows("predecessors",state)};const fetchGivenSuccessorRows=state=>count=>{setSuccessorCount(state)(count);return fetchSurroundingRows("successors",state)};const setAllRows=state=>(predecessorRows,anchorRow,successorRows)=>state.rows.all=[...predecessorRows||[],...anchorRow?[anchorRow]:[],...successorRows||[]];return{fetchAllRows:fetchAllRows,fetchAllRowsWithNewQueryParameters:fetchAllRowsWithNewQueryParameters,fetchAnchorRow:fetchAnchorRow,fetchContextRows:fetchContextRows,fetchContextRowsWithNewQueryParameters:fetchContextRowsWithNewQueryParameters,fetchGivenPredecessorRows:fetchGivenPredecessorRows,fetchGivenSuccessorRows:fetchGivenSuccessorRows,setAllRows:setAllRows}}var constants=__webpack_require__(51);function createInitialLoadingStatusState(){return{anchor:constants["b"].UNINITIALIZED,predecessors:constants["b"].UNINITIALIZED,successors:constants["b"].UNINITIALIZED}}},64:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return METRIC_TYPE}));function wrapArray(subj){return Array.isArray(subj)?subj:[subj]}class UnreachableCaseError extends Error{constructor(val){super("Unreachable case: ".concat(val))}}function createUiStatsMetric({type:type,appName:appName,eventName:eventName,count:count=1}){return{type:type,appName:appName,eventName:eventName,count:count}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(37);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class application_usage_ApplicationUsage{constructor(){_defineProperty(this,"currentUsage",void 0)}start(){if(window)window.addEventListener("click",()=>this.currentUsage&&this.currentUsage.numberOfClicks++)}appChanged(appId){const currentUsage=this.currentUsage;if(appId){this.currentUsage={type:METRIC_TYPE.APPLICATION_USAGE,appId:appId,startTime:external_kbnSharedDeps_MomentTimezone_default()(),numberOfClicks:0}}else{this.currentUsage=void 0}return currentUsage}}var stats=__webpack_require__(61);function trackUsageAgent(appName){const userAgent=window&&window.navigator&&window.navigator.userAgent||"";return{type:METRIC_TYPE.USER_AGENT,appName:appName,userAgent:userAgent}}let METRIC_TYPE;(function(METRIC_TYPE){METRIC_TYPE["COUNT"]="count";METRIC_TYPE["LOADED"]="loaded";METRIC_TYPE["CLICK"]="click";METRIC_TYPE["USER_AGENT"]="user_agent";METRIC_TYPE["APPLICATION_USAGE"]="application_usage"})(METRIC_TYPE||(METRIC_TYPE={}));function storage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class ReportStorageManager{constructor(storageKey,storage){storage_defineProperty(this,"storageKey",void 0);storage_defineProperty(this,"storage",void 0);this.storageKey=storageKey;this.storage=storage}get(){if(!this.storage)return;return this.storage.get(this.storageKey)}store(report){if(!this.storage)return;this.storage.set(this.storageKey,report)}}function report_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const REPORT_VERSION=1;class report_ReportManager{constructor(report){report_defineProperty(this,"report",void 0);this.report=report||report_ReportManager.createReport()}static createReport(){return{reportVersion:REPORT_VERSION}}clearReport(){this.report=report_ReportManager.createReport()}isReportEmpty(){const _this$report=this.report,uiStatsMetrics=_this$report.uiStatsMetrics,userAgent=_this$report.userAgent,appUsage=_this$report.application_usage;const noUiStats=!uiStatsMetrics||Object.keys(uiStatsMetrics).length===0;const noUserAgent=!userAgent||Object.keys(userAgent).length===0;const noAppUsage=!appUsage||Object.keys(appUsage).length===0;return noUiStats&&noUserAgent&&noAppUsage}incrementStats(count,stats){const _ref=stats||{},_ref$min=_ref.min,min=_ref$min===void 0?0:_ref$min,_ref$max=_ref.max,max=_ref$max===void 0?0:_ref$max,_ref$sum=_ref.sum,sum=_ref$sum===void 0?0:_ref$sum;const newMin=Math.min(min,count);const newMax=Math.max(max,count);const newAvg=newMin+newMax/2;const newSum=sum+count;return{min:newMin,max:newMax,avg:newAvg,sum:newSum}}assignReports(newMetrics){wrapArray(newMetrics).forEach(newMetric=>this.assignReport(this.report,newMetric));return{report:this.report}}static createMetricKey(metric){switch(metric.type){case METRIC_TYPE.USER_AGENT:{const appName=metric.appName,type=metric.type;return"".concat(appName,"-").concat(type)}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{const appName=metric.appName,eventName=metric.eventName,type=metric.type;return"".concat(appName,"-").concat(type,"-").concat(eventName)}case METRIC_TYPE.APPLICATION_USAGE:return metric.appId;default:throw new UnreachableCaseError(metric)}}assignReport(report,metric){const key=report_ReportManager.createMetricKey(metric);switch(metric.type){case METRIC_TYPE.USER_AGENT:{const appName=metric.appName,type=metric.type,userAgent=metric.userAgent;if(userAgent){report.userAgent={[key]:{key:key,appName:appName,type:type,userAgent:metric.userAgent}}}return}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{const appName=metric.appName,type=metric.type,eventName=metric.eventName,count=metric.count;report.uiStatsMetrics=report.uiStatsMetrics||{};const existingStats=(report.uiStatsMetrics[key]||{}).stats;report.uiStatsMetrics[key]={key:key,appName:appName,eventName:eventName,type:type,stats:this.incrementStats(count,existingStats)};return}case METRIC_TYPE.APPLICATION_USAGE:const numberOfClicks=metric.numberOfClicks,startTime=metric.startTime;const minutesOnScreen=external_kbnSharedDeps_MomentTimezone_default()().diff(startTime,"minutes",true);report.application_usage=report.application_usage||{};const appExistingData=report.application_usage[key]||{minutesOnScreen:0,numberOfClicks:0};report.application_usage[key]={minutesOnScreen:appExistingData.minutesOnScreen+minutesOnScreen,numberOfClicks:appExistingData.numberOfClicks+numberOfClicks};break;default:throw new UnreachableCaseError(metric)}}}report_defineProperty(report_ReportManager,"REPORT_VERSION",REPORT_VERSION);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function reporter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class reporter_Reporter{constructor(config){var _this=this;reporter_defineProperty(this,"checkInterval",void 0);reporter_defineProperty(this,"interval",void 0);reporter_defineProperty(this,"lastAppId",void 0);reporter_defineProperty(this,"http",void 0);reporter_defineProperty(this,"reportManager",void 0);reporter_defineProperty(this,"storageManager",void 0);reporter_defineProperty(this,"applicationUsage",void 0);reporter_defineProperty(this,"debug",void 0);reporter_defineProperty(this,"retryCount",0);reporter_defineProperty(this,"maxRetries",3);reporter_defineProperty(this,"started",false);reporter_defineProperty(this,"start",()=>{if(!this.interval){this.interval=setTimeout(()=>{this.interval=undefined;this.sendReports()},this.checkInterval)}if(this.started){return}if(window&&document){window.addEventListener("beforeunload",()=>this.reportApplicationUsage());document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="visible"&&this.lastAppId){this.reportApplicationUsage(this.lastAppId)}else if(document.visibilityState==="hidden"){this.reportApplicationUsage()}})}this.started=true;this.applicationUsage.start()});reporter_defineProperty(this,"reportUiStats",(appName,type,eventNames,count)=>{const metrics=wrapArray(eventNames).map(eventName=>{this.log("".concat(type," Metric -> (").concat(appName,":").concat(eventName,"):"));const report=createUiStatsMetric({type:type,appName:appName,eventName:eventName,count:count});this.log(report);return report});this.saveToReport(metrics)});reporter_defineProperty(this,"reportUserAgent",appName=>{this.log("Reporting user-agent.");const report=trackUsageAgent(appName);this.saveToReport([report])});reporter_defineProperty(this,"sendReports",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var versionMismatch;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.reportManager.isReportEmpty()){_context.next=13;break}_context.prev=1;_context.next=4;return _this.http(_this.reportManager.report);case 4:_this.flushReport();_context.next=13;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);_this.log("Error Sending Metrics Report ".concat(_context.t0));_this.retryCount=_this.retryCount+1;versionMismatch=_this.reportManager.report.reportVersion!==report_ReportManager.REPORT_VERSION;if(versionMismatch||_this.retryCount>_this.maxRetries){_this.flushReport()}case 13:_this.start();case 14:case"end":return _context.stop()}}),_callee,null,[[1,7]])}))));const http=config.http,storage=config.storage,debug=config.debug,_config$checkInterval=config.checkInterval,checkInterval=_config$checkInterval===void 0?9e4:_config$checkInterval,_config$storageKey=config.storageKey,storageKey=_config$storageKey===void 0?"analytics":_config$storageKey;this.http=http;this.checkInterval=checkInterval;this.applicationUsage=new application_usage_ApplicationUsage;this.storageManager=new ReportStorageManager(storageKey,storage);const storedReport=this.storageManager.get();this.reportManager=new report_ReportManager(storedReport);this.debug=!!debug}saveToReport(newMetrics){this.reportManager.assignReports(newMetrics);this.storageManager.store(this.reportManager.report)}flushReport(){this.retryCount=0;this.reportManager.clearReport();this.storageManager.store(this.reportManager.report)}log(message){if(this.debug){console.debug(message)}}reportApplicationUsage(appId){this.log("Reporting application changed to ".concat(appId));this.lastAppId=appId||this.lastAppId;const appChangedReport=this.applicationUsage.appChanged(appId);if(appChangedReport)this.saveToReport([appChangedReport])}}},65:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DocViewer}));var doc_viewer=__webpack_require__(100);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var kibana_services=__webpack_require__(3);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(6);function DocViewRenderTab({render:render,renderProps:renderProps}){const ref=Object(external_kbnSharedDeps_React_["useRef"])(null);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(ref&&ref.current){return render(ref.current,renderProps)}},[render,renderProps]);return external_kbnSharedDeps_React_default.a.createElement("div",{ref:ref})}var doc_viewer_render_error=__webpack_require__(21);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class doc_viewer_tab_DocViewerTab extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);_defineProperty(this,"state",{hasError:false,error:""})}static getDerivedStateFromError(error){return{hasError:true,error:error}}shouldComponentUpdate(nextProps,nextState){return nextProps.renderProps.hit._id!==this.props.renderProps.hit._id||nextProps.id!==this.props.id||nextState.hasError}render(){const _this$props=this.props,component=_this$props.component,render=_this$props.render,renderProps=_this$props.renderProps,title=_this$props.title;const _this$state=this.state,hasError=_this$state.hasError,error=_this$state.error;if(hasError&&error){return external_kbnSharedDeps_React_default.a.createElement(doc_viewer_render_error["a"],{error:error})}else if(!render&&!component){return external_kbnSharedDeps_React_default.a.createElement(doc_viewer_render_error["a"],{error:"Invalid plugin ".concat(title,", there is neither a (react) component nor a render function provided")})}if(render){return external_kbnSharedDeps_React_default.a.createElement(DocViewRenderTab,{render:render,renderProps:renderProps})}const Component=component;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(Component,renderProps))}}function DocViewer(renderProps){const docViewsRegistry=Object(kibana_services["b"])();const tabs=docViewsRegistry.getDocViewsSorted(renderProps.hit).map(({title:title,render:render,component:component},idx)=>({id:"kbn_doc_viewer_tab_".concat(idx),name:title,content:external_kbnSharedDeps_React_default.a.createElement(doc_viewer_tab_DocViewerTab,{id:idx,title:title,component:component,renderProps:renderProps,render:render})}));if(!tabs.length){return null}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"kbnDocViewer"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabbedContent"],{tabs:tabs}))}},66:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return DiscoverUninitialized}));__webpack_require__.d(__webpack_exports__,"a",(function(){return histogram_DiscoverHistogram}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(6);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);const DiscoverUninitialized=({onRefresh:onRefresh})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPage"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{horizontalPosition:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"discoverApp",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.uninitializedTitle",defaultMessage:"Start searching"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.uninitializedText",defaultMessage:"Write a query, add some filters, or simply hit Refresh to retrieve results for the current query."})),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"primary",fill:true,onClick:onRefresh},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.uninitializedRefreshButtonText",defaultMessage:"Refresh data"}))})))));var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(37);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);var external_kbnSharedDeps_Theme_euiLightVars_=__webpack_require__(41);var external_kbnSharedDeps_Theme_euiLightVars_default=__webpack_require__.n(external_kbnSharedDeps_Theme_euiLightVars_);var external_kbnSharedDeps_Theme_euiDarkVars_=__webpack_require__(42);var external_kbnSharedDeps_Theme_euiDarkVars_default=__webpack_require__.n(external_kbnSharedDeps_Theme_euiDarkVars_);var external_kbnSharedDeps_ElasticCharts_=__webpack_require__(43);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var external_kbnSharedDeps_Rxjs_=__webpack_require__(17);var kibana_services=__webpack_require__(3);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function findIntervalFromDuration(dateValue,esValue,esUnit,timeZone){const date=external_kbnSharedDeps_MomentTimezone_default.a.tz(dateValue,timeZone);const startOfDate=external_kbnSharedDeps_MomentTimezone_default.a.tz(date,timeZone).startOf(esUnit);const endOfDate=external_kbnSharedDeps_MomentTimezone_default.a.tz(date,timeZone).startOf(esUnit).add(esValue,esUnit);return endOfDate.valueOf()-startOfDate.valueOf()}function getIntervalInMs(value,esValue,esUnit,timeZone){switch(esUnit){case"s":return 1e3*esValue;case"ms":return 1*esValue;default:return findIntervalFromDuration(value,esValue,esUnit,timeZone)}}function getTimezone(uiSettings){if(uiSettings.isDefault("dateFormat:tz")){const detectedTimezone=external_kbnSharedDeps_MomentTimezone_default.a.tz.guess();if(detectedTimezone)return detectedTimezone;else return external_kbnSharedDeps_MomentTimezone_default()().format("Z")}else{return uiSettings.get("dateFormat:tz","Browser")}}function findMinInterval(xValues,esValue,esUnit,timeZone){return xValues.reduce((minInterval,currentXvalue,index)=>{let currentDiff=minInterval;if(index>0){currentDiff=Math.abs(xValues[index-1]-currentXvalue)}const singleUnitInterval=getIntervalInMs(currentXvalue,esValue,esUnit,timeZone);return Math.min(minInterval,singleUnitInterval,currentDiff)},Number.MAX_SAFE_INTEGER)}class histogram_DiscoverHistogram extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);_defineProperty(this,"subscription",void 0);_defineProperty(this,"state",{chartsTheme:Object(kibana_services["h"])().theme.chartsDefaultTheme,chartsBaseTheme:Object(kibana_services["h"])().theme.chartsDefaultBaseTheme});_defineProperty(this,"onBrushEnd",({x:x})=>{if(!x){return}const _x=_slicedToArray(x,2),from=_x[0],to=_x[1];this.props.timefilterUpdateHandler({from:from,to:to})});_defineProperty(this,"onElementClick",xInterval=>([elementData])=>{const startRange=elementData[0].x;const range={from:startRange,to:startRange+xInterval};this.props.timefilterUpdateHandler(range)});_defineProperty(this,"formatXValue",val=>{const xAxisFormat=this.props.chartData.xAxisFormat.params.pattern;return external_kbnSharedDeps_MomentTimezone_default()(val).format(xAxisFormat)});_defineProperty(this,"renderBarTooltip",(xInterval,domainStart,domainEnd)=>headerData=>{const headerDataValue=headerData.value;const formattedValue=this.formatXValue(headerDataValue);const partialDataText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.histogram.partialData.bucketTooltipText",{defaultMessage:"The selected time range does not include this entire bucket, it may contain partial data."});if(headerDataValue<domainStart||headerDataValue+xInterval>domainEnd){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",className:"dscHistogram__header--partial",responsive:false,gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"iInCircle"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,partialDataText)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement("p",null,formattedValue))}return formattedValue})}componentDidMount(){this.subscription=Object(external_kbnSharedDeps_Rxjs_["combineLatest"])(Object(kibana_services["h"])().theme.chartsTheme$,Object(kibana_services["h"])().theme.chartsBaseTheme$).subscribe(([chartsTheme,chartsBaseTheme])=>this.setState({chartsTheme:chartsTheme,chartsBaseTheme:chartsBaseTheme}))}componentWillUnmount(){if(this.subscription){this.subscription.unsubscribe()}}render(){var _data$,_data$2;const uiSettings=Object(kibana_services["h"])().uiSettings;const timeZone=getTimezone(uiSettings);const chartData=this.props.chartData;const _this$state=this.state,chartsTheme=_this$state.chartsTheme,chartsBaseTheme=_this$state.chartsBaseTheme;if(!chartData){return null}const data=chartData.values;const _chartData$ordered=chartData.ordered,intervalESValue=_chartData$ordered.intervalESValue,intervalESUnit=_chartData$ordered.intervalESUnit,interval=_chartData$ordered.interval;const xInterval=interval.asMilliseconds();const xValues=chartData.xAxisOrderedValues;const lastXValue=xValues[xValues.length-1];const domain=chartData.ordered;const domainStart=domain.min.valueOf();const domainEnd=domain.max.valueOf();const domainMin=((_data$=data[0])===null||_data$===void 0?void 0:_data$.x)>domainStart?domainStart:(_data$2=data[0])===null||_data$2===void 0?void 0:_data$2.x;const domainMax=domainEnd-xInterval>lastXValue?domainEnd-xInterval:lastXValue;const xDomain={min:domainMin,max:domainMax,minInterval:findMinInterval(xValues,intervalESValue,intervalESUnit,timeZone)};const now=external_kbnSharedDeps_MomentTimezone_default()();const isAnnotationAtEdge=external_kbnSharedDeps_MomentTimezone_default()(domainEnd).add(6e4).isAfter(now)&&now.isAfter(domainEnd);const lineAnnotationValue=isAnnotationAtEdge?domainEnd:now;const lineAnnotationData=[{dataValue:lineAnnotationValue}];const isDarkMode=uiSettings.get("theme:darkMode");const lineAnnotationStyle={line:{strokeWidth:2,stroke:isDarkMode?external_kbnSharedDeps_Theme_euiDarkVars_default.a.euiColorDanger:external_kbnSharedDeps_Theme_euiLightVars_default.a.euiColorDanger,opacity:.7}};const rectAnnotations=[];if(domainStart!==domainMin){rectAnnotations.push({coordinates:{x1:domainStart}})}if(domainEnd!==domainMax){rectAnnotations.push({coordinates:{x0:domainEnd}})}const rectAnnotationStyle={stroke:isDarkMode?external_kbnSharedDeps_Theme_euiDarkVars_default.a.euiColorLightShade:external_kbnSharedDeps_Theme_euiLightVars_default.a.euiColorDarkShade,strokeWidth:0,opacity:isDarkMode?.6:.2,fill:isDarkMode?external_kbnSharedDeps_Theme_euiDarkVars_default.a.euiColorLightShade:external_kbnSharedDeps_Theme_euiLightVars_default.a.euiColorDarkShade};const tooltipProps={headerFormatter:this.renderBarTooltip(xInterval,domainStart,domainEnd),type:external_kbnSharedDeps_ElasticCharts_["TooltipType"].VerticalCursor};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Chart"],{size:"100%"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Settings"],{xDomain:xDomain,onBrushEnd:this.onBrushEnd,onElementClick:this.onElementClick(xInterval),tooltip:tooltipProps,theme:chartsTheme,baseTheme:chartsBaseTheme}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Axis"],{id:"discover-histogram-left-axis",position:external_kbnSharedDeps_ElasticCharts_["Position"].Left,ticks:5,title:chartData.yAxisLabel}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Axis"],{id:"discover-histogram-bottom-axis",position:external_kbnSharedDeps_ElasticCharts_["Position"].Bottom,title:chartData.xAxisLabel,tickFormat:this.formatXValue,ticks:10}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["LineAnnotation"],{id:"line-annotation",domainType:external_kbnSharedDeps_ElasticCharts_["AnnotationDomainTypes"].XDomain,dataValues:lineAnnotationData,hideTooltips:true,style:lineAnnotationStyle}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["RectAnnotation"],{dataValues:rectAnnotations,id:"rect-annotation",zIndex:2,style:rectAnnotationStyle,hideTooltips:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["HistogramBarSeries"],{id:"discover-histogram",minBarHeight:2,xScaleType:external_kbnSharedDeps_ElasticCharts_["ScaleType"].Time,yScaleType:external_kbnSharedDeps_ElasticCharts_["ScaleType"].Linear,xAccessor:"x",yAccessors:["y"],data:data,timeZone:timeZone,name:chartData.yAxisLabel}))}}},67:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ActionBar}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(6);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);function ActionBarWarning({docCount:docCount,type:type}){if(type==="predecessors"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning","data-test-subj":"predecessorsWarningMsg",iconType:"bolt",title:docCount===0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.newerDocumentsWarningZero",defaultMessage:"No documents newer than the anchor could be found."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.newerDocumentsWarning",defaultMessage:"Only {docCount} documents newer than the anchor could be found.",values:{docCount:docCount}}),size:"s"})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning","data-test-subj":"successorsWarningMsg",iconType:"bolt",title:docCount===0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.olderDocumentsWarningZero",defaultMessage:"No documents older than the anchor could be found."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.olderDocumentsWarning",defaultMessage:"Only {docCount} documents older than the anchor could be found.",values:{docCount:docCount}}),size:"s"})}var constants=__webpack_require__(48);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ActionBar({defaultStepSize:defaultStepSize,docCount:docCount,docCountAvailable:docCountAvailable,isDisabled:isDisabled,isLoading:isLoading,onChangeCount:onChangeCount,type:type}){const showWarning=!isDisabled&&!isLoading&&docCountAvailable<docCount;const isSuccessor=type==="successors";const _useState=Object(external_kbnSharedDeps_React_["useState"])(docCount),_useState2=_slicedToArray(_useState,2),newDocCount=_useState2[0],setNewDocCount=_useState2[1];const isValid=value=>value>=constants["b"]&&value<=constants["a"];const onSubmit=ev=>{ev.preventDefault();if(newDocCount!==docCount&&isValid(newDocCount)){onChangeCount(newDocCount)}};Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(newDocCount!==docCount&&newDocCount===0){setNewDocCount(docCount)}},[docCount,newDocCount]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement("form",{onSubmit:onSubmit},isSuccessor&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),isSuccessor&&showWarning&&external_kbnSharedDeps_React_default.a.createElement(ActionBarWarning,{docCount:docCountAvailable,type:type}),isSuccessor&&showWarning&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"row",gutterSize:"s",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"".concat(type,"LoadMoreButton"),iconType:isSuccessor?"arrowDown":"arrowUp",isDisabled:isDisabled,isLoading:isLoading,onClick:()=>{const value=newDocCount+defaultStepSize;if(isValid(value)){setNewDocCount(value);onChangeCount(value)}},flush:"right"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.loadButtonLabel",defaultMessage:"Load"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{"aria-label":isSuccessor?external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.context.olderDocumentsAriaLabel",{defaultMessage:"Number of older documents"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("discover.context.newerDocumentsAriaLabel",{defaultMessage:"Number of newer documents"}),className:"cxtSizePicker","data-test-subj":"".concat(type,"CountPicker"),disabled:isDisabled,min:constants["b"],max:constants["a"],onChange:ev=>{setNewDocCount(ev.target.valueAsNumber)},onBlur:()=>{if(newDocCount!==docCount&&isValid(newDocCount)){onChangeCount(newDocCount)}},type:"number",value:newDocCount>=0?newDocCount:""}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{display:"center"},isSuccessor?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.olderDocumentsDescription",defaultMessage:"older documents"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"discover.context.newerDocumentsDescription",defaultMessage:"newer documents"})))),!isSuccessor&&showWarning&&external_kbnSharedDeps_React_default.a.createElement(ActionBarWarning,{docCount:docCountAvailable,type:type}),!isSuccessor&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"})))}},68:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return getQueryParameterActions}));__webpack_require__.d(__webpack_exports__,"a",(function(){return constants["c"]}));__webpack_require__.d(__webpack_exports__,"b",(function(){return query_parameters_state["a"]}));var external_kbnSharedDeps_Lodash_=__webpack_require__(11);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var public_=__webpack_require__(4);var popularize_field=__webpack_require__(59);var constants=__webpack_require__(48);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getQueryParameterActions(filterManager,indexPatterns){const setPredecessorCount=state=>predecessorCount=>state.queryParameters.predecessorCount=clamp(constants["b"],constants["a"],predecessorCount);const setSuccessorCount=state=>successorCount=>state.queryParameters.successorCount=clamp(constants["b"],constants["a"],successorCount);const setQueryParameters=state=>queryParameters=>Object.assign(state.queryParameters,external_kbnSharedDeps_Lodash_default.a.pick(queryParameters,constants["c"]));const updateFilters=()=>filters=>{filterManager.setFilters(filters)};const addFilter=state=>function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(field,values,operation){var indexPatternId,newFilters,indexPattern;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:indexPatternId=state.queryParameters.indexPatternId;newFilters=public_["esFilters"].generateFilters(filterManager,field,values,operation,indexPatternId);filterManager.addFilters(newFilters);if(!indexPatterns){_context.next=9;break}_context.next=6;return indexPatterns.get(indexPatternId);case 6:indexPattern=_context.sent;_context.next=9;return Object(popularize_field["a"])(indexPattern,field.name,indexPatterns);case 9:case"end":return _context.stop()}}),_callee)})));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}();return{addFilter:addFilter,updateFilters:updateFilters,setPredecessorCount:setPredecessorCount,setQueryParameters:setQueryParameters,setSuccessorCount:setSuccessorCount}}function clamp(minimum,maximum,value){return Math.max(Math.min(maximum,value),minimum)}var query_parameters_state=__webpack_require__(52)},77:function(module,exports){
/**
 * @license AngularJS v1.8.0
 * (c) 2010-2020 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(window,angular){"use strict";var $sanitizeMinErr=angular.$$minErr("$sanitize");var bind;var extend;var forEach;var isArray;var isDefined;var lowercase;var noop;var nodeContains;var htmlParser;var htmlSanitizeWriter;function $SanitizeProvider(){var hasBeenInstantiated=false;var svgEnabled=false;this.$get=["$$sanitizeUri",function($$sanitizeUri){hasBeenInstantiated=true;if(svgEnabled){extend(validElements,svgElements)}return function(html){var buf=[];htmlParser(html,htmlSanitizeWriter(buf,(function(uri,isImage){return!/^unsafe:/.test($$sanitizeUri(uri,isImage))})));return buf.join("")}}];this.enableSvg=function(enableSvg){if(isDefined(enableSvg)){svgEnabled=enableSvg;return this}else{return svgEnabled}};this.addValidElements=function(elements){if(!hasBeenInstantiated){if(isArray(elements)){elements={htmlElements:elements}}addElementsTo(svgElements,elements.svgElements);addElementsTo(voidElements,elements.htmlVoidElements);addElementsTo(validElements,elements.htmlVoidElements);addElementsTo(validElements,elements.htmlElements)}return this};this.addValidAttrs=function(attrs){if(!hasBeenInstantiated){extend(validAttrs,arrayToMap(attrs,true))}return this};bind=angular.bind;extend=angular.extend;forEach=angular.forEach;isArray=angular.isArray;isDefined=angular.isDefined;lowercase=angular.$$lowercase;noop=angular.noop;htmlParser=htmlParserImpl;htmlSanitizeWriter=htmlSanitizeWriterImpl;nodeContains=window.Node.prototype.contains||function(arg){return!!(this.compareDocumentPosition(arg)&16)};var SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^#-~ |!])/g;var voidElements=stringToMap("area,br,col,hr,img,wbr");var optionalEndTagBlockElements=stringToMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=stringToMap("rp,rt"),optionalEndTagElements=extend({},optionalEndTagInlineElements,optionalEndTagBlockElements);var blockElements=extend({},optionalEndTagBlockElements,stringToMap("address,article,"+"aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,"+"h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul"));var inlineElements=extend({},optionalEndTagInlineElements,stringToMap("a,abbr,acronym,b,"+"bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,"+"samp,small,span,strike,strong,sub,sup,time,tt,u,var"));var svgElements=stringToMap("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,"+"hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,"+"radialGradient,rect,stop,svg,switch,text,title,tspan");var blockedElements=stringToMap("script,style");var validElements=extend({},voidElements,blockElements,inlineElements,optionalEndTagElements);var uriAttrs=stringToMap("background,cite,href,longdesc,src,xlink:href,xml:base");var htmlAttrs=stringToMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,"+"color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,"+"ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,"+"scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,"+"valign,value,vspace,width");var svgAttrs=stringToMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,"+"baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,"+"cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,"+"font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,"+"height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,"+"marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,"+"max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,"+"path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,"+"requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,"+"stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,"+"stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,"+"stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,"+"underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,"+"width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,"+"xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",true);var validAttrs=extend({},uriAttrs,svgAttrs,htmlAttrs);function stringToMap(str,lowercaseKeys){return arrayToMap(str.split(","),lowercaseKeys)}function arrayToMap(items,lowercaseKeys){var obj={},i;for(i=0;i<items.length;i++){obj[lowercaseKeys?lowercase(items[i]):items[i]]=true}return obj}function addElementsTo(elementsMap,newElements){if(newElements&&newElements.length){extend(elementsMap,arrayToMap(newElements))}}var getInertBodyElement=function(window,document){var inertDocument;if(document&&document.implementation){inertDocument=document.implementation.createHTMLDocument("inert")}else{throw $sanitizeMinErr("noinert","Can't create an inert html document")}var inertBodyElement=(inertDocument.documentElement||inertDocument.getDocumentElement()).querySelector("body");inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>';if(!inertBodyElement.querySelector("svg")){return getInertBodyElement_XHR}else{inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">';if(inertBodyElement.querySelector("svg img")){return getInertBodyElement_DOMParser}else{return getInertBodyElement_InertDocument}}function getInertBodyElement_XHR(html){html="<remove></remove>"+html;try{html=encodeURI(html)}catch(e){return undefined}var xhr=new window.XMLHttpRequest;xhr.responseType="document";xhr.open("GET","data:text/html;charset=utf-8,"+html,false);xhr.send(null);var body=xhr.response.body;body.firstChild.remove();return body}function getInertBodyElement_DOMParser(html){html="<remove></remove>"+html;try{var body=(new window.DOMParser).parseFromString(html,"text/html").body;body.firstChild.remove();return body}catch(e){return undefined}}function getInertBodyElement_InertDocument(html){inertBodyElement.innerHTML=html;if(document.documentMode){stripCustomNsAttrs(inertBodyElement)}return inertBodyElement}}(window,window.document);function htmlParserImpl(html,handler){if(html===null||html===undefined){html=""}else if(typeof html!=="string"){html=""+html}var inertBodyElement=getInertBodyElement(html);if(!inertBodyElement)return"";var mXSSAttempts=5;do{if(mXSSAttempts===0){throw $sanitizeMinErr("uinput","Failed to sanitize html because the input is unstable")}mXSSAttempts--;html=inertBodyElement.innerHTML;inertBodyElement=getInertBodyElement(html)}while(html!==inertBodyElement.innerHTML);var node=inertBodyElement.firstChild;while(node){switch(node.nodeType){case 1:handler.start(node.nodeName.toLowerCase(),attrToMap(node.attributes));break;case 3:handler.chars(node.textContent);break}var nextNode;if(!(nextNode=node.firstChild)){if(node.nodeType===1){handler.end(node.nodeName.toLowerCase())}nextNode=getNonDescendant("nextSibling",node);if(!nextNode){while(nextNode==null){node=getNonDescendant("parentNode",node);if(node===inertBodyElement)break;nextNode=getNonDescendant("nextSibling",node);if(node.nodeType===1){handler.end(node.nodeName.toLowerCase())}}}}node=nextNode}while(node=inertBodyElement.firstChild){inertBodyElement.removeChild(node)}}function attrToMap(attrs){var map={};for(var i=0,ii=attrs.length;i<ii;i++){var attr=attrs[i];map[attr.name]=attr.value}return map}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,(function(value){var hi=value.charCodeAt(0);var low=value.charCodeAt(1);return"&#"+((hi-55296)*1024+(low-56320)+65536)+";"})).replace(NON_ALPHANUMERIC_REGEXP,(function(value){return"&#"+value.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriterImpl(buf,uriValidator){var ignoreCurrentElement=false;var out=bind(buf,buf.push);return{start:function(tag,attrs){tag=lowercase(tag);if(!ignoreCurrentElement&&blockedElements[tag]){ignoreCurrentElement=tag}if(!ignoreCurrentElement&&validElements[tag]===true){out("<");out(tag);forEach(attrs,(function(value,key){var lkey=lowercase(key);var isImage=tag==="img"&&lkey==="src"||lkey==="background";if(validAttrs[lkey]===true&&(uriAttrs[lkey]!==true||uriValidator(value,isImage))){out(" ");out(key);out('="');out(encodeEntities(value));out('"')}}));out(">")}},end:function(tag){tag=lowercase(tag);if(!ignoreCurrentElement&&validElements[tag]===true&&voidElements[tag]!==true){out("</");out(tag);out(">")}if(tag==ignoreCurrentElement){ignoreCurrentElement=false}},chars:function(chars){if(!ignoreCurrentElement){out(encodeEntities(chars))}}}}function stripCustomNsAttrs(node){while(node){if(node.nodeType===window.Node.ELEMENT_NODE){var attrs=node.attributes;for(var i=0,l=attrs.length;i<l;i++){var attrNode=attrs[i];var attrName=attrNode.name.toLowerCase();if(attrName==="xmlns:ns1"||attrName.lastIndexOf("ns1:",0)===0){node.removeAttributeNode(attrNode);i--;l--}}}var nextNode=node.firstChild;if(nextNode){stripCustomNsAttrs(nextNode)}node=getNonDescendant("nextSibling",node)}}function getNonDescendant(propName,node){var nextNode=node[propName];if(nextNode&&nodeContains.call(node,nextNode)){throw $sanitizeMinErr("elclob","Failed to sanitize html because the element is clobbered: {0}",node.outerHTML||node.outerText)}return nextNode}}function sanitizeText(chars){var buf=[];var writer=htmlSanitizeWriter(buf,noop);writer.chars(chars);return buf.join("")}angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider).info({angularVersion:"1.8.0"});angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,MAILTO_REGEXP=/^mailto:/i;var linkyMinErr=angular.$$minErr("linky");var isDefined=angular.isDefined;var isFunction=angular.isFunction;var isObject=angular.isObject;var isString=angular.isString;return function(text,target,attributes){if(text==null||text==="")return text;if(!isString(text))throw linkyMinErr("notstring","Expected string but received: {0}",text);var attributesFn=isFunction(attributes)?attributes:isObject(attributes)?function getAttributesObject(){return attributes}:function getEmptyAttributesObject(){return{}};var match;var raw=text;var html=[];var url;var i;while(match=raw.match(LINKY_URL_REGEXP)){url=match[0];if(!match[2]&&!match[4]){url=(match[3]?"http://":"mailto:")+url}i=match.index;addText(raw.substr(0,i));addLink(url,match[0].replace(MAILTO_REGEXP,""));raw=raw.substring(i+match[0].length)}addText(raw);return $sanitize(html.join(""));function addText(text){if(!text){return}html.push(sanitizeText(text))}function addLink(url,text){var key,linkAttributes=attributesFn(url);html.push("<a ");for(key in linkAttributes){html.push(key+'="'+linkAttributes[key]+'" ')}if(isDefined(target)&&!("target"in linkAttributes)){html.push('target="',target,'" ')}html.push('href="',url.replace(/"/g,"&quot;"),'">');addText(text);html.push("</a>")}}}])})(window,window.angular)}}]);