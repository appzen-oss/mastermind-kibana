(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=14)})([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_savedObjects_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15);var _node_modules_val_loader_dist_cjs_js_key_savedObjects_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_savedObjects_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/savedObjects/public",__webpack_require__,25)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["savedObjects"]},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(17);case"v7light":return __webpack_require__(19);case"v8dark":return __webpack_require__(21);case"v8light":return __webpack_require__(23)}},function(module,exports,__webpack_require__){var api=__webpack_require__(6);var content=__webpack_require__(18);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(7);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(6);var content=__webpack_require__(20);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(7);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(6);var content=__webpack_require__(22);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(7);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(6);var content=__webpack_require__(24);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(7);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n",""]);module.exports=exports},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"OnSaveProps",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedObjectSaveModal",(function(){return saved_object_save_modal_SavedObjectSaveModal}));__webpack_require__.d(__webpack_exports__,"SavedObjectSaveModalOrigin",(function(){return SavedObjectSaveModalOrigin}));__webpack_require__.d(__webpack_exports__,"OriginSaveModalProps",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SaveModalState",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SaveResult",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"showSaveModal",(function(){return showSaveModal}));__webpack_require__.d(__webpack_exports__,"getSavedObjectFinder",(function(){return getSavedObjectFinder}));__webpack_require__.d(__webpack_exports__,"SavedObjectFinderUi",(function(){return saved_object_finder_SavedObjectFinderUi}));__webpack_require__.d(__webpack_exports__,"SavedObjectMetaData",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedObjectLoader",(function(){return saved_object_loader_SavedObjectLoader}));__webpack_require__.d(__webpack_exports__,"SavedObjectLoaderFindOptions",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"checkForDuplicateTitle",(function(){return checkForDuplicateTitle}));__webpack_require__.d(__webpack_exports__,"saveWithConfirmation",(function(){return saveWithConfirmation}));__webpack_require__.d(__webpack_exports__,"isErrorNonFatal",(function(){return isErrorNonFatal}));__webpack_require__.d(__webpack_exports__,"SavedObjectDecorator",(function(){return decorators_types["SavedObjectDecorator"]}));__webpack_require__.d(__webpack_exports__,"SavedObjectDecoratorFactory",(function(){return decorators_types["SavedObjectDecoratorFactory"]}));__webpack_require__.d(__webpack_exports__,"SavedObjectDecoratorConfig",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedObjectSaveOpts",(function(){return public_types["SavedObjectSaveOpts"]}));__webpack_require__.d(__webpack_exports__,"SavedObject",(function(){return public_types["SavedObject"]}));__webpack_require__.d(__webpack_exports__,"SavedObjectConfig",(function(){return public_types["SavedObjectConfig"]}));__webpack_require__.d(__webpack_exports__,"PER_PAGE_SETTING",(function(){return PER_PAGE_SETTING}));__webpack_require__.d(__webpack_exports__,"LISTING_LIMIT_SETTING",(function(){return LISTING_LIMIT_SETTING}));__webpack_require__.d(__webpack_exports__,"SavedObjectsStart",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedObjectSetup",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var public_0=__webpack_require__(16);var external_kbnSharedDeps_Lodash_=__webpack_require__(3);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function hydrateIndexPattern(_x,_x2,_x3,_x4){return _hydrateIndexPattern.apply(this,arguments)}function _hydrateIndexPattern(){_hydrateIndexPattern=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id,savedObject,indexPatterns,config){var indexPattern,index,indexObj;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:indexPattern=config.indexPattern;if(savedObject.searchSource){_context.next=3;break}return _context.abrupt("return",null);case 3:index=id||indexPattern||savedObject.searchSource.getOwnField("index");if(!(typeof index!=="string"||!index)){_context.next=6;break}return _context.abrupt("return",null);case 6:_context.next=8;return indexPatterns.get(index);case 8:indexObj=_context.sent;savedObject.searchSource.setField("index",indexObj);return _context.abrupt("return",indexObj);case 11:case"end":return _context.stop()}}),_callee)})));return _hydrateIndexPattern.apply(this,arguments)}function initialize_saved_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function initialize_saved_object_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){initialize_saved_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){initialize_saved_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function intializeSavedObject(_x,_x2,_x3){return _intializeSavedObject.apply(this,arguments)}function _intializeSavedObject(){_intializeSavedObject=initialize_saved_object_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject,savedObjectsClient,config){var esType,resp,respMapped;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:esType=config.type;if(esType){_context.next=3;break}throw new Error("You must define a type name to use SavedObject objects.");case 3:if(savedObject.id){_context.next=12;break}external_kbnSharedDeps_Lodash_default.a.assign(savedObject,savedObject.defaults);_context.next=7;return savedObject.hydrateIndexPattern();case 7:if(!(typeof config.afterESResp==="function")){_context.next=11;break}_context.next=10;return config.afterESResp(savedObject);case 10:savedObject=_context.sent;case 11:return _context.abrupt("return",savedObject);case 12:_context.next=14;return savedObjectsClient.get(esType,savedObject.id);case 14:resp=_context.sent;respMapped={_id:resp.id,_type:resp.type,_source:external_kbnSharedDeps_Lodash_default.a.cloneDeep(resp.attributes),references:resp.references,found:!!resp._version};_context.next=18;return savedObject.applyESResp(respMapped);case 18:if(!(typeof config.init==="function")){_context.next=21;break}_context.next=21;return config.init.call(savedObject);case 21:return _context.abrupt("return",savedObject);case 22:case"end":return _context.stop()}}),_callee)})));return _intializeSavedObject.apply(this,arguments)}var public_=__webpack_require__(5);var types=__webpack_require__(9);const expandShorthand=sh=>Object(external_kbnSharedDeps_Lodash_["mapValues"])(sh,val=>{const fieldMap=Object(external_kbnSharedDeps_Lodash_["isString"])(val)?{type:val}:val;const json={type:public_["ES_FIELD_TYPES"].TEXT,_serialize(v){if(v)return JSON.stringify(v)},_deserialize(v){if(v)return JSON.parse(v)}};return fieldMap.type==="json"?json:fieldMap});function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function serializeSavedObject(savedObject,config){var _config$mapping;const mapping=expandShorthand((_config$mapping=config.mapping)!==null&&_config$mapping!==void 0?_config$mapping:{});const attributes={};const references=[];external_kbnSharedDeps_Lodash_default.a.forOwn(mapping,(fieldMapping,fieldName)=>{if(typeof fieldName!=="string"){return}const savedObjectFieldVal=savedObject[fieldName];if(savedObjectFieldVal!=null){attributes[fieldName]=fieldMapping._serialize?fieldMapping._serialize(savedObjectFieldVal):savedObjectFieldVal}});if(savedObject.searchSource){const _savedObject$searchSo=savedObject.searchSource.serialize(),searchSourceJSON=_savedObject$searchSo.searchSourceJSON,searchSourceReferences=_savedObject$searchSo.references;attributes.kibanaSavedObjectMeta={searchSourceJSON:searchSourceJSON};references.push(...searchSourceReferences)}if(savedObject.searchSourceFields){const _extractSearchSourceR=Object(public_["extractSearchSourceReferences"])(savedObject.searchSourceFields),_extractSearchSourceR2=_slicedToArray(_extractSearchSourceR,2),searchSourceFields=_extractSearchSourceR2[0],searchSourceReferences=_extractSearchSourceR2[1];const searchSourceJSON=JSON.stringify(searchSourceFields);attributes.kibanaSavedObjectMeta={searchSourceJSON:searchSourceJSON};references.push(...searchSourceReferences)}if(savedObject.unresolvedIndexPatternReference){references.push(savedObject.unresolvedIndexPatternReference)}return{attributes:attributes,references:references}}var kibanaUtils_public_=__webpack_require__(12);function apply_es_resp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function apply_es_resp_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){apply_es_resp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){apply_es_resp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function applyESResp(_x,_x2,_x3,_x4){return _applyESResp.apply(this,arguments)}function _applyESResp(){_applyESResp=apply_es_resp_asyncToGenerator(regeneratorRuntime.mark((function _callee(resp,savedObject,config,dependencies){var _config$mapping;var mapping,savedObjectType,meta,searchSourceValues,injectReferences;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:mapping=expandShorthand((_config$mapping=config.mapping)!==null&&_config$mapping!==void 0?_config$mapping:{});savedObjectType=config.type||"";savedObject._source=external_kbnSharedDeps_Lodash_default.a.cloneDeep(resp._source);if(!(typeof resp.found==="boolean"&&!resp.found)){_context.next=5;break}throw new kibanaUtils_public_["SavedObjectNotFound"](savedObjectType,savedObject.id||"");case 5:meta=resp._source.kibanaSavedObjectMeta||{};delete resp._source.kibanaSavedObjectMeta;if(!config.indexPattern&&savedObject._source.indexPattern){config.indexPattern=savedObject._source.indexPattern;delete savedObject._source.indexPattern}external_kbnSharedDeps_Lodash_default.a.defaults(savedObject._source,savedObject.defaults);external_kbnSharedDeps_Lodash_default.a.forOwn(mapping,(fieldMapping,fieldName)=>{if(fieldMapping._deserialize&&typeof fieldName==="string"){savedObject._source[fieldName]=fieldMapping._deserialize(savedObject._source[fieldName])}});external_kbnSharedDeps_Lodash_default.a.assign(savedObject,savedObject._source);savedObject.lastSavedTitle=savedObject.title;if(!meta.searchSourceJSON){_context.next=29;break}_context.prev=13;searchSourceValues=Object(public_["parseSearchSourceJSON"])(meta.searchSourceJSON);if(!config.searchSource){_context.next=22;break}searchSourceValues=Object(public_["injectSearchSourceReferences"])(searchSourceValues,resp.references);_context.next=19;return dependencies.search.searchSource.create(searchSourceValues);case 19:savedObject.searchSource=_context.sent;_context.next=23;break;case 22:savedObject.searchSourceFields=searchSourceValues;case 23:_context.next=29;break;case 25:_context.prev=25;_context.t0=_context["catch"](13);if(_context.t0.constructor.name==="SavedObjectNotFound"&&_context.t0.savedObjectType==="index-pattern"){savedObject.unresolvedIndexPatternReference={name:"kibanaSavedObjectMeta.searchSourceJSON.index",id:JSON.parse(meta.searchSourceJSON).index,type:"index-pattern"}}throw _context.t0;case 29:injectReferences=config.injectReferences;if(injectReferences&&resp.references&&resp.references.length>0){injectReferences(savedObject,resp.references)}if(!(typeof config.afterESResp==="function")){_context.next=35;break}_context.next=34;return config.afterESResp(savedObject);case 34:savedObject=_context.sent;case 35:return _context.abrupt("return",savedObject);case 36:case"end":return _context.stop()}}),_callee,null,[[13,25]])})));return _applyESResp.apply(this,arguments)}var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);const OVERWRITE_REJECTED=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.overwriteRejectedDescription",{defaultMessage:"Overwrite confirmation was rejected"});const SAVE_DUPLICATE_REJECTED=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"});var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var kibanaReact_public_=__webpack_require__(13);function confirmModalPromise(message="",title="",confirmBtnText="",overlays){return new Promise((resolve,reject)=>{const cancelButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"});const modal=overlays.openModal(Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{onCancel:()=>{modal.close();reject()},onConfirm:()=>{modal.close();resolve(true)},confirmButtonText:confirmBtnText,cancelButtonText:cancelButtonText,title:title},message)))})}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function create_source_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function create_source_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){create_source_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){create_source_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function createSource(_x,_x2,_x3){return _createSource.apply(this,arguments)}function _createSource(){_createSource=create_source_asyncToGenerator(regeneratorRuntime.mark((function _callee(source,savedObject,esType,options={},services){var savedObjectsClient,overlays,confirmMessage,title,confirmButtonText;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:savedObjectsClient=services.savedObjectsClient,overlays=services.overlays;_context.prev=1;_context.next=4;return savedObjectsClient.create(esType,source,options);case 4:return _context.abrupt("return",_context.sent);case 7:_context.prev=7;_context.t0=_context["catch"](1);if(!(external_kbnSharedDeps_Lodash_default.a.get(_context.t0,"res.status")===409)){_context.next=14;break}confirmMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:savedObject.title}});title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:savedObject.getDisplayName()}});confirmButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return _context.abrupt("return",confirmModalPromise(confirmMessage,title,confirmButtonText,overlays).then(()=>savedObjectsClient.create(esType,source,savedObject.creationOpts(_objectSpread({overwrite:true},options)))).catch(()=>Promise.reject(new Error(OVERWRITE_REJECTED))));case 14:_context.next=16;return Promise.reject(_context.t0);case 16:return _context.abrupt("return",_context.sent);case 17:case"end":return _context.stop()}}),_callee,null,[[1,7]])})));return _createSource.apply(this,arguments)}function find_object_by_title_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function find_object_by_title_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){find_object_by_title_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){find_object_by_title_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function findObjectByTitle(_x,_x2,_x3){return _findObjectByTitle.apply(this,arguments)}function _findObjectByTitle(){_findObjectByTitle=find_object_by_title_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObjectsClient,type,title){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(title){_context.next=2;break}return _context.abrupt("return");case 2:_context.next=4;return savedObjectsClient.find({type:type,perPage:10,search:'"'.concat(title,'"'),searchFields:["title"],fields:["title"]});case 4:response=_context.sent;return _context.abrupt("return",response.savedObjects.find(obj=>obj.get("title").toLowerCase()===title.toLowerCase()));case 6:case"end":return _context.stop()}}),_callee)})));return _findObjectByTitle.apply(this,arguments)}function displayDuplicateTitleConfirmModal(savedObject,overlays){const confirmMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.saveDuplicateConfirmationMessage",{defaultMessage:"A {name} with the title '{title}' already exists. Would you like to save anyway?",values:{title:savedObject.title,name:savedObject.getDisplayName()}});const confirmButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.saveDuplicateButtonLabel",{defaultMessage:"Save {name}",values:{name:savedObject.getDisplayName()}});try{return confirmModalPromise(confirmMessage,"",confirmButtonText,overlays)}catch(_){return Promise.reject(new Error(SAVE_DUPLICATE_REJECTED))}}function check_for_duplicate_title_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function check_for_duplicate_title_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){check_for_duplicate_title_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){check_for_duplicate_title_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function checkForDuplicateTitle(_x,_x2,_x3,_x4){return _checkForDuplicateTitle.apply(this,arguments)}function _checkForDuplicateTitle(){_checkForDuplicateTitle=check_for_duplicate_title_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services){var savedObjectsClient,overlays,duplicate;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:savedObjectsClient=services.savedObjectsClient,overlays=services.overlays;if(!isTitleDuplicateConfirmed){_context.next=3;break}return _context.abrupt("return",true);case 3:if(!(savedObject.title===savedObject.lastSavedTitle&&!savedObject.copyOnSave)){_context.next=5;break}return _context.abrupt("return",true);case 5:_context.next=7;return findObjectByTitle(savedObjectsClient,savedObject.getEsType(),savedObject.title);case 7:duplicate=_context.sent;if(!(!duplicate||duplicate.id===savedObject.id)){_context.next=10;break}return _context.abrupt("return",true);case 10:if(!onTitleDuplicate){_context.next=13;break}onTitleDuplicate();return _context.abrupt("return",Promise.reject(new Error(SAVE_DUPLICATE_REJECTED)));case 13:return _context.abrupt("return",displayDuplicateTitleConfirmModal(savedObject,overlays));case 14:case"end":return _context.stop()}}),_callee)})));return _checkForDuplicateTitle.apply(this,arguments)}function save_saved_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function save_saved_object_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){save_saved_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){save_saved_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function isErrorNonFatal(error){if(!error)return false;return error.message===OVERWRITE_REJECTED||error.message===SAVE_DUPLICATE_REJECTED}function saveSavedObject(_x,_x2){return _saveSavedObject.apply(this,arguments)}function _saveSavedObject(){_saveSavedObject=save_saved_object_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject,config,{confirmOverwrite:confirmOverwrite=false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed=false,onTitleDuplicate:onTitleDuplicate}={},services){var savedObjectsClient,chrome,esType,extractReferences,originalId,_savedObject$_seriali,attributes,references,_extractReferences,resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:savedObjectsClient=services.savedObjectsClient,chrome=services.chrome;esType=config.type||"";extractReferences=config.extractReferences;originalId=savedObject.id;if(savedObject.copyOnSave){delete savedObject.id}_savedObject$_seriali=savedObject._serialize(),attributes=_savedObject$_seriali.attributes,references=_savedObject$_seriali.references;if(extractReferences){_extractReferences=extractReferences({attributes:attributes,references:references});attributes=_extractReferences.attributes;references=_extractReferences.references}if(references){_context.next=9;break}throw new Error("References not returned from extractReferences");case 9:_context.prev=9;_context.next=12;return checkForDuplicateTitle(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services);case 12:savedObject.isSaving=true;if(!confirmOverwrite){_context.next=19;break}_context.next=16;return createSource(attributes,savedObject,esType,savedObject.creationOpts({references:references}),services);case 16:_context.t0=_context.sent;_context.next=22;break;case 19:_context.next=21;return savedObjectsClient.create(esType,attributes,savedObject.creationOpts({references:references,overwrite:true}));case 21:_context.t0=_context.sent;case 22:resp=_context.t0;savedObject.id=resp.id;if(savedObject.showInRecentlyAccessed&&savedObject.getFullPath){chrome.recentlyAccessed.add(savedObject.getFullPath(),savedObject.title,String(savedObject.id))}savedObject.isSaving=false;savedObject.lastSavedTitle=savedObject.title;return _context.abrupt("return",savedObject.id);case 30:_context.prev=30;_context.t1=_context["catch"](9);savedObject.isSaving=false;savedObject.id=originalId;if(!isErrorNonFatal(_context.t1)){_context.next=36;break}return _context.abrupt("return","");case 36:return _context.abrupt("return",Promise.reject(_context.t1));case 37:case"end":return _context.stop()}}),_callee,null,[[9,30]])})));return _saveSavedObject.apply(this,arguments)}function build_saved_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function build_saved_object_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){build_saved_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){build_saved_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function build_saved_object_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function build_saved_object_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){build_saved_object_ownKeys(Object(source),true).forEach((function(key){build_saved_object_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{build_saved_object_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function build_saved_object_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const applyDecorators=(object,config,decorators)=>{decorators.forEach(decorator=>{decorator.decorateConfig(config);decorator.decorateObject(object)})};function buildSavedObject(savedObject,config,services,decorators=[]){applyDecorators(savedObject,config,decorators);const indexPatterns=services.indexPatterns,savedObjectsClient=services.savedObjectsClient;const esType=config.type||"";savedObject.getDisplayName=()=>esType;savedObject.getEsType=()=>esType;savedObject.isSaving=false;savedObject.defaults=config.defaults||{};savedObject.searchSource=config.searchSource?services.search.searchSource.createEmpty():undefined;savedObject.id=config.id||void 0;savedObject.migrationVersion=config.migrationVersion;savedObject.copyOnSave=false;savedObject.hydrateIndexPattern=id=>hydrateIndexPattern(id||"",savedObject,indexPatterns,config);savedObject.init=Object(external_kbnSharedDeps_Lodash_["once"])(()=>intializeSavedObject(savedObject,savedObjectsClient,config));savedObject.applyESResp=resp=>applyESResp(resp,savedObject,config,services);savedObject._serialize=()=>serializeSavedObject(savedObject,config);savedObject.isTitleChanged=()=>savedObject._source&&savedObject._source.title!==savedObject.title;savedObject.creationOpts=(opts={})=>build_saved_object_objectSpread({id:savedObject.id,migrationVersion:savedObject.migrationVersion},opts);savedObject.save=function(){var _ref=build_saved_object_asyncToGenerator(regeneratorRuntime.mark((function _callee(opts){var result;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return saveSavedObject(savedObject,config,opts,services);case 3:result=_context.sent;return _context.abrupt("return",Promise.resolve(result));case 7:_context.prev=7;_context.t0=_context["catch"](0);return _context.abrupt("return",Promise.reject(_context.t0));case 10:case"end":return _context.stop()}}),_callee,null,[[0,7]])})));return function(_x){return _ref.apply(this,arguments)}}();savedObject.destroy=()=>{};savedObject.delete=()=>{if(!savedObject.id){return Promise.reject(new Error("Deleting a saved Object requires type and id"))}return savedObjectsClient.delete(esType,savedObject.id)}}function createSavedObjectClass(services,decoratorRegistry){class SavedObjectClass{constructor(config={}){const self=this;buildSavedObject(self,config,services,decoratorRegistry.getOrderedDecorators(services))}}return SavedObjectClass}class StringUtils{static upperFirst(str=""){return str?str.charAt(0).toUpperCase()+str.slice(1):""}}function saved_object_loader_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function saved_object_loader_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){saved_object_loader_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){saved_object_loader_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function saved_object_loader_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class saved_object_loader_SavedObjectLoader{constructor(SavedObjectClass,savedObjectsClient){this.savedObjectsClient=savedObjectsClient;saved_object_loader_defineProperty(this,"Class",void 0);saved_object_loader_defineProperty(this,"type",void 0);saved_object_loader_defineProperty(this,"lowercaseType",void 0);saved_object_loader_defineProperty(this,"loaderProperties",void 0);this.type=SavedObjectClass.type;this.Class=SavedObjectClass;this.lowercaseType=this.type.toLowerCase();this.loaderProperties={name:"".concat(this.lowercaseType,"s"),noun:StringUtils.upperFirst(this.type),nouns:"".concat(this.lowercaseType,"s")}}get(opts){var _this=this;return saved_object_loader_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var obj;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:obj=new _this.Class(opts);return _context.abrupt("return",obj.init());case 2:case"end":return _context.stop()}}),_callee)})))()}urlFor(id){return"#/".concat(this.lowercaseType,"/").concat(encodeURIComponent(id))}delete(ids){var _this2=this;return saved_object_loader_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var idsUsed,deletions;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:idsUsed=!Array.isArray(ids)?[ids]:ids;deletions=idsUsed.map(id=>{const savedObject=new _this2.Class(id);return savedObject.delete()});_context2.next=4;return Promise.all(deletions);case 4:case"end":return _context2.stop()}}),_callee2)})))()}mapHitSource(source,id,references=[]){source.id=id;source.url=this.urlFor(id);source.references=references;return source}mapSavedObjectApiHits({attributes:attributes,id:id,references:references=[]}){return this.mapHitSource(attributes,id,references)}findAll(search="",{size:size=100,fields:fields,hasReference:hasReference}){return this.savedObjectsClient.find({type:this.lowercaseType,search:search?"".concat(search,"*"):undefined,perPage:size,page:1,searchFields:["title^3","description"],defaultSearchOperator:"AND",fields:fields,hasReference:hasReference}).then(resp=>({total:resp.total,hits:resp.savedObjects.map(savedObject=>this.mapSavedObjectApiHits(savedObject))}))}find(search="",sizeOrOptions=100){const options=typeof sizeOrOptions==="number"?{size:sizeOrOptions}:sizeOrOptions;return this.findAll(search,options).then(resp=>({total:resp.total,hits:resp.hits.filter(savedObject=>!savedObject.error)}))}}function save_with_confirmation_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function save_with_confirmation_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){save_with_confirmation_ownKeys(Object(source),true).forEach((function(key){save_with_confirmation_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{save_with_confirmation_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function save_with_confirmation_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function save_with_confirmation_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function save_with_confirmation_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){save_with_confirmation_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){save_with_confirmation_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function saveWithConfirmation(_x,_x2,_x3,_x4){return _saveWithConfirmation.apply(this,arguments)}function _saveWithConfirmation(){_saveWithConfirmation=save_with_confirmation_asyncToGenerator(regeneratorRuntime.mark((function _callee(source,savedObject,options,services){var savedObjectsClient,overlays,confirmMessage,title,confirmButtonText;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:savedObjectsClient=services.savedObjectsClient,overlays=services.overlays;_context.prev=1;_context.next=4;return savedObjectsClient.create(savedObject.getEsType(),source,options);case 4:return _context.abrupt("return",_context.sent);case 7:_context.prev=7;_context.t0=_context["catch"](1);if(!(Object(external_kbnSharedDeps_Lodash_["get"])(_context.t0,"res.status")===409)){_context.next=14;break}confirmMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:savedObject.title}});title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:savedObject.displayName}});confirmButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return _context.abrupt("return",confirmModalPromise(confirmMessage,title,confirmButtonText,overlays).then(()=>savedObjectsClient.create(savedObject.getEsType(),source,save_with_confirmation_objectSpread({overwrite:true},options))).catch(()=>Promise.reject(new Error(OVERWRITE_REJECTED))));case 14:_context.next=16;return Promise.reject(_context.t0);case 16:return _context.abrupt("return",_context.sent);case 17:case"end":return _context.stop()}}),_callee,null,[[1,7]])})));return _saveWithConfirmation.apply(this,arguments)}function registry_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class SavedObjectDecoratorRegistry{constructor(){registry_defineProperty(this,"registry",new Map)}register(config){if(this.registry.has(config.id)){throw new Error("A decorator is already registered for id ".concat(config.id))}if([...this.registry.values()].find(({priority:priority})=>priority===config.priority)){throw new Error("A decorator is already registered for priority ".concat(config.priority))}this.registry.set(config.id,config)}getOrderedDecorators(services){return[...this.registry.values()].sort((a,b)=>a.priority-b.priority).map(({factory:factory})=>factory(services))}}var decorators_types=__webpack_require__(10);const PER_PAGE_SETTING="savedObjects:perPage";const LISTING_LIMIT_SETTING="savedObjects:listingLimit";function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class plugin_SavedObjectsPublicPlugin{constructor(){plugin_defineProperty(this,"decoratorRegistry",new SavedObjectDecoratorRegistry)}setup(){return{registerDecorator:config=>this.decoratorRegistry.register(config)}}start(core,{data:data}){return{SavedObjectClass:createSavedObjectClass({indexPatterns:data.indexPatterns,savedObjectsClient:core.savedObjects.client,search:data.search,chrome:core.chrome,overlays:core.overlays},this.decoratorRegistry),settings:{getPerPage:()=>core.uiSettings.get(PER_PAGE_SETTING),getListingLimit:()=>core.uiSettings.get(LISTING_LIMIT_SETTING)}}}}var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(4);function saved_object_save_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function saved_object_save_modal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){saved_object_save_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){saved_object_save_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function saved_object_save_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const generateId=Object(external_kbnSharedDeps_ElasticEui_["htmlIdGenerator"])();class saved_object_save_modal_SavedObjectSaveModal extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){var _this;super(...args);_this=this;saved_object_save_modal_defineProperty(this,"warning",external_kbnSharedDeps_React_default.a.createRef());saved_object_save_modal_defineProperty(this,"state",{title:this.props.title,copyOnSave:Boolean(this.props.initialCopyOnSave),isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false,visualizationDescription:this.props.description?this.props.description:""});saved_object_save_modal_defineProperty(this,"renderViewDescription",()=>{if(!this.props.showDescription){return}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.descriptionLabel",defaultMessage:"Description"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextArea"],{"data-test-subj":"viewDescription",value:this.state.visualizationDescription,onChange:this.onDescriptionChange}))});saved_object_save_modal_defineProperty(this,"onDescriptionChange",event=>{this.setState({visualizationDescription:event.target.value})});saved_object_save_modal_defineProperty(this,"onTitleDuplicate",()=>{this.setState({isLoading:false,isTitleDuplicateConfirmed:true,hasTitleDuplicate:true});if(this.warning.current){this.warning.current.focus()}});saved_object_save_modal_defineProperty(this,"saveSavedObject",saved_object_save_modal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!_this.state.isLoading){_context.next=2;break}return _context.abrupt("return");case 2:_this.setState({isLoading:true});_context.next=5;return _this.props.onSave({newTitle:_this.state.title,newCopyOnSave:_this.state.copyOnSave,isTitleDuplicateConfirmed:_this.state.isTitleDuplicateConfirmed,onTitleDuplicate:_this.onTitleDuplicate,newDescription:_this.state.visualizationDescription});case 5:case"end":return _context.stop()}}),_callee)}))));saved_object_save_modal_defineProperty(this,"onTitleChange",event=>{this.setState({title:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})});saved_object_save_modal_defineProperty(this,"onCopyOnSaveChange",event=>{this.setState({copyOnSave:event.target.checked})});saved_object_save_modal_defineProperty(this,"onFormSubmit",event=>{event.preventDefault();this.saveSavedObject()});saved_object_save_modal_defineProperty(this,"renderConfirmButton",()=>{const _this$state=this.state,isLoading=_this$state.isLoading,title=_this$state.title;let confirmLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.saveModal.saveButtonLabel",{defaultMessage:"Save"});if(this.props.confirmButtonLabel){confirmLabel=this.props.confirmButtonLabel}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"confirmSaveSavedObjectButton",isLoading:isLoading,isDisabled:title.length===0,type:"submit"},confirmLabel)});saved_object_save_modal_defineProperty(this,"renderDuplicateTitleCallout",duplicateWarningId=>{if(!this.state.hasTitleDuplicate){return}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{ref:this.warning,tabIndex:-1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.duplicateTitleLabel",defaultMessage:"This {objectType} already exists",values:{objectType:this.props.objectType}}),color:"warning","data-test-subj":"titleDupicateWarnMsg",id:duplicateWarningId},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.duplicateTitleDescription",defaultMessage:"Saving '{title}' creates a duplicate title.",values:{title:this.state.title}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))});saved_object_save_modal_defineProperty(this,"renderCopyOnSave",()=>{if(!this.props.showCopyOnSave){return}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{"data-test-subj":"saveAsNewCheckbox",checked:this.state.copyOnSave,onChange:this.onCopyOnSaveChange,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.saveAsNewLabel",defaultMessage:"Save as new {objectType}",values:{objectType:this.props.objectType}})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))})}render(){const _this$state2=this.state,isTitleDuplicateConfirmed=_this$state2.isTitleDuplicateConfirmed,hasTitleDuplicate=_this$state2.hasTitleDuplicate,title=_this$state2.title;const duplicateWarningId=generateId();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement("form",{onSubmit:this.onFormSubmit},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{"data-test-subj":"savedObjectSaveModal",className:"kbnSavedObjectSaveModal",onClose:this.props.onClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.saveTitle",defaultMessage:"Save {objectType}",values:{objectType:this.props.objectType}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,this.renderDuplicateTitleCallout(duplicateWarningId),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,!this.props.showDescription&&this.props.description&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},this.props.description),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),this.renderCopyOnSave(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.titleLabel",defaultMessage:"Title"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{fullWidth:true,autoFocus:true,"data-test-subj":"savedObjectTitle",value:title,onChange:this.onTitleChange,isInvalid:!isTitleDuplicateConfirmed&&hasTitleDuplicate||title.length===0,"aria-describedby":this.state.hasTitleDuplicate?duplicateWarningId:undefined})),this.renderViewDescription(),typeof this.props.options==="function"?this.props.options(this.state):this.props.options)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"saveCancelButton",onClick:this.props.onClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.cancelButtonLabel",defaultMessage:"Cancel"})),this.renderConfirmButton()))))}}function saved_object_save_modal_origin_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function saved_object_save_modal_origin_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){saved_object_save_modal_origin_ownKeys(Object(source),true).forEach((function(key){saved_object_save_modal_origin_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{saved_object_save_modal_origin_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function saved_object_save_modal_origin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function saved_object_save_modal_origin_slicedToArray(arr,i){return saved_object_save_modal_origin_arrayWithHoles(arr)||saved_object_save_modal_origin_iterableToArrayLimit(arr,i)||saved_object_save_modal_origin_unsupportedIterableToArray(arr,i)||saved_object_save_modal_origin_nonIterableRest()}function saved_object_save_modal_origin_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function saved_object_save_modal_origin_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return saved_object_save_modal_origin_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return saved_object_save_modal_origin_arrayLikeToArray(o,minLen)}function saved_object_save_modal_origin_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function saved_object_save_modal_origin_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function saved_object_save_modal_origin_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function SavedObjectSaveModalOrigin(props){const _useState=Object(external_kbnSharedDeps_React_["useState"])(Boolean(props.originatingApp)),_useState2=saved_object_save_modal_origin_slicedToArray(_useState,2),returnToOriginMode=_useState2[0],setReturnToOriginMode=_useState2[1];const documentInfo=props.documentInfo;const returnLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.saveModalOrigin.returnToOriginLabel",{defaultMessage:"Return"});const addLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.saveModalOrigin.addToOriginLabel",{defaultMessage:"Add"});const getReturnToOriginSwitch=state=>{const sourceOptions=typeof props.options==="function"?props.options(state):props.options;if(!props.originatingApp){return sourceOptions}const origin=props.getAppNameFromId?props.getAppNameFromId(props.originatingApp)||props.originatingApp:props.originatingApp;if(!state.copyOnSave||props.originatingApp==="dashboards"){var _props$returnToOrigin;const originVerb=!documentInfo.id||state.copyOnSave?addLabel:returnLabel;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,sourceOptions,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{"data-test-subj":"returnToOriginModeSwitch",checked:returnToOriginMode,onChange:event=>{setReturnToOriginMode(event.target.checked)},label:(_props$returnToOrigin=props.returnToOriginSwitchLabel)!==null&&_props$returnToOrigin!==void 0?_props$returnToOrigin:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"savedObjects.saveModalOrigin.originAfterSavingSwitchLabel",defaultMessage:"{originVerb} to {origin} after saving",values:{originVerb:originVerb,origin:origin}})})))}else{setReturnToOriginMode(false);return sourceOptions}};const onModalSave=onSaveProps=>{props.onSave(saved_object_save_modal_origin_objectSpread(saved_object_save_modal_origin_objectSpread({},onSaveProps),{},{returnToOrigin:returnToOriginMode}))};const confirmButtonLabel=returnToOriginMode?external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.saveModalOrigin.saveAndReturnLabel",{defaultMessage:"Save and return"}):null;return external_kbnSharedDeps_React_default.a.createElement(saved_object_save_modal_SavedObjectSaveModal,{onSave:onModalSave,onClose:props.onClose,title:documentInfo.title,showCopyOnSave:documentInfo.id?true:false,initialCopyOnSave:Boolean(documentInfo.id)&&returnToOriginMode,confirmButtonLabel:confirmButtonLabel,objectType:props.objectType,options:getReturnToOriginSwitch,description:documentInfo.description,showDescription:true})}var external_kbnSharedDeps_ReactDom_=__webpack_require__(11);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);function show_saved_object_save_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function show_saved_object_save_modal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){show_saved_object_save_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){show_saved_object_save_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function isSuccess(result){return"id"in result}function showSaveModal(saveModal,I18nContext){const container=document.createElement("div");const closeModal=()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(container);document.body.removeChild(container)};const onSave=saveModal.props.onSave;const onSaveConfirmed=function(){var _ref=show_saved_object_save_modal_asyncToGenerator(regeneratorRuntime.mark((function _callee(...args){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return onSave(...args);case 2:response=_context.sent;if(Boolean(isSuccess(response)?response.id:response.error)){closeModal()}return _context.abrupt("return",response);case 5:case"end":return _context.stop()}}),_callee)})));return function onSaveConfirmed(){return _ref.apply(this,arguments)}}();document.body.appendChild(container);const element=external_kbnSharedDeps_React_default.a.cloneElement(saveModal,{onSave:onSaveConfirmed,onClose:closeModal});external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,element),container)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function saved_object_finder_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function saved_object_finder_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){saved_object_finder_ownKeys(Object(source),true).forEach((function(key){saved_object_finder_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{saved_object_finder_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function saved_object_finder_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function saved_object_finder_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){saved_object_finder_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){saved_object_finder_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function saved_object_finder_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class saved_object_finder_SavedObjectFinderUi extends external_kbnSharedDeps_React_default.a.Component{constructor(props){var _this;super(props);_this=this;saved_object_finder_defineProperty(this,"isComponentMounted",false);saved_object_finder_defineProperty(this,"debouncedFetch",external_kbnSharedDeps_Lodash_default.a.debounce(function(){var _ref=saved_object_finder_asyncToGenerator(regeneratorRuntime.mark((function _callee(query){var metaDataMap,fields,perPage,resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:metaDataMap=_this.getSavedObjectMetaDataMap();fields=Object.values(metaDataMap).map(metaData=>metaData.includeFields||[]).reduce((allFields,currentFields)=>allFields.concat(currentFields),["title"]);perPage=_this.props.uiSettings.get(LISTING_LIMIT_SETTING);_context.next=5;return _this.props.savedObjects.client.find({type:Object.keys(metaDataMap),fields:[...new Set(fields)],search:query?"".concat(query,"*"):undefined,page:1,perPage:perPage,searchFields:["title^3","description"],defaultSearchOperator:"AND"});case 5:resp=_context.sent;resp.savedObjects=resp.savedObjects.filter(savedObject=>{const metaData=metaDataMap[savedObject.type];if(metaData.showSavedObject){return metaData.showSavedObject(savedObject)}else{return true}});if(_this.isComponentMounted){_context.next=9;break}return _context.abrupt("return");case 9:if(query===_this.state.query){_this.setState({isFetchingItems:false,page:0,items:resp.savedObjects.map(savedObject=>{const title=savedObject.attributes.title,id=savedObject.id,type=savedObject.type;return{title:typeof title==="string"?title:"",id:id,type:type,savedObject:savedObject}})})}case 10:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}(),300));saved_object_finder_defineProperty(this,"getPageOfItems",()=>{const items=this.state.items.slice();const sortDirection=this.state.sortDirection;if(sortDirection||!this.state.query){items.sort(({title:titleA},{title:titleB})=>{let order=1;if(sortDirection==="desc"){order=-1}return order*(titleA||"").toLowerCase().localeCompare((titleB||"").toLowerCase())})}const startIndex=this.state.page*this.state.perPage;const lastIndex=startIndex+this.state.perPage;return items.filter(item=>this.state.filteredTypes.length===0||this.state.filteredTypes.includes(item.type)).slice(startIndex,lastIndex)});saved_object_finder_defineProperty(this,"fetchItems",()=>{this.setState({isFetchingItems:true},this.debouncedFetch.bind(null,this.state.query))});this.state={items:[],isFetchingItems:false,page:0,perPage:props.initialPageSize||props.fixedPageSize||10,query:"",filterOpen:false,filteredTypes:[],sortOpen:false}}componentWillUnmount(){this.isComponentMounted=false;this.debouncedFetch.cancel()}componentDidMount(){this.isComponentMounted=true;this.fetchItems()}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,this.renderSearchBar(),this.renderListing())}getSavedObjectMetaDataMap(){return this.props.savedObjectMetaData.reduce((map,metaData)=>saved_object_finder_objectSpread(saved_object_finder_objectSpread({},map),{},{[metaData.type]:metaData}),{})}getPageCount(){return Math.ceil((this.state.filteredTypes.length===0?this.state.items.length:this.state.items.filter(item=>this.state.filteredTypes.length===0||this.state.filteredTypes.includes(item.type)).length)/this.state.perPage)}getAvailableSavedObjectMetaData(){const typesInItems=new Set;this.state.items.forEach(item=>{typesInItems.add(item.type)});return this.props.savedObjectMetaData.filter(metaData=>typesInItems.has(metaData.type))}getSortOptions(){const sortOptions=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"asc",icon:this.state.sortDirection==="asc"||this.state.query===""&&this.state.sortDirection!=="desc"?"check":"empty",onClick:()=>{this.setState({sortDirection:"asc"})}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.sortAsc",{defaultMessage:"Ascending"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"desc",icon:this.state.sortDirection==="desc"?"check":"empty",onClick:()=>{this.setState({sortDirection:"desc"})}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.sortDesc",{defaultMessage:"Descending"}))];if(this.state.query){sortOptions.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"auto",icon:!this.state.sortDirection?"check":"empty",onClick:()=>{this.setState({sortDirection:undefined})}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.sortAuto",{defaultMessage:"Best match"})))}return sortOptions}renderSearchBar(){const availableSavedObjectMetaData=this.getAvailableSavedObjectMetaData();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search…"}),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search…"}),fullWidth:true,value:this.state.query,onChange:e=>{this.setState({query:e.target.value},this.fetchItems)},"data-test-subj":"savedObjectFinderSearchInput",isLoading:this.state.isFetchingItems})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"addPanelSortPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.sortOpen,closePopover:()=>this.setState({sortOpen:false}),button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterButton"],{onClick:()=>this.setState(({sortOpen:sortOpen})=>({sortOpen:!sortOpen})),iconType:"arrowDown",isSelected:this.state.sortOpen,"data-test-subj":"savedObjectFinderSortButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.sortButtonLabel",{defaultMessage:"Sort"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{watchedItemProps:["icon","disabled"],items:this.getSortOptions()})),this.props.showFilter&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"addPanelFilterPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.filterOpen,closePopover:()=>this.setState({filterOpen:false}),button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterButton"],{onClick:()=>this.setState(({filterOpen:filterOpen})=>({filterOpen:!filterOpen})),iconType:"arrowDown","data-test-subj":"savedObjectFinderFilterButton",isSelected:this.state.filterOpen,numFilters:this.props.savedObjectMetaData.length,hasActiveFilters:this.state.filteredTypes.length>0,numActiveFilters:this.state.filteredTypes.length},external_kbnSharedDeps_KbnI18n_["i18n"].translate("savedObjects.finder.filterButtonLabel",{defaultMessage:"Types"}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{watchedItemProps:["icon","disabled"],items:this.props.savedObjectMetaData.map(metaData=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:metaData.type,disabled:!availableSavedObjectMetaData.includes(metaData),icon:this.state.filteredTypes.includes(metaData.type)?"check":"empty","data-test-subj":"savedObjectFinderFilter-".concat(metaData.type),onClick:()=>{this.setState(({filteredTypes:filteredTypes})=>({filteredTypes:filteredTypes.includes(metaData.type)?filteredTypes.filter(t=>t!==metaData.type):[...filteredTypes,metaData.type],page:0}))}},metaData.name))})))),this.props.children?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},this.props.children):null)}renderListing(){const items=this.state.items.length===0?[]:this.getPageOfItems();const _this$props=this.props,onChoose=_this$props.onChoose,savedObjectMetaData=_this$props.savedObjectMetaData;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,this.state.isFetchingItems&&this.state.items.length===0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{"data-test-subj":"savedObjectFinderLoadingIndicator"}))),items.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroup"],{"data-test-subj":"savedObjectFinderItemList",maxWidth:false},items.map(item=>{const currentSavedObjectMetaData=savedObjectMetaData.find(metaData=>metaData.type===item.type);const fullName=currentSavedObjectMetaData.getTooltipForSavedObject?currentSavedObjectMetaData.getTooltipForSavedObject(item.savedObject):"".concat(item.title," (").concat(currentSavedObjectMetaData.name,")");const iconType=(currentSavedObjectMetaData||{getIconForSavedObject:()=>"document"}).getIconForSavedObject(item.savedObject);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroupItem"],{key:item.id,iconType:iconType,label:item.title,onClick:onChoose?()=>{onChoose(item.id,item.type,fullName,item.savedObject)}:undefined,title:fullName,"data-test-subj":"savedObjectTitle".concat((item.title||"").split(" ").join("-"))})})):!this.state.isFetchingItems&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{body:this.props.noItemsMessage}),this.getPageCount()>1&&(this.props.fixedPageSize?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPagination"],{activePage:this.state.page,pageCount:this.getPageCount(),onPageClick:page=>{this.setState({page:page})}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTablePagination"],{activePage:this.state.page,pageCount:this.getPageCount(),onChangePage:page=>{this.setState({page:page})},onChangeItemsPerPage:perPage=>{this.setState({perPage:perPage})},itemsPerPage:this.state.perPage,itemsPerPageOptions:[5,10,15,25]})))}}const getSavedObjectFinder=(savedObject,uiSettings)=>props=>external_kbnSharedDeps_React_default.a.createElement(saved_object_finder_SavedObjectFinderUi,_extends({},props,{savedObjects:savedObject,uiSettings:uiSettings}));var public_types=__webpack_require__(8);const public_plugin=()=>new plugin_SavedObjectsPublicPlugin}]);