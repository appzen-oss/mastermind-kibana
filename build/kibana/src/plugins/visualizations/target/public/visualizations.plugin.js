(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={0:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+"visualizations.chunk."+chunkId+".js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["visualizations_bundle_jsonpfunction"]=window["visualizations_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=40)})([function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"q",(function(){return getUISettings}));__webpack_require__.d(__webpack_exports__,"L",(function(){return setUISettings}));__webpack_require__.d(__webpack_exports__,"c",(function(){return getCapabilities}));__webpack_require__.d(__webpack_exports__,"v",(function(){return setCapabilities}));__webpack_require__.d(__webpack_exports__,"h",(function(){return getHttp}));__webpack_require__.d(__webpack_exports__,"B",(function(){return setHttp}));__webpack_require__.d(__webpack_exports__,"b",(function(){return getApplication}));__webpack_require__.d(__webpack_exports__,"u",(function(){return setApplication}));__webpack_require__.d(__webpack_exports__,"e",(function(){return getEmbeddable}));__webpack_require__.d(__webpack_exports__,"y",(function(){return setEmbeddable}));__webpack_require__.d(__webpack_exports__,"k",(function(){return getSavedObjects}));__webpack_require__.d(__webpack_exports__,"F",(function(){return setSavedObjects}));__webpack_require__.d(__webpack_exports__,"p",(function(){return getTypes}));__webpack_require__.d(__webpack_exports__,"K",(function(){return setTypes}));__webpack_require__.d(__webpack_exports__,"i",(function(){return getI18n}));__webpack_require__.d(__webpack_exports__,"C",(function(){return setI18n}));__webpack_require__.d(__webpack_exports__,"d",(function(){return getDocLinks}));__webpack_require__.d(__webpack_exports__,"x",(function(){return setDocLinks}));__webpack_require__.d(__webpack_exports__,"g",(function(){return getFilterManager}));__webpack_require__.d(__webpack_exports__,"A",(function(){return setFilterManager}));__webpack_require__.d(__webpack_exports__,"o",(function(){return getTimeFilter}));__webpack_require__.d(__webpack_exports__,"J",(function(){return setTimeFilter}));__webpack_require__.d(__webpack_exports__,"j",(function(){return getIndexPatterns}));__webpack_require__.d(__webpack_exports__,"D",(function(){return setIndexPatterns}));__webpack_require__.d(__webpack_exports__,"n",(function(){return getSearch}));__webpack_require__.d(__webpack_exports__,"I",(function(){return setSearch}));__webpack_require__.d(__webpack_exports__,"s",(function(){return getUsageCollector}));__webpack_require__.d(__webpack_exports__,"N",(function(){return setUsageCollector}));__webpack_require__.d(__webpack_exports__,"f",(function(){return getExpressions}));__webpack_require__.d(__webpack_exports__,"z",(function(){return setExpressions}));__webpack_require__.d(__webpack_exports__,"r",(function(){return getUiActions}));__webpack_require__.d(__webpack_exports__,"M",(function(){return setUiActions}));__webpack_require__.d(__webpack_exports__,"m",(function(){return getSavedVisualizationsLoader}));__webpack_require__.d(__webpack_exports__,"H",(function(){return setSavedVisualizationsLoader}));__webpack_require__.d(__webpack_exports__,"a",(function(){return getAggs}));__webpack_require__.d(__webpack_exports__,"t",(function(){return setAggs}));__webpack_require__.d(__webpack_exports__,"E",(function(){return setOverlays}));__webpack_require__.d(__webpack_exports__,"w",(function(){return setChrome}));__webpack_require__.d(__webpack_exports__,"l",(function(){return getSavedSearchLoader}));__webpack_require__.d(__webpack_exports__,"G",(function(){return setSavedSearchLoader}));var _plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3);var _plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const _createGetterSetter=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("UISettings"),_createGetterSetter2=_slicedToArray(_createGetterSetter,2),getUISettings=_createGetterSetter2[0],setUISettings=_createGetterSetter2[1];const _createGetterSetter3=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("Capabilities"),_createGetterSetter4=_slicedToArray(_createGetterSetter3,2),getCapabilities=_createGetterSetter4[0],setCapabilities=_createGetterSetter4[1];const _createGetterSetter5=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("Http"),_createGetterSetter6=_slicedToArray(_createGetterSetter5,2),getHttp=_createGetterSetter6[0],setHttp=_createGetterSetter6[1];const _createGetterSetter7=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("Application"),_createGetterSetter8=_slicedToArray(_createGetterSetter7,2),getApplication=_createGetterSetter8[0],setApplication=_createGetterSetter8[1];const _createGetterSetter9=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("Embeddable"),_createGetterSetter10=_slicedToArray(_createGetterSetter9,2),getEmbeddable=_createGetterSetter10[0],setEmbeddable=_createGetterSetter10[1];const _createGetterSetter11=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("SavedObjects"),_createGetterSetter12=_slicedToArray(_createGetterSetter11,2),getSavedObjects=_createGetterSetter12[0],setSavedObjects=_createGetterSetter12[1];const _createGetterSetter13=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("Types"),_createGetterSetter14=_slicedToArray(_createGetterSetter13,2),getTypes=_createGetterSetter14[0],setTypes=_createGetterSetter14[1];const _createGetterSetter15=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("I18n"),_createGetterSetter16=_slicedToArray(_createGetterSetter15,2),getI18n=_createGetterSetter16[0],setI18n=_createGetterSetter16[1];const _createGetterSetter17=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("DocLinks"),_createGetterSetter18=_slicedToArray(_createGetterSetter17,2),getDocLinks=_createGetterSetter18[0],setDocLinks=_createGetterSetter18[1];const _createGetterSetter19=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("FilterManager"),_createGetterSetter20=_slicedToArray(_createGetterSetter19,2),getFilterManager=_createGetterSetter20[0],setFilterManager=_createGetterSetter20[1];const _createGetterSetter21=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("TimeFilter"),_createGetterSetter22=_slicedToArray(_createGetterSetter21,2),getTimeFilter=_createGetterSetter22[0],setTimeFilter=_createGetterSetter22[1];const _createGetterSetter23=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("IndexPatterns"),_createGetterSetter24=_slicedToArray(_createGetterSetter23,2),getIndexPatterns=_createGetterSetter24[0],setIndexPatterns=_createGetterSetter24[1];const _createGetterSetter25=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("Search"),_createGetterSetter26=_slicedToArray(_createGetterSetter25,2),getSearch=_createGetterSetter26[0],setSearch=_createGetterSetter26[1];const _createGetterSetter27=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("UsageCollection"),_createGetterSetter28=_slicedToArray(_createGetterSetter27,2),getUsageCollector=_createGetterSetter28[0],setUsageCollector=_createGetterSetter28[1];const _createGetterSetter29=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("Expressions"),_createGetterSetter30=_slicedToArray(_createGetterSetter29,2),getExpressions=_createGetterSetter30[0],setExpressions=_createGetterSetter30[1];const _createGetterSetter31=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("UiActions"),_createGetterSetter32=_slicedToArray(_createGetterSetter31,2),getUiActions=_createGetterSetter32[0],setUiActions=_createGetterSetter32[1];const _createGetterSetter33=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("SavedVisualisationsLoader"),_createGetterSetter34=_slicedToArray(_createGetterSetter33,2),getSavedVisualizationsLoader=_createGetterSetter34[0],setSavedVisualizationsLoader=_createGetterSetter34[1];const _createGetterSetter35=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("AggConfigs"),_createGetterSetter36=_slicedToArray(_createGetterSetter35,2),getAggs=_createGetterSetter36[0],setAggs=_createGetterSetter36[1];const _createGetterSetter37=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("Overlays"),_createGetterSetter38=_slicedToArray(_createGetterSetter37,2),getOverlays=_createGetterSetter38[0],setOverlays=_createGetterSetter38[1];const _createGetterSetter39=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("Chrome"),_createGetterSetter40=_slicedToArray(_createGetterSetter39,2),getChrome=_createGetterSetter40[0],setChrome=_createGetterSetter40[1];const _createGetterSetter41=Object(_plugins_kibana_utils_public__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("savedSearchLoader"),_createGetterSetter42=_slicedToArray(_createGetterSetter41,2),getSavedSearchLoader=_createGetterSetter42[0],setSavedSearchLoader=_createGetterSetter42[1]},function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){exports.set=__webpack_require__(51);exports.setWith=__webpack_require__(95)},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return visTypeAliasRegistry}));let registry=[];const discardOnRegister=[];const visTypeAliasRegistry={get:()=>[...registry],add:newVisTypeAlias=>{if(registry.find(visTypeAlias=>visTypeAlias.name===newVisTypeAlias.name)){throw new Error("".concat(newVisTypeAlias.name," already registered"))}const isToBeDiscarded=discardOnRegister.some(aliasName=>aliasName===newVisTypeAlias.name);if(!isToBeDiscarded){registry.push(newVisTypeAlias)}},remove:visTypeAliasName=>{const isAliasPresent=registry.find(visTypeAlias=>visTypeAlias.name===visTypeAliasName);if(!isAliasPresent){discardOnRegister.push(visTypeAliasName)}else{registry=registry.filter(visTypeAlias=>visTypeAlias.name!==visTypeAliasName)}}}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return VISUALIZE_ENABLE_LABS_SETTING}));const VISUALIZE_ENABLE_LABS_SETTING="visualize:enableLabs"},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _types_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20);__webpack_require__.d(__webpack_exports__,"a",(function(){return _types_service__WEBPACK_IMPORTED_MODULE_0__["a"]}));var _types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(21);__webpack_require__.d(__webpack_exports__,"b",(function(){return _types__WEBPACK_IMPORTED_MODULE_1__["a"]}))},function(module,exports,__webpack_require__){var getNative=__webpack_require__(27);var nativeCreate=getNative(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var eq=__webpack_require__(36);function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}module.exports=assocIndexOf},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(86);function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}module.exports=getMapData},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return types_service_TypesService}));var vis_type_alias_registry=__webpack_require__(10);var external_kbnSharedDeps_Lodash_=__webpack_require__(0);var types=__webpack_require__(21);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const defaultOptions={showTimePicker:true,showQueryBar:true,showFilterBar:true,showIndexSelection:true,hierarchicalData:false};class base_vis_type_BaseVisType{constructor(opts){var _opts$description,_opts$note,_opts$stage,_opts$group,_opts$titleInWizard,_opts$hidden,_opts$requestHandler,_opts$responseHandler,_opts$hierarchicalDat,_opts$useCustomNoData;_defineProperty(this,"name",void 0);_defineProperty(this,"title",void 0);_defineProperty(this,"description",void 0);_defineProperty(this,"note",void 0);_defineProperty(this,"getSupportedTriggers",void 0);_defineProperty(this,"icon",void 0);_defineProperty(this,"image",void 0);_defineProperty(this,"stage",void 0);_defineProperty(this,"group",void 0);_defineProperty(this,"titleInWizard",void 0);_defineProperty(this,"options",void 0);_defineProperty(this,"visualization",void 0);_defineProperty(this,"visConfig",void 0);_defineProperty(this,"editor",void 0);_defineProperty(this,"editorConfig",void 0);_defineProperty(this,"hidden",void 0);_defineProperty(this,"requestHandler",void 0);_defineProperty(this,"responseHandler",void 0);_defineProperty(this,"hierarchicalData",void 0);_defineProperty(this,"setup",void 0);_defineProperty(this,"getUsedIndexPattern",void 0);_defineProperty(this,"useCustomNoDataScreen",void 0);_defineProperty(this,"inspectorAdapters",void 0);_defineProperty(this,"toExpressionAst",void 0);_defineProperty(this,"getInfoMessage",void 0);if(!opts.icon&&!opts.image){throw new Error("vis_type must define its icon or image")}this.name=opts.name;this.description=(_opts$description=opts.description)!==null&&_opts$description!==void 0?_opts$description:"";this.note=(_opts$note=opts.note)!==null&&_opts$note!==void 0?_opts$note:"";this.getSupportedTriggers=opts.getSupportedTriggers;this.title=opts.title;this.icon=opts.icon;this.image=opts.image;this.visualization=opts.visualization;this.visConfig=Object(external_kbnSharedDeps_Lodash_["defaultsDeep"])({},opts.visConfig,{defaults:{}});this.editor=opts.editor;this.editorConfig=Object(external_kbnSharedDeps_Lodash_["defaultsDeep"])({},opts.editorConfig,{collections:{}});this.options=Object(external_kbnSharedDeps_Lodash_["defaultsDeep"])({},opts.options,defaultOptions);this.stage=(_opts$stage=opts.stage)!==null&&_opts$stage!==void 0?_opts$stage:"production";this.group=(_opts$group=opts.group)!==null&&_opts$group!==void 0?_opts$group:types["a"].AGGBASED;this.titleInWizard=(_opts$titleInWizard=opts.titleInWizard)!==null&&_opts$titleInWizard!==void 0?_opts$titleInWizard:"";this.hidden=(_opts$hidden=opts.hidden)!==null&&_opts$hidden!==void 0?_opts$hidden:false;this.requestHandler=(_opts$requestHandler=opts.requestHandler)!==null&&_opts$requestHandler!==void 0?_opts$requestHandler:"courier";this.responseHandler=(_opts$responseHandler=opts.responseHandler)!==null&&_opts$responseHandler!==void 0?_opts$responseHandler:"none";this.setup=opts.setup;this.hierarchicalData=(_opts$hierarchicalDat=opts.hierarchicalData)!==null&&_opts$hierarchicalDat!==void 0?_opts$hierarchicalDat:false;this.getUsedIndexPattern=opts.getUsedIndexPattern;this.useCustomNoDataScreen=(_opts$useCustomNoData=opts.useCustomNoDataScreen)!==null&&_opts$useCustomNoData!==void 0?_opts$useCustomNoData:false;this.inspectorAdapters=opts.inspectorAdapters;this.toExpressionAst=opts.toExpressionAst;this.getInfoMessage=opts.getInfoMessage}get schemas(){var _this$editorConfig$sc,_this$editorConfig;return(_this$editorConfig$sc=(_this$editorConfig=this.editorConfig)===null||_this$editorConfig===void 0?void 0:_this$editorConfig.schemas)!==null&&_this$editorConfig$sc!==void 0?_this$editorConfig$sc:[]}get requiresSearch(){return this.requestHandler!=="none"}}var external_kbnSharedDeps_React_=__webpack_require__(2);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(6);var services=__webpack_require__(1);class react_vis_controller_ReactVisController{constructor(element,vis){this.element=element;this.vis=vis}render(visData,visParams){const I18nContext=Object(services["i"])().Context;return new Promise((resolve,reject)=>{if(!this.vis.type||!this.vis.type.visConfig||!this.vis.type.visConfig.component){reject("Missing component for ReactVisType")}const Component=this.vis.type.visConfig.component;const config=Object(services["q"])();Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(Component,{config:config,vis:this.vis,visData:visData,visParams:visParams,renderComplete:resolve})),this.element)})}destroy(){Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(this.element)}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){react_vis_type_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function react_vis_type_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class react_vis_type_ReactVisType extends base_vis_type_BaseVisType{constructor(opts){super(_objectSpread(_objectSpread({},opts),{},{visualization:react_vis_controller_ReactVisController}));if(!this.visConfig.component){throw new Error("Missing component for ReactVisType")}}}function types_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class types_service_TypesService{constructor(){types_service_defineProperty(this,"types",{});types_service_defineProperty(this,"unregisteredHiddenTypes",[])}registerVisualization(visDefinition){if(this.unregisteredHiddenTypes.includes(visDefinition.name)){visDefinition.hidden=true}if(this.types[visDefinition.name]){throw new Error("type already exists!")}this.types[visDefinition.name]=visDefinition}setup(){return{createBaseVisualization:config=>{const vis=new base_vis_type_BaseVisType(config);this.registerVisualization(vis)},createReactVisualization:config=>{const vis=new react_vis_type_ReactVisType(config);this.registerVisualization(vis)},registerAlias:vis_type_alias_registry["b"].add,hideTypes:typeNames=>{typeNames.forEach(name=>{if(this.types[name]){this.types[name].hidden=true}else{this.unregisteredHiddenTypes.push(name)}})}}}start(){return{get:visualization=>this.types[visualization],all:()=>[...Object.values(this.types)],getAliases:vis_type_alias_registry["b"].get,unRegisterAlias:vis_type_alias_registry["b"].remove,getByGroup:group=>Object.values(this.types).filter(type=>type.group===group)}}stop(){}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return VisGroups}));let VisGroups;(function(VisGroups){VisGroups["PROMOTED"]="promoted";VisGroups["TOOLS"]="tools";VisGroups["AGGBASED"]="aggbased"})(VisGroups||(VisGroups={}))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,exports,__webpack_require__){"use strict";var R=typeof Reflect==="object"?Reflect:null;var ReflectApply=R&&typeof R.apply==="function"?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};var ReflectOwnKeys;if(R&&typeof R.ownKeys==="function"){ReflectOwnKeys=R.ownKeys}else if(Object.getOwnPropertySymbols){ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}}else{ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)}}function ProcessEmitWarning(warning){if(console&&console.warn)console.warn(warning)}var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!==value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||NumberIsNaN(arg)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".")}defaultMaxListeners=arg}});EventEmitter.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||NumberIsNaN(n)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".")}this._maxListeners=n;return this};function $getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)};EventEmitter.prototype.emit=function emit(type){var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);var doError=type==="error";var events=this._events;if(events!==undefined)doError=doError&&events.error===undefined;else if(!doError)return false;if(doError){var er;if(args.length>0)er=args[0];if(er instanceof Error){throw er}var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));err.context=er;throw err}var handler=events[type];if(handler===undefined)return false;if(typeof handler==="function"){ReflectApply(handler,this,args)}else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}events=target._events;if(events===undefined){events=target._events=Object.create(null);target._eventsCount=0}else{if(events.newListener!==undefined){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(existing===undefined){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else if(prepend){existing.unshift(listener)}else{existing.push(listener)}m=$getMaxListeners(target);if(m>0&&existing.length>m&&!existing.warned){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;ProcessEmitWarning(w)}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){var args=[];for(var i=0;i<arguments.length;i++)args.push(arguments[i]);if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;ReflectApply(this.listener,this.target,args)}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=onceWrapper.bind(state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}events=this._events;if(events===undefined)return this;list=events[type];if(list===undefined)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=Object.create(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else{spliceOne(list,position)}if(list.length===1)events[type]=list[0];if(events.removeListener!==undefined)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(events===undefined)return this;if(events.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(events[type]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete events[type]}return this}if(arguments.length===0){var keys=Object.keys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners!==undefined){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(events===undefined)return[];var evlistener=events[type];if(evlistener===undefined)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events!==undefined){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener!==undefined){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/discover/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(55),getValue=__webpack_require__(63);function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}module.exports=getNative},function(module,exports,__webpack_require__){var root=__webpack_require__(29);var Symbol=root.Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(56);var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(35),isObjectLike=__webpack_require__(66);var symbolTag="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}module.exports=isSymbol},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(52),castPath=__webpack_require__(64),isFunction=__webpack_require__(34),isIndex=__webpack_require__(93),isObject=__webpack_require__(30),toKey=__webpack_require__(94);function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(key=="prototype"&&isFunction(nested)){throw new Error("Illegal access of function prototype")}if(index!=lastIndex){var objValue=hasOwnProperty.call(nested,key)?nested[key]:undefined;newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}module.exports=baseSet},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(35),isObject=__webpack_require__(30);var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(28),getRawTag=__webpack_require__(58),objectToString=__webpack_require__(59);var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module.exports=baseGetTag},function(module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return memoizeLast}));const neverCalled=Symbol();function memoizeLast(func){let prevCall=neverCalled;const memoizedFunction=function memoizedFunction(...args){if(prevCall!==neverCalled&&prevCall.this===this&&prevCall.args.length===args.length&&prevCall.args.every((arg,index)=>arg===args[index])){return prevCall.returnValue}prevCall={args:args,this:this,returnValue:func.apply(this,args)};return prevCall.returnValue};return memoizedFunction}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner)}}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(true&&module.exports){classNames.default=classNames;module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_visualizations_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41);var _node_modules_val_loader_dist_cjs_js_key_visualizations_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_visualizations_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/visualizations/public",__webpack_require__,96)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["visualizations"]},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(43);case"v7light":return __webpack_require__(45);case"v8dark":return __webpack_require__(47);case"v8light":return __webpack_require__(49)}},function(module,exports,__webpack_require__){var api=__webpack_require__(14);var content=__webpack_require__(44);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(15);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n* 1. Fix overflow of vis\'s specifically for inside embeddable panels, lets the panel decide the overflow\n* 2. Force a better looking scrollbar\n*/\n.embPanel .visualization {\n  scrollbar-width: thin;\n  /* 2 */ }\n  .embPanel .visualization::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .visualization::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .visualization::-webkit-scrollbar-corner, .embPanel .visualization::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.embPanel .visualization .visChart__container {\n  overflow: visible;\n  /* 1 */ }\n\n.embPanel .visLegend__toggle {\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0; }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel_optionsMenuPopover[class*="-isOpen"] .visLegend__toggle,\n.embPanel:hover .visLegend__toggle {\n  opacity: 1; }\n\n.embPanel .visLegend__toggle {\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .visLegend__toggle:focus {\n    opacity: 1;\n    /* 2 */ }\n\n.embPanel--editing .visLegend__toggle {\n  opacity: 1;\n  /* 3 */ }\n\n.visualize {\n  display: flex;\n  flex: 1 1 100%;\n  overflow: hidden; }\n\n.visualization {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  padding: 8px;\n  flex: 1 1 100%;\n  /**\n   * 1. Expand to fill the container but accept being squeezed smaller by the spy, even so small\n   *    that it disappears entirely.\n   */ }\n  .visualization .visChart__container {\n    scrollbar-width: thin;\n    min-height: 0;\n    flex: 1 1 0;\n    /* 1 */\n    display: flex;\n    flex-direction: row;\n    overflow: auto;\n    transition: opacity 0.01s; }\n    .visualization .visChart__container::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .visualization .visChart__container::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .visualization .visChart__container::-webkit-scrollbar-corner, .visualization .visChart__container::-webkit-scrollbar-track {\n      background-color: transparent; }\n    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n      .visualization .visChart__container {\n        flex: 1 0; } }\n    .visualization .visChart__container:focus {\n      box-shadow: none; }\n  .visualization .loading {\n    opacity: 0.5; }\n  .visualization .spinner {\n    position: absolute;\n    top: 40%;\n    left: 0;\n    right: 0;\n    z-index: 20;\n    opacity: 0.5; }\n\n.visChart {\n  display: flex;\n  flex: 1 1 auto;\n  min-height: 0;\n  min-width: 0; }\n\n.visChart--vertical {\n  flex-direction: column; }\n\n.visChart__spinner, .visError {\n  display: flex;\n  flex: 1 1 auto;\n  justify-content: center;\n  align-items: center;\n  text-align: center; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(14);var content=__webpack_require__(46);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(15);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n* 1. Fix overflow of vis\'s specifically for inside embeddable panels, lets the panel decide the overflow\n* 2. Force a better looking scrollbar\n*/\n.embPanel .visualization {\n  scrollbar-width: thin;\n  /* 2 */ }\n  .embPanel .visualization::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .visualization::-webkit-scrollbar-thumb {\n    background-color: rgba(109, 109, 109, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .visualization::-webkit-scrollbar-corner, .embPanel .visualization::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.embPanel .visualization .visChart__container {\n  overflow: visible;\n  /* 1 */ }\n\n.embPanel .visLegend__toggle {\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0; }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel_optionsMenuPopover[class*="-isOpen"] .visLegend__toggle,\n.embPanel:hover .visLegend__toggle {\n  opacity: 1; }\n\n.embPanel .visLegend__toggle {\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .visLegend__toggle:focus {\n    opacity: 1;\n    /* 2 */ }\n\n.embPanel--editing .visLegend__toggle {\n  opacity: 1;\n  /* 3 */ }\n\n.visualize {\n  display: flex;\n  flex: 1 1 100%;\n  overflow: hidden; }\n\n.visualization {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  padding: 8px;\n  flex: 1 1 100%;\n  /**\n   * 1. Expand to fill the container but accept being squeezed smaller by the spy, even so small\n   *    that it disappears entirely.\n   */ }\n  .visualization .visChart__container {\n    scrollbar-width: thin;\n    min-height: 0;\n    flex: 1 1 0;\n    /* 1 */\n    display: flex;\n    flex-direction: row;\n    overflow: auto;\n    transition: opacity 0.01s; }\n    .visualization .visChart__container::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .visualization .visChart__container::-webkit-scrollbar-thumb {\n      background-color: rgba(109, 109, 109, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .visualization .visChart__container::-webkit-scrollbar-corner, .visualization .visChart__container::-webkit-scrollbar-track {\n      background-color: transparent; }\n    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n      .visualization .visChart__container {\n        flex: 1 0; } }\n    .visualization .visChart__container:focus {\n      box-shadow: none; }\n  .visualization .loading {\n    opacity: 0.5; }\n  .visualization .spinner {\n    position: absolute;\n    top: 40%;\n    left: 0;\n    right: 0;\n    z-index: 20;\n    opacity: 0.5; }\n\n.visChart {\n  display: flex;\n  flex: 1 1 auto;\n  min-height: 0;\n  min-width: 0; }\n\n.visChart--vertical {\n  flex-direction: column; }\n\n.visChart__spinner, .visError {\n  display: flex;\n  flex: 1 1 auto;\n  justify-content: center;\n  align-items: center;\n  text-align: center; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(14);var content=__webpack_require__(48);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(15);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n* 1. Fix overflow of vis\'s specifically for inside embeddable panels, lets the panel decide the overflow\n* 2. Force a better looking scrollbar\n*/\n.embPanel .visualization {\n  scrollbar-width: thin;\n  /* 2 */ }\n  .embPanel .visualization::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .visualization::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .visualization::-webkit-scrollbar-corner, .embPanel .visualization::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.embPanel .visualization .visChart__container {\n  overflow: visible;\n  /* 1 */ }\n\n.embPanel .visLegend__toggle {\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0; }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel_optionsMenuPopover[class*="-isOpen"] .visLegend__toggle,\n.embPanel:hover .visLegend__toggle {\n  opacity: 1; }\n\n.embPanel .visLegend__toggle {\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .visLegend__toggle:focus {\n    opacity: 1;\n    /* 2 */ }\n\n.embPanel--editing .visLegend__toggle {\n  opacity: 1;\n  /* 3 */ }\n\n.visualize {\n  display: flex;\n  flex: 1 1 100%;\n  overflow: hidden; }\n\n.visualization {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  padding: 8px;\n  flex: 1 1 100%;\n  /**\n   * 1. Expand to fill the container but accept being squeezed smaller by the spy, even so small\n   *    that it disappears entirely.\n   */ }\n  .visualization .visChart__container {\n    scrollbar-width: thin;\n    min-height: 0;\n    flex: 1 1 0;\n    /* 1 */\n    display: flex;\n    flex-direction: row;\n    overflow: auto;\n    transition: opacity 0.01s; }\n    .visualization .visChart__container::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .visualization .visChart__container::-webkit-scrollbar-thumb {\n      background-color: rgba(152, 162, 179, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .visualization .visChart__container::-webkit-scrollbar-corner, .visualization .visChart__container::-webkit-scrollbar-track {\n      background-color: transparent; }\n    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n      .visualization .visChart__container {\n        flex: 1 0; } }\n    .visualization .visChart__container:focus {\n      box-shadow: none; }\n  .visualization .loading {\n    opacity: 0.5; }\n  .visualization .spinner {\n    position: absolute;\n    top: 40%;\n    left: 0;\n    right: 0;\n    z-index: 20;\n    opacity: 0.5; }\n\n.visChart {\n  display: flex;\n  flex: 1 1 auto;\n  min-height: 0;\n  min-width: 0; }\n\n.visChart--vertical {\n  flex-direction: column; }\n\n.visChart__spinner, .visError {\n  display: flex;\n  flex: 1 1 auto;\n  justify-content: center;\n  align-items: center;\n  text-align: center; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(14);var content=__webpack_require__(50);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(15);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n* 1. Fix overflow of vis\'s specifically for inside embeddable panels, lets the panel decide the overflow\n* 2. Force a better looking scrollbar\n*/\n.embPanel .visualization {\n  scrollbar-width: thin;\n  /* 2 */ }\n  .embPanel .visualization::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .embPanel .visualization::-webkit-scrollbar-thumb {\n    background-color: rgba(109, 109, 109, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .embPanel .visualization::-webkit-scrollbar-corner, .embPanel .visualization::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.embPanel .visualization .visChart__container {\n  overflow: visible;\n  /* 1 */ }\n\n.embPanel .visLegend__toggle {\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0; }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel_optionsMenuPopover[class*="-isOpen"] .visLegend__toggle,\n.embPanel:hover .visLegend__toggle {\n  opacity: 1; }\n\n.embPanel .visLegend__toggle {\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .visLegend__toggle:focus {\n    opacity: 1;\n    /* 2 */ }\n\n.embPanel--editing .visLegend__toggle {\n  opacity: 1;\n  /* 3 */ }\n\n.visualize {\n  display: flex;\n  flex: 1 1 100%;\n  overflow: hidden; }\n\n.visualization {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  padding: 8px;\n  flex: 1 1 100%;\n  /**\n   * 1. Expand to fill the container but accept being squeezed smaller by the spy, even so small\n   *    that it disappears entirely.\n   */ }\n  .visualization .visChart__container {\n    scrollbar-width: thin;\n    min-height: 0;\n    flex: 1 1 0;\n    /* 1 */\n    display: flex;\n    flex-direction: row;\n    overflow: auto;\n    transition: opacity 0.01s; }\n    .visualization .visChart__container::-webkit-scrollbar {\n      width: 16px;\n      height: 16px; }\n    .visualization .visChart__container::-webkit-scrollbar-thumb {\n      background-color: rgba(109, 109, 109, 0.5);\n      border: 6px solid transparent;\n      background-clip: content-box; }\n    .visualization .visChart__container::-webkit-scrollbar-corner, .visualization .visChart__container::-webkit-scrollbar-track {\n      background-color: transparent; }\n    @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {\n      .visualization .visChart__container {\n        flex: 1 0; } }\n    .visualization .visChart__container:focus {\n      box-shadow: none; }\n  .visualization .loading {\n    opacity: 0.5; }\n  .visualization .spinner {\n    position: absolute;\n    top: 40%;\n    left: 0;\n    right: 0;\n    z-index: 20;\n    opacity: 0.5; }\n\n.visChart {\n  display: flex;\n  flex: 1 1 auto;\n  min-height: 0;\n  min-width: 0; }\n\n.visChart--vertical {\n  flex-direction: column; }\n\n.visChart__spinner, .visError {\n  display: flex;\n  flex: 1 1 auto;\n  justify-content: center;\n  align-items: center;\n  text-align: center; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){var baseSet=__webpack_require__(33);function set(object,path,value){return object==null?object:baseSet(object,path,value)}module.exports=set},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(53),eq=__webpack_require__(36);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignValue},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(54);function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}module.exports=baseAssignValue},function(module,exports,__webpack_require__){var getNative=__webpack_require__(27);var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();module.exports=defineProperty},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(34),isMasked=__webpack_require__(60),isObject=__webpack_require__(30),toSource=__webpack_require__(62);var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}module.exports=baseIsNative},function(module,exports,__webpack_require__){(function(global){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(57))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(28);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}module.exports=getRawTag},function(module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(61);var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}module.exports=isMasked},function(module,exports,__webpack_require__){var root=__webpack_require__(29);var coreJsData=root["__core-js_shared__"];module.exports=coreJsData},function(module,exports){var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}module.exports=toSource},function(module,exports){function getValue(object,key){return object==null?undefined:object[key]}module.exports=getValue},function(module,exports,__webpack_require__){var isArray=__webpack_require__(31),isKey=__webpack_require__(65),stringToPath=__webpack_require__(67),toString=__webpack_require__(90);function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}module.exports=castPath},function(module,exports,__webpack_require__){var isArray=__webpack_require__(31),isSymbol=__webpack_require__(32);var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}module.exports=isKey},function(module,exports){function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(68);var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped((function(string){var result=[];if(string.charCodeAt(0)===46){result.push("")}string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}));return result}));module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(69);var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,(function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key}));var cache=result.cache;return result}module.exports=memoizeCapped},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(70);var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;module.exports=memoize},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(71),mapCacheDelete=__webpack_require__(85),mapCacheGet=__webpack_require__(87),mapCacheHas=__webpack_require__(88),mapCacheSet=__webpack_require__(89);function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache},function(module,exports,__webpack_require__){var Hash=__webpack_require__(72),ListCache=__webpack_require__(78),Map=__webpack_require__(84);function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}module.exports=mapCacheClear},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(73),hashDelete=__webpack_require__(74),hashGet=__webpack_require__(75),hashHas=__webpack_require__(76),hashSet=__webpack_require__(77);function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(17);function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}module.exports=hashClear},function(module,exports){function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}module.exports=hashDelete},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(17);var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}module.exports=hashGet},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(17);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}module.exports=hashHas},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(17);var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}module.exports=hashSet},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(79),listCacheDelete=__webpack_require__(80),listCacheGet=__webpack_require__(81),listCacheHas=__webpack_require__(82),listCacheSet=__webpack_require__(83);function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache},function(module,exports){function listCacheClear(){this.__data__=[];this.size=0}module.exports=listCacheClear},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(18);var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}module.exports=listCacheDelete},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(18);function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}module.exports=listCacheGet},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(18);function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}module.exports=listCacheHas},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(18);function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}module.exports=listCacheSet},function(module,exports,__webpack_require__){var getNative=__webpack_require__(27),root=__webpack_require__(29);var Map=getNative(root,"Map");module.exports=Map},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(19);function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}module.exports=mapCacheDelete},function(module,exports){function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}module.exports=isKeyable},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(19);function mapCacheGet(key){return getMapData(this,key).get(key)}module.exports=mapCacheGet},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(19);function mapCacheHas(key){return getMapData(this,key).has(key)}module.exports=mapCacheHas},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(19);function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}module.exports=mapCacheSet},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(91);function toString(value){return value==null?"":baseToString(value)}module.exports=toString},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(28),arrayMap=__webpack_require__(92),isArray=__webpack_require__(31),isSymbol=__webpack_require__(32);var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=baseToString},function(module,exports){function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}module.exports=arrayMap},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}module.exports=isIndex},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(32);var INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toKey},function(module,exports,__webpack_require__){var baseSet=__webpack_require__(33);function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer)}module.exports=setWith},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));__webpack_require__.d(__webpack_exports__,"Vis",(function(){return vis_Vis}));__webpack_require__.d(__webpack_exports__,"TypesService",(function(){return types_service["a"]}));__webpack_require__.d(__webpack_exports__,"VISUALIZE_EMBEDDABLE_TYPE",(function(){return VISUALIZE_EMBEDDABLE_TYPE}));__webpack_require__.d(__webpack_exports__,"VIS_EVENT_TO_TRIGGER",(function(){return VIS_EVENT_TO_TRIGGER}));__webpack_require__.d(__webpack_exports__,"VisualizationContainer",(function(){return VisualizationContainer}));__webpack_require__.d(__webpack_exports__,"VisualizationNoResults",(function(){return visualization_noresults_VisualizationNoResults}));__webpack_require__.d(__webpack_exports__,"getVisSchemas",(function(){return getSchemas}));__webpack_require__.d(__webpack_exports__,"VisualizationsSetup",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisualizationsStart",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisGroups",(function(){return vis_types["b"]}));__webpack_require__.d(__webpack_exports__,"VisParams",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SerializedVis",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SerializedVisData",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisData",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisualizeInput",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SchemaConfig",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"BuildPipelineParams",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"updateOldState",(function(){return updateOldState}));__webpack_require__.d(__webpack_exports__,"PersistedState",(function(){return persisted_state_PersistedState}));__webpack_require__.d(__webpack_exports__,"VisualizationController",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedVisState",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ISavedVis",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisSavedObject",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisResponseValue",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisToExpressionAst",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ExprVisAPIEvents",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"VisualizationListItem",(function(){return vis_type_alias_registry["VisualizationListItem"]}));__webpack_require__.d(__webpack_exports__,"VISUALIZE_ENABLE_LABS_SETTING",(function(){return constants["a"]}));var public_0=__webpack_require__(42);var vis_types=__webpack_require__(16);var public_services=__webpack_require__(1);var external_kbnSharedDeps_React_=__webpack_require__(2);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(6);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var public_=__webpack_require__(7);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(9);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(5);function DisabledLabVisualization({title:title}){const advancedSettingsLink=Object(public_services["d"])().links.management.visualizationSettings;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{titleSize:"xs",title:external_kbnSharedDeps_React_default.a.createElement("h6",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.disabledLabVisualizationTitle",defaultMessage:"{title} is a lab visualization.",values:{title:title}})),iconType:"beaker",body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.disabledLabVisualizationMessage",defaultMessage:"Please turn on lab-mode in the advanced settings to see lab visualizations."}),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{target:"_blank",external:true,href:advancedSettingsLink},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visualizations.disabledLabVisualizationLink",defaultMessage:"Read documentation"}))}))}const VISUALIZE_EMBEDDABLE_TYPE="visualization";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class disabled_lab_embeddable_DisabledLabEmbeddable extends public_["Embeddable"]{constructor(title,initialInput){super(initialInput,{title:title});this.title=title;_defineProperty(this,"domNode",void 0);_defineProperty(this,"type",VISUALIZE_EMBEDDABLE_TYPE)}reload(){}render(domNode){if(this.title){this.domNode=domNode;external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(DisabledLabVisualization,{title:this.title}),domNode)}}destroy(){if(this.domNode){external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(this.domNode)}}}var external_kbnSharedDeps_Lodash_=__webpack_require__(0);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_Rxjs_=__webpack_require__(23);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(4);var data_public_=__webpack_require__(11);var expressions_public_=__webpack_require__(38);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){build_pipeline_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function build_pipeline_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const isDateHistogramBucketAggConfig=data_public_["search"].aggs.isDateHistogramBucketAggConfig;const getSchemas=(vis,{timeRange:timeRange,timefilter:timefilter})=>{const createSchemaConfig=(accessor,agg)=>{if(isDateHistogramBucketAggConfig(agg)){agg.params.timeRange=timeRange;const bounds=agg.params.timeRange&&agg.fieldIsTimeField()?timefilter.calculateBounds(agg.params.timeRange):undefined;agg.buckets.setBounds(bounds);agg.buckets.setInterval(agg.params.interval)}const hasSubAgg=["derivative","moving_avg","serial_diff","cumulative_sum","sum_bucket","avg_bucket","min_bucket","max_bucket"].includes(agg.type.name);const formatAgg=hasSubAgg?agg.params.customMetric||agg.aggConfigs.getRequestAggById(agg.params.metricAgg):agg;const params={};if(agg.type.name==="geohash_grid"){params.precision=agg.params.precision;params.useGeocentroid=agg.params.useGeocentroid}const label=agg.makeLabel&&agg.makeLabel();return{accessor:accessor,format:formatAgg.toSerializedFieldFormat(),params:params,label:label,aggType:agg.type.name}};let cnt=0;const schemas={metric:[]};if(!vis.data.aggs){return schemas}const responseAggs=vis.data.aggs.getResponseAggs().filter(agg=>agg.enabled);const isHierarchical=vis.isHierarchical();const metrics=responseAggs.filter(agg=>agg.type.type==="metrics");responseAggs.forEach(agg=>{let skipMetrics=false;let schemaName=agg.schema;if(!schemaName){if(agg.type.name==="geo_centroid"){schemaName="geo_centroid"}else{cnt++;return}}if(schemaName==="split"){schemaName="split_".concat(vis.params.row?"row":"column");skipMetrics=responseAggs.length-metrics.length>1}if(!schemas[schemaName]){schemas[schemaName]=[]}if(!isHierarchical||agg.type.type!=="metrics"){schemas[schemaName].push(createSchemaConfig(cnt++,agg))}if(isHierarchical&&(agg.type.type!=="metrics"||metrics.length===responseAggs.length)){metrics.forEach(metric=>{const schemaConfig=createSchemaConfig(cnt++,metric);if(!skipMetrics){schemas.metric.push(schemaConfig)}})}});return schemas};const prepareJson=(variable,data)=>{if(data===undefined){return""}return"".concat(variable,"='").concat(JSON.stringify(data).replace(/\\/g,"\\\\").replace(/'/g,"\\'"),"' ")};const escapeString=data=>data.replace(/\\/g,"\\\\").replace(/'/g,"\\'");const prepareString=(variable,data)=>{if(data===undefined){return""}return"".concat(variable,"='").concat(escapeString(data),"' ")};const prepareValue=(variable,data,raw=false)=>{if(data===undefined){return""}if(raw){return"".concat(variable,"=").concat(data," ")}switch(typeof data){case"string":return prepareString(variable,data);case"object":return prepareJson(variable,data);default:return"".concat(variable,"=").concat(data," ")}};const prepareDimension=(variable,data)=>{if(data===undefined){return""}let expr="".concat(variable,"={visdimension ").concat(data.accessor," ");if(data.format){expr+=prepareValue("format",data.format.id);expr+=prepareJson("formatParams",data.format.params)}expr+="} ";return expr};const buildPipelineVisFunction={input_control_vis:params=>"input_control_vis ".concat(prepareJson("visConfig",params)),region_map:(params,schemas)=>{const visConfig=_objectSpread(_objectSpread({},params),buildVisConfig.region_map(schemas));return"regionmap ".concat(prepareJson("visConfig",visConfig))},tile_map:(params,schemas)=>{const visConfig=_objectSpread(_objectSpread({},params),buildVisConfig.tile_map(schemas));return"tilemap ".concat(prepareJson("visConfig",visConfig))}};const buildVisConfig={region_map:schemas=>{const visConfig={};visConfig.metric=schemas.metric[0];if(schemas.segment){visConfig.bucket=schemas.segment[0]}return visConfig},tile_map:schemas=>{const visConfig={};visConfig.dimensions={metric:schemas.metric[0],geohash:schemas.segment?schemas.segment[0]:null,geocentroid:schemas.geo_centroid?schemas.geo_centroid[0]:null};return visConfig}};const buildPipeline=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(vis,params){var _vis$data,indexPattern,searchSource,query,filters,uiState,title,pipeline,visAst,schemas,visConfig;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_vis$data=vis.data,indexPattern=_vis$data.indexPattern,searchSource=_vis$data.searchSource;query=searchSource.getField("query");filters=searchSource.getField("filter");uiState=vis.uiState,title=vis.title;pipeline="kibana | kibana_context ";if(query){pipeline+=prepareJson("query",query)}if(filters){pipeline+=prepareJson("filters",filters)}if(vis.data.savedSearchId){pipeline+=prepareString("savedSearchId",vis.data.savedSearchId)}pipeline+="| ";if(!vis.type.toExpressionAst){_context.next=16;break}_context.next=12;return vis.type.toExpressionAst(vis,params);case 12:visAst=_context.sent;pipeline+=Object(expressions_public_["formatExpression"])(visAst);_context.next=19;break;case 16:if(vis.type.requestHandler==="courier"){pipeline+="esaggs\n    ".concat(prepareString("index",indexPattern.id),"\n    metricsAtAllLevels=").concat(vis.isHierarchical(),"\n    partialRows=").concat(vis.params.showPartialRows||false,"\n    ").concat(prepareJson("aggConfigs",vis.data.aggs.aggs)," | ")}schemas=getSchemas(vis,params);if(buildPipelineVisFunction[vis.type.name]){pipeline+=buildPipelineVisFunction[vis.type.name](_objectSpread({title:title},vis.params),schemas,uiState)}else{visConfig=_objectSpread({},vis.params);visConfig.dimensions=schemas;pipeline+="visualization type='".concat(vis.type.name,"'\n    ").concat(prepareJson("visConfig",visConfig),"\n    metricsAtAllLevels=").concat(vis.isHierarchical(),"\n    partialRows=").concat(vis.params.showPartialRows||false," ");if(indexPattern){pipeline+="".concat(prepareString("index",indexPattern.id)," ");if(vis.data.aggs){pipeline+="".concat(prepareJson("aggConfigs",vis.data.aggs.aggs))}}}case 19:return _context.abrupt("return",pipeline);case 20:case"end":return _context.stop()}}),_callee)})));return function buildPipeline(_x,_x2){return _ref.apply(this,arguments)}}();var uiActions_public_=__webpack_require__(26);const VIS_EVENT_TO_TRIGGER={applyFilter:uiActions_public_["APPLY_FILTER_TRIGGER"],brush:uiActions_public_["SELECT_RANGE_TRIGGER"],filter:uiActions_public_["VALUE_CLICK_TRIGGER"]};function visualize_embeddable_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function visualize_embeddable_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){visualize_embeddable_ownKeys(Object(source),true).forEach((function(key){visualize_embeddable_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{visualize_embeddable_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function visualize_embeddable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function visualize_embeddable_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){visualize_embeddable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){visualize_embeddable_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function visualize_embeddable_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const getKeys=o=>Object.keys(o);class visualize_embeddable_VisualizeEmbeddable extends public_["Embeddable"]{constructor(timefilter,{vis:vis,editPath:editPath,editUrl:editUrl,indexPatterns:indexPatterns,editable:editable,deps:deps},initialInput,attributeService,savedVisualizationsLoader,parent){var _this;super(initialInput,{defaultTitle:vis.title,editPath:editPath,editApp:"visualize",editUrl:editUrl,indexPatterns:indexPatterns,editable:editable,visTypeName:vis.type.name},parent);_this=this;visualize_embeddable_defineProperty(this,"handler",void 0);visualize_embeddable_defineProperty(this,"timefilter",void 0);visualize_embeddable_defineProperty(this,"timeRange",void 0);visualize_embeddable_defineProperty(this,"query",void 0);visualize_embeddable_defineProperty(this,"filters",void 0);visualize_embeddable_defineProperty(this,"visCustomizations",void 0);visualize_embeddable_defineProperty(this,"subscriptions",[]);visualize_embeddable_defineProperty(this,"expression","");visualize_embeddable_defineProperty(this,"vis",void 0);visualize_embeddable_defineProperty(this,"domNode",void 0);visualize_embeddable_defineProperty(this,"type",VISUALIZE_EMBEDDABLE_TYPE);visualize_embeddable_defineProperty(this,"autoRefreshFetchSubscription",void 0);visualize_embeddable_defineProperty(this,"abortController",void 0);visualize_embeddable_defineProperty(this,"deps",void 0);visualize_embeddable_defineProperty(this,"inspectorAdapters",void 0);visualize_embeddable_defineProperty(this,"attributeService",void 0);visualize_embeddable_defineProperty(this,"savedVisualizationsLoader",void 0);visualize_embeddable_defineProperty(this,"getInspectorAdapters",()=>{if(!this.handler||this.inspectorAdapters&&!Object.keys(this.inspectorAdapters).length){return undefined}return this.handler.inspect()});visualize_embeddable_defineProperty(this,"openInspector",()=>{if(!this.handler)return;const adapters=this.handler.inspect();if(!adapters)return;return this.deps.start().plugins.inspector.open(adapters,{title:this.getTitle()})});visualize_embeddable_defineProperty(this,"hasInspector",()=>Boolean(this.getInspectorAdapters()));visualize_embeddable_defineProperty(this,"onContainerLoading",()=>{this.renderComplete.dispatchInProgress();this.updateOutput({loading:true,error:undefined})});visualize_embeddable_defineProperty(this,"onContainerRender",()=>{this.renderComplete.dispatchComplete();this.updateOutput({loading:false,error:undefined})});visualize_embeddable_defineProperty(this,"onContainerError",error=>{if(this.abortController){this.abortController.abort()}this.renderComplete.dispatchError();this.updateOutput({loading:false,error:error})});visualize_embeddable_defineProperty(this,"reload",()=>{this.handleVisUpdate()});visualize_embeddable_defineProperty(this,"handleVisUpdate",visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.updateHandler();case 1:case"end":return _context.stop()}}),_callee)}))));visualize_embeddable_defineProperty(this,"uiStateChangeHandler",()=>{this.updateInput(visualize_embeddable_objectSpread({},this.vis.uiState.toJSON()))});visualize_embeddable_defineProperty(this,"inputIsRefType",input=>{if(!this.attributeService){throw new Error("AttributeService must be defined for getInputAsRefType")}return this.attributeService.inputIsRefType(input)});visualize_embeddable_defineProperty(this,"getInputAsValueType",visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var input;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:input={savedVis:_this.vis.serialize()};if(_this.getTitle()){input.savedVis.title=_this.getTitle()}delete input.savedVis.id;return _context2.abrupt("return",new Promise(resolve=>{resolve(visualize_embeddable_objectSpread({},input))}));case 4:case"end":return _context2.stop()}}),_callee2)}))));visualize_embeddable_defineProperty(this,"getInputAsRefType",visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var _this$savedVisualizat;var savedVis,saveModalTitle,attributes;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return(_this$savedVisualizat=_this.savedVisualizationsLoader)===null||_this$savedVisualizat===void 0?void 0:_this$savedVisualizat.get({});case 2:savedVis=_context3.sent;if(savedVis){_context3.next=5;break}throw new Error("Error creating a saved vis object");case 5:if(_this.attributeService){_context3.next=7;break}throw new Error("AttributeService must be defined for getInputAsRefType");case 7:saveModalTitle=_this.getTitle()?_this.getTitle():external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.embeddable.placeholderTitle",{defaultMessage:"Placeholder Title"});attributes={savedVis:savedVis,vis:_this.vis,title:_this.vis.title};return _context3.abrupt("return",_this.attributeService.getInputAsRefType({id:_this.id,attributes:attributes},{showSaveModal:true,saveModalTitle:saveModalTitle}));case 10:case"end":return _context3.stop()}}),_callee3)}))));this.deps=deps;this.timefilter=timefilter;this.vis=vis;this.vis.uiState.on("change",this.uiStateChangeHandler);this.vis.uiState.on("reload",this.reload);this.attributeService=attributeService;this.savedVisualizationsLoader=savedVisualizationsLoader;this.autoRefreshFetchSubscription=timefilter.getAutoRefreshFetch$().subscribe(this.updateHandler.bind(this));this.subscriptions.push(external_kbnSharedDeps_Rxjs_["merge"](this.getOutput$(),this.getInput$()).subscribe(()=>{this.handleChanges()}));const inspectorAdapters=this.vis.type.inspectorAdapters;if(inspectorAdapters){this.inspectorAdapters=typeof inspectorAdapters==="function"?inspectorAdapters():inspectorAdapters}}getDescription(){return this.vis.description}transferCustomizationsToUiState(){const visCustomizations={vis:this.input.vis,table:this.input.table};if(visCustomizations.vis||visCustomizations.table){if(!external_kbnSharedDeps_Lodash_default.a.isEqual(visCustomizations,this.visCustomizations)){this.visCustomizations=visCustomizations;this.vis.uiState.off("change",this.uiStateChangeHandler);this.vis.uiState.clearAllKeys();if(visCustomizations.vis){this.vis.uiState.set("vis",visCustomizations.vis);getKeys(visCustomizations).forEach(key=>{this.vis.uiState.set(key,visCustomizations[key])})}if(visCustomizations.table){this.vis.uiState.set("table",visCustomizations.table)}this.vis.uiState.on("change",this.uiStateChangeHandler)}}else if(this.parent){this.vis.uiState.clearAllKeys()}}handleChanges(){var _this2=this;return visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var dirty;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_this2.transferCustomizationsToUiState();dirty=false;if(!external_kbnSharedDeps_Lodash_default.a.isEqual(_this2.input.timeRange,_this2.timeRange)){_this2.timeRange=external_kbnSharedDeps_Lodash_default.a.cloneDeep(_this2.input.timeRange);dirty=true}if(!data_public_["esFilters"].onlyDisabledFiltersChanged(_this2.input.filters,_this2.filters)){_this2.filters=_this2.input.filters;dirty=true}if(!external_kbnSharedDeps_Lodash_default.a.isEqual(_this2.input.query,_this2.query)){_this2.query=_this2.input.query;dirty=true}if(_this2.vis.description&&_this2.domNode){_this2.domNode.setAttribute("data-description",_this2.vis.description)}if(_this2.handler&&dirty){_this2.updateHandler()}case 7:case"end":return _context4.stop()}}),_callee4)})))()}render(domNode){var _superprop_getRender=()=>super.render,_this3=this;return visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){var div,expressions;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_this3.timeRange=external_kbnSharedDeps_Lodash_default.a.cloneDeep(_this3.input.timeRange);_this3.transferCustomizationsToUiState();div=document.createElement("div");div.className="visualize panel-content panel-content--fullWidth";domNode.appendChild(div);_this3.domNode=div;_superprop_getRender().call(_this3,_this3.domNode);expressions=Object(public_services["f"])();_this3.handler=new expressions.ExpressionLoader(_this3.domNode,undefined,{onRenderError:(element,error)=>{_this3.onContainerError(error)}});_this3.subscriptions.push(_this3.handler.events$.subscribe(function(){var _ref4=visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee5(event){var agg,triggerId,context,_this3$vis$data$index,_this3$vis$data$index2;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(!(event.name==="bounds")){_context5.next=4;break}agg=_this3.vis.data.aggs.aggs.find(a=>Object(external_kbnSharedDeps_Lodash_["get"])(a,"type.dslName")==="geohash_grid");if(agg&&agg.params.precision!==event.data.precision||agg&&!external_kbnSharedDeps_Lodash_default.a.isEqual(agg.params.boundingBox,event.data.boundingBox)){agg.params.boundingBox=event.data.boundingBox;agg.params.precision=event.data.precision;_this3.reload()}return _context5.abrupt("return");case 4:if(!_this3.input.disableTriggers){triggerId=Object(external_kbnSharedDeps_Lodash_["get"])(VIS_EVENT_TO_TRIGGER,event.name,VIS_EVENT_TO_TRIGGER.filter);if(triggerId===VIS_EVENT_TO_TRIGGER.applyFilter){context=visualize_embeddable_objectSpread({embeddable:_this3,timeFieldName:(_this3$vis$data$index=_this3.vis.data.indexPattern)===null||_this3$vis$data$index===void 0?void 0:_this3$vis$data$index.timeFieldName},event.data)}else{context={embeddable:_this3,data:visualize_embeddable_objectSpread({timeFieldName:(_this3$vis$data$index2=_this3.vis.data.indexPattern)===null||_this3$vis$data$index2===void 0?void 0:_this3$vis$data$index2.timeFieldName},event.data)}}Object(public_services["r"])().getTrigger(triggerId).exec(context)}case 5:case"end":return _context5.stop()}}),_callee5)})));return function(_x){return _ref4.apply(this,arguments)}}()));if(_this3.vis.description){div.setAttribute("data-description",_this3.vis.description)}div.setAttribute("data-test-subj","visualizationLoader");div.setAttribute("data-shared-item","");_this3.subscriptions.push(_this3.handler.loading$.subscribe(_this3.onContainerLoading));_this3.subscriptions.push(_this3.handler.render$.subscribe(_this3.onContainerRender));_this3.updateHandler();case 16:case"end":return _context6.stop()}}),_callee6)})))()}destroy(){super.destroy();this.subscriptions.forEach(s=>s.unsubscribe());this.vis.uiState.off("change",this.uiStateChangeHandler);this.vis.uiState.off("reload",this.reload);if(this.handler){this.handler.destroy();this.handler.getElement().remove()}this.autoRefreshFetchSubscription.unsubscribe()}updateHandler(){var _this4=this;return visualize_embeddable_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){var expressionParams,abortController;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:expressionParams={searchContext:{timeRange:_this4.timeRange,query:_this4.input.query,filters:_this4.input.filters},searchSessionId:_this4.input.searchSessionId,uiState:_this4.vis.uiState,inspectorAdapters:_this4.inspectorAdapters};if(_this4.abortController){_this4.abortController.abort()}_this4.abortController=new AbortController;abortController=_this4.abortController;_context7.next=6;return buildPipeline(_this4.vis,{timefilter:_this4.timefilter,timeRange:_this4.timeRange,abortSignal:_this4.abortController.signal});case 6:_this4.expression=_context7.sent;if(_this4.handler&&!abortController.signal.aborted){_this4.handler.update(_this4.expression,expressionParams)}case 8:case"end":return _context7.stop()}}),_callee7)})))()}supportedTriggers(){var _this$vis$type$getSup,_this$vis$type$getSup2,_this$vis$type;return(_this$vis$type$getSup=(_this$vis$type$getSup2=(_this$vis$type=this.vis.type).getSupportedTriggers)===null||_this$vis$type$getSup2===void 0?void 0:_this$vis$type$getSup2.call(_this$vis$type))!==null&&_this$vis$type$getSup!==void 0?_this$vis$type$getSup:[]}}var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(12);var events=__webpack_require__(24);var elastic_safer_lodash_set=__webpack_require__(8);function persisted_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function prepSetParams(key,value,path){if(value===undefined&&(Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(key)||path.length>0)){value=key;key=undefined}return{value:Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(value),key:key}}class persisted_state_PersistedState extends events["EventEmitter"]{constructor(value,path){super();persisted_state_defineProperty(this,"_path",void 0);persisted_state_defineProperty(this,"_initialized",void 0);persisted_state_defineProperty(this,"_changedState",void 0);persisted_state_defineProperty(this,"_defaultState",void 0);persisted_state_defineProperty(this,"_mergedState",void 0);this._path=this.setPath(path);if(!this._path.length&&value&&!Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(value)){throw new Error("State value must be a plain object")}value=value||this.getDefault();this.set(value);this._initialized=true}get(key,defaultValue){if(!this.hasPath()&&key===undefined){return this._mergedState}return Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(Object(external_kbnSharedDeps_Lodash_["get"])(this._mergedState,this.getIndex(key||""),defaultValue))}set(key,value){const params=prepSetParams(key,value,this._path);const val=this.setValue(params.key,params.value);this.emit("set");return val}setSilent(key,value){const params=prepSetParams(key,value,this._path);if(params.key||params.value){return this.setValue(params.key,params.value,true)}}clearAllKeys(){Object.getOwnPropertyNames(this._changedState).forEach(key=>{this.set(key,null)})}reset(path){const keyPath=this.getIndex(path);const origValue=Object(external_kbnSharedDeps_Lodash_["get"])(this._defaultState,keyPath);const currentValue=Object(external_kbnSharedDeps_Lodash_["get"])(this._mergedState,keyPath);if(origValue===undefined){this.cleanPath(path,this._mergedState)}else{Object(elastic_safer_lodash_set["set"])(this._mergedState,keyPath,origValue)}this.cleanPath(path,this._changedState);if(!Object(external_kbnSharedDeps_Lodash_["isEqual"])(currentValue,origValue))this.emit("change")}getChanges(){return Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(this._changedState)}toJSON(){return this.get()}toString(){return JSON.stringify(this.toJSON())}fromString(input){return this.set(JSON.parse(input))}getIndex(key){if(key===undefined)return this._path;return[...this._path||[],...Object(external_kbnSharedDeps_Lodash_["toPath"])(key)]}getPartialIndex(key){const keyPath=this.getIndex(key);return keyPath.slice(this._path.length)}cleanPath(path,stateTree){const partialPath=this.getPartialIndex(path);let remove=true;if(Array.isArray(partialPath)){while(partialPath.length>0){const lastKey=partialPath.splice(partialPath.length-1,1)[0];const statePath=[...this._path,partialPath];const stateVal=statePath.length>0?Object(external_kbnSharedDeps_Lodash_["get"])(stateTree,statePath):stateTree;if(!Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(stateVal))return;if(remove)delete stateVal[lastKey];if(Object.keys(stateVal).length>0)remove=false}}}getDefault(){return this.hasPath()?undefined:{}}setPath(path){if(Array.isArray(path)){return path}if(Object(external_kbnSharedDeps_Lodash_["isString"])(path)){return[...this.getIndex(path)]}return[]}hasPath(){return this._path.length>0}setValue(key,value,silent=false){const self=this;let stateChanged=false;const initialState=!this._initialized;const keyPath=this.getIndex(key);const hasKeyPath=keyPath.length>0;if(initialState){this._changedState={};if(!this.hasPath()&&key===undefined)this._defaultState=value;else this._defaultState=Object(elastic_safer_lodash_set["set"])({},keyPath,value)}if(!initialState){if(!this.hasPath()&&key===undefined){stateChanged=!Object(external_kbnSharedDeps_Lodash_["isEqual"])(this._changedState,value);this._changedState=value;this._mergedState=Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(value)}else{const curVal=hasKeyPath?this.get(keyPath):this._mergedState;stateChanged=!Object(external_kbnSharedDeps_Lodash_["isEqual"])(curVal,value);if(Array.isArray(Object(external_kbnSharedDeps_Lodash_["get"])(this._mergedState,keyPath))){if(hasKeyPath){Object(elastic_safer_lodash_set["set"])(this._mergedState,keyPath,undefined)}else{this._mergedState=undefined}}if(hasKeyPath){Object(elastic_safer_lodash_set["set"])(this._changedState,keyPath,value)}else{this._changedState=Object(external_kbnSharedDeps_Lodash_["isPlainObject"])(value)?value:{}}}}const targetObj=this._mergedState||Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(this._defaultState);const sourceObj=Object(external_kbnSharedDeps_Lodash_["merge"])({},this._changedState);const mergeMethod=function mergeMethod(targetValue,sourceValue,mergeKey){if(!initialState&&Object(external_kbnSharedDeps_Lodash_["isEqual"])(keyPath,self.getIndex(mergeKey))){return sourceValue===undefined?targetValue:sourceValue}};this._mergedState=Object(external_kbnSharedDeps_Lodash_["mergeWith"])(targetObj,sourceObj,mergeMethod);if(Object(external_kbnSharedDeps_Lodash_["isEqual"])(this._mergedState,this._defaultState))this._changedState={};if(!silent&&stateChanged)this.emit("change",key);return this}}function vis_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function vis_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){vis_ownKeys(Object(source),true).forEach((function(key){vis_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{vis_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function vis_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function vis_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function vis_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){vis_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){vis_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const getSearchSource=function(){var _ref=vis_asyncToGenerator(regeneratorRuntime.mark((function _callee(inputSearchSource,savedSearchId){var searchSource,savedSearch;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:searchSource=inputSearchSource.createCopy();if(!savedSearchId){_context.next=6;break}_context.next=4;return Object(public_services["l"])().get(savedSearchId);case 4:savedSearch=_context.sent;searchSource.setParent(savedSearch.searchSource);case 6:searchSource.setField("size",0);return _context.abrupt("return",searchSource);case 8:case"end":return _context.stop()}}),_callee)})));return function getSearchSource(_x,_x2){return _ref.apply(this,arguments)}}();class vis_Vis{constructor(visType,visState={}){vis_defineProperty(this,"type",void 0);vis_defineProperty(this,"id",void 0);vis_defineProperty(this,"title","");vis_defineProperty(this,"description","");vis_defineProperty(this,"params",void 0);vis_defineProperty(this,"sessionState",{});vis_defineProperty(this,"data",{});vis_defineProperty(this,"uiState",void 0);this.type=this.getType(visType);this.params=this.getParams(visState.params);this.uiState=new persisted_state_PersistedState(visState.uiState);this.id=visState.id}getType(visType){const type=Object(public_services["p"])().get(visType);if(!type){const errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.visualizationTypeInvalidMessage",{defaultMessage:'Invalid visualization type "{visType}"',values:{visType:visType}});throw new Error(errorMessage)}return type}getParams(params){var _this$type$visConfig$,_this$type$visConfig;return Object(external_kbnSharedDeps_Lodash_["defaults"])({},Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(params!==null&&params!==void 0?params:{}),Object(external_kbnSharedDeps_Lodash_["cloneDeep"])((_this$type$visConfig$=(_this$type$visConfig=this.type.visConfig)===null||_this$type$visConfig===void 0?void 0:_this$type$visConfig.defaults)!==null&&_this$type$visConfig$!==void 0?_this$type$visConfig$:{}))}setState(state){var _this=this;return vis_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var typeChanged,aggs,configStates,errorMessage;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:typeChanged=false;if(state.type&&_this.type.name!==state.type){_this.type=_this.getType(state.type);typeChanged=true}if(state.title!==undefined){_this.title=state.title}if(state.description!==undefined){_this.description=state.description}if(state.params||typeChanged){_this.params=_this.getParams(state.params)}if(!(state.data&&state.data.searchSource)){_context2.next=10;break}_context2.next=8;return Object(public_services["n"])().searchSource.create(state.data.searchSource);case 8:_this.data.searchSource=_context2.sent;_this.data.indexPattern=_this.data.searchSource.getField("index");case 10:if(!(state.data&&state.data.savedSearchId)){_context2.next=17;break}_this.data.savedSearchId=state.data.savedSearchId;if(!_this.data.searchSource){_context2.next=17;break}_context2.next=15;return getSearchSource(_this.data.searchSource,_this.data.savedSearchId);case 15:_this.data.searchSource=_context2.sent;_this.data.indexPattern=_this.data.searchSource.getField("index");case 17:if(!(state.data&&(state.data.aggs||!_this.data.aggs))){_context2.next=26;break}aggs=state.data.aggs?Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(state.data.aggs):[];configStates=_this.initializeDefaultsFromSchemas(aggs,_this.type.schemas.all||[]);if(_this.data.indexPattern){_context2.next=25;break}if(!aggs.length){_context2.next=24;break}errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.initializeWithoutIndexPatternErrorMessage",{defaultMessage:"Trying to initialize aggs without index pattern"});throw new Error(errorMessage);case 24:return _context2.abrupt("return");case 25:_this.data.aggs=Object(public_services["a"])().createAggConfigs(_this.data.indexPattern,configStates);case 26:case"end":return _context2.stop()}}),_callee2)})))()}clone(){const _this$serialize=this.serialize(),data=_this$serialize.data,restOfSerialized=_objectWithoutProperties(_this$serialize,["data"]);const vis=new vis_Vis(this.type.name,restOfSerialized);vis.setState(vis_objectSpread(vis_objectSpread({},restOfSerialized),{},{data:{}}));const aggs=this.data.indexPattern?Object(public_services["a"])().createAggConfigs(this.data.indexPattern,data.aggs):undefined;vis.data=vis_objectSpread(vis_objectSpread({},this.data),{},{aggs:aggs});return vis}serialize(){const aggs=this.data.aggs?this.data.aggs.aggs.map(agg=>agg.toJSON()):[];return{id:this.id,title:this.title,description:this.description,type:this.type.name,params:Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(this.params),uiState:this.uiState.toJSON(),data:{aggs:aggs,searchSource:this.data.searchSource?this.data.searchSource.getSerializedFields():{},savedSearchId:this.data.savedSearchId}}}isHierarchical(){if(Object(external_kbnSharedDeps_Lodash_["isFunction"])(this.type.hierarchicalData)){return!!this.type.hierarchicalData(this)}else{return!!this.type.hierarchicalData}}initializeDefaultsFromSchemas(configStates,schemas){const newConfigs=[...configStates];schemas.filter(schema=>Array.isArray(schema.defaults)&&schema.defaults.length>0).filter(schema=>!configStates.find(agg=>agg.schema&&agg.schema===schema.name)).forEach(schema=>{const defaultSchemaConfig=schema.defaults.slice(0,schema.max);defaultSchemaConfig.forEach(d=>newConfigs.push(d))});return newConfigs}}const NewVisModal=Object(external_kbnSharedDeps_React_["lazy"])(()=>__webpack_require__.e(1).then(__webpack_require__.bind(null,117)));function showNewVisModal({editorParams:editorParams=[],onClose:onClose,originatingApp:originatingApp,outsideVisualizeApp:outsideVisualizeApp}={}){const container=document.createElement("div");let isClosed=false;const handleClose=()=>{if(isClosed)return;external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(container);document.body.removeChild(container);if(onClose){onClose()}isClosed=true};document.body.appendChild(container);const element=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Suspense"],{fallback:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPortal"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiProgress"],{size:"xs",position:"fixed"}))},external_kbnSharedDeps_React_default.a.createElement(NewVisModal,{isOpen:true,onClose:handleClose,originatingApp:originatingApp,stateTransfer:Object(public_services["e"])().getStateTransfer(),outsideVisualizeApp:outsideVisualizeApp,editorParams:editorParams,visTypesRegistry:Object(public_services["p"])(),addBasePath:Object(public_services["h"])().basePath.prepend,uiSettings:Object(public_services["q"])(),savedObjects:Object(public_services["k"])(),usageCollection:Object(public_services["s"])(),application:Object(public_services["b"])(),docLinks:Object(public_services["d"])()})));external_kbnSharedDeps_ReactDom_default.a.render(element,container);return()=>handleClose()}function vis_update_state_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function vis_update_state_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){vis_update_state_ownKeys(Object(source),true).forEach((function(key){vis_update_state_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{vis_update_state_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function vis_update_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function convertHeatmapLabelColor(visState){const hasOverwriteColorParam=external_kbnSharedDeps_Lodash_default.a.get(visState,"params.valueAxes[0].labels.overwriteColor")!==undefined;if(visState.type==="heatmap"&&visState.params&&!hasOverwriteColorParam){const showLabels=external_kbnSharedDeps_Lodash_default.a.get(visState,"params.valueAxes[0].labels.show",false);const color=external_kbnSharedDeps_Lodash_default.a.get(visState,"params.valueAxes[0].labels.color","#555");Object(elastic_safer_lodash_set["set"])(visState,"params.valueAxes[0].labels.overwriteColor",showLabels&&color!=="#555")}}function convertTermAggregation(visState){if(visState.aggs){visState.aggs.forEach(agg=>{if(agg.type==="terms"&&agg.params&&agg.params.orderBy==="_term"){agg.params.orderBy="_key"}})}}function convertPropertyNames(visState){if(typeof external_kbnSharedDeps_Lodash_default.a.get(visState,"params.showMeticsAtAllLevels")==="boolean"){visState.params.showMetricsAtAllLevels=visState.params.showMeticsAtAllLevels;delete visState.params.showMeticsAtAllLevels}}function convertDateHistogramScaleMetrics(visState){if(visState.aggs){visState.aggs.forEach(agg=>{if(agg.type==="date_histogram"&&agg.params&&agg.params.interval!=="auto"&&agg.params.scaleMetricValues===undefined){agg.params.scaleMetricValues=true}})}}function convertSeriesParams(visState){if(visState.params.seriesParams){return}const isUserDefinedYAxis=visState.params.setYExtents;const defaultYExtents=visState.params.defaultYExtents;const mode=["stacked","overlap"].includes(visState.params.mode)?"normal":visState.params.mode||"normal";if(!visState.params.valueAxes||!visState.params.valueAxes.length){visState.params.valueAxes=[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:0,filter:false,truncate:100},title:{text:"Count"}}]}visState.params.valueAxes[0].scale=vis_update_state_objectSpread(vis_update_state_objectSpread({},visState.params.valueAxes[0].scale),{},{type:visState.params.scale||"linear",setYExtents:visState.params.setYExtents||false,defaultYExtents:visState.params.defaultYExtents||false,boundsMargin:defaultYExtents?visState.params.boundsMargin:0,min:isUserDefinedYAxis?visState.params.yAxis.min:undefined,max:isUserDefinedYAxis?visState.params.yAxis.max:undefined,mode:mode});const interpolate=visState.params.smoothLines?"cardinal":visState.params.interpolate;const stacked=["stacked","percentage","wiggle","silhouette"].includes(visState.params.mode);visState.params.seriesParams=[{show:true,type:visState.params.type||"line",mode:stacked?"stacked":"normal",interpolate:interpolate,drawLinesBetweenPoints:visState.params.drawLinesBetweenPoints,showCircles:visState.params.showCircles,radiusRatio:visState.params.radiusRatio,data:{label:"Count",id:"1"},lineWidth:2,valueAxis:"ValueAxis-1"}]}const updateOldState=visState=>{if(!visState)return visState;const newState=external_kbnSharedDeps_Lodash_default.a.cloneDeep(visState);convertTermAggregation(newState);convertPropertyNames(newState);convertDateHistogramScaleMetrics(newState);if(visState.params&&["line","area","histogram"].includes(visState.params.type)){convertSeriesParams(newState)}if(visState.type==="gauge"&&visState.fontSize){delete newState.fontSize;Object(elastic_safer_lodash_set["set"])(newState,"gauge.style.fontSize",visState.fontSize)}if(["gauge","metric"].includes(visState.type)&&external_kbnSharedDeps_Lodash_default.a.get(visState.params,"gauge.gaugeType",null)==="Metric"){newState.type="metric";newState.params.addLegend=false;newState.params.type="metric";newState.params.metric=newState.params.gauge;delete newState.params.gauge;delete newState.params.metric.gaugeType;delete newState.params.metric.gaugeStyle;delete newState.params.metric.backStyle;delete newState.params.metric.scale;delete newState.params.metric.type;delete newState.params.metric.orientation;delete newState.params.metric.verticalSplit;delete newState.params.metric.autoExtend;newState.params.metric.metricColorMode=newState.params.metric.gaugeColorMode;delete newState.params.metric.gaugeColorMode}else if(visState.type==="metric"&&external_kbnSharedDeps_Lodash_default.a.get(visState.params,"gauge.gaugeType","Metric")!=="Metric"){newState.type="gauge";newState.params.type="gauge"}convertHeatmapLabelColor(newState);return newState};function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function saved_visualization_references_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function saved_visualization_references_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){saved_visualization_references_ownKeys(Object(source),true).forEach((function(key){saved_visualization_references_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{saved_visualization_references_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function saved_visualization_references_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function extractReferences({attributes:attributes,references:references=[]}){const updatedAttributes=saved_visualization_references_objectSpread({},attributes);const updatedReferences=[...references];if(updatedAttributes.searchSourceFields){const _extractSearchSourceR=Object(data_public_["extractSearchSourceReferences"])(updatedAttributes.searchSourceFields),_extractSearchSourceR2=_slicedToArray(_extractSearchSourceR,2),searchSource=_extractSearchSourceR2[0],searchSourceReferences=_extractSearchSourceR2[1];updatedAttributes.searchSourceFields=searchSource;searchSourceReferences.forEach(r=>updatedReferences.push(r))}if(updatedAttributes.savedSearchId){updatedReferences.push({name:"search_0",type:"search",id:String(updatedAttributes.savedSearchId)});delete updatedAttributes.savedSearchId;updatedAttributes.savedSearchRefName="search_0"}if(updatedAttributes.visState){const visState=JSON.parse(String(updatedAttributes.visState));const controls=visState.params&&visState.params.controls||[];controls.forEach((control,i)=>{if(!control.indexPattern){return}control.indexPatternRefName="control_".concat(i,"_index_pattern");updatedReferences.push({name:control.indexPatternRefName,type:"index-pattern",id:control.indexPattern});delete control.indexPattern});updatedAttributes.visState=JSON.stringify(visState)}return{references:updatedReferences,attributes:updatedAttributes}}function injectReferences(savedObject,references){if(savedObject.searchSourceFields){savedObject.searchSourceFields=Object(data_public_["injectSearchSourceReferences"])(savedObject.searchSourceFields,references)}if(savedObject.savedSearchRefName){const savedSearchReference=references.find(reference=>reference.name===savedObject.savedSearchRefName);if(!savedSearchReference){throw new Error('Could not find saved search reference "'.concat(savedObject.savedSearchRefName,'"'))}savedObject.savedSearchId=savedSearchReference.id;delete savedObject.savedSearchRefName}if(savedObject.visState){const controls=savedObject.visState.params&&savedObject.visState.params.controls||[];controls.forEach(control=>{if(!control.indexPatternRefName){return}const reference=references.find(ref=>ref.name===control.indexPatternRefName);if(!reference){throw new Error('Could not find index pattern reference "'.concat(control.indexPatternRefName,'"'))}control.indexPattern=reference.id;delete control.indexPatternRefName})}}var discover_public_=__webpack_require__(25);function _saved_vis_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _saved_vis_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){_saved_vis_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){_saved_vis_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _saved_vis_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const convertToSerializedVis=savedVis=>{const id=savedVis.id,title=savedVis.title,description=savedVis.description,visState=savedVis.visState,uiStateJSON=savedVis.uiStateJSON,searchSourceFields=savedVis.searchSourceFields;const aggs=searchSourceFields&&searchSourceFields.index?visState.aggs||[]:visState.aggs;return{id:id,title:title,type:visState.type,description:description,params:visState.params,uiState:JSON.parse(uiStateJSON||"{}"),data:{aggs:aggs,searchSource:searchSourceFields,savedSearchId:savedVis.savedSearchId}}};const convertFromSerializedVis=vis=>({id:vis.id,title:vis.title,description:vis.description,visState:{title:vis.title,type:vis.type,aggs:vis.data.aggs,params:vis.params},uiStateJSON:JSON.stringify(vis.uiState),searchSourceFields:vis.data.searchSource,savedSearchId:vis.data.savedSearchId});function createSavedVisClass(services){const savedSearch=Object(discover_public_["createSavedSearchesLoader"])(services);class SavedVis extends services.savedObjects.SavedObjectClass{constructor(opts={}){if(typeof opts!=="object"){opts={id:opts}}const visState=!opts.type?null:{type:opts.type};super({type:SavedVis.type,mapping:SavedVis.mapping,extractReferences:extractReferences,injectReferences:injectReferences,id:opts.id||"",indexPattern:opts.indexPattern,defaults:{title:"",visState:visState,uiStateJSON:"{}",description:"",savedSearchId:opts.savedSearchId,version:1},afterESResp:function(){var _afterESResp=_saved_vis_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject){var _savedVis$searchSourc;var savedVis;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:savedVis=savedObject;_context.next=3;return updateOldState(savedVis.visState);case 3:savedVis.visState=_context.sent;if(!((_savedVis$searchSourc=savedVis.searchSourceFields)===null||_savedVis$searchSourc===void 0?void 0:_savedVis$searchSourc.index)){_context.next=7;break}_context.next=7;return services.indexPatterns.get(savedVis.searchSourceFields.index);case 7:if(!savedVis.savedSearchId){_context.next=10;break}_context.next=10;return savedSearch.get(savedVis.savedSearchId);case 10:return _context.abrupt("return",savedVis);case 11:case"end":return _context.stop()}}),_callee)})));function afterESResp(_x){return _afterESResp.apply(this,arguments)}return afterESResp}()});this.showInRecentlyAccessed=true;this.getFullPath=()=>"/app/visualize#/edit/".concat(this.id)}}_saved_vis_defineProperty(SavedVis,"type","visualization");_saved_vis_defineProperty(SavedVis,"mapping",{title:"text",visState:"json",uiStateJSON:"text",description:"text",savedSearchId:"keyword",version:"integer"});_saved_vis_defineProperty(SavedVis,"fieldOrder",["title","description"]);return SavedVis}var constants=__webpack_require__(13);function create_vis_embeddable_from_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function create_vis_embeddable_from_object_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){create_vis_embeddable_from_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){create_vis_embeddable_from_object_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const createVisEmbeddableFromObject=deps=>function(){var _ref=create_vis_embeddable_from_object_asyncToGenerator(regeneratorRuntime.mark((function _callee(vis,input,savedVisualizationsLoader,attributeService,parent){var savedVisualizations,visId,editPath,editUrl,isLabsEnabled,indexPatterns,editable;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:savedVisualizations=Object(public_services["m"])();_context.prev=1;visId=vis.id;editPath=visId?savedVisualizations.urlFor(visId):"#/edit_by_value";editUrl=visId?Object(public_services["h"])().basePath.prepend("/app/visualize".concat(savedVisualizations.urlFor(visId))):"";isLabsEnabled=Object(public_services["q"])().get(constants["a"]);if(!(!isLabsEnabled&&vis.type.stage==="experimental")){_context.next=8;break}return _context.abrupt("return",new disabled_lab_embeddable_DisabledLabEmbeddable(vis.title,input));case 8:indexPatterns=[];if(!vis.type.getUsedIndexPattern){_context.next=15;break}_context.next=12;return vis.type.getUsedIndexPattern(vis.params);case 12:indexPatterns=_context.sent;_context.next=16;break;case 15:if(vis.data.indexPattern){indexPatterns=[vis.data.indexPattern]}case 16:editable=Object(public_services["c"])().visualize.save;return _context.abrupt("return",new visualize_embeddable_VisualizeEmbeddable(Object(public_services["o"])(),{vis:vis,indexPatterns:indexPatterns,editPath:editPath,editUrl:editUrl,editable:editable,deps:deps},input,attributeService,savedVisualizationsLoader,parent));case 20:_context.prev=20;_context.t0=_context["catch"](1);console.error(_context.t0);return _context.abrupt("return",new public_["ErrorEmbeddable"](_context.t0,input,parent));case 24:case"end":return _context.stop()}}),_callee,null,[[1,20]])})));return function(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments)}}();var savedObjects_public_=__webpack_require__(22);function visualize_embeddable_factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function visualize_embeddable_factory_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){visualize_embeddable_factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){visualize_embeddable_factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function visualize_embeddable_factory_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class visualize_embeddable_factory_VisualizeEmbeddableFactory{constructor(deps){this.deps=deps;visualize_embeddable_factory_defineProperty(this,"type",VISUALIZE_EMBEDDABLE_TYPE);visualize_embeddable_factory_defineProperty(this,"attributeService",void 0);visualize_embeddable_factory_defineProperty(this,"savedObjectMetaData",{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.savedObjectName",{defaultMessage:"Visualization"}),includeFields:["visState"],type:"visualization",getIconForSavedObject:savedObject=>Object(public_services["p"])().get(JSON.parse(savedObject.attributes.visState).type).icon||"visualizeApp",getTooltipForSavedObject:savedObject=>"".concat(savedObject.attributes.title," (").concat(Object(public_services["p"])().get(JSON.parse(savedObject.attributes.visState).type).title,")"),showSavedObject:savedObject=>{const typeName=JSON.parse(savedObject.attributes.visState).type;const visType=Object(public_services["p"])().get(typeName);if(!visType){return false}if(Object(public_services["q"])().get(constants["a"])){return true}return visType.stage!=="experimental"}})}isEditable(){return visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",Object(public_services["c"])().visualize.save);case 1:case"end":return _context.stop()}}),_callee)})))()}getDisplayName(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.displayName",{defaultMessage:"visualization"})}getCurrentAppId(){var _this=this;return visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.deps.start().core.application.currentAppId$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["first"])()).toPromise();case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})))()}getAttributeService(){var _this2=this;return visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(_this2.attributeService){_context3.next=4;break}_context3.next=3;return _this2.deps.start().plugins.embeddable.getAttributeService(_this2.type,{saveMethod:_this2.saveMethod.bind(_this2),checkForDuplicateTitle:_this2.checkTitle.bind(_this2)});case 3:_this2.attributeService=_context3.sent;case 4:return _context3.abrupt("return",_this2.attributeService);case 5:case"end":return _context3.stop()}}),_callee3)})))()}createFromSavedObject(savedObjectId,input,parent){var _this3=this;return visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var savedVisualizations,savedObject,visState,vis;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:savedVisualizations=Object(public_services["m"])();_context4.prev=1;_context4.next=4;return savedVisualizations.get(savedObjectId);case 4:savedObject=_context4.sent;visState=convertToSerializedVis(savedObject);vis=new vis_Vis(savedObject.visState.type,visState);_context4.next=9;return vis.setState(visState);case 9:_context4.t0=createVisEmbeddableFromObject(_this3.deps);_context4.t1=vis;_context4.t2=input;_context4.t3=savedVisualizations;_context4.next=15;return _this3.getAttributeService();case 15:_context4.t4=_context4.sent;_context4.t5=parent;return _context4.abrupt("return",(0,_context4.t0)(_context4.t1,_context4.t2,_context4.t3,_context4.t4,_context4.t5));case 20:_context4.prev=20;_context4.t6=_context4["catch"](1);console.error(_context4.t6);return _context4.abrupt("return",new public_["ErrorEmbeddable"](_context4.t6,input,parent));case 24:case"end":return _context4.stop()}}),_callee4,null,[[1,20]])})))()}create(input,parent){var _this4=this;return visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var visState,vis,savedVisualizations;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(!input.savedVis){_context5.next=17;break}visState=input.savedVis;vis=new vis_Vis(visState.type,visState);_context5.next=5;return vis.setState(visState);case 5:savedVisualizations=Object(public_services["m"])();_context5.t0=createVisEmbeddableFromObject(_this4.deps);_context5.t1=vis;_context5.t2=input;_context5.t3=savedVisualizations;_context5.next=12;return _this4.getAttributeService();case 12:_context5.t4=_context5.sent;_context5.t5=parent;return _context5.abrupt("return",(0,_context5.t0)(_context5.t1,_context5.t2,_context5.t3,_context5.t4,_context5.t5));case 17:_context5.t6=showNewVisModal;_context5.next=20;return _this4.getCurrentAppId();case 20:_context5.t7=_context5.sent;_context5.t8={originatingApp:_context5.t7,outsideVisualizeApp:true};(0,_context5.t6)(_context5.t8);return _context5.abrupt("return",undefined);case 24:case"end":return _context5.stop()}}),_callee5)})))()}saveMethod(attributes){return visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){var _visObj$data$searchSo,title,savedVis,visObj,saveOptions,serializedVis,params,data,id;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.prev=0;title=attributes.title,savedVis=attributes.savedVis;visObj=attributes.vis;if(savedVis){_context6.next=5;break}throw new Error("No Saved Vis");case 5:saveOptions={confirmOverwrite:false,returnToOrigin:true};savedVis.title=title;savedVis.copyOnSave=false;savedVis.description="";savedVis.searchSourceFields=visObj===null||visObj===void 0?void 0:(_visObj$data$searchSo=visObj.data.searchSource)===null||_visObj$data$searchSo===void 0?void 0:_visObj$data$searchSo.getSerializedFields();serializedVis=visObj.serialize();params=serializedVis.params,data=serializedVis.data;savedVis.visState={title:title,type:serializedVis.type,params:params,aggs:data.aggs};if(visObj){savedVis.uiStateJSON=visObj===null||visObj===void 0?void 0:visObj.uiState.toString()}_context6.next=16;return savedVis.save(saveOptions);case 16:id=_context6.sent;if(!(!id||id==="")){_context6.next=19;break}throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.savingVisualizationFailed.errorMsg",{defaultMessage:"Saving a visualization failed"}));case 19:return _context6.abrupt("return",{id:id});case 22:_context6.prev=22;_context6.t0=_context6["catch"](0);throw _context6.t0;case 25:case"end":return _context6.stop()}}),_callee6,null,[[0,22]])})))()}checkTitle(props){var _this5=this;return visualize_embeddable_factory_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){var savedObjectsClient,overlays;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _this5.deps.start().core.savedObjects.client;case 2:savedObjectsClient=_context7.sent;_context7.next=5;return _this5.deps.start().core.overlays;case 5:overlays=_context7.sent;return _context7.abrupt("return",Object(savedObjects_public_["checkForDuplicateTitle"])({title:props.newTitle,copyOnSave:false,lastSavedTitle:"",getEsType:()=>_this5.type,getDisplayName:_this5.getDisplayName||(()=>_this5.type)},props.isTitleDuplicateConfirmed,props.onTitleDuplicate,{savedObjectsClient:savedObjectsClient,overlays:overlays}));case 7:case"end":return _context7.stop()}}),_callee7)})))()}}function visualization_function_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function visualization_function_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){visualization_function_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){visualization_function_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const visualization=()=>({name:"visualization",type:"render",help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.functions.visualization.help",{defaultMessage:"A simple visualization"}),args:{index:{types:["string","null"],default:null,help:"Index"},metricsAtAllLevels:{types:["boolean"],default:false,help:"Metrics levels"},partialRows:{types:["boolean"],default:false,help:"Partial rows"},type:{types:["string"],default:"",help:"Type"},schemas:{types:["string"],default:'"{}"',help:"Schemas"},visConfig:{types:["string"],default:'"{}"',help:"Visualization configuration"},uiState:{types:["string"],default:'"{}"',help:"User interface state"},aggConfigs:{types:["string"],default:'"{}"',help:"Aggregation configurations"}},fn(input,args,{inspectorAdapters:inspectorAdapters}){return visualization_function_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var visConfigParams,schemas,visType,indexPattern,uiStateParams,uiState,aggConfigsState,aggs;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:visConfigParams=args.visConfig?JSON.parse(args.visConfig):{};schemas=args.schemas?JSON.parse(args.schemas):{};visType=Object(public_services["p"])().get(args.type||"histogram");if(!args.index){_context.next=9;break}_context.next=6;return Object(public_services["j"])().get(args.index);case 6:_context.t0=_context.sent;_context.next=10;break;case 9:_context.t0=null;case 10:indexPattern=_context.t0;uiStateParams=args.uiState?JSON.parse(args.uiState):{};uiState=new persisted_state_PersistedState(uiStateParams);aggConfigsState=args.aggConfigs?JSON.parse(args.aggConfigs):[];aggs=indexPattern?Object(public_services["n"])().aggs.createAggConfigs(indexPattern,aggConfigsState):undefined;if(!(typeof visType.requestHandler==="function")){_context.next=19;break}_context.next=18;return visType.requestHandler({partialRows:args.partialRows,metricsAtAllLevels:args.metricsAtAllLevels,index:indexPattern,visParams:visConfigParams,timeRange:Object(external_kbnSharedDeps_Lodash_["get"])(input,"timeRange",null),query:Object(external_kbnSharedDeps_Lodash_["get"])(input,"query",null),filters:Object(external_kbnSharedDeps_Lodash_["get"])(input,"filters",null),uiState:uiState,inspectorAdapters:inspectorAdapters,queryFilter:Object(public_services["g"])(),aggs:aggs});case 18:input=_context.sent;case 19:if(!(typeof visType.responseHandler==="function")){_context.next=24;break}if(input.columns){input.columns.forEach(column=>{if(column.aggConfig){column.aggConfig.aggConfigs.schemas=visType.schemas.all}});Object.keys(schemas).forEach(key=>{schemas[key].forEach(i=>{if(input.columns[i]&&input.columns[i].aggConfig){input.columns[i].aggConfig.schema=key}})})}_context.next=23;return visType.responseHandler(input,visConfigParams.dimensions);case 23:input=_context.sent;case 24:return _context.abrupt("return",{type:"render",as:"visualization",value:{visData:input,visType:args.type||"",visConfig:visConfigParams}});case 25:case"end":return _context.stop()}}),_callee)})))()}});function expressions_vis_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class vis_ExprVis extends events["EventEmitter"]{constructor(visState={type:"histogram"}){super();expressions_vis_defineProperty(this,"title","");expressions_vis_defineProperty(this,"type",void 0);expressions_vis_defineProperty(this,"params",{});expressions_vis_defineProperty(this,"sessionState",{});expressions_vis_defineProperty(this,"API",void 0);expressions_vis_defineProperty(this,"eventsSubject",void 0);expressions_vis_defineProperty(this,"uiState",void 0);this.type=this.getType(visState.type);this.uiState=new persisted_state_PersistedState;this.setState(visState);this.API={events:{filter:data=>{if(!this.eventsSubject)return;this.eventsSubject.next({name:"filterBucket",data:data.data?{data:data.data,negate:data.negate}:{data:[data]}})},brush:data=>{if(!this.eventsSubject)return;this.eventsSubject.next({name:"brush",data:data})},applyFilter:data=>{if(!this.eventsSubject)return;this.eventsSubject.next({name:"applyFilter",data:data})}}}}getType(type){if(external_kbnSharedDeps_Lodash_default.a.isString(type)){const newType=Object(public_services["p"])().get(type);if(!newType){throw new Error('Invalid type "'.concat(type,'"'))}return newType}else{return type}}setState(state){this.title=state.title||"";if(state.type){this.type=this.getType(state.type)}this.params=external_kbnSharedDeps_Lodash_default.a.defaultsDeep({},external_kbnSharedDeps_Lodash_default.a.cloneDeep(state.params||{}),external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.type.visConfig.defaults||{}))}getState(){return{title:this.title,type:this.type.name,params:external_kbnSharedDeps_Lodash_default.a.cloneDeep(this.params)}}updateState(){this.emit("update")}forceReload(){this.emit("reload")}isHierarchical(){if(external_kbnSharedDeps_Lodash_default.a.isFunction(this.type.hierarchicalData)){return!!this.type.hierarchicalData(this)}else{return!!this.type.hierarchicalData}}hasUiState(){return!!this.uiState}getUiState(){return this.uiState}setUiState(state){this.uiState=state}uiStateVal(key,val){if(this.hasUiState()){if(external_kbnSharedDeps_Lodash_default.a.isUndefined(val)){return this.uiState.get(key)}return this.uiState.set(key,val)}return val}}var memoize=__webpack_require__(37);var kibanaUtils_public_=__webpack_require__(3);function visualization_chart_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function visualization_chart_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){visualization_chart_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){visualization_chart_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function visualization_chart_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class visualization_chart_VisualizationChart extends external_kbnSharedDeps_React_default.a.Component{constructor(props){var _this;super(props);_this=this;visualization_chart_defineProperty(this,"resizeChecker",void 0);visualization_chart_defineProperty(this,"visualization",void 0);visualization_chart_defineProperty(this,"chartDiv",external_kbnSharedDeps_React_default.a.createRef());visualization_chart_defineProperty(this,"containerDiv",external_kbnSharedDeps_React_default.a.createRef());visualization_chart_defineProperty(this,"renderSubject",void 0);visualization_chart_defineProperty(this,"renderSubscription",void 0);visualization_chart_defineProperty(this,"onUiStateChanged",()=>{this.startRenderVisualization()});this.renderSubject=new external_kbnSharedDeps_Rxjs_["Subject"];const render$=this.renderSubject.asObservable().pipe(Object(external_kbnSharedDeps_RxjsOperators_["share"])());const success$=render$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["filter"])(({vis:vis,visData:visData})=>vis&&(!vis.type.requiresSearch||visData)),Object(external_kbnSharedDeps_RxjsOperators_["debounceTime"])(100),Object(external_kbnSharedDeps_RxjsOperators_["switchMap"])(function(){var _ref=visualization_chart_asyncToGenerator(regeneratorRuntime.mark((function _callee({vis:vis,visData:visData,visParams:visParams}){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.visualization){_context.next=2;break}throw new Error("Visualization implementation was not initialized on first render.");case 2:return _context.abrupt("return",_this.visualization.render(visData,visParams));case 3:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}()));this.renderSubscription=success$.subscribe(()=>{if(this.props.onInit){this.props.onInit()}})}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:"visChart__container kbn-resetFocusState",tabIndex:0,ref:this.containerDiv},external_kbnSharedDeps_React_default.a.createElement("div",{className:"visChart",ref:this.chartDiv}))}componentDidMount(){if(!this.chartDiv.current||!this.containerDiv.current){throw new Error("chartDiv and currentDiv reference should always be present.")}const vis=this.props.vis;const Visualization=vis.type.visualization;if(!Visualization){throw new Error("Tried to use VisualizationChart component with a vis without visualization property.")}this.visualization=new Visualization(this.chartDiv.current,vis);this.resizeChecker=new kibanaUtils_public_["ResizeChecker"](this.containerDiv.current);this.resizeChecker.on("resize",()=>this.startRenderVisualization());if(this.props.listenOnChange){this.props.uiState.on("change",this.onUiStateChanged)}this.startRenderVisualization()}componentDidUpdate(){this.startRenderVisualization()}componentWillUnmount(){if(this.renderSubscription){this.renderSubscription.unsubscribe()}if(this.resizeChecker){this.resizeChecker.destroy()}if(this.visualization){this.visualization.destroy()}}startRenderVisualization(){if(this.containerDiv.current&&this.chartDiv.current){this.renderSubject.next({vis:this.props.vis,visData:this.props.visData,visParams:this.props.visParams})}}}function visualization_noresults_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class visualization_noresults_VisualizationNoResults extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);visualization_noresults_defineProperty(this,"containerDiv",external_kbnSharedDeps_React_default.a.createRef())}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"visNoResult",className:"visError",ref:this.containerDiv},external_kbnSharedDeps_React_default.a.createElement("div",{className:"item top"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"item"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"visualizeApp",size:"m",color:"subdued"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.noResultsFoundTitle",{defaultMessage:"No results found"})))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"item bottom"}))}componentDidMount(){this.afterRender()}componentDidUpdate(){this.afterRender()}afterRender(){if(this.props.onInit){this.props.onInit()}}}function visualization_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function shouldShowNoResultsMessage(vis,visData){const requiresSearch=Object(external_kbnSharedDeps_Lodash_["get"])(vis,"type.requiresSearch");const rows=Object(external_kbnSharedDeps_Lodash_["get"])(visData,"rows");const isZeroHits=Object(external_kbnSharedDeps_Lodash_["get"])(visData,"hits")===0||rows&&!rows.length;const shouldShowMessage=!Object(external_kbnSharedDeps_Lodash_["get"])(vis,"type.useCustomNoDataScreen");return Boolean(requiresSearch&&isZeroHits&&shouldShowMessage)}class visualization_Visualization extends external_kbnSharedDeps_React_default.a.Component{constructor(props){super(props);visualization_defineProperty(this,"showNoResultsMessage",Object(memoize["a"])(shouldShowNoResultsMessage));props.vis.setUiState(props.uiState)}render(){const _this$props=this.props,vis=_this$props.vis,visData=_this$props.visData,visParams=_this$props.visParams,onInit=_this$props.onInit,uiState=_this$props.uiState,listenOnChange=_this$props.listenOnChange;const noResults=this.showNoResultsMessage(vis,visData);return external_kbnSharedDeps_React_default.a.createElement("div",{className:"visualization"},noResults?external_kbnSharedDeps_React_default.a.createElement(visualization_noresults_VisualizationNoResults,{onInit:onInit}):external_kbnSharedDeps_React_default.a.createElement(visualization_chart_VisualizationChart,{vis:vis,visData:visData,visParams:visParams,onInit:onInit,uiState:uiState,listenOnChange:listenOnChange}))}shouldComponentUpdate(nextProps){if(nextProps.uiState!==this.props.uiState){throw new Error("Changing uiState on <Visualization/> is not supported!")}return true}}var classnames=__webpack_require__(39);var classnames_default=__webpack_require__.n(classnames);const VisualizationContainer=({"data-test-subj":dataTestSubj="",className:className,children:children,handlers:handlers,showNoResult:showNoResult=false})=>{const classes=classnames_default()("visualization",className);const fallBack=external_kbnSharedDeps_React_default.a.createElement("div",{className:"visChart__spinner"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingChart"],{mono:true,size:"l"}));return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":dataTestSubj,className:classes},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Suspense"],{fallback:fallBack},showNoResult?external_kbnSharedDeps_React_default.a.createElement(visualization_noresults_VisualizationNoResults,{onInit:()=>handlers.done()}):children))};function visualization_renderer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function visualization_renderer_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){visualization_renderer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){visualization_renderer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const visualization_renderer_visualization=()=>({name:"visualization",displayName:"visualization",reuseDomNode:true,render:function(){var _render2=visualization_renderer_asyncToGenerator(regeneratorRuntime.mark((function _callee(domNode,config,handlers){var visData,visConfig,params,visType,vis,uiState,listenOnChange;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:visData=config.visData,visConfig=config.visConfig,params=config.params;visType=config.visType||visConfig.type;vis=new vis_ExprVis({title:config.title,type:visType,params:visConfig});vis.eventsSubject={next:handlers.event};uiState=handlers.uiState||vis.getUiState();handlers.onDestroy(()=>{Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(domNode)});listenOnChange=params?params.listenOnChange:false;Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(visualization_Visualization,{vis:vis,visData:visData,visParams:vis.params,uiState:uiState,listenOnChange:listenOnChange,onInit:handlers.done}),domNode);case 8:case"end":return _context.stop()}}),_callee)})));function render(_x,_x2,_x3){return _render2.apply(this,arguments)}return render}()});const range=()=>({name:"range",help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.range.help",{defaultMessage:"Generates range object"}),type:"range",args:{from:{types:["number"],help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.range.from.help",{defaultMessage:"Start of range"}),required:true},to:{types:["number"],help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.range.to.help",{defaultMessage:"End of range"}),required:true}},fn:(context,args)=>({type:"range",from:args.from,to:args.to})});const visDimension=()=>({name:"visdimension",help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.help",{defaultMessage:"Generates visConfig dimension object"}),type:"vis_dimension",inputTypes:["datatable"],args:{accessor:{types:["string","number"],aliases:["_"],help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.accessor.help",{defaultMessage:"Column in your dataset to use (either column index or column name)"})},format:{types:["string"],default:"string",help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.format.help",{defaultMessage:"Format"})},formatParams:{types:["string"],default:'"{}"',help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.formatParams.help",{defaultMessage:"Format params"})}},fn:(input,args)=>{const accessor=typeof args.accessor==="number"?args.accessor:input.columns.find(c=>c.id===args.accessor);if(accessor===undefined){throw new Error(external_kbnSharedDeps_KbnI18n_["i18n"].translate("visualizations.function.visDimension.error.accessor",{defaultMessage:"Column name provided is invalid"}))}return{type:"vis_dimension",accessor:accessor,format:{id:args.format,params:JSON.parse(args.formatParams)}}}});function find_list_items_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function find_list_items_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){find_list_items_ownKeys(Object(source),true).forEach((function(key){find_list_items_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{find_list_items_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function find_list_items_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function find_list_items_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function find_list_items_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){find_list_items_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){find_list_items_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function findListItems(_x){return _findListItems.apply(this,arguments)}function _findListItems(){_findListItems=find_list_items_asyncToGenerator(regeneratorRuntime.mark((function _callee({visTypes:visTypes,search:search,size:size,savedObjectsClient:savedObjectsClient,mapSavedObjectApiHits:mapSavedObjectApiHits,references:references}){var extensions,extensionByType,searchOption,searchOptions,_yield$savedObjectsCl,total,savedObjects;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:extensions=visTypes.map(v=>{var _v$appExtensions;return(_v$appExtensions=v.appExtensions)===null||_v$appExtensions===void 0?void 0:_v$appExtensions.visualizations}).filter(Boolean);extensionByType=extensions.reduce((acc,m)=>m.docTypes.reduce((_acc,type)=>{acc[type]=m;return acc},acc),{});searchOption=(field,...defaults)=>external_kbnSharedDeps_Lodash_default()(extensions).map(field).concat(defaults).compact().flatten().uniq().value();searchOptions={type:searchOption("docTypes","visualization"),searchFields:searchOption("searchFields","title^3","description"),search:search?"".concat(search,"*"):undefined,perPage:size,page:1,defaultSearchOperator:"AND",hasReference:references};_context.next=6;return savedObjectsClient.find(searchOptions);case 6:_yield$savedObjectsCl=_context.sent;total=_yield$savedObjectsCl.total;savedObjects=_yield$savedObjectsCl.savedObjects;return _context.abrupt("return",{total:total,hits:savedObjects.map(savedObject=>{const config=extensionByType[savedObject.type];if(config){return find_list_items_objectSpread(find_list_items_objectSpread({},config.toListItem(savedObject)),{},{references:savedObject.references})}else{return mapSavedObjectApiHits(savedObject)}})});case 10:case"end":return _context.stop()}}),_callee)})));return _findListItems.apply(this,arguments)}function saved_visualizations_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createSavedVisLoader(services){const savedObjectsClient=services.savedObjectsClient,visualizationTypes=services.visualizationTypes;class SavedObjectLoaderVisualize extends savedObjects_public_["SavedObjectLoader"]{constructor(...args){super(...args);saved_visualizations_defineProperty(this,"mapHitSource",(source,id,references=[])=>{const visTypes=visualizationTypes;source.id=id;source.references=references;source.url=this.urlFor(id);let typeName=source.typeName;if(source.visState){try{typeName=JSON.parse(String(source.visState)).type}catch(e){}}if(!typeName||!visTypes.get(typeName)){source.error="Unknown visualization type";return source}source.type=visTypes.get(typeName);source.savedObjectType="visualization";source.icon=source.type.icon;source.image=source.type.image;source.typeTitle=source.type.title;source.editUrl="/edit/".concat(id);return source})}urlFor(id){return"#/edit/".concat(encodeURIComponent(id))}findListItems(search="",sizeOrOptions=100){const _ref=typeof sizeOrOptions==="number"?{size:sizeOrOptions}:sizeOrOptions,_ref$size=_ref.size,size=_ref$size===void 0?100:_ref$size,_ref$references=_ref.references,references=_ref$references===void 0?undefined:_ref$references;return findListItems({search:search,size:size,references:references,mapSavedObjectApiHits:this.mapSavedObjectApiHits.bind(this),savedObjectsClient:savedObjectsClient,visTypes:visualizationTypes.getAliases()})}}const SavedVis=createSavedVisClass(services);return new SavedObjectLoaderVisualize(SavedVis,savedObjectsClient)}function plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function plugin_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function plugin_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function plugin_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){plugin_ownKeys(Object(source),true).forEach((function(key){plugin_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{plugin_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class plugin_VisualizationsPlugin{constructor(initializerContext){plugin_defineProperty(this,"types",new vis_types["a"]);plugin_defineProperty(this,"getStartServicesOrDie",void 0)}setup(core,{expressions:expressions,embeddable:embeddable,usageCollection:usageCollection,data:data}){const start=this.getStartServicesOrDie=Object(kibanaUtils_public_["createStartServicesGetter"])(core.getStartServices);Object(public_services["L"])(core.uiSettings);Object(public_services["N"])(usageCollection);expressions.registerFunction(visualization);expressions.registerRenderer(visualization_renderer_visualization);expressions.registerFunction(range);expressions.registerFunction(visDimension);const embeddableFactory=new visualize_embeddable_factory_VisualizeEmbeddableFactory({start:start});embeddable.registerEmbeddableFactory(VISUALIZE_EMBEDDABLE_TYPE,embeddableFactory);return plugin_objectSpread({},this.types.setup())}start(core,{data:data,expressions:expressions,uiActions:uiActions,embeddable:embeddable,dashboard:dashboard,savedObjects:savedObjects}){const types=this.types.start();Object(public_services["C"])(core.i18n);Object(public_services["K"])(types);Object(public_services["y"])(embeddable);Object(public_services["u"])(core.application);Object(public_services["v"])(core.application.capabilities);Object(public_services["B"])(core.http);Object(public_services["F"])(core.savedObjects);Object(public_services["x"])(core.docLinks);Object(public_services["D"])(data.indexPatterns);Object(public_services["I"])(data.search);Object(public_services["A"])(data.query.filterManager);Object(public_services["z"])(expressions);Object(public_services["M"])(uiActions);Object(public_services["J"])(data.query.timefilter.timefilter);Object(public_services["t"])(data.search.aggs);Object(public_services["E"])(core.overlays);Object(public_services["w"])(core.chrome);const savedVisualizationsLoader=createSavedVisLoader({savedObjectsClient:core.savedObjects.client,indexPatterns:data.indexPatterns,savedObjects:savedObjects,visualizationTypes:types});Object(public_services["H"])(savedVisualizationsLoader);const savedSearchLoader=Object(discover_public_["createSavedSearchesLoader"])({savedObjectsClient:core.savedObjects.client,savedObjects:savedObjects});Object(public_services["G"])(savedSearchLoader);return plugin_objectSpread(plugin_objectSpread({},types),{},{showNewVisModal:showNewVisModal,createVis:function(){var _createVis=plugin_asyncToGenerator(regeneratorRuntime.mark((function _callee(visType,visState){var vis;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:vis=new vis_Vis(visType);_context.next=3;return vis.setState(visState);case 3:return _context.abrupt("return",vis);case 4:case"end":return _context.stop()}}),_callee)})));function createVis(_x,_x2){return _createVis.apply(this,arguments)}return createVis}(),convertToSerializedVis:convertToSerializedVis,convertFromSerializedVis:convertFromSerializedVis,savedVisualizationsLoader:savedVisualizationsLoader,__LEGACY:{createVisEmbeddableFromObject:createVisEmbeddableFromObject({start:this.getStartServicesOrDie})}})}stop(){this.types.stop()}}var types_service=__webpack_require__(20);var vis_type_alias_registry=__webpack_require__(10);function public_plugin(initializerContext){return new plugin_VisualizationsPlugin(initializerContext)}},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone}]);