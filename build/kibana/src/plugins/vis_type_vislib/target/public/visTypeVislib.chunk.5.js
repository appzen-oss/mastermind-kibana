(window["visTypeVislib_bundle_jsonpfunction"]=window["visTypeVislib_bundle_jsonpfunction"]||[]).push([[5],{171:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return MetricsAxisOptions}));var external_kbnSharedDeps_React_=__webpack_require__(3);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_Lodash_=__webpack_require__(10);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(12);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(21);var collections=__webpack_require__(1);var public_=__webpack_require__(4);function LineOptions({chart:chart,vis:vis,setChart:setChart}){const setLineWidth=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{setChart(paramName,value===""?undefined:value)},[setChart]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.series.showLineLabel",{defaultMessage:"Show line"}),paramName:"drawLinesBetweenPoints",value:chart.drawLinesBetweenPoints,setValue:setChart}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{disabled:!chart.drawLinesBetweenPoints,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.series.lineModeLabel",{defaultMessage:"Line mode"}),options:vis.type.editorConfig.collections.interpolationModes,paramName:"interpolate",value:chart.interpolate,setValue:setChart})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["NumberInputOption"],{disabled:!chart.drawLinesBetweenPoints,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.series.lineWidthLabel",{defaultMessage:"Line width"}),paramName:"lineWidth",step:.5,min:0,value:chart.lineWidth,setValue:setLineWidth}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.series.showDotsLabel",{defaultMessage:"Show dots"}),paramName:"showCircles",value:chart.showCircles,setValue:setChart}))}function ChartOptions({chart:chart,index:index,valueAxes:valueAxes,vis:vis,changeValueAxis:changeValueAxis,setParamByIndex:setParamByIndex}){const setChart=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{setParamByIndex("seriesParams",index,paramName,value)},[setParamByIndex,index]);const setValueAxis=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{changeValueAxis(index,paramName,value)},[changeValueAxis,index]);const valueAxesOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[...valueAxes.map(({id:id,name:name})=>({text:name,value:id})),{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.series.newAxisLabel",{defaultMessage:"New axisâ€¦"}),value:"new"}],[valueAxes]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{id:"seriesValueAxis".concat(index),label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.series.valueAxisLabel",{defaultMessage:"Value axis"}),options:valueAxesOptions,paramName:"valueAxis",value:chart.valueAxis,setValue:setValueAxis}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{id:"seriesType".concat(index),label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.series.chartTypeLabel",{defaultMessage:"Chart type"}),options:vis.type.editorConfig.collections.chartTypes,paramName:"type",value:chart.type,setValue:setChart})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{id:"seriesMode".concat(index),label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.series.modeLabel",{defaultMessage:"Mode"}),options:vis.type.editorConfig.collections.chartModes,paramName:"mode",value:chart.mode,setValue:setChart}))),chart.type===collections["e"].AREA&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.series.lineModeLabel",{defaultMessage:"Line mode"}),options:vis.type.editorConfig.collections.interpolationModes,paramName:"interpolate",value:chart.interpolate,setValue:setChart})),chart.type===collections["e"].LINE&&external_kbnSharedDeps_React_default.a.createElement(LineOptions,{chart:chart,vis:vis,setChart:setChart}))}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function SeriesPanel(_ref){let seriesParams=_ref.seriesParams,chartProps=_objectWithoutProperties(_ref,["seriesParams"]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeVislib.controls.pointSeries.series.metricsTitle",defaultMessage:"Metrics"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),seriesParams.map((chart,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"visEditorSeriesAccordion".concat(chart.data.id),key:index,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:index===0,buttonContent:chart.data.label,buttonContentClassName:"visEditorSidebar__aggGroupAccordionButtonContent eui-textTruncate","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.seriesAccordionAriaLabel",{defaultMessage:"Toggle {agg} options",values:{agg:chart.data.label}})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(ChartOptions,_extends({index:index,chart:chart},chartProps))))))}var common=__webpack_require__(14);function LabelOptions({axisLabels:axisLabels,axisFilterCheckboxName:axisFilterCheckboxName,setAxisLabel:setAxisLabel}){const setAxisLabelRotate=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{setAxisLabel(paramName,Number(value))},[setAxisLabel]);const rotateOptions=Object(external_kbnSharedDeps_React_["useMemo"])(collections["o"],[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeVislib.controls.pointSeries.categoryAxis.labelsTitle",defaultMessage:"Labels"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.categoryAxis.showLabelsLabel",{defaultMessage:"Show labels"}),paramName:"show",value:axisLabels.show,setValue:setAxisLabel}),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{"data-test-subj":axisFilterCheckboxName,disabled:!axisLabels.show,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.categoryAxis.filterLabelsLabel",{defaultMessage:"Filter labels"}),paramName:"filter",value:axisLabels.filter,setValue:setAxisLabel}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{disabled:!axisLabels.show,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.categoryAxis.alignLabel",{defaultMessage:"Align"}),options:rotateOptions,paramName:"rotate",value:axisLabels.rotate,setValue:setAxisLabelRotate})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(common["a"],{disabled:!axisLabels.show,value:axisLabels.truncate,setValue:setAxisLabel}))))}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function CategoryAxisPanel({axis:axis,onPositionChanged:onPositionChanged,vis:vis,setCategoryAxis:setCategoryAxis}){const setAxis=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const updatedAxis=_objectSpread(_objectSpread({},axis),{},{[paramName]:value});setCategoryAxis(updatedAxis)},[setCategoryAxis,axis]);const setPosition=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{setAxis(paramName,value);onPositionChanged(value)},[setAxis,onPositionChanged]);const setAxisLabel=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const labels=_objectSpread(_objectSpread({},axis.labels),{},{[paramName]:value});setAxis("labels",labels)},[axis.labels,setAxis]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeVislib.controls.pointSeries.categoryAxis.xAxisTitle",defaultMessage:"X-axis"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.categoryAxis.positionLabel",{defaultMessage:"Position"}),options:vis.type.editorConfig.collections.positions,paramName:"position",value:axis.position,setValue:setPosition,"data-test-subj":"categoryAxisPosition"}),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.categoryAxis.showLabel",{defaultMessage:"Show axis lines and labels"}),paramName:"show",value:axis.show,setValue:setAxis}),axis.show&&external_kbnSharedDeps_React_default.a.createElement(LabelOptions,{axisLabels:axis.labels,axisFilterCheckboxName:"xAxisFilterLabelsCheckbox".concat(axis.id),setAxisLabel:setAxisLabel}))}const rangeError=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.minErrorMessage",{defaultMessage:"Min should be less than Max."});const minError=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.minNeededScaleText",{defaultMessage:"Min must exceed 0 when a log scale is selected."});function areExtentsValid(min=null,max=null){if(min===null||max===null){return true}return max>min}function isNullOrUndefined(value){return value===null||value===undefined}function YExtents({scale:scale,setScale:setScale,setMultipleValidity:setMultipleValidity}){const min=scale.min,max=scale.max,type=scale.type;const errors=[];if(!areExtentsValid(min,max)){errors.push(rangeError)}if(type===collections["i"].LOG&&(isNullOrUndefined(min)||min<=0)){errors.push(minError)}const isValid=!errors.length;const setExtents=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{setScale(paramName,value===""?null:value)},[setScale]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setMultipleValidity("yExtents",isValid);return()=>setMultipleValidity("yExtents",true)},[isValid,setMultipleValidity]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{error:errors,isInvalid:!!errors.length,fullWidth:true,display:"rowCompressed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["NumberInputOption"],{"data-test-subj":"yAxisYExtentsMin",isInvalid:!!errors.length,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.minLabel",{defaultMessage:"Min"}),step:.1,paramName:"min",value:isNullOrUndefined(min)?"":min,setValue:setExtents})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(public_["NumberInputOption"],{"data-test-subj":"yAxisYExtentsMax",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.maxLabel",{defaultMessage:"Max"}),step:.1,paramName:"max",value:isNullOrUndefined(max)?"":max,setValue:setExtents})))))}function custom_extents_options_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function custom_extents_options_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){custom_extents_options_ownKeys(Object(source),true).forEach((function(key){custom_extents_options_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{custom_extents_options_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function custom_extents_options_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function CustomExtentsOptions({axisScale:axisScale,setMultipleValidity:setMultipleValidity,setValueAxis:setValueAxis,setValueAxisScale:setValueAxisScale}){const invalidBoundsMarginMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.scaleToDataBounds.minNeededBoundsMargin",{defaultMessage:"Bounds margin must be greater than or equal to 0."});const isBoundsMarginValid=!axisScale.defaultYExtents||!axisScale.boundsMargin||axisScale.boundsMargin>=0;const setBoundsMargin=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>setValueAxisScale(paramName,value===""?undefined:value),[setValueAxisScale]);const onDefaultYExtentsChange=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const scale=custom_extents_options_objectSpread(custom_extents_options_objectSpread({},axisScale),{},{[paramName]:value});if(!scale.defaultYExtents){delete scale.boundsMargin}setValueAxis("scale",scale)},[axisScale,setValueAxis]);const onSetYExtentsChange=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const scale=custom_extents_options_objectSpread(custom_extents_options_objectSpread({},axisScale),{},{[paramName]:value});if(!scale.setYExtents){delete scale.min;delete scale.max}setValueAxis("scale",scale)},[axisScale,setValueAxis]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setMultipleValidity("boundsMargin",isBoundsMarginValid);return()=>setMultipleValidity("boundsMargin",true)},[isBoundsMarginValid,setMultipleValidity]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.scaleToDataBoundsLabel",{defaultMessage:"Scale to data bounds"}),paramName:"defaultYExtents",value:axisScale.defaultYExtents,setValue:onDefaultYExtentsChange}),axisScale.defaultYExtents&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(public_["NumberInputOption"],{error:!isBoundsMarginValid&&invalidBoundsMarginMessage,isInvalid:!isBoundsMarginValid,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.scaleToDataBounds.boundsMargin",{defaultMessage:"Bounds margin"}),step:.1,min:0,paramName:"boundsMargin",value:axisScale.boundsMargin,setValue:setBoundsMargin})),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{"data-test-subj":"yAxisSetYExtents",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.setAxisExtentsLabel",{defaultMessage:"Set axis extents"}),paramName:"setYExtents",value:axisScale.setYExtents,setValue:onSetYExtentsChange}),axisScale.setYExtents&&external_kbnSharedDeps_React_default.a.createElement(YExtents,{scale:axisScale,setScale:setValueAxisScale,setMultipleValidity:setMultipleValidity}))}function utils_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function utils_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){utils_ownKeys(Object(source),true).forEach((function(key){utils_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{utils_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function utils_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const makeSerie=(id,label,defaultValueAxis,lastSerie)=>{const data={id:id,label:label};const defaultSerie={show:true,mode:collections["d"].NORMAL,type:collections["e"].LINE,drawLinesBetweenPoints:true,showCircles:true,interpolate:collections["g"].LINEAR,lineWidth:2,valueAxis:defaultValueAxis,data:data};return lastSerie?utils_objectSpread(utils_objectSpread({},lastSerie),{},{data:data}):defaultSerie};const isAxisHorizontal=position=>[collections["h"].TOP,collections["h"].BOTTOM].includes(position);const RADIX=10;function countNextAxisNumber(axisName,axisProp="id"){return(value,axis)=>{const nameLength=axisName.length;if(axis[axisProp].substr(0,nameLength)===axisName){const num=parseInt(axis[axisProp].substr(nameLength),RADIX);if(num>=value){value=num+1}}return value}}const AXIS_PREFIX="Axis-";const getUpdatedAxisName=(axisPosition,valueAxes)=>{const axisName=Object(external_kbnSharedDeps_Lodash_["upperFirst"])(axisPosition)+AXIS_PREFIX;const nextAxisNameNumber=valueAxes.reduce(countNextAxisNumber(axisName,"name"),1);return"".concat(axisName).concat(nextAxisNameNumber)};function mapPositionOpposite(position){switch(position){case collections["h"].BOTTOM:return collections["h"].TOP;case collections["h"].TOP:return collections["h"].BOTTOM;case collections["h"].LEFT:return collections["h"].RIGHT;case collections["h"].RIGHT:return collections["h"].LEFT;default:throw new Error("Invalid legend position.")}}function mapPosition(position){switch(position){case collections["h"].BOTTOM:return collections["h"].LEFT;case collections["h"].TOP:return collections["h"].RIGHT;case collections["h"].LEFT:return collections["h"].BOTTOM;case collections["h"].RIGHT:return collections["h"].TOP}}function value_axis_options_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function value_axis_options_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){value_axis_options_ownKeys(Object(source),true).forEach((function(key){value_axis_options_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{value_axis_options_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function value_axis_options_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ValueAxisOptions({axis:axis,index:index,isCategoryAxisHorizontal:isCategoryAxisHorizontal,valueAxis:valueAxis,vis:vis,onValueAxisPositionChanged:onValueAxisPositionChanged,setParamByIndex:setParamByIndex,setMultipleValidity:setMultipleValidity}){const setValueAxis=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>setParamByIndex("valueAxes",index,paramName,value),[setParamByIndex,index]);const setValueAxisTitle=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const title=value_axis_options_objectSpread(value_axis_options_objectSpread({},valueAxis.title),{},{[paramName]:value});setParamByIndex("valueAxes",index,"title",title)},[valueAxis.title,setParamByIndex,index]);const setValueAxisScale=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const scale=value_axis_options_objectSpread(value_axis_options_objectSpread({},valueAxis.scale),{},{[paramName]:value});setParamByIndex("valueAxes",index,"scale",scale)},[valueAxis.scale,setParamByIndex,index]);const setAxisLabel=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{const labels=value_axis_options_objectSpread(value_axis_options_objectSpread({},valueAxis.labels),{},{[paramName]:value});setParamByIndex("valueAxes",index,"labels",labels)},[valueAxis.labels,setParamByIndex,index]);const onPositionChanged=Object(external_kbnSharedDeps_React_["useCallback"])((paramName,value)=>{onValueAxisPositionChanged(index,value)},[index,onValueAxisPositionChanged]);const isPositionDisabled=Object(external_kbnSharedDeps_React_["useCallback"])(position=>{if(isCategoryAxisHorizontal){return isAxisHorizontal(position)}return[collections["h"].LEFT,collections["h"].RIGHT].includes(position)},[isCategoryAxisHorizontal]);const positions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>vis.type.editorConfig.collections.positions.map(position=>value_axis_options_objectSpread(value_axis_options_objectSpread({},position),{},{disabled:isPositionDisabled(position.value)})),[vis.type.editorConfig.collections.positions,isPositionDisabled]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.positionLabel",{defaultMessage:"Position"}),options:positions,paramName:"position",value:axis.position,setValue:onPositionChanged}),external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{id:"valueAxisMode".concat(index),label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.modeLabel",{defaultMessage:"Mode"}),options:vis.type.editorConfig.collections.axisModes,paramName:"mode",value:axis.scale.mode,setValue:setValueAxisScale}),external_kbnSharedDeps_React_default.a.createElement(public_["SelectOption"],{id:"scaleSelectYAxis-".concat(axis.id),label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.scaleTypeLabel",{defaultMessage:"Scale type"}),options:vis.type.editorConfig.collections.scaleTypes,paramName:"type",value:axis.scale.type,setValue:setValueAxisScale}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),external_kbnSharedDeps_React_default.a.createElement(public_["SwitchOption"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.showLabel",{defaultMessage:"Show axis lines and labels"}),"data-test-subj":"valueAxisShow-".concat(axis.id),paramName:"show",value:axis.show,setValue:setValueAxis}),axis.show?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(public_["TextInputOption"],{"data-test-subj":"valueAxisTitle".concat(index),label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.titleLabel",{defaultMessage:"Title"}),paramName:"text",value:axis.title.text,setValue:setValueAxisTitle}),external_kbnSharedDeps_React_default.a.createElement(LabelOptions,{axisLabels:axis.labels,axisFilterCheckboxName:"yAxisFilterLabelsCheckbox-".concat(axis.id),setAxisLabel:setAxisLabel})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"yAxisOptionsAccordion".concat(axis.id),className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:false,buttonContentClassName:"euiText euiText--small",buttonContent:external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.customExtentsLabel",{defaultMessage:"Custom extents"}),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.toggleCustomExtendsAriaLabel",{defaultMessage:"Toggle custom extents"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(CustomExtentsOptions,{axisScale:axis.scale,setMultipleValidity:setMultipleValidity,setValueAxisScale:setValueAxisScale,setValueAxis:setValueAxis}))))}function ValueAxesPanel(props){const addValueAxis=props.addValueAxis,removeValueAxis=props.removeValueAxis,seriesParams=props.seriesParams,valueAxes=props.valueAxes;const getSeries=Object(external_kbnSharedDeps_React_["useCallback"])(axis=>{const isFirst=valueAxes[0].id===axis.id;const series=seriesParams.filter(serie=>serie.valueAxis===axis.id||isFirst&&!serie.valueAxis);return series.map(serie=>serie.data.label).join(", ")},[seriesParams,valueAxes]);const removeButtonTooltip=Object(external_kbnSharedDeps_React_["useMemo"])(()=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.removeButtonTooltip",{defaultMessage:"Remove Y-axis"}),[]);const renderRemoveButton=Object(external_kbnSharedDeps_React_["useCallback"])(axis=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:removeButtonTooltip},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"danger",iconType:"cross",onClick:()=>removeValueAxis(axis),"aria-label":removeButtonTooltip,"data-test-subj":"removeValueAxisBtn"})),[removeValueAxis,removeButtonTooltip]);const addButtonTooltip=Object(external_kbnSharedDeps_React_["useMemo"])(()=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.addButtonTooltip",{defaultMessage:"Add Y-axis"}),[]);const getButtonContent=Object(external_kbnSharedDeps_React_["useCallback"])(axis=>{const description=getSeries(axis);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,axis.name," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:description},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,description)))},[getSeries]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none",justifyContent:"spaceBetween",alignItems:"baseline"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"visTypeVislib.controls.pointSeries.valueAxes.yAxisTitle",defaultMessage:"Y-axes"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:addButtonTooltip},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"plusInCircleFilled",onClick:addValueAxis,"aria-label":addButtonTooltip,"data-test-subj":"visualizeAddYAxisButton"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),valueAxes.map((axis,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"yAxisAccordion".concat(axis.id),key:axis.id,"data-test-subj":"toggleYAxisOptions-".concat(axis.id),className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:false,buttonContent:getButtonContent(axis),buttonClassName:"eui-textTruncate",buttonContentClassName:"visEditorSidebar__aggGroupAccordionButtonContent eui-textTruncate","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("visTypeVislib.controls.pointSeries.valueAxes.toggleOptionsAriaLabel",{defaultMessage:"Toggle {axisName} options",values:{axisName:axis.name}}),extraAction:valueAxes.length===1?undefined:renderRemoveButton(axis)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(ValueAxisOptions,{axis:axis,index:index,valueAxis:valueAxes[index],isCategoryAxisHorizontal:props.isCategoryAxisHorizontal,onValueAxisPositionChanged:props.onValueAxisPositionChanged,setParamByIndex:props.setParamByIndex,setMultipleValidity:props.setMultipleValidity,vis:props.vis})))))}function metrics_axes_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function metrics_axes_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){metrics_axes_ownKeys(Object(source),true).forEach((function(key){metrics_axes_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{metrics_axes_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function metrics_axes_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const VALUE_AXIS_PREFIX="ValueAxis-";function MetricsAxisOptions(props){const stateParams=props.stateParams,setValue=props.setValue,aggs=props.aggs,vis=props.vis,isTabSelected=props.isTabSelected;const _useState=Object(external_kbnSharedDeps_React_["useState"])(true),_useState2=_slicedToArray(_useState,2),isCategoryAxisHorizontal=_useState2[0],setIsCategoryAxisHorizontal=_useState2[1];const setParamByIndex=Object(external_kbnSharedDeps_React_["useCallback"])((axesName,index,paramName,value)=>{const items=stateParams[axesName];const array=[...items];array[index]=metrics_axes_objectSpread(metrics_axes_objectSpread({},array[index]),{},{[paramName]:value});setValue(axesName,array)},[stateParams,setValue]);const setCategoryAxis=Object(external_kbnSharedDeps_React_["useCallback"])(value=>{const categoryAxes=[...stateParams.categoryAxes];categoryAxes[0]=value;setValue("categoryAxes",categoryAxes)},[setValue,stateParams.categoryAxes]);const _useState3=Object(external_kbnSharedDeps_React_["useState"])({}),_useState4=_slicedToArray(_useState3,2),lastCustomLabels=_useState4[0],setLastCustomLabels=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])({}),_useState6=_slicedToArray(_useState5,2),lastSeriesAgg=_useState6[0],setLastSeriesAgg=_useState6[1];const updateAxisTitle=Object(external_kbnSharedDeps_React_["useCallback"])(seriesParams=>{const series=seriesParams||stateParams.seriesParams;let isAxesChanged=false;let lastValuesChanged=false;const lastLabels=metrics_axes_objectSpread({},lastCustomLabels);const lastMatchingSeriesAgg=metrics_axes_objectSpread({},lastSeriesAgg);const axes=stateParams.valueAxes.map((axis,axisNumber)=>{let newCustomLabel="";let updatedAxis;const matchingSeries=[];series.forEach((serie,seriesIndex)=>{if(axisNumber===0&&!serie.valueAxis||serie.valueAxis===axis.id){const aggByIndex=aggs.bySchemaName("metric")[seriesIndex];matchingSeries.push(aggByIndex)}});if(matchingSeries.length===1){newCustomLabel=matchingSeries[0].makeLabel()}if(lastCustomLabels[axis.id]!==newCustomLabel&&newCustomLabel!==""){const lastSeriesAggType=Object(external_kbnSharedDeps_Lodash_["get"])(lastSeriesAgg,"".concat(matchingSeries[0].id,".type"));const lastSeriesAggField=Object(external_kbnSharedDeps_Lodash_["get"])(lastSeriesAgg,"".concat(matchingSeries[0].id,".field"));const matchingSeriesAggType=Object(external_kbnSharedDeps_Lodash_["get"])(matchingSeries,"[0]type.name","");const matchingSeriesAggField=Object(external_kbnSharedDeps_Lodash_["get"])(matchingSeries,"[0]params.field.name","");const aggTypeIsChanged=lastSeriesAggType!==matchingSeriesAggType;const aggFieldIsChanged=lastSeriesAggField!==matchingSeriesAggField;lastMatchingSeriesAgg[matchingSeries[0].id]={type:matchingSeriesAggType,field:matchingSeriesAggField};lastLabels[axis.id]=newCustomLabel;lastValuesChanged=true;if(Object.keys(lastCustomLabels).length!==0&&(aggTypeIsChanged||aggFieldIsChanged||axis.title.text===""||lastCustomLabels[axis.id]===axis.title.text)&&newCustomLabel!==axis.title.text){updatedAxis=metrics_axes_objectSpread(metrics_axes_objectSpread({},axis),{},{title:metrics_axes_objectSpread(metrics_axes_objectSpread({},axis.title),{},{text:newCustomLabel})});isAxesChanged=true}}return updatedAxis||axis});if(isAxesChanged){setValue("valueAxes",axes)}if(lastValuesChanged){setLastSeriesAgg(lastMatchingSeriesAgg);setLastCustomLabels(lastLabels)}},[aggs,lastCustomLabels,lastSeriesAgg,setValue,stateParams.seriesParams,stateParams.valueAxes]);const onValueAxisPositionChanged=Object(external_kbnSharedDeps_React_["useCallback"])((index,value)=>{const valueAxes=[...stateParams.valueAxes];const name=getUpdatedAxisName(value,valueAxes);valueAxes[index]=metrics_axes_objectSpread(metrics_axes_objectSpread({},valueAxes[index]),{},{name:name,position:value});setValue("valueAxes",valueAxes)},[stateParams.valueAxes,setValue]);const onCategoryAxisPositionChanged=Object(external_kbnSharedDeps_React_["useCallback"])(chartPosition=>{const isChartHorizontal=isAxisHorizontal(chartPosition);setIsCategoryAxisHorizontal(isAxisHorizontal(chartPosition));stateParams.valueAxes.forEach((axis,index)=>{if(isAxisHorizontal(axis.position)===isChartHorizontal){const position=mapPosition(axis.position);onValueAxisPositionChanged(index,position)}})},[stateParams.valueAxes,onValueAxisPositionChanged]);const addValueAxis=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{const nextAxisIdNumber=stateParams.valueAxes.reduce(countNextAxisNumber(VALUE_AXIS_PREFIX),1);const newAxis=Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(stateParams.valueAxes[0]);newAxis.id=VALUE_AXIS_PREFIX+nextAxisIdNumber;newAxis.position=mapPositionOpposite(newAxis.position);newAxis.name=getUpdatedAxisName(newAxis.position,stateParams.valueAxes);setValue("valueAxes",[...stateParams.valueAxes,newAxis]);return newAxis},[stateParams.valueAxes,setValue]);const removeValueAxis=Object(external_kbnSharedDeps_React_["useCallback"])(axis=>{const newValueAxes=stateParams.valueAxes.filter(valAxis=>valAxis.id!==axis.id);setValue("valueAxes",newValueAxes);let isSeriesUpdated=false;const series=stateParams.seriesParams.map(ser=>{if(axis.id===ser.valueAxis){isSeriesUpdated=true;return metrics_axes_objectSpread(metrics_axes_objectSpread({},ser),{},{valueAxis:newValueAxes[0].id})}return ser});if(isSeriesUpdated){setValue("seriesParams",series)}if(stateParams.grid.valueAxis===axis.id){setValue("grid",metrics_axes_objectSpread(metrics_axes_objectSpread({},stateParams.grid),{},{valueAxis:undefined}))}},[stateParams.seriesParams,stateParams.valueAxes,setValue,stateParams.grid]);const changeValueAxis=Object(external_kbnSharedDeps_React_["useCallback"])((index,paramName,selectedValueAxis)=>{let newValueAxis=selectedValueAxis;if(selectedValueAxis==="new"){const axis=addValueAxis();newValueAxis=axis.id}setParamByIndex("seriesParams",index,paramName,newValueAxis);updateAxisTitle()},[addValueAxis,setParamByIndex,updateAxisTitle]);const schemaName=vis.type.schemas.metrics[0].name;const metrics=Object(external_kbnSharedDeps_React_["useMemo"])(()=>aggs.bySchemaName(schemaName),[schemaName,aggs]);const firstValueAxesId=stateParams.valueAxes[0].id;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const updatedSeries=metrics.map(agg=>{const params=stateParams.seriesParams.find(param=>param.data.id===agg.id);const label=agg.makeLabel();if(params){return metrics_axes_objectSpread(metrics_axes_objectSpread({},params),{},{data:metrics_axes_objectSpread(metrics_axes_objectSpread({},params.data),{},{label:label})})}else{const series=makeSerie(agg.id,label,firstValueAxesId,stateParams.seriesParams[stateParams.seriesParams.length-1]);return series}});setValue("seriesParams",updatedSeries);updateAxisTitle(updatedSeries)},[metrics,firstValueAxesId,setValue,stateParams.seriesParams,updateAxisTitle]);return isTabSelected?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(SeriesPanel,{changeValueAxis:changeValueAxis,setParamByIndex:setParamByIndex,seriesParams:stateParams.seriesParams,valueAxes:stateParams.valueAxes,vis:vis}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(ValueAxesPanel,{addValueAxis:addValueAxis,isCategoryAxisHorizontal:isCategoryAxisHorizontal,removeValueAxis:removeValueAxis,onValueAxisPositionChanged:onValueAxisPositionChanged,setParamByIndex:setParamByIndex,setMultipleValidity:props.setMultipleValidity,seriesParams:stateParams.seriesParams,valueAxes:stateParams.valueAxes,vis:vis}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(CategoryAxisPanel,{axis:stateParams.categoryAxes[0],onPositionChanged:onCategoryAxisPositionChanged,setCategoryAxis:setCategoryAxis,vis:vis})):null}}}]);