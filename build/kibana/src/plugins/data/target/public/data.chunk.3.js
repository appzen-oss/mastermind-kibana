(window["data_bundle_jsonpfunction"]=window["data_bundle_jsonpfunction"]||[]).push([[3,8],{222:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var external_kbnSharedDeps_Lodash_=__webpack_require__(2);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(67);var classnames=__webpack_require__(223);var classnames_default=__webpack_require__.n(classnames);var external_kbnSharedDeps_React_=__webpack_require__(3);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var ResizeObserver=__webpack_require__(229);var ResizeObserver_default=__webpack_require__.n(ResizeObserver);function wrapArray(subj){return Array.isArray(subj)?subj:[subj]}class UnreachableCaseError extends Error{constructor(val){super("Unreachable case: ".concat(val))}}function createUiStatsMetric({type:type,appName:appName,eventName:eventName,count:count=1}){return{type:type,appName:appName,eventName:eventName,count:count}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(36);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class application_usage_ApplicationUsage{constructor(){_defineProperty(this,"currentUsage",void 0)}start(){if(window)window.addEventListener("click",()=>this.currentUsage&&this.currentUsage.numberOfClicks++)}appChanged(appId){const currentUsage=this.currentUsage;if(appId){this.currentUsage={type:METRIC_TYPE.APPLICATION_USAGE,appId:appId,startTime:external_kbnSharedDeps_MomentTimezone_default()(),numberOfClicks:0}}else{this.currentUsage=void 0}return currentUsage}}var stats=__webpack_require__(225);function trackUsageAgent(appName){const userAgent=window&&window.navigator&&window.navigator.userAgent||"";return{type:METRIC_TYPE.USER_AGENT,appName:appName,userAgent:userAgent}}let METRIC_TYPE;(function(METRIC_TYPE){METRIC_TYPE["COUNT"]="count";METRIC_TYPE["LOADED"]="loaded";METRIC_TYPE["CLICK"]="click";METRIC_TYPE["USER_AGENT"]="user_agent";METRIC_TYPE["APPLICATION_USAGE"]="application_usage"})(METRIC_TYPE||(METRIC_TYPE={}));function storage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class ReportStorageManager{constructor(storageKey,storage){storage_defineProperty(this,"storageKey",void 0);storage_defineProperty(this,"storage",void 0);this.storageKey=storageKey;this.storage=storage}get(){if(!this.storage)return;return this.storage.get(this.storageKey)}store(report){if(!this.storage)return;this.storage.set(this.storageKey,report)}}function report_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const REPORT_VERSION=1;class report_ReportManager{constructor(report){report_defineProperty(this,"report",void 0);this.report=report||report_ReportManager.createReport()}static createReport(){return{reportVersion:REPORT_VERSION}}clearReport(){this.report=report_ReportManager.createReport()}isReportEmpty(){const _this$report=this.report,uiStatsMetrics=_this$report.uiStatsMetrics,userAgent=_this$report.userAgent,appUsage=_this$report.application_usage;const noUiStats=!uiStatsMetrics||Object.keys(uiStatsMetrics).length===0;const noUserAgent=!userAgent||Object.keys(userAgent).length===0;const noAppUsage=!appUsage||Object.keys(appUsage).length===0;return noUiStats&&noUserAgent&&noAppUsage}incrementStats(count,stats){const _ref=stats||{},_ref$min=_ref.min,min=_ref$min===void 0?0:_ref$min,_ref$max=_ref.max,max=_ref$max===void 0?0:_ref$max,_ref$sum=_ref.sum,sum=_ref$sum===void 0?0:_ref$sum;const newMin=Math.min(min,count);const newMax=Math.max(max,count);const newAvg=newMin+newMax/2;const newSum=sum+count;return{min:newMin,max:newMax,avg:newAvg,sum:newSum}}assignReports(newMetrics){wrapArray(newMetrics).forEach(newMetric=>this.assignReport(this.report,newMetric));return{report:this.report}}static createMetricKey(metric){switch(metric.type){case METRIC_TYPE.USER_AGENT:{const appName=metric.appName,type=metric.type;return"".concat(appName,"-").concat(type)}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{const appName=metric.appName,eventName=metric.eventName,type=metric.type;return"".concat(appName,"-").concat(type,"-").concat(eventName)}case METRIC_TYPE.APPLICATION_USAGE:return metric.appId;default:throw new UnreachableCaseError(metric)}}assignReport(report,metric){const key=report_ReportManager.createMetricKey(metric);switch(metric.type){case METRIC_TYPE.USER_AGENT:{const appName=metric.appName,type=metric.type,userAgent=metric.userAgent;if(userAgent){report.userAgent={[key]:{key:key,appName:appName,type:type,userAgent:metric.userAgent}}}return}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{const appName=metric.appName,type=metric.type,eventName=metric.eventName,count=metric.count;report.uiStatsMetrics=report.uiStatsMetrics||{};const existingStats=(report.uiStatsMetrics[key]||{}).stats;report.uiStatsMetrics[key]={key:key,appName:appName,eventName:eventName,type:type,stats:this.incrementStats(count,existingStats)};return}case METRIC_TYPE.APPLICATION_USAGE:const numberOfClicks=metric.numberOfClicks,startTime=metric.startTime;const minutesOnScreen=external_kbnSharedDeps_MomentTimezone_default()().diff(startTime,"minutes",true);report.application_usage=report.application_usage||{};const appExistingData=report.application_usage[key]||{minutesOnScreen:0,numberOfClicks:0};report.application_usage[key]={minutesOnScreen:appExistingData.minutesOnScreen+minutesOnScreen,numberOfClicks:appExistingData.numberOfClicks+numberOfClicks};break;default:throw new UnreachableCaseError(metric)}}}report_defineProperty(report_ReportManager,"REPORT_VERSION",REPORT_VERSION);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function reporter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class reporter_Reporter{constructor(config){var _this=this;reporter_defineProperty(this,"checkInterval",void 0);reporter_defineProperty(this,"interval",void 0);reporter_defineProperty(this,"lastAppId",void 0);reporter_defineProperty(this,"http",void 0);reporter_defineProperty(this,"reportManager",void 0);reporter_defineProperty(this,"storageManager",void 0);reporter_defineProperty(this,"applicationUsage",void 0);reporter_defineProperty(this,"debug",void 0);reporter_defineProperty(this,"retryCount",0);reporter_defineProperty(this,"maxRetries",3);reporter_defineProperty(this,"started",false);reporter_defineProperty(this,"start",()=>{if(!this.interval){this.interval=setTimeout(()=>{this.interval=undefined;this.sendReports()},this.checkInterval)}if(this.started){return}if(window&&document){window.addEventListener("beforeunload",()=>this.reportApplicationUsage());document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="visible"&&this.lastAppId){this.reportApplicationUsage(this.lastAppId)}else if(document.visibilityState==="hidden"){this.reportApplicationUsage();this.sendReports()}})}this.started=true;this.applicationUsage.start()});reporter_defineProperty(this,"reportUiStats",(appName,type,eventNames,count)=>{const metrics=wrapArray(eventNames).map(eventName=>{this.log("".concat(type," Metric -> (").concat(appName,":").concat(eventName,"):"));const report=createUiStatsMetric({type:type,appName:appName,eventName:eventName,count:count});this.log(report);return report});this.saveToReport(metrics)});reporter_defineProperty(this,"reportUserAgent",appName=>{this.log("Reporting user-agent.");const report=trackUsageAgent(appName);this.saveToReport([report])});reporter_defineProperty(this,"sendReports",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var versionMismatch;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.reportManager.isReportEmpty()){_context.next=13;break}_context.prev=1;_context.next=4;return _this.http(_this.reportManager.report);case 4:_this.flushReport();_context.next=13;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);_this.log("Error Sending Metrics Report ".concat(_context.t0));_this.retryCount=_this.retryCount+1;versionMismatch=_this.reportManager.report.reportVersion!==report_ReportManager.REPORT_VERSION;if(versionMismatch||_this.retryCount>_this.maxRetries){_this.flushReport()}case 13:_this.start();case 14:case"end":return _context.stop()}}),_callee,null,[[1,7]])}))));const http=config.http,storage=config.storage,debug=config.debug,_config$checkInterval=config.checkInterval,checkInterval=_config$checkInterval===void 0?9e4:_config$checkInterval,_config$storageKey=config.storageKey,storageKey=_config$storageKey===void 0?"analytics":_config$storageKey;this.http=http;this.checkInterval=checkInterval;this.applicationUsage=new application_usage_ApplicationUsage;this.storageManager=new ReportStorageManager(storageKey,storage);const storedReport=this.storageManager.get();this.reportManager=new report_ReportManager(storedReport);this.debug=!!debug}saveToReport(newMetrics){this.reportManager.assignReports(newMetrics);this.storageManager.store(this.reportManager.report)}flushReport(){this.retryCount=0;this.reportManager.clearReport();this.storageManager.store(this.reportManager.report)}log(message){if(this.debug){console.debug(message)}}reportApplicationUsage(appId){this.log("Reporting application changed to ".concat(appId));this.lastAppId=appId||this.lastAppId;const appChangedReport=this.applicationUsage.appChanged(appId);if(appChangedReport)this.saveToReport([appChangedReport])}}var public_=__webpack_require__(24);var query_bar_top_row=__webpack_require__(228);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(17);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function GenericComboBox(props){const options=props.options,selectedOptions=props.selectedOptions,getLabel=props.getLabel,onChange=props.onChange,otherProps=_objectWithoutProperties(props,["options","selectedOptions","getLabel","onChange"]);const labels=options.map(getLabel);const euiOptions=labels.map(label=>({label:label}));const selectedEuiOptions=selectedOptions.filter(option=>options.indexOf(option)!==-1).map(option=>euiOptions[options.indexOf(option)]);const onComboBoxChange=newOptions=>{const newValues=newOptions.map(({label:label})=>options[labels.indexOf(label)]);onChange(newValues)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],_extends({options:euiOptions,selectedOptions:selectedEuiOptions,onChange:onComboBoxChange,sortMatchesBy:"startsWith"},otherProps))}var elastic_datemath=__webpack_require__(16);var elastic_datemath_default=__webpack_require__.n(elastic_datemath);var filter_operators=__webpack_require__(224);var common=__webpack_require__(1);function getFieldFromFilter(filter,indexPattern){return indexPattern.fields.find(field=>field.name===filter.meta.key)}function getOperatorFromFilter(filter){return filter_operators["a"].find(operator=>filter.meta.type===operator.type&&filter.meta.negate===operator.negate)}function getFilterableFields(indexPattern){return indexPattern.fields.filter(common["isFilterable"])}function getOperatorOptions(field){return filter_operators["a"].filter(operator=>!operator.fieldTypes||operator.fieldTypes.includes(field.type))}function validateParams(params,type){switch(type){case"date":const moment=typeof params==="string"?elastic_datemath_default.a.parse(params):null;return Boolean(typeof params==="string"&&moment&&moment.isValid());case"ip":try{return Boolean(new common["Ipv4Address"](params))}catch(e){return false}default:return true}}function isFilterValid(indexPattern,field,operator,params){if(!indexPattern||!field||!operator){return false}switch(operator.type){case"phrase":return validateParams(params,field.type);case"phrases":if(!Array.isArray(params)||!params.length){return false}return params.every(phrase=>validateParams(phrase,field.type));case"range":if(typeof params!=="object"){return false}return(!params.from||validateParams(params.from,field.type))&&(!params.to||validateParams(params.to,field.type));case"exists":return true;default:throw new Error("Unknown operator type: ".concat(operator.type))}}function phrase_suggestor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function phrase_suggestor_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){phrase_suggestor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){phrase_suggestor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function phrase_suggestor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class phrase_suggestor_PhraseSuggestorUI extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){var _this;super(...args);_this=this;phrase_suggestor_defineProperty(this,"services",this.props.kibana.services);phrase_suggestor_defineProperty(this,"abortController",void 0);phrase_suggestor_defineProperty(this,"state",{suggestions:[],isLoading:false});phrase_suggestor_defineProperty(this,"onSearchChange",value=>{this.updateSuggestions("".concat(value))});phrase_suggestor_defineProperty(this,"updateSuggestions",Object(external_kbnSharedDeps_Lodash_["debounce"])(function(){var _ref=phrase_suggestor_asyncToGenerator(regeneratorRuntime.mark((function _callee(query=""){var _ref2,indexPattern,field,suggestions;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.abortController)_this.abortController.abort();_this.abortController=new AbortController;_ref2=_this.props,indexPattern=_ref2.indexPattern,field=_ref2.field;if(!(!field||!_this.isSuggestingValues())){_context.next=5;break}return _context.abrupt("return");case 5:_this.setState({isLoading:true});_context.next=8;return _this.services.data.autocomplete.getValueSuggestions({indexPattern:indexPattern,field:field,query:query,signal:_this.abortController.signal,useTimeRange:false});case 8:suggestions=_context.sent;_this.setState({suggestions:suggestions,isLoading:false});case 10:case"end":return _context.stop()}}),_callee)})));return function(){return _ref.apply(this,arguments)}}(),500))}componentDidMount(){this.updateSuggestions()}componentWillUnmount(){if(this.abortController)this.abortController.abort()}isSuggestingValues(){const shouldSuggestValues=this.services.uiSettings.get(common["UI_SETTINGS"].FILTERS_EDITOR_SUGGEST_VALUES);const field=this.props.field;return shouldSuggestValues&&field&&field.aggregatable&&field.type==="string"}}const PhraseSuggestor=Object(public_["withKibana"])(phrase_suggestor_PhraseSuggestorUI);function value_input_type_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class value_input_type_ValueInputTypeUI extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);value_input_type_defineProperty(this,"onBoolChange",event=>{const boolValue=event.target.value==="true";this.props.onChange(boolValue)});value_input_type_defineProperty(this,"onChange",event=>{const params=event.target.value;this.props.onChange(params)});value_input_type_defineProperty(this,"onBlur",event=>{if(this.props.onBlur){const params=event.target.value;this.props.onBlur(params)}})}render(){const value=this.props.value;let inputElement;switch(this.props.type){case"string":inputElement=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:this.props.placeholder,value:value,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"number":inputElement=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{placeholder:this.props.placeholder,value:typeof value==="string"?parseFloat(value):value,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"date":inputElement=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:this.props.placeholder,value:value,onChange:this.onChange,onBlur:this.onBlur,isInvalid:!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(value)&&!validateParams(value,this.props.type),controlOnly:this.props.controlOnly,className:this.props.className});break;case"ip":inputElement=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:this.props.placeholder,value:value,onChange:this.onChange,isInvalid:!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(value)&&!validateParams(value,this.props.type),controlOnly:this.props.controlOnly,className:this.props.className});break;case"boolean":inputElement=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:[{value:undefined,text:this.props.placeholder},{value:"true",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.trueOptionLabel",defaultMessage:"true"})},{value:"false",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.falseOptionLabel",defaultMessage:"false"})}],value:value,onChange:this.onBoolChange,className:this.props.className});break;default:break}return inputElement}}const ValueInputType=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(value_input_type_ValueInputTypeUI);class phrase_value_input_PhraseValueInputUI extends phrase_suggestor_PhraseSuggestorUI{render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputLabel",defaultMessage:"Value"})},this.isSuggestingValues()?this.renderWithSuggestions():external_kbnSharedDeps_React_default.a.createElement(ValueInputType,{placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputPlaceholder",defaultMessage:"Enter a value"}),value:this.props.value,onChange:this.props.onChange,type:this.props.field?this.props.field.type:"string"}))}renderWithSuggestions(){const suggestions=this.state.suggestions;const _this$props=this.props,value=_this$props.value,intl=_this$props.intl,_onChange=_this$props.onChange;const valueAsStr=String(value);const options=value?Object(external_kbnSharedDeps_Lodash_["uniq"])([valueAsStr,...suggestions]):suggestions;return external_kbnSharedDeps_React_default.a.createElement(StringComboBox,{placeholder:intl.formatMessage({id:"data.filter.filterEditor.valueSelectPlaceholder",defaultMessage:"Select a value"}),options:options,getLabel:option=>option,selectedOptions:value?[valueAsStr]:[],onChange:([newValue=""])=>_onChange(newValue),onSearchChange:this.onSearchChange,singleSelection:{asPlainText:true},onCreateOption:_onChange,isClearable:false,"data-test-subj":"filterParamsComboBox phraseParamsComboxBox"})}}function StringComboBox(props){return GenericComboBox(props)}const PhraseValueInput=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(Object(public_["withKibana"])(phrase_value_input_PhraseValueInputUI));class phrases_values_input_PhrasesValuesInputUI extends phrase_suggestor_PhraseSuggestorUI{render(){const suggestions=this.state.suggestions;const _this$props=this.props,values=_this$props.values,intl=_this$props.intl,onChange=_this$props.onChange;const options=values?Object(external_kbnSharedDeps_Lodash_["uniq"])([...values,...suggestions]):suggestions;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:intl.formatMessage({id:"data.filter.filterEditor.valuesSelectLabel",defaultMessage:"Values"})},external_kbnSharedDeps_React_default.a.createElement(phrases_values_input_StringComboBox,{placeholder:intl.formatMessage({id:"data.filter.filterEditor.valuesSelectPlaceholder",defaultMessage:"Select values"}),options:options,getLabel:option=>option,selectedOptions:values||[],onSearchChange:this.onSearchChange,onCreateOption:option=>onChange([...values||[],option]),onChange:onChange,isClearable:false,"data-test-subj":"filterParamsComboBox phrasesParamsComboxBox"}))}}function phrases_values_input_StringComboBox(props){return GenericComboBox(props)}const PhrasesValuesInput=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(Object(public_["withKibana"])(phrases_values_input_PhrasesValuesInputUI));var external_kbnSharedDeps_Moment_=__webpack_require__(5);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);function RangeValueInputUI(props){const kibana=Object(public_["useKibana"])();const type=props.field?props.field.type:"string";const tzConfig=kibana.services.uiSettings.get("dateFormat:tz");const formatDateChange=value=>{if(typeof value!=="string"&&typeof value!=="number")return value;const momentParsedValue=external_kbnSharedDeps_Moment_default()(value).tz(tzConfig);if(momentParsedValue.isValid())return momentParsedValue===null||momentParsedValue===void 0?void 0:momentParsedValue.format("YYYY-MM-DDTHH:mm:ss.SSSZ");return value};const onFromChange=value=>{if(typeof value!=="string"&&typeof value!=="number"){throw new Error("Range params must be a string or number")}props.onChange({from:value,to:Object(external_kbnSharedDeps_Lodash_["get"])(props,"value.to")})};const onToChange=value=>{if(typeof value!=="string"&&typeof value!=="number"){throw new Error("Range params must be a string or number")}props.onChange({from:Object(external_kbnSharedDeps_Lodash_["get"])(props,"value.from"),to:value})};return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormControlLayoutDelimited"],{"aria-label":props.intl.formatMessage({id:"data.filter.filterEditor.rangeInputLabel",defaultMessage:"Range"}),startControl:external_kbnSharedDeps_React_default.a.createElement(ValueInputType,{controlOnly:true,type:type,value:props.value?props.value.from:undefined,onChange:onFromChange,onBlur:value=>{onFromChange(formatDateChange(value))},placeholder:props.intl.formatMessage({id:"data.filter.filterEditor.rangeStartInputPlaceholder",defaultMessage:"Start of the range"})}),endControl:external_kbnSharedDeps_React_default.a.createElement(ValueInputType,{controlOnly:true,type:type,value:props.value?props.value.to:undefined,onChange:onToChange,onBlur:value=>{onToChange(formatDateChange(value))},placeholder:props.intl.formatMessage({id:"data.filter.filterEditor.rangeEndInputPlaceholder",defaultMessage:"End of the range"})})}))}const RangeValueInput=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(RangeValueInputUI);function filter_editor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class filter_editor_FilterEditorUI extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);filter_editor_defineProperty(this,"toggleCustomEditor",()=>{const isCustomEditorOpen=!this.state.isCustomEditorOpen;this.setState({isCustomEditorOpen:isCustomEditorOpen})});filter_editor_defineProperty(this,"onIndexPatternChange",([selectedIndexPattern])=>{const selectedField=undefined;const selectedOperator=undefined;const params=undefined;this.setState({selectedIndexPattern:selectedIndexPattern,selectedField:selectedField,selectedOperator:selectedOperator,params:params})});filter_editor_defineProperty(this,"onFieldChange",([selectedField])=>{const selectedOperator=undefined;const params=undefined;this.setState({selectedField:selectedField,selectedOperator:selectedOperator,params:params})});filter_editor_defineProperty(this,"onOperatorChange",([selectedOperator])=>{const params=Object(external_kbnSharedDeps_Lodash_["get"])(this.state.selectedOperator,"type")===Object(external_kbnSharedDeps_Lodash_["get"])(selectedOperator,"type")?this.state.params:undefined;this.setState({selectedOperator:selectedOperator,params:params})});filter_editor_defineProperty(this,"onCustomLabelSwitchChange",event=>{const useCustomLabel=event.target.checked;const customLabel=event.target.checked?"":null;this.setState({useCustomLabel:useCustomLabel,customLabel:customLabel})});filter_editor_defineProperty(this,"onCustomLabelChange",event=>{const customLabel=event.target.value;this.setState({customLabel:customLabel})});filter_editor_defineProperty(this,"onParamsChange",params=>{this.setState({params:params})});filter_editor_defineProperty(this,"onQueryDslChange",queryDsl=>{this.setState({queryDsl:queryDsl})});filter_editor_defineProperty(this,"onSubmit",()=>{const _this$state=this.state,indexPattern=_this$state.selectedIndexPattern,field=_this$state.selectedField,operator=_this$state.selectedOperator,params=_this$state.params,useCustomLabel=_this$state.useCustomLabel,customLabel=_this$state.customLabel,isCustomEditorOpen=_this$state.isCustomEditorOpen,queryDsl=_this$state.queryDsl;const $state=this.props.filter.$state;if(!$state||!$state.store){return}const alias=useCustomLabel?customLabel:null;if(isCustomEditorOpen){const _this$props$filter$me=this.props.filter.meta,index=_this$props$filter$me.index,disabled=_this$props$filter$me.disabled,negate=_this$props$filter$me.negate;const newIndex=index||this.props.indexPatterns[0].id;const body=JSON.parse(queryDsl);const filter=Object(common["buildCustomFilter"])(newIndex,body,disabled,negate,alias,$state.store);this.props.onSubmit(filter)}else if(indexPattern&&field&&operator){const filter=Object(common["buildFilter"])(indexPattern,field,operator.type,operator.negate,this.props.filter.meta.disabled,params!==null&&params!==void 0?params:"",alias,$state.store);this.props.onSubmit(filter)}});this.state={selectedIndexPattern:this.getIndexPatternFromFilter(),selectedField:this.getFieldFromFilter(),selectedOperator:this.getSelectedOperator(),params:Object(common["getFilterParams"])(props.filter),useCustomLabel:props.filter.meta.alias!==null,customLabel:props.filter.meta.alias,queryDsl:JSON.stringify(Object(common["cleanFilter"])(props.filter),null,2),isCustomEditorOpen:this.isUnknownFilterType()}}render(){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"baseline",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.filter.filterEditor.editFilterPopupTitle",defaultMessage:"Edit filter"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"filterEditor__hiddenItem"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs","data-test-subj":"editQueryDSL",onClick:this.toggleCustomEditor},this.state.isCustomEditorOpen?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.filter.filterEditor.editFilterValuesButtonLabel",defaultMessage:"Edit filter values"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.filter.filterEditor.editQueryDslButtonLabel",defaultMessage:"Edit as Query DSL"}))))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"globalFilterItem__editorForm"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,this.renderIndexPatternInput(),this.state.isCustomEditorOpen?this.renderCustomEditor():this.renderRegularEditor(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{id:"filterEditorCustomLabelSwitch","data-test-subj":"createCustomLabel",label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelSwitchLabel",defaultMessage:"Create custom label?"}),checked:this.state.useCustomLabel,onChange:this.onCustomLabelSwitchChange}),this.state.useCustomLabel&&external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelInputLabel",defaultMessage:"Custom label"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:"".concat(this.state.customLabel),onChange:this.onCustomLabelChange}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"rowReverse",alignItems:"center",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:this.onSubmit,isDisabled:!this.isFilterValid(),"data-test-subj":"saveFilter"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.filter.filterEditor.saveButtonLabel",defaultMessage:"Save"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{flush:"right",onClick:this.props.onCancel,"data-test-subj":"cancelSaveFilter"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.filter.filterEditor.cancelButtonLabel",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null)))))}renderIndexPatternInput(){if(this.props.indexPatterns.length<=1&&this.props.indexPatterns.find(indexPattern=>indexPattern===this.getIndexPatternFromFilter())){return""}const selectedIndexPattern=this.state.selectedIndexPattern;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.indexPatternSelectLabel",defaultMessage:"Index Pattern"})},external_kbnSharedDeps_React_default.a.createElement(IndexPatternComboBox,{placeholder:this.props.intl.formatMessage({id:"data.filter.filterBar.indexPatternSelectPlaceholder",defaultMessage:"Select an index pattern"}),options:this.props.indexPatterns,selectedOptions:selectedIndexPattern?[selectedIndexPattern]:[],getLabel:indexPattern=>indexPattern.title,onChange:this.onIndexPatternChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterIndexPatternsSelect"}))))}renderRegularEditor(){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:true,gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:2},this.renderFieldInput()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:{flexBasis:160}},this.renderOperatorInput())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"filterParams"},this.renderParamsEditor()))}renderFieldInput(){const _this$state2=this.state,selectedIndexPattern=_this$state2.selectedIndexPattern,selectedField=_this$state2.selectedField;const fields=selectedIndexPattern?getFilterableFields(selectedIndexPattern):[];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectLabel",defaultMessage:"Field"})},external_kbnSharedDeps_React_default.a.createElement(FieldComboBox,{id:"fieldInput",isDisabled:!selectedIndexPattern,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectPlaceholder",defaultMessage:"Select a field first"}),options:fields,selectedOptions:selectedField?[selectedField]:[],getLabel:field=>field.name,onChange:this.onFieldChange,singleSelection:{asPlainText:true},isClearable:false,className:"globalFilterEditor__fieldInput","data-test-subj":"filterFieldSuggestionList"}))}renderOperatorInput(){const _this$state3=this.state,selectedField=_this$state3.selectedField,selectedOperator=_this$state3.selectedOperator;const operators=selectedField?getOperatorOptions(selectedField):[];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectLabel",defaultMessage:"Operator"})},external_kbnSharedDeps_React_default.a.createElement(OperatorComboBox,{isDisabled:!selectedField,placeholder:selectedField?this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderSelect",defaultMessage:"Select"}):this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderWaiting",defaultMessage:"Waiting"}),options:operators,selectedOptions:selectedOperator?[selectedOperator]:[],getLabel:({message:message})=>message,onChange:this.onOperatorChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterOperatorList"}))}renderCustomEditor(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.filter.filterEditor.queryDslLabel",{defaultMessage:"Elasticsearch Query DSL"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeEditor"],{value:this.state.queryDsl,onChange:this.onQueryDslChange,mode:"json",width:"100%",height:"250px"}))}renderParamsEditor(){const indexPattern=this.state.selectedIndexPattern;if(!indexPattern||!this.state.selectedOperator){return""}switch(this.state.selectedOperator.type){case"exists":return"";case"phrase":return external_kbnSharedDeps_React_default.a.createElement(PhraseValueInput,{indexPattern:indexPattern,field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange,"data-test-subj":"phraseValueInput"});case"phrases":return external_kbnSharedDeps_React_default.a.createElement(PhrasesValuesInput,{indexPattern:indexPattern,field:this.state.selectedField,values:this.state.params,onChange:this.onParamsChange});case"range":return external_kbnSharedDeps_React_default.a.createElement(RangeValueInput,{field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange})}}isUnknownFilterType(){const type=this.props.filter.meta.type;return!!type&&!["phrase","phrases","range","exists"].includes(type)}getIndexPatternFromFilter(){return Object(common["getIndexPatternFromFilter"])(this.props.filter,this.props.indexPatterns)}getFieldFromFilter(){const indexPattern=this.getIndexPatternFromFilter();return indexPattern&&getFieldFromFilter(this.props.filter,indexPattern)}getSelectedOperator(){return getOperatorFromFilter(this.props.filter)}isFilterValid(){const _this$state4=this.state,isCustomEditorOpen=_this$state4.isCustomEditorOpen,queryDsl=_this$state4.queryDsl,indexPattern=_this$state4.selectedIndexPattern,field=_this$state4.selectedField,operator=_this$state4.selectedOperator,params=_this$state4.params;if(isCustomEditorOpen){try{return Boolean(JSON.parse(queryDsl))}catch(e){return false}}return isFilterValid(indexPattern,field,operator,params)}}function IndexPatternComboBox(props){return GenericComboBox(props)}function FieldComboBox(props){return GenericComboBox(props)}function OperatorComboBox(props){return GenericComboBox(props)}const FilterEditor=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(filter_editor_FilterEditorUI);var filter_bar=__webpack_require__(103);function filter_view_extends(){filter_view_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return filter_view_extends.apply(this,arguments)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function filter_view_objectWithoutProperties(source,excluded){if(source==null)return{};var target=filter_view_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function filter_view_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const FilterView=_ref=>{let filter=_ref.filter,iconOnClick=_ref.iconOnClick,onClick=_ref.onClick,valueLabel=_ref.valueLabel,errorMessage=_ref.errorMessage,filterLabelStatus=_ref.filterLabelStatus,rest=filter_view_objectWithoutProperties(_ref,["filter","iconOnClick","onClick","valueLabel","errorMessage","filterLabelStatus"]);const _useInnerText=Object(external_kbnSharedDeps_ElasticEui_["useInnerText"])(),_useInnerText2=_slicedToArray(_useInnerText,2),ref=_useInnerText2[0],innerText=_useInnerText2[1];let title=errorMessage||external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.filter.filterBar.moreFilterActionsMessage",{defaultMessage:"Filter: {innerText}. Select for more filter actions.",values:{innerText:innerText}});if(Object(common["isFilterPinned"])(filter)){title="".concat(external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.filter.filterBar.pinnedFilterPrefix",{defaultMessage:"Pinned"})," ").concat(title)}if(filter.meta.disabled){title="".concat(external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.filter.filterBar.disabledFilterPrefix",{defaultMessage:"Disabled"})," ").concat(title)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],filter_view_extends({title:title,color:"hollow",iconType:"cross",iconSide:"right",closeButtonProps:{tabIndex:-1},iconOnClick:iconOnClick,iconOnClickAriaLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.filter.filterBar.filterItemBadgeIconAriaLabel",{defaultMessage:"Delete"}),onClick:onClick,onClickAriaLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.filter.filterBar.filterItemBadgeAriaLabel",{defaultMessage:"Filter actions"})},rest),external_kbnSharedDeps_React_default.a.createElement("span",{ref:ref},external_kbnSharedDeps_React_default.a.createElement(filter_bar["a"],{filter:filter,valueLabel:valueLabel,filterLabelStatus:filterLabelStatus})))};var services=__webpack_require__(12);function filter_item_slicedToArray(arr,i){return filter_item_arrayWithHoles(arr)||filter_item_iterableToArrayLimit(arr,i)||filter_item_unsupportedIterableToArray(arr,i)||filter_item_nonIterableRest()}function filter_item_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function filter_item_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return filter_item_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return filter_item_arrayLikeToArray(o,minLen)}function filter_item_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function filter_item_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function filter_item_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const FILTER_ITEM_OK="";const FILTER_ITEM_WARNING="warn";const FILTER_ITEM_ERROR="error";const FILTER_EDITOR_WIDTH=420;function FilterItem(props){const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=filter_item_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(undefined),_useState4=filter_item_slicedToArray(_useState3,2),indexPatternExists=_useState4[0],setIndexPatternExists=_useState4[1];const id=props.id,filter=props.filter,indexPatterns=props.indexPatterns;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const index=props.filter.meta.index;if(index){Object(services["a"])().get(index).then(indexPattern=>{setIndexPatternExists(!!indexPattern)}).catch(()=>{setIndexPatternExists(false)})}else{setIndexPatternExists(true)}},[props.filter.meta.index]);function handleBadgeClick(e){if(e.shiftKey){onToggleDisabled()}else{setIsPopoverOpen(!isPopoverOpen)}}function onSubmit(f){setIsPopoverOpen(false);props.onUpdate(f)}function onTogglePinned(){const f=Object(common["toggleFilterPinned"])(filter);props.onUpdate(f)}function onToggleNegated(){const f=Object(common["toggleFilterNegated"])(filter);props.onUpdate(f)}function onToggleDisabled(){const f=Object(common["toggleFilterDisabled"])(filter);props.onUpdate(f)}function isValidLabel(labelConfig){return labelConfig.status===FILTER_ITEM_OK}function isDisabled(labelConfig){const disabled=filter.meta.disabled;return disabled||labelConfig.status===FILTER_ITEM_ERROR}function getClasses(negate,labelConfig){return classnames_default()("globalFilterItem",{"globalFilterItem-isDisabled":isDisabled(labelConfig),"globalFilterItem-isError":labelConfig.status===FILTER_ITEM_ERROR,"globalFilterItem-isWarning":labelConfig.status===FILTER_ITEM_WARNING,"globalFilterItem-isPinned":Object(common["isFilterPinned"])(filter),"globalFilterItem-isExcluded":negate},props.className)}function getDataTestSubj(labelConfig){const dataTestSubjKey=filter.meta.key?"filter-key-".concat(filter.meta.key):"";const dataTestSubjValue=filter.meta.value?"filter-value-".concat(isValidLabel(labelConfig)?labelConfig.title:labelConfig.status):"";const dataTestSubjNegated=filter.meta.negate?"filter-negated":"";const dataTestSubjDisabled="filter-".concat(isDisabled(labelConfig)?"disabled":"enabled");const dataTestSubjPinned="filter-".concat(Object(common["isFilterPinned"])(filter)?"pinned":"unpinned");return"filter ".concat(dataTestSubjDisabled," ").concat(dataTestSubjKey," ").concat(dataTestSubjValue," ").concat(dataTestSubjPinned," ").concat(dataTestSubjNegated)}function getPanels(){const _filter$meta=filter.meta,negate=_filter$meta.negate,disabled=_filter$meta.disabled;return[{id:0,items:[{name:Object(common["isFilterPinned"])(filter)?props.intl.formatMessage({id:"data.filter.filterBar.unpinFilterButtonLabel",defaultMessage:"Unpin"}):props.intl.formatMessage({id:"data.filter.filterBar.pinFilterButtonLabel",defaultMessage:"Pin across all apps"}),icon:"pin",onClick:()=>{setIsPopoverOpen(false);onTogglePinned()},"data-test-subj":"pinFilter"},{name:props.intl.formatMessage({id:"data.filter.filterBar.editFilterButtonLabel",defaultMessage:"Edit filter"}),icon:"pencil",panel:1,"data-test-subj":"editFilter"},{name:negate?props.intl.formatMessage({id:"data.filter.filterBar.includeFilterButtonLabel",defaultMessage:"Include results"}):props.intl.formatMessage({id:"data.filter.filterBar.excludeFilterButtonLabel",defaultMessage:"Exclude results"}),icon:negate?"plusInCircle":"minusInCircle",onClick:()=>{setIsPopoverOpen(false);onToggleNegated()},"data-test-subj":"negateFilter"},{name:disabled?props.intl.formatMessage({id:"data.filter.filterBar.enableFilterButtonLabel",defaultMessage:"Re-enable"}):props.intl.formatMessage({id:"data.filter.filterBar.disableFilterButtonLabel",defaultMessage:"Temporarily disable"}),icon:"".concat(disabled?"eye":"eyeClosed"),onClick:()=>{setIsPopoverOpen(false);onToggleDisabled()},"data-test-subj":"disableFilter"},{name:props.intl.formatMessage({id:"data.filter.filterBar.deleteFilterButtonLabel",defaultMessage:"Delete"}),icon:"trash",onClick:()=>{setIsPopoverOpen(false);props.onRemove()},"data-test-subj":"deleteFilter"}]},{id:1,width:FILTER_EDITOR_WIDTH,content:external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(FilterEditor,{filter:filter,indexPatterns:indexPatterns,onSubmit:onSubmit,onCancel:()=>{setIsPopoverOpen(false)}}))}]}function isFilterApplicable(){var _filter$meta2;if(!props.indexPatterns.length)return true;const ip=Object(common["getIndexPatternFromFilter"])(filter,indexPatterns);if(ip)return true;const allFields=indexPatterns.map(indexPattern=>indexPattern.fields.map(field=>field.name));const flatFields=allFields.reduce((acc,it)=>[...acc,...it],[]);return flatFields.includes(((_filter$meta2=filter.meta)===null||_filter$meta2===void 0?void 0:_filter$meta2.key)||"")}function getValueLabel(){const label={title:"",message:"",status:FILTER_ITEM_OK};if(indexPatternExists===false){label.status=FILTER_ITEM_ERROR;label.title=props.intl.formatMessage({id:"data.filter.filterBar.labelErrorText",defaultMessage:"Error"});label.message=props.intl.formatMessage({id:"data.filter.filterBar.labelErrorInfo",defaultMessage:"Index pattern {indexPattern} not found"},{indexPattern:filter.meta.index})}else if(isFilterApplicable()){try{label.title=Object(common["getDisplayValueFromFilter"])(filter,indexPatterns)}catch(e){label.status=FILTER_ITEM_ERROR;label.title=props.intl.formatMessage({id:"data.filter.filterBar.labelErrorText",defaultMessage:"Error"});label.message=e.message}}else{label.status=FILTER_ITEM_WARNING;label.title=props.intl.formatMessage({id:"data.filter.filterBar.labelWarningText",defaultMessage:"Warning"});label.message=props.intl.formatMessage({id:"data.filter.filterBar.labelWarningInfo",defaultMessage:"Field {fieldName} does not exist in current view"},{fieldName:filter.meta.key})}return label}if(indexPatternExists===undefined)return null;const valueLabelConfig=getValueLabel();if(valueLabelConfig.status===FILTER_ITEM_ERROR&&!filter.meta.disabled){filter.meta.disabled=true;props.onUpdate(filter);return null}const badge=external_kbnSharedDeps_React_default.a.createElement(FilterView,{filter:filter,valueLabel:valueLabelConfig.title,filterLabelStatus:valueLabelConfig.status,errorMessage:valueLabelConfig.message,className:getClasses(filter.meta.negate,valueLabelConfig),iconOnClick:()=>props.onRemove(),onClick:handleBadgeClick,"data-test-subj":getDataTestSubj(valueLabelConfig)});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"popoverFor_filter".concat(id),className:"globalFilterItem__popover",anchorClassName:"globalFilterItem__popoverAnchor",isOpen:isPopoverOpen,closePopover:()=>{setIsPopoverOpen(false)},button:badge,anchorPosition:"downLeft",panelPaddingSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:getPanels()}))}function filter_options_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class filter_options_FilterOptionsUI extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);filter_options_defineProperty(this,"state",{isPopoverOpen:false});filter_options_defineProperty(this,"togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}))});filter_options_defineProperty(this,"closePopover",()=>{this.setState({isPopoverOpen:false})})}render(){const panelTree={id:0,items:[{name:this.props.intl.formatMessage({id:"data.filter.options.enableAllFiltersButtonLabel",defaultMessage:"Enable all"}),icon:"eye",onClick:()=>{this.closePopover();this.props.onEnableAll()},"data-test-subj":"enableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.disableAllFiltersButtonLabel",defaultMessage:"Disable all"}),icon:"eyeClosed",onClick:()=>{this.closePopover();this.props.onDisableAll()},"data-test-subj":"disableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.pinAllFiltersButtonLabel",defaultMessage:"Pin all"}),icon:"pin",onClick:()=>{this.closePopover();this.props.onPinAll()},"data-test-subj":"pinAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.unpinAllFiltersButtonLabel",defaultMessage:"Unpin all"}),icon:"pin",onClick:()=>{this.closePopover();this.props.onUnpinAll()},"data-test-subj":"unpinAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.invertNegatedFiltersButtonLabel",defaultMessage:"Invert inclusion"}),icon:"invert",onClick:()=>{this.closePopover();this.props.onToggleAllNegated()},"data-test-subj":"invertInclusionAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.invertDisabledFiltersButtonLabel",defaultMessage:"Invert enabled/disabled"}),icon:"eye",onClick:()=>{this.closePopover();this.props.onToggleAllDisabled()},"data-test-subj":"invertEnableDisableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.deleteAllFiltersButtonLabel",defaultMessage:"Remove all"}),icon:"trash",onClick:()=>{this.closePopover();this.props.onRemoveAll()},"data-test-subj":"removeAllFilters"}]};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"popoverForAllFilters",className:"globalFilterGroup__allFiltersPopover",isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:this.togglePopover,iconType:"filter","aria-label":this.props.intl.formatMessage({id:"data.filter.options.changeAllFiltersButtonLabel",defaultMessage:"Change all filters"}),title:this.props.intl.formatMessage({id:"data.filter.options.changeAllFiltersButtonLabel",defaultMessage:"Change all filters"}),"data-test-subj":"showFilterActions"}),anchorPosition:"rightUp",panelPaddingSize:"none",repositionOnScroll:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.filter.searchBar.changeAllFiltersTitle",defaultMessage:"Change all filters"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:[panelTree]}))}}const FilterOptions=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(filter_options_FilterOptionsUI);function filter_bar_slicedToArray(arr,i){return filter_bar_arrayWithHoles(arr)||filter_bar_iterableToArrayLimit(arr,i)||filter_bar_unsupportedIterableToArray(arr,i)||filter_bar_nonIterableRest()}function filter_bar_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function filter_bar_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return filter_bar_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return filter_bar_arrayLikeToArray(o,minLen)}function filter_bar_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function filter_bar_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function filter_bar_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function FilterBarUI(props){const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=filter_bar_slicedToArray(_useState,2),isAddFilterPopoverOpen=_useState2[0],setIsAddFilterPopoverOpen=_useState2[1];const kibana=Object(public_["useKibana"])();const uiSettings=kibana.services.uiSettings;if(!uiSettings)return null;function onFiltersUpdated(filters){if(props.onFiltersUpdated){props.onFiltersUpdated(filters)}}function renderItems(){return props.filters.map((filter,i)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:i,grow:false,className:"globalFilterBar__flexItem"},external_kbnSharedDeps_React_default.a.createElement(FilterItem,{id:"".concat(i),intl:props.intl,filter:filter,onUpdate:newFilter=>_onUpdate(i,newFilter),onRemove:()=>_onRemove(i),indexPatterns:props.indexPatterns,uiSettings:uiSettings})))}function renderAddFilter(){const isPinned=uiSettings.get(common["UI_SETTINGS"].FILTERS_PINNED_BY_DEFAULT);const _props$indexPatterns=filter_bar_slicedToArray(props.indexPatterns,1),indexPattern=_props$indexPatterns[0];const index=indexPattern&&indexPattern.id;const newFilter=Object(common["buildEmptyFilter"])(isPinned,index);const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",onClick:()=>setIsAddFilterPopoverOpen(true),"data-test-subj":"addFilter",className:"globalFilterBar__addButton"},"+"," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.filter.filterBar.addFilterButtonLabel",defaultMessage:"Add filter"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"addFilterPopover",button:button,isOpen:isAddFilterPopoverOpen,closePopover:()=>setIsAddFilterPopoverOpen(false),anchorPosition:"downLeft",panelPaddingSize:"none",ownFocus:true,initialFocus:".filterEditor__hiddenItem",repositionOnScroll:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:FILTER_EDITOR_WIDTH,maxWidth:"100%"}},external_kbnSharedDeps_React_default.a.createElement(FilterEditor,{filter:newFilter,indexPatterns:props.indexPatterns,onSubmit:onAdd,onCancel:()=>setIsAddFilterPopoverOpen(false),key:JSON.stringify(newFilter)})))))}function onAdd(filter){setIsAddFilterPopoverOpen(false);if(props.trackUiMetric){props.trackUiMetric(METRIC_TYPE.CLICK,"".concat(props.appName,":filter_added"))}const filters=[...props.filters,filter];onFiltersUpdated(filters)}function _onRemove(i){const filters=[...props.filters];filters.splice(i,1);onFiltersUpdated(filters)}function _onUpdate(i,filter){if(props.trackUiMetric){props.trackUiMetric(METRIC_TYPE.CLICK,"".concat(props.appName,":filter_edited"))}const filters=[...props.filters];filters[i]=filter;onFiltersUpdated(filters)}function onEnableAll(){const filters=props.filters.map(common["enableFilter"]);onFiltersUpdated(filters)}function onDisableAll(){const filters=props.filters.map(common["disableFilter"]);onFiltersUpdated(filters)}function onPinAll(){const filters=props.filters.map(common["pinFilter"]);onFiltersUpdated(filters)}function onUnpinAll(){const filters=props.filters.map(common["unpinFilter"]);onFiltersUpdated(filters)}function onToggleAllNegated(){if(props.trackUiMetric){props.trackUiMetric(METRIC_TYPE.CLICK,"".concat(props.appName,":filter_invertInclusion"))}const filters=props.filters.map(common["toggleFilterNegated"]);onFiltersUpdated(filters)}function onToggleAllDisabled(){if(props.trackUiMetric){props.trackUiMetric(METRIC_TYPE.CLICK,"".concat(props.appName,":filter_toggleAllDisabled"))}const filters=props.filters.map(common["toggleFilterDisabled"]);onFiltersUpdated(filters)}function onRemoveAll(){onFiltersUpdated([])}const classes=classnames_default()("globalFilterBar",props.className);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"globalFilterGroup",gutterSize:"none",alignItems:"flexStart",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"globalFilterGroup__branch",grow:false},external_kbnSharedDeps_React_default.a.createElement(FilterOptions,{onEnableAll:onEnableAll,onDisableAll:onDisableAll,onPinAll:onPinAll,onUnpinAll:onUnpinAll,onToggleAllNegated:onToggleAllNegated,onToggleAllDisabled:onToggleAllDisabled,onRemoveAll:onRemoveAll})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"globalFilterGroup__filterFlexItem"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:classes,wrap:true,responsive:false,gutterSize:"xs",alignItems:"center"},renderItems(),renderAddFilter())))}const FilterBar=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(FilterBarUI);function save_query_form_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function save_query_form_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){save_query_form_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){save_query_form_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function save_query_form_slicedToArray(arr,i){return save_query_form_arrayWithHoles(arr)||save_query_form_iterableToArrayLimit(arr,i)||save_query_form_unsupportedIterableToArray(arr,i)||save_query_form_nonIterableRest()}function save_query_form_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function save_query_form_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return save_query_form_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return save_query_form_arrayLikeToArray(o,minLen)}function save_query_form_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function save_query_form_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function save_query_form_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function SaveQueryForm({savedQuery:savedQuery,savedQueryService:savedQueryService,onSave:onSave,onClose:onClose,showFilterOption:showFilterOption=true,showTimeFilterOption:showTimeFilterOption=true}){const _useState=Object(external_kbnSharedDeps_React_["useState"])(savedQuery?savedQuery.title:""),_useState2=save_query_form_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(Boolean(savedQuery)),_useState4=save_query_form_slicedToArray(_useState3,2),enabledSaveButton=_useState4[0],setEnabledSaveButton=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(savedQuery?savedQuery.description:""),_useState6=save_query_form_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])([]),_useState8=save_query_form_slicedToArray(_useState7,2),savedQueries=_useState8[0],setSavedQueries=_useState8[1];const _useState9=Object(external_kbnSharedDeps_React_["useState"])(savedQuery?!!savedQuery.filters:true),_useState10=save_query_form_slicedToArray(_useState9,2),shouldIncludeFilters=_useState10[0],setShouldIncludeFilters=_useState10[1];const _useState11=Object(external_kbnSharedDeps_React_["useState"])(savedQuery?!!savedQuery.timefilter:false),_useState12=save_query_form_slicedToArray(_useState11,2),shouldIncludeTimefilter=_useState12[0],setIncludeTimefilter=_useState12[1];const _useState13=Object(external_kbnSharedDeps_React_["useState"])([]),_useState14=save_query_form_slicedToArray(_useState13,2),formErrors=_useState14[0],setFormErrors=_useState14[1];const titleConflictErrorText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryForm.titleConflictText",{defaultMessage:"Name conflicts with an existing saved query"});const savedQueryDescriptionText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryDescriptionText",{defaultMessage:"Save query text and filters that you want to use again."});Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const fetchQueries=function(){var _ref=save_query_form_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var allSavedQueries,sortedAllSavedQueries;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return savedQueryService.getAllSavedQueries();case 2:allSavedQueries=_context.sent;sortedAllSavedQueries=Object(external_kbnSharedDeps_Lodash_["sortBy"])(allSavedQueries,"attributes.title");setSavedQueries(sortedAllSavedQueries);case 5:case"end":return _context.stop()}}),_callee)})));return function fetchQueries(){return _ref.apply(this,arguments)}}();fetchQueries()},[savedQueryService]);const validate=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{const errors=[];if(!!savedQueries.find(existingSavedQuery=>!savedQuery&&existingSavedQuery.attributes.title===title)){errors.push(titleConflictErrorText)}if(!Object(external_kbnSharedDeps_Lodash_["isEqual"])(errors,formErrors)){setFormErrors(errors);return false}return!formErrors.length},[savedQueries,savedQuery,title,titleConflictErrorText,formErrors]);const onClickSave=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{if(validate()){onSave({title:title,description:description,shouldIncludeFilters:shouldIncludeFilters,shouldIncludeTimefilter:shouldIncludeTimefilter})}},[validate,onSave,title,description,shouldIncludeFilters,shouldIncludeTimefilter]);const onInputChange=Object(external_kbnSharedDeps_React_["useCallback"])(event=>{setEnabledSaveButton(Boolean(event.target.value));setFormErrors([]);setTitle(event.target.value)},[]);const autoTrim=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{const trimmedTitle=title.trim();if(title.length>trimmedTitle.length){setTitle(trimmedTitle)}},[title]);const hasErrors=formErrors.length>0;const saveQueryForm=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{isInvalid:hasErrors,error:formErrors,"data-test-subj":"saveQueryForm"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},savedQueryDescriptionText)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryNameLabelText",{defaultMessage:"Name"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryNameHelpText",{defaultMessage:"Name is required. Name cannot contain leading or trailing whitespace. Name must be unique."}),isInvalid:hasErrors},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{disabled:!!savedQuery,value:title,name:"title",onChange:onInputChange,"data-test-subj":"saveQueryFormTitle",isInvalid:hasErrors,onBlur:autoTrim})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryDescriptionLabelText",{defaultMessage:"Description"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:description,name:"description",onChange:event=>{setDescription(event.target.value)},"data-test-subj":"saveQueryFormDescription"})),showFilterOption&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{name:"shouldIncludeFilters",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryIncludeFiltersLabelText",{defaultMessage:"Include filters"}),checked:shouldIncludeFilters,onChange:()=>{setShouldIncludeFilters(!shouldIncludeFilters)},"data-test-subj":"saveQueryFormIncludeFiltersOption"})),showTimeFilterOption&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{name:"shouldIncludeTimefilter",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryIncludeTimeFilterLabelText",{defaultMessage:"Include time filter"}),checked:shouldIncludeTimefilter,onChange:()=>{setIncludeTimefilter(!shouldIncludeTimefilter)},"data-test-subj":"saveQueryFormIncludeTimeFilterOption"})));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:onClose,initialFocus:"[name=title]"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryFormTitle",{defaultMessage:"Save query"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,saveQueryForm),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:onClose,"data-test-subj":"savedQueryFormCancelButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryFormCancelButtonText",{defaultMessage:"Cancel"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:onClickSave,fill:true,"data-test-subj":"savedQueryFormSaveButton",disabled:hasErrors||!enabledSaveButton},external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryFormSaveButtonText",{defaultMessage:"Save"})))))}function saved_query_list_item_slicedToArray(arr,i){return saved_query_list_item_arrayWithHoles(arr)||saved_query_list_item_iterableToArrayLimit(arr,i)||saved_query_list_item_unsupportedIterableToArray(arr,i)||saved_query_list_item_nonIterableRest()}function saved_query_list_item_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function saved_query_list_item_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return saved_query_list_item_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return saved_query_list_item_arrayLikeToArray(o,minLen)}function saved_query_list_item_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function saved_query_list_item_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function saved_query_list_item_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const SavedQueryListItem=({savedQuery:savedQuery,isSelected:isSelected,onSelect:onSelect,onDelete:onDelete,showWriteOperations:showWriteOperations})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=saved_query_list_item_slicedToArray(_useState,2),showDeletionConfirmationModal=_useState2[0],setShowDeletionConfirmationModal=_useState2[1];const selectButtonAriaLabelText=isSelected?external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemSelectedButtonAriaLabel",{defaultMessage:"Saved query button selected {savedQueryName}. Press to clear any changes.",values:{savedQueryName:savedQuery.attributes.title}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemButtonAriaLabel",{defaultMessage:"Saved query button {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}});const selectButtonDataTestSubj=isSelected?"load-saved-query-".concat(savedQuery.attributes.title,"-button saved-query-list-item-selected"):"load-saved-query-".concat(savedQuery.attributes.title,"-button");const classes=classnames_default()("kbnSavedQueryListItem",{"kbnSavedQueryListItem-selected":isSelected});const label=external_kbnSharedDeps_React_default.a.createElement("span",{className:"kbnSavedQueryListItem__label"},external_kbnSharedDeps_React_default.a.createElement("span",{className:"kbnSavedQueryListItem__labelText"},savedQuery.attributes.title)," ",savedQuery.attributes.description&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"iInCircle",content:savedQuery.attributes.description,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemDescriptionAriaLabel",{defaultMessage:"{savedQueryName} description",values:{savedQueryName:savedQuery.attributes.title}})}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroupItem"],{className:classes,key:savedQuery.id,"data-test-subj":"saved-query-list-item ".concat(selectButtonDataTestSubj," ").concat(isSelected?"saved-query-list-item-selected":""),isActive:isSelected,onClick:()=>{onSelect(savedQuery)},"aria-label":selectButtonAriaLabelText,label:label,iconType:isSelected?"check":undefined,extraAction:showWriteOperations?{color:"danger",onClick:()=>setShowDeletionConfirmationModal(true),iconType:"trash",iconSize:"s","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverDeleteButtonAriaLabel",{defaultMessage:"Delete saved query {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverDeleteButtonAriaLabel",{defaultMessage:"Delete saved query {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}}),"data-test-subj":"delete-saved-query-".concat(savedQuery.attributes.title,"-button")}:undefined}),showDeletionConfirmationModal&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverConfirmDeletionTitle",{defaultMessage:'Delete "{savedQueryName}"?',values:{savedQueryName:savedQuery.attributes.title}}),confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverConfirmDeletionConfirmButtonText",{defaultMessage:"Delete"}),cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverConfirmDeletionCancelButtonText",{defaultMessage:"Cancel"}),onConfirm:()=>{onDelete(savedQuery);setShowDeletionConfirmationModal(false)},buttonColor:"danger",onCancel:()=>{setShowDeletionConfirmationModal(false)}})))};function saved_query_management_component_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function saved_query_management_component_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){saved_query_management_component_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){saved_query_management_component_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function saved_query_management_component_slicedToArray(arr,i){return saved_query_management_component_arrayWithHoles(arr)||saved_query_management_component_iterableToArrayLimit(arr,i)||saved_query_management_component_unsupportedIterableToArray(arr,i)||saved_query_management_component_nonIterableRest()}function saved_query_management_component_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function saved_query_management_component_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return saved_query_management_component_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return saved_query_management_component_arrayLikeToArray(o,minLen)}function saved_query_management_component_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function saved_query_management_component_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function saved_query_management_component_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const perPage=50;function SavedQueryManagementComponent({showSaveQuery:showSaveQuery,loadedSavedQuery:loadedSavedQuery,onSave:onSave,onSaveAsNew:onSaveAsNew,onLoad:onLoad,onClearSavedQuery:onClearSavedQuery,savedQueryService:savedQueryService}){const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=saved_query_management_component_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=saved_query_management_component_slicedToArray(_useState3,2),savedQueries=_useState4[0],setSavedQueries=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(0),_useState6=saved_query_management_component_slicedToArray(_useState5,2),count=_useState6[0],setTotalCount=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])(0),_useState8=saved_query_management_component_slicedToArray(_useState7,2),activePage=_useState8[0],setActivePage=_useState8[1];const cancelPendingListingRequest=Object(external_kbnSharedDeps_React_["useRef"])(()=>{});Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const fetchCountAndSavedQueries=function(){var _ref=saved_query_management_component_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var requestGotCancelled,_yield$savedQueryServ,savedQueryCount,savedQueryItems,sortedSavedQueryItems;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:cancelPendingListingRequest.current();requestGotCancelled=false;cancelPendingListingRequest.current=()=>{requestGotCancelled=true};_context.next=5;return savedQueryService.findSavedQueries("",perPage,activePage+1);case 5:_yield$savedQueryServ=_context.sent;savedQueryCount=_yield$savedQueryServ.total;savedQueryItems=_yield$savedQueryServ.queries;if(!requestGotCancelled){_context.next=10;break}return _context.abrupt("return");case 10:sortedSavedQueryItems=Object(external_kbnSharedDeps_Lodash_["sortBy"])(savedQueryItems,"attributes.title");setTotalCount(savedQueryCount);setSavedQueries(sortedSavedQueryItems);case 13:case"end":return _context.stop()}}),_callee)})));return function fetchCountAndSavedQueries(){return _ref.apply(this,arguments)}}();if(isOpen){fetchCountAndSavedQueries()}},[isOpen,activePage,savedQueryService]);const handleTogglePopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsOpen(currentState=>!currentState),[setIsOpen]);const handleClosePopover=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsOpen(false),[]);const handleSave=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{handleClosePopover();onSave()},[handleClosePopover,onSave]);const handleSaveAsNew=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{handleClosePopover();onSaveAsNew()},[handleClosePopover,onSaveAsNew]);const handleSelect=Object(external_kbnSharedDeps_React_["useCallback"])(savedQueryToSelect=>{handleClosePopover();onLoad(savedQueryToSelect)},[handleClosePopover,onLoad]);const handleDelete=Object(external_kbnSharedDeps_React_["useCallback"])(savedQueryToDelete=>{const onDeleteSavedQuery=function(){var _ref2=saved_query_management_component_asyncToGenerator(regeneratorRuntime.mark((function _callee2(savedQuery){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:cancelPendingListingRequest.current();setSavedQueries(savedQueries.filter(currentSavedQuery=>currentSavedQuery.id!==savedQuery.id));if(loadedSavedQuery&&loadedSavedQuery.id===savedQuery.id){onClearSavedQuery()}_context2.next=5;return savedQueryService.deleteSavedQuery(savedQuery.id);case 5:setActivePage(0);case 6:case"end":return _context2.stop()}}),_callee2)})));return function onDeleteSavedQuery(_x){return _ref2.apply(this,arguments)}}();onDeleteSavedQuery(savedQueryToDelete);handleClosePopover()},[handleClosePopover,loadedSavedQuery,onClearSavedQuery,savedQueries,savedQueryService]);const savedQueryDescriptionText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryDescriptionText",{defaultMessage:"Save query text and filters that you want to use again."});const noSavedQueriesDescriptionText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryNoSavedQueriesText",{defaultMessage:"There are no saved queries."})+" "+savedQueryDescriptionText;const savedQueryPopoverTitleText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverTitleText",{defaultMessage:"Saved Queries"});const goToPage=pageNumber=>{setActivePage(pageNumber)};const savedQueryPopoverButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:handleTogglePopover,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverButtonText",{defaultMessage:"See saved queries"}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverButtonText",{defaultMessage:"See saved queries"}),"data-test-subj":"saved-query-management-popover-button"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"save",className:"euiQuickSelectPopover__buttonText"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"arrowDown"}));const savedQueryRows=()=>{const savedQueriesWithoutCurrent=savedQueries.filter(savedQuery=>{if(!loadedSavedQuery)return true;return savedQuery.id!==loadedSavedQuery.id});const savedQueriesReordered=loadedSavedQuery&&savedQueriesWithoutCurrent.length!==savedQueries.length?[loadedSavedQuery,...savedQueriesWithoutCurrent]:[...savedQueriesWithoutCurrent];return savedQueriesReordered.map(savedQuery=>external_kbnSharedDeps_React_default.a.createElement(SavedQueryListItem,{key:savedQuery.id,savedQuery:savedQuery,isSelected:!!loadedSavedQuery&&loadedSavedQuery.id===savedQuery.id,onSelect:handleSelect,onDelete:handleDelete,showWriteOperations:!!showSaveQuery}))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"savedQueryPopover",button:savedQueryPopoverButton,isOpen:isOpen,closePopover:handleClosePopover,anchorPosition:"downLeft",panelPaddingSize:"none",buffer:-8,ownFocus:true,repositionOnScroll:true},external_kbnSharedDeps_React_default.a.createElement("div",{className:"kbnSavedQueryManagement__popover","data-test-subj":"saved-query-management-popover"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],{id:"savedQueryManagementPopoverTitle"},savedQueryPopoverTitleText),savedQueries.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued",className:"kbnSavedQueryManagement__text"},external_kbnSharedDeps_React_default.a.createElement("p",null,savedQueryDescriptionText)),external_kbnSharedDeps_React_default.a.createElement("div",{className:"kbnSavedQueryManagement__listWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroup"],{flush:true,className:"kbnSavedQueryManagement__list","aria-labelledby":"savedQueryManagementPopoverTitle"},savedQueryRows())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPagination"],{className:"kbnSavedQueryManagement__pagination",pageCount:Math.ceil(count/perPage),activePage:activePage,onPageClick:goToPage})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued",className:"kbnSavedQueryManagement__text"},external_kbnSharedDeps_React_default.a.createElement("p",null,noSavedQueriesDescriptionText)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"rowReverse",gutterSize:"s",alignItems:"center",justifyContent:"flexEnd",responsive:false,wrap:true},showSaveQuery&&loadedSavedQuery&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",fill:true,onClick:handleSave,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverSaveChangesButtonAriaLabel",{defaultMessage:"Save changes to {title}",values:{title:loadedSavedQuery.attributes.title}}),"data-test-subj":"saved-query-management-save-changes-button"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverSaveChangesButtonText",{defaultMessage:"Save changes"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",onClick:handleSaveAsNew,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverSaveAsNewButtonAriaLabel",{defaultMessage:"Save as new saved query"}),"data-test-subj":"saved-query-management-save-as-new-button"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverSaveAsNewButtonText",{defaultMessage:"Save as new"})))),showSaveQuery&&!loadedSavedQuery&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",fill:true,onClick:handleSave,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverSaveButtonAriaLabel",{defaultMessage:"Save a new saved query"}),"data-test-subj":"saved-query-management-save-button"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverSaveButtonText",{defaultMessage:"Save current query"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},loadedSavedQuery&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",flush:"left",onClick:onClearSavedQuery,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverClearButtonAriaLabel",{defaultMessage:"Clear current saved query"}),"data-test-subj":"saved-query-management-clear-button"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.search.searchBar.savedQueryPopoverClearButtonText",{defaultMessage:"Clear"}))))))))}function search_bar_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function search_bar_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){search_bar_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){search_bar_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){search_bar_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function search_bar_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class search_bar_SearchBarUI extends external_kbnSharedDeps_React_["Component"]{constructor(...args){var _this;super(...args);_this=this;search_bar_defineProperty(this,"services",this.props.kibana.services);search_bar_defineProperty(this,"savedQueryService",this.services.data.query.savedQueries);search_bar_defineProperty(this,"filterBarRef",null);search_bar_defineProperty(this,"filterBarWrapperRef",null);search_bar_defineProperty(this,"state",{isFiltersVisible:true,showSaveQueryModal:false,showSaveNewQueryModal:false,showSavedQueryPopover:false,currentProps:this.props,query:this.props.query?_objectSpread({},this.props.query):undefined,dateRangeFrom:Object(external_kbnSharedDeps_Lodash_["get"])(this.props,"dateRangeFrom","now-15m"),dateRangeTo:Object(external_kbnSharedDeps_Lodash_["get"])(this.props,"dateRangeTo","now")});search_bar_defineProperty(this,"isDirty",()=>{if(!this.props.showDatePicker&&this.state.query&&this.props.query){return this.state.query.query!==this.props.query.query}return this.state.query&&this.props.query&&this.state.query.query!==this.props.query.query||this.state.dateRangeFrom!==this.props.dateRangeFrom||this.state.dateRangeTo!==this.props.dateRangeTo});search_bar_defineProperty(this,"setFilterBarHeight",()=>{requestAnimationFrame(()=>{const height=this.filterBarRef&&this.state.isFiltersVisible?this.filterBarRef.clientHeight:0;if(this.filterBarWrapperRef){this.filterBarWrapperRef.setAttribute("style","height: ".concat(height,"px"))}})});search_bar_defineProperty(this,"ro",new ResizeObserver_default.a(this.setFilterBarHeight));search_bar_defineProperty(this,"onSave",function(){var _ref=search_bar_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedQueryMeta,saveAsNew=false){var savedQueryAttributes,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.state.query){_context.next=2;break}return _context.abrupt("return");case 2:savedQueryAttributes={title:savedQueryMeta.title,description:savedQueryMeta.description,query:_this.state.query};if(savedQueryMeta.shouldIncludeFilters){savedQueryAttributes.filters=_this.props.filters}if(savedQueryMeta.shouldIncludeTimefilter&&_this.state.dateRangeTo!==undefined&&_this.state.dateRangeFrom!==undefined&&_this.props.refreshInterval!==undefined&&_this.props.isRefreshPaused!==undefined){savedQueryAttributes.timefilter={from:_this.state.dateRangeFrom,to:_this.state.dateRangeTo,refreshInterval:{value:_this.props.refreshInterval,pause:_this.props.isRefreshPaused}}}_context.prev=5;if(!(_this.props.savedQuery&&!saveAsNew)){_context.next=12;break}_context.next=9;return _this.savedQueryService.saveQuery(savedQueryAttributes,{overwrite:true});case 9:response=_context.sent;_context.next=15;break;case 12:_context.next=14;return _this.savedQueryService.saveQuery(savedQueryAttributes);case 14:response=_context.sent;case 15:_this.services.notifications.toasts.addSuccess('Your query "'.concat(response.attributes.title,'" was saved'));_this.setState({showSaveQueryModal:false,showSaveNewQueryModal:false});if(_this.props.onSaved){_this.props.onSaved(response)}_context.next=24;break;case 20:_context.prev=20;_context.t0=_context["catch"](5);_this.services.notifications.toasts.addDanger("An error occured while saving your query: ".concat(_context.t0.message));throw _context.t0;case 24:case"end":return _context.stop()}}),_callee,null,[[5,20]])})));return function(_x){return _ref.apply(this,arguments)}}());search_bar_defineProperty(this,"onInitiateSave",()=>{this.setState({showSaveQueryModal:true})});search_bar_defineProperty(this,"onInitiateSaveNew",()=>{this.setState({showSaveNewQueryModal:true})});search_bar_defineProperty(this,"onQueryBarChange",queryAndDateRange=>{this.setState({query:queryAndDateRange.query,dateRangeFrom:queryAndDateRange.dateRange.from,dateRangeTo:queryAndDateRange.dateRange.to});if(this.props.onQueryChange){this.props.onQueryChange(queryAndDateRange)}});search_bar_defineProperty(this,"onQueryBarSubmit",queryAndDateRange=>{this.setState({query:queryAndDateRange.query,dateRangeFrom:queryAndDateRange.dateRange&&queryAndDateRange.dateRange.from||this.state.dateRangeFrom,dateRangeTo:queryAndDateRange.dateRange&&queryAndDateRange.dateRange.to||this.state.dateRangeTo},()=>{if(this.props.onQuerySubmit){this.props.onQuerySubmit({query:this.state.query,dateRange:{from:this.state.dateRangeFrom,to:this.state.dateRangeTo}})}if(this.props.trackUiMetric){this.props.trackUiMetric(METRIC_TYPE.CLICK,"".concat(this.services.appName,":query_submitted"))}})});search_bar_defineProperty(this,"onLoadSavedQuery",savedQuery=>{const dateRangeFrom=Object(external_kbnSharedDeps_Lodash_["get"])(savedQuery,"attributes.timefilter.from",this.state.dateRangeFrom);const dateRangeTo=Object(external_kbnSharedDeps_Lodash_["get"])(savedQuery,"attributes.timefilter.to",this.state.dateRangeTo);this.setState({query:savedQuery.attributes.query,dateRangeFrom:dateRangeFrom,dateRangeTo:dateRangeTo});if(this.props.onSavedQueryUpdated){this.props.onSavedQueryUpdated(savedQuery)}})}static getDerivedStateFromProps(nextProps,prevState){if(Object(external_kbnSharedDeps_Lodash_["isEqual"])(prevState.currentProps,nextProps)){return null}let nextQuery=null;if(nextProps.query&&nextProps.query.query!==Object(external_kbnSharedDeps_Lodash_["get"])(prevState,"currentProps.query.query")){nextQuery={query:nextProps.query.query,language:nextProps.query.language}}else if(nextProps.query&&prevState.query&&nextProps.query.language!==prevState.query.language){nextQuery={query:"",language:nextProps.query.language}}let nextDateRange=null;if(nextProps.dateRangeFrom!==Object(external_kbnSharedDeps_Lodash_["get"])(prevState,"currentProps.dateRangeFrom")||nextProps.dateRangeTo!==Object(external_kbnSharedDeps_Lodash_["get"])(prevState,"currentProps.dateRangeTo")){nextDateRange={dateRangeFrom:nextProps.dateRangeFrom,dateRangeTo:nextProps.dateRangeTo}}const nextState={currentProps:nextProps};if(nextQuery){nextState.query=nextQuery}if(nextDateRange){nextState.dateRangeFrom=nextDateRange.dateRangeFrom;nextState.dateRangeTo=nextDateRange.dateRangeTo}return nextState}shouldRenderQueryBar(){const showDatePicker=this.props.showDatePicker||this.props.showAutoRefreshOnly;const showQueryInput=this.props.showQueryInput&&this.props.indexPatterns&&this.state.query;return this.props.showQueryBar&&(showDatePicker||showQueryInput)}shouldRenderFilterBar(){return this.props.showFilterBar&&this.props.filters&&this.props.indexPatterns&&Object(external_kbnSharedDeps_Lodash_["compact"])(this.props.indexPatterns).length>0}shouldRenderTimeFilterInSavedQueryForm(){const _this$props=this.props,dateRangeFrom=_this$props.dateRangeFrom,dateRangeTo=_this$props.dateRangeTo,showDatePicker=_this$props.showDatePicker;return showDatePicker||!showDatePicker&&dateRangeFrom!==undefined&&dateRangeTo!==undefined}componentDidMount(){if(this.filterBarRef){this.setFilterBarHeight();this.ro.observe(this.filterBarRef)}}componentDidUpdate(){if(this.filterBarRef){this.setFilterBarHeight();this.ro.unobserve(this.filterBarRef)}}render(){const savedQueryManagement=this.state.query&&this.props.onClearSavedQuery&&external_kbnSharedDeps_React_default.a.createElement(SavedQueryManagementComponent,{showSaveQuery:this.props.showSaveQuery,loadedSavedQuery:this.props.savedQuery,onSave:this.onInitiateSave,onSaveAsNew:this.onInitiateSaveNew,onLoad:this.onLoadSavedQuery,savedQueryService:this.savedQueryService,onClearSavedQuery:this.props.onClearSavedQuery});let queryBar;if(this.shouldRenderQueryBar()){queryBar=external_kbnSharedDeps_React_default.a.createElement(query_bar_top_row["default"],{timeHistory:this.props.timeHistory,query:this.state.query,screenTitle:this.props.screenTitle,onSubmit:this.onQueryBarSubmit,indexPatterns:this.props.indexPatterns,isLoading:this.props.isLoading,prepend:this.props.showFilterBar?savedQueryManagement:undefined,showDatePicker:this.props.showDatePicker,dateRangeFrom:this.state.dateRangeFrom,dateRangeTo:this.state.dateRangeTo,isRefreshPaused:this.props.isRefreshPaused,refreshInterval:this.props.refreshInterval,showAutoRefreshOnly:this.props.showAutoRefreshOnly,showQueryInput:this.props.showQueryInput,onRefresh:this.props.onRefresh,onRefreshChange:this.props.onRefreshChange,onChange:this.onQueryBarChange,isDirty:this.isDirty(),customSubmitButton:this.props.customSubmitButton?this.props.customSubmitButton:undefined,dataTestSubj:this.props.dataTestSubj,indicateNoData:this.props.indicateNoData})}let filterBar;if(this.shouldRenderFilterBar()){const filterGroupClasses=classnames_default()("globalFilterGroup__wrapper",{"globalFilterGroup__wrapper-isVisible":this.state.isFiltersVisible});filterBar=external_kbnSharedDeps_React_default.a.createElement("div",{id:"GlobalFilterGroup",ref:node=>{this.filterBarWrapperRef=node},className:filterGroupClasses},external_kbnSharedDeps_React_default.a.createElement("div",{ref:node=>{this.filterBarRef=node}},external_kbnSharedDeps_React_default.a.createElement(FilterBar,{className:"globalFilterGroup__filterBar",filters:this.props.filters,onFiltersUpdated:this.props.onFiltersUpdated,indexPatterns:this.props.indexPatterns,appName:this.services.appName,trackUiMetric:this.props.trackUiMetric})))}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"globalQueryBar","data-test-subj":"globalQueryBar"},queryBar,filterBar,this.state.showSaveQueryModal?external_kbnSharedDeps_React_default.a.createElement(SaveQueryForm,{savedQuery:this.props.savedQuery?this.props.savedQuery.attributes:undefined,savedQueryService:this.savedQueryService,onSave:this.onSave,onClose:()=>this.setState({showSaveQueryModal:false}),showFilterOption:this.props.showFilterBar,showTimeFilterOption:this.shouldRenderTimeFilterInSavedQueryForm()}):null,this.state.showSaveNewQueryModal?external_kbnSharedDeps_React_default.a.createElement(SaveQueryForm,{savedQueryService:this.savedQueryService,onSave:savedQueryMeta=>this.onSave(savedQueryMeta,true),onClose:()=>this.setState({showSaveNewQueryModal:false}),showFilterOption:this.props.showFilterBar,showTimeFilterOption:this.shouldRenderTimeFilterInSavedQueryForm()}):null)}}search_bar_defineProperty(search_bar_SearchBarUI,"defaultProps",{showQueryBar:true,showFilterBar:true,showDatePicker:true,showAutoRefreshOnly:false});var search_bar=__webpack_exports__["default"]=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(Object(public_["withKibana"])(search_bar_SearchBarUI))},224:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return isOneOfOperator}));__webpack_require__.d(__webpack_exports__,"b",(function(){return existsOperator}));__webpack_require__.d(__webpack_exports__,"a",(function(){return FILTER_OPERATORS}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);var _common_es_query_filters__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10);const isOperator={message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("data.filter.filterEditor.isOperatorOptionLabel",{defaultMessage:"is"}),type:_common_es_query_filters__WEBPACK_IMPORTED_MODULE_1__["FILTERS"].PHRASE,negate:false};const isNotOperator={message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("data.filter.filterEditor.isNotOperatorOptionLabel",{defaultMessage:"is not"}),type:_common_es_query_filters__WEBPACK_IMPORTED_MODULE_1__["FILTERS"].PHRASE,negate:true};const isOneOfOperator={message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("data.filter.filterEditor.isOneOfOperatorOptionLabel",{defaultMessage:"is one of"}),type:_common_es_query_filters__WEBPACK_IMPORTED_MODULE_1__["FILTERS"].PHRASES,negate:false,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]};const isNotOneOfOperator={message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("data.filter.filterEditor.isNotOneOfOperatorOptionLabel",{defaultMessage:"is not one of"}),type:_common_es_query_filters__WEBPACK_IMPORTED_MODULE_1__["FILTERS"].PHRASES,negate:true,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]};const isBetweenOperator={message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("data.filter.filterEditor.isBetweenOperatorOptionLabel",{defaultMessage:"is between"}),type:_common_es_query_filters__WEBPACK_IMPORTED_MODULE_1__["FILTERS"].RANGE,negate:false,fieldTypes:["number","date","ip"]};const isNotBetweenOperator={message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("data.filter.filterEditor.isNotBetweenOperatorOptionLabel",{defaultMessage:"is not between"}),type:_common_es_query_filters__WEBPACK_IMPORTED_MODULE_1__["FILTERS"].RANGE,negate:true,fieldTypes:["number","date","ip"]};const existsOperator={message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("data.filter.filterEditor.existsOperatorOptionLabel",{defaultMessage:"exists"}),type:_common_es_query_filters__WEBPACK_IMPORTED_MODULE_1__["FILTERS"].EXISTS,negate:false};const doesNotExistOperator={message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("data.filter.filterEditor.doesNotExistOperatorOptionLabel",{defaultMessage:"does not exist"}),type:_common_es_query_filters__WEBPACK_IMPORTED_MODULE_1__["FILTERS"].EXISTS,negate:true};const FILTER_OPERATORS=[isOperator,isNotOperator,isOneOfOperator,isNotOneOfOperator,isBetweenOperator,isNotBetweenOperator,existsOperator,doesNotExistOperator]},225:function(module,exports){},228:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return QueryBarTopRow}));var elastic_datemath=__webpack_require__(16);var elastic_datemath_default=__webpack_require__.n(elastic_datemath);var classnames=__webpack_require__(223);var classnames_default=__webpack_require__.n(classnames);var external_kbnSharedDeps_React_=__webpack_require__(3);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(17);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(67);var public_=__webpack_require__(24);var query_string_input=__webpack_require__(227);var common=__webpack_require__(1);var public_query=__webpack_require__(13);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const NO_DATA_POPOVER_STORAGE_KEY="data.noDataPopover";function NoDataPopover({showNoDataPopover:showNoDataPopover,storage:storage,children:children}){const _useState=Object(external_kbnSharedDeps_React_["useState"])(()=>Boolean(storage.get(NO_DATA_POPOVER_STORAGE_KEY))),_useState2=_slicedToArray(_useState,2),noDataPopoverDismissed=_useState2[0],setNoDataPopoverDismissed=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=_slicedToArray(_useState3,2),noDataPopoverVisible=_useState4[0],setNoDataPopoverVisible=_useState4[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(showNoDataPopover&&!noDataPopoverDismissed){setNoDataPopoverVisible(true)}},[noDataPopoverDismissed,showNoDataPopover]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTourStep"],{onFinish:()=>{},closePopover:()=>{setNoDataPopoverVisible(false)},content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",{style:{maxWidth:300}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.noDataPopover.content",{defaultMessage:"This time range doesn't contain any data. Increase or adjust the time range to see more fields and create charts."}))),minWidth:300,anchorPosition:"downCenter",anchorClassName:"eui-displayBlock",step:1,stepsTotal:1,isStepOpen:noDataPopoverVisible,subtitle:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.noDataPopover.subtitle",{defaultMessage:"Tip"}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.noDataPopover.title",{defaultMessage:"Empty dataset"}),footerAction:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",flush:"right",color:"text","data-test-subj":"noDataPopoverDismissButton",onClick:()=>{storage.set(NO_DATA_POPOVER_STORAGE_KEY,true);setNoDataPopoverDismissed(true);setNoDataPopoverVisible(false)}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.noDataPopover.dismissAction",{defaultMessage:"Don't show again"}))},external_kbnSharedDeps_React_default.a.createElement("div",{onFocus:()=>{setNoDataPopoverVisible(false)}},children))}function query_bar_top_row_slicedToArray(arr,i){return query_bar_top_row_arrayWithHoles(arr)||query_bar_top_row_iterableToArrayLimit(arr,i)||query_bar_top_row_unsupportedIterableToArray(arr,i)||query_bar_top_row_nonIterableRest()}function query_bar_top_row_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function query_bar_top_row_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return query_bar_top_row_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return query_bar_top_row_arrayLikeToArray(o,minLen)}function query_bar_top_row_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function query_bar_top_row_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function query_bar_top_row_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const QueryStringInput=Object(public_["withKibana"])(query_string_input["default"]);function QueryBarTopRow(props){const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=query_bar_top_row_slicedToArray(_useState,2),isDateRangeInvalid=_useState2[0],setIsDateRangeInvalid=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=query_bar_top_row_slicedToArray(_useState3,2),isQueryInputFocused=_useState4[0],setIsQueryInputFocused=_useState4[1];const kibana=Object(public_["useKibana"])();const _kibana$services=kibana.services,uiSettings=_kibana$services.uiSettings,notifications=_kibana$services.notifications,storage=_kibana$services.storage,appName=_kibana$services.appName,docLinks=_kibana$services.docLinks;const kueryQuerySyntaxLink=docLinks.links.query.kueryQuerySyntax;const queryLanguage=props.query&&props.query.language;const persistedLog=external_kbnSharedDeps_React_default.a.useMemo(()=>queryLanguage&&uiSettings&&storage&&appName?Object(public_query["v"])(uiSettings,storage,appName,queryLanguage):undefined,[appName,queryLanguage,uiSettings,storage]);function onClickSubmitButton(event){if(persistedLog&&props.query){persistedLog.add(props.query.query)}event.preventDefault();onSubmit({query:props.query,dateRange:getDateRange()})}function getDateRange(){const defaultTimeSetting=uiSettings.get(common["UI_SETTINGS"].TIMEPICKER_TIME_DEFAULTS);return{from:props.dateRangeFrom||defaultTimeSetting.from,to:props.dateRangeTo||defaultTimeSetting.to}}function onQueryChange(query){props.onChange({query:query,dateRange:getDateRange()})}function onChangeQueryInputFocus(isFocused){setIsQueryInputFocused(isFocused)}function onTimeChange({start:start,end:end,isInvalid:isInvalid,isQuickSelection:isQuickSelection}){setIsDateRangeInvalid(isInvalid);const retVal={query:props.query,dateRange:{from:start,to:end}};if(isQuickSelection){props.onSubmit(retVal)}else{props.onChange(retVal)}}function onRefresh({start:start,end:end}){const retVal={dateRange:{from:start,to:end}};if(props.onRefresh){props.onRefresh(retVal)}}function onSubmit({query:query,dateRange:dateRange}){handleLuceneSyntaxWarning();if(props.timeHistory){props.timeHistory.add(dateRange)}props.onSubmit({query:query,dateRange:dateRange})}function onInputSubmit(query){onSubmit({query:query,dateRange:getDateRange()})}function toAbsoluteString(value,roundUp=false){const valueAsMoment=elastic_datemath_default.a.parse(value,{roundUp:roundUp});if(!valueAsMoment){return value}return valueAsMoment.toISOString()}function renderQueryInput(){if(!shouldRenderQueryInput())return;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(QueryStringInput,{disableAutoFocus:props.disableAutoFocus,indexPatterns:props.indexPatterns,prepend:props.prepend,query:props.query,screenTitle:props.screenTitle,onChange:onQueryChange,onChangeQueryInputFocus:onChangeQueryInputFocus,onSubmit:onInputSubmit,persistedLog:persistedLog,dataTestSubj:props.dataTestSubj}))}function renderSharingMetaFields(){const _getDateRange=getDateRange(),from=_getDateRange.from,to=_getDateRange.to;const dateRangePretty=Object(external_kbnSharedDeps_ElasticEui_["prettyDuration"])(toAbsoluteString(from),toAbsoluteString(to),[],uiSettings.get("dateFormat"));return external_kbnSharedDeps_React_default.a.createElement("div",{"data-shared-timefilter-duration":dateRangePretty,"data-test-subj":"dataSharedTimefilterDuration"})}function shouldRenderDatePicker(){return Boolean(props.showDatePicker||props.showAutoRefreshOnly)}function shouldRenderQueryInput(){return Boolean(props.showQueryInput&&props.indexPatterns&&props.query&&storage)}function renderUpdateButton(){const button=props.customSubmitButton?external_kbnSharedDeps_React_default.a.cloneElement(props.customSubmitButton,{onClick:onClickSubmitButton}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperUpdateButton"],{needsUpdate:props.isDirty,isDisabled:isDateRangeInvalid,isLoading:props.isLoading,onClick:onClickSubmitButton,"data-test-subj":"querySubmitButton"});if(!shouldRenderDatePicker()){return button}return external_kbnSharedDeps_React_default.a.createElement(NoDataPopover,{storage:storage,showNoDataPopover:props.indicateNoData},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,gutterSize:"s"},renderDatePicker(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},button)))}function renderDatePicker(){if(!shouldRenderDatePicker()){return null}let recentlyUsedRanges;if(props.timeHistory){recentlyUsedRanges=props.timeHistory.get().map(({from:from,to:to})=>({start:from,end:to}))}const commonlyUsedRanges=uiSettings.get(common["UI_SETTINGS"].TIMEPICKER_QUICK_RANGES).map(({from:from,to:to,display:display})=>({start:from,end:to,label:display}));const wrapperClasses=classnames_default()("kbnQueryBar__datePickerWrapper",{"kbnQueryBar__datePickerWrapper-isHidden":isQueryInputFocused});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:wrapperClasses},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperDatePicker"],{start:props.dateRangeFrom,end:props.dateRangeTo,isPaused:props.isRefreshPaused,refreshInterval:props.refreshInterval,onTimeChange:onTimeChange,onRefresh:onRefresh,onRefreshChange:props.onRefreshChange,showUpdateButton:false,recentlyUsedRanges:recentlyUsedRanges,commonlyUsedRanges:commonlyUsedRanges,dateFormat:uiSettings.get("dateFormat"),isAutoRefreshOnly:props.showAutoRefreshOnly,className:"kbnQueryBar__datePicker"}))}function handleLuceneSyntaxWarning(){if(!props.query)return;const _props$query=props.query,query=_props$query.query,language=_props$query.language;if(language==="kuery"&&typeof query==="string"&&(!storage||!storage.get("kibana.luceneSyntaxWarningOptOut"))&&Object(common["doesKueryExpressionHaveLuceneSyntaxError"])(query)){const toast=notifications.toasts.addWarning({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("data.query.queryBar.luceneSyntaxWarningTitle",{defaultMessage:"Lucene syntax warning"}),text:Object(public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.query.queryBar.luceneSyntaxWarningMessage",defaultMessage:"It looks like you may be trying to use Lucene query syntax, although you have Kibana Query Language (KQL) selected. Please review the KQL docs {link}.",values:{link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:kueryQuerySyntaxLink,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.query.queryBar.syntaxOptionsDescription.docsLinkText",defaultMessage:"here"}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",onClick:()=>onLuceneSyntaxWarningOptOut(toast)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"data.query.queryBar.luceneSyntaxWarningOptOutText",defaultMessage:"Don't show again"}))))))})}}function onLuceneSyntaxWarningOptOut(toast){if(!storage)return;storage.set("kibana.luceneSyntaxWarningOptOut",true);notifications.toasts.remove(toast)}const classes=classnames_default()("kbnQueryBar",{"kbnQueryBar--withDatePicker":props.showDatePicker});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{className:classes,responsive:!!props.showDatePicker,gutterSize:"s",justifyContent:"flexEnd"},renderQueryInput(),renderSharingMetaFields(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},renderUpdateButton()))}QueryBarTopRow.defaultProps={showQueryInput:true,showDatePicker:true,showAutoRefreshOnly:false}},229:function(module,exports,__webpack_require__){(function(global){(function(global,factory){true?module.exports=factory():undefined})(this,(function(){"use strict";var MapShim=function(){if(typeof Map!=="undefined"){return Map}function getIndex(arr,key){var result=-1;arr.some((function(entry,index){if(entry[0]===key){result=index;return true}return false}));return result}return function(){function class_1(){this.__entries__=[]}Object.defineProperty(class_1.prototype,"size",{get:function(){return this.__entries__.length},enumerable:true,configurable:true});class_1.prototype.get=function(key){var index=getIndex(this.__entries__,key);var entry=this.__entries__[index];return entry&&entry[1]};class_1.prototype.set=function(key,value){var index=getIndex(this.__entries__,key);if(~index){this.__entries__[index][1]=value}else{this.__entries__.push([key,value])}};class_1.prototype.delete=function(key){var entries=this.__entries__;var index=getIndex(entries,key);if(~index){entries.splice(index,1)}};class_1.prototype.has=function(key){return!!~getIndex(this.__entries__,key)};class_1.prototype.clear=function(){this.__entries__.splice(0)};class_1.prototype.forEach=function(callback,ctx){if(ctx===void 0){ctx=null}for(var _i=0,_a=this.__entries__;_i<_a.length;_i++){var entry=_a[_i];callback.call(ctx,entry[1],entry[0])}};return class_1}()}();var isBrowser=typeof window!=="undefined"&&typeof document!=="undefined"&&window.document===document;var global$1=function(){if(typeof global!=="undefined"&&global.Math===Math){return global}if(typeof self!=="undefined"&&self.Math===Math){return self}if(typeof window!=="undefined"&&window.Math===Math){return window}return Function("return this")()}();var requestAnimationFrame$1=function(){if(typeof requestAnimationFrame==="function"){return requestAnimationFrame.bind(global$1)}return function(callback){return setTimeout((function(){return callback(Date.now())}),1e3/60)}}();var trailingTimeout=2;function throttle(callback,delay){var leadingCall=false,trailingCall=false,lastCallTime=0;function resolvePending(){if(leadingCall){leadingCall=false;callback()}if(trailingCall){proxy()}}function timeoutCallback(){requestAnimationFrame$1(resolvePending)}function proxy(){var timeStamp=Date.now();if(leadingCall){if(timeStamp-lastCallTime<trailingTimeout){return}trailingCall=true}else{leadingCall=true;trailingCall=false;setTimeout(timeoutCallback,delay)}lastCallTime=timeStamp}return proxy}var REFRESH_DELAY=20;var transitionKeys=["top","right","bottom","left","width","height","size","weight"];var mutationObserverSupported=typeof MutationObserver!=="undefined";var ResizeObserverController=function(){function ResizeObserverController(){this.connected_=false;this.mutationEventsAdded_=false;this.mutationsObserver_=null;this.observers_=[];this.onTransitionEnd_=this.onTransitionEnd_.bind(this);this.refresh=throttle(this.refresh.bind(this),REFRESH_DELAY)}ResizeObserverController.prototype.addObserver=function(observer){if(!~this.observers_.indexOf(observer)){this.observers_.push(observer)}if(!this.connected_){this.connect_()}};ResizeObserverController.prototype.removeObserver=function(observer){var observers=this.observers_;var index=observers.indexOf(observer);if(~index){observers.splice(index,1)}if(!observers.length&&this.connected_){this.disconnect_()}};ResizeObserverController.prototype.refresh=function(){var changesDetected=this.updateObservers_();if(changesDetected){this.refresh()}};ResizeObserverController.prototype.updateObservers_=function(){var activeObservers=this.observers_.filter((function(observer){return observer.gatherActive(),observer.hasActive()}));activeObservers.forEach((function(observer){return observer.broadcastActive()}));return activeObservers.length>0};ResizeObserverController.prototype.connect_=function(){if(!isBrowser||this.connected_){return}document.addEventListener("transitionend",this.onTransitionEnd_);window.addEventListener("resize",this.refresh);if(mutationObserverSupported){this.mutationsObserver_=new MutationObserver(this.refresh);this.mutationsObserver_.observe(document,{attributes:true,childList:true,characterData:true,subtree:true})}else{document.addEventListener("DOMSubtreeModified",this.refresh);this.mutationEventsAdded_=true}this.connected_=true};ResizeObserverController.prototype.disconnect_=function(){if(!isBrowser||!this.connected_){return}document.removeEventListener("transitionend",this.onTransitionEnd_);window.removeEventListener("resize",this.refresh);if(this.mutationsObserver_){this.mutationsObserver_.disconnect()}if(this.mutationEventsAdded_){document.removeEventListener("DOMSubtreeModified",this.refresh)}this.mutationsObserver_=null;this.mutationEventsAdded_=false;this.connected_=false};ResizeObserverController.prototype.onTransitionEnd_=function(_a){var _b=_a.propertyName,propertyName=_b===void 0?"":_b;var isReflowProperty=transitionKeys.some((function(key){return!!~propertyName.indexOf(key)}));if(isReflowProperty){this.refresh()}};ResizeObserverController.getInstance=function(){if(!this.instance_){this.instance_=new ResizeObserverController}return this.instance_};ResizeObserverController.instance_=null;return ResizeObserverController}();var defineConfigurable=function(target,props){for(var _i=0,_a=Object.keys(props);_i<_a.length;_i++){var key=_a[_i];Object.defineProperty(target,key,{value:props[key],enumerable:false,writable:false,configurable:true})}return target};var getWindowOf=function(target){var ownerGlobal=target&&target.ownerDocument&&target.ownerDocument.defaultView;return ownerGlobal||global$1};var emptyRect=createRectInit(0,0,0,0);function toFloat(value){return parseFloat(value)||0}function getBordersSize(styles){var positions=[];for(var _i=1;_i<arguments.length;_i++){positions[_i-1]=arguments[_i]}return positions.reduce((function(size,position){var value=styles["border-"+position+"-width"];return size+toFloat(value)}),0)}function getPaddings(styles){var positions=["top","right","bottom","left"];var paddings={};for(var _i=0,positions_1=positions;_i<positions_1.length;_i++){var position=positions_1[_i];var value=styles["padding-"+position];paddings[position]=toFloat(value)}return paddings}function getSVGContentRect(target){var bbox=target.getBBox();return createRectInit(0,0,bbox.width,bbox.height)}function getHTMLElementContentRect(target){var clientWidth=target.clientWidth,clientHeight=target.clientHeight;if(!clientWidth&&!clientHeight){return emptyRect}var styles=getWindowOf(target).getComputedStyle(target);var paddings=getPaddings(styles);var horizPad=paddings.left+paddings.right;var vertPad=paddings.top+paddings.bottom;var width=toFloat(styles.width),height=toFloat(styles.height);if(styles.boxSizing==="border-box"){if(Math.round(width+horizPad)!==clientWidth){width-=getBordersSize(styles,"left","right")+horizPad}if(Math.round(height+vertPad)!==clientHeight){height-=getBordersSize(styles,"top","bottom")+vertPad}}if(!isDocumentElement(target)){var vertScrollbar=Math.round(width+horizPad)-clientWidth;var horizScrollbar=Math.round(height+vertPad)-clientHeight;if(Math.abs(vertScrollbar)!==1){width-=vertScrollbar}if(Math.abs(horizScrollbar)!==1){height-=horizScrollbar}}return createRectInit(paddings.left,paddings.top,width,height)}var isSVGGraphicsElement=function(){if(typeof SVGGraphicsElement!=="undefined"){return function(target){return target instanceof getWindowOf(target).SVGGraphicsElement}}return function(target){return target instanceof getWindowOf(target).SVGElement&&typeof target.getBBox==="function"}}();function isDocumentElement(target){return target===getWindowOf(target).document.documentElement}function getContentRect(target){if(!isBrowser){return emptyRect}if(isSVGGraphicsElement(target)){return getSVGContentRect(target)}return getHTMLElementContentRect(target)}function createReadOnlyRect(_a){var x=_a.x,y=_a.y,width=_a.width,height=_a.height;var Constr=typeof DOMRectReadOnly!=="undefined"?DOMRectReadOnly:Object;var rect=Object.create(Constr.prototype);defineConfigurable(rect,{x:x,y:y,width:width,height:height,top:y,right:x+width,bottom:height+y,left:x});return rect}function createRectInit(x,y,width,height){return{x:x,y:y,width:width,height:height}}var ResizeObservation=function(){function ResizeObservation(target){this.broadcastWidth=0;this.broadcastHeight=0;this.contentRect_=createRectInit(0,0,0,0);this.target=target}ResizeObservation.prototype.isActive=function(){var rect=getContentRect(this.target);this.contentRect_=rect;return rect.width!==this.broadcastWidth||rect.height!==this.broadcastHeight};ResizeObservation.prototype.broadcastRect=function(){var rect=this.contentRect_;this.broadcastWidth=rect.width;this.broadcastHeight=rect.height;return rect};return ResizeObservation}();var ResizeObserverEntry=function(){function ResizeObserverEntry(target,rectInit){var contentRect=createReadOnlyRect(rectInit);defineConfigurable(this,{target:target,contentRect:contentRect})}return ResizeObserverEntry}();var ResizeObserverSPI=function(){function ResizeObserverSPI(callback,controller,callbackCtx){this.activeObservations_=[];this.observations_=new MapShim;if(typeof callback!=="function"){throw new TypeError("The callback provided as parameter 1 is not a function.")}this.callback_=callback;this.controller_=controller;this.callbackCtx_=callbackCtx}ResizeObserverSPI.prototype.observe=function(target){if(!arguments.length){throw new TypeError("1 argument required, but only 0 present.")}if(typeof Element==="undefined"||!(Element instanceof Object)){return}if(!(target instanceof getWindowOf(target).Element)){throw new TypeError('parameter 1 is not of type "Element".')}var observations=this.observations_;if(observations.has(target)){return}observations.set(target,new ResizeObservation(target));this.controller_.addObserver(this);this.controller_.refresh()};ResizeObserverSPI.prototype.unobserve=function(target){if(!arguments.length){throw new TypeError("1 argument required, but only 0 present.")}if(typeof Element==="undefined"||!(Element instanceof Object)){return}if(!(target instanceof getWindowOf(target).Element)){throw new TypeError('parameter 1 is not of type "Element".')}var observations=this.observations_;if(!observations.has(target)){return}observations.delete(target);if(!observations.size){this.controller_.removeObserver(this)}};ResizeObserverSPI.prototype.disconnect=function(){this.clearActive();this.observations_.clear();this.controller_.removeObserver(this)};ResizeObserverSPI.prototype.gatherActive=function(){var _this=this;this.clearActive();this.observations_.forEach((function(observation){if(observation.isActive()){_this.activeObservations_.push(observation)}}))};ResizeObserverSPI.prototype.broadcastActive=function(){if(!this.hasActive()){return}var ctx=this.callbackCtx_;var entries=this.activeObservations_.map((function(observation){return new ResizeObserverEntry(observation.target,observation.broadcastRect())}));this.callback_.call(ctx,entries,ctx);this.clearActive()};ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)};ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0};return ResizeObserverSPI}();var observers=typeof WeakMap!=="undefined"?new WeakMap:new MapShim;var ResizeObserver=function(){function ResizeObserver(callback){if(!(this instanceof ResizeObserver)){throw new TypeError("Cannot call a class as a function.")}if(!arguments.length){throw new TypeError("1 argument required, but only 0 present.")}var controller=ResizeObserverController.getInstance();var observer=new ResizeObserverSPI(callback,controller,this);observers.set(this,observer)}return ResizeObserver}();["observe","unobserve","disconnect"].forEach((function(method){ResizeObserver.prototype[method]=function(){var _a;return(_a=observers.get(this))[method].apply(_a,arguments)}}));var index=function(){if(typeof global$1.ResizeObserver!=="undefined"){return global$1.ResizeObserver}return ResizeObserver}();return index}))}).call(this,__webpack_require__(102))}}]);