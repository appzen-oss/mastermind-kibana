/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["securitySolution_bundle_jsonpfunction"]=window["securitySolution_bundle_jsonpfunction"]||[]).push([[8],{1097:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return ResilientSettingFieldsComponent}));var external_kbnSharedDeps_React_=__webpack_require__(14);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(51);var kibana=__webpack_require__(80);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const BASE_ACTION_API_PATH="/api/actions";function getIncidentTypes(_x){return _getIncidentTypes.apply(this,arguments)}function _getIncidentTypes(){_getIncidentTypes=_asyncToGenerator(regeneratorRuntime.mark((function _callee({http:http,signal:signal,connectorId:connectorId}){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",http.post("".concat(BASE_ACTION_API_PATH,"/action/").concat(connectorId,"/_execute"),{body:JSON.stringify({params:{subAction:"incidentTypes",subActionParams:{}}}),signal:signal}));case 1:case"end":return _context.stop()}}),_callee)})));return _getIncidentTypes.apply(this,arguments)}function getSeverity(_x2){return _getSeverity.apply(this,arguments)}function _getSeverity(){_getSeverity=_asyncToGenerator(regeneratorRuntime.mark((function _callee2({http:http,signal:signal,connectorId:connectorId}){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",http.post("".concat(BASE_ACTION_API_PATH,"/action/").concat(connectorId,"/_execute"),{body:JSON.stringify({params:{subAction:"severity",subActionParams:{}}}),signal:signal}));case 1:case"end":return _context2.stop()}}),_callee2)})));return _getSeverity.apply(this,arguments)}var translations=__webpack_require__(345);function use_get_incident_types_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_get_incident_types_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_get_incident_types_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_get_incident_types_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useGetIncidentTypes=({http:http,toastNotifications:toastNotifications,connector:connector})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=_slicedToArray(_useState3,2),incidentTypes=_useState4[0],setIncidentTypes=_useState4[1];const abortCtrl=Object(external_kbnSharedDeps_React_["useRef"])(new AbortController);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{let didCancel=false;const fetchData=function(){var _ref=use_get_incident_types_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var res,_res$data,_res$serviceMessage;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(connector){_context.next=3;break}setIsLoading(false);return _context.abrupt("return");case 3:abortCtrl.current=new AbortController;setIsLoading(true);_context.prev=5;_context.next=8;return getIncidentTypes({http:http,signal:abortCtrl.current.signal,connectorId:connector.id});case 8:res=_context.sent;if(!didCancel){setIsLoading(false);setIncidentTypes((_res$data=res.data)!==null&&_res$data!==void 0?_res$data:[]);if(res.status&&res.status==="error"){toastNotifications.addDanger({title:translations["a"],text:"".concat((_res$serviceMessage=res.serviceMessage)!==null&&_res$serviceMessage!==void 0?_res$serviceMessage:res.message)})}}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);if(!didCancel){setIsLoading(false);toastNotifications.addDanger({title:translations["a"],text:_context.t0.message})}case 15:case"end":return _context.stop()}}),_callee,null,[[5,12]])})));return function fetchData(){return _ref.apply(this,arguments)}}();abortCtrl.current.abort();fetchData();return()=>{didCancel=true;setIsLoading(false);abortCtrl.current.abort()}},[http,connector,toastNotifications]);return{incidentTypes:incidentTypes,isLoading:isLoading}};function use_get_severity_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_get_severity_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_get_severity_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_get_severity_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function use_get_severity_slicedToArray(arr,i){return use_get_severity_arrayWithHoles(arr)||use_get_severity_iterableToArrayLimit(arr,i)||use_get_severity_unsupportedIterableToArray(arr,i)||use_get_severity_nonIterableRest()}function use_get_severity_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_get_severity_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_get_severity_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_get_severity_arrayLikeToArray(o,minLen)}function use_get_severity_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_get_severity_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_get_severity_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useGetSeverity=({http:http,toastNotifications:toastNotifications,connector:connector})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(true),_useState2=use_get_severity_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=use_get_severity_slicedToArray(_useState3,2),severity=_useState4[0],setSeverity=_useState4[1];const abortCtrl=Object(external_kbnSharedDeps_React_["useRef"])(new AbortController);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{let didCancel=false;const fetchData=function(){var _ref=use_get_severity_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var res,_res$data,_res$serviceMessage;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(connector){_context.next=3;break}setIsLoading(false);return _context.abrupt("return");case 3:abortCtrl.current=new AbortController;setIsLoading(true);_context.prev=5;_context.next=8;return getSeverity({http:http,signal:abortCtrl.current.signal,connectorId:connector.id});case 8:res=_context.sent;if(!didCancel){setIsLoading(false);setSeverity((_res$data=res.data)!==null&&_res$data!==void 0?_res$data:[]);if(res.status&&res.status==="error"){toastNotifications.addDanger({title:translations["d"],text:"".concat((_res$serviceMessage=res.serviceMessage)!==null&&_res$serviceMessage!==void 0?_res$serviceMessage:res.message)})}}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);if(!didCancel){setIsLoading(false);toastNotifications.addDanger({title:translations["d"],text:_context.t0.message})}case 15:case"end":return _context.stop()}}),_callee,null,[[5,12]])})));return function fetchData(){return _ref.apply(this,arguments)}}();abortCtrl.current.abort();fetchData();return()=>{didCancel=true;setIsLoading(false);abortCtrl.current.abort()}},[http,connector,toastNotifications]);return{severity:severity,isLoading:isLoading}};var connectors=__webpack_require__(182);var card=__webpack_require__(271);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const ResilientSettingFieldsComponent=({isEdit:isEdit=true,fields:fields,connector:connector,onChange:onChange})=>{const _ref=fields!==null&&fields!==void 0?fields:{},_ref$incidentTypes=_ref.incidentTypes,incidentTypes=_ref$incidentTypes===void 0?null:_ref$incidentTypes,_ref$severityCode=_ref.severityCode,severityCode=_ref$severityCode===void 0?null:_ref$severityCode;const _useKibana$services=Object(kibana["h"])().services,http=_useKibana$services.http,notifications=_useKibana$services.notifications;const _useGetIncidentTypes=useGetIncidentTypes({http:http,toastNotifications:notifications.toasts,connector:connector}),isLoadingIncidentTypes=_useGetIncidentTypes.isLoading,allIncidentTypes=_useGetIncidentTypes.incidentTypes;const _useGetSeverity=useGetSeverity({http:http,toastNotifications:notifications.toasts,connector:connector}),isLoadingSeverity=_useGetSeverity.isLoading,severity=_useGetSeverity.severity;const severitySelectOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>severity.map(s=>({value:s.id.toString(),text:s.name})),[severity]);const incidentTypesComboBoxOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>allIncidentTypes?allIncidentTypes.map(type=>({label:type.name,value:type.id.toString()})):[],[allIncidentTypes]);const listItems=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{var _severity$find$name,_severity$find;return[...incidentTypes!=null&&incidentTypes.length>0?[{title:translations["b"],description:allIncidentTypes.filter(type=>incidentTypes.includes(type.id.toString())).map(type=>type.name).join(", ")}]:[],...severityCode!=null&&severityCode.length>0?[{title:translations["e"],description:(_severity$find$name=(_severity$find=severity.find(severityObj=>severityObj.id.toString()===severityCode))===null||_severity$find===void 0?void 0:_severity$find.name)!==null&&_severity$find$name!==void 0?_severity$find$name:""}]:[]]},[incidentTypes,severityCode,allIncidentTypes,severity]);const onFieldChange=Object(external_kbnSharedDeps_React_["useCallback"])((key,value)=>{onChange(_objectSpread(_objectSpread({},fields),{},{incidentTypes:incidentTypes,severityCode:severityCode,[key]:value}))},[incidentTypes,severityCode,onChange,fields]);const selectedIncidentTypesComboBoxOptionsMemo=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{const allIncidentTypesAsObject=allIncidentTypes.reduce((acc,type)=>_objectSpread(_objectSpread({},acc),{},{[type.id.toString()]:type.name}),{});return incidentTypes?incidentTypes.map(type=>({label:allIncidentTypesAsObject[type.toString()],value:type.toString()})).filter(type=>type.label!=null):[]},[allIncidentTypes,incidentTypes]);const onIncidentChange=Object(external_kbnSharedDeps_React_["useCallback"])(selectedOptions=>{onFieldChange("incidentTypes",selectedOptions.map(selectedOption=>{var _selectedOption$value;return(_selectedOption$value=selectedOption.value)!==null&&_selectedOption$value!==void 0?_selectedOption$value:selectedOption.label}))},[onFieldChange]);const onIncidentBlur=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{if(!incidentTypes){onFieldChange("incidentTypes",[])}},[incidentTypes,onFieldChange]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{onChange({incidentTypes:incidentTypes,severityCode:severityCode})},[]);return isEdit?external_kbnSharedDeps_React_default.a.createElement("span",{"data-test-subj":"connector-settings-resilient"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:translations["b"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{"data-test-subj":"incidentTypeComboBox",fullWidth:true,isClearable:true,isDisabled:isLoadingIncidentTypes,isLoading:isLoadingIncidentTypes,onBlur:onIncidentBlur,onChange:onIncidentChange,options:incidentTypesComboBoxOptions,placeholder:translations["c"],selectedOptions:selectedIncidentTypesComboBoxOptionsMemo})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:translations["e"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{"data-test-subj":"severitySelect",disabled:isLoadingSeverity,fullWidth:true,hasNoInitialSelection:true,isLoading:isLoadingSeverity,onChange:e=>onFieldChange("severityCode",e.target.value),options:severitySelectOptions,value:severityCode!==null&&severityCode!==void 0?severityCode:undefined})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})):external_kbnSharedDeps_React_default.a.createElement(card["a"],{connectorType:connectors["c"].resilient,isLoading:isLoadingIncidentTypes||isLoadingSeverity,listItems:listItems,title:connector.name})}},271:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ConnectorCard}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(51);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__);var styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(52);var styled_components__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_2__);var _common_lib_connectors_config__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(270);const StyledText=styled_components__WEBPACK_IMPORTED_MODULE_2___default.a.span.withConfig({displayName:"StyledText",componentId:"ldy3lw-0"})(["span{display:block;}"]);const ConnectorCardDisplay=({connectorType:connectorType,title:title,listItems:listItems,isLoading:isLoading})=>{const description=Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(()=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(StyledText,null,listItems.length>0&&listItems.map((item,i)=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{"data-test-subj":"card-list-item",key:"".concat(item.title,"-").concat(i)},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("strong",null,"".concat(item.title,": ")),item.description))),[listItems]);const icon=Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(()=>{var _connectorsConfigurat,_connectorsConfigurat2;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiIcon"],{size:"xl",type:(_connectorsConfigurat=(_connectorsConfigurat2=_common_lib_connectors_config__WEBPACK_IMPORTED_MODULE_3__["a"]["".concat(connectorType)])===null||_connectorsConfigurat2===void 0?void 0:_connectorsConfigurat2.logo)!==null&&_connectorsConfigurat!==void 0?_connectorsConfigurat:""})},[connectorType]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,isLoading&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiLoadingSpinner"],{"data-test-subj":"settings-connector-card-loading"}),!isLoading&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiCard"],{"data-test-subj":"settings-connector-card",description:description,display:"plain",icon:icon,layout:"horizontal",paddingSize:"none",title:title,titleSize:"xs"}))};const ConnectorCard=Object(react__WEBPACK_IMPORTED_MODULE_0__["memo"])(ConnectorCardDisplay)}}]);