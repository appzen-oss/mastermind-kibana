/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["indexLifecycleManagement_bundle_jsonpfunction"]=window["indexLifecycleManagement_bundle_jsonpfunction"]||[]).push([[1],{33:function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},34:function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},35:function(module,exports,__webpack_require__){"use strict";(function(process){Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var defineProperty=function(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj};var NOTHING=typeof Symbol!=="undefined"?Symbol("immer-nothing"):defineProperty({},"immer-nothing",true);var DRAFT_STATE=typeof Symbol!=="undefined"?Symbol("immer-state"):"__$immer_state";function isDraft(value){return!!value&&!!value[DRAFT_STATE]}function isDraftable(value){if(!value)return false;if((typeof value==="undefined"?"undefined":_typeof(value))!=="object")return false;if(Array.isArray(value))return true;var proto=Object.getPrototypeOf(value);return proto===null||proto===Object.prototype}function original(value){if(value&&value[DRAFT_STATE]){return value[DRAFT_STATE].base}}var assign=Object.assign||function assign(target,value){for(var key in value){if(has(value,key)){target[key]=value[key]}}return target};function shallowCopy(value){if(Array.isArray(value))return value.slice();var target=value.__proto__===undefined?Object.create(null):{};return assign(target,value)}function each(value,cb){if(Array.isArray(value)){for(var i=0;i<value.length;i++){cb(i,value[i],value)}}else{for(var key in value){cb(key,value[key],value)}}}function has(thing,prop){return Object.prototype.hasOwnProperty.call(thing,prop)}function is(x,y){if(x===y){return x!==0||1/x===1/y}else{return x!==x&&y!==y}}function generatePatches(state,basePath,patches,inversePatches){Array.isArray(state.base)?generateArrayPatches(state,basePath,patches,inversePatches):generateObjectPatches(state,basePath,patches,inversePatches)}function generateArrayPatches(state,basePath,patches,inversePatches){var base=state.base,copy=state.copy,assigned=state.assigned;var minLength=Math.min(base.length,copy.length);for(var i=0;i<minLength;i++){if(assigned[i]&&base[i]!==copy[i]){var path=basePath.concat(i);patches.push({op:"replace",path:path,value:copy[i]});inversePatches.push({op:"replace",path:path,value:base[i]})}}if(minLength<copy.length){for(var _i=minLength;_i<copy.length;_i++){patches.push({op:"add",path:basePath.concat(_i),value:copy[_i]})}inversePatches.push({op:"replace",path:basePath.concat("length"),value:base.length})}else if(minLength<base.length){patches.push({op:"replace",path:basePath.concat("length"),value:copy.length});for(var _i2=minLength;_i2<base.length;_i2++){inversePatches.push({op:"add",path:basePath.concat(_i2),value:base[_i2]})}}}function generateObjectPatches(state,basePath,patches,inversePatches){var base=state.base,copy=state.copy;each(state.assigned,(function(key,assignedValue){var origValue=base[key];var value=copy[key];var op=!assignedValue?"remove":key in base?"replace":"add";if(origValue===base&&op==="replace")return;var path=basePath.concat(key);patches.push(op==="remove"?{op:op,path:path}:{op:op,path:path,value:value});inversePatches.push(op==="add"?{op:"remove",path:path}:op==="remove"?{op:"add",path:path,value:origValue}:{op:"replace",path:path,value:origValue})}))}function applyPatches(draft,patches){for(var i=0;i<patches.length;i++){var patch=patches[i];var path=patch.path;if(path.length===0&&patch.op==="replace"){draft=patch.value}else{var base=draft;for(var _i3=0;_i3<path.length-1;_i3++){base=base[path[_i3]];if(!base||(typeof base==="undefined"?"undefined":_typeof(base))!=="object")throw new Error("Cannot apply patch, path doesn't resolve: "+path.join("/"))}var key=path[path.length-1];switch(patch.op){case"replace":case"add":base[key]=patch.value;break;case"remove":if(Array.isArray(base)){if(key!==base.length-1)throw new Error("Only the last index of an array can be removed, index: "+key+", length: "+base.length);base.length-=1}else{delete base[key]}break;default:throw new Error("Unsupported patch operation: "+patch.op)}}}return draft}var descriptors={};var scopes=[];var currentScope=function currentScope(){return scopes[scopes.length-1]};function willFinalize(result,baseDraft,needPatches){var scope=currentScope();scope.forEach((function(state){return state.finalizing=true}));if(result===undefined||result===baseDraft){if(needPatches)markChangesRecursively(baseDraft);markChangesSweep(scope)}}function createDraft(base,parent){var draft=void 0;if(isDraft(base)){var _state=base[DRAFT_STATE];_state.finalizing=true;draft=shallowCopy(_state.draft);_state.finalizing=false}else{draft=shallowCopy(base)}each(base,(function(prop){Object.defineProperty(draft,""+prop,createPropertyProxy(""+prop))}));var state={scope:parent?parent.scope:currentScope(),modified:false,finalizing:false,finalized:false,assigned:{},parent:parent,base:base,draft:draft,copy:null,revoke:revoke,revoked:false};createHiddenProperty(draft,DRAFT_STATE,state);state.scope.push(state);return draft}function revoke(){this.revoked=true}function source(state){return state.copy||state.base}function _get(state,prop){assertUnrevoked(state);var value=source(state)[prop];if(!state.finalizing&&value===state.base[prop]&&isDraftable(value)){prepareCopy(state);return state.copy[prop]=createDraft(value,state)}return value}function _set(state,prop,value){assertUnrevoked(state);state.assigned[prop]=true;if(!state.modified){if(is(source(state)[prop],value))return;markChanged(state);prepareCopy(state)}state.copy[prop]=value}function markChanged(state){if(!state.modified){state.modified=true;if(state.parent)markChanged(state.parent)}}function prepareCopy(state){if(!state.copy)state.copy=shallowCopy(state.base)}function createPropertyProxy(prop){return descriptors[prop]||(descriptors[prop]={configurable:true,enumerable:true,get:function get$$1(){return _get(this[DRAFT_STATE],prop)},set:function set$$1(value){_set(this[DRAFT_STATE],prop,value)}})}function assertUnrevoked(state){if(state.revoked===true)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(state.copy||state.base))}function markChangesSweep(scope){for(var i=scope.length-1;i>=0;i--){var state=scope[i];if(state.modified===false){if(Array.isArray(state.base)){if(hasArrayChanges(state))markChanged(state)}else if(hasObjectChanges(state))markChanged(state)}}}function markChangesRecursively(object){if(!object||(typeof object==="undefined"?"undefined":_typeof(object))!=="object")return;var state=object[DRAFT_STATE];if(!state)return;var base=state.base,draft=state.draft,assigned=state.assigned;if(!Array.isArray(object)){Object.keys(draft).forEach((function(key){if(base[key]===undefined&&!has(base,key)){assigned[key]=true;markChanged(state)}else if(!assigned[key]){markChangesRecursively(draft[key])}}));Object.keys(base).forEach((function(key){if(draft[key]===undefined&&!has(draft,key)){assigned[key]=false;markChanged(state)}}))}else if(hasArrayChanges(state)){markChanged(state);assigned.length=true;if(draft.length<base.length){for(var i=draft.length;i<base.length;i++){assigned[i]=false}}else{for(var _i=base.length;_i<draft.length;_i++){assigned[_i]=true}}for(var _i2=0;_i2<draft.length;_i2++){if(assigned[_i2]===undefined)markChangesRecursively(draft[_i2])}}}function hasObjectChanges(state){var base=state.base,draft=state.draft;var keys=Object.keys(draft);for(var i=keys.length-1;i>=0;i--){if(base[keys[i]]===undefined&&!has(base,keys[i])){return true}}return keys.length!==Object.keys(base).length}function hasArrayChanges(state){var draft=state.draft;if(draft.length!==state.base.length)return true;var descriptor=Object.getOwnPropertyDescriptor(draft,draft.length-1);if(descriptor&&!descriptor.get)return true;return false}function createHiddenProperty(target,prop,value){Object.defineProperty(target,prop,{value:value,enumerable:false,writable:true})}var legacyProxy=Object.freeze({scopes:scopes,currentScope:currentScope,willFinalize:willFinalize,createDraft:createDraft});var scopes$1=[];var currentScope$1=function currentScope(){return scopes$1[scopes$1.length-1]};function willFinalize$1(){}function createDraft$1(base,parent){var state={scope:parent?parent.scope:currentScope$1(),modified:false,finalized:false,assigned:{},parent:parent,base:base,draft:null,drafts:{},copy:null,revoke:null};var _ref=Array.isArray(base)?Proxy.revocable([state],arrayTraps):Proxy.revocable(state,objectTraps),revoke=_ref.revoke,proxy=_ref.proxy;state.draft=proxy;state.revoke=revoke;state.scope.push(state);return proxy}var objectTraps={get:get$1,has:function has$$1(target,prop){return prop in source$1(target)},ownKeys:function ownKeys(target){return Reflect.ownKeys(source$1(target))},set:set$1,deleteProperty:deleteProperty,getOwnPropertyDescriptor:getOwnPropertyDescriptor,defineProperty:defineProperty$1,setPrototypeOf:function setPrototypeOf(){throw new Error("Immer does not support `setPrototypeOf()`.")}};var arrayTraps={};each(objectTraps,(function(key,fn){arrayTraps[key]=function(){arguments[0]=arguments[0][0];return fn.apply(this,arguments)}}));arrayTraps.deleteProperty=function(state,prop){if(isNaN(parseInt(prop)))throw new Error("Immer does not support deleting properties from arrays: "+prop);return objectTraps.deleteProperty.call(this,state[0],prop)};arrayTraps.set=function(state,prop,value){if(prop!=="length"&&isNaN(parseInt(prop)))throw new Error("Immer does not support setting non-numeric properties on arrays: "+prop);return objectTraps.set.call(this,state[0],prop,value)};function source$1(state){return state.copy||state.base}function get$1(state,prop){if(prop===DRAFT_STATE)return state;var drafts=state.drafts;if(!state.modified&&has(drafts,prop)){return drafts[prop]}var value=source$1(state)[prop];if(state.finalized||!isDraftable(value))return value;if(state.modified){if(value!==state.base[prop])return value;drafts=state.copy}return drafts[prop]=createDraft$1(value,state)}function set$1(state,prop,value){if(!state.modified){var isUnchanged=value?is(state.base[prop],value)||value===state.drafts[prop]:is(state.base[prop],value)&&prop in state.base;if(isUnchanged)return true;markChanged$1(state)}state.assigned[prop]=true;state.copy[prop]=value;return true}function deleteProperty(state,prop){if(state.base[prop]!==undefined||prop in state.base){state.assigned[prop]=false;markChanged$1(state)}if(state.copy)delete state.copy[prop];return true}function getOwnPropertyDescriptor(state,prop){var owner=state.modified?state.copy:has(state.drafts,prop)?state.drafts:state.base;var descriptor=Reflect.getOwnPropertyDescriptor(owner,prop);if(descriptor&&!(Array.isArray(owner)&&prop==="length"))descriptor.configurable=true;return descriptor}function defineProperty$1(){throw new Error("Immer does not support defining properties on draft objects.")}function markChanged$1(state){if(!state.modified){state.modified=true;state.copy=assign(shallowCopy(state.base),state.drafts);state.drafts=null;if(state.parent)markChanged$1(state.parent)}}var modernProxy=Object.freeze({scopes:scopes$1,currentScope:currentScope$1,willFinalize:willFinalize$1,createDraft:createDraft$1});function verifyMinified(){}var configDefaults={useProxies:typeof Proxy!=="undefined"&&typeof Reflect!=="undefined",autoFreeze:typeof process!=="undefined"?"production"!=="production":verifyMinified.name==="verifyMinified",onAssign:null,onDelete:null,onCopy:null};var Immer=function(){function Immer(config){classCallCheck(this,Immer);assign(this,configDefaults,config);this.setUseProxies(this.useProxies);this.produce=this.produce.bind(this)}createClass(Immer,[{key:"produce",value:function produce(base,recipe,patchListener){var _this=this;if(typeof base==="function"&&typeof recipe!=="function"){var defaultBase=recipe;recipe=base;return function(){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var base=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultBase;return _this.produce(base,(function(draft){var _recipe;return(_recipe=recipe).call.apply(_recipe,[draft,draft].concat(args))}))}}{if(typeof recipe!=="function")throw new Error("if first argument is not a function, the second argument to produce should be a function");if(patchListener!==undefined&&typeof patchListener!=="function")throw new Error("the third argument of a producer should not be set or a function")}var result=void 0;if(!isDraftable(base)){result=recipe(base);if(result===undefined)return base}else if(isDraft(base)){result=recipe.call(base,base);if(result===undefined)return base}else{this.scopes.push([]);var baseDraft=this.createDraft(base);try{result=recipe.call(baseDraft,baseDraft);this.willFinalize(result,baseDraft,!!patchListener);var patches=patchListener&&[],inversePatches=patchListener&&[];if(result===undefined||result===baseDraft){result=this.finalize(baseDraft,[],patches,inversePatches)}else{if(baseDraft[DRAFT_STATE].modified)throw new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");if(isDraftable(result))result=this.finalize(result);if(patchListener){patches.push({op:"replace",path:[],value:result});inversePatches.push({op:"replace",path:[],value:base})}}}finally{this.currentScope().forEach((function(state){return state.revoke()}));this.scopes.pop()}patchListener&&patchListener(patches,inversePatches)}return result===NOTHING?undefined:result}},{key:"setAutoFreeze",value:function setAutoFreeze(value){this.autoFreeze=value}},{key:"setUseProxies",value:function setUseProxies(value){this.useProxies=value;assign(this,value?modernProxy:legacyProxy)}},{key:"finalize",value:function finalize(draft,path,patches,inversePatches){var state=draft[DRAFT_STATE];if(!state){if(Object.isFrozen(draft))return draft;return this.finalizeTree(draft)}if(state.scope!==this.currentScope()){return draft}if(!state.modified)return state.base;if(!state.finalized){state.finalized=true;this.finalizeTree(state.draft,path,patches,inversePatches);if(this.onDelete){var assigned=state.assigned;for(var prop in assigned){assigned[prop]||this.onDelete(state,prop)}}if(this.onCopy)this.onCopy(state);if(this.autoFreeze&&this.scopes.length===1){Object.freeze(state.copy)}if(patches)generatePatches(state,path,patches,inversePatches)}return state.copy}},{key:"finalizeTree",value:function finalizeTree(root,path,patches,inversePatches){var _this2=this;var state=root[DRAFT_STATE];if(state){root=this.useProxies?state.copy:state.copy=shallowCopy(state.draft)}var onAssign=this.onAssign;var finalizeProperty=function finalizeProperty(prop,value,parent){var inDraft=!!state&&parent===root;if(isDraft(value)){parent[prop]=value=patches&&inDraft&&!state.assigned[prop]?_this2.finalize(value,path.concat(prop),patches,inversePatches):_this2.finalize(value);if(inDraft&&value===state.base[prop])return}else if(inDraft&&is(value,state.base[prop])){return}else if(isDraftable(value)&&!Object.isFrozen(value)){each(value,finalizeProperty)}if(inDraft&&onAssign){onAssign(state,prop,value)}};each(root,finalizeProperty);return root}}]);return Immer}();var immer=new Immer;var produce=immer.produce;var setAutoFreeze=function setAutoFreeze(value){return immer.setAutoFreeze(value)};var setUseProxies=function setUseProxies(value){return immer.setUseProxies(value)};var applyPatches$1=produce(applyPatches);exports.produce=produce;exports["default"]=produce;exports.setAutoFreeze=setAutoFreeze;exports.setUseProxies=setUseProxies;exports.applyPatches=applyPatches$1;exports.Immer=Immer;exports.original=original;exports.isDraft=isDraft;exports.nothing=NOTHING}).call(this,__webpack_require__(36))},36:function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},37:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(38);case"v7light":return __webpack_require__(40);case"v8dark":return __webpack_require__(42);case"v8light":return __webpack_require__(44)}},38:function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(39);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},39:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection {\n  background-color: #25262E;\n  padding-top: 12px;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-bottom: 12px; }\n",""]);module.exports=exports},40:function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(41);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},41:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection {\n  background-color: #F8F8F8;\n  padding-top: 12px;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-bottom: 12px; }\n",""]);module.exports=exports},42:function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(43);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},43:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection {\n  background-color: #25262E;\n  padding-top: 12px;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-bottom: 12px; }\n",""]);module.exports=exports},44:function(module,exports,__webpack_require__){var api=__webpack_require__(33);var content=__webpack_require__(45);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},45:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(34);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection {\n  background-color: #F8F8F8;\n  padding-top: 12px;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-bottom: 12px; }\n",""]);module.exports=exports},46:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(28);var public_=__webpack_require__(26);var hook_form_lib_=__webpack_require__(24);var helpers_=__webpack_require__(27);var components_=__webpack_require__(25);var esUiShared_public_=__webpack_require__(15);const useKibana=()=>Object(public_["useKibana"])();var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(29);var web=__webpack_require__(12);var ui_metric=__webpack_require__(16);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(3);var api=__webpack_require__(9);const splitSizeAndUnits=field=>{let size="";let units="";const result=/(\d+)(\w+)/.exec(field);if(result){size=result[1];units=result[2]}return{size:size,units:units}};const getPolicyByName=(policies,policyName="")=>{if(policies&&policies.length>0){return policies.find(policy=>policy.name===policyName)}};var constants=__webpack_require__(4);var external_kbnSharedDeps_Lodash_=__webpack_require__(8);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);var notification=__webpack_require__(6);var services_ui_metric=__webpack_require__(7);var api_errors=__webpack_require__(14);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const savePolicy=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(serializedPolicy,isNew){var title,uiMetrics,message;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Object(api["g"])(serializedPolicy);case 3:_context.next=10;break;case 5:_context.prev=5;_context.t0=_context["catch"](0);title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.saveErrorMessage",{defaultMessage:"Error saving lifecycle policy {lifecycleName}",values:{lifecycleName:serializedPolicy.name}});Object(api_errors["a"])(_context.t0,title);return _context.abrupt("return",false);case 10:uiMetrics=Object(services_ui_metric["a"])(serializedPolicy.phases);uiMetrics.push(isNew?constants["j"]:constants["m"]);Object(services_ui_metric["c"])(web["a"].COUNT,uiMetrics);message=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.successfulSaveMessage",{defaultMessage:'{verb} lifecycle policy "{lifecycleName}"',values:{verb:isNew?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.createdMessage",{defaultMessage:"Created"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.updatedMessage",{defaultMessage:"Updated"}),lifecycleName:serializedPolicy.name}});notification["c"].addSuccess(message);return _context.abrupt("return",true);case 16:case"end":return _context.stop()}}),_callee,null,[[0,5]])})));return function savePolicy(_x,_x2){return _ref.apply(this,arguments)}}();const ActiveBadge=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{className:"eui-alignMiddle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.activePhaseMessage",defaultMessage:"Active"}));function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const ErrableFormRow=_ref=>{let isShowingErrors=_ref.isShowingErrors,errors=_ref.errors,children=_ref.children,rest=_objectWithoutProperties(_ref,["isShowingErrors","errors","children"]);const _errors=errors?Array.isArray(errors)?errors:[errors]:undefined;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],_extends({isInvalid:isShowingErrors||_errors&&_errors.length>0,error:errors},rest),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_["Children"].map(children,child=>Object(external_kbnSharedDeps_React_["cloneElement"])(child,{isInvalid:errors&&isShowingErrors&&errors.length>0}))))};var documentation=__webpack_require__(17);const LearnMoreLink=({docPath:docPath,text:text})=>{const content=text?text:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.learnMore",defaultMessage:"Learn more"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:Object(documentation["a"])(docPath),target:"_blank",external:true},content)};const OptionalLabel=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.optionalMessage",defaultMessage:" (optional)"});function policy_json_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function policy_json_flyout_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){policy_json_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){policy_json_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const PolicyJsonFlyout=({policyName:policyName,close:close})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(undefined),_useState2=_slicedToArray(_useState,2),policy=_useState2[0],setPolicy=_useState2[1];const _useFormContext=Object(hook_form_lib_["useFormContext"])(),validateForm=_useFormContext.validate;const _useFormData=Object(hook_form_lib_["useFormData"])(),_useFormData2=_slicedToArray(_useFormData,2),getFormData=_useFormData2[1];const updatePolicy=Object(external_kbnSharedDeps_React_["useCallback"])(policy_json_flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setPolicy(undefined);_context.next=3;return validateForm();case 3:if(!_context.sent){_context.next=7;break}setPolicy(getFormData());_context.next=8;break;case 7:setPolicy(null);case 8:case"end":return _context.stop()}}),_callee)}))),[setPolicy,getFormData,validateForm]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{updatePolicy()},[updatePolicy]);let content;switch(policy){case undefined:content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null);break;case null:content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{iconType:"alert",color:"danger",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyJsonFlyout.validationErrorCallout.title",{defaultMessage:"Invalid policy"})},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyJsonFlyout.validationErrorCallout.body",{defaultMessage:"To view the JSON for this policy address all validation errors."}));break;default:const phases=policy.phases;const json=JSON.stringify({policy:{phases:phases}},null,2);const endpoint="PUT _ilm/policy/".concat(policyName||"<policyName>");const request="".concat(endpoint,"\n").concat(json);content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.descriptionText",defaultMessage:"This Elasticsearch request will create or update this index lifecycle policy."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{language:"json",isCopyable:true},request));break}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{maxWidth:480,onClose:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",null,policyName?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.namedTitle",defaultMessage:"Request for '{policyName}'",values:{policyName:policyName}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.unnamedTitle",defaultMessage:"Request"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,content),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"cross",onClick:close,flush:"left"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.closeButtonLabel",defaultMessage:"Close"}))))};function toggleable_field_extends(){toggleable_field_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return toggleable_field_extends.apply(this,arguments)}function toggleable_field_slicedToArray(arr,i){return toggleable_field_arrayWithHoles(arr)||toggleable_field_iterableToArrayLimit(arr,i)||toggleable_field_unsupportedIterableToArray(arr,i)||toggleable_field_nonIterableRest()}function toggleable_field_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function toggleable_field_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return toggleable_field_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return toggleable_field_arrayLikeToArray(o,minLen)}function toggleable_field_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function toggleable_field_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function toggleable_field_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function toggleable_field_objectWithoutProperties(source,excluded){if(source==null)return{};var target=toggleable_field_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function toggleable_field_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const ToggleableField=_ref=>{let initialValue=_ref.initialValue,_onChange=_ref.onChange,children=_ref.children,restProps=toggleable_field_objectWithoutProperties(_ref,["initialValue","onChange","children"]);const _useState=Object(external_kbnSharedDeps_React_["useState"])(initialValue),_useState2=toggleable_field_slicedToArray(_useState,2),isContentVisible=_useState2[0],setIsContentVisible=_useState2[1];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],toggleable_field_extends({},restProps,{checked:isContentVisible,onChange:e=>{const nextValue=e.target.checked;setIsContentVisible(nextValue);if(_onChange){_onChange(nextValue)}}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),isContentVisible?children:null)};function described_form_field_objectWithoutProperties(source,excluded){if(source==null)return{};var target=described_form_field_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function described_form_field_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const DescribedFormField=_ref=>{let children=_ref.children,switchProps=_ref.switchProps,restDescribedFormProps=described_form_field_objectWithoutProperties(_ref,["children","switchProps"]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],restDescribedFormProps,external_kbnSharedDeps_React_default.a.createElement(ToggleableField,switchProps,children))};const i18nTexts={editPolicy:{forceMergeEnabledFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.forcemerge.enableLabel",{defaultMessage:"Force merge data"}),maxNumSegmentsFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.forceMerge.numberOfSegmentsLabel",{defaultMessage:"Number of segments"}),setPriorityFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.indexPriorityLabel",{defaultMessage:"Index priority (optional)"}),bestCompressionFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.forcemerge.bestCompressionLabel",{defaultMessage:"Compress stored fields"}),bestCompressionFieldHelpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.forceMerge.bestCompressionText",{defaultMessage:"Use higher compression for stored fields at the cost of slower performance."}),allocationTypeOptionsFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.dataTierAllocation.allocationFieldLabel",{defaultMessage:"Data tier options"}),allocationNodeAttributeFieldLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.dataTierAllocation.nodeAllocationFieldLabel",{defaultMessage:"Select a node attribute"}),errors:{numberRequired:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.numberRequiredErrorMessage",{defaultMessage:"A number is required."}),numberGreatThan0Required:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.numberAboveZeroRequiredError",{defaultMessage:"Only numbers above 0 are allowed."}),maximumAgeRequiredMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumAgeMissingError",{defaultMessage:"A maximum age is required."}),maximumSizeRequiredMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumIndexSizeMissingError",{defaultMessage:"A maximum index size is required."}),maximumDocumentsRequiredMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumDocumentsMissingError",{defaultMessage:"Maximum documents is required."}),rollOverConfigurationCallout:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.rolloverConfigurationError.title",{defaultMessage:"Invalid rollover configuration"}),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.rolloverConfigurationError.body",{defaultMessage:"A value for one of maximum size, maximum documents, or maximum age is required."})},nonNegativeNumberRequired:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.nonNegativeNumberRequiredError",{defaultMessage:"Only non-negative numbers are allowed."}),policyNameContainsInvalidChars:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.errors.policyNameContainsInvalidCharsError",{defaultMessage:"A policy name cannot contain spaces or commas."}),policyNameAlreadyUsedErrorMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.policyNameAlreadyUsedError",{defaultMessage:"That policy name is already used."}),policyNameMustBeDifferentErrorMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.differentPolicyNameRequiredError",{defaultMessage:"The policy name must be different."}),policyNameRequiredMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.policyNameRequiredError",{defaultMessage:"A policy name is required."}),policyNameStartsWithUnderscoreErrorMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.policyNameStartsWithUnderscoreError",{defaultMessage:"A policy name cannot start with an underscore."}),policyNameTooLongErrorMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.policyNameTooLongError",{defaultMessage:"A policy name cannot be longer than 255 bytes."})}}};var immer=__webpack_require__(35);const determineDataTierAllocationTypeLegacy=(actions={})=>{const allocate=actions.allocate,migrate=actions.migrate;if((migrate===null||migrate===void 0?void 0:migrate.enabled)===false){return"none"}if(!allocate){return"default"}if(allocate.require&&Object.keys(allocate.require).length||allocate.include&&Object.keys(allocate.include).length||allocate.exclude&&Object.keys(allocate.exclude).length){return"custom"}return"default"};const determineDataTierAllocationType=(actions={})=>{const allocate=actions.allocate,migrate=actions.migrate;if((migrate===null||migrate===void 0?void 0:migrate.enabled)===false){return"none"}if(!allocate){return"node_roles"}if(allocate.require&&Object.keys(allocate.require).length||allocate.include&&Object.keys(allocate.include).length||allocate.exclude&&Object.keys(allocate.exclude).length){return"node_attrs"}return"node_roles"};var common_constants=__webpack_require__(10);const getAvailableNodeRoleForPhase=(phase,nodesByRoles)=>{var _nodesByRoles$data,_preferredNodeRoles$f;const preferredNodeRoles=common_constants["b"][phase];if((_nodesByRoles$data=nodesByRoles.data)===null||_nodesByRoles$data===void 0?void 0:_nodesByRoles$data.length){return preferredNodeRoles[0]}return(_preferredNodeRoles$f=preferredNodeRoles.find(role=>{var _nodesByRoles$role;return Boolean((_nodesByRoles$role=nodesByRoles[role])===null||_nodesByRoles$role===void 0?void 0:_nodesByRoles$role.length)}))!==null&&_preferredNodeRoles$f!==void 0?_preferredNodeRoles$f:"none"};const isNodeRoleFirstPreference=(phase,nodeRole)=>common_constants["b"][phase][0]===nodeRole;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const deserializer=policy=>{var _hot$actions,_hot$actions2,_hot$actions2$forceme,_warm$actions,_warm$actions$forceme,_cold$actions;const _policy$phases=policy.phases,hot=_policy$phases.hot,warm=_policy$phases.warm,cold=_policy$phases.cold,deletePhase=_policy$phases.delete;const _meta={hot:{useRollover:Boolean(hot===null||hot===void 0?void 0:(_hot$actions=hot.actions)===null||_hot$actions===void 0?void 0:_hot$actions.rollover),bestCompression:(hot===null||hot===void 0?void 0:(_hot$actions2=hot.actions)===null||_hot$actions2===void 0?void 0:(_hot$actions2$forceme=_hot$actions2.forcemerge)===null||_hot$actions2$forceme===void 0?void 0:_hot$actions2$forceme.index_codec)==="best_compression"},warm:{enabled:Boolean(warm),warmPhaseOnRollover:Boolean((warm===null||warm===void 0?void 0:warm.min_age)==="0ms"),bestCompression:(warm===null||warm===void 0?void 0:(_warm$actions=warm.actions)===null||_warm$actions===void 0?void 0:(_warm$actions$forceme=_warm$actions.forcemerge)===null||_warm$actions$forceme===void 0?void 0:_warm$actions$forceme.index_codec)==="best_compression",dataTierAllocationType:determineDataTierAllocationType(warm===null||warm===void 0?void 0:warm.actions)},cold:{enabled:Boolean(cold),dataTierAllocationType:determineDataTierAllocationType(cold===null||cold===void 0?void 0:cold.actions),freezeEnabled:Boolean(cold===null||cold===void 0?void 0:(_cold$actions=cold.actions)===null||_cold$actions===void 0?void 0:_cold$actions.freeze)},delete:{enabled:Boolean(deletePhase)}};return Object(immer["produce"])(_objectSpread(_objectSpread({},policy),{},{_meta:_meta}),draft=>{var _draft$phases$hot,_draft$phases$hot$act;if((_draft$phases$hot=draft.phases.hot)===null||_draft$phases$hot===void 0?void 0:(_draft$phases$hot$act=_draft$phases$hot.actions)===null||_draft$phases$hot$act===void 0?void 0:_draft$phases$hot$act.rollover){if(draft.phases.hot.actions.rollover.max_size){const maxSize=splitSizeAndUnits(draft.phases.hot.actions.rollover.max_size);draft.phases.hot.actions.rollover.max_size=maxSize.size;draft._meta.hot.maxStorageSizeUnit=maxSize.units}if(draft.phases.hot.actions.rollover.max_age){const maxAge=splitSizeAndUnits(draft.phases.hot.actions.rollover.max_age);draft.phases.hot.actions.rollover.max_age=maxAge.size;draft._meta.hot.maxAgeUnit=maxAge.units}}if(draft.phases.warm){var _draft$phases$warm$ac,_draft$phases$warm$ac2;if((_draft$phases$warm$ac=draft.phases.warm.actions)===null||_draft$phases$warm$ac===void 0?void 0:(_draft$phases$warm$ac2=_draft$phases$warm$ac.allocate)===null||_draft$phases$warm$ac2===void 0?void 0:_draft$phases$warm$ac2.require){Object.entries(draft.phases.warm.actions.allocate.require).forEach(entry=>{draft._meta.warm.allocationNodeAttribute=entry.join(":")})}if(draft.phases.warm.min_age){const minAge=splitSizeAndUnits(draft.phases.warm.min_age);draft.phases.warm.min_age=minAge.size;draft._meta.warm.minAgeUnit=minAge.units}}if(draft.phases.cold){var _draft$phases$cold$ac,_draft$phases$cold$ac2;if((_draft$phases$cold$ac=draft.phases.cold.actions)===null||_draft$phases$cold$ac===void 0?void 0:(_draft$phases$cold$ac2=_draft$phases$cold$ac.allocate)===null||_draft$phases$cold$ac2===void 0?void 0:_draft$phases$cold$ac2.require){Object.entries(draft.phases.cold.actions.allocate.require).forEach(entry=>{draft._meta.cold.allocationNodeAttribute=entry.join(":")})}if(draft.phases.cold.min_age){const minAge=splitSizeAndUnits(draft.phases.cold.min_age);draft.phases.cold.min_age=minAge.size;draft._meta.cold.minAgeUnit=minAge.units}}if(draft.phases.delete){if(draft.phases.delete.min_age){const minAge=splitSizeAndUnits(draft.phases.delete.min_age);draft.phases.delete.min_age=minAge.size;draft._meta.delete.minAgeUnit=minAge.units}}})};function serialize_migrate_and_allocate_actions_slicedToArray(arr,i){return serialize_migrate_and_allocate_actions_arrayWithHoles(arr)||serialize_migrate_and_allocate_actions_iterableToArrayLimit(arr,i)||serialize_migrate_and_allocate_actions_unsupportedIterableToArray(arr,i)||serialize_migrate_and_allocate_actions_nonIterableRest()}function serialize_migrate_and_allocate_actions_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function serialize_migrate_and_allocate_actions_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return serialize_migrate_and_allocate_actions_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return serialize_migrate_and_allocate_actions_arrayLikeToArray(o,minLen)}function serialize_migrate_and_allocate_actions_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function serialize_migrate_and_allocate_actions_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function serialize_migrate_and_allocate_actions_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function serialize_migrate_and_allocate_actions_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function serialize_migrate_and_allocate_actions_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){serialize_migrate_and_allocate_actions_ownKeys(Object(source),true).forEach((function(key){serialize_migrate_and_allocate_actions_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{serialize_migrate_and_allocate_actions_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function serialize_migrate_and_allocate_actions_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function serialize_migrate_and_allocate_actions_objectWithoutProperties(source,excluded){if(source==null)return{};var target=serialize_migrate_and_allocate_actions_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function serialize_migrate_and_allocate_actions_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const serializeMigrateAndAllocateActions=({dataTierAllocationType:dataTierAllocationType,allocationNodeAttribute:allocationNodeAttribute},newActions={},originalActions={})=>{var _originalActions$allo,_originalActions$allo3;const allocate=newActions.allocate,migrate=newActions.migrate,otherActions=serialize_migrate_and_allocate_actions_objectWithoutProperties(newActions,["allocate","migrate"]);const actions=serialize_migrate_and_allocate_actions_objectSpread({},otherActions);if(allocate){const include=allocate.include,exclude=allocate.exclude,require=allocate.require,otherSettings=serialize_migrate_and_allocate_actions_objectWithoutProperties(allocate,["include","exclude","require"]);if(!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(otherSettings)){actions.allocate=serialize_migrate_and_allocate_actions_objectSpread({},otherSettings)}}switch(dataTierAllocationType){case"node_attrs":if(allocationNodeAttribute){const _allocationNodeAttrib=allocationNodeAttribute.split(":"),_allocationNodeAttrib2=serialize_migrate_and_allocate_actions_slicedToArray(_allocationNodeAttrib,2),name=_allocationNodeAttrib2[0],value=_allocationNodeAttrib2[1];actions.allocate=serialize_migrate_and_allocate_actions_objectSpread(serialize_migrate_and_allocate_actions_objectSpread({},actions.allocate),{},{require:{[name]:value}})}else{actions.migrate=originalActions.migrate}if(!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(originalActions===null||originalActions===void 0?void 0:(_originalActions$allo=originalActions.allocate)===null||_originalActions$allo===void 0?void 0:_originalActions$allo.include)){var _originalActions$allo2;actions.allocate=serialize_migrate_and_allocate_actions_objectSpread(serialize_migrate_and_allocate_actions_objectSpread({},actions.allocate),{},{include:serialize_migrate_and_allocate_actions_objectSpread({},originalActions===null||originalActions===void 0?void 0:(_originalActions$allo2=originalActions.allocate)===null||_originalActions$allo2===void 0?void 0:_originalActions$allo2.include)})}if(!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(originalActions===null||originalActions===void 0?void 0:(_originalActions$allo3=originalActions.allocate)===null||_originalActions$allo3===void 0?void 0:_originalActions$allo3.exclude)){var _originalActions$allo4;actions.allocate=serialize_migrate_and_allocate_actions_objectSpread(serialize_migrate_and_allocate_actions_objectSpread({},actions.allocate),{},{exclude:serialize_migrate_and_allocate_actions_objectSpread({},originalActions===null||originalActions===void 0?void 0:(_originalActions$allo4=originalActions.allocate)===null||_originalActions$allo4===void 0?void 0:_originalActions$allo4.exclude)})}break;case"none":actions.migrate=serialize_migrate_and_allocate_actions_objectSpread(serialize_migrate_and_allocate_actions_objectSpread({},originalActions===null||originalActions===void 0?void 0:originalActions.migrate),{},{enabled:false});break;default:}return actions};function serializer_objectWithoutProperties(source,excluded){if(source==null)return{};var target=serializer_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function serializer_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const createSerializer=originalPolicy=>data=>{const _meta=data._meta,updatedPolicy=serializer_objectWithoutProperties(data,["_meta"]);if(!updatedPolicy.phases||!updatedPolicy.phases.hot){updatedPolicy.phases={hot:{actions:{}}}}return Object(immer["produce"])(originalPolicy!==null&&originalPolicy!==void 0?originalPolicy:constants["o"],draft=>{var _draft$phases$hot;Object(external_kbnSharedDeps_Lodash_["merge"])(draft,updatedPolicy);if(draft.phases.hot){var _draft$phases$hot$min;draft.phases.hot.min_age=(_draft$phases$hot$min=draft.phases.hot.min_age)!==null&&_draft$phases$hot$min!==void 0?_draft$phases$hot$min:"0ms"}if((_draft$phases$hot=draft.phases.hot)===null||_draft$phases$hot===void 0?void 0:_draft$phases$hot.actions){var _actions2;const hotPhaseActions=draft.phases.hot.actions;if(hotPhaseActions.rollover&&_meta.hot.useRollover){var _actions;if(hotPhaseActions.rollover.max_age){hotPhaseActions.rollover.max_age="".concat(hotPhaseActions.rollover.max_age).concat(_meta.hot.maxAgeUnit)}if(hotPhaseActions.rollover.max_size){hotPhaseActions.rollover.max_size="".concat(hotPhaseActions.rollover.max_size).concat(_meta.hot.maxStorageSizeUnit)}if(!((_actions=updatedPolicy.phases.hot.actions)===null||_actions===void 0?void 0:_actions.forcemerge)){delete hotPhaseActions.forcemerge}else if(_meta.hot.bestCompression){hotPhaseActions.forcemerge.index_codec="best_compression"}if(_meta.hot.bestCompression&&hotPhaseActions.forcemerge){hotPhaseActions.forcemerge.index_codec="best_compression"}}else{delete hotPhaseActions.rollover;delete hotPhaseActions.forcemerge}if(!((_actions2=updatedPolicy.phases.hot.actions)===null||_actions2===void 0?void 0:_actions2.set_priority)){delete hotPhaseActions.set_priority}}if(_meta.warm.enabled){var _originalPolicy$phase,_actions3,_actions4,_actions5;const warmPhase=draft.phases.warm;if((!_meta.hot.useRollover||!_meta.warm.warmPhaseOnRollover)&&updatedPolicy.phases.warm.min_age){warmPhase.min_age="".concat(updatedPolicy.phases.warm.min_age).concat(_meta.warm.minAgeUnit)}else{delete warmPhase.min_age}warmPhase.actions=serializeMigrateAndAllocateActions(_meta.warm,warmPhase.actions,originalPolicy===null||originalPolicy===void 0?void 0:(_originalPolicy$phase=originalPolicy.phases.warm)===null||_originalPolicy$phase===void 0?void 0:_originalPolicy$phase.actions);if(!((_actions3=updatedPolicy.phases.warm.actions)===null||_actions3===void 0?void 0:_actions3.forcemerge)){delete warmPhase.actions.forcemerge}else if(_meta.warm.bestCompression){warmPhase.actions.forcemerge.index_codec="best_compression"}if(!((_actions4=updatedPolicy.phases.warm.actions)===null||_actions4===void 0?void 0:_actions4.set_priority)){delete warmPhase.actions.set_priority}if(!((_actions5=updatedPolicy.phases.warm.actions)===null||_actions5===void 0?void 0:_actions5.shrink)){delete warmPhase.actions.shrink}}else{delete draft.phases.warm}if(_meta.cold.enabled){var _originalPolicy$phase2,_actions6;const coldPhase=draft.phases.cold;if(updatedPolicy.phases.cold.min_age){coldPhase.min_age="".concat(updatedPolicy.phases.cold.min_age).concat(_meta.cold.minAgeUnit)}coldPhase.actions=serializeMigrateAndAllocateActions(_meta.cold,coldPhase.actions,originalPolicy===null||originalPolicy===void 0?void 0:(_originalPolicy$phase2=originalPolicy.phases.cold)===null||_originalPolicy$phase2===void 0?void 0:_originalPolicy$phase2.actions);if(_meta.cold.freezeEnabled){var _coldPhase$actions$fr;coldPhase.actions.freeze=(_coldPhase$actions$fr=coldPhase.actions.freeze)!==null&&_coldPhase$actions$fr!==void 0?_coldPhase$actions$fr:{}}else{delete coldPhase.actions.freeze}if(!((_actions6=updatedPolicy.phases.cold.actions)===null||_actions6===void 0?void 0:_actions6.set_priority)){delete coldPhase.actions.set_priority}}else{delete draft.phases.cold}if(_meta.delete.enabled){var _actions7;const deletePhase=draft.phases.delete;if(updatedPolicy.phases.delete.min_age){deletePhase.min_age="".concat(updatedPolicy.phases.delete.min_age).concat(_meta.delete.minAgeUnit)}if(!((_actions7=updatedPolicy.phases.delete.actions)===null||_actions7===void 0?void 0:_actions7.wait_for_snapshot)&&deletePhase.actions.wait_for_snapshot){delete deletePhase.actions.wait_for_snapshot}}else{delete draft.phases.delete}})};const useRolloverPath="_meta.hot.useRollover";const ROLLOVER_FORM_PATHS={maxDocs:"phases.hot.actions.rollover.max_docs",maxAge:"phases.hot.actions.rollover.max_age",maxSize:"phases.hot.actions.rollover.max_size"};function validations_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function validations_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){validations_ownKeys(Object(source),true).forEach((function(key){validations_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{validations_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function validations_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const numberGreaterThanField=helpers_["fieldValidators"].numberGreaterThanField,containsCharsField=helpers_["fieldValidators"].containsCharsField,emptyField=helpers_["fieldValidators"].emptyField,startsWithField=helpers_["fieldValidators"].startsWithField;const createIfNumberExistsValidator=({than:than,message:message})=>arg=>{if(arg.value){return numberGreaterThanField({than:than,message:message})(validations_objectSpread(validations_objectSpread({},arg),{},{value:parseInt(arg.value,10)}))}};const ifExistsNumberGreaterThanZero=createIfNumberExistsValidator({than:0,message:i18nTexts.editPolicy.errors.numberGreatThan0Required});const ifExistsNumberNonNegative=createIfNumberExistsValidator({than:-1,message:i18nTexts.editPolicy.errors.nonNegativeNumberRequired});const ROLLOVER_EMPTY_VALIDATION="ROLLOVER_EMPTY_VALIDATION";const rolloverThresholdsValidator=({form:form})=>{const fields=form.getFields();if(!(fields[ROLLOVER_FORM_PATHS.maxAge].value||fields[ROLLOVER_FORM_PATHS.maxDocs].value||fields[ROLLOVER_FORM_PATHS.maxSize].value)){fields[ROLLOVER_FORM_PATHS.maxAge].setErrors([{validationType:ROLLOVER_EMPTY_VALIDATION,message:i18nTexts.editPolicy.errors.maximumAgeRequiredMessage}]);fields[ROLLOVER_FORM_PATHS.maxDocs].setErrors([{validationType:ROLLOVER_EMPTY_VALIDATION,message:i18nTexts.editPolicy.errors.maximumDocumentsRequiredMessage}]);fields[ROLLOVER_FORM_PATHS.maxSize].setErrors([{validationType:ROLLOVER_EMPTY_VALIDATION,message:i18nTexts.editPolicy.errors.maximumSizeRequiredMessage}])}else{fields[ROLLOVER_FORM_PATHS.maxAge].clearErrors(ROLLOVER_EMPTY_VALIDATION);fields[ROLLOVER_FORM_PATHS.maxDocs].clearErrors(ROLLOVER_EMPTY_VALIDATION);fields[ROLLOVER_FORM_PATHS.maxSize].clearErrors(ROLLOVER_EMPTY_VALIDATION)}};const minAgeValidator=arg=>numberGreaterThanField({than:0,allowEquality:true,message:i18nTexts.editPolicy.errors.nonNegativeNumberRequired})(validations_objectSpread(validations_objectSpread({},arg),{},{value:arg.value===""?-Infinity:parseInt(arg.value,10)}));const createPolicyNameValidations=({policies:policies,saveAsNewPolicy:saveAsNewPolicy,originalPolicyName:originalPolicyName})=>[{validator:emptyField(i18nTexts.editPolicy.errors.policyNameRequiredMessage)},{validator:startsWithField({message:i18nTexts.editPolicy.errors.policyNameStartsWithUnderscoreErrorMessage,char:"_"})},{validator:containsCharsField({message:i18nTexts.editPolicy.errors.policyNameContainsInvalidChars,chars:[","," "]})},{validator:arg=>{const policyName=arg.value;if(window.TextEncoder&&(new window.TextEncoder).encode(policyName).length>255){return{message:i18nTexts.editPolicy.errors.policyNameTooLongErrorMessage}}}},{validator:arg=>{const policyName=arg.value;if(saveAsNewPolicy&&policyName===originalPolicyName){return{message:i18nTexts.editPolicy.errors.policyNameMustBeDifferentErrorMessage}}else if(policyName!==originalPolicyName){const policyNames=policies.map(existingPolicy=>existingPolicy.name);if(policyNames.includes(policyName)){return{message:i18nTexts.editPolicy.errors.policyNameAlreadyUsedErrorMessage}}}}}];const schema_emptyField=helpers_["fieldValidators"].emptyField,schema_numberGreaterThanField=helpers_["fieldValidators"].numberGreaterThanField;const serializers={stringToNumber:v=>v!=null?parseInt(v,10):undefined};const schema={_meta:{hot:{useRollover:{defaultValue:true,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.enableRolloverLabel",{defaultMessage:"Enable rollover"})},maxStorageSizeUnit:{defaultValue:"gb"},maxAgeUnit:{defaultValue:"d"},bestCompression:{label:i18nTexts.editPolicy.bestCompressionFieldLabel,helpText:i18nTexts.editPolicy.bestCompressionFieldHelpText}},warm:{enabled:{defaultValue:false,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.warmPhase.activateWarmPhaseSwitchLabel",{defaultMessage:"Activate warm phase"})},warmPhaseOnRollover:{defaultValue:true,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.moveToWarmPhaseOnRolloverLabel",{defaultMessage:"Move to warm phase on rollover"})},minAgeUnit:{defaultValue:"ms"},bestCompression:{label:i18nTexts.editPolicy.bestCompressionFieldLabel,helpText:i18nTexts.editPolicy.bestCompressionFieldHelpText},dataTierAllocationType:{label:i18nTexts.editPolicy.allocationTypeOptionsFieldLabel},allocationNodeAttribute:{label:i18nTexts.editPolicy.allocationNodeAttributeFieldLabel}},cold:{enabled:{defaultValue:false,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.coldPhase.activateColdPhaseSwitchLabel",{defaultMessage:"Activate cold phase"})},freezeEnabled:{defaultValue:false,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.freezeIndexLabel",{defaultMessage:"Freeze index"})},minAgeUnit:{defaultValue:"d"},dataTierAllocationType:{label:i18nTexts.editPolicy.allocationTypeOptionsFieldLabel},allocationNodeAttribute:{label:i18nTexts.editPolicy.allocationNodeAttributeFieldLabel}},delete:{enabled:{defaultValue:false,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.activateWarmPhaseSwitchLabel",{defaultMessage:"Activate delete phase"})},minAgeUnit:{defaultValue:"d"}}},phases:{hot:{actions:{rollover:{max_age:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.maximumAgeLabel",{defaultMessage:"Maximum age"}),validations:[{validator:rolloverThresholdsValidator},{validator:ifExistsNumberGreaterThanZero}]},max_docs:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.maximumDocumentsLabel",{defaultMessage:"Maximum documents"}),validations:[{validator:rolloverThresholdsValidator},{validator:ifExistsNumberGreaterThanZero}],serializer:serializers.stringToNumber},max_size:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.maximumIndexSizeLabel",{defaultMessage:"Maximum index size"}),validations:[{validator:rolloverThresholdsValidator},{validator:ifExistsNumberGreaterThanZero}]}},forcemerge:{max_num_segments:{label:i18nTexts.editPolicy.maxNumSegmentsFieldLabel,validations:[{validator:schema_emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.forcemerge.numberOfSegmentsRequiredError",{defaultMessage:"A value for number of segments is required."}))},{validator:ifExistsNumberGreaterThanZero}],serializer:serializers.stringToNumber}},set_priority:{priority:{defaultValue:constants["p"],label:i18nTexts.editPolicy.setPriorityFieldLabel,validations:[{validator:ifExistsNumberNonNegative}],serializer:serializers.stringToNumber}}}},warm:{min_age:{defaultValue:"0",validations:[{validator:minAgeValidator}]},actions:{allocate:{number_of_replicas:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.numberOfReplicasLabel",{defaultMessage:"Number of replicas (optional)"}),validations:[{validator:ifExistsNumberGreaterThanZero}],serializer:serializers.stringToNumber}},shrink:{number_of_shards:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.numberOfPrimaryShardsLabel",{defaultMessage:"Number of primary shards"}),validations:[{validator:schema_emptyField(i18nTexts.editPolicy.errors.numberRequired)},{validator:schema_numberGreaterThanField({message:i18nTexts.editPolicy.errors.numberGreatThan0Required,than:0})}],serializer:serializers.stringToNumber}},forcemerge:{max_num_segments:{label:i18nTexts.editPolicy.maxNumSegmentsFieldLabel,validations:[{validator:schema_emptyField(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.forcemerge.numberOfSegmentsRequiredError",{defaultMessage:"A value for number of segments is required."}))},{validator:ifExistsNumberGreaterThanZero}],serializer:serializers.stringToNumber}},set_priority:{priority:{defaultValue:constants["n"],label:i18nTexts.editPolicy.setPriorityFieldLabel,validations:[{validator:ifExistsNumberNonNegative}],serializer:serializers.stringToNumber}}}},cold:{min_age:{defaultValue:"0",validations:[{validator:minAgeValidator}]},actions:{allocate:{number_of_replicas:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.numberOfReplicasLabel",{defaultMessage:"Number of replicas (optional)"}),validations:[{validator:ifExistsNumberGreaterThanZero}],serializer:serializers.stringToNumber}},set_priority:{priority:{defaultValue:"0",label:i18nTexts.editPolicy.setPriorityFieldLabel,validations:[{validator:ifExistsNumberNonNegative}],serializer:serializers.stringToNumber}}}},delete:{min_age:{defaultValue:"0",validations:[{validator:minAgeValidator}]}}}};const NodesDataProvider=({children:children})=>{const _useLoadNodes=Object(api["j"])(),isLoading=_useLoadNodes.isLoading,data=_useLoadNodes.data,error=_useLoadNodes.error,resendRequest=_useLoadNodes.resendRequest;if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}const renderError=()=>{if(error){const statusCode=error.statusCode,message=error.message;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{style:{maxWidth:400},title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.nodeAttributesLoadingFailedTitle",defaultMessage:"Unable to load node attributes"}),color:"danger"},external_kbnSharedDeps_React_default.a.createElement("p",null,message," (",statusCode,")"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:resendRequest,iconType:"refresh",color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.nodeAttributesReloadButton",defaultMessage:"Try again"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}))}return null};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,renderError(),children(data))};const NodeAttrsDetails=({close:close,selectedNodeAttrs:selectedNodeAttrs})=>{const _useLoadNodeDetails=Object(api["i"])(selectedNodeAttrs),data=_useLoadNodeDetails.data,isLoading=_useLoadNodeDetails.isLoading,error=_useLoadNodeDetails.error,resendRequest=_useLoadNodeDetails.resendRequest;let content;if(isLoading){content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingContent"],{lines:3})}else if(error){const statusCode=error.statusCode,message=error.message;content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.nodeDetailsLoadingFailedTitle",defaultMessage:"Unable to load node attribute details"}),color:"danger"},external_kbnSharedDeps_React_default.a.createElement("p",null,message," (",statusCode,")"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:resendRequest,iconType:"refresh",color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.nodeDetailsReloadButton",defaultMessage:"Try again"})))}else{content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:data||[],columns:[{field:"nodeId",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.nodeAttrDetails.idField",{defaultMessage:"ID"})},{field:"stats.name",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.nodeAttrDetails.nameField",{defaultMessage:"Name"})},{field:"stats.host",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.nodeAttrDetails.hostField",{defaultMessage:"Host"})}],pagination:true,sorting:true})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPortal"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{ownFocus:true,onClose:close},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.nodeAttrDetails.title",defaultMessage:"Nodes that contain the attribute {selectedNodeAttrs}",values:{selectedNodeAttrs:selectedNodeAttrs}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),content)))};function node_allocation_slicedToArray(arr,i){return node_allocation_arrayWithHoles(arr)||node_allocation_iterableToArrayLimit(arr,i)||node_allocation_unsupportedIterableToArray(arr,i)||node_allocation_nonIterableRest()}function node_allocation_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function node_allocation_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return node_allocation_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return node_allocation_arrayLikeToArray(o,minLen)}function node_allocation_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function node_allocation_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function node_allocation_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const learnMoreLink=external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{text:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutShardAllocationLink",defaultMessage:"Learn about shard allocation"}),docPath:"modules-cluster.html#cluster-shard-allocation-settings"});const node_allocation_i18nTexts={doNotModifyAllocationOption:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.nodeAllocation.doNotModifyAllocationOption",{defaultMessage:"Do not modify allocation configuration"})};const NodeAllocation=({phase:phase,nodes:nodes})=>{const allocationNodeAttributePath="_meta.".concat(phase,".allocationNodeAttribute");const _useFormData=Object(hook_form_lib_["useFormData"])({watch:[allocationNodeAttributePath]}),_useFormData2=node_allocation_slicedToArray(_useFormData,1),formData=_useFormData2[0];const selectedAllocationNodeAttribute=Object(external_kbnSharedDeps_Lodash_["get"])(formData,allocationNodeAttributePath);const _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=node_allocation_slicedToArray(_useState,2),selectedNodeAttrsForDetails=_useState2[0],setSelectedNodeAttrsForDetails=_useState2[1];const nodeOptions=Object.keys(nodes).map(attrs=>({text:"".concat(attrs," (").concat(nodes[attrs].length,")"),value:attrs}));nodeOptions.sort((a,b)=>a.value.localeCompare(b.value));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.nodeAllocation.customOption.description",defaultMessage:"Use node attributes to control shard allocation. {learnMoreLink}.",values:{learnMoreLink:learnMoreLink}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"_meta.".concat(phase,".allocationNodeAttribute"),component:components_["SelectField"],componentProps:{helpText:!!selectedAllocationNodeAttribute?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",style:{maxWidth:400},"data-test-subj":"".concat(phase,"-viewNodeDetailsFlyoutButton"),flush:"left",onClick:()=>setSelectedNodeAttrsForDetails(selectedAllocationNodeAttribute)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.viewNodeDetailsButton",defaultMessage:"View nodes with the selected attribute"})):undefined,euiFieldProps:{"data-test-subj":"".concat(phase,"-selectedNodeAttrs"),options:[{text:node_allocation_i18nTexts.doNotModifyAllocationOption,value:""}].concat(nodeOptions),hasNoInitialSelection:false}}}),selectedNodeAttrsForDetails?external_kbnSharedDeps_React_default.a.createElement(NodeAttrsDetails,{selectedNodeAttrs:selectedNodeAttrsForDetails,close:()=>setSelectedNodeAttrsForDetails(null)}):null)};var data_tier_allocation=__webpack_require__(37);function data_tier_allocation_slicedToArray(arr,i){return data_tier_allocation_arrayWithHoles(arr)||data_tier_allocation_iterableToArrayLimit(arr,i)||data_tier_allocation_unsupportedIterableToArray(arr,i)||data_tier_allocation_nonIterableRest()}function data_tier_allocation_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function data_tier_allocation_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return data_tier_allocation_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return data_tier_allocation_arrayLikeToArray(o,minLen)}function data_tier_allocation_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function data_tier_allocation_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function data_tier_allocation_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const data_tier_allocation_i18nTexts={allocationOptions:{warm:{default:{input:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.defaultOption.input",{defaultMessage:"Use warm nodes (recommended)"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.defaultOption.helpText",{defaultMessage:"Move data to nodes in the warm tier."})},none:{inputDisplay:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.noneOption.input",{defaultMessage:"Off"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.noneOption.helpText",{defaultMessage:"Do not move data in the warm phase."})},custom:{inputDisplay:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.customOption.input",{defaultMessage:"Custom"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.customOption.helpText",{defaultMessage:"Move data based on node attributes."})}},cold:{default:{input:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.defaultOption.input",{defaultMessage:"Use cold nodes (recommended)"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.defaultOption.helpText",{defaultMessage:"Move data to nodes in the cold tier."})},none:{inputDisplay:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.noneOption.input",{defaultMessage:"Off"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.noneOption.helpText",{defaultMessage:"Do not move data in the cold phase."})},custom:{inputDisplay:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.customOption.input",{defaultMessage:"Custom"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.customOption.helpText",{defaultMessage:"Move data based on node attributes."})}}}};const getSelectOptions=(phase,disableDataTierOption)=>[disableDataTierOption?undefined:{"data-test-subj":"defaultDataAllocationOption",value:"node_roles",inputDisplay:data_tier_allocation_i18nTexts.allocationOptions[phase].default.input,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,data_tier_allocation_i18nTexts.allocationOptions[phase].default.input),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},data_tier_allocation_i18nTexts.allocationOptions[phase].default.helpText)))},{"data-test-subj":"customDataAllocationOption",value:"node_attrs",inputDisplay:data_tier_allocation_i18nTexts.allocationOptions[phase].custom.inputDisplay,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,data_tier_allocation_i18nTexts.allocationOptions[phase].custom.inputDisplay),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},data_tier_allocation_i18nTexts.allocationOptions[phase].custom.helpText)))},{"data-test-subj":"noneDataAllocationOption",value:"none",inputDisplay:data_tier_allocation_i18nTexts.allocationOptions[phase].none.inputDisplay,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,data_tier_allocation_i18nTexts.allocationOptions[phase].none.inputDisplay),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},data_tier_allocation_i18nTexts.allocationOptions[phase].none.helpText)))}].filter(Boolean);const DataTierAllocation=props=>{const phase=props.phase,hasNodeAttributes=props.hasNodeAttributes,disableDataTierOption=props.disableDataTierOption;const dataTierAllocationTypePath="_meta.".concat(phase,".dataTierAllocationType");const _useFormData=Object(hook_form_lib_["useFormData"])({watch:dataTierAllocationTypePath}),_useFormData2=data_tier_allocation_slicedToArray(_useFormData,1),formData=_useFormData2[0];const dataTierAllocationType=Object(external_kbnSharedDeps_Lodash_["get"])(formData,dataTierAllocationTypePath);return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"".concat(phase,"-dataTierAllocationControls")},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:dataTierAllocationTypePath},field=>{if(disableDataTierOption&&field.value==="node_roles"){field.setValue("node_attrs")}return external_kbnSharedDeps_React_default.a.createElement(components_["SuperSelectField"],{field:field,euiFieldProps:{hasDividers:true,"data-test-subj":"dataTierSelect",options:getSelectOptions(phase,disableDataTierOption)}})}),dataTierAllocationType==="node_attrs"&&hasNodeAttributes&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"indexLifecycleManagement__phase__dataTierAllocation__controlSection"},external_kbnSharedDeps_React_default.a.createElement(NodeAllocation,props))))};const i18nTextsNodeRoleToDataTier={data_hot:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.dataTierHotLabel",{defaultMessage:"hot"}),data_warm:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.dataTierWarmLabel",{defaultMessage:"warm"}),data_cold:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.dataTierColdLabel",{defaultMessage:"cold"})};const default_allocation_notice_i18nTexts={notice:{warm:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotice.warm.title",{defaultMessage:"No nodes assigned to the warm tier"}),body:nodeRole=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotice.warm",{defaultMessage:"This policy will move data in the warm phase to {tier} tier nodes instead.",values:{tier:i18nTextsNodeRoleToDataTier[nodeRole]}})},cold:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotice.cold.title",{defaultMessage:"No nodes assigned to the cold tier"}),body:nodeRole=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotice.cold",{defaultMessage:"This policy will move data in the cold phase to {tier} tier nodes instead.",values:{tier:i18nTextsNodeRoleToDataTier[nodeRole]}})}},warning:{warm:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotAvailableTitle",{defaultMessage:"No nodes assigned to the warm tier"}),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotAvailableBody",{defaultMessage:"Assign at least one node to the warm or hot tier to use role-based allocation. The policy will fail to complete allocation if there are no available nodes."})},cold:{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.defaultAllocationNotAvailableTitle",{defaultMessage:"No nodes assigned to the cold tier"}),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.defaultAllocationNotAvailableBody",{defaultMessage:"Assign at least one node to the cold, warm, or hot tier to use role-based allocation. The policy will fail to complete allocation if there are no available nodes."})}}};const DefaultAllocationNotice=({phase:phase,targetNodeRole:targetNodeRole})=>{const content=targetNodeRole==="none"?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"defaultAllocationWarning",title:default_allocation_notice_i18nTexts.warning[phase].title,color:"warning"},default_allocation_notice_i18nTexts.warning[phase].body):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"defaultAllocationNotice",title:default_allocation_notice_i18nTexts.notice[phase].title},default_allocation_notice_i18nTexts.notice[phase].body(targetNodeRole));return content};const no_node_attributes_warning_i18nTexts={title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.nodeAttributesMissingLabel",{defaultMessage:"No custom node attributes configured"}),warm:{body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.warm.nodeAttributesMissingDescription",{defaultMessage:"Define custom node attributes in elasticsearch.yml to use attribute-based allocation."})},cold:{body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.cold.nodeAttributesMissingDescription",{defaultMessage:"Define custom node attributes in elasticsearch.yml to use attribute-based allocation."})}};const NoNodeAttributesWarning=({phase:phase})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"noNodeAttributesWarning",style:{maxWidth:400},title:no_node_attributes_warning_i18nTexts.title,color:"warning"},no_node_attributes_warning_i18nTexts[phase].body);const cloud_data_tier_callout_i18nTexts={title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.cloudDataTierCallout.title",{defaultMessage:"Create a cold tier"}),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.cloudDataTierCallout.body",{defaultMessage:"Edit your Elastic Cloud deployment to set up a cold tier."})};const CloudDataTierCallout=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:cloud_data_tier_callout_i18nTexts.title,"data-test-subj":"cloudDataTierCallout"},cloud_data_tier_callout_i18nTexts.body);function data_tier_allocation_field_slicedToArray(arr,i){return data_tier_allocation_field_arrayWithHoles(arr)||data_tier_allocation_field_iterableToArrayLimit(arr,i)||data_tier_allocation_field_unsupportedIterableToArray(arr,i)||data_tier_allocation_field_nonIterableRest()}function data_tier_allocation_field_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function data_tier_allocation_field_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return data_tier_allocation_field_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return data_tier_allocation_field_arrayLikeToArray(o,minLen)}function data_tier_allocation_field_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function data_tier_allocation_field_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function data_tier_allocation_field_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const data_tier_allocation_field_i18nTexts={title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.common.dataTier.title",{defaultMessage:"Data allocation"})};const DataTierAllocationField=({phase:phase,description:description})=>{const _useKibana=useKibana(),cloud=_useKibana.services.cloud;const dataTierAllocationTypePath="_meta.".concat(phase,".dataTierAllocationType");const _useFormData=Object(hook_form_lib_["useFormData"])({watch:dataTierAllocationTypePath}),_useFormData2=data_tier_allocation_field_slicedToArray(_useFormData,1),formData=_useFormData2[0];const allocationType=Object(external_kbnSharedDeps_Lodash_["get"])(formData,dataTierAllocationTypePath);return external_kbnSharedDeps_React_default.a.createElement(NodesDataProvider,null,({nodesByRoles:nodesByRoles,nodesByAttributes:nodesByAttributes,isUsingDeprecatedDataRoleConfig:isUsingDeprecatedDataRoleConfig})=>{var _cloud$isCloudEnabled;const hasDataNodeRoles=Object.keys(nodesByRoles).some(nodeRole=>nodeRole.trim().startsWith("data_"));const hasNodeAttrs=Boolean(Object.keys(nodesByAttributes!==null&&nodesByAttributes!==void 0?nodesByAttributes:{}).length);const isCloudEnabled=(_cloud$isCloudEnabled=cloud===null||cloud===void 0?void 0:cloud.isCloudEnabled)!==null&&_cloud$isCloudEnabled!==void 0?_cloud$isCloudEnabled:false;const renderNotice=()=>{switch(allocationType){case"node_roles":if(isCloudEnabled&&phase==="cold"){var _nodesByRoles$data_co;const isUsingNodeRolesAllocation=!isUsingDeprecatedDataRoleConfig&&hasDataNodeRoles;const hasNoNodesWithNodeRole=!((_nodesByRoles$data_co=nodesByRoles.data_cold)===null||_nodesByRoles$data_co===void 0?void 0:_nodesByRoles$data_co.length);if(isUsingNodeRolesAllocation&&hasNoNodesWithNodeRole){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(CloudDataTierCallout,null))}}const allocationNodeRole=getAvailableNodeRoleForPhase(phase,nodesByRoles);if(allocationNodeRole==="none"||!isNodeRoleFirstPreference(phase,allocationNodeRole)){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(DefaultAllocationNotice,{phase:phase,targetNodeRole:allocationNodeRole}))}break;case"node_attrs":if(!hasNodeAttrs){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(NoNodeAttributesWarning,{phase:phase}))}break;default:return null}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,data_tier_allocation_field_i18nTexts.title),description:description,fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(DataTierAllocation,{hasNodeAttributes:hasNodeAttrs,phase:phase,nodes:nodesByAttributes,disableDataTierOption:Boolean(isCloudEnabled&&!hasDataNodeRoles&&isUsingDeprecatedDataRoleConfig)}),renderNotice())))})};const EditPolicyContext=Object(external_kbnSharedDeps_React_["createContext"])(null);const EditPolicyContextProvider=({value:value,children:children})=>external_kbnSharedDeps_React_default.a.createElement(EditPolicyContext.Provider,{value:value},children);const useEditPolicyContext=()=>{const ctx=Object(external_kbnSharedDeps_React_["useContext"])(EditPolicyContext);if(!ctx){throw new Error("useEditPolicyContext can only be called inside of EditPolicyContext!")}return ctx};const Forcemerge=({phase:phase})=>{const _useEditPolicyContext=useEditPolicyContext(),policy=_useEditPolicyContext.policy;const initialToggleValue=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{var _policy$phases$phase,_policy$phases$phase$;return Boolean((_policy$phases$phase=policy.phases[phase])===null||_policy$phases$phase===void 0?void 0:(_policy$phases$phase$=_policy$phases$phase.actions)===null||_policy$phases$phase$===void 0?void 0:_policy$phases$phase$.forcemerge)},[policy,phase]);return external_kbnSharedDeps_React_default.a.createElement(DescribedFormField,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.forceMerge.enableText",defaultMessage:"Force merge"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.forceMerge.enableExplanationText",defaultMessage:"Reduce the number of segments in your shard by merging smaller files and clearing deleted ones."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"indices-forcemerge.html"})),titleSize:"xs",fullWidth:true,switchProps:{"aria-label":i18nTexts.editPolicy.forceMergeEnabledFieldLabel,"data-test-subj":"".concat(phase,"-forceMergeSwitch"),"aria-controls":"forcemergeContent",label:i18nTexts.editPolicy.forceMergeEnabledFieldLabel,initialValue:initialToggleValue}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement("div",{id:"forcemergeContent","aria-live":"polite",role:"region"},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{key:"phases.".concat(phase,".actions.forcemerge.max_num_segments"),path:"phases.".concat(phase,".actions.forcemerge.max_num_segments"),component:components_["NumericField"],componentProps:{fullWidth:false,euiFieldProps:{"data-test-subj":"".concat(phase,"-selectedForceMergeSegments"),min:1}}}),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{key:"_meta.".concat(phase,".bestCompression"),path:"_meta.".concat(phase,".bestCompression"),component:components_["ToggleField"],componentProps:{hasEmptyLabelSpace:true,euiFieldProps:{"data-test-subj":"".concat(phase,"-bestCompression")}}})))};const SetPriorityInput=({phase:phase})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.indexPriorityText",defaultMessage:"Index priority"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.warmPhase.indexPriorityExplanationText",defaultMessage:"Set the priority for recovering your indices after a node restart. Indices with higher priorities are recovered before indices with lower priorities."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"recovery-prioritization.html"})),titleSize:"xs",fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{key:"phases.".concat(phase,".actions.set_priority.priority"),path:"phases.".concat(phase,".actions.set_priority.priority"),component:components_["NumericField"],componentProps:{fullWidth:false,euiFieldProps:{"data-test-subj":"".concat(phase,"-phaseIndexPriority"),min:0}}}));function getUnitsAriaLabelForPhase(phase){switch(phase){case"warm":return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseWarm.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of warm phase"});case"cold":return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseCold.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of cold phase"});case"delete":return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseDelete.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of delete phase"})}}function getTimingLabelForPhase(phase){switch(phase){case"warm":return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseWarm.minimumAgeLabel",{defaultMessage:"Timing for warm phase"});case"cold":return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseCold.minimumAgeLabel",{defaultMessage:"Timing for cold phase"});case"delete":return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.phaseDelete.minimumAgeLabel",{defaultMessage:"Timing for delete phase"})}}function min_age_input_field_slicedToArray(arr,i){return min_age_input_field_arrayWithHoles(arr)||min_age_input_field_iterableToArrayLimit(arr,i)||min_age_input_field_unsupportedIterableToArray(arr,i)||min_age_input_field_nonIterableRest()}function min_age_input_field_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function min_age_input_field_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return min_age_input_field_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return min_age_input_field_arrayLikeToArray(o,minLen)}function min_age_input_field_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function min_age_input_field_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function min_age_input_field_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const MinAgeInputField=({phase:phase})=>{const _useFormData=Object(hook_form_lib_["useFormData"])({watch:useRolloverPath}),_useFormData2=min_age_input_field_slicedToArray(_useFormData,1),formData=_useFormData2[0];const rolloverEnabled=Object(external_kbnSharedDeps_Lodash_["get"])(formData,useRolloverPath);let daysOptionLabel;let hoursOptionLabel;let minutesOptionLabel;let secondsOptionLabel;let millisecondsOptionLabel;let microsecondsOptionLabel;let nanosecondsOptionLabel;if(rolloverEnabled){daysOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.rolloverDaysOptionLabel",{defaultMessage:"days from rollover"});hoursOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.rolloverHoursOptionLabel",{defaultMessage:"hours from rollover"});minutesOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.rolloverMinutesOptionLabel",{defaultMessage:"minutes from rollover"});secondsOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.rolloverSecondsOptionLabel",{defaultMessage:"seconds from rollover"});millisecondsOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.rolloverMilliSecondsOptionLabel",{defaultMessage:"milliseconds from rollover"});microsecondsOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.rolloverMicroSecondsOptionLabel",{defaultMessage:"microseconds from rollover"});nanosecondsOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.rolloverNanoSecondsOptionLabel",{defaultMessage:"nanoseconds from rollover"})}else{daysOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.creationDaysOptionLabel",{defaultMessage:"days from index creation"});hoursOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.creationHoursOptionLabel",{defaultMessage:"hours from index creation"});minutesOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.creationMinutesOptionLabel",{defaultMessage:"minutes from index creation"});secondsOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.creationSecondsOptionLabel",{defaultMessage:"seconds from index creation"});millisecondsOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.creationMilliSecondsOptionLabel",{defaultMessage:"milliseconds from index creation"});microsecondsOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.creationMicroSecondsOptionLabel",{defaultMessage:"microseconds from index creation"});nanosecondsOptionLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.creationNanoSecondsOptionLabel",{defaultMessage:"nanoseconds from index creation"})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:140}},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"phases.".concat(phase,".min_age"),component:components_["NumericField"],componentProps:{label:getTimingLabelForPhase(phase),helpText:external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"ilm-index-lifecycle.html#ilm-phase-transitions",text:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutTimingText",defaultMessage:"Learn about timing"})}),euiFieldProps:{"data-test-subj":"".concat(phase,"-selectedMinimumAge"),min:0}}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:236}},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"_meta.".concat(phase,".minAgeUnit"),component:components_["SelectField"],componentProps:{hasEmptyLabelSpace:true,euiFieldProps:{"data-test-subj":"".concat(phase,"-selectedMinimumAgeUnits"),"aria-label":getUnitsAriaLabelForPhase(phase),options:[{value:"d",text:daysOptionLabel},{value:"h",text:hoursOptionLabel},{value:"m",text:minutesOptionLabel},{value:"s",text:secondsOptionLabel},{value:"ms",text:millisecondsOptionLabel},{value:"micros",text:microsecondsOptionLabel},{value:"nanos",text:nanosecondsOptionLabel}]}}})))};function snapshot_policies_field_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function snapshot_policies_field_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){snapshot_policies_field_ownKeys(Object(source),true).forEach((function(key){snapshot_policies_field_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{snapshot_policies_field_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function snapshot_policies_field_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function snapshot_policies_field_slicedToArray(arr,i){return snapshot_policies_field_arrayWithHoles(arr)||snapshot_policies_field_iterableToArrayLimit(arr,i)||snapshot_policies_field_unsupportedIterableToArray(arr,i)||snapshot_policies_field_nonIterableRest()}function snapshot_policies_field_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function snapshot_policies_field_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return snapshot_policies_field_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return snapshot_policies_field_arrayLikeToArray(o,minLen)}function snapshot_policies_field_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function snapshot_policies_field_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function snapshot_policies_field_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const waitForSnapshotFormField="phases.delete.actions.wait_for_snapshot.policy";const SnapshotPoliciesField=()=>{const _useEditPolicyContext=useEditPolicyContext(),getUrlForApp=_useEditPolicyContext.getUrlForApp;const _useLoadSnapshotPolic=Object(api["l"])(),error=_useLoadSnapshotPolic.error,isLoading=_useLoadSnapshotPolic.isLoading,data=_useLoadSnapshotPolic.data,resendRequest=_useLoadSnapshotPolic.resendRequest;const _useFormData=Object(hook_form_lib_["useFormData"])({watch:waitForSnapshotFormField}),_useFormData2=snapshot_policies_field_slicedToArray(_useFormData,1),formData=_useFormData2[0];const selectedSnapshotPolicy=Object(external_kbnSharedDeps_Lodash_["get"])(formData,waitForSnapshotFormField);const policies=data.map(name=>({label:name,value:name}));const getUrlForSnapshotPolicyWizard=()=>getUrlForApp("management",{path:"data/snapshot_restore/add_policy"});let calloutContent;if(error){calloutContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"policiesErrorCallout",iconType:"help",color:"warning",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesLoadedTitle",defaultMessage:"Unable to load existing policies"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{size:"s",color:"warning",onClick:resendRequest,iconType:"refresh","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.reloadPoliciesLabel",{defaultMessage:"Reload policies"})}))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesLoadedMessage",defaultMessage:"Refresh this field and enter the name of an existing snapshot policy."})))}else if(data.length===0){calloutContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"noPoliciesCallout",iconType:"help",color:"warning",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesCreatedTitle",defaultMessage:"No snapshot policies found"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesCreatedMessage",defaultMessage:"{link} to automate the creation and deletion of cluster snapshots.",values:{link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:getUrlForSnapshotPolicyWizard(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesCreatedLink",{defaultMessage:"Create a snapshot lifecycle policy"}))}})))}else if(selectedSnapshotPolicy&&!data.includes(selectedSnapshotPolicy)){calloutContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"customPolicyCallout",iconType:"help",color:"warning",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.customPolicyTitle",defaultMessage:"Policy name not found"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.customPolicyMessage",defaultMessage:"Enter the name of an existing snapshot policy, or {link} with this name.",values:{link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:getUrlForSnapshotPolicyWizard(),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.customPolicyLink",{defaultMessage:"create a new policy"}))}})))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:waitForSnapshotFormField},field=>{const singleSelectionArray=field.value?[field.value]:[];return external_kbnSharedDeps_React_default.a.createElement(components_["ComboBoxField"],{field:snapshot_policies_field_objectSpread(snapshot_policies_field_objectSpread({},field),{},{value:singleSelectionArray}),euiFieldProps:{"data-test-subj":"snapshotPolicyCombobox",options:policies,singleSelection:{asPlainText:true},isLoading:isLoading,noSuggestions:!!(error||data.length===0),onCreateOption:newOption=>{field.setValue(newOption)},onChange:options=>{if(options.length>0){field.setValue(options[0].label)}else{field.setValue("")}}}})}),calloutContent)};const maxSizeStoredUnits=[{value:"gb",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.gigabytesLabel",{defaultMessage:"gigabytes"})},{value:"mb",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.megabytesLabel",{defaultMessage:"megabytes"})},{value:"b",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.bytesLabel",{defaultMessage:"bytes"})},{value:"kb",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.kilobytesLabel",{defaultMessage:"kilobytes"})},{value:"tb",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.terabytesLabel",{defaultMessage:"terabytes"})},{value:"pb",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.petabytesLabel",{defaultMessage:"petabytes"})}];const maxAgeUnits=[{value:"d",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.daysLabel",{defaultMessage:"days"})},{value:"h",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.hoursLabel",{defaultMessage:"hours"})},{value:"m",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.minutesLabel",{defaultMessage:"minutes"})},{value:"s",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.secondsLabel",{defaultMessage:"seconds"})},{value:"ms",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.millisecondsLabel",{defaultMessage:"milliseconds"})},{value:"micros",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.microsecondsLabel",{defaultMessage:"microseconds"})},{value:"nanos",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.nanosecondsLabel",{defaultMessage:"nanoseconds"})}];function hot_phase_slicedToArray(arr,i){return hot_phase_arrayWithHoles(arr)||hot_phase_iterableToArrayLimit(arr,i)||hot_phase_unsupportedIterableToArray(arr,i)||hot_phase_nonIterableRest()}function hot_phase_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hot_phase_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return hot_phase_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hot_phase_arrayLikeToArray(o,minLen)}function hot_phase_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function hot_phase_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function hot_phase_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const hotProperty="hot";const HotPhase=()=>{const _useFormData=Object(hook_form_lib_["useFormData"])({watch:useRolloverPath}),_useFormData2=hot_phase_slicedToArray(_useFormData,1),formData=_useFormData2[0];const isRolloverEnabled=Object(external_kbnSharedDeps_Lodash_["get"])(formData,useRolloverPath);const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=hot_phase_slicedToArray(_useState,2),showEmptyRolloverFieldsError=_useState2[0],setShowEmptyRolloverFieldsError=_useState2[1];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("h2",{className:"eui-displayInlineBlock eui-alignMiddle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.hotPhaseLabel",defaultMessage:"Hot phase"}))," ",external_kbnSharedDeps_React_default.a.createElement(ActiveBadge,null)),titleSize:"s",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.hotPhaseDescriptionMessage",defaultMessage:"This phase is required. You are actively querying and writing to your index.  For faster updates, you can roll over the index when it gets too big or too old."}))),fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{key:"_meta.hot.useRollover",path:"_meta.hot.useRollover",component:components_["ToggleField"],componentProps:{hasEmptyLabelSpace:true,fullWidth:false,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.rolloverDescriptionMessage",defaultMessage:"The new index created by rollover is added to the index alias and designated as the write index."})),external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{text:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.learnAboutRolloverLinkText",defaultMessage:"Learn about rollover"}),docPath:"indices-rollover-index.html"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})),euiFieldProps:{"data-test-subj":"rolloverSwitch"}}}),isRolloverEnabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),showEmptyRolloverFieldsError&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:i18nTexts.editPolicy.errors.rollOverConfigurationCallout.title,"data-test-subj":"rolloverSettingsRequired",color:"danger"},external_kbnSharedDeps_React_default.a.createElement("div",null,i18nTexts.editPolicy.errors.rollOverConfigurationCallout.body)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:188}},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:ROLLOVER_FORM_PATHS.maxSize},field=>{const showErrorCallout=field.errors.some(e=>e.validationType===ROLLOVER_EMPTY_VALIDATION);if(showErrorCallout!==showEmptyRolloverFieldsError){setShowEmptyRolloverFieldsError(showErrorCallout)}return external_kbnSharedDeps_React_default.a.createElement(components_["NumericField"],{field:field,euiFieldProps:{"data-test-subj":"".concat(hotProperty,"-selectedMaxSizeStored"),min:1}})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:188}},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{key:"_meta.hot.maxStorageSizeUnit",path:"_meta.hot.maxStorageSizeUnit",component:components_["SelectField"],componentProps:{"data-test-subj":"".concat(hotProperty,"-selectedMaxSizeStoredUnits"),hasEmptyLabelSpace:true,euiFieldProps:{options:maxSizeStoredUnits,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.maximumIndexSizeUnitsAriaLabel",{defaultMessage:"Maximum index size units"})}}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:188}},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:ROLLOVER_FORM_PATHS.maxDocs,component:components_["NumericField"],componentProps:{euiFieldProps:{"data-test-subj":"".concat(hotProperty,"-selectedMaxDocuments"),min:1}}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:188}},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:ROLLOVER_FORM_PATHS.maxAge,component:components_["NumericField"],componentProps:{euiFieldProps:{"data-test-subj":"".concat(hotProperty,"-selectedMaxAge"),min:1}}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:188}},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{key:"_meta.hot.maxAgeUnit",path:"_meta.hot.maxAgeUnit",component:components_["SelectField"],componentProps:{"data-test-subj":"".concat(hotProperty,"-selectedMaxAgeUnits"),hasEmptyLabelSpace:true,euiFieldProps:{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.hotPhase.maximumAgeUnitsAriaLabel",{defaultMessage:"Maximum age units"}),options:maxAgeUnits}}}))))),isRolloverEnabled&&external_kbnSharedDeps_React_default.a.createElement(Forcemerge,{phase:"hot"}),external_kbnSharedDeps_React_default.a.createElement(SetPriorityInput,{phase:hotProperty}))};function warm_phase_slicedToArray(arr,i){return warm_phase_arrayWithHoles(arr)||warm_phase_iterableToArrayLimit(arr,i)||warm_phase_unsupportedIterableToArray(arr,i)||warm_phase_nonIterableRest()}function warm_phase_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function warm_phase_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return warm_phase_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return warm_phase_arrayLikeToArray(o,minLen)}function warm_phase_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function warm_phase_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function warm_phase_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const warm_phase_i18nTexts={shrinkLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.shrinkIndexLabel",{defaultMessage:"Shrink index"}),dataTierAllocation:{description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.description",{defaultMessage:"Move data to nodes optimized for less-frequent, read-only access."})}};const warmProperty="warm";const formFieldPaths={enabled:"_meta.warm.enabled",warmPhaseOnRollover:"_meta.warm.warmPhaseOnRollover"};const WarmPhase=()=>{var _policy$phases$warm,_policy$phases$warm$a,_policy$phases$warm$a2,_policy$phases$warm2,_policy$phases$warm2$;const _useEditPolicyContext=useEditPolicyContext(),policy=_useEditPolicyContext.policy;const _useFormData=Object(hook_form_lib_["useFormData"])({watch:[useRolloverPath,formFieldPaths.enabled,formFieldPaths.warmPhaseOnRollover]}),_useFormData2=warm_phase_slicedToArray(_useFormData,1),formData=_useFormData2[0];const enabled=Object(external_kbnSharedDeps_Lodash_["get"])(formData,formFieldPaths.enabled);const hotPhaseRolloverEnabled=Object(external_kbnSharedDeps_Lodash_["get"])(formData,useRolloverPath);const warmPhaseOnRollover=Object(external_kbnSharedDeps_Lodash_["get"])(formData,formFieldPaths.warmPhaseOnRollover);return external_kbnSharedDeps_React_default.a.createElement("div",{id:"warmPhaseContent","aria-live":"polite",role:"region","aria-relevant":"additions"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("h2",{className:"eui-displayInlineBlock eui-alignMiddle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.warmPhase.warmPhaseLabel",defaultMessage:"Warm phase"}))," ",enabled&&external_kbnSharedDeps_React_default.a.createElement(ActiveBadge,null)),titleSize:"s",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.warmPhase.warmPhaseDescriptionMessage",defaultMessage:"You are still querying your index, but it is read-only. You can allocate shards to less performant hardware. For faster searches, you can reduce the number of shards and force merge segments."})),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:formFieldPaths.enabled,component:components_["ToggleField"],componentProps:{euiFieldProps:{"data-test-subj":"enablePhaseSwitch-warm","aria-controls":"warmPhaseContent"}}})),fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,enabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,hotPhaseRolloverEnabled&&external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:formFieldPaths.warmPhaseOnRollover,component:components_["ToggleField"],componentProps:{fullWidth:false,euiFieldProps:{"data-test-subj":"".concat(warmProperty,"-warmPhaseOnRollover")}}}),(!warmPhaseOnRollover||!hotPhaseRolloverEnabled)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(MinAgeInputField,{phase:"warm"}))))),enabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(DataTierAllocationField,{description:warm_phase_i18nTexts.dataTierAllocation.description,phase:warmProperty}),external_kbnSharedDeps_React_default.a.createElement(DescribedFormField,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.replicasTitle",{defaultMessage:"Replicas"})),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.warmPhase.numberOfReplicasDescription",{defaultMessage:"Set the number of replicas. Remains the same as the previous phase by default."}),switchProps:{"data-test-subj":"warm-setReplicasSwitch",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.warmPhase.numberOfReplicas.switchLabel",{defaultMessage:"Set replicas"}),initialValue:Boolean((_policy$phases$warm=policy.phases.warm)===null||_policy$phases$warm===void 0?void 0:(_policy$phases$warm$a=_policy$phases$warm.actions)===null||_policy$phases$warm$a===void 0?void 0:(_policy$phases$warm$a2=_policy$phases$warm$a.allocate)===null||_policy$phases$warm$a2===void 0?void 0:_policy$phases$warm$a2.number_of_replicas)},fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"phases.warm.actions.allocate.number_of_replicas",component:components_["NumericField"],componentProps:{fullWidth:false,euiFieldProps:{"data-test-subj":"".concat(warmProperty,"-selectedReplicaCount"),min:0}}})),external_kbnSharedDeps_React_default.a.createElement(DescribedFormField,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.warmPhase.shrinkText",defaultMessage:"Shrink"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.warmPhase.shrinkIndexExplanationText",defaultMessage:"Shrink the index into a new index with fewer primary shards."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"indices-shrink-index.html#indices-shrink-index"})),titleSize:"xs",switchProps:{"aria-controls":"shrinkContent","data-test-subj":"shrinkSwitch",label:warm_phase_i18nTexts.shrinkLabel,"aria-label":warm_phase_i18nTexts.shrinkLabel,initialValue:Boolean((_policy$phases$warm2=policy.phases.warm)===null||_policy$phases$warm2===void 0?void 0:(_policy$phases$warm2$=_policy$phases$warm2.actions)===null||_policy$phases$warm2$===void 0?void 0:_policy$phases$warm2$.shrink)},fullWidth:true},external_kbnSharedDeps_React_default.a.createElement("div",{id:"shrinkContent","aria-live":"polite",role:"region"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"phases.warm.actions.shrink.number_of_shards",component:components_["NumericField"],componentProps:{euiFieldProps:{"data-test-subj":"".concat(warmProperty,"-selectedPrimaryShardCount"),min:1}}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))),external_kbnSharedDeps_React_default.a.createElement(Forcemerge,{phase:"warm"}),external_kbnSharedDeps_React_default.a.createElement(SetPriorityInput,{phase:"warm"}))))};function cold_phase_slicedToArray(arr,i){return cold_phase_arrayWithHoles(arr)||cold_phase_iterableToArrayLimit(arr,i)||cold_phase_unsupportedIterableToArray(arr,i)||cold_phase_nonIterableRest()}function cold_phase_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cold_phase_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return cold_phase_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cold_phase_arrayLikeToArray(o,minLen)}function cold_phase_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function cold_phase_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function cold_phase_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const cold_phase_i18nTexts={dataTierAllocation:{description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.description",{defaultMessage:"Move data to nodes optimized for less frequent, read-only access. Store data in the cold phase on less-expensive hardware."})}};const coldProperty="cold";const cold_phase_formFieldPaths={enabled:"_meta.cold.enabled"};const ColdPhase=()=>{var _policy$phases$cold,_policy$phases$cold$a,_policy$phases$cold$a2;const _useEditPolicyContext=useEditPolicyContext(),policy=_useEditPolicyContext.policy;const _useFormData=Object(hook_form_lib_["useFormData"])({watch:[cold_phase_formFieldPaths.enabled]}),_useFormData2=cold_phase_slicedToArray(_useFormData,1),formData=_useFormData2[0];const enabled=Object(external_kbnSharedDeps_Lodash_["get"])(formData,cold_phase_formFieldPaths.enabled);return external_kbnSharedDeps_React_default.a.createElement("div",{id:"coldPhaseContent","aria-live":"polite",role:"region"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("h2",{className:"eui-displayInlineBlock eui-alignMiddle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.coldPhase.coldPhaseLabel",defaultMessage:"Cold phase"}))," ",enabled&&external_kbnSharedDeps_React_default.a.createElement(ActiveBadge,null)),titleSize:"s",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.coldPhase.coldPhaseDescriptionText",defaultMessage:"You are querying your index less frequently, so you can allocate shards on significantly less performant hardware. Because your queries are slower, you can reduce the number of replicas."})),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:cold_phase_formFieldPaths.enabled,component:components_["ToggleField"],componentProps:{fullWidth:false,euiFieldProps:{"data-test-subj":"enablePhaseSwitch-cold","aria-controls":"coldPhaseContent"}}})),fullWidth:true},enabled&&external_kbnSharedDeps_React_default.a.createElement(MinAgeInputField,{phase:"cold"})),enabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(DataTierAllocationField,{description:cold_phase_i18nTexts.dataTierAllocation.description,phase:coldProperty}),external_kbnSharedDeps_React_default.a.createElement(DescribedFormField,{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.replicasTitle",{defaultMessage:"Replicas"})),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.coldPhase.numberOfReplicasDescription",{defaultMessage:"Set the number of replicas. Remains the same as the previous phase by default."}),switchProps:{"data-test-subj":"cold-setReplicasSwitch",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.coldPhase.numberOfReplicas.switchLabel",{defaultMessage:"Set replicas"}),initialValue:Boolean((_policy$phases$cold=policy.phases.cold)===null||_policy$phases$cold===void 0?void 0:(_policy$phases$cold$a=_policy$phases$cold.actions)===null||_policy$phases$cold$a===void 0?void 0:(_policy$phases$cold$a2=_policy$phases$cold$a.allocate)===null||_policy$phases$cold$a2===void 0?void 0:_policy$phases$cold$a2.number_of_replicas)},fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"phases.cold.actions.allocate.number_of_replicas",component:components_["NumericField"],componentProps:{fullWidth:false,euiFieldProps:{"data-test-subj":"".concat(coldProperty,"-selectedReplicaCount"),min:0}}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.coldPhase.freezeText",defaultMessage:"Freeze"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.coldPhase.freezeIndexExplanationText",defaultMessage:"Make the index read-only and minimize its memory footprint."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"frozen-indices.html"})),fullWidth:true,titleSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:"_meta.cold.freezeEnabled",component:components_["ToggleField"],componentProps:{euiFieldProps:{"data-test-subj":"freezeSwitch"}}})),external_kbnSharedDeps_React_default.a.createElement(SetPriorityInput,{phase:coldProperty}))))};function delete_phase_slicedToArray(arr,i){return delete_phase_arrayWithHoles(arr)||delete_phase_iterableToArrayLimit(arr,i)||delete_phase_unsupportedIterableToArray(arr,i)||delete_phase_nonIterableRest()}function delete_phase_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function delete_phase_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return delete_phase_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return delete_phase_arrayLikeToArray(o,minLen)}function delete_phase_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function delete_phase_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function delete_phase_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const delete_phase_formFieldPaths={enabled:"_meta.delete.enabled"};const DeletePhase=()=>{const _useFormData=Object(hook_form_lib_["useFormData"])({watch:delete_phase_formFieldPaths.enabled}),_useFormData2=delete_phase_slicedToArray(_useFormData,1),formData=_useFormData2[0];const enabled=Object(external_kbnSharedDeps_Lodash_["get"])(formData,delete_phase_formFieldPaths.enabled);return external_kbnSharedDeps_React_default.a.createElement("div",{id:"deletePhaseContent","aria-live":"polite",role:"region"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("h2",{className:"eui-displayInlineBlock eui-alignMiddle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.deletePhaseLabel",defaultMessage:"Delete phase"}))," ",enabled&&external_kbnSharedDeps_React_default.a.createElement(ActiveBadge,null)),titleSize:"s",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.deletePhaseDescriptionText",defaultMessage:"You no longer need your index.  You can define when it is safe to delete it."})),external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:delete_phase_formFieldPaths.enabled,component:components_["ToggleField"],componentProps:{euiFieldProps:{"data-test-subj":"enablePhaseSwitch-delete","aria-controls":"deletePhaseContent"}}})),fullWidth:true},enabled&&external_kbnSharedDeps_React_default.a.createElement(MinAgeInputField,{phase:"delete"})),enabled?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.waitForSnapshotTitle",defaultMessage:"Wait for snapshot policy"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.waitForSnapshotDescription",defaultMessage:"Specify a snapshot policy to be executed before the deletion of the index. This ensures that a snapshot of the deleted index is available."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"ilm-wait-for-snapshot.html"})),titleSize:"xs",fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"deletePhaseWaitForSnapshot",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.waitForSnapshotLabel",defaultMessage:"Snapshot policy name"}),external_kbnSharedDeps_React_default.a.createElement(OptionalLabel,null))},external_kbnSharedDeps_React_default.a.createElement(SnapshotPoliciesField,null))):null)};function edit_policy_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function edit_policy_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){edit_policy_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){edit_policy_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function edit_policy_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function edit_policy_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){edit_policy_ownKeys(Object(source),true).forEach((function(key){edit_policy_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{edit_policy_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function edit_policy_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function edit_policy_slicedToArray(arr,i){return edit_policy_arrayWithHoles(arr)||edit_policy_iterableToArrayLimit(arr,i)||edit_policy_unsupportedIterableToArray(arr,i)||edit_policy_nonIterableRest()}function edit_policy_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function edit_policy_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return edit_policy_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return edit_policy_arrayLikeToArray(o,minLen)}function edit_policy_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function edit_policy_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function edit_policy_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const policyNamePath="name";const EditPolicy=({history:history})=>{Object(external_kbnSharedDeps_React_["useEffect"])(()=>{window.scrollTo(0,0)},[]);const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=edit_policy_slicedToArray(_useState,2),isShowingPolicyJsonFlyout=_useState2[0],setIsShowingPolicyJsonFlyout=_useState2[1];const _useEditPolicyContext=useEditPolicyContext(),isNewPolicy=_useEditPolicyContext.isNewPolicy,currentPolicy=_useEditPolicyContext.policy,existingPolicies=_useEditPolicyContext.existingPolicies,policyName=_useEditPolicyContext.policyName;const serializer=Object(external_kbnSharedDeps_React_["useMemo"])(()=>createSerializer(isNewPolicy?undefined:currentPolicy),[isNewPolicy,currentPolicy]);const _useState3=Object(external_kbnSharedDeps_React_["useState"])(isNewPolicy),_useState4=edit_policy_slicedToArray(_useState3,2),saveAsNew=_useState4[0],setSaveAsNew=_useState4[1];const originalPolicyName=isNewPolicy?"":policyName;const _useForm=Object(hook_form_lib_["useForm"])({schema:schema,defaultValue:edit_policy_objectSpread(edit_policy_objectSpread({},currentPolicy),{},{name:originalPolicyName}),deserializer:deserializer,serializer:serializer}),form=_useForm.form;const _useFormData=Object(hook_form_lib_["useFormData"])({form:form,watch:policyNamePath}),_useFormData2=edit_policy_slicedToArray(_useFormData,1),formData=_useFormData2[0];const currentPolicyName=Object(external_kbnSharedDeps_Lodash_["get"])(formData,policyNamePath);const policyNameValidations=Object(external_kbnSharedDeps_React_["useMemo"])(()=>createPolicyNameValidations({originalPolicyName:originalPolicyName,policies:existingPolicies,saveAsNewPolicy:saveAsNew}),[originalPolicyName,existingPolicies,saveAsNew]);const backToPolicyList=()=>{history.push("/policies")};const submit=function(){var _ref=edit_policy_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$form$submit,policy,isValid,success;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return form.submit();case 2:_yield$form$submit=_context.sent;policy=_yield$form$submit.data;isValid=_yield$form$submit.isValid;if(isValid){_context.next=9;break}notification["c"].addDanger(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.formErrorsMessage",{defaultMessage:"Please fix the errors on this page."}));_context.next=13;break;case 9:_context.next=11;return savePolicy(edit_policy_objectSpread(edit_policy_objectSpread({},policy),{},{name:saveAsNew?currentPolicyName:originalPolicyName}),isNewPolicy||saveAsNew);case 11:success=_context.sent;if(success){backToPolicyList()}case 13:case"end":return _context.stop()}}),_callee)})));return function submit(){return _ref.apply(this,arguments)}}();const togglePolicyJsonFlyout=()=>{setIsShowingPolicyJsonFlyout(!isShowingPolicyJsonFlyout)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPage"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{className:"ilmEditPolicyPageContent",verticalPosition:"center",horizontalPosition:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l","data-test-subj":"policyTitle"},external_kbnSharedDeps_React_default.a.createElement("h1",null,isNewPolicy?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.createPolicyMessage",{defaultMessage:"Create an index lifecycle policy"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.editPolicyMessage",{defaultMessage:"Edit index lifecycle policy {originalPolicyName}",values:{originalPolicyName:originalPolicyName}}))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"euiAnimateContentLoad"},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["Form"],{form:form},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.lifecyclePolicyDescriptionText",defaultMessage:"Use an index policy to automate the four phases of the index lifecycle, from actively writing to the index to deleting it."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"index-lifecycle-management.html",text:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutIndexLifecycleManagementLinkText",defaultMessage:"Learn about the index lifecycle."})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),isNewPolicy?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.editingExistingPolicyMessage",defaultMessage:"You are editing an existing policy"})),"."," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.editingExistingPolicyExplanationMessage",defaultMessage:"Any changes you make will affect the indices that are attached to this policy. Alternatively, you can save these changes in a new policy."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{"data-test-subj":"saveAsNewSwitch",style:{maxWidth:"100%"},checked:saveAsNew,onChange:e=>{setSaveAsNew(e.target.checked)},label:external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.saveAsNewPolicyMessage",defaultMessage:"Save as new policy"}))}))),saveAsNew||isNewPolicy?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("span",{className:"eui-displayInlineBlock eui-alignMiddle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.nameLabel",defaultMessage:"Name"}))),titleSize:"s",fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(hook_form_lib_["UseField"],{path:policyNamePath,config:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.policyNameLabel",{defaultMessage:"Policy name"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.editPolicy.validPolicyNameMessage",{defaultMessage:"A policy name cannot start with an underscore and cannot contain a question mark or a space."}),validations:policyNameValidations},component:components_["TextField"],componentProps:{fullWidth:false,euiFieldProps:{"data-test-subj":"policyNameField"}}})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(HotPhase,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),external_kbnSharedDeps_React_default.a.createElement(WarmPhase,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),external_kbnSharedDeps_React_default.a.createElement(ColdPhase,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),external_kbnSharedDeps_React_default.a.createElement(DeletePhase,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"savePolicyButton",fill:true,iconType:"check",iconSide:"left",disabled:form.isValid===false||form.isSubmitting,onClick:submit,color:"secondary"},saveAsNew?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.saveAsNewButton",defaultMessage:"Save as new policy"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.saveButton",defaultMessage:"Save policy"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"cancelTestPolicy",onClick:backToPolicyList},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.cancelButton",defaultMessage:"Cancel"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:togglePolicyJsonFlyout,"data-test-subj":"requestButton"},isShowingPolicyJsonFlyout?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.hidePolicyJsonButto",defaultMessage:"Hide request"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.showPolicyJsonButto",defaultMessage:"Show request"})))),isShowingPolicyJsonFlyout?external_kbnSharedDeps_React_default.a.createElement(PolicyJsonFlyout,{policyName:saveAsNew?currentPolicyName:policyName,close:()=>setIsShowingPolicyJsonFlyout(false)}):null)))))};const edit_policy_container_EditPolicy=({match:{params:{policyName:policyName}},getUrlForApp:getUrlForApp,history:history})=>{var _existingPolicy$polic;const _useKibana=useKibana(),breadcrumbService=_useKibana.services.breadcrumbService;const _useLoadPoliciesList=Object(api["k"])(false),error=_useLoadPoliciesList.error,isLoading=_useLoadPoliciesList.isLoading,policies=_useLoadPoliciesList.data,resendRequest=_useLoadPoliciesList.resendRequest;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{breadcrumbService.setBreadcrumbs("editPolicy")},[breadcrumbService]);if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"}),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.policiesLoading",defaultMessage:"Loading policies..."})})}if(error||!policies){const _ref=error?error:{statusCode:"",message:""},statusCode=_ref.statusCode,message=_ref.message;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.lifecyclePoliciesLoadingFailedTitle",defaultMessage:"Unable to load existing lifecycle policies"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,message," (",statusCode,")"),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:resendRequest,iconType:"refresh",color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.lifecyclePoliciesReloadButton",defaultMessage:"Try again"}))})}const existingPolicy=getPolicyByName(policies,Object(esUiShared_public_["attemptToURIDecode"])(policyName));return external_kbnSharedDeps_React_default.a.createElement(EditPolicyContextProvider,{value:{isNewPolicy:!(existingPolicy===null||existingPolicy===void 0?void 0:existingPolicy.policy),policyName:Object(esUiShared_public_["attemptToURIDecode"])(policyName),policy:(_existingPolicy$polic=existingPolicy===null||existingPolicy===void 0?void 0:existingPolicy.policy)!==null&&_existingPolicy$polic!==void 0?_existingPolicy$polic:constants["o"],existingPolicies:policies,getUrlForApp:getUrlForApp}},external_kbnSharedDeps_React_default.a.createElement(EditPolicy,{history:history}))};const filterItems=(field,filter,items=[])=>{const lowerFilter=filter.toLowerCase();return items.filter(item=>{const normalizedValue=String(item[field]).toLowerCase();return normalizedValue.includes(lowerFilter)})};const sortTable=(array=[],sortField,isSortAscending)=>{let sorter;if(sortField==="linkedIndices"){sorter=item=>(item[sortField]||[]).length}else{sorter=item=>item[sortField]}const sorted=Object(external_kbnSharedDeps_Lodash_["sortBy"])(array,sorter);return isSortAscending?sorted:sorted.reverse()};var external_kbnSharedDeps_ElasticEuiLibServices_=__webpack_require__(30);var external_kbnSharedDeps_Moment_=__webpack_require__(31);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);var indexManagement_public_=__webpack_require__(32);var navigation=__webpack_require__(11);function add_policy_to_template_confirm_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function add_policy_to_template_confirm_modal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){add_policy_to_template_confirm_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){add_policy_to_template_confirm_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function add_policy_to_template_confirm_modal_slicedToArray(arr,i){return add_policy_to_template_confirm_modal_arrayWithHoles(arr)||add_policy_to_template_confirm_modal_iterableToArrayLimit(arr,i)||add_policy_to_template_confirm_modal_unsupportedIterableToArray(arr,i)||add_policy_to_template_confirm_modal_nonIterableRest()}function add_policy_to_template_confirm_modal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function add_policy_to_template_confirm_modal_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return add_policy_to_template_confirm_modal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return add_policy_to_template_confirm_modal_arrayLikeToArray(o,minLen)}function add_policy_to_template_confirm_modal_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function add_policy_to_template_confirm_modal_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function add_policy_to_template_confirm_modal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const AddPolicyToTemplateConfirmModal=({policy:policy,onCancel:onCancel})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=add_policy_to_template_confirm_modal_slicedToArray(_useState,2),isLegacy=_useState2[0],setIsLegacy=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(""),_useState4=add_policy_to_template_confirm_modal_slicedToArray(_useState3,2),templateName=_useState4[0],setTemplateName=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(""),_useState6=add_policy_to_template_confirm_modal_slicedToArray(_useState5,2),aliasName=_useState6[0],setAliasName=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])(""),_useState8=add_policy_to_template_confirm_modal_slicedToArray(_useState7,2),templateError=_useState8[0],setTemplateError=_useState8[1];const _useLoadIndexTemplate=Object(api["h"])(isLegacy),error=_useLoadIndexTemplate.error,isLoading=_useLoadIndexTemplate.isLoading,templates=_useLoadIndexTemplate.data,resendRequest=_useLoadIndexTemplate.resendRequest;const renderTemplateHasPolicyWarning=()=>{var _selectedTemplate$set,_selectedTemplate$set2,_selectedTemplate$set3;const selectedTemplate=templates.find(template=>template.name===templateName);const existingPolicyName=selectedTemplate===null||selectedTemplate===void 0?void 0:(_selectedTemplate$set=selectedTemplate.settings)===null||_selectedTemplate$set===void 0?void 0:(_selectedTemplate$set2=_selectedTemplate$set.index)===null||_selectedTemplate$set2===void 0?void 0:(_selectedTemplate$set3=_selectedTemplate$set2.lifecycle)===null||_selectedTemplate$set3===void 0?void 0:_selectedTemplate$set3.name;if(!existingPolicyName){return}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{style:{maxWidth:400},title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.templateHasPolicyWarningTitle",defaultMessage:"Template already has policy"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyToTemplateConfirmModal.indexHasNoAliasesWarningMessage",defaultMessage:"This index template already has the policy {existingPolicyName} attached to it. Adding this policy will overwrite that configuration.",values:{existingPolicyName:existingPolicyName}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))};const renderUnableToLoadTemplatesCallout=()=>{const _ref=error,_ref$statusCode=_ref.statusCode,statusCode=_ref$statusCode===void 0?"":_ref$statusCode,_ref$message=_ref.message,message=_ref$message===void 0?"":_ref$message;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{style:{maxWidth:400},title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.errorLoadingTemplatesTitle",defaultMessage:"Unable to load index templates"}),color:"danger"},external_kbnSharedDeps_React_default.a.createElement("p",null,message," (",statusCode,")"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{isLoading:isLoading,color:"danger",onClick:resendRequest},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyToTemplateConfirmModal.errorLoadingTemplatesButton",defaultMessage:"Try again"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))};const renderAliasFormElement=()=>{var _policy$policy$phases;const showAliasTextInput=(_policy$policy$phases=policy.policy.phases.hot)===null||_policy$policy$phases===void 0?void 0:_policy$policy$phases.actions.rollover;if(!showAliasTextInput){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.rolloverAliasLabel",defaultMessage:"Alias for rollover index"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{value:aliasName,onChange:e=>{setAliasName(e.target.value)}}))};const renderForm=()=>{let options=[];if(templates){options=templates.map(({name:name})=>({label:name}))}const onComboChange=comboOptions=>{setTemplateError("");setTemplateName(comboOptions.length>0?comboOptions[0].label:"")};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.showLegacyTemplates",defaultMessage:"Show legacy index templates"}),checked:isLegacy,onChange:e=>{setTemplateName("");setIsLegacy(e.target.checked)}})),error?renderUnableToLoadTemplatesCallout():external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,renderTemplateHasPolicyWarning(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{isInvalid:!!templateError,error:templateError,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.chooseTemplateLabel",defaultMessage:"Index template"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{isLoading:isLoading,placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.chooseTemplateMessage",{defaultMessage:"Select an index template"}),options:options,selectedOptions:templateName?[{label:templateName}]:[],onChange:onComboChange,singleSelection:{asPlainText:true},isClearable:true}))),renderAliasFormElement())};const addPolicyToTemplate=function(){var _ref2=add_policy_to_template_confirm_modal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var policyName,message,title;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:policyName=policy.name;if(templateName){_context.next=4;break}setTemplateError(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.noTemplateSelectedErrorMessage",{defaultMessage:"You must select an index template."}));return _context.abrupt("return");case 4:_context.prev=4;_context.next=7;return Object(api["b"])({policyName:policyName,templateName:templateName,aliasName:aliasName===""?undefined:aliasName},isLegacy);case 7:message=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.successMessage",{defaultMessage:"Added policy {policyName} to index template {templateName}",values:{policyName:policyName,templateName:templateName}});notification["c"].addSuccess(message);onCancel();_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](4);title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.errorMessage",{defaultMessage:'Error adding policy "{policyName}" to index template {templateName}',values:{policyName:policyName,templateName:templateName}});Object(api_errors["a"])(_context.t0,title);case 16:case"end":return _context.stop()}}),_callee,null,[[4,12]])})));return function addPolicyToTemplate(){return _ref2.apply(this,arguments)}}();const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.title",{defaultMessage:'Add policy "{name}" to index template',values:{name:policy.name}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:title,onCancel:onCancel,onConfirm:addPolicyToTemplate,cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.cancelButton",{defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.confirmButton",{defaultMessage:"Add policy"}),confirmButtonDisabled:isLoading||!!error||!templates},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.explanationText",defaultMessage:"This will apply the lifecycle policy to all indices which match the index template."})," ",external_kbnSharedDeps_React_default.a.createElement(LearnMoreLink,{docPath:"indices-templates.html",text:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutIndexTemplatesLink",defaultMessage:"Learn about index templates"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),renderForm()))};function confirm_delete_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function confirm_delete_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){confirm_delete_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){confirm_delete_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function confirm_delete_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class confirm_delete_ConfirmDelete extends external_kbnSharedDeps_React_["Component"]{constructor(...args){var _this;super(...args);_this=this;confirm_delete_defineProperty(this,"deletePolicy",confirm_delete_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$props,policyToDelete,callback,policyName,message,title;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this$props=_this.props,policyToDelete=_this$props.policyToDelete,callback=_this$props.callback;policyName=policyToDelete.name;_context.prev=2;_context.next=5;return Object(api["c"])(policyName);case 5:message=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.confirmDelete.successMessage",{defaultMessage:"Deleted policy {policyName}",values:{policyName:policyName}});notification["c"].addSuccess(message);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context["catch"](2);title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.confirmDelete.errorMessage",{defaultMessage:"Error deleting policy {policyName}",values:{policyName:policyName}});Object(api_errors["a"])(_context.t0,title);case 13:if(callback){callback()}case 14:case"end":return _context.stop()}}),_callee,null,[[2,9]])}))))}render(){const _this$props2=this.props,policyToDelete=_this$props2.policyToDelete,onCancel=_this$props2.onCancel;const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.confirmDelete.title",{defaultMessage:'Delete policy "{name}"',values:{name:policyToDelete.name}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:title,onCancel:onCancel,onConfirm:this.deletePolicy,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.confirmDelete.cancelButton",defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.confirmDelete.deleteButton",defaultMessage:"Delete"}),buttonColor:"danger"},external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.confirmDelete.undoneWarning",defaultMessage:"You can't recover a deleted policy."}))))}}function table_content_extends(){table_content_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return table_content_extends.apply(this,arguments)}function table_content_slicedToArray(arr,i){return table_content_arrayWithHoles(arr)||table_content_iterableToArrayLimit(arr,i)||table_content_unsupportedIterableToArray(arr,i)||table_content_nonIterableRest()}function table_content_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function table_content_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return table_content_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return table_content_arrayLikeToArray(o,minLen)}function table_content_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function table_content_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function table_content_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const COLUMNS=[["name",{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.headers.nameHeader",{defaultMessage:"Name"}),width:200}],["linkedIndices",{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.headers.linkedIndicesHeader",{defaultMessage:"Linked indices"}),width:120}],["version",{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.headers.versionHeader",{defaultMessage:"Version"}),width:120}],["modified_date",{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.headers.modifiedDateHeader",{defaultMessage:"Modified date"}),width:200}]];const TableContent=({policies:policies,totalNumber:totalNumber,navigateToApp:navigateToApp,setConfirmModal:setConfirmModal,handleDelete:handleDelete,history:history})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(),_useState2=table_content_slicedToArray(_useState,2),popoverPolicy=_useState2[0],setPopoverPolicy=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])({sortField:"name",isSortAscending:true}),_useState4=table_content_slicedToArray(_useState3,2),sort=_useState4[0],setSort=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(10),_useState6=table_content_slicedToArray(_useState5,2),pageSize=_useState6[0],setPageSize=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])(0),_useState8=table_content_slicedToArray(_useState7,2),currentPage=_useState8[0],setCurrentPage=_useState8[1];let sortedPolicies=sortTable(policies,sort.sortField,sort.isSortAscending);const pager=new external_kbnSharedDeps_ElasticEui_["Pager"](totalNumber,pageSize,currentPage);const firstItemIndex=pager.firstItemIndex,lastItemIndex=pager.lastItemIndex;sortedPolicies=sortedPolicies.slice(firstItemIndex,lastItemIndex+1);const isPolicyPopoverOpen=policyName=>popoverPolicy===policyName;const closePolicyPopover=()=>{setPopoverPolicy("")};const openPolicyPopover=policyName=>{setPopoverPolicy(policyName)};const togglePolicyPopover=policyName=>{if(isPolicyPopoverOpen(policyName)){closePolicyPopover()}else{openPolicyPopover(policyName)}};const _onSort=column=>{const newIsSortAscending=sort.sortField===column?!sort.isSortAscending:true;setSort({sortField:column,isSortAscending:newIsSortAscending})};const headers=[];COLUMNS.forEach(([fieldName,{label:label,width:width}])=>{const isSorted=sort.sortField===fieldName;headers.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableHeaderCell"],{key:fieldName,onSort:()=>_onSort(fieldName),isSorted:isSorted,isSortAscending:sort.isSortAscending,"data-test-subj":"policyTableHeaderCell-".concat(fieldName),className:"policyTable__header--"+fieldName,width:width},label))});headers.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableHeaderCell"],{key:"deleteHeader","data-test-subj":"policyTableHeaderCell-delete",width:150}));const buildActionPanelTree=policy=>{const hasLinkedIndices=Boolean(policy.linkedIndices&&policy.linkedIndices.length);const viewIndicesLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.viewIndicesButtonText",{defaultMessage:"View indices linked to policy"});const addPolicyToTemplateLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.addPolicyToTemplateButtonText",{defaultMessage:"Add policy to index template"});const deletePolicyLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.deletePolicyButtonText",{defaultMessage:"Delete policy"});const deletePolicyTooltip=hasLinkedIndices?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.deletePolicyButtonDisabledTooltip",{defaultMessage:"You cannot delete a policy that is being used by an index"}):null;const items=[];if(hasLinkedIndices){items.push({name:viewIndicesLabel,icon:"list",onClick:()=>{navigateToApp("management",{path:"/data/index_management".concat(Object(indexManagement_public_["getIndexListUri"])('ilm.policy:"'.concat(policy.name,'"'),true))})}})}items.push({name:addPolicyToTemplateLabel,icon:"plusInCircle",onClick:()=>{setConfirmModal(renderAddPolicyToTemplateConfirmModal(policy))}});items.push({name:deletePolicyLabel,disabled:hasLinkedIndices,icon:"trash",toolTipContent:deletePolicyTooltip,onClick:()=>{setConfirmModal(renderDeleteConfirmModal(policy))}});const panelTree={id:0,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.policyActionsMenu.panelTitle",{defaultMessage:"Policy options"}),items:items};return[panelTree]};const renderRowCell=(fieldName,value)=>{if(fieldName==="name"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],table_content_extends({"data-test-subj":"policyTablePolicyNameLink"},Object(public_["reactRouterNavigate"])(history,Object(navigation["d"])(value),()=>Object(services_ui_metric["c"])(web["a"].CLICK,constants["f"]))),value)}else if(fieldName==="linkedIndices"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("b",null,value?value.length:"0"))}else if(fieldName==="modified_date"&&value){return external_kbnSharedDeps_Moment_default()(value).format("YYYY-MM-DD HH:mm:ss")}return value};const renderRowCells=policy=>{const name=policy.name;const cells=[];COLUMNS.forEach(([fieldName,{width:width}])=>{const value=policy[fieldName];if(fieldName==="name"){cells.push(external_kbnSharedDeps_React_default.a.createElement("th",{key:"".concat(fieldName,"-").concat(name),className:"euiTableRowCell",scope:"row","data-test-subj":"policyTableCell-".concat(fieldName)},external_kbnSharedDeps_React_default.a.createElement("div",{className:"euiTableCellContent policyTable__content--".concat(fieldName)},renderRowCell(fieldName,value))))}else{cells.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableRowCell"],{key:"".concat(fieldName,"-").concat(name),truncateText:false,"data-test-subj":"policyTableCell-".concat(fieldName),className:"policyTable__content--"+fieldName,width:width},renderRowCell(fieldName,value)))}});const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"policyActionsContextMenuButton",onClick:()=>togglePolicyPopover(policy.name),color:"primary"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.actionsButtonText",{defaultMessage:"Actions"}));cells.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableRowCell"],{align:external_kbnSharedDeps_ElasticEuiLibServices_["RIGHT_ALIGNMENT"],key:"delete-".concat(name),truncateText:false,"data-test-subj":"policyTableCell-actions-".concat(name),style:{width:150}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"contextMenuPolicy",button:button,isOpen:isPolicyPopoverOpen(policy.name),closePopover:closePolicyPopover,panelPaddingSize:"none",anchorPosition:"rightUp",repositionOnScroll:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{initialPanelId:0,panels:buildActionPanelTree(policy)}))));return cells};const rows=sortedPolicies.map(policy=>{const name=policy.name;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableRow"],{key:"".concat(name,"-row")},renderRowCells(policy))});const renderAddPolicyToTemplateConfirmModal=policy=>external_kbnSharedDeps_React_default.a.createElement(AddPolicyToTemplateConfirmModal,{policy:policy,onCancel:()=>setConfirmModal(null)});const renderDeleteConfirmModal=policy=>external_kbnSharedDeps_React_default.a.createElement(confirm_delete_ConfirmDelete,{policyToDelete:policy,callback:handleDelete,onCancel:()=>{setConfirmModal(null)}});const renderPager=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTablePagination"],{activePage:pager.getCurrentPageIndex(),itemsPerPage:pager.itemsPerPage,itemsPerPageOptions:[10,50,100],pageCount:pager.getTotalPages(),onChangeItemsPerPage:setPageSize,onChangePage:setCurrentPage});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTable"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiScreenReaderOnly"],null,external_kbnSharedDeps_React_default.a.createElement("caption",{role:"status","aria-relevant":"text","aria-live":"polite"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.captionText",defaultMessage:"Below is the index lifecycle policy table containing {count, plural, one {# row} other {# rows}} out of {total}.",values:{count:sortedPolicies.length,total:totalNumber}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableHeader"],null,headers),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTableBody"],null,rows)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),policies.length>10?renderPager():null)};function policy_table_extends(){policy_table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return policy_table_extends.apply(this,arguments)}function policy_table_slicedToArray(arr,i){return policy_table_arrayWithHoles(arr)||policy_table_iterableToArrayLimit(arr,i)||policy_table_unsupportedIterableToArray(arr,i)||policy_table_nonIterableRest()}function policy_table_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function policy_table_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return policy_table_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return policy_table_arrayLikeToArray(o,minLen)}function policy_table_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function policy_table_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function policy_table_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const PolicyTable=({policies:policies,history:history,navigateToApp:navigateToApp,updatePolicies:updatePolicies})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(),_useState2=policy_table_slicedToArray(_useState,2),confirmModal=_useState2[0],setConfirmModal=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(""),_useState4=policy_table_slicedToArray(_useState3,2),filter=_useState4[0],setFilter=_useState4[1];const createPolicyButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],policy_table_extends({},Object(public_["reactRouterNavigate"])(history,Object(navigation["c"])()),{fill:true,iconType:"plusInCircle","data-test-subj":"createPolicyButton"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.emptyPrompt.createButtonLabel",defaultMessage:"Create policy"}));let content;if(policies.length>0){const filteredPolicies=filterItems("name",filter,policies);let tableContent;if(filteredPolicies.length>0){tableContent=external_kbnSharedDeps_React_default.a.createElement(TableContent,{policies:filteredPolicies,totalNumber:policies.length,navigateToApp:navigateToApp,setConfirmModal:setConfirmModal,handleDelete:()=>{updatePolicies();setConfirmModal(null)},history:history})}else{tableContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.noMatch.noPolicicesDescription",defaultMessage:"No policies to show"})}content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"l",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{fullWidth:true,value:filter,onChange:event=>{setFilter(event.target.value)},"data-test-subj":"policyTableFilterInput",placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.systempoliciesSearchInputPlaceholder",{defaultMessage:"Search"}),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.policyTable.systempoliciesSearchInputAriaLabel",{defaultMessage:"Search policies"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),tableContent)}else{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{verticalPosition:"center",horizontalPosition:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.emptyPromptTitle",defaultMessage:"Create your first index lifecycle policy"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.emptyPromptDescription",defaultMessage:" An index lifecycle policy helps you manage your indices as they age."}))),actions:createPolicyButton})))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{verticalPosition:"center",horizontalPosition:"center"},confirmModal,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"sectionHeading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.sectionHeading",defaultMessage:"Index Lifecycle Policies"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},createPolicyButton)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.sectionDescription",defaultMessage:"Manage your indices as they age.  Attach a policy to automate when and how to transition an index through its lifecycle."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),content))};const policy_table_container_PolicyTable=({navigateToApp:navigateToApp,history:history})=>{const _useKibana=useKibana(),breadcrumbService=_useKibana.services.breadcrumbService;const _useLoadPoliciesList=Object(api["k"])(true),policies=_useLoadPoliciesList.data,isLoading=_useLoadPoliciesList.isLoading,error=_useLoadPoliciesList.error,resendRequest=_useLoadPoliciesList.resendRequest;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{breadcrumbService.setBreadcrumbs("policies")},[breadcrumbService]);if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"}),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.policiesLoading",defaultMessage:"Loading policies..."})})}if(error){const _ref=error?error:{statusCode:"",message:""},statusCode=_ref.statusCode,message=_ref.message;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.policiesLoadingFailedTitle",defaultMessage:"Unable to load existing lifecycle policies"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,message," (",statusCode,")"),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:resendRequest,iconType:"refresh",color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.policyTable.policiesReloadButton",defaultMessage:"Try again"}))})}return external_kbnSharedDeps_React_default.a.createElement(PolicyTable,{policies:policies||[],history:history,navigateToApp:navigateToApp,updatePolicies:resendRequest})};function app_extends(){app_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return app_extends.apply(this,arguments)}const AppWithRouter=({history:history,navigateToApp:navigateToApp,getUrlForApp:getUrlForApp})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Router"],{history:history},external_kbnSharedDeps_React_default.a.createElement(App,{navigateToApp:navigateToApp,getUrlForApp:getUrlForApp}));const App=({navigateToApp:navigateToApp,getUrlForApp:getUrlForApp})=>{Object(external_kbnSharedDeps_React_["useEffect"])(()=>Object(services_ui_metric["c"])(web["a"].LOADED,ui_metric["a"]),[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Redirect"],{exact:true,from:"/",to:navigation["a"].list}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:navigation["a"].list,render:props=>external_kbnSharedDeps_React_default.a.createElement(policy_table_container_PolicyTable,app_extends({},props,{navigateToApp:navigateToApp}))}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:navigation["a"].edit,render:props=>external_kbnSharedDeps_React_default.a.createElement(edit_policy_container_EditPolicy,app_extends({},props,{getUrlForApp:getUrlForApp}))}))};const renderApp=(element,I18nContext,history,navigateToApp,getUrlForApp,breadcrumbService,cloud)=>{Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(public_["KibanaContextProvider"],{services:{cloud:cloud,breadcrumbService:breadcrumbService}},external_kbnSharedDeps_React_default.a.createElement(AppWithRouter,{history:history,navigateToApp:navigateToApp,getUrlForApp:getUrlForApp}))),element);return()=>Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(element)}}}]);