/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={0:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+"indexLifecycleManagement.chunk."+chunkId+".js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["indexLifecycleManagement_bundle_jsonpfunction"]=window["indexLifecycleManagement_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=21)})([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"p",(function(){return defaultSetPriority}));__webpack_require__.d(__webpack_exports__,"n",(function(){return defaultPhaseIndexPriority}));__webpack_require__.d(__webpack_exports__,"o",(function(){return defaultPolicy}));__webpack_require__.d(__webpack_exports__,"a",(function(){return ui_metric["b"]}));__webpack_require__.d(__webpack_exports__,"j",(function(){return ui_metric["k"]}));__webpack_require__.d(__webpack_exports__,"m",(function(){return ui_metric["n"]}));__webpack_require__.d(__webpack_exports__,"k",(function(){return ui_metric["l"]}));__webpack_require__.d(__webpack_exports__,"h",(function(){return ui_metric["i"]}));__webpack_require__.d(__webpack_exports__,"i",(function(){return ui_metric["j"]}));__webpack_require__.d(__webpack_exports__,"l",(function(){return ui_metric["m"]}));__webpack_require__.d(__webpack_exports__,"b",(function(){return ui_metric["c"]}));__webpack_require__.d(__webpack_exports__,"e",(function(){return ui_metric["f"]}));__webpack_require__.d(__webpack_exports__,"d",(function(){return ui_metric["e"]}));__webpack_require__.d(__webpack_exports__,"c",(function(){return ui_metric["d"]}));__webpack_require__.d(__webpack_exports__,"g",(function(){return ui_metric["h"]}));__webpack_require__.d(__webpack_exports__,"f",(function(){return ui_metric["g"]}));const defaultSetPriority="100";const defaultPhaseIndexPriority="50";const defaultPolicy={name:"",phases:{hot:{actions:{rollover:{max_age:"30d",max_size:"50gb"}}}}};const defaultNewDeletePhase={phaseEnabled:false,selectedMinimumAge:"0",selectedMinimumAgeUnits:"d",waitForSnapshotPolicy:""};const serializedPhaseInitialization={min_age:"0ms",actions:{}};var ui_metric=__webpack_require__(16)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return init}));__webpack_require__.d(__webpack_exports__,"d",(function(){return sendPost}));__webpack_require__.d(__webpack_exports__,"c",(function(){return sendGet}));__webpack_require__.d(__webpack_exports__,"b",(function(){return sendDelete}));__webpack_require__.d(__webpack_exports__,"e",(function(){return useRequest}));var _src_plugins_es_ui_shared_public__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15);var _src_plugins_es_ui_shared_public__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_src_plugins_es_ui_shared_public__WEBPACK_IMPORTED_MODULE_0__);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}let _httpClient;function init(httpClient){_httpClient=httpClient}function getFullPath(path){const apiPrefix="/api/index_lifecycle_management";if(path){return"".concat(apiPrefix,"/").concat(path)}return apiPrefix}function sendPost(path,payload,query){return _httpClient.post(getFullPath(path),{body:JSON.stringify(payload),query:query})}function sendGet(path,query){return _httpClient.get(getFullPath(path),{query:query})}function sendDelete(path){return _httpClient.delete(getFullPath(path))}const useRequest=config=>Object(_src_plugins_es_ui_shared_public__WEBPACK_IMPORTED_MODULE_0__["useRequest"])(_httpClient,_objectSpread(_objectSpread({},config),{},{path:getFullPath(config.path)}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return toasts}));__webpack_require__.d(__webpack_exports__,"a",(function(){return fatalErrors}));__webpack_require__.d(__webpack_exports__,"b",(function(){return init}));let toasts;let fatalErrors;function init(_toasts,_fatalErrors){toasts=_toasts;fatalErrors=_fatalErrors}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return trackUiMetric}));__webpack_require__.d(__webpack_exports__,"b",(function(){return init}));__webpack_require__.d(__webpack_exports__,"a",(function(){return getUiMetricsForPhases}));var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);let trackUiMetric=(metricType,eventName)=>{};function init(usageCollection){if(usageCollection){trackUiMetric=usageCollection.reportUiStats.bind(usageCollection,_constants__WEBPACK_IMPORTED_MODULE_0__["a"])}}function getUiMetricsForPhases(phases){const phaseUiMetrics=[{metric:_constants__WEBPACK_IMPORTED_MODULE_0__["b"],isTracked:()=>Boolean(phases.cold)},{metric:_constants__WEBPACK_IMPORTED_MODULE_0__["e"],isTracked:()=>Boolean(phases.warm)},{metric:_constants__WEBPACK_IMPORTED_MODULE_0__["d"],isTracked:()=>{const isHotPhasePriorityChanged=phases.hot&&phases.hot.actions.set_priority&&phases.hot.actions.set_priority.priority!==parseInt(_constants__WEBPACK_IMPORTED_MODULE_0__["p"],10);const isWarmPhasePriorityChanged=phases.warm&&phases.warm.actions.set_priority&&phases.warm.actions.set_priority.priority!==parseInt(_constants__WEBPACK_IMPORTED_MODULE_0__["n"],10);const isColdPhasePriorityChanged=phases.cold&&phases.cold.actions.set_priority&&phases.cold.actions.set_priority.priority!==parseInt(_constants__WEBPACK_IMPORTED_MODULE_0__["n"],10);return isHotPhasePriorityChanged||isWarmPhasePriorityChanged||isColdPhasePriorityChanged}},{metric:_constants__WEBPACK_IMPORTED_MODULE_0__["c"],isTracked:()=>phases.cold&&phases.cold.actions.freeze}];return phaseUiMetrics.reduce((tracked,{metric:metric,isTracked:isTracked})=>{if(isTracked()){tracked.push(metric)}return tracked},[])}},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"j",(function(){return useLoadNodes}));__webpack_require__.d(__webpack_exports__,"i",(function(){return useLoadNodeDetails}));__webpack_require__.d(__webpack_exports__,"h",(function(){return useLoadIndexTemplates}));__webpack_require__.d(__webpack_exports__,"d",(function(){return loadPolicies}));__webpack_require__.d(__webpack_exports__,"k",(function(){return useLoadPoliciesList}));__webpack_require__.d(__webpack_exports__,"g",(function(){return savePolicy}));__webpack_require__.d(__webpack_exports__,"c",(function(){return deletePolicy}));__webpack_require__.d(__webpack_exports__,"f",(function(){return retryLifecycleForIndex}));__webpack_require__.d(__webpack_exports__,"e",(function(){return removeLifecycleForIndex}));__webpack_require__.d(__webpack_exports__,"a",(function(){return addLifecyclePolicyToIndex}));__webpack_require__.d(__webpack_exports__,"b",(function(){return addLifecyclePolicyToTemplate}));__webpack_require__.d(__webpack_exports__,"l",(function(){return useLoadSnapshotPolicies}));var _kbn_analytics__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);var _constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4);var _ui_metric__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7);var _http__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const useLoadNodes=()=>Object(_http__WEBPACK_IMPORTED_MODULE_3__["e"])({path:"nodes/list",method:"get",initialData:{nodesByAttributes:{},nodesByRoles:{}}});const useLoadNodeDetails=selectedNodeAttrs=>Object(_http__WEBPACK_IMPORTED_MODULE_3__["e"])({path:"nodes/".concat(selectedNodeAttrs,"/details"),method:"get"});const useLoadIndexTemplates=(legacy=false)=>Object(_http__WEBPACK_IMPORTED_MODULE_3__["e"])({path:"templates",query:{legacy:legacy},method:"get",initialData:[]});function loadPolicies(_x){return _loadPolicies.apply(this,arguments)}function _loadPolicies(){_loadPolicies=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(withIndices){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return Object(_http__WEBPACK_IMPORTED_MODULE_3__["c"])("policies",{withIndices:withIndices});case 2:return _context5.abrupt("return",_context5.sent);case 3:case"end":return _context5.stop()}}),_callee5)})));return _loadPolicies.apply(this,arguments)}const useLoadPoliciesList=withIndices=>Object(_http__WEBPACK_IMPORTED_MODULE_3__["e"])({path:"policies",method:"get",query:{withIndices:withIndices}});function savePolicy(_x2){return _savePolicy.apply(this,arguments)}function _savePolicy(){_savePolicy=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(policy){return regeneratorRuntime.wrap((function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return Object(_http__WEBPACK_IMPORTED_MODULE_3__["d"])("policies",policy);case 2:return _context6.abrupt("return",_context6.sent);case 3:case"end":return _context6.stop()}}),_callee6)})));return _savePolicy.apply(this,arguments)}function deletePolicy(_x3){return _deletePolicy.apply(this,arguments)}function _deletePolicy(){_deletePolicy=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(policyName){var response;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:_context7.next=2;return Object(_http__WEBPACK_IMPORTED_MODULE_3__["b"])("policies/".concat(encodeURIComponent(policyName)));case 2:response=_context7.sent;Object(_ui_metric__WEBPACK_IMPORTED_MODULE_2__["c"])(_kbn_analytics__WEBPACK_IMPORTED_MODULE_0__["a"].COUNT,_constants__WEBPACK_IMPORTED_MODULE_1__["k"]);return _context7.abrupt("return",response);case 5:case"end":return _context7.stop()}}),_callee7)})));return _deletePolicy.apply(this,arguments)}const retryLifecycleForIndex=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(indexNames){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Object(_http__WEBPACK_IMPORTED_MODULE_3__["d"])("index/retry",{indexNames:indexNames});case 2:response=_context.sent;Object(_ui_metric__WEBPACK_IMPORTED_MODULE_2__["c"])(_kbn_analytics__WEBPACK_IMPORTED_MODULE_0__["a"].COUNT,_constants__WEBPACK_IMPORTED_MODULE_1__["g"]);return _context.abrupt("return",response);case 5:case"end":return _context.stop()}}),_callee)})));return function retryLifecycleForIndex(_x4){return _ref.apply(this,arguments)}}();const removeLifecycleForIndex=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(indexNames){var response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Object(_http__WEBPACK_IMPORTED_MODULE_3__["d"])("index/remove",{indexNames:indexNames});case 2:response=_context2.sent;Object(_ui_metric__WEBPACK_IMPORTED_MODULE_2__["c"])(_kbn_analytics__WEBPACK_IMPORTED_MODULE_0__["a"].COUNT,_constants__WEBPACK_IMPORTED_MODULE_1__["l"]);return _context2.abrupt("return",response);case 5:case"end":return _context2.stop()}}),_callee2)})));return function removeLifecycleForIndex(_x5){return _ref2.apply(this,arguments)}}();const addLifecyclePolicyToIndex=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(body){var response;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Object(_http__WEBPACK_IMPORTED_MODULE_3__["d"])("index/add",body);case 2:response=_context3.sent;Object(_ui_metric__WEBPACK_IMPORTED_MODULE_2__["c"])(_kbn_analytics__WEBPACK_IMPORTED_MODULE_0__["a"].COUNT,_constants__WEBPACK_IMPORTED_MODULE_1__["h"]);return _context3.abrupt("return",response);case 5:case"end":return _context3.stop()}}),_callee3)})));return function addLifecyclePolicyToIndex(_x6){return _ref3.apply(this,arguments)}}();const addLifecyclePolicyToTemplate=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(body,legacy=false){var response;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Object(_http__WEBPACK_IMPORTED_MODULE_3__["d"])("template",body,{legacy:legacy});case 2:response=_context4.sent;Object(_ui_metric__WEBPACK_IMPORTED_MODULE_2__["c"])(_kbn_analytics__WEBPACK_IMPORTED_MODULE_0__["a"].COUNT,_constants__WEBPACK_IMPORTED_MODULE_1__["i"]);return _context4.abrupt("return",response);case 5:case"end":return _context4.stop()}}),_callee4)})));return function addLifecyclePolicyToTemplate(_x7){return _ref4.apply(this,arguments)}}();const useLoadSnapshotPolicies=()=>Object(_http__WEBPACK_IMPORTED_MODULE_3__["e"])({path:"snapshot_policies",method:"get",initialData:[]})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return phaseToNodePreferenceMap}));__webpack_require__.d(__webpack_exports__,"a",(function(){return PLUGIN}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);const WARM_PHASE_NODE_PREFERENCE=["data_warm","data_hot"];const COLD_PHASE_NODE_PREFERENCE=["data_cold","data_warm","data_hot"];const phaseToNodePreferenceMap=Object.freeze({warm:WARM_PHASE_NODE_PREFERENCE,cold:COLD_PHASE_NODE_PREFERENCE});const basicLicense="basic";const PLUGIN={ID:"index_lifecycle_management",minimumLicenseType:basicLicense,TITLE:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.appTitle",{defaultMessage:"Index Lifecycle Policies"})};const API_BASE_PATH="/api/index_lifecycle_management"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ROUTES}));__webpack_require__.d(__webpack_exports__,"d",(function(){return getPolicyEditPath}));__webpack_require__.d(__webpack_exports__,"c",(function(){return getPolicyCreatePath}));__webpack_require__.d(__webpack_exports__,"b",(function(){return getPoliciesListPath}));const ROUTES={list:"/policies",edit:"/policies/edit/:policyName?",create:"/policies/edit"};const getPolicyEditPath=policyName=>encodeURI("/policies/edit/".concat(encodeURIComponent(policyName)));const getPolicyCreatePath=()=>ROUTES.create;const getPoliciesListPath=()=>ROUTES.list},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return METRIC_TYPE}));function wrapArray(subj){return Array.isArray(subj)?subj:[subj]}class UnreachableCaseError extends Error{constructor(val){super("Unreachable case: ".concat(val))}}function createUiStatsMetric({type:type,appName:appName,eventName:eventName,count:count=1}){return{type:type,appName:appName,eventName:eventName,count:count}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(13);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class application_usage_ApplicationUsage{constructor(){_defineProperty(this,"currentUsage",void 0)}start(){if(window)window.addEventListener("click",()=>this.currentUsage&&this.currentUsage.numberOfClicks++)}appChanged(appId){const currentUsage=this.currentUsage;if(appId){this.currentUsage={type:METRIC_TYPE.APPLICATION_USAGE,appId:appId,startTime:external_kbnSharedDeps_MomentTimezone_default()(),numberOfClicks:0}}else{this.currentUsage=void 0}return currentUsage}}var stats=__webpack_require__(18);function trackUsageAgent(appName){const userAgent=window&&window.navigator&&window.navigator.userAgent||"";return{type:METRIC_TYPE.USER_AGENT,appName:appName,userAgent:userAgent}}let METRIC_TYPE;(function(METRIC_TYPE){METRIC_TYPE["COUNT"]="count";METRIC_TYPE["LOADED"]="loaded";METRIC_TYPE["CLICK"]="click";METRIC_TYPE["USER_AGENT"]="user_agent";METRIC_TYPE["APPLICATION_USAGE"]="application_usage"})(METRIC_TYPE||(METRIC_TYPE={}));function storage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class ReportStorageManager{constructor(storageKey,storage){storage_defineProperty(this,"storageKey",void 0);storage_defineProperty(this,"storage",void 0);this.storageKey=storageKey;this.storage=storage}get(){if(!this.storage)return;return this.storage.get(this.storageKey)}store(report){if(!this.storage)return;this.storage.set(this.storageKey,report)}}function report_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const REPORT_VERSION=1;class report_ReportManager{constructor(report){report_defineProperty(this,"report",void 0);this.report=report||report_ReportManager.createReport()}static createReport(){return{reportVersion:REPORT_VERSION}}clearReport(){this.report=report_ReportManager.createReport()}isReportEmpty(){const _this$report=this.report,uiStatsMetrics=_this$report.uiStatsMetrics,userAgent=_this$report.userAgent,appUsage=_this$report.application_usage;const noUiStats=!uiStatsMetrics||Object.keys(uiStatsMetrics).length===0;const noUserAgent=!userAgent||Object.keys(userAgent).length===0;const noAppUsage=!appUsage||Object.keys(appUsage).length===0;return noUiStats&&noUserAgent&&noAppUsage}incrementStats(count,stats){const _ref=stats||{},_ref$min=_ref.min,min=_ref$min===void 0?0:_ref$min,_ref$max=_ref.max,max=_ref$max===void 0?0:_ref$max,_ref$sum=_ref.sum,sum=_ref$sum===void 0?0:_ref$sum;const newMin=Math.min(min,count);const newMax=Math.max(max,count);const newAvg=newMin+newMax/2;const newSum=sum+count;return{min:newMin,max:newMax,avg:newAvg,sum:newSum}}assignReports(newMetrics){wrapArray(newMetrics).forEach(newMetric=>this.assignReport(this.report,newMetric));return{report:this.report}}static createMetricKey(metric){switch(metric.type){case METRIC_TYPE.USER_AGENT:{const appName=metric.appName,type=metric.type;return"".concat(appName,"-").concat(type)}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{const appName=metric.appName,eventName=metric.eventName,type=metric.type;return"".concat(appName,"-").concat(type,"-").concat(eventName)}case METRIC_TYPE.APPLICATION_USAGE:return metric.appId;default:throw new UnreachableCaseError(metric)}}assignReport(report,metric){const key=report_ReportManager.createMetricKey(metric);switch(metric.type){case METRIC_TYPE.USER_AGENT:{const appName=metric.appName,type=metric.type,userAgent=metric.userAgent;if(userAgent){report.userAgent={[key]:{key:key,appName:appName,type:type,userAgent:metric.userAgent}}}return}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{const appName=metric.appName,type=metric.type,eventName=metric.eventName,count=metric.count;report.uiStatsMetrics=report.uiStatsMetrics||{};const existingStats=(report.uiStatsMetrics[key]||{}).stats;report.uiStatsMetrics[key]={key:key,appName:appName,eventName:eventName,type:type,stats:this.incrementStats(count,existingStats)};return}case METRIC_TYPE.APPLICATION_USAGE:const numberOfClicks=metric.numberOfClicks,startTime=metric.startTime;const minutesOnScreen=external_kbnSharedDeps_MomentTimezone_default()().diff(startTime,"minutes",true);report.application_usage=report.application_usage||{};const appExistingData=report.application_usage[key]||{minutesOnScreen:0,numberOfClicks:0};report.application_usage[key]={minutesOnScreen:appExistingData.minutesOnScreen+minutesOnScreen,numberOfClicks:appExistingData.numberOfClicks+numberOfClicks};break;default:throw new UnreachableCaseError(metric)}}}report_defineProperty(report_ReportManager,"REPORT_VERSION",REPORT_VERSION);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function reporter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class reporter_Reporter{constructor(config){var _this=this;reporter_defineProperty(this,"checkInterval",void 0);reporter_defineProperty(this,"interval",void 0);reporter_defineProperty(this,"lastAppId",void 0);reporter_defineProperty(this,"http",void 0);reporter_defineProperty(this,"reportManager",void 0);reporter_defineProperty(this,"storageManager",void 0);reporter_defineProperty(this,"applicationUsage",void 0);reporter_defineProperty(this,"debug",void 0);reporter_defineProperty(this,"retryCount",0);reporter_defineProperty(this,"maxRetries",3);reporter_defineProperty(this,"started",false);reporter_defineProperty(this,"start",()=>{if(!this.interval){this.interval=setTimeout(()=>{this.interval=undefined;this.sendReports()},this.checkInterval)}if(this.started){return}if(window&&document){window.addEventListener("beforeunload",()=>this.reportApplicationUsage());document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="visible"&&this.lastAppId){this.reportApplicationUsage(this.lastAppId)}else if(document.visibilityState==="hidden"){this.reportApplicationUsage();this.sendReports()}})}this.started=true;this.applicationUsage.start()});reporter_defineProperty(this,"reportUiStats",(appName,type,eventNames,count)=>{const metrics=wrapArray(eventNames).map(eventName=>{this.log("".concat(type," Metric -> (").concat(appName,":").concat(eventName,"):"));const report=createUiStatsMetric({type:type,appName:appName,eventName:eventName,count:count});this.log(report);return report});this.saveToReport(metrics)});reporter_defineProperty(this,"reportUserAgent",appName=>{this.log("Reporting user-agent.");const report=trackUsageAgent(appName);this.saveToReport([report])});reporter_defineProperty(this,"sendReports",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var versionMismatch;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(_this.reportManager.isReportEmpty()){_context.next=13;break}_context.prev=1;_context.next=4;return _this.http(_this.reportManager.report);case 4:_this.flushReport();_context.next=13;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);_this.log("Error Sending Metrics Report ".concat(_context.t0));_this.retryCount=_this.retryCount+1;versionMismatch=_this.reportManager.report.reportVersion!==report_ReportManager.REPORT_VERSION;if(versionMismatch||_this.retryCount>_this.maxRetries){_this.flushReport()}case 13:_this.start();case 14:case"end":return _context.stop()}}),_callee,null,[[1,7]])}))));const http=config.http,storage=config.storage,debug=config.debug,_config$checkInterval=config.checkInterval,checkInterval=_config$checkInterval===void 0?9e4:_config$checkInterval,_config$storageKey=config.storageKey,storageKey=_config$storageKey===void 0?"analytics":_config$storageKey;this.http=http;this.checkInterval=checkInterval;this.applicationUsage=new application_usage_ApplicationUsage;this.storageManager=new ReportStorageManager(storageKey,storage);const storedReport=this.storageManager.get();this.reportManager=new report_ReportManager(storedReport);this.debug=!!debug}saveToReport(newMetrics){this.reportManager.assignReports(newMetrics);this.storageManager.store(this.reportManager.report)}flushReport(){this.retryCount=0;this.reportManager.clearReport();this.storageManager.store(this.reportManager.report)}log(message){if(this.debug){console.debug(message)}}reportApplicationUsage(appId){this.log("Reporting application changed to ".concat(appId));this.lastAppId=appId||this.lastAppId;const appChangedReport=this.applicationUsage.appChanged(appId);if(appChangedReport)this.saveToReport([appChangedReport])}}},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return showApiError}));var _notification__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6);function createToastConfig(error,errorTitle){if(error&&error.body){const _error$body=error.body,errorString=_error$body.error,statusCode=_error$body.statusCode,message=_error$body.message;return{title:errorTitle,text:"".concat(statusCode,": ").concat(errorString,". ").concat(message)}}}function showApiWarning(error,errorTitle){const toastConfig=createToastConfig(error,errorTitle);if(toastConfig){return _notification__WEBPACK_IMPORTED_MODULE_0__["c"].addWarning(toastConfig)}return _notification__WEBPACK_IMPORTED_MODULE_0__["a"].add(error,errorTitle)}function showApiError(error,errorTitle){const toastConfig=createToastConfig(error,errorTitle);if(toastConfig){return _notification__WEBPACK_IMPORTED_MODULE_0__["c"].addDanger(toastConfig)}_notification__WEBPACK_IMPORTED_MODULE_0__["a"].add(error,errorTitle)}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return UIM_APP_NAME}));__webpack_require__.d(__webpack_exports__,"a",(function(){return UIM_APP_LOAD}));__webpack_require__.d(__webpack_exports__,"k",(function(){return UIM_POLICY_CREATE}));__webpack_require__.d(__webpack_exports__,"n",(function(){return UIM_POLICY_UPDATE}));__webpack_require__.d(__webpack_exports__,"l",(function(){return UIM_POLICY_DELETE}));__webpack_require__.d(__webpack_exports__,"i",(function(){return UIM_POLICY_ATTACH_INDEX}));__webpack_require__.d(__webpack_exports__,"j",(function(){return UIM_POLICY_ATTACH_INDEX_TEMPLATE}));__webpack_require__.d(__webpack_exports__,"m",(function(){return UIM_POLICY_DETACH_INDEX}));__webpack_require__.d(__webpack_exports__,"c",(function(){return UIM_CONFIG_COLD_PHASE}));__webpack_require__.d(__webpack_exports__,"f",(function(){return UIM_CONFIG_WARM_PHASE}));__webpack_require__.d(__webpack_exports__,"e",(function(){return UIM_CONFIG_SET_PRIORITY}));__webpack_require__.d(__webpack_exports__,"d",(function(){return UIM_CONFIG_FREEZE_INDEX}));__webpack_require__.d(__webpack_exports__,"h",(function(){return UIM_INDEX_RETRY_STEP}));__webpack_require__.d(__webpack_exports__,"g",(function(){return UIM_EDIT_CLICK}));const UIM_APP_NAME="index_lifecycle_management";const UIM_APP_LOAD="app_load";const UIM_POLICY_CREATE="policy_create";const UIM_POLICY_UPDATE="policy_update";const UIM_POLICY_DELETE="policy_delete";const UIM_POLICY_ATTACH_INDEX="policy_attach_index";const UIM_POLICY_ATTACH_INDEX_TEMPLATE="policy_attach_index_template";const UIM_POLICY_DETACH_INDEX="policy_detach_index";const UIM_CONFIG_COLD_PHASE="config_cold_phase";const UIM_CONFIG_WARM_PHASE="config_warm_phase";const UIM_CONFIG_SET_PRIORITY="config_set_priority";const UIM_CONFIG_FREEZE_INDEX="config_freeze_index";const UIM_INDEX_RETRY_STEP="index_retry_step";const UIM_EDIT_CLICK="edit_click"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return init}));__webpack_require__.d(__webpack_exports__,"a",(function(){return createDocLink}));let skippingDisconnectedClustersUrl;let remoteClustersUrl;let transportPortUrl;let _esDocBasePath;function init(esDocBasePath){_esDocBasePath=esDocBasePath}const createDocLink=docPath=>"".concat(_esDocBasePath).concat(docPath)},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/home/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/management/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_indexLifecycleManagement_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(22);var _node_modules_val_loader_dist_cjs_js_key_indexLifecycleManagement_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_indexLifecycleManagement_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/indexLifecycleManagement/public",__webpack_require__,23)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["indexLifecycleManagement"]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));__webpack_require__.d(__webpack_exports__,"ILM_URL_GENERATOR_ID",(function(){return ILM_URL_GENERATOR_ID}));__webpack_require__.d(__webpack_exports__,"IlmUrlGeneratorState",(function(){return undefined}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);var public_=__webpack_require__(19);var constants=__webpack_require__(10);var services_http=__webpack_require__(5);var documentation=__webpack_require__(17);var ui_metric=__webpack_require__(7);var notification=__webpack_require__(6);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const breadcrumbs=function(){const policies=[{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.breadcrumb.homeLabel",{defaultMessage:"Index Lifecycle Management"}),href:"/policies"}];const editPolicy=[...policies,{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.breadcrumb.editPolicyLabel",{defaultMessage:"Edit policy"}),href:undefined}];return{policies:policies,editPolicy:editPolicy}}();class BreadcrumbService{constructor(){_defineProperty(this,"setBreadcrumbsHandler",void 0)}setup(setBreadcrumbsHandler){this.setBreadcrumbsHandler=setBreadcrumbsHandler}setBreadcrumbs(type){if(!this.setBreadcrumbsHandler){throw new Error("BreadcrumbService#setup() must be called first!")}const newBreadcrumbs=breadcrumbs[type]?[...breadcrumbs[type]]:[...breadcrumbs.policies];const lastBreadcrumb=newBreadcrumbs.pop();newBreadcrumbs.push(_objectSpread(_objectSpread({},lastBreadcrumb),{},{href:undefined}));this.setBreadcrumbsHandler(newBreadcrumbs)}}var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_Lodash_=__webpack_require__(8);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var api=__webpack_require__(9);var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(13);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(3);var navigation=__webpack_require__(11);function index_lifecycle_summary_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const getHeaders=()=>[["policy",external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.lifecyclePolicyHeader",{defaultMessage:"Lifecycle policy"})],["phase",external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.currentPhaseHeader",{defaultMessage:"Current phase"})],["action",external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.currentActionHeader",{defaultMessage:"Current action"})],["action_time_millis",external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.currentActionTimeHeader",{defaultMessage:"Current action time"})],["failed_step",external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.headers.failedStepHeader",{defaultMessage:"Failed step"})]];class index_lifecycle_summary_IndexLifecycleSummary extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);index_lifecycle_summary_defineProperty(this,"toggleStackPopover",()=>{this.setState({showStackPopover:!this.state.showStackPopover})});index_lifecycle_summary_defineProperty(this,"closeStackPopover",()=>{this.setState({showStackPopover:false})});index_lifecycle_summary_defineProperty(this,"togglePhaseExecutionPopover",()=>{this.setState({showPhaseExecutionPopover:!this.state.showPhaseExecutionPopover})});index_lifecycle_summary_defineProperty(this,"closePhaseExecutionPopover",()=>{this.setState({showPhaseExecutionPopover:false})});this.state={showStackPopover:false,showPhaseExecutionPopover:false}}renderStackPopoverButton(ilm){if(!ilm.step_info.stack_trace){return null}const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:this.toggleStackPopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Stack trace",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.stackTraceButton"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"stackPopover",button:button,isOpen:this.state.showStackPopover,closePopover:this.closeStackPopover},external_kbnSharedDeps_React_default.a.createElement("div",{style:{maxHeight:"400px",width:"900px",overflowY:"scroll"}},external_kbnSharedDeps_React_default.a.createElement("pre",null,ilm.step_info.stack_trace)))}renderPhaseExecutionPopoverButton(ilm){const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:this.togglePhaseExecutionPopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Show definition",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.showPhaseDefinitionButton"}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:"phaseDefinition"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],{key:"phaseDefinition_title"},external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Phase definition",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.showPhaseDefinitionDescriptionTitle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],{key:"phaseDefinition_desc"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{key:"phaseExecutionPopover",id:"phaseExecutionPopover",button:button,isOpen:this.state.showPhaseExecutionPopover,closePopover:this.closePhaseExecutionPopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Phase definition",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.phaseDefinitionTitle"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{lang:"json"},JSON.stringify(ilm.phase_execution,null,2)))))}buildRows(){const ilm=this.props.index.ilm;const headers=getHeaders();const rows={left:[],right:[]};headers.forEach(([fieldName,label],arrayIndex)=>{const value=ilm[fieldName];let content;if(fieldName==="action_time_millis"){content=external_kbnSharedDeps_MomentTimezone_default()(value).format("YYYY-MM-DD HH:mm:ss")}else if(fieldName==="policy"){content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:this.props.getUrlForApp("management",{path:"data/index_lifecycle_management/".concat(Object(navigation["d"])(value))})},value)}else{content=value}content=content||"-";const cell=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:String(arrayIndex)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"],{key:fieldName},external_kbnSharedDeps_React_default.a.createElement("strong",null,label)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"],{key:fieldName+"_desc"},content));if(arrayIndex%2===0){rows.left.push(cell)}else{rows.right.push(cell)}});if(ilm.phase_execution){rows.right.push(this.renderPhaseExecutionPopoverButton(ilm))}return rows}render(){const ilm=this.props.index.ilm;if(!ilm.managed){return null}const _this$buildRows=this.buildRows(),left=_this$buildRows.left,right=_this$buildRows.right;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Index lifecycle management",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.summaryTitle"}))),ilm.step_info&&ilm.step_info.type?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Index lifecycle error",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.summaryErrorMessage"}),iconType:"cross"},ilm.step_info.type,": ",ilm.step_info.reason,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),this.renderStackPopoverButton(ilm))):null,ilm.step_info&&ilm.step_info.message&&!ilm.step_info.stack_trace?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"primary",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Action status",id:"xpack.indexLifecycleMgmt.indexLifecycleMgmtSummary.actionStatusTitle"})},ilm.step_info.message)):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{type:"column"},left)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{type:"column"},right))))}}var api_errors=__webpack_require__(14);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function add_lifecycle_confirm_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class add_lifecycle_confirm_modal_AddLifecyclePolicyConfirmModal extends external_kbnSharedDeps_React_["Component"]{constructor(props){var _this;super(props);_this=this;add_lifecycle_confirm_modal_defineProperty(this,"addPolicy",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$props,indexName,closeModal,reloadIndices,_this$state,selectedPolicyName,selectedAlias,body;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this$props=_this.props,indexName=_this$props.indexName,closeModal=_this$props.closeModal,reloadIndices=_this$props.reloadIndices;_this$state=_this.state,selectedPolicyName=_this$state.selectedPolicyName,selectedAlias=_this$state.selectedAlias;if(selectedPolicyName){_context.next=5;break}_this.setState({policyErrorMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.noPolicySelectedErrorMessage",{defaultMessage:"You must select a policy."})});return _context.abrupt("return");case 5:_context.prev=5;body={indexName:indexName,policyName:selectedPolicyName,alias:selectedAlias};_context.next=9;return Object(api["a"])(body);case 9:closeModal();notification["c"].addSuccess(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.addPolicyToIndexSuccess",{defaultMessage:"Added policy {policyName} to index {indexName}.",values:{policyName:selectedPolicyName,indexName:indexName}}));reloadIndices();_context.next=17;break;case 14:_context.prev=14;_context.t0=_context["catch"](5);Object(api_errors["a"])(_context.t0,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.addPolicyToIndexError",{defaultMessage:"Error adding policy to index"}));case 17:case"end":return _context.stop()}}),_callee,null,[[5,14]])}))));add_lifecycle_confirm_modal_defineProperty(this,"renderAliasFormElement",selectedPolicy=>{const selectedAlias=this.state.selectedAlias;const index=this.props.index;const showAliasSelect=selectedPolicy&&Object(external_kbnSharedDeps_Lodash_["get"])(selectedPolicy,"policy.phases.hot.actions.rollover");if(!showAliasSelect){return null}const aliases=index.aliases;if(aliases==="none"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{style:{maxWidth:400},title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.indexHasNoAliasesWarningTitle",defaultMessage:"Index has no aliases"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.indexHasNoAliasesWarningMessage",defaultMessage:"Policy {policyName} is configured for rollover, but index {indexName} does not have an alias, which is required for rollover.",values:{policyName:selectedPolicy===null||selectedPolicy===void 0?void 0:selectedPolicy.name,indexName:index.name}})))}const aliasOptions=aliases.map(alias=>({text:alias,value:alias}));aliasOptions.unshift({text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.chooseAliasMessage",{defaultMessage:"Choose an alias"}),value:""});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.chooseAliasLabel",defaultMessage:"Index rollover alias"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:aliasOptions,value:selectedAlias,onChange:e=>{this.setState({selectedAlias:e.target.value})}}))});this.state={policies:[],selectedPolicyName:"",selectedAlias:""}}renderForm(){const _this$state2=this.state,policies=_this$state2.policies,selectedPolicyName=_this$state2.selectedPolicyName,policyErrorMessage=_this$state2.policyErrorMessage;const selectedPolicy=selectedPolicyName?policies.find(policy=>policy.name===selectedPolicyName):undefined;const options=policies.map(({name:name})=>({value:name,text:name}));options.unshift({value:"",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.choosePolicyMessage",{defaultMessage:"Select a lifecycle policy"})});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{isInvalid:!!policyErrorMessage,error:policyErrorMessage,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.choosePolicyLabel",defaultMessage:"Lifecycle policy"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:options,value:selectedPolicyName,onChange:e=>{this.setState({policyErrorMessage:undefined,selectedPolicyName:e.target.value})}})),this.renderAliasFormElement(selectedPolicy))}componentDidMount(){var _this2=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var policies;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Object(api["d"])(false);case 3:policies=_context2.sent;_this2.setState({policies:policies});_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](0);Object(api_errors["a"])(_context2.t0,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.loadPolicyError",{defaultMessage:"Error loading policy list"}));_this2.props.closeModal();case 11:case"end":return _context2.stop()}}),_callee2,null,[[0,7]])})))()}render(){const policies=this.state.policies;const _this$props2=this.props,indexName=_this$props2.indexName,closeModal=_this$props2.closeModal,getUrlForApp=_this$props2.getUrlForApp;const title=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.modalTitle",defaultMessage:'Add lifecycle policy to "{indexName}"',values:{indexName:indexName}});if(!policies.length){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:closeModal},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,title)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{style:{maxWidth:400},title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.noPoliciesWarningTitle",defaultMessage:"No index lifecycle policies defined"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:getUrlForApp("management",{path:"data/index_lifecycle_management/policies/edit"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.defineLifecyclePolicyLinkText",defaultMessage:"Define lifecycle policy"})))))))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:title,onCancel:closeModal,onConfirm:this.addPolicy,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.cancelButtonText",defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyConfirmModal.addPolicyButtonText",defaultMessage:"Add policy"})},this.renderForm()))}}function remove_lifecycle_confirm_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function remove_lifecycle_confirm_modal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){remove_lifecycle_confirm_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){remove_lifecycle_confirm_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function remove_lifecycle_confirm_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class remove_lifecycle_confirm_modal_RemoveLifecyclePolicyConfirmModal extends external_kbnSharedDeps_React_["Component"]{constructor(...args){var _this;super(...args);_this=this;remove_lifecycle_confirm_modal_defineProperty(this,"removePolicy",remove_lifecycle_confirm_modal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$props,indexNames,closeModal,reloadIndices;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this$props=_this.props,indexNames=_this$props.indexNames,closeModal=_this$props.closeModal,reloadIndices=_this$props.reloadIndices;_context.prev=1;_context.next=4;return Object(api["e"])(indexNames);case 4:closeModal();notification["c"].addSuccess(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.removePolicySuccess",{defaultMessage:"Removed lifecycle policy from {count, plural, one {index} other {indices}}",values:{count:indexNames.length}}));reloadIndices();_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](1);Object(api_errors["a"])(_context.t0,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.removePolicyToIndexError",{defaultMessage:"Error removing policy"}));case 12:case"end":return _context.stop()}}),_callee,null,[[1,9]])}))))}render(){const _this$props2=this.props,closeModal=_this$props2.closeModal,indexNames=_this$props2.indexNames;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.modalTitle",defaultMessage:"Remove lifecycle policy from {count, plural, one {index} other {indices}}",values:{count:indexNames.length}}),onCancel:closeModal,onConfirm:this.removePolicy,cancelButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.cancelButtonText",defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.removePolicyButtonText",defaultMessage:"Remove policy"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.indexLifecycleMgmt.indexManagementTable.removeLifecyclePolicyConfirmModal.removeMessage",defaultMessage:"You are about to remove the index lifecycle policy from {count, plural, one {this index} other {these indices}}. This operation cannot be undone.",values:{count:indexNames.length}})),external_kbnSharedDeps_React_default.a.createElement("ul",null,indexNames.map(indexName=>external_kbnSharedDeps_React_default.a.createElement("li",{key:indexName},indexName))))))}}const stepPath="ilm.step";const retryLifecycleActionExtension=({indices:indices})=>{const allHaveErrors=Object(external_kbnSharedDeps_Lodash_["every"])(indices,index=>index.ilm&&index.ilm.failed_step);if(!allHaveErrors){return null}const indexNames=indices.map(({name:name})=>name);return{requestMethod:api["f"],icon:"play",indexNames:[indexNames],buttonLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.retryIndexLifecycleActionButtonLabel",{defaultMessage:"Retry lifecycle step"}),successMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.retryIndexLifecycleAction.retriedLifecycleMessage",{defaultMessage:"Called retry lifecycle step for: {indexNames}",values:{indexNames:indexNames.map(indexName=>'"'.concat(indexName,'"')).join(", ")}})}};const removeLifecyclePolicyActionExtension=({indices:indices,reloadIndices:reloadIndices})=>{const allHaveIlm=Object(external_kbnSharedDeps_Lodash_["every"])(indices,index=>index.ilm&&index.ilm.managed);if(!allHaveIlm){return null}const indexNames=indices.map(({name:name})=>name);return{renderConfirmModal:closeModal=>external_kbnSharedDeps_React_default.a.createElement(remove_lifecycle_confirm_modal_RemoveLifecyclePolicyConfirmModal,{indexNames:indexNames,closeModal:closeModal,reloadIndices:reloadIndices}),icon:"stopFilled",indexNames:[indexNames],buttonLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.removeIndexLifecycleActionButtonLabel",{defaultMessage:"Remove lifecycle policy"})}};const addLifecyclePolicyActionExtension=({indices:indices,reloadIndices:reloadIndices,getUrlForApp:getUrlForApp})=>{if(indices.length!==1){return null}const index=indices[0];const hasIlm=index.ilm&&index.ilm.managed;if(hasIlm){return null}const indexName=index.name;return{renderConfirmModal:closeModal=>external_kbnSharedDeps_React_default.a.createElement(add_lifecycle_confirm_modal_AddLifecyclePolicyConfirmModal,{indexName:indexName,closeModal:closeModal,index:index,reloadIndices:reloadIndices,getUrlForApp:getUrlForApp}),icon:"plusInCircle",buttonLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.addLifecyclePolicyActionButtonLabel",{defaultMessage:"Add lifecycle policy"})}};const ilmBannerExtension=indices=>{const Query=external_kbnSharedDeps_ElasticEui_["EuiSearchBar"].Query;if(!indices.length){return null}const indicesWithLifecycleErrors=indices.filter(index=>Object(external_kbnSharedDeps_Lodash_["get"])(index,stepPath)==="ERROR");const numIndicesWithLifecycleErrors=indicesWithLifecycleErrors.length;if(!numIndicesWithLifecycleErrors){return null}return{type:"warning",filter:Query.parse("".concat(stepPath,":ERROR")),filterLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexMgmtBanner.filterLabel",{defaultMessage:"Show errors"}),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexMgmtBanner.errorMessage",{defaultMessage:"{ numIndicesWithLifecycleErrors, number}\n          {numIndicesWithLifecycleErrors, plural, one {index has} other {indices have} }\n          lifecycle errors",values:{numIndicesWithLifecycleErrors:numIndicesWithLifecycleErrors}})}};const ilmSummaryExtension=(index,getUrlForApp)=>external_kbnSharedDeps_React_default.a.createElement(index_lifecycle_summary_IndexLifecycleSummary,{index:index,getUrlForApp:getUrlForApp});const ilmFilterExtension=indices=>{const hasIlm=Object(external_kbnSharedDeps_Lodash_["some"])(indices,index=>index.ilm&&index.ilm.managed);if(!hasIlm){return[]}else{return[{type:"field_value_selection",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexMgmtFilter.lifecycleStatusLabel",{defaultMessage:"Lifecycle status"}),multiSelect:false,field:"ilm.managed",options:[{value:true,view:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexMgmtFilter.managedLabel",{defaultMessage:"Managed"})},{value:false,view:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexMgmtFilter.unmanagedLabel",{defaultMessage:"Unmanaged"})}]},{type:"field_value_selection",field:"ilm.phase",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexMgmtFilter.lifecyclePhaseLabel",{defaultMessage:"Lifecycle phase"}),multiSelect:"or",options:[{value:"hot",view:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexMgmtFilter.hotLabel",{defaultMessage:"Hot"})},{value:"warm",view:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexMgmtFilter.warmLabel",{defaultMessage:"Warm"})},{value:"frozen",view:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexMgmtFilter.frozenLabel",{defaultMessage:"Frozen"})},{value:"cold",view:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexMgmtFilter.coldLabel",{defaultMessage:"Cold"})},{value:"delete",view:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.indexMgmtFilter.deleteLabel",{defaultMessage:"Delete"})}]}]}};const addAllExtensions=extensionsService=>{extensionsService.addAction(retryLifecycleActionExtension);extensionsService.addAction(removeLifecyclePolicyActionExtension);extensionsService.addAction(addLifecyclePolicyActionExtension);extensionsService.addBanner(ilmBannerExtension);extensionsService.addSummary(ilmSummaryExtension);extensionsService.addFilter(ilmFilterExtension)};var management_public_=__webpack_require__(20);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function url_generator_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function url_generator_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){url_generator_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){url_generator_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const ILM_URL_GENERATOR_ID="ILM_URL_GENERATOR_ID";const createIlmUrlGenerator=getAppBasePath=>({id:ILM_URL_GENERATOR_ID,createUrl:function(){var _createUrl=url_generator_asyncToGenerator(regeneratorRuntime.mark((function _callee(state){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.t0=state.page;_context.next=_context.t0==="policy_create"?3:_context.t0==="policy_edit"?8:_context.t0==="policies_list"?13:18;break;case 3:_context.t1="";_context.next=6;return getAppBasePath(!!state.absolute);case 6:_context.t2=_context.sent;return _context.abrupt("return",_context.t1.concat.call(_context.t1,_context.t2).concat(Object(navigation["c"])()));case 8:_context.t3="";_context.next=11;return getAppBasePath(!!state.absolute);case 11:_context.t4=_context.sent;return _context.abrupt("return",_context.t3.concat.call(_context.t3,_context.t4).concat(Object(navigation["d"])(state.policyName)));case 13:_context.t5="";_context.next=16;return getAppBasePath(!!state.absolute);case 16:_context.t6=_context.sent;return _context.abrupt("return",_context.t5.concat.call(_context.t5,_context.t6).concat(Object(navigation["b"])()));case 18:case"end":return _context.stop()}}),_callee)})));function createUrl(_x){return _createUrl.apply(this,arguments)}return createUrl}()});const registerUrlGenerator=(coreSetup,management,share)=>{const getAppBasePath=function(){var _ref=url_generator_asyncToGenerator(regeneratorRuntime.mark((function _callee2(absolute=false){var _yield$coreSetup$getS,_yield$coreSetup$getS2,coreStart;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return coreSetup.getStartServices();case 2:_yield$coreSetup$getS=_context2.sent;_yield$coreSetup$getS2=_slicedToArray(_yield$coreSetup$getS,1);coreStart=_yield$coreSetup$getS2[0];return _context2.abrupt("return",coreStart.application.getUrlForApp(management_public_["MANAGEMENT_APP_ID"],{path:management.sections.section.data.getApp(constants["a"].ID).basePath,absolute:absolute}));case 6:case"end":return _context2.stop()}}),_callee2)})));return function getAppBasePath(){return _ref.apply(this,arguments)}}();share.urlGenerators.registerUrlGenerator(createIlmUrlGenerator(getAppBasePath))};function plugin_slicedToArray(arr,i){return plugin_arrayWithHoles(arr)||plugin_iterableToArrayLimit(arr,i)||plugin_unsupportedIterableToArray(arr,i)||plugin_nonIterableRest()}function plugin_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function plugin_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return plugin_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return plugin_arrayLikeToArray(o,minLen)}function plugin_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function plugin_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function plugin_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function plugin_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class plugin_IndexLifecycleManagementPlugin{constructor(initializerContext){this.initializerContext=initializerContext;plugin_defineProperty(this,"breadcrumbService",new BreadcrumbService)}setup(coreSetup,plugins){var _this=this;const _this$initializerCont=this.initializerContext.config.get(),isIndexLifecycleManagementUiEnabled=_this$initializerCont.ui.enabled;if(isIndexLifecycleManagementUiEnabled){const http=coreSetup.http,toasts=coreSetup.notifications.toasts,fatalErrors=coreSetup.fatalErrors,getStartServices=coreSetup.getStartServices;const usageCollection=plugins.usageCollection,management=plugins.management,indexManagement=plugins.indexManagement,home=plugins.home,cloud=plugins.cloud,share=plugins.share;Object(services_http["a"])(http);Object(ui_metric["b"])(usageCollection);Object(notification["b"])(toasts,fatalErrors);management.sections.section.data.registerApp({id:constants["a"].ID,title:constants["a"].TITLE,order:2,mount:function(){var _mount=plugin_asyncToGenerator(regeneratorRuntime.mark((function _callee({element:element,history:history,setBreadcrumbs:setBreadcrumbs}){var _yield$getStartServic,_yield$getStartServic2,coreStart,docTitle,I18nContext,_coreStart$docLinks,ELASTIC_WEBSITE_URL,DOC_LINK_VERSION,_coreStart$applicatio,navigateToApp,getUrlForApp,_yield$import,renderApp,unmountAppCallback;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getStartServices();case 2:_yield$getStartServic=_context.sent;_yield$getStartServic2=plugin_slicedToArray(_yield$getStartServic,1);coreStart=_yield$getStartServic2[0];docTitle=coreStart.chrome.docTitle,I18nContext=coreStart.i18n.Context,_coreStart$docLinks=coreStart.docLinks,ELASTIC_WEBSITE_URL=_coreStart$docLinks.ELASTIC_WEBSITE_URL,DOC_LINK_VERSION=_coreStart$docLinks.DOC_LINK_VERSION,_coreStart$applicatio=coreStart.application,navigateToApp=_coreStart$applicatio.navigateToApp,getUrlForApp=_coreStart$applicatio.getUrlForApp;docTitle.change(constants["a"].TITLE);_this.breadcrumbService.setup(setBreadcrumbs);Object(documentation["b"])("".concat(ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(DOC_LINK_VERSION,"/"));_context.next=11;return __webpack_require__.e(1).then(__webpack_require__.bind(null,46));case 11:_yield$import=_context.sent;renderApp=_yield$import.renderApp;unmountAppCallback=renderApp(element,I18nContext,history,navigateToApp,getUrlForApp,_this.breadcrumbService,cloud);return _context.abrupt("return",()=>{docTitle.reset();unmountAppCallback()});case 15:case"end":return _context.stop()}}),_callee)})));function mount(_x){return _mount.apply(this,arguments)}return mount}()});if(home){home.featureCatalogue.register({id:constants["a"].ID,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.featureCatalogueTitle",{defaultMessage:"Manage index lifecycles"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.indexLifecycleMgmt.featureCatalogueDescription",{defaultMessage:"Define lifecycle policies to automatically perform operations as an index ages."}),icon:"indexSettings",path:"/app/management/data/index_lifecycle_management",showOnHomePage:true,category:public_["FeatureCatalogueCategory"].ADMIN,order:640})}if(indexManagement){addAllExtensions(indexManagement.extensionsService)}registerUrlGenerator(coreSetup,management,share)}}start(){}stop(){}}const public_plugin=initializerContext=>new plugin_IndexLifecycleManagementPlugin(initializerContext)},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/static/forms/hook_form_lib");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/static/forms/components");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/static/forms/helpers");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLibServices},function(module,exports){module.exports=__kbnSharedDeps__.Moment},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/indexManagement/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))}]);