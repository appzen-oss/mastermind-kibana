/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["stackAlerts_bundle_jsonpfunction"]=window["stackAlerts_bundle_jsonpfunction"]||[]).push([[1],[,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(18);case"v7light":return __webpack_require__(20);case"v8dark":return __webpack_require__(22);case"v8light":return __webpack_require__(24)}},function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(19);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actAlertVisualization__chart {\n  height: 224px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(21);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actAlertVisualization__chart {\n  height: 224px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(23);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actAlertVisualization__chart {\n  height: 224px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(25);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actAlertVisualization__chart {\n  height: 224px; }\n",""]);module.exports=exports},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"IndexThresholdAlertTypeExpression",(function(){return IndexThresholdAlertTypeExpression}));__webpack_require__.d(__webpack_exports__,"default",(function(){return IndexThresholdAlertTypeExpression}));var external_kbnSharedDeps_React_=__webpack_require__(2);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(7);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(6);var public_=__webpack_require__(1);var external_kbnSharedDeps_Rxjs_=__webpack_require__(11);var external_kbnSharedDeps_ElasticCharts_=__webpack_require__(12);var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(13);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const INDEX_THRESHOLD_DATA_API_ROOT="/api/triggers_actions_ui/data";function getThresholdAlertVisualizationData(_x){return _getThresholdAlertVisualizationData.apply(this,arguments)}function _getThresholdAlertVisualizationData(){_getThresholdAlertVisualizationData=_asyncToGenerator(regeneratorRuntime.mark((function _callee({model:model,visualizeOptions:visualizeOptions,http:http}){var timeSeriesQueryParams;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:timeSeriesQueryParams={index:model.index,timeField:model.timeField,aggType:model.aggType,aggField:model.aggField,groupBy:model.groupBy,termField:model.termField,termSize:model.termSize,timeWindowSize:model.timeWindowSize,timeWindowUnit:model.timeWindowUnit,dateStart:new Date(visualizeOptions.rangeFrom).toISOString(),dateEnd:new Date(visualizeOptions.rangeTo).toISOString(),interval:visualizeOptions.interval};_context.next=3;return http.post("".concat(INDEX_THRESHOLD_DATA_API_ROOT,"/_time_series_query"),{body:JSON.stringify(timeSeriesQueryParams)});case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}),_callee)})));return _getThresholdAlertVisualizationData.apply(this,arguments)}var parse_duration_=__webpack_require__(14);function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e3){didErr=true;err=_e3},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function visualization_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const customTheme=()=>({lineSeriesStyle:{line:{strokeWidth:3},point:{visible:false}}});const getTimezone=uiSettings=>{const config=uiSettings;const DATE_FORMAT_CONFIG_KEY="dateFormat:tz";const isCustomTimezone=!config.isDefault(DATE_FORMAT_CONFIG_KEY);if(isCustomTimezone){return config.get(DATE_FORMAT_CONFIG_KEY)}const detectedTimezone=external_kbnSharedDeps_MomentTimezone_default.a.tz.guess();if(detectedTimezone){return detectedTimezone}const tzOffset=external_kbnSharedDeps_MomentTimezone_default()().format("Z");return tzOffset};const getDomain=(alertInterval,startAt)=>{const VISUALIZE_INTERVALS=30;let intervalMillis;try{intervalMillis=Object(parse_duration_["parseDuration"])(alertInterval)}catch(err){intervalMillis=1e3*60}return{min:startAt.getTime()-intervalMillis*VISUALIZE_INTERVALS,max:startAt.getTime()}};const DEFAULT_REFRESH_RATE=5e3;var LoadingStateType;(function(LoadingStateType){LoadingStateType[LoadingStateType["FirstLoad"]=0]="FirstLoad";LoadingStateType[LoadingStateType["Refresh"]=1]="Refresh";LoadingStateType[LoadingStateType["Idle"]=2]="Idle"})(LoadingStateType||(LoadingStateType={}));const ThresholdVisualization=({alertParams:alertParams,alertInterval:alertInterval,aggregationTypes:aggregationTypes,comparators:comparators,alertsContext:alertsContext,refreshRateInMilliseconds:refreshRateInMilliseconds=DEFAULT_REFRESH_RATE})=>{const index=alertParams.index,timeField=alertParams.timeField,aggType=alertParams.aggType,aggField=alertParams.aggField,termSize=alertParams.termSize,termField=alertParams.termField,thresholdComparator=alertParams.thresholdComparator,timeWindowSize=alertParams.timeWindowSize,timeWindowUnit=alertParams.timeWindowUnit,groupBy=alertParams.groupBy,threshold=alertParams.threshold;const http=alertsContext.http,toastNotifications=alertsContext.toastNotifications,charts=alertsContext.charts,uiSettings=alertsContext.uiSettings,dataFieldsFormats=alertsContext.dataFieldsFormats;const _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=_slicedToArray(_useState,2),loadingState=_useState2[0],setLoadingState=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(undefined),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(),_useState6=_slicedToArray(_useState5,2),visualizationData=_useState6[0],setVisualizationData=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])(new Date),_useState8=_slicedToArray(_useState7,2),startVisualizationAt=_useState8[0],setStartVisualizationAt=_useState8[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const source=Object(external_kbnSharedDeps_Rxjs_["interval"])(refreshRateInMilliseconds);const subscription=source.subscribe(val=>{setStartVisualizationAt(new Date)});return()=>{subscription.unsubscribe()}},[refreshRateInMilliseconds]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{visualization_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;setLoadingState(loadingState?LoadingStateType.Refresh:LoadingStateType.FirstLoad);_context.t0=setVisualizationData;_context.next=5;return getVisualizationData(alertWithoutActions,visualizeOptions,http);case 5:_context.t1=_context.sent;(0,_context.t0)(_context.t1);_context.next=13;break;case 9:_context.prev=9;_context.t2=_context["catch"](0);if(toastNotifications){toastNotifications.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.stackAlerts.threshold.ui.visualization.unableToLoadVisualizationMessage",{defaultMessage:"Unable to load visualization"})})}setError(_context.t2);case 13:_context.prev=13;setLoadingState(LoadingStateType.Idle);return _context.finish(13);case 16:case"end":return _context.stop()}}),_callee,null,[[0,9,13,16]])})))()},[index,timeField,aggType,aggField,termSize,termField,thresholdComparator,timeWindowSize,timeWindowUnit,groupBy,threshold,startVisualizationAt]);if(!charts||!uiSettings||!dataFieldsFormats){return null}const chartsTheme=charts.theme.useChartsTheme();const chartsBaseTheme=charts.theme.useChartsBaseTheme();const domain=getDomain(alertInterval,startVisualizationAt);const visualizeOptions={rangeFrom:new Date(domain.min).toISOString(),rangeTo:new Date(domain.max).toISOString(),interval:alertInterval};const alertWithoutActions=_objectSpread(_objectSpread({},alertParams),{},{actions:[],type:"threshold"});if(loadingState===LoadingStateType.FirstLoad){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingChart"],{size:"xl"}),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.stackAlerts.threshold.ui.visualization.loadingAlertVisualizationDescription",defaultMessage:"Loading alert visualization…"}))})}if(error){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.stackAlerts.threshold.ui.visualization.errorLoadingAlertVisualizationTitle",defaultMessage:"Cannot load alert visualization",values:{}}),color:"danger",iconType:"alert"},error))}const getThreshold=()=>thresholdComparator?threshold.slice(0,comparators[thresholdComparator].requiredValues):[];if(visualizationData){const alertVisualizationDataKeys=Object.keys(visualizationData);const timezone=getTimezone(uiSettings);const actualThreshold=getThreshold();let maxY=actualThreshold[actualThreshold.length-1];Object.values(visualizationData).forEach(data=>{data.forEach(([,y])=>{if(y>maxY){maxY=y}})});const dateFormatter=Object(external_kbnSharedDeps_ElasticCharts_["niceTimeFormatter"])([domain.min,domain.max]);const aggLabel=aggregationTypes[aggType].text;return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"alertVisualizationChart",style:{position:"relative"}},loadingState===LoadingStateType.Refresh?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"l",style:{position:"absolute",top:"8%",right:"5%"}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null),alertVisualizationDataKeys.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Chart"],{size:["100%",200],renderer:"canvas"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Settings"],{theme:[customTheme(),chartsTheme],baseTheme:chartsBaseTheme,xDomain:domain,showLegend:!!termField,showLegendExtra:true,legendPosition:external_kbnSharedDeps_ElasticCharts_["Position"].Bottom}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Axis"],{id:"bottom",position:external_kbnSharedDeps_ElasticCharts_["Position"].Bottom,showOverlappingTicks:true,tickFormat:dateFormatter}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Axis"],{domain:{max:maxY},id:"left",title:aggLabel,position:external_kbnSharedDeps_ElasticCharts_["Position"].Left}),alertVisualizationDataKeys.map(key=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["LineSeries"],{key:key,id:key,xScaleType:external_kbnSharedDeps_ElasticCharts_["ScaleType"].Time,yScaleType:external_kbnSharedDeps_ElasticCharts_["ScaleType"].Linear,data:visualizationData[key],xAccessor:0,yAccessors:[1],timeZone:timezone})),actualThreshold.map((_value,thresholdIndex)=>{const specId=thresholdIndex===0?"threshold":"threshold".concat(thresholdIndex);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["LineAnnotation"],{key:specId,id:specId,domainType:external_kbnSharedDeps_ElasticCharts_["AnnotationDomainTypes"].YDomain,dataValues:[{dataValue:threshold[thresholdIndex],details:specId}]})})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{size:"s",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.stackAlerts.threshold.ui.visualization.thresholdPreviewChart.noDataTitle",defaultMessage:"No data matches this query"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.stackAlerts.threshold.ui.visualization.thresholdPreviewChart.dataDoesNotExistTextMessage",defaultMessage:"Check that your time range and filters are correct."})))}return null};function getVisualizationData(_x,_x2,_x3){return _getVisualizationData.apply(this,arguments)}function _getVisualizationData(){_getVisualizationData=visualization_asyncToGenerator(regeneratorRuntime.mark((function _callee2(model,visualizeOptions,http){var vizData,result,_iterator,_step,groupMetrics;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getThresholdAlertVisualizationData({model:model,visualizeOptions:visualizeOptions,http:http});case 2:vizData=_context2.sent;result={};_iterator=_createForOfIteratorHelper(vizData.results);try{for(_iterator.s();!(_step=_iterator.n()).done;){groupMetrics=_step.value;result[groupMetrics.group]=groupMetrics.metrics.map(metricResult=>[Date.parse(metricResult[0]),metricResult[1]])}}catch(err){_iterator.e(err)}finally{_iterator.f()}return _context2.abrupt("return",result);case 7:case"end":return _context2.stop()}}),_callee2)})));return _getVisualizationData.apply(this,arguments)}var expression=__webpack_require__(17);function expression_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function expression_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){expression_ownKeys(Object(source),true).forEach((function(key){expression_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{expression_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function expression_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function expression_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function expression_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){expression_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){expression_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function expression_slicedToArray(arr,i){return expression_arrayWithHoles(arr)||expression_iterableToArrayLimit(arr,i)||expression_unsupportedIterableToArray(arr,i)||expression_nonIterableRest()}function expression_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function expression_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return expression_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return expression_arrayLikeToArray(o,minLen)}function expression_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function expression_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function expression_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const DEFAULT_VALUES={AGGREGATION_TYPE:"count",TERM_SIZE:5,THRESHOLD_COMPARATOR:public_["COMPARATORS"].GREATER_THAN,TIME_WINDOW_SIZE:5,TIME_WINDOW_UNIT:"m",THRESHOLD:[1e3],GROUP_BY:"all"};const expressionFieldsWithValidation=["index","timeField","aggField","termSize","termField","threshold0","threshold1","timeWindowSize"];const IndexThresholdAlertTypeExpression=({alertParams:alertParams,alertInterval:alertInterval,setAlertParams:setAlertParams,setAlertProperty:setAlertProperty,errors:errors,alertsContext:alertsContext})=>{const index=alertParams.index,timeField=alertParams.timeField,aggType=alertParams.aggType,aggField=alertParams.aggField,groupBy=alertParams.groupBy,termSize=alertParams.termSize,termField=alertParams.termField,thresholdComparator=alertParams.thresholdComparator,threshold=alertParams.threshold,timeWindowSize=alertParams.timeWindowSize,timeWindowUnit=alertParams.timeWindowUnit;const http=alertsContext.http;const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=expression_slicedToArray(_useState,2),indexPopoverOpen=_useState2[0],setIndexPopoverOpen=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=expression_slicedToArray(_useState3,2),indexPatterns=_useState4[0],setIndexPatterns=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])([]),_useState6=expression_slicedToArray(_useState5,2),esFields=_useState6[0],setEsFields=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])([]),_useState8=expression_slicedToArray(_useState7,2),indexOptions=_useState8[0],setIndexOptions=_useState8[1];const _useState9=Object(external_kbnSharedDeps_React_["useState"])([public_["firstFieldOption"]]),_useState10=expression_slicedToArray(_useState9,2),timeFieldOptions=_useState10[0],setTimeFieldOptions=_useState10[1];const _useState11=Object(external_kbnSharedDeps_React_["useState"])(false),_useState12=expression_slicedToArray(_useState11,2),isIndiciesLoading=_useState12[0],setIsIndiciesLoading=_useState12[1];const hasExpressionErrors=!!Object.keys(errors).find(errorKey=>expressionFieldsWithValidation.includes(errorKey)&&errors[errorKey].length>=1&&alertParams[errorKey]!==undefined);const canShowVizualization=!!Object.keys(errors).find(errorKey=>expressionFieldsWithValidation.includes(errorKey)&&errors[errorKey].length>=1);const expressionErrorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.stackAlerts.threshold.ui.alertParams.fixErrorInExpressionBelowValidationMessage",{defaultMessage:"Expression contains errors."});const setDefaultExpressionValues=function(){var _ref=expression_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var currentEsFields,timeFields;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setAlertProperty("params",expression_objectSpread(expression_objectSpread({},alertParams),{},{aggType:aggType!==null&&aggType!==void 0?aggType:DEFAULT_VALUES.AGGREGATION_TYPE,termSize:termSize!==null&&termSize!==void 0?termSize:DEFAULT_VALUES.TERM_SIZE,thresholdComparator:thresholdComparator!==null&&thresholdComparator!==void 0?thresholdComparator:DEFAULT_VALUES.THRESHOLD_COMPARATOR,timeWindowSize:timeWindowSize!==null&&timeWindowSize!==void 0?timeWindowSize:DEFAULT_VALUES.TIME_WINDOW_SIZE,timeWindowUnit:timeWindowUnit!==null&&timeWindowUnit!==void 0?timeWindowUnit:DEFAULT_VALUES.TIME_WINDOW_UNIT,groupBy:groupBy!==null&&groupBy!==void 0?groupBy:DEFAULT_VALUES.GROUP_BY,threshold:threshold!==null&&threshold!==void 0?threshold:DEFAULT_VALUES.THRESHOLD}));if(!(index&&index.length>0)){_context.next=8;break}_context.next=4;return Object(public_["getFields"])(http,index);case 4:currentEsFields=_context.sent;timeFields=Object(public_["getTimeFieldOptions"])(currentEsFields);setEsFields(currentEsFields);setTimeFieldOptions([public_["firstFieldOption"],...timeFields]);case 8:case"end":return _context.stop()}}),_callee)})));return function setDefaultExpressionValues(){return _ref.apply(this,arguments)}}();const closeIndexPopover=()=>{setIndexPopoverOpen(false);if(timeField===undefined){setAlertParams("timeField","")}};Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const indexPatternsFunction=function(){var _ref2=expression_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.t0=setIndexPatterns;_context2.next=3;return Object(public_["getIndexPatterns"])();case 3:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);case 5:case"end":return _context2.stop()}}),_callee2)})));return function indexPatternsFunction(){return _ref2.apply(this,arguments)}}();indexPatternsFunction()},[]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setDefaultExpressionValues()},[]);const indexPopover=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"indexSelectSearchBox",fullWidth:true,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.stackAlerts.threshold.ui.alertParams.indicesToQueryLabel",defaultMessage:"Indices to query"}),isInvalid:errors.index.length>0&&index!==undefined,error:errors.index,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.stackAlerts.threshold.ui.alertParams.howToBroadenSearchQueryDescription",defaultMessage:"Use * to broaden your query."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{fullWidth:true,async:true,isLoading:isIndiciesLoading,isInvalid:errors.index.length>0&&index!==undefined,noSuggestions:!indexOptions.length,options:indexOptions,"data-test-subj":"thresholdIndexesComboBox",selectedOptions:(index||[]).map(anIndex=>({label:anIndex,value:anIndex})),onChange:function(){var _ref3=expression_asyncToGenerator(regeneratorRuntime.mark((function _callee3(selected){var indices,currentEsFields,timeFields;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:setAlertParams("index",selected.map(aSelected=>aSelected.value));indices=selected.map(s=>s.value);if(!(indices.length===0)){_context3.next=6;break}setTimeFieldOptions([public_["firstFieldOption"]]);setAlertProperty("params",expression_objectSpread(expression_objectSpread({},alertParams),{},{index:indices,aggType:DEFAULT_VALUES.AGGREGATION_TYPE,termSize:DEFAULT_VALUES.TERM_SIZE,thresholdComparator:DEFAULT_VALUES.THRESHOLD_COMPARATOR,timeWindowSize:DEFAULT_VALUES.TIME_WINDOW_SIZE,timeWindowUnit:DEFAULT_VALUES.TIME_WINDOW_UNIT,groupBy:DEFAULT_VALUES.GROUP_BY,threshold:DEFAULT_VALUES.THRESHOLD,timeField:""}));return _context3.abrupt("return");case 6:_context3.next=8;return Object(public_["getFields"])(http,indices);case 8:currentEsFields=_context3.sent;timeFields=Object(public_["getTimeFieldOptions"])(currentEsFields);setEsFields(currentEsFields);setTimeFieldOptions([public_["firstFieldOption"],...timeFields]);case 12:case"end":return _context3.stop()}}),_callee3)})));return function(_x){return _ref3.apply(this,arguments)}}(),onSearchChange:function(){var _ref4=expression_asyncToGenerator(regeneratorRuntime.mark((function _callee4(search){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:setIsIndiciesLoading(true);_context4.t0=setIndexOptions;_context4.next=4;return Object(public_["getIndexOptions"])(http,search,indexPatterns);case 4:_context4.t1=_context4.sent;(0,_context4.t0)(_context4.t1);setIsIndiciesLoading(false);case 7:case"end":return _context4.stop()}}),_callee4)})));return function(_x2){return _ref4.apply(this,arguments)}}(),onBlur:()=>{if(!index){setAlertParams("index",[])}}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{id:"thresholdTimeField",fullWidth:true,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.stackAlerts.threshold.ui.alertParams.timeFieldLabel",defaultMessage:"Time field"}),isInvalid:errors.timeField.length>0&&timeField!==undefined,error:errors.timeField},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{options:timeFieldOptions,isInvalid:errors.timeField.length>0&&timeField!==undefined,fullWidth:true,name:"thresholdTimeField","data-test-subj":"thresholdAlertTimeFieldSelect",value:timeField,onChange:e=>{setAlertParams("timeField",e.target.value)},onBlur:()=>{if(timeField===undefined){setAlertParams("timeField","")}}})));const renderIndices=indices=>{const rows=indices.map((s,i)=>external_kbnSharedDeps_React_default.a.createElement("p",{key:i},s,i<indices.length-1?",":null));return external_kbnSharedDeps_React_default.a.createElement("div",null,rows)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,hasExpressionErrors?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger",size:"s",title:expressionErrorMessage}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.stackAlerts.threshold.ui.selectIndex",defaultMessage:"Select an index"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"indexPopover",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiExpression"],{display:"columns","data-test-subj":"selectIndexExpression",description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.stackAlerts.threshold.ui.alertParams.indexLabel",{defaultMessage:"index"}),value:index&&index.length>0?renderIndices(index):public_["firstFieldOption"].text,isActive:indexPopoverOpen,onClick:()=>{setIndexPopoverOpen(true)},isInvalid:!(index&&index.length>0&&timeField!=="")}),isOpen:indexPopoverOpen,closePopover:closeIndexPopover,ownFocus:true,anchorPosition:"downLeft",zIndex:8e3,display:"block"},external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:"450px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.stackAlerts.threshold.ui.alertParams.indexButtonLabel",{defaultMessage:"index"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"data-test-subj":"closePopover",iconType:"cross",color:"danger","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.stackAlerts.threshold.ui.alertParams.closeIndexPopoverLabel",{defaultMessage:"Close"}),onClick:closeIndexPopover})))),indexPopover)),external_kbnSharedDeps_React_default.a.createElement(public_["WhenExpression"],{display:"fullWidth",aggType:aggType!==null&&aggType!==void 0?aggType:DEFAULT_VALUES.AGGREGATION_TYPE,onChangeSelectedAggType:selectedAggType=>setAlertParams("aggType",selectedAggType)}),aggType&&public_["builtInAggregationTypes"][aggType].fieldRequired?external_kbnSharedDeps_React_default.a.createElement(public_["OfExpression"],{aggField:aggField,fields:esFields,aggType:aggType,errors:errors,display:"fullWidth",onChangeSelectedAggField:selectedAggField=>setAlertParams("aggField",selectedAggField)}):null,external_kbnSharedDeps_React_default.a.createElement(public_["GroupByExpression"],{groupBy:groupBy||DEFAULT_VALUES.GROUP_BY,termField:termField,termSize:termSize,errors:errors,fields:esFields,display:"fullWidth",onChangeSelectedGroupBy:selectedGroupBy=>setAlertParams("groupBy",selectedGroupBy),onChangeSelectedTermField:selectedTermField=>setAlertParams("termField",selectedTermField),onChangeSelectedTermSize:selectedTermSize=>setAlertParams("termSize",selectedTermSize)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.stackAlerts.threshold.ui.conditionPrompt",defaultMessage:"Define the condition"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(public_["ThresholdExpression"],{thresholdComparator:thresholdComparator!==null&&thresholdComparator!==void 0?thresholdComparator:DEFAULT_VALUES.THRESHOLD_COMPARATOR,threshold:threshold,errors:errors,display:"fullWidth",popupPosition:"upLeft",onChangeSelectedThreshold:selectedThresholds=>setAlertParams("threshold",selectedThresholds),onChangeSelectedThresholdComparator:selectedThresholdComparator=>setAlertParams("thresholdComparator",selectedThresholdComparator)}),external_kbnSharedDeps_React_default.a.createElement(public_["ForLastExpression"],{popupPosition:"upLeft",timeWindowSize:timeWindowSize,timeWindowUnit:timeWindowUnit,display:"fullWidth",errors:errors,onChangeWindowSize:selectedWindowSize=>setAlertParams("timeWindowSize",selectedWindowSize),onChangeWindowUnit:selectedWindowUnit=>setAlertParams("timeWindowUnit",selectedWindowUnit)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement("div",{className:"actAlertVisualization__chart"},canShowVizualization?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"visBarVertical",body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.stackAlerts.threshold.ui.previewAlertVisualizationDescription",defaultMessage:"Complete the expression to generate a preview."}))})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(ThresholdVisualization,{alertParams:alertParams,alertInterval:alertInterval,aggregationTypes:public_["builtInAggregationTypes"],comparators:public_["builtInComparators"],alertsContext:alertsContext}))))}}]]);