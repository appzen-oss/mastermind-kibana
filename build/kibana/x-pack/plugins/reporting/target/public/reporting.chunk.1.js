/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["reporting_bundle_jsonpfunction"]=window["reporting_bundle_jsonpfunction"]||[]).push([[1],{37:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"mountManagementSection",(function(){return mountManagementSection}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(36);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(1);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(3);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(4);var external_kbnSharedDeps_Lodash_=__webpack_require__(13);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_Moment_=__webpack_require__(22);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);var constants=__webpack_require__(2);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class poller_Poller{constructor(options){_defineProperty(this,"functionToPoll",void 0);_defineProperty(this,"successFunction",void 0);_defineProperty(this,"errorFunction",void 0);_defineProperty(this,"_isRunning",void 0);_defineProperty(this,"_timeoutId",void 0);_defineProperty(this,"pollFrequencyInMillis",void 0);_defineProperty(this,"trailing",void 0);_defineProperty(this,"continuePollingOnError",void 0);_defineProperty(this,"pollFrequencyErrorMultiplier",void 0);this.functionToPoll=options.functionToPoll;this.successFunction=options.successFunction||external_kbnSharedDeps_Lodash_default.a.noop;this.errorFunction=options.errorFunction||external_kbnSharedDeps_Lodash_default.a.noop;this.pollFrequencyInMillis=options.pollFrequencyInMillis;this.trailing=options.trailing||false;this.continuePollingOnError=options.continuePollingOnError||false;this.pollFrequencyErrorMultiplier=options.pollFrequencyErrorMultiplier||1;this._timeoutId=null;this._isRunning=false}getPollFrequency(){return this.pollFrequencyInMillis}_poll(){return this.functionToPoll().then(this.successFunction).then(()=>{if(!this._isRunning){return}this._timeoutId=setTimeout(this._poll.bind(this),this.pollFrequencyInMillis)}).catch(e=>{this.errorFunction(e);if(!this._isRunning){return}if(this.continuePollingOnError){this._timeoutId=setTimeout(this._poll.bind(this),this.pollFrequencyInMillis*this.pollFrequencyErrorMultiplier)}else{this.stop()}})}start(){if(this._isRunning){return}this._isRunning=true;if(this.trailing){this._timeoutId=setTimeout(this._poll.bind(this),this.pollFrequencyInMillis)}else{this._poll()}}stop(){if(!this._isRunning){return}this._isRunning=false;if(this._timeoutId){clearTimeout(this._timeoutId)}this._timeoutId=null}isRunning(){return this._isRunning}}var schema_utils=__webpack_require__(14);var license_check=__webpack_require__(8);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function report_error_button_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class report_error_button_ReportErrorButtonUi extends external_kbnSharedDeps_React_["Component"]{constructor(props){var _this;super(props);_this=this;report_error_button_defineProperty(this,"mounted",void 0);report_error_button_defineProperty(this,"togglePopover",()=>{this.setState(prevState=>({isPopoverOpen:!prevState.isPopoverOpen}));if(!this.state.error){this.loadError()}});report_error_button_defineProperty(this,"closePopover",()=>{this.setState({isPopoverOpen:false})});report_error_button_defineProperty(this,"loadError",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$props,record,apiClient,intl,reportContent;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this$props=_this.props,record=_this$props.record,apiClient=_this$props.apiClient,intl=_this$props.intl;_this.setState({isLoading:true});_context.prev=2;_context.next=5;return apiClient.getContent(record.id);case 5:reportContent=_context.sent;if(_this.mounted){_this.setState({isLoading:false,error:reportContent.content})}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](2);if(_this.mounted){_this.setState({isLoading:false,calloutTitle:intl.formatMessage({id:"xpack.reporting.errorButton.unableToFetchReportContentTitle",defaultMessage:"Unable to fetch report content"}),error:_context.t0.message})}case 12:case"end":return _context.stop()}}),_callee,null,[[2,9]])}))));this.state={isLoading:false,isPopoverOpen:false,calloutTitle:props.intl.formatMessage({id:"xpack.reporting.errorButton.unableToGenerateReportTitle",defaultMessage:"Unable to generate report"})}}render(){const _this$props2=this.props,record=_this$props2.record,intl=_this$props2.intl;if(record.status!==constants["h"].FAILED){return null}const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:this.togglePopover,iconType:"alert",color:"danger","aria-label":intl.formatMessage({id:"xpack.reporting.errorButton.showReportErrorAriaLabel",defaultMessage:"Show report error"})});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"popover",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,anchorPosition:"downRight"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger",title:this.state.calloutTitle},external_kbnSharedDeps_React_default.a.createElement("p",null,this.state.error)))}componentWillUnmount(){this.mounted=false}componentDidMount(){this.mounted=true}}const ReportErrorButton=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(report_error_button_ReportErrorButtonUi);class report_delete_button_ReportDeleteButton extends external_kbnSharedDeps_React_["PureComponent"]{constructor(props){super(props);this.state={showConfirm:false}}hideConfirm(){this.setState({showConfirm:false})}showConfirm(){this.setState({showConfirm:true})}renderConfirm(){const _this$props=this.props,intl=_this$props.intl,jobsToDelete=_this$props.jobsToDelete;const title=jobsToDelete.length>1?intl.formatMessage({id:"xpack.reporting.listing.table.deleteNumConfirmTitle",defaultMessage:"Delete {num} reports?"},{num:jobsToDelete.length}):intl.formatMessage({id:"xpack.reporting.listing.table.deleteConfirmTitle",defaultMessage:'Delete the "{name}" report?'},{name:jobsToDelete[0].object_title});const message=intl.formatMessage({id:"xpack.reporting.listing.table.deleteConfirmMessage",defaultMessage:"You can't recover deleted reports."});const confirmButtonText=intl.formatMessage({id:"xpack.reporting.listing.table.deleteConfirmButton",defaultMessage:"Delete"});const cancelButtonText=intl.formatMessage({id:"xpack.reporting.listing.table.deleteCancelButton",defaultMessage:"Cancel"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:title,onCancel:()=>this.hideConfirm(),onConfirm:()=>this.props.performDelete(),confirmButtonText:confirmButtonText,cancelButtonText:cancelButtonText,defaultFocusedButton:"confirm",buttonColor:"danger"},message))}render(){const _this$props2=this.props,jobsToDelete=_this$props2.jobsToDelete,intl=_this$props2.intl;if(jobsToDelete.length===0)return null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:()=>this.showConfirm(),iconType:"trash",color:"danger","data-test-subj":"deleteReportButton"},intl.formatMessage({id:"xpack.reporting.listing.table.deleteReportButton",defaultMessage:"Delete ({num})"},{num:jobsToDelete.length})),this.state.showConfirm?this.renderConfirm():null)}}const ReportDownloadButton=props=>{const record=props.record,apiClient=props.apiClient,intl=props.intl;if(record.status!==constants["h"].COMPLETED&&record.status!==constants["h"].WARNINGS){return null}const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:()=>apiClient.downloadReport(record.id),iconType:"importAction","aria-label":intl.formatMessage({id:"xpack.reporting.listing.table.downloadReportAriaLabel",defaultMessage:"Download report"})});if(record.csv_contains_formulas){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:intl.formatMessage({id:"xpack.reporting.listing.table.csvContainsFormulas",defaultMessage:"Your CSV contains characters which spreadsheet applications can interpret as formulas."})},button)}if(record.max_size_reached){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:intl.formatMessage({id:"xpack.reporting.listing.table.maxSizeReachedTooltip",defaultMessage:"Max size reached, contains partial data."})},button)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:intl.formatMessage({id:"xpack.reporting.listing.table.downloadReport",defaultMessage:"Download report"})},button)};function report_info_button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function report_info_button_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){report_info_button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){report_info_button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function report_info_button_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const NA="n/a";const UNKNOWN="unknown";const getDimensions=info=>{const defaultDimensions={width:null,height:null};const _get=Object(external_kbnSharedDeps_Lodash_["get"])(info,"payload.layout.dimensions",defaultDimensions),width=_get.width,height=_get.height;if(width&&height){return"Width: ".concat(width," x Height: ").concat(height)}return NA};class report_info_button_ReportInfoButton extends external_kbnSharedDeps_React_["Component"]{constructor(props){var _this;super(props);_this=this;report_info_button_defineProperty(this,"mounted",void 0);report_info_button_defineProperty(this,"loadInfo",report_info_button_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var info;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.setState({isLoading:true});_context.prev=1;_context.next=4;return _this.props.apiClient.getInfo(_this.props.jobId);case 4:info=_context.sent;if(_this.mounted){_this.setState({isLoading:false,info:info})}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](1);if(_this.mounted){_this.setState({isLoading:false,calloutTitle:"Unable to fetch report info",info:null,error:_context.t0})}case 11:case"end":return _context.stop()}}),_callee,null,[[1,8]])}))));report_info_button_defineProperty(this,"closeFlyout",()=>{this.setState({isFlyoutVisible:false,info:null})});report_info_button_defineProperty(this,"showFlyout",()=>{this.setState({isFlyoutVisible:true});if(!this.state.info){this.loadInfo()}});this.state={isLoading:false,isFlyoutVisible:false,calloutTitle:"Job Info",info:null,error:null};this.closeFlyout=this.closeFlyout.bind(this);this.showFlyout=this.showFlyout.bind(this)}renderInfo(){const _this$state=this.state,info=_this$state.info,err=_this$state.error;if(err){return err.message}if(!info){return null}const jobType=info.jobtype||NA;const attempts=info.attempts?info.attempts.toString():NA;const maxAttempts=info.max_attempts?info.max_attempts.toString():NA;const priority=info.priority?info.priority.toString():NA;const timeout=info.timeout?info.timeout.toString():NA;const warnings=info.output&&info.output.warnings?info.output.warnings.join(","):null;const jobInfoDateTimes=[{title:"Created By",description:info.created_by||NA},{title:"Created At",description:info.created_at||NA},{title:"Started At",description:info.started_at||NA},{title:"Completed At",description:info.completed_at||NA},{title:"Processed By",description:info.kibana_name&&info.kibana_id?"".concat(info.kibana_name," (").concat(info.kibana_id,")"):UNKNOWN},{title:"Browser Timezone",description:Object(external_kbnSharedDeps_Lodash_["get"])(info,"payload.browserTimezone")||NA}];const jobInfoPayload=[{title:"Title",description:Object(external_kbnSharedDeps_Lodash_["get"])(info,"payload.title")||NA},{title:"Layout",description:Object(external_kbnSharedDeps_Lodash_["get"])(info,"meta.layout")||NA},{title:"Dimensions",description:getDimensions(info)},{title:"Job Type",description:jobType},{title:"Content Type",description:Object(external_kbnSharedDeps_Lodash_["get"])(info,"output.content_type")||NA},{title:"Size in Bytes",description:Object(external_kbnSharedDeps_Lodash_["get"])(info,"output.size")||NA}];const jobInfoStatus=[{title:"Attempts",description:attempts},{title:"Max Attempts",description:maxAttempts},{title:"Priority",description:priority},{title:"Timeout",description:timeout},{title:"Status",description:info.status||NA},{title:"Browser Type",description:constants["l"].includes(jobType)?info.browser_type||UNKNOWN:NA}];if(warnings){jobInfoStatus.push({title:"Errors",description:warnings})}const jobInfoParts={datetimes:jobInfoDateTimes,payload:jobInfoPayload,status:jobInfoStatus};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{listItems:jobInfoParts.datetimes,type:"column",align:"center",compressed:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{listItems:jobInfoParts.payload,type:"column",align:"center",compressed:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{listItems:jobInfoParts.status,type:"column",align:"center",compressed:true}))}componentWillUnmount(){this.mounted=false}componentDidMount(){this.mounted=true}render(){let flyout;if(this.state.isFlyoutVisible){flyout=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPortal"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{ownFocus:true,onClose:this.closeFlyout,size:"s","aria-labelledby":"flyoutTitle","data-test-subj":"reportInfoFlyout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",{id:"flyoutTitle"},this.state.calloutTitle))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,this.renderInfo()))))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:this.showFlyout,iconType:"iInCircle",color:"primary","data-test-subj":"reportInfoButton","aria-label":"Show report info"}),flyout)}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){report_diagnostic_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function report_diagnostic_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var statuses;(function(statuses){statuses["configStatus"]="configStatus";statuses["chromeStatus"]="chromeStatus";statuses["screenshotStatus"]="screenshotStatus"})(statuses||(statuses={}));const initialState={[statuses.configStatus]:"incomplete",[statuses.chromeStatus]:"incomplete",[statuses.screenshotStatus]:"incomplete",isFlyoutVisible:false,help:[],logs:"",isBusy:false,success:true};const ReportDiagnostic=({apiClient:apiClient})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(initialState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setStateBase=_useState2[1];const setState=s=>setStateBase(_objectSpread(_objectSpread({},state),s));const configStatus=state.configStatus,isBusy=state.isBusy,screenshotStatus=state.screenshotStatus,chromeStatus=state.chromeStatus,isFlyoutVisible=state.isFlyoutVisible,help=state.help,logs=state.logs,success=state.success;const closeFlyout=()=>setState(_objectSpread(_objectSpread({},initialState),{},{isFlyoutVisible:false}));const showFlyout=()=>setState({isFlyoutVisible:true});const apiWrapper=(apiMethod,statusProp)=>()=>{setState({isBusy:true,[statusProp]:"incomplete"});apiMethod().then(response=>{setState({isBusy:false,help:response.help,logs:response.logs,success:response.success,[statusProp]:response.success?"complete":"danger"})}).catch(error=>{setState({isBusy:false,help:[external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.listing.diagnosticApiCallFailure",{defaultMessage:"There was a problem running the diagnostic: {error}",values:{error:error}})],logs:"".concat(error.message),success:false,[statusProp]:"danger"})})};const steps=[{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.listing.diagnosticConfigTitle",{defaultMessage:"Verify Kibana configuration"}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticConfigMessage",defaultMessage:"Ensure your Kibana configuration is properly set up for reports."}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:isBusy||configStatus==="complete",isLoading:isBusy&&configStatus==="incomplete",onClick:apiWrapper(apiClient.verifyConfig,statuses.configStatus),iconType:configStatus==="complete"?"check":undefined},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticConfigButton",defaultMessage:"Verify configuration"}))),status:!success&&configStatus!=="complete"?"danger":configStatus}];if(configStatus==="complete"){steps.push({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.listing.diagnosticBrowserTitle",{defaultMessage:"Check browser"}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticBrowserMessage",defaultMessage:"Reporting uses a headless browser to generate PDF and PNGs. Validate that the browser can launch successfully."}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:isBusy||chromeStatus==="complete",onClick:apiWrapper(apiClient.verifyBrowser,statuses.chromeStatus),isLoading:isBusy&&chromeStatus==="incomplete",iconType:chromeStatus==="complete"?"check":undefined},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticBrowserButton",defaultMessage:"Check browser"}))),status:!success&&chromeStatus!=="complete"?"danger":chromeStatus})}if(chromeStatus==="complete"){steps.push({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.listing.diagnosticScreenshotTitle",{defaultMessage:"Check screen capture"}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticScreenshotMessage",defaultMessage:"Ensure that the headless browser can capture a screenshot of a page."}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:isBusy||screenshotStatus==="complete",onClick:apiWrapper(apiClient.verifyScreenCapture,statuses.screenshotStatus),isLoading:isBusy&&screenshotStatus==="incomplete",iconType:screenshotStatus==="complete"?"check":undefined},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticScreenshotButton",defaultMessage:"Capture screenshot"}))),status:!success&&screenshotStatus!=="complete"?"danger":screenshotStatus})}if(screenshotStatus==="complete"){steps.push({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.listing.diagnosticSuccessTitle",{defaultMessage:"All set!"}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticSuccessMessage",defaultMessage:"Everything looks good for reporting to function."})),status:!success?"danger":screenshotStatus})}if(!success){steps.push({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.listing.diagnosticFailureTitle",{defaultMessage:"Something isn't working properly."}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,help.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,help.join("\n")))):null,logs.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticFailureDescription",defaultMessage:"Here are some details about the issue:"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],null,logs)):null),status:"danger"})}let flyout;if(isFlyoutVisible){flyout=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:closeFlyout,"aria-labelledby":"reportingHelperTitle",size:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticTitle",defaultMessage:"Reporting Diagnostics"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticDescription",defaultMessage:"Run diagnostics to automatically troubleshoot common reporting problems."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSteps"],{steps:steps})))}return external_kbnSharedDeps_React_default.a.createElement("div",null,flyout,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",flush:"left",onClick:showFlyout},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticButton",defaultMessage:"Run reporting diagnostics"})))};function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=report_listing_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function report_listing_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return report_listing_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return report_listing_arrayLikeToArray(o,minLen)}function report_listing_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function report_listing_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function report_listing_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){report_listing_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){report_listing_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function report_listing_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function report_listing_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){report_listing_ownKeys(Object(source),true).forEach((function(key){report_listing_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{report_listing_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function report_listing_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const jobStatusLabelsMap=new Map([[constants["h"].PENDING,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.jobStatuses.pendingText",{defaultMessage:"Pending"})],[constants["h"].PROCESSING,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.jobStatuses.processingText",{defaultMessage:"Processing"})],[constants["h"].COMPLETED,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.jobStatuses.completedText",{defaultMessage:"Completed"})],[constants["h"].WARNINGS,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.jobStatuses.warningText",{defaultMessage:"Completed with warnings"})],[constants["h"].FAILED,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.jobStatuses.failedText",{defaultMessage:"Failed"})],[constants["h"].CANCELLED,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.jobStatuses.cancelledText",{defaultMessage:"Cancelled"})]]);class report_listing_ReportListingUi extends external_kbnSharedDeps_React_["Component"]{constructor(props){var _this;super(props);_this=this;report_listing_defineProperty(this,"isInitialJobsFetch",void 0);report_listing_defineProperty(this,"licenseSubscription",void 0);report_listing_defineProperty(this,"mounted",void 0);report_listing_defineProperty(this,"poller",void 0);report_listing_defineProperty(this,"licenseHandler",license=>{const _checkLicense=Object(license_check["a"])(license.check("reporting","basic")),enableLinks=_checkLicense.enableLinks,showLinks=_checkLicense.showLinks,badLicenseMessage=_checkLicense.message;this.setState({enableLinks:enableLinks,showLinks:showLinks,badLicenseMessage:badLicenseMessage})});report_listing_defineProperty(this,"onSelectionChange",jobs=>{this.setState(current=>report_listing_objectSpread(report_listing_objectSpread({},current),{},{selectedJobs:jobs}))});report_listing_defineProperty(this,"removeRecord",record=>{const jobs=this.state.jobs;const filtered=jobs.filter(j=>j.id!==record.id);this.setState(current=>report_listing_objectSpread(report_listing_objectSpread({},current),{},{jobs:filtered}))});report_listing_defineProperty(this,"renderDeleteButton",()=>{const selectedJobs=this.state.selectedJobs;if(selectedJobs.length===0)return undefined;const performDelete=function(){var _ref=report_listing_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _iterator,_step,record;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_iterator=_createForOfIteratorHelper(selectedJobs);_context.prev=1;_iterator.s();case 3:if((_step=_iterator.n()).done){_context.next=18;break}record=_step.value;_context.prev=5;_context.next=8;return _this.props.apiClient.deleteReport(record.id);case 8:_this.removeRecord(record);_this.props.toasts.addSuccess(_this.props.intl.formatMessage({id:"xpack.reporting.listing.table.deleteConfim",defaultMessage:"The {reportTitle} report was deleted"},{reportTitle:record.object_title}));_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);_this.props.toasts.addDanger(_this.props.intl.formatMessage({id:"xpack.reporting.listing.table.deleteFailedErrorMessage",defaultMessage:"The report was not deleted: {error}"},{error:_context.t0}));throw _context.t0;case 16:_context.next=3;break;case 18:_context.next=23;break;case 20:_context.prev=20;_context.t1=_context["catch"](1);_iterator.e(_context.t1);case 23:_context.prev=23;_iterator.f();return _context.finish(23);case 26:_this.setState(()=>({page:0}),_this.fetchJobs);case 27:case"end":return _context.stop()}}),_callee,null,[[1,20,23,26],[5,12]])})));return function performDelete(){return _ref.apply(this,arguments)}}();return external_kbnSharedDeps_React_default.a.createElement(report_delete_button_ReportDeleteButton,_extends({jobsToDelete:selectedJobs,performDelete:performDelete},this.props))});report_listing_defineProperty(this,"onTableChange",({page:page})=>{const pageIndex=page.index;this.setState(()=>({page:pageIndex}),this.fetchJobs)});report_listing_defineProperty(this,"fetchJobs",report_listing_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var jobs,total;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(_this.isInitialJobsFetch){_this.setState(()=>({isLoading:true}))}_context2.prev=1;_context2.next=4;return _this.props.apiClient.list(_this.state.page);case 4:jobs=_context2.sent;_context2.next=7;return _this.props.apiClient.total();case 7:total=_context2.sent;_this.isInitialJobsFetch=false;_context2.next=20;break;case 11:_context2.prev=11;_context2.t0=_context2["catch"](1);if(_this.licenseAllowsToShowThisPage()){_context2.next=17;break}_this.props.toasts.addDanger(_this.state.badLicenseMessage);_this.props.redirect("management");return _context2.abrupt("return");case 17:if(_context2.t0.message==="Failed to fetch"){_this.props.toasts.addDanger(_context2.t0.message||_this.props.intl.formatMessage({id:"xpack.reporting.listing.table.requestFailedErrorMessage",defaultMessage:"Request failed"}))}if(_this.mounted){_this.setState(()=>({isLoading:false,jobs:[],total:0}))}return _context2.abrupt("return");case 20:if(_this.mounted){_this.setState(()=>({isLoading:false,total:total,jobs:jobs.map(job=>{const source=job._source;return{id:job._id,type:source.jobtype,object_type:source.payload.objectType,object_title:source.payload.title,created_by:source.created_by,created_at:source.created_at,started_at:source.started_at,completed_at:source.completed_at,status:source.status,statusLabel:jobStatusLabelsMap.get(source.status)||source.status,max_size_reached:source.output?source.output.max_size_reached:false,attempts:source.attempts,max_attempts:source.max_attempts,csv_contains_formulas:Object(external_kbnSharedDeps_Lodash_["get"])(source,"output.csv_contains_formulas"),warnings:source.output?source.output.warnings:undefined}})}))}case 21:case"end":return _context2.stop()}}),_callee2,null,[[1,11]])}))));report_listing_defineProperty(this,"licenseAllowsToShowThisPage",()=>this.state.showLinks&&this.state.enableLinks);this.state={page:0,total:0,jobs:[],selectedJobs:[],isLoading:false,showLinks:false,enableLinks:false,badLicenseMessage:""};this.isInitialJobsFetch=true}render(){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{horizontalPosition:"center",className:"euiPageBody--restrictWidth-default"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.reportstitle",defaultMessage:"Reports"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.reports.subtitle",defaultMessage:"Get reports generated in Kibana applications."}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),this.renderTable()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",direction:"rowReverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(ReportDiagnostic,{apiClient:this.props.apiClient}))))}componentWillUnmount(){this.mounted=false;this.poller.stop();if(this.licenseSubscription){this.licenseSubscription.unsubscribe()}}componentDidMount(){this.mounted=true;const _this$props=this.props,pollConfig=_this$props.pollConfig,license$=_this$props.license$;const pollFrequencyInMillis=Object(schema_utils["a"])(pollConfig.jobsRefresh.interval);this.poller=new poller_Poller({functionToPoll:()=>this.fetchJobs(),pollFrequencyInMillis:pollFrequencyInMillis,trailing:false,continuePollingOnError:true,pollFrequencyErrorMultiplier:pollConfig.jobsRefresh.intervalErrorMultiplier});this.poller.start();this.licenseSubscription=license$.subscribe(this.licenseHandler)}formatDate(timestamp){try{return external_kbnSharedDeps_Moment_default()(timestamp).format("YYYY-MM-DD @ hh:mm A")}catch(error){return timestamp}}renderTable(){const intl=this.props.intl;const tableColumns=[{field:"object_title",name:intl.formatMessage({id:"xpack.reporting.listing.tableColumns.reportTitle",defaultMessage:"Report"}),render:(objectTitle,record)=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("div",null,objectTitle),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},record.object_type)))},{field:"created_at",name:intl.formatMessage({id:"xpack.reporting.listing.tableColumns.createdAtTitle",defaultMessage:"Created at"}),render:(createdAt,record)=>{if(record.created_by){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("div",null,this.formatDate(createdAt)),external_kbnSharedDeps_React_default.a.createElement("span",null,record.created_by))}return this.formatDate(createdAt)}},{field:"status",name:intl.formatMessage({id:"xpack.reporting.listing.tableColumns.statusTitle",defaultMessage:"Status"}),render:(status,record)=>{if(status==="pending"){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.tableValue.statusDetail.pendingStatusReachedText",defaultMessage:"Pending - waiting for job to be processed"}))}let maxSizeReached;if(record.max_size_reached){maxSizeReached=external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.tableValue.statusDetail.maxSizeReachedText",defaultMessage:" - Max size reached"}))}let warnings;if(record.warnings){warnings=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.tableValue.statusDetail.warningsText",defaultMessage:"Errors occurred: see job info for details."})))}let statusTimestamp;if(status===constants["h"].PROCESSING&&record.started_at){statusTimestamp=this.formatDate(record.started_at)}else if(record.completed_at&&[constants["h"].COMPLETED,constants["h"].FAILED,constants["h"].WARNINGS].includes(status)){statusTimestamp=this.formatDate(record.completed_at)}let statusLabel=jobStatusLabelsMap.get(status)||status;if(status===constants["h"].PROCESSING){statusLabel=statusLabel+" (attempt ".concat(record.attempts," of ").concat(record.max_attempts,")")}if(statusTimestamp){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.tableValue.statusDetail.statusTimestampText",defaultMessage:"{statusLabel} at {statusTimestamp}",values:{statusLabel:statusLabel,statusTimestamp:external_kbnSharedDeps_React_default.a.createElement("span",{className:"eui-textNoWrap"},statusTimestamp)}}),maxSizeReached,warnings)}return external_kbnSharedDeps_React_default.a.createElement("div",null,statusLabel,maxSizeReached)}},{name:intl.formatMessage({id:"xpack.reporting.listing.tableColumns.actionsTitle",defaultMessage:"Actions"}),actions:[{render:record=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(ReportDownloadButton,_extends({},this.props,{record:record})),external_kbnSharedDeps_React_default.a.createElement(ReportErrorButton,_extends({},this.props,{record:record})),external_kbnSharedDeps_React_default.a.createElement(report_info_button_ReportInfoButton,_extends({},this.props,{jobId:record.id})))}]}];const pagination={pageIndex:this.state.page,pageSize:10,totalItemCount:this.state.total,hidePerPageOptions:true};const selection={itemId:"id",onSelectionChange:this.onSelectionChange};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{itemId:"id",items:this.state.jobs,loading:this.state.isLoading,columns:tableColumns,noItemsMessage:this.state.isLoading?intl.formatMessage({id:"xpack.reporting.listing.table.loadingReportsDescription",defaultMessage:"Loading reports"}):intl.formatMessage({id:"xpack.reporting.listing.table.noCreatedReportsDescription",defaultMessage:"No reports have been created"}),pagination:pagination,selection:selection,isSelectable:true,onChange:this.onTableChange,"data-test-subj":"reportJobListing"}),this.state.selectedJobs.length>0?this.renderDeleteButton():null)}}const ReportListing=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(report_listing_ReportListingUi);function mount_management_section_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function mount_management_section_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){mount_management_section_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){mount_management_section_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function mountManagementSection(_x,_x2,_x3,_x4,_x5,_x6){return _mountManagementSection.apply(this,arguments)}function _mountManagementSection(){_mountManagementSection=mount_management_section_asyncToGenerator(regeneratorRuntime.mark((function _callee(coreSetup,coreStart,license$,pollConfig,apiClient,params){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_["createElement"](ReportListing,{toasts:coreSetup.notifications.toasts,license$:license$,pollConfig:pollConfig,redirect:coreStart.application.navigateToApp,apiClient:apiClient})),params.element);return _context.abrupt("return",()=>{Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(params.element)});case 2:case"end":return _context.stop()}}),_callee)})));return _mountManagementSection.apply(this,arguments)}}}]);