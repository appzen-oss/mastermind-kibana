/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["upgradeAssistant_bundle_jsonpfunction"]=window["upgradeAssistant_bundle_jsonpfunction"]||[]).push([[1],Array(30).concat([function(module,exports,__webpack_require__){var getNative=__webpack_require__(33);var nativeCreate=getNative(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var eq=__webpack_require__(43);function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}module.exports=assocIndexOf},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(80);function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}module.exports=getMapData},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(49),getValue=__webpack_require__(57);function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}module.exports=getNative},function(module,exports,__webpack_require__){var root=__webpack_require__(35);var Symbol=root.Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(50);var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(42),isObjectLike=__webpack_require__(60);var symbolTag="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}module.exports=isSymbol},function(module,exports,__webpack_require__){exports.set=__webpack_require__(45);exports.setWith=__webpack_require__(89)},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(46),castPath=__webpack_require__(58),isFunction=__webpack_require__(41),isIndex=__webpack_require__(87),isObject=__webpack_require__(36),toKey=__webpack_require__(88);function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(key=="prototype"&&isFunction(nested)){throw new Error("Illegal access of function prototype")}if(index!=lastIndex){var objValue=hasOwnProperty.call(nested,key)?nested[key]:undefined;newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}module.exports=baseSet},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(42),isObject=__webpack_require__(36);var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(34),getRawTag=__webpack_require__(52),objectToString=__webpack_require__(53);var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module.exports=baseGetTag},function(module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var function_1=__webpack_require__(90);function pipe(a,ab,bc,cd,de,ef,fg,gh,hi,ij){switch(arguments.length){case 1:return a;case 2:return ab(a);case 3:return bc(ab(a));case 4:return cd(bc(ab(a)));case 5:return de(cd(bc(ab(a))));case 6:return ef(de(cd(bc(ab(a)))));case 7:return fg(ef(de(cd(bc(ab(a))))));case 8:return gh(fg(ef(de(cd(bc(ab(a)))))));case 9:return hi(gh(fg(ef(de(cd(bc(ab(a))))))));case 10:return ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))}}exports.pipe=pipe;var isFunctor=function(I){return typeof I.map==="function"};var isContravariant=function(I){return typeof I.contramap==="function"};var isFunctorWithIndex=function(I){return typeof I.mapWithIndex==="function"};var isApply=function(I){return typeof I.ap==="function"};var isChain=function(I){return typeof I.chain==="function"};var isBifunctor=function(I){return typeof I.bimap==="function"};var isExtend=function(I){return typeof I.extend==="function"};var isFoldable=function(I){return typeof I.reduce==="function"};var isFoldableWithIndex=function(I){return typeof I.reduceWithIndex==="function"};var isAlt=function(I){return typeof I.alt==="function"};var isCompactable=function(I){return typeof I.compact==="function"};var isFilterable=function(I){return typeof I.filter==="function"};var isFilterableWithIndex=function(I){return typeof I.filterWithIndex==="function"};var isProfunctor=function(I){return typeof I.promap==="function"};var isSemigroupoid=function(I){return typeof I.compose==="function"};var isMonadThrow=function(I){return typeof I.throwError==="function"};function pipeable(I){var r={};if(isFunctor(I)){var map=function(f){return function(fa){return I.map(fa,f)}};r.map=map}if(isContravariant(I)){var contramap=function(f){return function(fa){return I.contramap(fa,f)}};r.contramap=contramap}if(isFunctorWithIndex(I)){var mapWithIndex=function(f){return function(fa){return I.mapWithIndex(fa,f)}};r.mapWithIndex=mapWithIndex}if(isApply(I)){var ap=function(fa){return function(fab){return I.ap(fab,fa)}};var apFirst=function(fb){return function(fa){return I.ap(I.map(fa,(function(a){return function(){return a}})),fb)}};r.ap=ap;r.apFirst=apFirst;r.apSecond=function(fb){return function(fa){return I.ap(I.map(fa,(function(){return function(b){return b}})),fb)}}}if(isChain(I)){var chain=function(f){return function(ma){return I.chain(ma,f)}};var chainFirst=function(f){return function(ma){return I.chain(ma,(function(a){return I.map(f(a),(function(){return a}))}))}};var flatten=function(mma){return I.chain(mma,function_1.identity)};r.chain=chain;r.chainFirst=chainFirst;r.flatten=flatten}if(isBifunctor(I)){var bimap=function(f,g){return function(fa){return I.bimap(fa,f,g)}};var mapLeft=function(f){return function(fa){return I.mapLeft(fa,f)}};r.bimap=bimap;r.mapLeft=mapLeft}if(isExtend(I)){var extend=function(f){return function(wa){return I.extend(wa,f)}};var duplicate=function(wa){return I.extend(wa,function_1.identity)};r.extend=extend;r.duplicate=duplicate}if(isFoldable(I)){var reduce=function(b,f){return function(fa){return I.reduce(fa,b,f)}};var foldMap=function(M){var foldMapM=I.foldMap(M);return function(f){return function(fa){return foldMapM(fa,f)}}};var reduceRight=function(b,f){return function(fa){return I.reduceRight(fa,b,f)}};r.reduce=reduce;r.foldMap=foldMap;r.reduceRight=reduceRight}if(isFoldableWithIndex(I)){var reduceWithIndex=function(b,f){return function(fa){return I.reduceWithIndex(fa,b,f)}};var foldMapWithIndex=function(M){var foldMapM=I.foldMapWithIndex(M);return function(f){return function(fa){return foldMapM(fa,f)}}};var reduceRightWithIndex=function(b,f){return function(fa){return I.reduceRightWithIndex(fa,b,f)}};r.reduceWithIndex=reduceWithIndex;r.foldMapWithIndex=foldMapWithIndex;r.reduceRightWithIndex=reduceRightWithIndex}if(isAlt(I)){var alt=function(that){return function(fa){return I.alt(fa,that)}};r.alt=alt}if(isCompactable(I)){r.compact=I.compact;r.separate=I.separate}if(isFilterable(I)){var filter=function(predicate){return function(fa){return I.filter(fa,predicate)}};var filterMap=function(f){return function(fa){return I.filterMap(fa,f)}};var partition=function(predicate){return function(fa){return I.partition(fa,predicate)}};var partitionMap=function(f){return function(fa){return I.partitionMap(fa,f)}};r.filter=filter;r.filterMap=filterMap;r.partition=partition;r.partitionMap=partitionMap}if(isFilterableWithIndex(I)){var filterWithIndex=function(predicateWithIndex){return function(fa){return I.filterWithIndex(fa,predicateWithIndex)}};var filterMapWithIndex=function(f){return function(fa){return I.filterMapWithIndex(fa,f)}};var partitionWithIndex=function(predicateWithIndex){return function(fa){return I.partitionWithIndex(fa,predicateWithIndex)}};var partitionMapWithIndex=function(f){return function(fa){return I.partitionMapWithIndex(fa,f)}};r.filterWithIndex=filterWithIndex;r.filterMapWithIndex=filterMapWithIndex;r.partitionWithIndex=partitionWithIndex;r.partitionMapWithIndex=partitionMapWithIndex}if(isProfunctor(I)){var promap=function(f,g){return function(fa){return I.promap(fa,f,g)}};r.promap=promap}if(isSemigroupoid(I)){var compose=function(that){return function(fa){return I.compose(fa,that)}};r.compose=compose}if(isMonadThrow(I)){var fromOption=function(onNone){return function(ma){return ma._tag==="None"?I.throwError(onNone()):I.of(ma.value)}};var fromEither=function(ma){return ma._tag==="Left"?I.throwError(ma.left):I.of(ma.right)};var fromPredicate=function(predicate,onFalse){return function(a){return predicate(a)?I.of(a):I.throwError(onFalse(a))}};var filterOrElse=function(predicate,onFalse){return function(ma){return I.chain(ma,(function(a){return predicate(a)?I.of(a):I.throwError(onFalse(a))}))}};r.fromOption=fromOption;r.fromEither=fromEither;r.fromPredicate=fromPredicate;r.filterOrElse=filterOrElse}return r}exports.pipeable=pipeable},function(module,exports,__webpack_require__){var baseSet=__webpack_require__(40);function set(object,path,value){return object==null?object:baseSet(object,path,value)}module.exports=set},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(47),eq=__webpack_require__(43);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignValue},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(48);function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}module.exports=baseAssignValue},function(module,exports,__webpack_require__){var getNative=__webpack_require__(33);var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();module.exports=defineProperty},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(41),isMasked=__webpack_require__(54),isObject=__webpack_require__(36),toSource=__webpack_require__(56);var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}module.exports=baseIsNative},function(module,exports,__webpack_require__){(function(global){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(51))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(34);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}module.exports=getRawTag},function(module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(55);var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}module.exports=isMasked},function(module,exports,__webpack_require__){var root=__webpack_require__(35);var coreJsData=root["__core-js_shared__"];module.exports=coreJsData},function(module,exports){var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}module.exports=toSource},function(module,exports){function getValue(object,key){return object==null?undefined:object[key]}module.exports=getValue},function(module,exports,__webpack_require__){var isArray=__webpack_require__(37),isKey=__webpack_require__(59),stringToPath=__webpack_require__(61),toString=__webpack_require__(84);function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}module.exports=castPath},function(module,exports,__webpack_require__){var isArray=__webpack_require__(37),isSymbol=__webpack_require__(38);var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}module.exports=isKey},function(module,exports){function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(62);var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped((function(string){var result=[];if(string.charCodeAt(0)===46){result.push("")}string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}));return result}));module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(63);var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,(function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key}));var cache=result.cache;return result}module.exports=memoizeCapped},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(64);var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;module.exports=memoize},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(65),mapCacheDelete=__webpack_require__(79),mapCacheGet=__webpack_require__(81),mapCacheHas=__webpack_require__(82),mapCacheSet=__webpack_require__(83);function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache},function(module,exports,__webpack_require__){var Hash=__webpack_require__(66),ListCache=__webpack_require__(72),Map=__webpack_require__(78);function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}module.exports=mapCacheClear},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(67),hashDelete=__webpack_require__(68),hashGet=__webpack_require__(69),hashHas=__webpack_require__(70),hashSet=__webpack_require__(71);function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(30);function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}module.exports=hashClear},function(module,exports){function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}module.exports=hashDelete},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(30);var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}module.exports=hashGet},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(30);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}module.exports=hashHas},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(30);var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}module.exports=hashSet},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(73),listCacheDelete=__webpack_require__(74),listCacheGet=__webpack_require__(75),listCacheHas=__webpack_require__(76),listCacheSet=__webpack_require__(77);function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache},function(module,exports){function listCacheClear(){this.__data__=[];this.size=0}module.exports=listCacheClear},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(31);var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}module.exports=listCacheDelete},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(31);function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}module.exports=listCacheGet},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(31);function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}module.exports=listCacheHas},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(31);function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}module.exports=listCacheSet},function(module,exports,__webpack_require__){var getNative=__webpack_require__(33),root=__webpack_require__(35);var Map=getNative(root,"Map");module.exports=Map},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(32);function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}module.exports=mapCacheDelete},function(module,exports){function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}module.exports=isKeyable},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(32);function mapCacheGet(key){return getMapData(this,key).get(key)}module.exports=mapCacheGet},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(32);function mapCacheHas(key){return getMapData(this,key).has(key)}module.exports=mapCacheHas},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(32);function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}module.exports=mapCacheSet},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(85);function toString(value){return value==null?"":baseToString(value)}module.exports=toString},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(34),arrayMap=__webpack_require__(86),isArray=__webpack_require__(37),isSymbol=__webpack_require__(38);var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=baseToString},function(module,exports){function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}module.exports=arrayMap},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}module.exports=isIndex},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(38);var INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toKey},function(module,exports,__webpack_require__){var baseSet=__webpack_require__(40);function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer)}module.exports=setWith},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function identity(a){return a}exports.identity=identity;exports.unsafeCoerce=identity;function not(predicate){return function(a){return!predicate(a)}}exports.not=not;function constant(a){return function(){return a}}exports.constant=constant;exports.constTrue=function(){return true};exports.constFalse=function(){return false};exports.constNull=function(){return null};exports.constUndefined=function(){return};exports.constVoid=function(){return};function flip(f){return function(b,a){return f(a,b)}}exports.flip=flip;function flow(ab,bc,cd,de,ef,fg,gh,hi,ij){switch(arguments.length){case 1:return ab;case 2:return function(){return bc(ab.apply(this,arguments))};case 3:return function(){return cd(bc(ab.apply(this,arguments)))};case 4:return function(){return de(cd(bc(ab.apply(this,arguments))))};case 5:return function(){return ef(de(cd(bc(ab.apply(this,arguments)))))};case 6:return function(){return fg(ef(de(cd(bc(ab.apply(this,arguments))))))};case 7:return function(){return gh(fg(ef(de(cd(bc(ab.apply(this,arguments)))))))};case 8:return function(){return hi(gh(fg(ef(de(cd(bc(ab.apply(this,arguments))))))))};case 9:return function(){return ij(hi(gh(fg(ef(de(cd(bc(ab.apply(this,arguments)))))))))}}}exports.flow=flow;function tuple(){var t=[];for(var _i=0;_i<arguments.length;_i++){t[_i]=arguments[_i]}return t}exports.tuple=tuple;function increment(n){return n+1}exports.increment=increment;function decrement(n){return n-1}exports.decrement=decrement;function absurd(_){throw new Error("Called `absurd` function which should be uncallable")}exports.absurd=absurd},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:true});var ChainRec_1=__webpack_require__(92);var pipeable_1=__webpack_require__(44);exports.URI="Either";function left(e){return{_tag:"Left",left:e}}exports.left=left;function right(a){return{_tag:"Right",right:a}}exports.right=right;function fromNullable(e){return function(a){return a==null?left(e):right(a)}}exports.fromNullable=fromNullable;function toError(e){return e instanceof Error?e:new Error(String(e))}exports.toError=toError;function tryCatch(f,onError){try{return right(f())}catch(e){return left(onError(e))}}exports.tryCatch=tryCatch;function fold(onLeft,onRight){return function(ma){return isLeft(ma)?onLeft(ma.left):onRight(ma.right)}}exports.fold=fold;function getShow(SE,SA){return{show:function(ma){return isLeft(ma)?"left("+SE.show(ma.left)+")":"right("+SA.show(ma.right)+")"}}}exports.getShow=getShow;function getEq(EL,EA){return{equals:function(x,y){return x===y||(isLeft(x)?isLeft(y)&&EL.equals(x.left,y.left):isRight(y)&&EA.equals(x.right,y.right))}}}exports.getEq=getEq;function getSemigroup(S){return{concat:function(x,y){return isLeft(y)?x:isLeft(x)?y:right(S.concat(x.right,y.right))}}}exports.getSemigroup=getSemigroup;function getApplySemigroup(S){return{concat:function(x,y){return isLeft(x)?x:isLeft(y)?y:right(S.concat(x.right,y.right))}}}exports.getApplySemigroup=getApplySemigroup;function getApplyMonoid(M){return __assign(__assign({},getApplySemigroup(M)),{empty:right(M.empty)})}exports.getApplyMonoid=getApplyMonoid;function isLeft(ma){switch(ma._tag){case"Left":return true;case"Right":return false}}exports.isLeft=isLeft;function isRight(ma){return isLeft(ma)?false:true}exports.isRight=isRight;function swap(ma){return isLeft(ma)?right(ma.left):left(ma.right)}exports.swap=swap;function orElse(onLeft){return function(ma){return isLeft(ma)?onLeft(ma.left):ma}}exports.orElse=orElse;function getOrElse(onLeft){return function(ma){return isLeft(ma)?onLeft(ma.left):ma.right}}exports.getOrElse=getOrElse;function elem(E){return function(a,ma){return isLeft(ma)?false:E.equals(a,ma.right)}}exports.elem=elem;function exists(predicate){return function(ma){return isLeft(ma)?false:predicate(ma.right)}}exports.exists=exists;function parseJSON(s,onError){return tryCatch((function(){return JSON.parse(s)}),onError)}exports.parseJSON=parseJSON;function stringifyJSON(u,onError){return tryCatch((function(){return JSON.stringify(u)}),onError)}exports.stringifyJSON=stringifyJSON;function getWitherable(M){var empty=left(M.empty);var compact=function(ma){return isLeft(ma)?ma:ma.right._tag==="None"?left(M.empty):right(ma.right.value)};var separate=function(ma){return isLeft(ma)?{left:ma,right:ma}:isLeft(ma.right)?{left:right(ma.right.left),right:empty}:{left:empty,right:right(ma.right.right)}};var partitionMap=function(ma,f){if(isLeft(ma)){return{left:ma,right:ma}}var e=f(ma.right);return isLeft(e)?{left:right(e.left),right:empty}:{left:empty,right:right(e.right)}};var partition=function(ma,p){return isLeft(ma)?{left:ma,right:ma}:p(ma.right)?{left:empty,right:right(ma.right)}:{left:right(ma.right),right:empty}};var filterMap=function(ma,f){if(isLeft(ma)){return ma}var ob=f(ma.right);return ob._tag==="None"?left(M.empty):right(ob.value)};var filter=function(ma,predicate){return isLeft(ma)?ma:predicate(ma.right)?ma:left(M.empty)};var wither=function(F){var traverseF=exports.either.traverse(F);return function(ma,f){return F.map(traverseF(ma,f),compact)}};var wilt=function(F){var traverseF=exports.either.traverse(F);return function(ma,f){return F.map(traverseF(ma,f),separate)}};return{URI:exports.URI,_E:undefined,map:exports.either.map,compact:compact,separate:separate,filter:filter,filterMap:filterMap,partition:partition,partitionMap:partitionMap,traverse:exports.either.traverse,sequence:exports.either.sequence,reduce:exports.either.reduce,foldMap:exports.either.foldMap,reduceRight:exports.either.reduceRight,wither:wither,wilt:wilt}}exports.getWitherable=getWitherable;function getValidation(S){return{URI:exports.URI,_E:undefined,map:exports.either.map,of:exports.either.of,ap:function(mab,ma){return isLeft(mab)?isLeft(ma)?left(S.concat(mab.left,ma.left)):mab:isLeft(ma)?ma:right(mab.right(ma.right))},chain:exports.either.chain,alt:function(fx,f){if(isRight(fx)){return fx}var fy=f();return isLeft(fy)?left(S.concat(fx.left,fy.left)):fy}}}exports.getValidation=getValidation;function getValidationSemigroup(SE,SA){return{concat:function(fx,fy){return isLeft(fx)?isLeft(fy)?left(SE.concat(fx.left,fy.left)):fx:isLeft(fy)?fy:right(SA.concat(fx.right,fy.right))}}}exports.getValidationSemigroup=getValidationSemigroup;function getValidationMonoid(SE,SA){return{concat:getValidationSemigroup(SE,SA).concat,empty:right(SA.empty)}}exports.getValidationMonoid=getValidationMonoid;exports.either={URI:exports.URI,map:function(ma,f){return isLeft(ma)?ma:right(f(ma.right))},of:right,ap:function(mab,ma){return isLeft(mab)?mab:isLeft(ma)?ma:right(mab.right(ma.right))},chain:function(ma,f){return isLeft(ma)?ma:f(ma.right)},reduce:function(fa,b,f){return isLeft(fa)?b:f(b,fa.right)},foldMap:function(M){return function(fa,f){return isLeft(fa)?M.empty:f(fa.right)}},reduceRight:function(fa,b,f){return isLeft(fa)?b:f(fa.right,b)},traverse:function(F){return function(ma,f){return isLeft(ma)?F.of(left(ma.left)):F.map(f(ma.right),right)}},sequence:function(F){return function(ma){return isLeft(ma)?F.of(left(ma.left)):F.map(ma.right,right)}},bimap:function(fea,f,g){return isLeft(fea)?left(f(fea.left)):right(g(fea.right))},mapLeft:function(fea,f){return isLeft(fea)?left(f(fea.left)):fea},alt:function(fx,fy){return isLeft(fx)?fy():fx},extend:function(wa,f){return isLeft(wa)?wa:right(f(wa))},chainRec:function(a,f){return ChainRec_1.tailRec(f(a),(function(e){return isLeft(e)?right(left(e.left)):isLeft(e.right)?left(f(e.right.left)):right(right(e.right.right))}))},throwError:left};var _a=pipeable_1.pipeable(exports.either),alt=_a.alt,ap=_a.ap,apFirst=_a.apFirst,apSecond=_a.apSecond,bimap=_a.bimap,chain=_a.chain,chainFirst=_a.chainFirst,duplicate=_a.duplicate,extend=_a.extend,flatten=_a.flatten,foldMap=_a.foldMap,map=_a.map,mapLeft=_a.mapLeft,reduce=_a.reduce,reduceRight=_a.reduceRight,fromOption=_a.fromOption,fromPredicate=_a.fromPredicate,filterOrElse=_a.filterOrElse;exports.alt=alt;exports.ap=ap;exports.apFirst=apFirst;exports.apSecond=apSecond;exports.bimap=bimap;exports.chain=chain;exports.chainFirst=chainFirst;exports.duplicate=duplicate;exports.extend=extend;exports.flatten=flatten;exports.foldMap=foldMap;exports.map=map;exports.mapLeft=mapLeft;exports.reduce=reduce;exports.reduceRight=reduceRight;exports.fromOption=fromOption;exports.fromPredicate=fromPredicate;exports.filterOrElse=filterOrElse},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function tailRec(a,f){var v=f(a);while(v._tag==="Left"){v=f(v.left)}return v.right}exports.tailRec=tailRec},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner)}}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(true&&module.exports){classNames.default=classNames;module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"mountManagementSection",(function(){return mountManagementSection}));var external_kbnSharedDeps_React_=__webpack_require__(24);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(28);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(25);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(26);var version=__webpack_require__(3);var elastic_safer_lodash_set=__webpack_require__(39);var external_kbnSharedDeps_Lodash_=__webpack_require__(27);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);const LatestMinorBanner=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.tabs.incompleteCallout.calloutTitle",defaultMessage:"Issues list might be incomplete"}),color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.tabs.incompleteCallout.calloutBody.calloutDetail",defaultMessage:"The complete list of {breakingChangesDocButton} in Elasticsearch {nextEsVersion} will be available in the final {currentEsVersion} minor release. When the list is complete, this warning will go away.",values:{breakingChangesDocButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:"https://www.elastic.co/guide/en/elasticsearch/reference/master/breaking-changes.html",target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.tabs.incompleteCallout.calloutBody.breackingChangesDocButtonLabel",defaultMessage:"deprecations and breaking changes"})),nextEsVersion:"".concat(version["b"],".x"),currentEsVersion:"".concat(version["a"],".x")}})));const LoadingErrorBanner=({loadingError:loadingError})=>{if(Object(external_kbnSharedDeps_Lodash_["get"])(loadingError,"response.status")===403){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.forbiddenErrorCallout.calloutTitle",defaultMessage:"You do not have sufficient privileges to view this page."}),color:"danger",iconType:"cross"})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.genericErrorCallout.calloutTitle",defaultMessage:"An error occurred while retrieving the checkup results."}),color:"danger",iconType:"cross"},loadingError?loadingError.message:null)};class types_UpgradeAssistantTabComponent extends external_kbnSharedDeps_React_default.a.Component{}let LoadingState;(function(LoadingState){LoadingState[LoadingState["Loading"]=0]="Loading";LoadingState[LoadingState["Success"]=1]="Success";LoadingState[LoadingState["Error"]=2]="Error"})(LoadingState||(LoadingState={}));let LevelFilterOption;(function(LevelFilterOption){LevelFilterOption["all"]="all";LevelFilterOption["critical"]="critical"})(LevelFilterOption||(LevelFilterOption={}));let GroupByOption;(function(GroupByOption){GroupByOption["message"]="message";GroupByOption["index"]="index";GroupByOption["node"]="node"})(GroupByOption||(GroupByOption={}));let TelemetryState;(function(TelemetryState){TelemetryState[TelemetryState["Running"]=0]="Running";TelemetryState[TelemetryState["Complete"]=1]="Complete"})(TelemetryState||(TelemetryState={}));const LocalizedOptions={all:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.controls.filterBar.allButtonLabel",{defaultMessage:"all"}),critical:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.controls.filterBar.criticalButtonLabel",{defaultMessage:"critical"})};const allFilterOptions=Object.keys(LevelFilterOption);const FilterBar=({allDeprecations:allDeprecations=[],currentFilter:currentFilter,onFilterChange:onFilterChange})=>{const levelGroups=Object(external_kbnSharedDeps_Lodash_["groupBy"])(allDeprecations,"level");const levelCounts=Object.keys(levelGroups).reduce((counts,level)=>{counts[level]=levelGroups[level].length;return counts},{});const allCount=allDeprecations.length;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterGroup"],null,allFilterOptions.map(option=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterButton"],{key:option,onClick:onFilterChange.bind(null,option),hasActiveFilters:currentFilter===option,numFilters:option===LevelFilterOption.all?allCount:levelCounts[option]||undefined},LocalizedOptions[option]))))};const group_by_bar_LocalizedOptions={message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.controls.groupByBar.byIssueLabel",{defaultMessage:"by issue"}),index:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.controls.groupByBar.byIndexLabel",{defaultMessage:"by index"})};const GroupByBar=({availableGroupByOptions:availableGroupByOptions,currentGroupBy:currentGroupBy,onGroupByChange:onGroupByChange})=>{if(availableGroupByOptions.length<=1){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterGroup"],null,availableGroupByOptions.map(option=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterButton"],{key:option,onClick:onGroupByChange.bind(null,option),hasActiveFilters:currentGroupBy===option},group_by_bar_LocalizedOptions[option]))))};var pipeable=__webpack_require__(44);var Either=__webpack_require__(91);const validateRegExpString=s=>Object(pipeable["pipe"])(Object(Either["tryCatch"])(()=>new RegExp(s),e=>e.message),Object(Either["fold"])(errorMessage=>errorMessage,()=>""));function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const CheckupControls=({allDeprecations:allDeprecations,loadingState:loadingState,loadData:loadData,currentFilter:currentFilter,onFilterChange:onFilterChange,onSearchChange:onSearchChange,availableGroupByOptions:availableGroupByOptions,currentGroupBy:currentGroupBy,onGroupByChange:onGroupByChange})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=_slicedToArray(_useState,2),searchTermError=_useState2[0],setSearchTermError=_useState2[1];const filterInvalid=Boolean(searchTermError);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",wrap:true,responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{isInvalid:filterInvalid,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.controls.searchBarPlaceholderAriaLabel",{defaultMessage:"Filter"}),placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.controls.searchBarPlaceholder",{defaultMessage:"Filter"}),onChange:e=>{const string=e.target.value;const errorMessage=validateRegExpString(string);if(errorMessage){onSearchChange("");setSearchTermError(errorMessage)}else{onSearchChange(e.target.value);if(searchTermError){setSearchTermError(null)}}}})),external_kbnSharedDeps_React_default.a.createElement(FilterBar,{allDeprecations:allDeprecations,currentFilter:currentFilter,onFilterChange:onFilterChange}),external_kbnSharedDeps_React_default.a.createElement(GroupByBar,{availableGroupByOptions:availableGroupByOptions,currentGroupBy:currentGroupBy,onGroupByChange:onGroupByChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:loadData,iconType:"refresh",isLoading:loadingState===LoadingState.Loading},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.controls.refreshButtonLabel",defaultMessage:"Refresh"}))))),filterInvalid&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.controls.filterErrorMessageLabel",{defaultMessage:"Filter invalid: {searchTermError}",values:{searchTermError:searchTermError}}),iconType:"faceSad"})))};const DeprecationCountSummary=({deprecations:deprecations,allDeprecations:allDeprecations})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},allDeprecations.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.numDeprecationsShownLabel",defaultMessage:"Showing {numShown} of {total}",values:{numShown:deprecations.length,total:allDeprecations.length}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.noDeprecationsLabel",defaultMessage:"No deprecations"}),deprecations.length!==allDeprecations.length&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,". ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.changeFiltersShowMoreLabel",description:"Explains how to show all deprecations if there are more available.",defaultMessage:"Change filter to show more."})));const LEVEL_MAP={warning:0,critical:1};const REVERSE_LEVEL_MAP=Object(external_kbnSharedDeps_Lodash_["invert"])(LEVEL_MAP);const COLOR_MAP={warning:"default",critical:"danger"};const LocalizedLevels={warning:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.deprecations.warningLabel",{defaultMessage:"warning"}),critical:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.deprecations.criticalLabel",{defaultMessage:"critical"})};const LocalizedActions={warning:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.deprecations.warningActionTooltip",{defaultMessage:"Resolving this issue before upgrading is advised, but not required."}),critical:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.deprecations.criticalActionTooltip",{defaultMessage:"Resolve this issue before upgrading."})};const SingleHealth=({level:level,label:label})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:LocalizedActions[level]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:COLOR_MAP[level]},label)),"â€ƒ");const DeprecationHealth=({deprecations:deprecations,single:single=false})=>{if(deprecations.length===0){return external_kbnSharedDeps_React_default.a.createElement("span",null)}const levels=deprecations.map(d=>LEVEL_MAP[d.level]);if(single){const highest=Math.max(...levels);const highestLevel=REVERSE_LEVEL_MAP[highest];return external_kbnSharedDeps_React_default.a.createElement(SingleHealth,{level:highestLevel,label:LocalizedLevels[highestLevel]})}const countByLevel=Object(external_kbnSharedDeps_Lodash_["countBy"])(levels);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,Object.keys(countByLevel).map(k=>parseInt(k,10)).sort().map(level=>[level,REVERSE_LEVEL_MAP[level]]).map(([numLevel,stringLevel])=>external_kbnSharedDeps_React_default.a.createElement(SingleHealth,{key:stringLevel,level:stringLevel,label:"".concat(countByLevel[numLevel]," ").concat(LocalizedLevels[stringLevel])})))};let ReindexStep;(function(ReindexStep){ReindexStep[ReindexStep["created"]=0]="created";ReindexStep[ReindexStep["indexGroupServicesStopped"]=10]="indexGroupServicesStopped";ReindexStep[ReindexStep["readonly"]=20]="readonly";ReindexStep[ReindexStep["newIndexCreated"]=30]="newIndexCreated";ReindexStep[ReindexStep["reindexStarted"]=40]="reindexStarted";ReindexStep[ReindexStep["reindexCompleted"]=50]="reindexCompleted";ReindexStep[ReindexStep["aliasCreated"]=60]="aliasCreated";ReindexStep[ReindexStep["indexGroupServicesStarted"]=70]="indexGroupServicesStarted"})(ReindexStep||(ReindexStep={}));let ReindexStatus;(function(ReindexStatus){ReindexStatus[ReindexStatus["inProgress"]=0]="inProgress";ReindexStatus[ReindexStatus["completed"]=1]="completed";ReindexStatus[ReindexStatus["failed"]=2]="failed";ReindexStatus[ReindexStatus["paused"]=3]="paused";ReindexStatus[ReindexStatus["cancelled"]=4]="cancelled"})(ReindexStatus||(ReindexStatus={}));const REINDEX_OP_TYPE="upgrade-assistant-reindex-operation";let ReindexWarning;(function(ReindexWarning){ReindexWarning[ReindexWarning["allField"]=0]="allField";ReindexWarning[ReindexWarning["booleanFields"]=1]="booleanFields";ReindexWarning[ReindexWarning["apmReindex"]=2]="apmReindex"})(ReindexWarning||(ReindexWarning={}));let IndexGroup;(function(IndexGroup){IndexGroup["ml"]="___ML_REINDEX_LOCK___";IndexGroup["watcher"]="___WATCHER_REINDEX_LOCK___"})(IndexGroup||(IndexGroup={}));const UPGRADE_ASSISTANT_TYPE="upgrade-assistant-telemetry";const UPGRADE_ASSISTANT_DOC_ID="upgrade-assistant-telemetry";var classnames=__webpack_require__(93);var classnames_default=__webpack_require__.n(classnames);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const StepStatus=({status:status,idx:idx})=>{if(status==="incomplete"){return external_kbnSharedDeps_React_default.a.createElement("span",{className:"upgStepProgress__status"},idx+1,".")}else if(status==="inProgress"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"m",className:"upgStepProgress__status"})}else if(status==="complete"){return external_kbnSharedDeps_React_default.a.createElement("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-complete"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"check",size:"s"}))}else if(status==="paused"){return external_kbnSharedDeps_React_default.a.createElement("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-paused"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"pause",size:"s"}))}else if(status==="cancelled"){return external_kbnSharedDeps_React_default.a.createElement("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-cancelled"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"cross",size:"s"}))}else if(status==="failed"){return external_kbnSharedDeps_React_default.a.createElement("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-failed"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"cross",size:"s"}))}throw new Error("Unsupported status: ".concat(status))};const Step=({title:title,status:status,children:children,idx:idx})=>{const titleClassName=classnames_default()("upgStepProgress__title",{"upgStepProgress__title--currentStep":status==="inProgress"||status==="paused"||status==="failed"||status==="cancelled"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"upgStepProgress__step"},external_kbnSharedDeps_React_default.a.createElement(StepStatus,{status:status,idx:idx}),external_kbnSharedDeps_React_default.a.createElement("p",{className:titleClassName},title)),children&&external_kbnSharedDeps_React_default.a.createElement("div",{className:"upgStepProgress__content"},children))};const StepProgress=({steps:steps})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"upgStepProgress__container"},steps.map((step,idx)=>external_kbnSharedDeps_React_default.a.createElement(Step,_extends({key:idx},step,{idx:idx}))));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const ErrorCallout=({errorMessage:errorMessage})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger",title:"There was an error"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,errorMessage)));const PausedCallout=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning",title:"This step was paused due to a Kibana restart. Click 'Resume' below to continue."});const ReindexProgressBar=({reindexState:{lastCompletedStep:lastCompletedStep,status:status,reindexTaskPercComplete:reindexTaskPercComplete,cancelLoadingState:cancelLoadingState},cancelReindex:cancelReindex})=>{const progressBar=reindexTaskPercComplete?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiProgress"],{size:"s",value:reindexTaskPercComplete,max:1}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiProgress"],{size:"s"});let cancelText;switch(cancelLoadingState){case LoadingState.Loading:cancelText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancellingLabel",defaultMessage:"Cancellingâ€¦"});break;case LoadingState.Success:cancelText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancelledLabel",defaultMessage:"Cancelled"});break;case LoadingState.Error:cancelText="Could not cancel";cancelText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.errorLabel",defaultMessage:"Could not cancel"});break;default:cancelText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancelLabel",defaultMessage:"Cancel"})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,progressBar),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:cancelReindex,disabled:cancelLoadingState===LoadingState.Loading||status!==ReindexStatus.inProgress||lastCompletedStep!==ReindexStep.reindexStarted,isLoading:cancelLoadingState===LoadingState.Loading},cancelText)))};const orderedSteps=Object.values(ReindexStep).sort();const ReindexProgress=props=>{const _props$reindexState=props.reindexState,errorMessage=_props$reindexState.errorMessage,indexGroup=_props$reindexState.indexGroup,_props$reindexState$l=_props$reindexState.lastCompletedStep,lastCompletedStep=_props$reindexState$l===void 0?-1:_props$reindexState$l,status=_props$reindexState.status;const stepDetails=thisStep=>{const previousStep=orderedSteps[orderedSteps.indexOf(thisStep)-1];if(status===ReindexStatus.failed&&lastCompletedStep===previousStep){return{status:"failed",children:external_kbnSharedDeps_React_default.a.createElement(ErrorCallout,{errorMessage:errorMessage})}}else if(status===ReindexStatus.paused&&lastCompletedStep===previousStep){return{status:"paused",children:external_kbnSharedDeps_React_default.a.createElement(PausedCallout,null)}}else if(status===ReindexStatus.cancelled&&lastCompletedStep===previousStep){return{status:"cancelled"}}else if(status===undefined||lastCompletedStep<previousStep){return{status:"incomplete"}}else if(lastCompletedStep===previousStep){return{status:"inProgress"}}else{return{status:"complete"}}};const reindexingDocsStep={title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.reindexingDocumentsStepTitle",defaultMessage:"Reindexing documents"})};if(status===ReindexStatus.failed&&(lastCompletedStep===ReindexStep.newIndexCreated||lastCompletedStep===ReindexStep.reindexStarted)){reindexingDocsStep.status="failed";reindexingDocsStep.children=external_kbnSharedDeps_React_default.a.createElement(ErrorCallout,{errorMessage:errorMessage})}else if(status===ReindexStatus.paused&&(lastCompletedStep===ReindexStep.newIndexCreated||lastCompletedStep===ReindexStep.reindexStarted)){reindexingDocsStep.status="paused";reindexingDocsStep.children=external_kbnSharedDeps_React_default.a.createElement(PausedCallout,null)}else if(status===ReindexStatus.cancelled&&(lastCompletedStep===ReindexStep.newIndexCreated||lastCompletedStep===ReindexStep.reindexStarted)){reindexingDocsStep.status="cancelled"}else if(status===undefined||lastCompletedStep<ReindexStep.newIndexCreated){reindexingDocsStep.status="incomplete"}else if(lastCompletedStep===ReindexStep.newIndexCreated||lastCompletedStep===ReindexStep.reindexStarted){reindexingDocsStep.status="inProgress";reindexingDocsStep.children=external_kbnSharedDeps_React_default.a.createElement(ReindexProgressBar,props)}else{reindexingDocsStep.status="complete"}const steps=[_objectSpread({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.readonlyStepTitle",defaultMessage:"Setting old index to read-only"})},stepDetails(ReindexStep.readonly)),_objectSpread({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.createIndexStepTitle",defaultMessage:"Creating new index"})},stepDetails(ReindexStep.newIndexCreated)),reindexingDocsStep,_objectSpread({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.aliasSwapStepTitle",defaultMessage:"Swapping original index with alias"})},stepDetails(ReindexStep.aliasCreated))];if(indexGroup===IndexGroup.ml){steps.unshift(_objectSpread({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.pauseMlStepTitle",defaultMessage:"Pausing Machine Learning jobs"})},stepDetails(ReindexStep.indexGroupServicesStopped)));steps.push(_objectSpread({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.resumeMlStepTitle",defaultMessage:"Resuming Machine Learning jobs"})},stepDetails(ReindexStep.indexGroupServicesStarted)))}else if(indexGroup===IndexGroup.watcher){steps.unshift(_objectSpread({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.stopWatcherStepTitle",defaultMessage:"Stopping Watcher"})},stepDetails(ReindexStep.indexGroupServicesStopped)));steps.push(_objectSpread({title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.resumeWatcherStepTitle",defaultMessage:"Resuming Watcher"})},stepDetails(ReindexStep.indexGroupServicesStarted)))}return external_kbnSharedDeps_React_default.a.createElement(StepProgress,{steps:steps})};const buttonLabel=status=>{switch(status){case ReindexStatus.failed:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.tryAgainLabel",defaultMessage:"Try again"});case ReindexStatus.inProgress:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.reindexingLabel",defaultMessage:"Reindexingâ€¦"});case ReindexStatus.completed:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.doneLabel",defaultMessage:"Done!"});case ReindexStatus.paused:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.resumeLabel",defaultMessage:"Resume"});default:return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.runReindexLabel",defaultMessage:"Run reindex"})}};const ChecklistFlyoutStep=({closeFlyout:closeFlyout,reindexState:reindexState,startReindex:startReindex,cancelReindex:cancelReindex,renderGlobalCallouts:renderGlobalCallouts})=>{const loadingState=reindexState.loadingState,status=reindexState.status,hasRequiredPrivileges=reindexState.hasRequiredPrivileges;const loading=loadingState===LoadingState.Loading||status===ReindexStatus.inProgress;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,renderGlobalCallouts(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.readonlyCallout.calloutTitle",defaultMessage:"Index is unable to ingest, update, or delete documents while reindexing"}),color:"warning",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.readonlyCallout.cantStopDetail",defaultMessage:"If you canâ€™t stop document updates or need to reindex into a new cluster, consider using a different upgrade strategy."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.readonlyCallout.backgroundResumeDetail",defaultMessage:"Reindexing will continue in the background, but if Kibana shuts down or restarts you will need to return to this page to resume reindexing."}))),!hasRequiredPrivileges&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.insufficientPrivilegeCallout.calloutTitle",defaultMessage:"You do not have sufficient privileges to reindex this index"}),color:"danger",iconType:"alert"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklistTitle",defaultMessage:"Reindexing process"}))),external_kbnSharedDeps_React_default.a.createElement(ReindexProgress,{reindexState:reindexState,cancelReindex:cancelReindex})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"cross",onClick:closeFlyout,flush:"left"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.closeButtonLabel",defaultMessage:"Close"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,color:status===ReindexStatus.paused?"warning":"primary",iconType:status===ReindexStatus.paused?"play":undefined,onClick:startReindex,isLoading:loading,disabled:loading||status===ReindexStatus.completed||!hasRequiredPrivileges},buttonLabel(status))))))};function warnings_step_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function warnings_step_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){warnings_step_ownKeys(Object(source),true).forEach((function(key){warnings_step_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{warnings_step_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function warnings_step_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const idForWarning=warning=>"reindexWarning-".concat(warning);const WarningCheckbox=({checkedIds:checkedIds,warning:warning,label:label,onChange:onChange,description:description,documentationUrl:documentationUrl})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{id:idForWarning(warning),label:external_kbnSharedDeps_React_default.a.createElement("strong",null,label),checked:checkedIds[idForWarning(warning)],onChange:onChange}),external_kbnSharedDeps_React_default.a.createElement("p",{className:"upgWarningsStep__warningDescription"},description,external_kbnSharedDeps_React_default.a.createElement("br",null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:documentationUrl,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.documentationLinkLabel",defaultMessage:"Documentation"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null));class warnings_step_WarningsFlyoutStep extends external_kbnSharedDeps_React_default.a.Component{constructor(props){super(props);warnings_step_defineProperty(this,"onChange",e=>{const optionId=e.target.id;const nextCheckedIds=warnings_step_objectSpread(warnings_step_objectSpread({},this.state.checkedIds),{[optionId]:!this.state.checkedIds[optionId]});this.setState({checkedIds:nextCheckedIds})});this.state={checkedIds:props.warnings.reduce((checkedIds,warning)=>{checkedIds[idForWarning(warning)]=false;return checkedIds},{})}}render(){const _this$props=this.props,warnings=_this$props.warnings,closeFlyout=_this$props.closeFlyout,advanceNextStep=_this$props.advanceNextStep,renderGlobalCallouts=_this$props.renderGlobalCallouts;const checkedIds=this.state.checkedIds;const blockAdvance=Object.values(checkedIds).filter(v=>v).length<warnings.length;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,renderGlobalCallouts(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.destructiveCallout.calloutTitle",defaultMessage:"This index requires destructive changes that can't be undone"}),color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.destructiveCallout.calloutDetail",defaultMessage:"Back up your index, then proceed with the reindex by accepting each breaking change."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),warnings.includes(ReindexWarning.allField)&&external_kbnSharedDeps_React_default.a.createElement(WarningCheckbox,{checkedIds:checkedIds,onChange:this.onChange,warning:ReindexWarning.allField,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.allFieldWarningTitle",defaultMessage:"{allField} will be removed",values:{allField:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"_all")}}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.allFieldWarningDetail",defaultMessage:"The {allField} meta field is no longer supported in 7.0. Reindexing removes the {allField} field in the new index. Ensure that no application code or scripts reply on this field.",values:{allField:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"_all")}}),documentationUrl:"https://www.elastic.co/guide/en/elasticsearch/reference/6.0/breaking_60_mappings_changes.html#_the_literal__all_literal_meta_field_is_now_disabled_by_default"}),warnings.includes(ReindexWarning.apmReindex)&&external_kbnSharedDeps_React_default.a.createElement(WarningCheckbox,{checkedIds:checkedIds,onChange:this.onChange,warning:ReindexWarning.apmReindex,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.apmReindexWarningTitle",defaultMessage:"This index will be converted to ECS format"}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.apmReindexWarningDetail",defaultMessage:"Starting in version 7.0.0, APM data will be represented in the Elastic Common Schema. Historical APM data will not visible until it's reindexed."}),documentationUrl:"https://www.elastic.co/guide/en/apm/get-started/master/apm-release-notes.html"}),warnings.includes(ReindexWarning.booleanFields)&&external_kbnSharedDeps_React_default.a.createElement(WarningCheckbox,{checkedIds:checkedIds,onChange:this.onChange,warning:ReindexWarning.booleanFields,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.booleanFieldsWarningTitle",defaultMessage:"Boolean data in {_source} might change",values:{_source:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"_source")}}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.booleanFieldsWarningDetail",defaultMessage:"If a document contain a boolean field that is neither {true} or {false} (for example, {yes}, {on}, {one}), reindexing converts these fields to {true} or {false}. Ensure that no application code or scripts rely on boolean fields in the deprecated format.",values:{true:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"true"),false:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"false"),yes:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,'"yes"'),on:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,'"on"'),one:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"1")}}),documentationUrl:"https://www.elastic.co/guide/en/elasticsearch/reference/6.0/breaking_60_mappings_changes.html#_coercion_of_boolean_field"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"cross",onClick:closeFlyout,flush:"left"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.cancelButtonLabel",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,color:"danger",onClick:advanceNextStep,disabled:blockAdvance},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.continueButtonLabel",defaultMessage:"Continue with reindex"}))))))}}function container_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ReindexFlyoutStep;(function(ReindexFlyoutStep){ReindexFlyoutStep[ReindexFlyoutStep["reindexWarnings"]=0]="reindexWarnings";ReindexFlyoutStep[ReindexFlyoutStep["checklist"]=1]="checklist"})(ReindexFlyoutStep||(ReindexFlyoutStep={}));const getOpenAndCloseIndexDocLink=({ELASTIC_WEBSITE_URL:ELASTIC_WEBSITE_URL,DOC_LINK_VERSION:DOC_LINK_VERSION})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{target:"_blank",href:"".concat(ELASTIC_WEBSITE_URL,"/guide/en/elasticsearch/reference/").concat(DOC_LINK_VERSION,"/indices-open-close.html")},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.reindexing.flyout.openAndCloseDocumentation",{defaultMessage:"documentation"}));const getIndexClosedCallout=docLinks=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.reindexing.flyout.indexClosedCallout.calloutTitle",{defaultMessage:"Index closed"}),color:"warning",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.indexClosedCallout.calloutDetails",defaultMessage:"This index is currently closed. The Upgrade Assistant will open, reindex and then close the index. {reindexingMayTakeLongerEmph}. Please see the {docs} for more information.",values:{docs:getOpenAndCloseIndexDocLink(docLinks),reindexingMayTakeLongerEmph:external_kbnSharedDeps_React_default.a.createElement("b",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.reindexing.flyout.indexClosedCallout.calloutDetails.reindexingTakesLongerEmphasis",{defaultMessage:"Reindexing may take longer than usual"}))}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}));class container_ReindexFlyout extends external_kbnSharedDeps_React_default.a.Component{constructor(props){super(props);container_defineProperty(this,"advanceNextStep",()=>{this.setState({currentFlyoutStep:ReindexFlyoutStep.checklist})});const _props$reindexState=props.reindexState,status=_props$reindexState.status,reindexWarnings=_props$reindexState.reindexWarnings;this.state={currentFlyoutStep:reindexWarnings&&reindexWarnings.length>0&&status===undefined?ReindexFlyoutStep.reindexWarnings:ReindexFlyoutStep.checklist}}render(){const _this$props=this.props,closeFlyout=_this$props.closeFlyout,indexName=_this$props.indexName,reindexState=_this$props.reindexState,startReindex=_this$props.startReindex,cancelReindex=_this$props.cancelReindex,reindexBlocker=_this$props.reindexBlocker,docLinks=_this$props.docLinks;const currentFlyoutStep=this.state.currentFlyoutStep;let flyoutContents;const globalCallout=reindexBlocker==="index-closed"&&reindexState.status!==ReindexStatus.completed?getIndexClosedCallout(docLinks):undefined;switch(currentFlyoutStep){case ReindexFlyoutStep.reindexWarnings:flyoutContents=external_kbnSharedDeps_React_default.a.createElement(warnings_step_WarningsFlyoutStep,{renderGlobalCallouts:()=>globalCallout,closeFlyout:closeFlyout,warnings:reindexState.reindexWarnings,advanceNextStep:this.advanceNextStep});break;case ReindexFlyoutStep.checklist:flyoutContents=external_kbnSharedDeps_React_default.a.createElement(ChecklistFlyoutStep,{renderGlobalCallouts:()=>globalCallout,closeFlyout:closeFlyout,reindexState:reindexState,startReindex:startReindex,cancelReindex:cancelReindex});break;default:throw new Error("Invalid flyout step: ".concat(currentFlyoutStep))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPortal"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:closeFlyout,"aria-labelledby":"Reindex",ownFocus:true,size:"m",maxWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.flyoutHeader",defaultMessage:"Reindex {indexName}",values:{indexName:indexName}})))),flyoutContents))}}var external_kbnSharedDeps_Rxjs_=__webpack_require__(29);function polling_service_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function polling_service_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){polling_service_ownKeys(Object(source),true).forEach((function(key){polling_service_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{polling_service_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function polling_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const POLL_INTERVAL=1e3;class polling_service_ReindexPollingService{constructor(indexName,http){var _this=this;this.indexName=indexName;this.http=http;polling_service_defineProperty(this,"status$",void 0);polling_service_defineProperty(this,"pollTimeout",void 0);polling_service_defineProperty(this,"updateStatus",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var data;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.stopPolling();_context.prev=1;_context.next=4;return _this.http.get("/api/upgrade_assistant/reindex/".concat(_this.indexName));case 4:data=_context.sent;_this.updateWithResponse(data);if(data.reindexOp&&data.reindexOp.status===ReindexStatus.inProgress){_this.pollTimeout=setTimeout(_this.updateStatus,POLL_INTERVAL)}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](1);_this.status$.next(polling_service_objectSpread(polling_service_objectSpread({},_this.status$.value),{},{status:ReindexStatus.failed}));case 12:case"end":return _context.stop()}}),_callee,null,[[1,9]])}))));polling_service_defineProperty(this,"stopPolling",()=>{if(this.pollTimeout){clearTimeout(this.pollTimeout)}});polling_service_defineProperty(this,"startReindex",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var currentValue,data;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;currentValue=_this.status$.value;_this.status$.next(polling_service_objectSpread(polling_service_objectSpread({},currentValue),{},{lastCompletedStep:currentValue.status===ReindexStatus.paused?currentValue.lastCompletedStep:undefined,status:ReindexStatus.inProgress,reindexTaskPercComplete:null,errorMessage:null,cancelLoadingState:undefined}));_context2.next=5;return _this.http.post("/api/upgrade_assistant/reindex/".concat(_this.indexName));case 5:data=_context2.sent;_this.updateWithResponse({reindexOp:data});_this.updateStatus();_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2["catch"](0);_this.status$.next(polling_service_objectSpread(polling_service_objectSpread({},_this.status$.value),{},{status:ReindexStatus.failed}));case 13:case"end":return _context2.stop()}}),_callee2,null,[[0,10]])}))));polling_service_defineProperty(this,"cancelReindex",_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_this.status$.next(polling_service_objectSpread(polling_service_objectSpread({},_this.status$.value),{},{cancelLoadingState:LoadingState.Loading}));_context3.next=4;return _this.http.post("/api/upgrade_assistant/reindex/".concat(_this.indexName,"/cancel"));case 4:_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3["catch"](0);_this.status$.next(polling_service_objectSpread(polling_service_objectSpread({},_this.status$.value),{},{cancelLoadingState:LoadingState.Error}));case 9:case"end":return _context3.stop()}}),_callee3,null,[[0,6]])}))));polling_service_defineProperty(this,"updateWithResponse",({reindexOp:reindexOp,warnings:warnings,hasRequiredPrivileges:hasRequiredPrivileges,indexGroup:indexGroup})=>{const currentValue=this.status$.value;const nextValue=polling_service_objectSpread(polling_service_objectSpread({},currentValue),{},{loadingState:LoadingState.Success});if(warnings){nextValue.reindexWarnings=warnings}if(hasRequiredPrivileges!==undefined){nextValue.hasRequiredPrivileges=hasRequiredPrivileges}if(indexGroup){nextValue.indexGroup=indexGroup}if(reindexOp){nextValue.lastCompletedStep=reindexOp.lastCompletedStep;nextValue.status=reindexOp.status;nextValue.reindexTaskPercComplete=reindexOp.reindexTaskPercComplete;nextValue.errorMessage=reindexOp.errorMessage;if(reindexOp.status===ReindexStatus.cancelled){nextValue.cancelLoadingState=LoadingState.Success}}this.status$.next(nextValue)});this.status$=new external_kbnSharedDeps_Rxjs_["BehaviorSubject"]({loadingState:LoadingState.Loading,errorMessage:null,reindexTaskPercComplete:null})}}function button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function button_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function button_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class button_ReindexButton extends external_kbnSharedDeps_React_default.a.Component{constructor(props){var _this;super(props);_this=this;button_defineProperty(this,"service",void 0);button_defineProperty(this,"subscription",void 0);button_defineProperty(this,"startReindex",button_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!_this.state.reindexState.status){_this.sendUIReindexTelemetryInfo("start")}_context.next=3;return _this.service.startReindex();case 3:case"end":return _context.stop()}}),_callee)}))));button_defineProperty(this,"cancelReindex",button_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this.sendUIReindexTelemetryInfo("stop");_context2.next=3;return _this.service.cancelReindex();case 3:case"end":return _context2.stop()}}),_callee2)}))));button_defineProperty(this,"showFlyout",()=>{this.sendUIReindexTelemetryInfo("open");this.setState({flyoutVisible:true})});button_defineProperty(this,"closeFlyout",()=>{this.sendUIReindexTelemetryInfo("close");this.setState({flyoutVisible:false})});this.service=this.newService();this.state={flyoutVisible:false,reindexState:this.service.status$.value}}componentDidMount(){var _this2=this;return button_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_this2.subscribeToUpdates();case 1:case"end":return _context3.stop()}}),_callee3)})))()}componentWillUnmount(){var _this3=this;return button_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_this3.unsubscribeToUpdates();case 1:case"end":return _context4.stop()}}),_callee4)})))()}componentDidUpdate(prevProps){if(prevProps.indexName!==this.props.indexName){this.unsubscribeToUpdates();this.service=this.newService();this.subscribeToUpdates()}}render(){const _this$props=this.props,indexName=_this$props.indexName,reindexBlocker=_this$props.reindexBlocker,docLinks=_this$props.docLinks;const _this$state=this.state,flyoutVisible=_this$state.flyoutVisible,reindexState=_this$state.reindexState;const buttonProps={size:"s",onClick:this.showFlyout};let buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.reindexLabel",defaultMessage:"Reindex"});if(reindexState.loadingState===LoadingState.Loading){buttonProps.disabled=true;buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.loadingLabel",defaultMessage:"Loadingâ€¦"})}else{switch(reindexState.status){case ReindexStatus.inProgress:buttonContent=external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{className:"upgReindexButton__spinner",size:"m"})," Reindexingâ€¦");break;case ReindexStatus.completed:buttonProps.color="secondary";buttonProps.iconSide="left";buttonProps.iconType="check";buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.doneLabel",defaultMessage:"Done"});break;case ReindexStatus.failed:buttonProps.color="danger";buttonProps.iconSide="left";buttonProps.iconType="cross";buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.failedLabel",defaultMessage:"Failed"});break;case ReindexStatus.paused:buttonProps.color="warning";buttonProps.iconSide="left";buttonProps.iconType="pause";buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.pausedLabel",defaultMessage:"Paused"});case ReindexStatus.cancelled:buttonProps.color="danger";buttonProps.iconSide="left";buttonProps.iconType="cross";buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.cancelledLabel",defaultMessage:"Cancelled"});break}}const showIndexedClosedWarning=reindexBlocker==="index-closed"&&reindexState.status!==ReindexStatus.completed;if(showIndexedClosedWarning){buttonProps.color="warning";buttonProps.iconType="alert"}const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],buttonProps,buttonContent);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,showIndexedClosedWarning?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.indexClosedToolTipDetails",{defaultMessage:'"{indexName}" needs to be reindexed, but it is currently closed. The Upgrade Assistant will open, reindex and then close the index. Reindexing may take longer than usual.',values:{indexName:indexName}}))},button):button,flyoutVisible&&external_kbnSharedDeps_React_default.a.createElement(container_ReindexFlyout,{reindexBlocker:reindexBlocker,docLinks:docLinks,indexName:indexName,closeFlyout:this.closeFlyout,reindexState:reindexState,startReindex:this.startReindex,cancelReindex:this.cancelReindex}))}newService(){const _this$props2=this.props,indexName=_this$props2.indexName,http=_this$props2.http;return new polling_service_ReindexPollingService(indexName,http)}subscribeToUpdates(){this.service.updateStatus();this.subscription=this.service.status$.subscribe(reindexState=>this.setState({reindexState:reindexState}))}unsubscribeToUpdates(){if(this.subscription){this.subscription.unsubscribe();delete this.subscription}if(this.service){this.service.stopPolling()}}sendUIReindexTelemetryInfo(uiReindexAction){var _this4=this;return button_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this4.props.http.fetch("/api/upgrade_assistant/stats/ui_reindex",{method:"PUT",body:JSON.stringify(Object(elastic_safer_lodash_set["set"])({},uiReindexAction,true))});case 2:case"end":return _context5.stop()}}),_callee5)})))()}}const AppContext=Object(external_kbnSharedDeps_React_["createContext"])({});const AppContextProvider=({children:children,value:value})=>external_kbnSharedDeps_React_default.a.createElement(AppContext.Provider,{value:value},children);const useAppContext=()=>{const ctx=Object(external_kbnSharedDeps_React_["useContext"])(AppContext);if(!ctx){throw new Error("useAppContext must be called from inside AppContext")}return ctx};const DeprecationCell=({headline:headline,healthColor:healthColor,reindexIndexName:reindexIndexName,docUrl:docUrl,items:items=[],children:children,reindexBlocker:reindexBlocker})=>external_kbnSharedDeps_React_default.a.createElement("div",{className:"upgDeprecationCell"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,wrap:true,alignItems:"baseline"},healthColor&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"dot",color:healthColor})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},headline&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxs"},external_kbnSharedDeps_React_default.a.createElement("h2",null,headline)),docUrl&&external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:docUrl,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.deprecations.documentationButtonLabel",defaultMessage:"Documentation"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"})),items.map(item=>external_kbnSharedDeps_React_default.a.createElement("div",{key:item.title||item.body},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,item.title&&external_kbnSharedDeps_React_default.a.createElement("h6",null,item.title),external_kbnSharedDeps_React_default.a.createElement("p",null,item.body))))),reindexIndexName&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(AppContext.Consumer,null,({http:http,docLinks:docLinks})=>external_kbnSharedDeps_React_default.a.createElement(button_ReindexButton,{docLinks:docLinks,reindexBlocker:reindexBlocker,indexName:reindexIndexName,http:http})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),children);function index_table_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function index_table_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){index_table_ownKeys(Object(source),true).forEach((function(key){index_table_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{index_table_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function index_table_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const PAGE_SIZES=[10,25,50,100,250,500,1e3];class index_table_IndexDeprecationTableUI extends external_kbnSharedDeps_React_default.a.Component{constructor(props){super(props);index_table_defineProperty(this,"onTableChange",tableProps=>{this.setState({sortField:tableProps.sort.field,sortDirection:tableProps.sort.direction,pageIndex:tableProps.page.index,pageSize:tableProps.page.size})});this.state={sortField:"index",sortDirection:"asc",pageIndex:0,pageSize:10}}render(){const intl=this.props.intl;const _this$state=this.state,pageIndex=_this$state.pageIndex,pageSize=_this$state.pageSize,sortField=_this$state.sortField,sortDirection=_this$state.sortDirection;const columns=[{field:"index",name:intl.formatMessage({id:"xpack.upgradeAssistant.checkupTab.deprecations.indexTable.indexColumnLabel",defaultMessage:"Index"}),sortable:true},{field:"details",name:intl.formatMessage({id:"xpack.upgradeAssistant.checkupTab.deprecations.indexTable.detailsColumnLabel",defaultMessage:"Details"})}];const actionsColumn=this.generateActionsColumn();if(actionsColumn){columns.push(actionsColumn)}const sorting={sort:{field:sortField,direction:sortDirection}};const pagination=index_table_objectSpread({pageIndex:pageIndex,pageSize:pageSize},this.pageSizeOptions());return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{items:this.getRows(),columns:columns,sorting:sorting,pagination:pagination,onChange:this.onTableChange,hasActions:false})}getRows(){const _this$state2=this.state,sortField=_this$state2.sortField,sortDirection=_this$state2.sortDirection,pageIndex=_this$state2.pageIndex,pageSize=_this$state2.pageSize;const indices=this.props.indices;let sorted=Object(external_kbnSharedDeps_Lodash_["sortBy"])(indices,sortField);if(sortDirection==="desc"){sorted=sorted.reverse()}const start=pageIndex*pageSize;return sorted.slice(start,start+pageSize)}pageSizeOptions(){const indices=this.props.indices;const totalItemCount=indices.length;if(totalItemCount<=PAGE_SIZES[0]){return{totalItemCount:totalItemCount,pageSizeOptions:[],hidePerPageOptions:true}}const pageSizeOptions=PAGE_SIZES.filter((perPage,idx)=>idx===0||totalItemCount>PAGE_SIZES[idx-1]);return{totalItemCount:totalItemCount,pageSizeOptions:pageSizeOptions,hidePerPageOptions:false}}generateActionsColumn(){const indices=this.props.indices;if(!indices.find(i=>i.reindex===true)){return null}return{actions:[{render(indexDep){return external_kbnSharedDeps_React_default.a.createElement(AppContext.Consumer,null,({http:http,docLinks:docLinks})=>external_kbnSharedDeps_React_default.a.createElement(button_ReindexButton,{docLinks:docLinks,reindexBlocker:indexDep.blockerForReindexing,indexName:indexDep.index,http:http}))}}]}}}const IndexDeprecationTable=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(index_table_IndexDeprecationTableUI);const sortByLevelDesc=(a,b)=>-1*(LEVEL_MAP[a.level]-LEVEL_MAP[b.level]);const MessageDeprecation=({deprecation:deprecation})=>{const items=[];if(deprecation.details){items.push({body:deprecation.details})}return external_kbnSharedDeps_React_default.a.createElement(DeprecationCell,{reindexBlocker:deprecation.blockerForReindexing,headline:deprecation.message,healthColor:COLOR_MAP[deprecation.level],reindexIndexName:deprecation.reindex?deprecation.index:undefined,docUrl:deprecation.url,items:items})};const SimpleMessageDeprecation=({deprecation:deprecation})=>{const items=[];if(deprecation.details){items.push({body:deprecation.details})}return external_kbnSharedDeps_React_default.a.createElement(DeprecationCell,{reindexBlocker:deprecation.blockerForReindexing,items:items,docUrl:deprecation.url})};const IndexDeprecation=({deprecation:deprecation,indices:indices})=>external_kbnSharedDeps_React_default.a.createElement(DeprecationCell,{docUrl:deprecation.url},external_kbnSharedDeps_React_default.a.createElement(IndexDeprecationTable,{indices:indices}));const DeprecationList=({deprecations:deprecations,currentGroupBy:currentGroupBy})=>{if(currentGroupBy===GroupByOption.message&&deprecations[0].index!==undefined){const indices=deprecations.map(dep=>({index:dep.index,details:dep.details,reindex:dep.reindex===true,blockerForReindexing:dep.blockerForReindexing}));return external_kbnSharedDeps_React_default.a.createElement(IndexDeprecation,{indices:indices,deprecation:deprecations[0]})}else if(currentGroupBy===GroupByOption.index){return external_kbnSharedDeps_React_default.a.createElement("div",null,deprecations.sort(sortByLevelDesc).map(dep=>external_kbnSharedDeps_React_default.a.createElement(MessageDeprecation,{deprecation:dep,key:dep.message})))}else{return external_kbnSharedDeps_React_default.a.createElement("div",null,deprecations.sort(sortByLevelDesc).map(dep=>external_kbnSharedDeps_React_default.a.createElement(SimpleMessageDeprecation,{deprecation:dep,key:dep.message})))}};function grouped_extends(){grouped_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return grouped_extends.apply(this,arguments)}function grouped_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const filterDeps=(level,search="")=>{const conditions=[];if(level!==LevelFilterOption.all){conditions.push(dep=>dep.level===level)}if(search.length>0){conditions.push(dep=>{try{const searchReg=new RegExp(search.toLowerCase());return Boolean(dep.message.toLowerCase().match(searchReg)||dep.details&&dep.details.toLowerCase().match(searchReg)||dep.index&&dep.index.toLowerCase().match(searchReg)||dep.node&&dep.node.toLowerCase().match(searchReg))}catch(e){return true}})}return dep=>conditions.map(c=>c(dep)).every(t=>t)};const DeprecationAccordion=({id:id,deprecations:deprecations,title:title,currentGroupBy:currentGroupBy,forceExpand:forceExpand})=>{const hasIndices=Boolean(currentGroupBy===GroupByOption.message&&deprecations.filter(d=>d.index).length);const numIndices=hasIndices?deprecations.length:null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:id,className:"upgDeprecations__item",initialIsOpen:forceExpand,buttonContent:external_kbnSharedDeps_React_default.a.createElement("span",{className:"upgDeprecations__itemName"},title),extraAction:external_kbnSharedDeps_React_default.a.createElement("div",null,hasIndices&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow"},external_kbnSharedDeps_React_default.a.createElement("span",{"data-test-subj":"indexCount"},numIndices)," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.indicesBadgeLabel",defaultMessage:"{numIndices, plural, one {index} other {indices}}",values:{numIndices:numIndices}})),"â€ƒ"),external_kbnSharedDeps_React_default.a.createElement(DeprecationHealth,{single:currentGroupBy===GroupByOption.message,deprecations:deprecations}))},external_kbnSharedDeps_React_default.a.createElement(DeprecationList,{deprecations:deprecations,currentGroupBy:currentGroupBy}))};const PER_PAGE=25;const CalcFields={filteredDeprecations(props){const _props$allDeprecation=props.allDeprecations,allDeprecations=_props$allDeprecation===void 0?[]:_props$allDeprecation,currentFilter=props.currentFilter,search=props.search;return allDeprecations.filter(filterDeps(currentFilter,search))},groups(props){const currentGroupBy=props.currentGroupBy;return Object(external_kbnSharedDeps_Lodash_["groupBy"])(CalcFields.filteredDeprecations(props),currentGroupBy)},numPages(props){return Math.ceil(Object.keys(CalcFields.groups(props)).length/PER_PAGE)}};class grouped_GroupedDeprecations extends external_kbnSharedDeps_React_default.a.Component{constructor(...args){super(...args);grouped_defineProperty(this,"state",{forceExpand:false,expandNumber:0,currentPage:0});grouped_defineProperty(this,"setExpand",forceExpand=>{this.setState({forceExpand:forceExpand,expandNumber:this.state.expandNumber+1})});grouped_defineProperty(this,"setPage",currentPage=>this.setState({currentPage:currentPage}))}static getDerivedStateFromProps(nextProps,{currentPage:currentPage}){if(currentPage>=CalcFields.numPages(nextProps)){return{currentPage:0}}else{return null}}render(){const _this$props=this.props,currentGroupBy=_this$props.currentGroupBy,_this$props$allDeprec=_this$props.allDeprecations,allDeprecations=_this$props$allDeprec===void 0?[]:_this$props$allDeprec;const _this$state=this.state,forceExpand=_this$state.forceExpand,expandNumber=_this$state.expandNumber,currentPage=_this$state.currentPage;const filteredDeprecations=CalcFields.filteredDeprecations(this.props);const groups=CalcFields.groups(this.props);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{flush:"left",size:"s",onClick:()=>this.setExpand(true),"data-test-subj":"expandAll"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.controls.expandAllButtonLabel",defaultMessage:"Expand all"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{flush:"left",size:"s",onClick:()=>this.setExpand(false),"data-test-subj":"collapseAll"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.controls.collapseAllButtonLabel",defaultMessage:"Collapse all"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(DeprecationCountSummary,{allDeprecations:allDeprecations,deprecations:filteredDeprecations}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"upgDeprecations"},Object.keys(groups).sort().slice(currentPage*PER_PAGE,(currentPage+1)*PER_PAGE).map(groupName=>[external_kbnSharedDeps_React_default.a.createElement(DeprecationAccordion,grouped_extends({key:expandNumber,id:"depgroup-".concat(groupName),title:groupName,deprecations:groups[groupName]},{currentGroupBy:currentGroupBy,forceExpand:forceExpand}))]),Object.keys(groups).length>PER_PAGE&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceAround"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPagination"],{pageCount:CalcFields.numPages(this.props),activePage:currentPage,onPageClick:this.setPage}))))))}}function checkup_tab_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class checkup_tab_CheckupTab extends types_UpgradeAssistantTabComponent{constructor(props){super(props);checkup_tab_defineProperty(this,"changeFilter",filter=>{this.setState({currentFilter:filter})});checkup_tab_defineProperty(this,"changeSearch",search=>{this.setState({search:search})});checkup_tab_defineProperty(this,"changeGroupBy",groupBy=>{this.setState({currentGroupBy:groupBy})});this.state={currentFilter:LevelFilterOption.all,search:"",currentGroupBy:GroupByOption.message}}render(){const _this$props=this.props,alertBanner=_this$props.alertBanner,checkupLabel=_this$props.checkupLabel,deprecations=_this$props.deprecations,loadingError=_this$props.loadingError,loadingState=_this$props.loadingState,refreshCheckupData=_this$props.refreshCheckupData,setSelectedTabIndex=_this$props.setSelectedTabIndex,_this$props$showBacku=_this$props.showBackupWarning,showBackupWarning=_this$props$showBacku===void 0?false:_this$props$showBacku;const _this$state=this.state,currentFilter=_this$state.currentFilter,currentGroupBy=_this$state.currentGroupBy;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{grow:false},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.tabDetail",defaultMessage:"These {strongCheckupLabel} issues need your attention. Resolve them before upgrading to Elasticsearch {nextEsVersion}.",values:{strongCheckupLabel:external_kbnSharedDeps_React_default.a.createElement("strong",null,checkupLabel),nextEsVersion:"".concat(version["b"],".x")}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),alertBanner&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,alertBanner,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),showBackupWarning&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.backUpCallout.calloutTitle",defaultMessage:"Back up your indices now"}),color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.backUpCallout.calloutBody.calloutDetail",defaultMessage:"Back up your data using the {snapshotRestoreDocsButton}.",values:{snapshotRestoreDocsButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-snapshots.html",target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.backUpCallout.calloutBody.snapshotRestoreDocsButtonLabel",defaultMessage:"snapshot and restore APIs"}))}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,loadingState===LoadingState.Error?external_kbnSharedDeps_React_default.a.createElement(LoadingErrorBanner,{loadingError:loadingError}):deprecations&&deprecations.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(CheckupControls,{allDeprecations:deprecations,loadingState:loadingState,loadData:refreshCheckupData,currentFilter:currentFilter,onFilterChange:this.changeFilter,onSearchChange:this.changeSearch,availableGroupByOptions:this.availableGroupByOptions(),currentGroupBy:currentGroupBy,onGroupByChange:this.changeGroupBy}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),this.renderCheckupData()):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"faceHappy",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.noIssues.noIssuesTitle",defaultMessage:"All clear!"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"upgradeAssistantIssueSummary"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.noIssues.noIssuesLabel",defaultMessage:"You have no {strongCheckupLabel} issues.",values:{strongCheckupLabel:external_kbnSharedDeps_React_default.a.createElement("strong",null,checkupLabel)}})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.noIssues.nextStepsDetail",defaultMessage:"Check the {overviewTabButton} for next steps.",values:{overviewTabButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>setSelectedTabIndex(0)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.checkupTab.noIssues.nextStepsDetail.overviewTabButtonLabel",defaultMessage:"Overview tab"}))}})))}))))}availableGroupByOptions(){const deprecations=this.props.deprecations;if(!deprecations){return[]}return Object.keys(GroupByOption).filter(opt=>Object(external_kbnSharedDeps_Lodash_["find"])(deprecations,opt))}renderCheckupData(){const deprecations=this.props.deprecations;const _this$state2=this.state,currentFilter=_this$state2.currentFilter,currentGroupBy=_this$state2.currentGroupBy,search=_this$state2.search;return external_kbnSharedDeps_React_default.a.createElement(grouped_GroupedDeprecations,{currentGroupBy:currentGroupBy,currentFilter:currentFilter,search:search,allDeprecations:deprecations})}}function deprecation_logging_toggle_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function deprecation_logging_toggle_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){deprecation_logging_toggle_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){deprecation_logging_toggle_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function deprecation_logging_toggle_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class deprecation_logging_toggle_DeprecationLoggingToggleUI extends external_kbnSharedDeps_React_default.a.Component{constructor(props){var _this;super(props);_this=this;deprecation_logging_toggle_defineProperty(this,"loadData",deprecation_logging_toggle_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_this.setState({loadingState:LoadingState.Loading});_context.next=4;return _this.props.http.get("/api/upgrade_assistant/deprecation_logging");case 4:resp=_context.sent;_this.setState({loadingState:LoadingState.Success,loggingEnabled:resp.isEnabled});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);_this.setState({loadingState:LoadingState.Error});case 11:case"end":return _context.stop()}}),_callee,null,[[0,8]])}))));deprecation_logging_toggle_defineProperty(this,"toggleLogging",deprecation_logging_toggle_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var newEnabled,resp;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;newEnabled=!_this.state.loggingEnabled;_this.setState({loadingState:LoadingState.Loading,loggingEnabled:newEnabled});_context2.next=5;return _this.props.http.put("/api/upgrade_assistant/deprecation_logging",{body:JSON.stringify({isEnabled:newEnabled})});case 5:resp=_context2.sent;_this.setState({loadingState:LoadingState.Success,loggingEnabled:resp.isEnabled});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](0);_this.setState({loadingState:LoadingState.Error});case 12:case"end":return _context2.stop()}}),_callee2,null,[[0,9]])}))));this.state={loadingState:LoadingState.Loading}}UNSAFE_componentWillMount(){this.loadData()}render(){const _this$state=this.state,loggingEnabled=_this$state.loggingEnabled,loadingState=_this$state.loadingState;if(loadingState===LoadingState.Loading&&loggingEnabled===undefined){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"l"})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingToggleSwitch","data-test-subj":"upgradeAssistantDeprecationToggle",label:this.renderLoggingState(),checked:loggingEnabled||false,onChange:this.toggleLogging,disabled:loadingState===LoadingState.Loading||loadingState===LoadingState.Error})}renderLoggingState(){const intl=this.props.intl;const _this$state2=this.state,loggingEnabled=_this$state2.loggingEnabled,loadingState=_this$state2.loadingState;if(loadingState===LoadingState.Error){return intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingToggleSwitch.errorLabel",defaultMessage:"Could not load logging state"})}else if(loggingEnabled){return intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingToggleSwitch.enabledLabel",defaultMessage:"On"})}else{return intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingToggleSwitch.disabledLabel",defaultMessage:"Off"})}}}const DeprecationLoggingToggle=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(deprecation_logging_toggle_DeprecationLoggingToggleUI);const WAIT_FOR_RELEASE_STEP={title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.overviewTab.steps.waitForReleaseStep.stepTitle",{defaultMessage:"Wait for the Elasticsearch {nextEsVersion} release",values:{nextEsVersion:"".concat(version["b"],".0")}}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{grow:false},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.waitForReleaseStep.stepDetail",defaultMessage:"Once the release is out, upgrade to the latest {currentEsMajorVersion} version, and then return here to proceed with your {nextEsMajorVersion} upgrade.",values:{currentEsMajorVersion:"".concat(version["a"],".x"),nextEsMajorVersion:"".concat(version["b"],".0")}}))))};const START_UPGRADE_STEP=isCloudEnabled=>({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.overviewTab.steps.startUpgradeStep.stepTitle",{defaultMessage:"Start your upgrade"}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{grow:false},external_kbnSharedDeps_React_default.a.createElement("p",null,isCloudEnabled?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.startUpgradeStepCloud.stepDetail.goToCloudDashboardDetail",defaultMessage:"Go to the Deployments section on the Elastic Cloud dashboard to start your upgrade."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.startUpgradeStepOnPrem.stepDetail.followInstructionsDetail",defaultMessage:"Follow {instructionButton} to start your upgrade.",values:{instructionButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-upgrade.html",target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.startUpgradeStepOnPrem.stepDetail.instructionButtonLabel",defaultMessage:"these instructions"}))}}))))});const StepsUI=({checkupData:checkupData,setSelectedTabIndex:setSelectedTabIndex,intl:intl})=>{const checkupDataTyped=checkupData;const countByType=Object.keys(checkupDataTyped).reduce((counts,checkupType)=>{counts[checkupType]=checkupDataTyped[checkupType].length;return counts},{});const _useAppContext=useAppContext(),http=_useAppContext.http;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSteps"],{className:"upgSteps",headingElement:"h2",steps:[{title:countByType.cluster?intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.clusterStep.issuesRemainingStepTitle",defaultMessage:"Check for issues with your cluster"}):intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.clusterStep.noIssuesRemainingStepTitle",defaultMessage:"Your cluster settings are ready"}),status:countByType.cluster?"warning":"complete",children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,countByType.cluster?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.clusterStep.todo.todoDetail",defaultMessage:"Go to the {clusterTabButton} to update the deprecated settings.",values:{clusterTabButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>setSelectedTabIndex(1)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.clusterStep.todo.clusterTabButtonLabel",defaultMessage:"Cluster tab"}))}})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.clusterStep.remainingIssuesDetail",defaultMessage:"{numIssues} issues must be resolved.",values:{numIssues:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiNotificationBadge"],null,countByType.cluster)}}))):external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.clusterStep.noRemainingIssuesLabel",defaultMessage:"No remaining deprecated settings."})))},{title:countByType.indices?intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.indicesStep.issuesRemainingStepTitle",defaultMessage:"Check for issues with your indices"}):intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.indicesStep.noIssuesRemainingStepTitle",defaultMessage:"Your index settings are ready"}),status:countByType.indices?"warning":"complete",children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,countByType.indices?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.indicesStep.todo.todoDetail",defaultMessage:"Go to the {indicesTabButton} to update the deprecated settings.",values:{indicesTabButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>setSelectedTabIndex(2)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.indicesStep.todo.indicesTabButtonLabel",defaultMessage:"Indices tab"}))}})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.indicesStep.remainingIssuesDetail",defaultMessage:"{numIssues} issues must be resolved.",values:{numIssues:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiNotificationBadge"],null,countByType.indices)}}))):external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.indicesStep.noRemainingIssuesLabel",defaultMessage:"No remaining deprecated settings."})))},{title:intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.stepTitle",defaultMessage:"Review the Elasticsearch deprecation logs"}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{grow:false},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.deprecationLogs.logsDetail",defaultMessage:"Read the {deprecationLogsDocButton} to see if your applications are using functionality that is not available in {nextEsVersion}. You may need to enable deprecation logging.",values:{deprecationLogsDocButton:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/logging.html#deprecation-logging",target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.deprecationLogs.deprecationLogsDocButtonLabel",defaultMessage:"deprecation logs"})),nextEsVersion:"".concat(version["b"],".0")}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingLabel",defaultMessage:"Enable deprecation logging?"}),describedByIds:["deprecation-logging"]},external_kbnSharedDeps_React_default.a.createElement(DeprecationLoggingToggle,{http:http})))},WAIT_FOR_RELEASE_STEP]})};const Steps=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(StepsUI);const OverviewTab=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{grow:false},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.overviewTab.tabDetail",defaultMessage:"This assistant helps you prepare your cluster and indices for Elasticsearch {nextEsVersion} For other issues that need your attention, see the Elasticsearch logs.",values:{nextEsVersion:"".concat(version["b"],".x")}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),props.alertBanner&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,props.alertBanner,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,props.loadingState===LoadingState.Success&&external_kbnSharedDeps_React_default.a.createElement(Steps,props),props.loadingState===LoadingState.Loading&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null))),props.loadingState===LoadingState.Error&&external_kbnSharedDeps_React_default.a.createElement(LoadingErrorBanner,{loadingError:props.loadingError}))));function tabs_extends(){tabs_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return tabs_extends.apply(this,arguments)}function tabs_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function tabs_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){tabs_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){tabs_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function tabs_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ClusterUpgradeState;(function(ClusterUpgradeState){ClusterUpgradeState[ClusterUpgradeState["needsUpgrade"]=0]="needsUpgrade";ClusterUpgradeState[ClusterUpgradeState["partiallyUpgraded"]=1]="partiallyUpgraded";ClusterUpgradeState[ClusterUpgradeState["upgraded"]=2]="upgraded"})(ClusterUpgradeState||(ClusterUpgradeState={}));class tabs_UpgradeAssistantTabs extends external_kbnSharedDeps_React_default.a.Component{constructor(props){var _this;super(props);_this=this;tabs_defineProperty(this,"onTabClick",selectedTab=>{const selectedTabIndex=Object(external_kbnSharedDeps_Lodash_["findIndex"])(this.tabs,{id:selectedTab.id});if(selectedTabIndex===-1){throw new Error("Clicked tab did not exist in tabs array")}if(this.tabs[this.state.selectedTabIndex].id!==selectedTab.id){this.sendTelemetryInfo(selectedTab.id)}this.setSelectedTabIndex(selectedTabIndex)});tabs_defineProperty(this,"setSelectedTabIndex",selectedTabIndex=>{this.setState({selectedTabIndex:selectedTabIndex})});tabs_defineProperty(this,"loadData",tabs_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_this.setState({loadingState:LoadingState.Loading});_context.next=4;return _this.props.http.get("/api/upgrade_assistant/status");case 4:resp=_context.sent;_this.setState({loadingState:LoadingState.Success,checkupData:resp});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);if(Object(external_kbnSharedDeps_Lodash_["get"])(_context.t0,"response.status")===426){_this.setState({loadingState:LoadingState.Success,clusterUpgradeState:Object(external_kbnSharedDeps_Lodash_["get"])(_context.t0,"response.data.attributes.allNodesUpgraded",false)?ClusterUpgradeState.upgraded:ClusterUpgradeState.partiallyUpgraded})}else{_this.setState({loadingState:LoadingState.Error,loadingError:_context.t0})}case 11:case"end":return _context.stop()}}),_callee,null,[[0,8]])}))));this.state={loadingState:LoadingState.Loading,clusterUpgradeState:ClusterUpgradeState.needsUpgrade,selectedTabIndex:0,telemetryState:TelemetryState.Complete}}componentDidMount(){var _this2=this;return tabs_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this2.loadData();case 2:_this2.sendTelemetryInfo(_this2.tabs[_this2.state.selectedTabIndex].id);case 3:case"end":return _context2.stop()}}),_callee2)})))()}render(){const _this$state=this.state,selectedTabIndex=_this$state.selectedTabIndex,telemetryState=_this$state.telemetryState,clusterUpgradeState=_this$state.clusterUpgradeState;const tabs=this.tabs;if(clusterUpgradeState===ClusterUpgradeState.partiallyUpgraded){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"logoElasticsearch",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.tabs.upgradingInterstitial.upgradingTitle",defaultMessage:"Your cluster is upgrading"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.tabs.upgradingInterstitial.upgradingDescription",defaultMessage:"One or more Elasticsearch nodes have a newer version of Elasticsearch than Kibana. Once all your nodes are upgraded, upgrade Kibana."}))})))}else if(clusterUpgradeState===ClusterUpgradeState.upgraded){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"logoElasticsearch",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.tabs.upgradingInterstitial.upgradeCompleteTitle",defaultMessage:"Your cluster has been upgraded"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.tabs.upgradingInterstitial.upgradeCompleteDescription",defaultMessage:"All Elasticsearch nodes have been upgraded. You may now upgrade Kibana."}))})))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabbedContent"],{"data-test-subj":telemetryState===TelemetryState.Running?"upgradeAssistantTelemetryRunning":undefined,tabs:tabs,onTabClick:this.onTabClick,selectedTab:tabs[selectedTabIndex]})}get tabs(){const _this$state2=this.state,loadingError=_this$state2.loadingError,loadingState=_this$state2.loadingState,checkupData=_this$state2.checkupData;const commonProps={loadingError:loadingError,loadingState:loadingState,refreshCheckupData:this.loadData,setSelectedTabIndex:this.setSelectedTabIndex,alertBanner:external_kbnSharedDeps_React_default.a.createElement(LatestMinorBanner,null)};return[{id:"overview",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.overviewTab.overviewTabTitle",{defaultMessage:"Overview"}),content:external_kbnSharedDeps_React_default.a.createElement(OverviewTab,tabs_extends({checkupData:checkupData},commonProps))},{id:"cluster",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.clusterTabLabel",{defaultMessage:"Cluster"}),content:external_kbnSharedDeps_React_default.a.createElement(checkup_tab_CheckupTab,tabs_extends({key:"cluster",deprecations:checkupData?checkupData.cluster:undefined,checkupLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.tabs.checkupTab.clusterLabel",{defaultMessage:"cluster"})},commonProps))},{id:"indices",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.indicesTabLabel",{defaultMessage:"Indices"}),content:external_kbnSharedDeps_React_default.a.createElement(checkup_tab_CheckupTab,tabs_extends({key:"indices",deprecations:checkupData?checkupData.indices:undefined,checkupLabel:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.upgradeAssistant.checkupTab.indexLabel",{defaultMessage:"index"}),showBackupWarning:true},commonProps))}]}sendTelemetryInfo(tabName){var _this3=this;return tabs_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!(_this3.state.loadingState!==LoadingState.Success)){_context3.next=2;break}return _context3.abrupt("return");case 2:_this3.setState({telemetryState:TelemetryState.Running});_context3.next=5;return _this3.props.http.fetch("/api/upgrade_assistant/stats/ui_open",{method:"PUT",body:JSON.stringify(Object(elastic_safer_lodash_set["set"])({},tabName,true))});case 5:_this3.setState({telemetryState:TelemetryState.Complete});case 6:case"end":return _context3.stop()}}),_callee3)})))()}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const RootComponent=_ref=>{let i18n=_ref.i18n,contexValue=_objectWithoutProperties(_ref,["i18n"]);return external_kbnSharedDeps_React_default.a.createElement(i18n.Context,null,external_kbnSharedDeps_React_default.a.createElement(AppContextProvider,{value:contexValue},external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"upgradeAssistantRoot"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.upgradeAssistant.appTitle",defaultMessage:"{version} Upgrade Assistant",values:{version:"".concat(version["b"],".0")}}))))),external_kbnSharedDeps_React_default.a.createElement(AppContext.Consumer,null,({http:http})=>external_kbnSharedDeps_React_default.a.createElement(tabs_UpgradeAssistantTabs,{http:http})))))};function render_app_objectWithoutProperties(source,excluded){if(source==null)return{};var target=render_app_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function render_app_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const renderApp=deps=>{const element=deps.element,appDependencies=render_app_objectWithoutProperties(deps,["element"]);Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(RootComponent,appDependencies),element);return()=>{Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(element)}};function mount_management_section_slicedToArray(arr,i){return mount_management_section_arrayWithHoles(arr)||mount_management_section_iterableToArrayLimit(arr,i)||mount_management_section_unsupportedIterableToArray(arr,i)||mount_management_section_nonIterableRest()}function mount_management_section_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mount_management_section_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return mount_management_section_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mount_management_section_arrayLikeToArray(o,minLen)}function mount_management_section_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function mount_management_section_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function mount_management_section_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function mount_management_section_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function mount_management_section_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){mount_management_section_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){mount_management_section_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function mountManagementSection(_x,_x2,_x3){return _mountManagementSection.apply(this,arguments)}function _mountManagementSection(){_mountManagementSection=mount_management_section_asyncToGenerator(regeneratorRuntime.mark((function _callee(coreSetup,isCloudEnabled,params){var _yield$coreSetup$getS,_yield$coreSetup$getS2,_yield$coreSetup$getS3,i18n,docLinks;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return coreSetup.getStartServices();case 2:_yield$coreSetup$getS=_context.sent;_yield$coreSetup$getS2=mount_management_section_slicedToArray(_yield$coreSetup$getS,1);_yield$coreSetup$getS3=_yield$coreSetup$getS2[0];i18n=_yield$coreSetup$getS3.i18n;docLinks=_yield$coreSetup$getS3.docLinks;return _context.abrupt("return",renderApp({element:params.element,isCloudEnabled:isCloudEnabled,http:coreSetup.http,i18n:i18n,docLinks:docLinks}));case 8:case"end":return _context.stop()}}),_callee)})));return _mountManagementSection.apply(this,arguments)}}])]);