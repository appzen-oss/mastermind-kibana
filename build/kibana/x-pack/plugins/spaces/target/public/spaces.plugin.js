/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={0:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+"spaces.chunk."+chunkId+".js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["spaces_bundle_jsonpfunction"]=window["spaces_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=22)})([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_SPACE_ID}));__webpack_require__.d(__webpack_exports__,"a",(function(){return ALL_SPACES_ID}));__webpack_require__.d(__webpack_exports__,"f",(function(){return UNKNOWN_SPACE}));__webpack_require__.d(__webpack_exports__,"e",(function(){return SPACE_SEARCH_COUNT_THRESHOLD}));__webpack_require__.d(__webpack_exports__,"d",(function(){return MAX_SPACE_INITIALS}));__webpack_require__.d(__webpack_exports__,"c",(function(){return ENTER_SPACE_PATH}));const DEFAULT_SPACE_ID="default";const ALL_SPACES_ID="*";const UNKNOWN_SPACE="?";const SPACE_SEARCH_COUNT_THRESHOLD=8;const MAX_SPACE_INITIALS=2;const ENTER_SPACE_PATH="/spaces/enter"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SpaceAvatar}));__webpack_require__.d(__webpack_exports__,"b",(function(){return getSpaceColor}));__webpack_require__.d(__webpack_exports__,"d",(function(){return getSpaceInitials}));__webpack_require__.d(__webpack_exports__,"c",(function(){return getSpaceImageUrl}));var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var common=__webpack_require__(8);const FALLBACK_CODE_POINT=97;function getSpaceColor(space={}){const color=space.color,_space$name=space.name,name=_space$name===void 0?"":_space$name;if(color){return color}const firstCodePoint=name.codePointAt(0)||FALLBACK_CODE_POINT;return external_kbnSharedDeps_ElasticEui_["VISUALIZATION_COLORS"][firstCodePoint%external_kbnSharedDeps_ElasticEui_["VISUALIZATION_COLORS"].length]}function getSpaceInitials(space={}){const initials=space.initials,_space$name2=space.name,name=_space$name2===void 0?"":_space$name2;if(initials){return initials}const words=name.split(" ");const numInitials=Math.min(common["MAX_SPACE_INITIALS"],words.length);words.splice(numInitials,words.length);return words.map(word=>word.substring(0,1)).join("")}function getSpaceImageUrl(space={}){const imageUrl=space.imageUrl;if(imageUrl){return imageUrl}return""}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const SpaceAvatar=props=>{const space=props.space,size=props.size,announceSpaceName=props.announceSpaceName,rest=_objectWithoutProperties(props,["space","size","announceSpaceName"]);const spaceName=space.name?space.name.trim():"";const spaceColor=getSpaceColor(space);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAvatar"],_extends({type:"space","data-test-subj":"space-avatar-".concat(space.id),name:spaceName},!announceSpaceName&&{"aria-label":"","aria-hidden":true},{size:size||"m",initialsLength:common["MAX_SPACE_INITIALS"],initials:getSpaceInitials(space),color:Object(external_kbnSharedDeps_ElasticEui_["isValidHex"])(spaceColor)?spaceColor:"",imageUrl:getSpaceImageUrl(space)},rest))};SpaceAvatar.defaultProps={announceSpaceName:true}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"isReservedSpace",(function(){return is_reserved_space["a"]}));__webpack_require__.d(__webpack_exports__,"MAX_SPACE_INITIALS",(function(){return constants["d"]}));__webpack_require__.d(__webpack_exports__,"SPACE_SEARCH_COUNT_THRESHOLD",(function(){return constants["e"]}));__webpack_require__.d(__webpack_exports__,"ENTER_SPACE_PATH",(function(){return constants["c"]}));__webpack_require__.d(__webpack_exports__,"addSpaceIdToPath",(function(){return addSpaceIdToPath}));__webpack_require__.d(__webpack_exports__,"getSpaceIdFromPath",(function(){return getSpaceIdFromPath}));var is_reserved_space=__webpack_require__(14);var constants=__webpack_require__(6);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const spaceContextRegex=/^\/s\/([a-z0-9_\-]+)/;function getSpaceIdFromPath(requestBasePath,serverBasePath){if(requestBasePath==null)requestBasePath="/";if(serverBasePath==null)serverBasePath="/";const pathToCheck=stripServerBasePath(requestBasePath,serverBasePath);const matchResult=pathToCheck.match(spaceContextRegex);if(!matchResult||matchResult.length===0){return{spaceId:constants["b"],pathHasExplicitSpaceIdentifier:false}}const _matchResult=_slicedToArray(matchResult,2),spaceId=_matchResult[1];if(!spaceId){throw new Error("Unable to determine Space ID from request path: ".concat(requestBasePath))}return{spaceId:spaceId,pathHasExplicitSpaceIdentifier:true}}function addSpaceIdToPath(basePath="/",spaceId="",requestedPath=""){if(requestedPath&&!requestedPath.startsWith("/")){throw new Error("path must start with a /")}const normalizedBasePath=basePath.endsWith("/")?basePath.slice(0,-1):basePath;if(spaceId&&spaceId!==constants["b"]){return"".concat(normalizedBasePath,"/s/").concat(spaceId).concat(requestedPath)}return"".concat(normalizedBasePath).concat(requestedPath)||"/"}function stripServerBasePath(requestBasePath,serverBasePath){if(serverBasePath&&serverBasePath!=="/"&&requestBasePath.startsWith(serverBasePath)){return requestBasePath.substr(serverBasePath.length)}return requestBasePath}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/savedObjectsManagement/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isReservedSpace}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);var lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);function isReservedSpace(space){return Object(lodash__WEBPACK_IMPORTED_MODULE_0__["get"])(space,"_reserved",false)}},function(module,exports){},function(module,exports){},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/home/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Moment},function(module,exports,__webpack_require__){"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var validLen=b64.indexOf("=");if(validLen===-1)validLen=len;var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;var i;for(i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&255;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}if(placeHoldersLen===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=tmp&255}if(placeHoldersLen===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(uint8[i+2]&255);output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")}return parts.join("")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_spaces_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23);var _node_modules_val_loader_dist_cjs_js_key_spaces_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_spaces_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/spaces/public",__webpack_require__,132);__kbnBundles__.define("plugin/spaces/common",__webpack_require__,8)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["spaces"]},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(25);case"v7light":return __webpack_require__(27);case"v8dark":return __webpack_require__(29);case"v8light":return __webpack_require__(31)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(26);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcDescription {\n  max-width: 240px; }\n\n.spcDescription__text,\n.spcDescription__manageButtonWrapper {\n  padding: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(28);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcDescription {\n  max-width: 240px; }\n\n.spcDescription__text,\n.spcDescription__manageButtonWrapper {\n  padding: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(30);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcDescription {\n  max-width: 240px; }\n\n.spcDescription__text,\n.spcDescription__manageButtonWrapper {\n  padding: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(32);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcDescription {\n  max-width: 240px; }\n\n.spcDescription__text,\n.spcDescription__manageButtonWrapper {\n  padding: 12px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(34);case"v7light":return __webpack_require__(36);case"v8dark":return __webpack_require__(38);case"v8light":return __webpack_require__(40)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(35);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcMenu {\n  max-width: 240px; }\n\n.spcMenu__spacesList {\n  max-height: 320px;\n  overflow-y: auto; }\n\n.spcMenu__searchFieldWrapper {\n  padding: 12px; }\n\n.spcMenu__manageButton {\n  margin: 12px;\n  width: calc(100% - 24px); }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(37);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcMenu {\n  max-width: 240px; }\n\n.spcMenu__spacesList {\n  max-height: 320px;\n  overflow-y: auto; }\n\n.spcMenu__searchFieldWrapper {\n  padding: 12px; }\n\n.spcMenu__manageButton {\n  margin: 12px;\n  width: calc(100% - 24px); }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(39);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcMenu {\n  max-width: 240px; }\n\n.spcMenu__spacesList {\n  max-height: 320px;\n  overflow-y: auto; }\n\n.spcMenu__searchFieldWrapper {\n  padding: 12px; }\n\n.spcMenu__manageButton {\n  margin: 12px;\n  width: calc(100% - 24px); }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(41);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcMenu {\n  max-width: 240px; }\n\n.spcMenu__spacesList {\n  max-height: 320px;\n  overflow-y: auto; }\n\n.spcMenu__searchFieldWrapper {\n  padding: 12px; }\n\n.spcMenu__manageButton {\n  margin: 12px;\n  width: calc(100% - 24px); }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(43);case"v7light":return __webpack_require__(45);case"v8dark":return __webpack_require__(47);case"v8light":return __webpack_require__(49)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(44);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResult {\n  padding-bottom: 8px;\n  border-bottom: 1px solid #343741; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(46);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResult {\n  padding-bottom: 8px;\n  border-bottom: 1px solid #E6E6E6; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(48);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResult {\n  padding-bottom: 8px;\n  border-bottom: 1px solid #343741; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(50);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResult {\n  padding-bottom: 8px;\n  border-bottom: 1px solid #E6E6E6; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(52);case"v7light":return __webpack_require__(54);case"v8dark":return __webpack_require__(56);case"v8light":return __webpack_require__(58)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(53);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__summaryCountBadge {\n  margin-left: 4px; }\n\n.spcCopyToSpace__missingReferencesIcon {\n  margin-left: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(55);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__summaryCountBadge {\n  margin-left: 4px; }\n\n.spcCopyToSpace__missingReferencesIcon {\n  margin-left: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(57);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__summaryCountBadge {\n  margin-left: 4px; }\n\n.spcCopyToSpace__missingReferencesIcon {\n  margin-left: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(59);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__summaryCountBadge {\n  margin-left: 4px; }\n\n.spcCopyToSpace__missingReferencesIcon {\n  margin-left: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(61);case"v7light":return __webpack_require__(63);case"v8dark":return __webpack_require__(65);case"v8light":return __webpack_require__(67)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(62);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__resolveAllConflictsLink {\n  font-size: 14px;\n  margin-right: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(64);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__resolveAllConflictsLink {\n  font-size: 14px;\n  margin-right: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(66);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__resolveAllConflictsLink {\n  font-size: 14px;\n  margin-right: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(68);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__resolveAllConflictsLink {\n  font-size: 14px;\n  margin-right: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(70);case"v7light":return __webpack_require__(72);case"v8dark":return __webpack_require__(74);case"v8light":return __webpack_require__(76)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(71);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResultDetails {\n  margin-top: 8px;\n  padding-left: 24px; }\n\n.spcCopyToSpaceResultDetails__row {\n  margin-bottom: 4px; }\n\n.spcCopyToSpaceResultDetails__savedObjectName {\n  min-width: 0; }\n\n.spcCopyToSpaceResultDetails__selectControl {\n  margin-left: 24px; }\n\n.spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: hidden;\n  opacity: 0;\n  height: 0;\n  overflow: hidden;\n  transform: translatez(0);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1), opacity 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.spcCopyToSpaceResultDetails__selectControl.spcCopyToSpaceResultDetails__selectControl-isOpen .spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: visible;\n  opacity: 1;\n  height: auto; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(73);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResultDetails {\n  margin-top: 8px;\n  padding-left: 24px; }\n\n.spcCopyToSpaceResultDetails__row {\n  margin-bottom: 4px; }\n\n.spcCopyToSpaceResultDetails__savedObjectName {\n  min-width: 0; }\n\n.spcCopyToSpaceResultDetails__selectControl {\n  margin-left: 24px; }\n\n.spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: hidden;\n  opacity: 0;\n  height: 0;\n  overflow: hidden;\n  transform: translatez(0);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1), opacity 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.spcCopyToSpaceResultDetails__selectControl.spcCopyToSpaceResultDetails__selectControl-isOpen .spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: visible;\n  opacity: 1;\n  height: auto; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(75);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResultDetails {\n  margin-top: 8px;\n  padding-left: 24px; }\n\n.spcCopyToSpaceResultDetails__row {\n  margin-bottom: 4px; }\n\n.spcCopyToSpaceResultDetails__savedObjectName {\n  min-width: 0; }\n\n.spcCopyToSpaceResultDetails__selectControl {\n  margin-left: 24px; }\n\n.spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: hidden;\n  opacity: 0;\n  height: 0;\n  overflow: hidden;\n  transform: translatez(0);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1), opacity 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.spcCopyToSpaceResultDetails__selectControl.spcCopyToSpaceResultDetails__selectControl-isOpen .spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: visible;\n  opacity: 1;\n  height: auto; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(77);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpaceResultDetails {\n  margin-top: 8px;\n  padding-left: 24px; }\n\n.spcCopyToSpaceResultDetails__row {\n  margin-bottom: 4px; }\n\n.spcCopyToSpaceResultDetails__savedObjectName {\n  min-width: 0; }\n\n.spcCopyToSpaceResultDetails__selectControl {\n  margin-left: 24px; }\n\n.spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: hidden;\n  opacity: 0;\n  height: 0;\n  overflow: hidden;\n  transform: translatez(0);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1), opacity 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.spcCopyToSpaceResultDetails__selectControl.spcCopyToSpaceResultDetails__selectControl-isOpen .spcCopyToSpaceResultDetails__selectControl__childWrapper {\n  visibility: visible;\n  opacity: 1;\n  height: auto; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(79);case"v7light":return __webpack_require__(81);case"v8dark":return __webpack_require__(83);case"v8light":return __webpack_require__(85)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(80);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(82);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(84);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(86);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcCopyToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(88);case"v7light":return __webpack_require__(90);case"v8dark":return __webpack_require__(92);case"v8light":return __webpack_require__(94)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(89);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpaceIncludeRelated .euiIcon {\n  margin-right: 28px; }\n\n.spcShareToSpaceIncludeRelated__label {\n  font-size: 14px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(91);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpaceIncludeRelated .euiIcon {\n  margin-right: 28px; }\n\n.spcShareToSpaceIncludeRelated__label {\n  font-size: 14px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(93);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpaceIncludeRelated .euiIcon {\n  margin-right: 28px; }\n\n.spcShareToSpaceIncludeRelated__label {\n  font-size: 14px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(95);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpaceIncludeRelated .euiIcon {\n  margin-right: 28px; }\n\n.spcShareToSpaceIncludeRelated__label {\n  font-size: 14px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(97);case"v7light":return __webpack_require__(99);case"v8dark":return __webpack_require__(101);case"v8light":return __webpack_require__(103)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(98);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".euiCheckableCard__children {\n  width: 100%; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(100);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".euiCheckableCard__children {\n  width: 100%; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(102);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".euiCheckableCard__children {\n  width: 100%; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(104);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".euiCheckableCard__children {\n  width: 100%; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(106);case"v7light":return __webpack_require__(108);case"v8dark":return __webpack_require__(110);case"v8light":return __webpack_require__(112)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(107);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(109);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(111);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(113);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcShareToSpace__spacesList {\n  margin-top: 4px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(115);case"v7light":return __webpack_require__(117);case"v8dark":return __webpack_require__(119);case"v8light":return __webpack_require__(121)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(116);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcConfirmDeleteModal {\n  max-width: 448px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(118);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcConfirmDeleteModal {\n  max-width: 448px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(120);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcConfirmDeleteModal {\n  max-width: 448px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(122);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcConfirmDeleteModal {\n  max-width: 448px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(124);case"v7light":return __webpack_require__(126);case"v8dark":return __webpack_require__(128);case"v8light":return __webpack_require__(130)}},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(125);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcFeatureTableAccordionContent {\n  padding-left: 32px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(127);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcFeatureTableAccordionContent {\n  padding-left: 32px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(129);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcFeatureTableAccordionContent {\n  padding-left: 32px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(4);var content=__webpack_require__(131);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(5);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".spcFeatureTableAccordionContent {\n  padding-left: 32px; }\n",""]);module.exports=exports},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"Space",(function(){return model_space["Space"]}));__webpack_require__.d(__webpack_exports__,"GetSpaceResult",(function(){return types["GetSpaceResult"]}));__webpack_require__.d(__webpack_exports__,"SpaceAvatar",(function(){return space_avatar["a"]}));__webpack_require__.d(__webpack_exports__,"getSpaceColor",(function(){return space_avatar["b"]}));__webpack_require__.d(__webpack_exports__,"getSpaceImageUrl",(function(){return space_avatar["c"]}));__webpack_require__.d(__webpack_exports__,"getSpaceInitials",(function(){return space_avatar["d"]}));__webpack_require__.d(__webpack_exports__,"SpacesPluginSetup",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SpacesPluginStart",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SpacesManager",(function(){return spaces_manager_SpacesManager}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_Rxjs_=__webpack_require__(17);var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(18);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class spaces_manager_SpacesManager{constructor(http){this.http=http;_defineProperty(this,"activeSpace$",new external_kbnSharedDeps_Rxjs_["BehaviorSubject"](null));_defineProperty(this,"serverBasePath",void 0);_defineProperty(this,"onActiveSpaceChange$",void 0);this.serverBasePath=http.basePath.serverBasePath;this.onActiveSpaceChange$=this.activeSpace$.asObservable().pipe(Object(external_kbnSharedDeps_RxjsOperators_["skipWhile"])(v=>v==null));this.refreshActiveSpace()}getSpaces(options={}){var _this=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var purpose,includeAuthorizedPurposes,query;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:purpose=options.purpose,includeAuthorizedPurposes=options.includeAuthorizedPurposes;query={purpose:purpose,include_authorized_purposes:includeAuthorizedPurposes};_context.next=4;return _this.http.get("/api/spaces/space",{query:query});case 4:return _context.abrupt("return",_context.sent);case 5:case"end":return _context.stop()}}),_callee)})))()}getSpace(id){var _this2=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this2.http.get("/api/spaces/space/".concat(encodeURIComponent(id)));case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})))()}getActiveSpace({forceRefresh:forceRefresh=false}={}){if(this.isAnonymousPath()){throw new Error("Cannot retrieve the active space for anonymous paths")}if(!forceRefresh&&this.activeSpace$.value){return Promise.resolve(this.activeSpace$.value)}return this.http.get("/internal/spaces/_active_space")}createSpace(space){var _this3=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this3.http.post("/api/spaces/space",{body:JSON.stringify(space)});case 2:case"end":return _context3.stop()}}),_callee3)})))()}updateSpace(space){var _this4=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var activeSpaceId;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this4.http.put("/api/spaces/space/".concat(encodeURIComponent(space.id)),{query:{overwrite:true},body:JSON.stringify(space)});case 2:_context4.next=4;return _this4.getActiveSpace();case 4:activeSpaceId=_context4.sent.id;if(space.id===activeSpaceId){_this4.refreshActiveSpace()}case 6:case"end":return _context4.stop()}}),_callee4)})))()}deleteSpace(space){var _this5=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee5(){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this5.http.delete("/api/spaces/space/".concat(encodeURIComponent(space.id)));case 2:case"end":return _context5.stop()}}),_callee5)})))()}copySavedObjects(objects,spaces,includeReferences,createNewCopies,overwrite){var _this6=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee6(){return regeneratorRuntime.wrap((function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _context6.abrupt("return",_this6.http.post("/api/spaces/_copy_saved_objects",{body:JSON.stringify(_objectSpread({objects:objects,spaces:spaces,includeReferences:includeReferences},createNewCopies?{createNewCopies:createNewCopies}:{overwrite:overwrite}))}));case 1:case"end":return _context6.stop()}}),_callee6)})))()}resolveCopySavedObjectsErrors(objects,retries,includeReferences,createNewCopies){var _this7=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee7(){return regeneratorRuntime.wrap((function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _context7.abrupt("return",_this7.http.post("/api/spaces/_resolve_copy_saved_objects_errors",{body:JSON.stringify({objects:objects,includeReferences:includeReferences,createNewCopies:createNewCopies,retries:retries})}));case 1:case"end":return _context7.stop()}}),_callee7)})))()}getShareSavedObjectPermissions(type){var _this8=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee8(){return regeneratorRuntime.wrap((function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:return _context8.abrupt("return",_this8.http.get("/internal/security/_share_saved_object_permissions",{query:{type:type}}).catch(err=>{var _err$body;const isNotFound=(err===null||err===void 0?void 0:(_err$body=err.body)===null||_err$body===void 0?void 0:_err$body.statusCode)===404;if(isNotFound){return{shareToAllSpaces:true}}throw err}));case 1:case"end":return _context8.stop()}}),_callee8)})))()}shareSavedObjectAdd(object,spaces){var _this9=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee9(){return regeneratorRuntime.wrap((function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:return _context9.abrupt("return",_this9.http.post("/api/spaces/_share_saved_object_add",{body:JSON.stringify({object:object,spaces:spaces})}));case 1:case"end":return _context9.stop()}}),_callee9)})))()}shareSavedObjectRemove(object,spaces){var _this10=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee10(){return regeneratorRuntime.wrap((function _callee10$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:return _context10.abrupt("return",_this10.http.post("/api/spaces/_share_saved_object_remove",{body:JSON.stringify({object:object,spaces:spaces})}));case 1:case"end":return _context10.stop()}}),_callee10)})))()}redirectToSpaceSelector(){window.location.href="".concat(this.serverBasePath,"/spaces/space_selector")}refreshActiveSpace(){var _this11=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee11(){var activeSpace;return regeneratorRuntime.wrap((function _callee11$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:if(!_this11.isAnonymousPath()){_context11.next=2;break}return _context11.abrupt("return");case 2:_context11.next=4;return _this11.getActiveSpace({forceRefresh:true});case 4:activeSpace=_context11.sent;_this11.activeSpace$.next(activeSpace);case 6:case"end":return _context11.stop()}}),_callee11)})))()}isAnonymousPath(){return this.http.anonymousPaths.isAnonymous(window.location.pathname)}}var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(12);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var space_avatar=__webpack_require__(7);var spaces_description=__webpack_require__(24);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(3);function manage_spaces_button_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class manage_spaces_button_ManageSpacesButton extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);manage_spaces_button_defineProperty(this,"navigateToManageSpaces",()=>{if(this.props.onClick){this.props.onClick()}this.props.navigateToApp("management",{path:"kibana/spaces"})})}render(){if(!this.props.capabilities.spaces.manage){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:this.props.size||"s",className:this.props.className,isDisabled:this.props.isDisabled,onClick:this.navigateToManageSpaces,style:this.props.style,"data-test-subj":"manageSpaces"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.manageSpacesButton.manageSpacesButtonLabel",defaultMessage:"Manage spaces"}))}}var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);let spacesFeatureDescription;const getSpacesFeatureDescription=()=>{if(!spacesFeatureDescription){spacesFeatureDescription=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.featureDescription",{defaultMessage:"Organize your dashboards and other saved objects into meaningful categories."})}return spacesFeatureDescription};const SpacesDescription=props=>{const panelProps={id:props.id,className:"spcDescription",title:"Spaces"};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],panelProps,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{className:"spcDescription__text"},external_kbnSharedDeps_React_default.a.createElement("p",null,getSpacesFeatureDescription())),external_kbnSharedDeps_React_default.a.createElement("div",{key:"manageSpacesButton",className:"spcDescription__manageButtonWrapper"},external_kbnSharedDeps_React_default.a.createElement(manage_spaces_button_ManageSpacesButton,{size:"s",style:{width:"100%"},onClick:props.onManageSpacesClick,capabilities:props.capabilities,navigateToApp:props.navigateToApp})))};var spaces_menu=__webpack_require__(33);var common=__webpack_require__(8);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function spaces_menu_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class spaces_menu_SpacesMenuUI extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);spaces_menu_defineProperty(this,"state",{searchTerm:"",allowSpacesListFocus:false});spaces_menu_defineProperty(this,"getVisibleSpaces",searchTerm=>{const spaces=this.props.spaces;let filteredSpaces=spaces;if(searchTerm){filteredSpaces=spaces.filter(space=>{const name=space.name,_space$description=space.description,description=_space$description===void 0?"":_space$description;return name.toLowerCase().indexOf(searchTerm)>=0||description.toLowerCase().indexOf(searchTerm)>=0})}return filteredSpaces});spaces_menu_defineProperty(this,"renderSpacesListPanel",(items,searchTerm)=>{if(items.length===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",className:"eui-textCenter"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.navControl.spacesMenu.noSpacesFoundTitle",defaultMessage:" no spaces found "}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{key:"spcMenuList","data-search-term":searchTerm,className:"spcMenu__spacesList",hasFocus:this.state.allowSpacesListFocus,initialFocusedItemIndex:this.state.allowSpacesListFocus?0:undefined,items:items})});spaces_menu_defineProperty(this,"renderSearchField",()=>{const intl=this.props.intl;return external_kbnSharedDeps_React_default.a.createElement("div",{key:"manageSpacesSearchField",className:"spcMenu__searchFieldWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{placeholder:intl.formatMessage({id:"xpack.spaces.navControl.spacesMenu.findSpacePlaceholder",defaultMessage:"Find a space"}),incremental:true,onSearch:this.onSearch,onKeyDown:this.onSearchKeyDown,onFocus:this.onSearchFocus,compressed:true}))});spaces_menu_defineProperty(this,"onSearchKeyDown",e=>{const focusableKeyCodes=[9,13,40];const keyCode=e.keyCode;if(focusableKeyCodes.includes(keyCode)){this.setState({allowSpacesListFocus:true})}});spaces_menu_defineProperty(this,"onSearchFocus",()=>{this.setState({allowSpacesListFocus:false})});spaces_menu_defineProperty(this,"renderManageButton",()=>external_kbnSharedDeps_React_default.a.createElement(manage_spaces_button_ManageSpacesButton,{key:"manageSpacesButton",className:"spcMenu__manageButton",size:"s",onClick:this.props.onManageSpacesClick,capabilities:this.props.capabilities,navigateToApp:this.props.navigateToApp}));spaces_menu_defineProperty(this,"onSearch",searchTerm=>{this.setState({searchTerm:searchTerm.trim().toLowerCase()})});spaces_menu_defineProperty(this,"renderSpaceMenuItem",space=>{const icon=external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:space,size:"s"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:space.id,"data-test-subj":"".concat(space.id,"-gotoSpace"),icon:icon,href:Object(common["addSpaceIdToPath"])(this.props.serverBasePath,space.id,common["ENTER_SPACE_PATH"]),toolTipTitle:space.description&&space.name,toolTipContent:space.description},space.name)});spaces_menu_defineProperty(this,"renderPlaceholderMenuItem",key=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:key,disabled:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingContent"],{lines:1})))}render(){const _this$props=this.props,intl=_this$props.intl,isLoading=_this$props.isLoading;const searchTerm=this.state.searchTerm;const items=isLoading?[1,2,3].map(this.renderPlaceholderMenuItem):this.getVisibleSpaces(searchTerm).map(this.renderSpaceMenuItem);const panelProps={id:this.props.id,className:"spcMenu",title:intl.formatMessage({id:"xpack.spaces.navControl.spacesMenu.changeCurrentSpaceTitle",defaultMessage:"Change current space"}),watchedItemProps:["data-search-term"]};if(this.props.spaces.length>=common["SPACE_SEARCH_COUNT_THRESHOLD"]){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],panelProps,this.renderSearchField(),this.renderSpacesListPanel(items,searchTerm),this.renderManageButton())}items.push(this.renderManageButton());return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],_extends({},panelProps,{items:items}))}}const SpacesMenu=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(spaces_menu_SpacesMenuUI);function nav_control_popover_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function nav_control_popover_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){nav_control_popover_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){nav_control_popover_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function nav_control_popover_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const popoutContentId="headerSpacesMenuContent";class nav_control_popover_NavControlPopover extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);nav_control_popover_defineProperty(this,"activeSpace$",void 0);nav_control_popover_defineProperty(this,"getActiveSpaceButton",()=>{const activeSpace=this.state.activeSpace;if(!activeSpace){return this.getButton(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"m"}),"loading")}return this.getButton(external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:activeSpace,size:"s"}),activeSpace.name)});nav_control_popover_defineProperty(this,"getButton",(linkIcon,linkTitle)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHeaderSectionItemButton"],{"aria-controls":popoutContentId,"aria-expanded":this.state.showSpaceSelector,"aria-haspopup":"true","aria-label":linkTitle,title:linkTitle,onClick:this.toggleSpaceSelector},linkIcon));nav_control_popover_defineProperty(this,"toggleSpaceSelector",()=>{const isOpening=!this.state.showSpaceSelector;if(isOpening){this.loadSpaces()}this.setState({showSpaceSelector:!this.state.showSpaceSelector})});nav_control_popover_defineProperty(this,"closeSpaceSelector",()=>{this.setState({showSpaceSelector:false})});this.state={showSpaceSelector:false,loading:false,activeSpace:null,spaces:[]}}componentDidMount(){this.activeSpace$=this.props.spacesManager.onActiveSpaceChange$.subscribe({next:activeSpace=>{this.setState({activeSpace:activeSpace})}})}componentWillUnmount(){if(this.activeSpace$){this.activeSpace$.unsubscribe()}}render(){const button=this.getActiveSpaceButton();if(!button){return null}let element;if(!this.state.loading&&this.state.spaces.length<2){element=external_kbnSharedDeps_React_default.a.createElement(SpacesDescription,{id:popoutContentId,onManageSpacesClick:this.toggleSpaceSelector,capabilities:this.props.capabilities,navigateToApp:this.props.navigateToApp})}else{element=external_kbnSharedDeps_React_default.a.createElement(SpacesMenu,{id:popoutContentId,spaces:this.state.spaces,isLoading:this.state.loading,serverBasePath:this.props.serverBasePath,onManageSpacesClick:this.toggleSpaceSelector,capabilities:this.props.capabilities,navigateToApp:this.props.navigateToApp})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"spcMenuPopover","data-test-subj":"spacesNavSelector",button:button,isOpen:this.state.showSpaceSelector,closePopover:this.closeSpaceSelector,anchorPosition:this.props.anchorPosition,panelPaddingSize:"none",repositionOnScroll:true,ownFocus:true},element)}loadSpaces(){var _this=this;return nav_control_popover_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var spacesManager,spaces;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:spacesManager=_this.props.spacesManager;if(!_this.state.loading){_context.next=3;break}return _context.abrupt("return");case 3:_this.setState({loading:true});_context.next=6;return spacesManager.getSpaces();case 6:spaces=_context.sent;_this.setState({spaces:spaces,loading:false});case 8:case"end":return _context.stop()}}),_callee)})))()}}function initSpacesNavControl(spacesManager,core){const I18nContext=core.i18n.Context;core.chrome.navControls.registerLeft({order:1e3,mount(targetDomElement){if(core.http.anonymousPaths.isAnonymous(window.location.pathname)){return()=>null}external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(nav_control_popover_NavControlPopover,{spacesManager:spacesManager,serverBasePath:core.http.basePath.serverBasePath,anchorPosition:"downLeft",capabilities:core.application.capabilities,navigateToApp:core.application.navigateToApp})),targetDomElement);return()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(targetDomElement)}}})}var public_=__webpack_require__(19);const createSpacesFeatureCatalogueEntry=()=>({id:"spaces",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.spacesTitle",{defaultMessage:"Spaces"}),description:getSpacesFeatureDescription(),icon:"spacesApp",path:"/app/management/kibana/spaces",showOnHomePage:false,category:public_["FeatureCatalogueCategory"].ADMIN});function summarize_copy_result_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function summarize_copy_result_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){summarize_copy_result_ownKeys(Object(source),true).forEach((function(key){summarize_copy_result_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{summarize_copy_result_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function summarize_copy_result_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const isAnyConflict=failure=>failure.error.type==="conflict"||failure.error.type==="ambiguous_conflict";const isMissingReferences=failure=>failure.error.type==="missing_references";const isUnresolvableError=failure=>!isAnyConflict(failure)&&!isMissingReferences(failure);const typeComparator=(a,b)=>a.type>b.type?1:a.type<b.type?-1:0;function summarizeCopyResult(savedObject,copyResult){var _copyResult$failedImp,_copyResult$failedImp2,_copyResult$failedImp3,_copyResult$failedImp4,_copyResult$successfu;const conflicts=(_copyResult$failedImp=copyResult===null||copyResult===void 0?void 0:copyResult.failedImports.filter(isAnyConflict))!==null&&_copyResult$failedImp!==void 0?_copyResult$failedImp:[];const missingReferences=(_copyResult$failedImp2=copyResult===null||copyResult===void 0?void 0:copyResult.failedImports.filter(isMissingReferences))!==null&&_copyResult$failedImp2!==void 0?_copyResult$failedImp2:[];const unresolvableErrors=(_copyResult$failedImp3=copyResult===null||copyResult===void 0?void 0:copyResult.failedImports.filter(failed=>isUnresolvableError(failed)))!==null&&_copyResult$failedImp3!==void 0?_copyResult$failedImp3:[];const getExtraFields=({type:type,id:id})=>{const conflict=conflicts.find(({obj:obj})=>obj.type===type&&obj.id===id);const missingReference=missingReferences.find(({obj:obj})=>obj.type===type&&obj.id===id);const hasMissingReferences=missingReference!==undefined;const hasUnresolvableErrors=unresolvableErrors.some(({obj:obj})=>obj.type===type&&obj.id===id);const overwrite=conflict?false:missingReference?missingReference.obj.overwrite===true:(copyResult===null||copyResult===void 0?void 0:copyResult.successfulImports.some(obj=>obj.type===type&&obj.id===id&&obj.overwrite))===true;return{conflict:conflict,hasMissingReferences:hasMissingReferences,hasUnresolvableErrors:hasUnresolvableErrors,overwrite:overwrite}};const objectMap=new Map;objectMap.set("".concat(savedObject.type,":").concat(savedObject.id),summarize_copy_result_objectSpread({type:savedObject.type,id:savedObject.id,name:savedObject.meta.title,icon:savedObject.meta.icon},getExtraFields(savedObject)));const addObjectsToMap=objects=>{objects.forEach(obj=>{const type=obj.type,id=obj.id,meta=obj.meta;objectMap.set("".concat(type,":").concat(id),summarize_copy_result_objectSpread({type:type,id:id,name:meta.title||"".concat(type," [id=").concat(id,"]"),icon:meta.icon||"apps"},getExtraFields(obj)))})};const failedImports=((_copyResult$failedImp4=copyResult===null||copyResult===void 0?void 0:copyResult.failedImports)!==null&&_copyResult$failedImp4!==void 0?_copyResult$failedImp4:[]).map(({obj:obj})=>obj).sort(typeComparator);addObjectsToMap(failedImports);const successfulImports=((_copyResult$successfu=copyResult===null||copyResult===void 0?void 0:copyResult.successfulImports)!==null&&_copyResult$successfu!==void 0?_copyResult$successfu:[]).sort(typeComparator);addObjectsToMap(successfulImports);if(typeof copyResult==="undefined"){return{processing:true,objects:Array.from(objectMap.values())}}const successful=Boolean(copyResult&&copyResult.failedImports.length===0);if(successful){return{successful:successful,hasConflicts:false,objects:Array.from(objectMap.values()),hasMissingReferences:false,hasUnresolvableErrors:false,processing:false}}const hasConflicts=conflicts.length>0;const hasMissingReferences=missingReferences.length>0;const hasUnresolvableErrors=unresolvableErrors.length>0;return{successful:successful,hasConflicts:hasConflicts,objects:Array.from(objectMap.values()),hasMissingReferences:hasMissingReferences,hasUnresolvableErrors:hasUnresolvableErrors,processing:false}}var savedObjectsManagement_public_=__webpack_require__(13);var external_kbnSharedDeps_Lodash_=__webpack_require__(10);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var space_result=__webpack_require__(42);var copy_status_summary_indicator=__webpack_require__(51);var resolve_all_conflicts=__webpack_require__(60);function resolve_all_conflicts_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function resolve_all_conflicts_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){resolve_all_conflicts_ownKeys(Object(source),true).forEach((function(key){resolve_all_conflicts_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{resolve_all_conflicts_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function resolve_all_conflicts_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const resolve_all_conflicts_options=[{id:"overwrite",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.overwriteAllConflictsText",{defaultMessage:"Overwrite all"})},{id:"skip",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.skipAllConflictsText",{defaultMessage:"Skip all"})}];class resolve_all_conflicts_ResolveAllConflicts extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);resolve_all_conflicts_defineProperty(this,"state",{isPopoverOpen:false});resolve_all_conflicts_defineProperty(this,"onSelect",selection=>{const _this$props=this.props,summarizedCopyResult=_this$props.summarizedCopyResult,retries=_this$props.retries,onRetriesChange=_this$props.onRetriesChange,onDestinationMapChange=_this$props.onDestinationMapChange;const overwrite=selection==="overwrite";if(overwrite){const existingOverwrites=retries.filter(retry=>retry.overwrite===true);const newOverwrites=summarizedCopyResult.objects.reduce((acc,{type:type,id:id,conflict:conflict})=>{if(conflict&&!existingOverwrites.some(retry=>retry.type===type&&retry.id===id)){const error=conflict.error;const destinationId=error.type==="conflict"?error.destinationId:error.destinations[0].id;return[...acc,resolve_all_conflicts_objectSpread({type:type,id:id,overwrite:overwrite},destinationId&&{destinationId:destinationId})]}return acc},new Array);onRetriesChange([...retries,...newOverwrites])}else{const objectsToSkip=summarizedCopyResult.objects.reduce((acc,{type:type,id:id,conflict:conflict})=>conflict?acc.add("".concat(type,":").concat(id)):acc,new Set);const filtered=retries.filter(({type:type,id:id})=>!objectsToSkip.has("".concat(type,":").concat(id)));onRetriesChange(filtered);onDestinationMapChange(undefined)}this.setState({isPopoverOpen:false})});resolve_all_conflicts_defineProperty(this,"onButtonClick",()=>{this.setState({isPopoverOpen:!this.state.isPopoverOpen})});resolve_all_conflicts_defineProperty(this,"closePopover",()=>{this.setState({isPopoverOpen:false})})}render(){const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:this.onButtonClick,className:"spcCopyToSpace__resolveAllConflictsLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.resolveAllConflictsLink",defaultMessage:"(resolve all)"}));const items=resolve_all_conflicts_options.map(item=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],{"data-test-subj":"cts-resolve-all-conflicts-".concat(item.id),key:item.id,onClick:()=>{this.onSelect(item.id)}},item.text));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"resolveAllConflictsVisibilityPopover",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{items:items}))}}const renderIcon=props=>{const space=props.space,summarizedCopyResult=props.summarizedCopyResult,conflictResolutionInProgress=props.conflictResolutionInProgress,retries=props.retries,onRetriesChange=props.onRetriesChange,onDestinationMapChange=props.onDestinationMapChange;const getDataTestSubj=status=>"cts-summary-indicator-".concat(status,"-").concat(space.id);if(summarizedCopyResult.processing||conflictResolutionInProgress){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{"data-test-subj":getDataTestSubj("loading")})}const successful=summarizedCopyResult.successful,hasUnresolvableErrors=summarizedCopyResult.hasUnresolvableErrors,hasMissingReferences=summarizedCopyResult.hasMissingReferences,hasConflicts=summarizedCopyResult.hasConflicts;if(successful){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"checkInCircleFilled",color:"success",iconProps:{"data-test-subj":getDataTestSubj("success")},content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatusSummary.successMessage",defaultMessage:"Copy to the {space} space was successful.",values:{space:space.name}})})}if(hasUnresolvableErrors){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"danger",iconProps:{"data-test-subj":getDataTestSubj("failed")},content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatusSummary.failedMessage",defaultMessage:"Copy to the {space} space failed. Expand this section for details.",values:{space:space.name}})})}const missingReferences=hasMissingReferences?external_kbnSharedDeps_React_default.a.createElement("span",{className:"spcCopyToSpace__missingReferencesIcon"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"link",color:"warning",iconProps:{"data-test-subj":getDataTestSubj("missingReferences")},content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatusSummary.missingReferencesMessage",defaultMessage:"Missing references detected in the {space} space. Expand this section for details.",values:{space:space.name}})})):null;if(hasConflicts){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(resolve_all_conflicts_ResolveAllConflicts,{summarizedCopyResult:summarizedCopyResult,retries:retries,onRetriesChange:onRetriesChange,onDestinationMapChange:onDestinationMapChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"warning",iconProps:{"data-test-subj":getDataTestSubj("conflicts")},content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatusSummary.conflictsMessage",defaultMessage:"Conflicts detected in the {space} space. Expand this section to resolve.",values:{space:space.name}})}),missingReferences)}return missingReferences};const CopyStatusSummaryIndicator=props=>{const summarizedCopyResult=props.summarizedCopyResult;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,renderIcon(props),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"#DDD",className:"spcCopyToSpace__summaryCountBadge"},summarizedCopyResult.objects.length))};var space_result_details=__webpack_require__(69);var external_kbnSharedDeps_Moment_=__webpack_require__(20);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);const CopyStatusIndicator=props=>{const summarizedCopyResult=props.summarizedCopyResult,conflictResolutionInProgress=props.conflictResolutionInProgress,pendingObjectRetry=props.pendingObjectRetry;if(summarizedCopyResult.processing||conflictResolutionInProgress){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)}const objectResult=summarizedCopyResult.objects.find(o=>o.type===props.object.type&&o.id===props.object.id);const conflict=objectResult.conflict,hasMissingReferences=objectResult.hasMissingReferences,hasUnresolvableErrors=objectResult.hasUnresolvableErrors,overwrite=objectResult.overwrite;const hasConflicts=conflict&&!(pendingObjectRetry===null||pendingObjectRetry===void 0?void 0:pendingObjectRetry.overwrite);const successful=!hasMissingReferences&&!hasUnresolvableErrors&&!hasConflicts;if(successful&&!pendingObjectRetry){const message=overwrite?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.successAutomaticOverwriteMessage",defaultMessage:"Object was overwritten."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.successMessage",defaultMessage:"Object was copied."});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"checkInCircleFilled",color:"success",content:message})}if(successful&&pendingObjectRetry){const message=overwrite?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.pendingAutomaticOverwriteMessage",defaultMessage:"Object will be overwritten."}):(pendingObjectRetry===null||pendingObjectRetry===void 0?void 0:pendingObjectRetry.overwrite)?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.pendingOverwriteMessage",defaultMessage:"Object will be overwritten. Disable 'Overwrite' to skip."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.pendingMessage",defaultMessage:"Object will be copied."});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"check",color:"warning",content:message})}if(hasUnresolvableErrors){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"danger","data-test-subj":"cts-object-result-error-".concat(objectResult.id),content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.unresolvableErrorMessage",defaultMessage:"An error occurred copying this object."})})}if(hasConflicts){switch(conflict.error.type){case"conflict":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"warning",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.conflictMessage",defaultMessage:"This conflicts with an existing object. Enable ‘Overwrite’ to replace it."}))});case"ambiguous_conflict":return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"warning",content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.ambiguousConflictMessage",defaultMessage:"This conflicts with multiple existing objects. Enable ‘Overwrite’ to replace one."}))})}}return hasMissingReferences?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{type:"link",color:"warning","data-test-subj":"cts-object-result-missing-references-".concat(objectResult.id),content:overwrite?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.missingReferencesAutomaticOverwriteMessage",defaultMessage:"Object will be overwritten, but one or more references are missing."}):conflict?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.missingReferencesOverwriteMessage",defaultMessage:"Object will be overwritten, but one or more references are missing. Disable 'Overwrite' to skip."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyStatus.missingReferencesMessage",defaultMessage:"Object will be copied, but one or more references are missing."})}):null};function space_result_details_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function space_result_details_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){space_result_details_ownKeys(Object(source),true).forEach((function(key){space_result_details_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{space_result_details_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function space_result_details_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getSavedObjectLabel(type){switch(type){case"index-pattern":case"index-patterns":case"indexPatterns":return"index patterns";default:return type}}const isAmbiguousConflictError=error=>error.type==="ambiguous_conflict";const SpaceCopyResultDetails=props=>{const destinationMap=props.destinationMap,onDestinationMapChange=props.onDestinationMapChange,summarizedCopyResult=props.summarizedCopyResult;const objects=summarizedCopyResult.objects;return external_kbnSharedDeps_React_default.a.createElement("div",{className:"spcCopyToSpaceResultDetails"},objects.map((object,index)=>{const type=object.type,id=object.id,name=object.name,icon=object.icon,conflict=object.conflict;const pendingObjectRetry=props.retries.find(r=>r.type===type&&r.id===id);const isOverwritePending=Boolean(pendingObjectRetry===null||pendingObjectRetry===void 0?void 0:pendingObjectRetry.overwrite);const switchProps={show:conflict&&!props.conflictResolutionInProgress,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyDetail.overwriteSwitch",{defaultMessage:"Overwrite?"}),onChange:({target:{checked:checked}})=>{const filtered=props.retries.filter(r=>r.type!==type||r.id!==id);const _ref=conflict,error=_ref.error;if(!checked){props.onRetriesChange(filtered);if(isAmbiguousConflictError(error)){const value=error.destinations[0].id;onDestinationMapChange(new Map(destinationMap.set("".concat(type,":").concat(id),value)))}}else{const destinationId=isAmbiguousConflictError(error)?destinationMap.get("".concat(type,":").concat(id)):error.destinationId;const retry=space_result_details_objectSpread({type:type,id:id,overwrite:true},destinationId&&{destinationId:destinationId});props.onRetriesChange([...filtered,retry])}}};const selectProps={options:(conflict===null||conflict===void 0?void 0:conflict.error)&&isAmbiguousConflictError(conflict.error)?conflict.error.destinations.map(destination=>{var _destination$title;const header=(_destination$title=destination.title)!==null&&_destination$title!==void 0?_destination$title:"".concat(type," [id=").concat(destination.id,"]");const lastUpdated=destination.updatedAt?external_kbnSharedDeps_Moment_default()(destination.updatedAt).fromNow():"never";return{value:destination.id,inputDisplay:destination.id,dropdownDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("strong",null,header),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},"ID: ",destination.id,external_kbnSharedDeps_React_default.a.createElement("br",null),"Last updated: ",lastUpdated)))}}):[],onChange:value=>{onDestinationMapChange(new Map(destinationMap.set("".concat(type,":").concat(id),value)));const filtered=props.retries.filter(r=>r.type!==type||r.id!==id);const retry={type:type,id:id,overwrite:true,destinationId:value};props.onRetriesChange([...filtered,retry])}};const selectContainerClass=selectProps.options.length>0&&isOverwritePending?" spcCopyToSpaceResultDetails__selectControl-isOpen":"";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,key:index,alignItems:"center",gutterSize:"s",className:"spcCopyToSpaceResultDetails__row"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:getSavedObjectLabel(type)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{"aria-label":getSavedObjectLabel(type),type:icon,size:"s"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:5,className:"spcCopyToSpaceResultDetails__savedObjectName"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",{className:"eui-textTruncate",title:name},name))),switchProps.show&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:switchProps.label,compressed:true,checked:isOverwritePending,onChange:switchProps.onChange,"data-test-subj":"cts-overwrite-conflict-".concat(type,":").concat(id)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"spcCopyToSpaceResultDetails__statusIndicator",grow:false},external_kbnSharedDeps_React_default.a.createElement("div",{className:"eui-textRight"},external_kbnSharedDeps_React_default.a.createElement(CopyStatusIndicator,{summarizedCopyResult:props.summarizedCopyResult,object:object,pendingObjectRetry:pendingObjectRetry,conflictResolutionInProgress:props.conflictResolutionInProgress&&isOverwritePending})))),external_kbnSharedDeps_React_default.a.createElement("div",{className:"spcCopyToSpaceResultDetails__selectControl"+selectContainerClass},external_kbnSharedDeps_React_default.a.createElement("div",{className:"spcCopyToSpaceResultDetails__selectControl__childWrapper"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{options:selectProps.options,valueOfSelected:destinationMap.get("".concat(type,":").concat(id)),onChange:selectProps.onChange,prepend:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyDetail.selectControlLabel",{defaultMessage:"Object ID"}),hasDividers:true,fullWidth:true,compressed:true}))))}))};function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const getInitialDestinationMap=objects=>objects.reduce((acc,{type:type,id:id,conflict:conflict})=>{if((conflict===null||conflict===void 0?void 0:conflict.error.type)==="ambiguous_conflict"){acc.set("".concat(type,":").concat(id),conflict.error.destinations[0].id)}return acc},new Map);const SpaceResultProcessing=props=>{const space=props.space;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"copyToSpace-".concat(space.id),"data-test-subj":"cts-space-result-".concat(space.id),className:"spcCopyToSpaceResult",buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:space,size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,space.name))),extraAction:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null))};const SpaceResult=props=>{const space=props.space,summarizedCopyResult=props.summarizedCopyResult,retries=props.retries,onRetriesChange=props.onRetriesChange,savedObject=props.savedObject,conflictResolutionInProgress=props.conflictResolutionInProgress;const objects=summarizedCopyResult.objects;const spaceHasPendingOverwrites=retries.some(r=>r.overwrite);const _useState=Object(external_kbnSharedDeps_React_["useState"])(getInitialDestinationMap(objects)),_useState2=_slicedToArray(_useState,2),destinationMap=_useState2[0],setDestinationMap=_useState2[1];const onDestinationMapChange=value=>{setDestinationMap(value||getInitialDestinationMap(objects))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"copyToSpace-".concat(space.id),"data-test-subj":"cts-space-result-".concat(space.id),className:"spcCopyToSpaceResult",buttonContent:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:space,size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,space.name))),extraAction:external_kbnSharedDeps_React_default.a.createElement(CopyStatusSummaryIndicator,{space:space,retries:retries,onRetriesChange:onRetriesChange,onDestinationMapChange:onDestinationMapChange,summarizedCopyResult:summarizedCopyResult,conflictResolutionInProgress:conflictResolutionInProgress&&spaceHasPendingOverwrites})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(SpaceCopyResultDetails,{savedObject:savedObject,summarizedCopyResult:summarizedCopyResult,space:space,retries:retries,onRetriesChange:onRetriesChange,destinationMap:destinationMap,onDestinationMapChange:onDestinationMapChange,conflictResolutionInProgress:conflictResolutionInProgress&&spaceHasPendingOverwrites}))};function processing_copy_to_space_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function processing_copy_to_space_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){processing_copy_to_space_ownKeys(Object(source),true).forEach((function(key){processing_copy_to_space_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{processing_copy_to_space_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function processing_copy_to_space_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const renderCopyOptions=({createNewCopies:createNewCopies,overwrite:overwrite,includeRelated:includeRelated})=>{const createNewCopiesLabel=createNewCopies?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.createNewCopiesLabel",defaultMessage:"Create new objects with random IDs"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.dontCreateNewCopiesLabel",defaultMessage:"Check for existing objects"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroup"],{className:"spcCopyToSpaceOptionsView",flush:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroupItem"],{iconType:"copy",label:createNewCopiesLabel}),!createNewCopies&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroupItem"],{iconType:overwrite?"check":"cross",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.overwriteLabel",defaultMessage:"Automatically overwrite conflicts"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroupItem"],{iconType:includeRelated?"check":"cross",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.includeRelatedLabel",defaultMessage:"Include related saved objects"})}))};const ProcessingCopyToSpace=props=>{function updateRetries(spaceId,updatedRetries){props.onRetriesChange(processing_copy_to_space_objectSpread(processing_copy_to_space_objectSpread({},props.retries),{},{[spaceId]:updatedRetries}))}return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"copy-to-space-processing"},renderCopyOptions(props.copyOptions),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyResultsLabel",defaultMessage:"Results"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),props.copyOptions.selectedSpaceIds.map(id=>{const space=props.spaces.find(s=>s.id===id);const spaceCopyResult=props.copyResult[space.id];const summarizedSpaceCopyResult=summarizeCopyResult(props.savedObject,spaceCopyResult);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:id},summarizedSpaceCopyResult.processing?external_kbnSharedDeps_React_default.a.createElement(SpaceResultProcessing,{space:space}):external_kbnSharedDeps_React_default.a.createElement(SpaceResult,{savedObject:props.savedObject,space:space,summarizedCopyResult:summarizedSpaceCopyResult,retries:props.retries[space.id]||[],onRetriesChange:retries=>updateRetries(space.id,retries),conflictResolutionInProgress:props.conflictResolutionInProgress}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}))};function copy_to_space_flyout_footer_slicedToArray(arr,i){return copy_to_space_flyout_footer_arrayWithHoles(arr)||copy_to_space_flyout_footer_iterableToArrayLimit(arr,i)||copy_to_space_flyout_footer_unsupportedIterableToArray(arr,i)||copy_to_space_flyout_footer_nonIterableRest()}function copy_to_space_flyout_footer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function copy_to_space_flyout_footer_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return copy_to_space_flyout_footer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return copy_to_space_flyout_footer_arrayLikeToArray(o,minLen)}function copy_to_space_flyout_footer_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function copy_to_space_flyout_footer_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function copy_to_space_flyout_footer_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const isResolvableError=({error:{type:type}})=>["conflict","ambiguous_conflict","missing_references"].includes(type);const copy_to_space_flyout_footer_isUnresolvableError=failure=>!isResolvableError(failure);const CopyToSpaceFlyoutFooter=props=>{const copyInProgress=props.copyInProgress,conflictResolutionInProgress=props.conflictResolutionInProgress,initialCopyFinished=props.initialCopyFinished,copyResult=props.copyResult,retries=props.retries;let summarizedResults={successCount:0,pendingCount:0,skippedCount:0,errorCount:0};if(copyResult){summarizedResults=Object.entries(copyResult).reduce((acc,result)=>{const _result=copy_to_space_flyout_footer_slicedToArray(result,2),spaceId=_result[0],spaceResult=_result[1];let successCount=0;let pendingCount=0;let skippedCount=0;let errorCount=0;if(spaceResult.status==="success"){successCount=spaceResult.importCount}else{const uniqueResolvableErrors=spaceResult.failedImports.filter(isResolvableError).reduce((set,{obj:{type:type,id:id}})=>set.add("".concat(type,":").concat(id)),new Set);pendingCount=(retries[spaceId]||[]).length;skippedCount=uniqueResolvableErrors.size+spaceResult.successfulImports.length-pendingCount;errorCount=spaceResult.failedImports.filter(copy_to_space_flyout_footer_isUnresolvableError).length}return{loading:false,successCount:acc.successCount+successCount,pendingCount:acc.pendingCount+pendingCount,skippedCount:acc.skippedCount+skippedCount,errorCount:acc.errorCount+errorCount}},summarizedResults)}const getButton=()=>{let actionButton;if(initialCopyFinished){const hasPendingRetries=summarizedResults.pendingCount>0;const buttonText=hasPendingRetries?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.finishPendingOverwritesCopyToSpacesButton",defaultMessage:"Copy {overwriteCount} objects",values:{overwriteCount:summarizedResults.pendingCount}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.finishCopyToSpacesButton",defaultMessage:"Finish"});actionButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,isLoading:conflictResolutionInProgress,"aria-live":"assertive","aria-label":conflictResolutionInProgress?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.inProgressButtonLabel",{defaultMessage:"Copy is in progress. Please wait."}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.finishedButtonLabel",{defaultMessage:"Copy finished."}),onClick:()=>props.onCopyFinish(),"data-test-subj":"cts-finish-button"},buttonText)}else{actionButton=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,isLoading:copyInProgress,onClick:()=>props.onCopyStart(),"data-test-subj":"cts-initiate-button",disabled:props.numberOfSelectedSpaces===0||copyInProgress},props.numberOfSelectedSpaces>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.copyToSpacesButton",defaultMessage:"Copy to {spaceCount} {spaceCount, plural, one {space} other {spaces}}",values:{spaceCount:props.numberOfSelectedSpaces}}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.disabledCopyToSpacesButton",defaultMessage:"Copy"}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:()=>props.onClose(),"data-test-subj":"cts-cancel-button",disabled:copyInProgress&&!initialCopyFinished||conflictResolutionInProgress||summarizedResults.successCount>0},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.cancelButton",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},actionButton))};if(!copyInProgress){return getButton()}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{"data-test-subj":"cts-summary-success-count",title:summarizedResults.successCount,titleSize:"s",titleColor:initialCopyFinished?"secondary":"subdued",isLoading:!initialCopyFinished,textAlign:"center",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpaceFlyoutFooter.successCount",defaultMessage:"Copied"})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{"data-test-subj":"cts-summary-pending-count",title:summarizedResults.pendingCount,titleSize:"s",titleColor:summarizedResults.pendingCount>0?"primary":"subdued",isLoading:!initialCopyFinished,textAlign:"center",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpaceFlyoutFooter.pendingCount",defaultMessage:"Pending"})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{"data-test-subj":"cts-summary-skipped-count",title:summarizedResults.skippedCount,titleSize:"s",titleColor:summarizedResults.skippedCount>0?"primary":"subdued",isLoading:!initialCopyFinished,textAlign:"center",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpaceFlyoutFooter.skippedCount",defaultMessage:"Skipped"})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{"data-test-subj":"cts-summary-error-count",title:summarizedResults.errorCount,titleSize:"s",titleColor:summarizedResults.errorCount>0?"danger":"subdued",isLoading:!initialCopyFinished,textAlign:"center",description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpaceFlyoutFooter.errorCount",defaultMessage:"Errors"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),getButton())};var selectable_spaces_control=__webpack_require__(78);const SelectableSpacesControl=props=>{if(props.spaces.length===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)}const disabledIndicator=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.selectSpacesControl.disabledTooltip",defaultMessage:"The object already exists in this space."}),position:"left",type:"iInCircle"});const options=props.spaces.map(space=>{const disabled=props.disabledSpaceIds.has(space.id);return{label:space.name,prepend:external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:space,size:"s"}),append:disabled?disabledIndicator:null,checked:props.selectedSpaceIds.includes(space.id)?"on":undefined,disabled:disabled,["data-space-id"]:space.id,["data-test-subj"]:"cts-space-selector-row-".concat(space.id)}});function updateSelectedSpaces(selectedOptions){if(props.disabled)return;const selectedSpaceIds=selectedOptions.filter(opt=>opt.checked).map(opt=>opt["data-space-id"]);props.onChange(selectedSpaceIds)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelectable"],{options:options,onChange:newOptions=>updateSelectedSpaces(newOptions),listProps:{bordered:true,rowHeight:40,className:"spcCopyToSpace__spacesList","data-test-subj":"cts-form-space-selector"},searchable:true},(list,search)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,search,list))};function copy_mode_control_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function copy_mode_control_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){copy_mode_control_ownKeys(Object(source),true).forEach((function(key){copy_mode_control_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{copy_mode_control_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function copy_mode_control_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function copy_mode_control_slicedToArray(arr,i){return copy_mode_control_arrayWithHoles(arr)||copy_mode_control_iterableToArrayLimit(arr,i)||copy_mode_control_unsupportedIterableToArray(arr,i)||copy_mode_control_nonIterableRest()}function copy_mode_control_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function copy_mode_control_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return copy_mode_control_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return copy_mode_control_arrayLikeToArray(o,minLen)}function copy_mode_control_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function copy_mode_control_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function copy_mode_control_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const createNewCopiesDisabled={id:"createNewCopiesDisabled",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.createNewCopies.disabledTitle",{defaultMessage:"Check for existing objects"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.createNewCopies.disabledText",{defaultMessage:"Check if objects were previously copied or imported into the space."})};const createNewCopiesEnabled={id:"createNewCopiesEnabled",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.createNewCopies.enabledTitle",{defaultMessage:"Create new objects with random IDs"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.createNewCopies.enabledText",{defaultMessage:"Use this option to create one or more copies of the object in the same space."})};const overwriteEnabled={id:"overwriteEnabled",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.overwrite.enabledLabel",{defaultMessage:"Automatically overwrite conflicts"})};const overwriteDisabled={id:"overwriteDisabled",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.overwrite.disabledLabel",{defaultMessage:"Request action on conflict"})};const copy_mode_control_includeRelated={id:"includeRelated",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.includeRelated.title",{defaultMessage:"Include related objects"}),tooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.includeRelated.text",{defaultMessage:"Copy this object and its related objects. For dashboards, related visualizations, index patterns, and saved searches are also copied."})};const copyOptionsTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.copyOptionsTitle",{defaultMessage:"Copy options"});const relationshipOptionsTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyModeControl.relationshipOptionsTitle",{defaultMessage:"Relationship"});const createLabel=({text:text,tooltip:tooltip})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,text)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:tooltip,position:"left",type:"iInCircle"})));const CopyModeControl=({initialValues:initialValues,updateSelection:updateSelection})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(initialValues.createNewCopies),_useState2=copy_mode_control_slicedToArray(_useState,2),createNewCopies=_useState2[0],setCreateNewCopies=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(initialValues.overwrite),_useState4=copy_mode_control_slicedToArray(_useState3,2),overwrite=_useState4[0],setOverwrite=_useState4[1];const _onChange=partial=>{if(partial.createNewCopies!==undefined){setCreateNewCopies(partial.createNewCopies)}else if(partial.overwrite!==undefined){setOverwrite(partial.overwrite)}updateSelection(copy_mode_control_objectSpread({createNewCopies:createNewCopies,overwrite:overwrite},partial))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormFieldset"],{legend:{children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,copyOptionsTitle))}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckableCard"],{id:createNewCopiesDisabled.id,label:createLabel(createNewCopiesDisabled),checked:!createNewCopies,onChange:()=>_onChange({createNewCopies:false})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRadioGroup"],{options:[overwriteEnabled,overwriteDisabled],idSelected:overwrite?overwriteEnabled.id:overwriteDisabled.id,onChange:id=>_onChange({overwrite:id===overwriteEnabled.id}),disabled:createNewCopies,"data-test-subj":"cts-copyModeControl-overwriteRadioGroup"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckableCard"],{id:createNewCopiesEnabled.id,label:createLabel(createNewCopiesEnabled),checked:createNewCopies,onChange:()=>_onChange({createNewCopies:true})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormFieldset"],{legend:{children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,relationshipOptionsTitle))}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckableCard"],{id:copy_mode_control_includeRelated.id,label:createLabel(copy_mode_control_includeRelated),checkableType:"checkbox",checked:true,onChange:()=>{},disabled:true})))};function copy_to_space_form_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function copy_to_space_form_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){copy_to_space_form_ownKeys(Object(source),true).forEach((function(key){copy_to_space_form_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{copy_to_space_form_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function copy_to_space_form_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const CopyToSpaceForm=props=>{const savedObject=props.savedObject,spaces=props.spaces,onUpdate=props.onUpdate,copyOptions=props.copyOptions;const getDisabledSpaceIds=createNewCopies=>{var _savedObject$namespac;return createNewCopies?new Set:((_savedObject$namespac=savedObject.namespaces)!==null&&_savedObject$namespac!==void 0?_savedObject$namespac:[]).reduce((acc,cur)=>acc.add(cur),new Set)};const changeCopyMode=({createNewCopies:createNewCopies,overwrite:overwrite})=>{const disabled=getDisabledSpaceIds(createNewCopies);const selectedSpaceIds=copyOptions.selectedSpaceIds.filter(x=>!disabled.has(x));onUpdate(copy_to_space_form_objectSpread(copy_to_space_form_objectSpread({},copyOptions),{},{createNewCopies:createNewCopies,overwrite:overwrite,selectedSpaceIds:selectedSpaceIds}))};const setSelectedSpaceIds=selectedSpaceIds=>onUpdate(copy_to_space_form_objectSpread(copy_to_space_form_objectSpread({},copyOptions),{},{selectedSpaceIds:selectedSpaceIds}));return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"copy-to-space-form"},external_kbnSharedDeps_React_default.a.createElement(CopyModeControl,{initialValues:copyOptions,updateSelection:newValues=>changeCopyMode(newValues)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.selectSpacesLabel",defaultMessage:"Select spaces"}),fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(SelectableSpacesControl,{spaces:spaces,selectedSpaceIds:copyOptions.selectedSpaceIds,disabledSpaceIds:getDisabledSpaceIds(copyOptions.createNewCopies),onChange:selection=>setSelectedSpaceIds(selection)})))};function copy_to_space_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function copy_to_space_flyout_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){copy_to_space_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){copy_to_space_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function copy_to_space_flyout_slicedToArray(arr,i){return copy_to_space_flyout_arrayWithHoles(arr)||copy_to_space_flyout_iterableToArrayLimit(arr,i)||copy_to_space_flyout_unsupportedIterableToArray(arr,i)||copy_to_space_flyout_nonIterableRest()}function copy_to_space_flyout_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function copy_to_space_flyout_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return copy_to_space_flyout_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return copy_to_space_flyout_arrayLikeToArray(o,minLen)}function copy_to_space_flyout_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function copy_to_space_flyout_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function copy_to_space_flyout_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const INCLUDE_RELATED_DEFAULT=true;const CREATE_NEW_COPIES_DEFAULT=false;const OVERWRITE_ALL_DEFAULT=true;const CopySavedObjectsToSpaceFlyout=props=>{const onClose=props.onClose,savedObject=props.savedObject,spacesManager=props.spacesManager,toastNotifications=props.toastNotifications;const _useState=Object(external_kbnSharedDeps_React_["useState"])({includeRelated:INCLUDE_RELATED_DEFAULT,createNewCopies:CREATE_NEW_COPIES_DEFAULT,overwrite:OVERWRITE_ALL_DEFAULT,selectedSpaceIds:[]}),_useState2=copy_to_space_flyout_slicedToArray(_useState,2),copyOptions=_useState2[0],setCopyOptions=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])({isLoading:true,spaces:[]}),_useState4=copy_to_space_flyout_slicedToArray(_useState3,2),_useState4$=_useState4[0],isLoading=_useState4$.isLoading,spaces=_useState4$.spaces,setSpacesState=_useState4[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const getSpaces=spacesManager.getSpaces({includeAuthorizedPurposes:true});const getActiveSpace=spacesManager.getActiveSpace();Promise.all([getSpaces,getActiveSpace]).then(([allSpaces,activeSpace])=>{setSpacesState({isLoading:false,spaces:allSpaces.filter(({id:id,authorizedPurposes:authorizedPurposes})=>id!==activeSpace.id&&(authorizedPurposes===null||authorizedPurposes===void 0?void 0:authorizedPurposes.copySavedObjectsIntoSpace)!==false)})}).catch(e=>{toastNotifications.addError(e,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.spacesLoadErrorTitle",{defaultMessage:"Error loading available spaces"})})})},[spacesManager,toastNotifications]);const _useState5=Object(external_kbnSharedDeps_React_["useState"])(false),_useState6=copy_to_space_flyout_slicedToArray(_useState5,2),copyInProgress=_useState6[0],setCopyInProgress=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])(false),_useState8=copy_to_space_flyout_slicedToArray(_useState7,2),conflictResolutionInProgress=_useState8[0],setConflictResolutionInProgress=_useState8[1];const _useState9=Object(external_kbnSharedDeps_React_["useState"])({}),_useState10=copy_to_space_flyout_slicedToArray(_useState9,2),copyResult=_useState10[0],setCopyResult=_useState10[1];const _useState11=Object(external_kbnSharedDeps_React_["useState"])({}),_useState12=copy_to_space_flyout_slicedToArray(_useState11,2),retries=_useState12[0],setRetries=_useState12[1];const initialCopyFinished=Object.values(copyResult).length>0;const onRetriesChange=updatedRetries=>{setRetries(updatedRetries)};function startCopy(){return _startCopy.apply(this,arguments)}function _startCopy(){_startCopy=copy_to_space_flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var copySavedObjectsResult,processedResult,getAutomaticRetries,automaticRetries;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setCopyInProgress(true);setCopyResult({});_context.prev=2;_context.next=5;return spacesManager.copySavedObjects([{type:savedObject.type,id:savedObject.id}],copyOptions.selectedSpaceIds,copyOptions.includeRelated,copyOptions.createNewCopies,copyOptions.overwrite);case 5:copySavedObjectsResult=_context.sent;processedResult=Object(external_kbnSharedDeps_Lodash_["mapValues"])(copySavedObjectsResult,savedObjectsManagement_public_["processImportResponse"]);setCopyResult(processedResult);getAutomaticRetries=response=>{const failedImports=response.failedImports,successfulImports=response.successfulImports;if(!failedImports.length){return[]}const nonMissingReferencesFailures=failedImports.filter(({error:error})=>error.type!=="missing_references").reduce((acc,{obj:{type:type,id:id}})=>acc.add("".concat(type,":").concat(id)),new Set);const missingReferencesToRetry=failedImports.filter(({obj:{type:type,id:id},error:error})=>error.type==="missing_references"&&!nonMissingReferencesFailures.has("".concat(type,":").concat(id)));return[...successfulImports.map(({type:type,id:id,overwrite:overwrite,destinationId:destinationId,createNewCopy:createNewCopy})=>({type:type,id:id,overwrite:overwrite===true,destinationId:destinationId,createNewCopy:createNewCopy})),...missingReferencesToRetry.map(({obj:{type:type,id:id}})=>({type:type,id:id,overwrite:false,ignoreMissingReferences:true}))]};automaticRetries=Object(external_kbnSharedDeps_Lodash_["mapValues"])(processedResult,getAutomaticRetries);setRetries(automaticRetries);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context["catch"](2);setCopyInProgress(false);toastNotifications.addError(_context.t0,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.copyErrorTitle",{defaultMessage:"Error copying saved object"})});case 17:case"end":return _context.stop()}}),_callee,null,[[2,13]])})));return _startCopy.apply(this,arguments)}function finishCopy(){return _finishCopy.apply(this,arguments)}function _finishCopy(){_finishCopy=copy_to_space_flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var needsErrorResolution;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:needsErrorResolution=Object.values(retries).some(spaceRetry=>spaceRetry.length);if(!needsErrorResolution){_context2.next=16;break}setConflictResolutionInProgress(true);_context2.prev=3;_context2.next=6;return spacesManager.resolveCopySavedObjectsErrors([{type:savedObject.type,id:savedObject.id}],retries,copyOptions.includeRelated,copyOptions.createNewCopies);case 6:toastNotifications.addSuccess(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.resolveCopySuccessTitle",{defaultMessage:"Copy successful"}));onClose();_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2["catch"](3);setCopyInProgress(false);toastNotifications.addError(_context2.t0,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.resolveCopyErrorTitle",{defaultMessage:"Error resolving saved object conflicts"})});case 14:_context2.next=17;break;case 16:onClose();case 17:case"end":return _context2.stop()}}),_callee2,null,[[3,10]])})));return _finishCopy.apply(this,arguments)}const getFlyoutBody=()=>{if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)}if(spaces.length===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.noSpacesBody",defaultMessage:"There are no eligible spaces to copy into."})),title:external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpace.noSpacesTitle",defaultMessage:"No spaces available"}))})}if(!copyInProgress){return external_kbnSharedDeps_React_default.a.createElement(CopyToSpaceForm,{savedObject:savedObject,spaces:spaces,copyOptions:copyOptions,onUpdate:setCopyOptions})}return external_kbnSharedDeps_React_default.a.createElement(ProcessingCopyToSpace,{savedObject:savedObject,copyInProgress:copyInProgress,conflictResolutionInProgress:conflictResolutionInProgress,copyResult:copyResult,spaces:spaces,copyOptions:copyOptions,retries:retries,onRetriesChange:onRetriesChange})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:onClose,maxWidth:600,"data-test-subj":"copy-to-space-flyout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"m",type:"copy"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.copyToSpaceFlyoutHeader",defaultMessage:"Copy to space"})))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:savedObject.meta.icon||"apps"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,savedObject.meta.title)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),getFlyoutBody()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(CopyToSpaceFlyoutFooter,{copyInProgress:copyInProgress,conflictResolutionInProgress:conflictResolutionInProgress,initialCopyFinished:initialCopyFinished,copyResult:copyResult,numberOfSelectedSpaces:copyOptions.selectedSpaceIds.length,retries:retries,onClose:onClose,onCopyStart:startCopy,onCopyFinish:finishCopy})))};function copy_saved_objects_to_space_action_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class copy_saved_objects_to_space_action_CopyToSpaceSavedObjectsManagementAction extends savedObjectsManagement_public_["SavedObjectsManagementAction"]{constructor(spacesManager,notifications){super();this.spacesManager=spacesManager;this.notifications=notifications;copy_saved_objects_to_space_action_defineProperty(this,"id","copy_saved_objects_to_space");copy_saved_objects_to_space_action_defineProperty(this,"euiAction",{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.actionTitle",{defaultMessage:"Copy to space"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.copyToSpace.actionDescription",{defaultMessage:"Make a copy of this saved object in one or more spaces"}),icon:"copy",type:"icon",available:object=>object.meta.namespaceType!=="agnostic",onClick:object=>{this.start(object)}});copy_saved_objects_to_space_action_defineProperty(this,"render",()=>{if(!this.record){throw new Error("No record available! `render()` was likely called before `start()`.")}return external_kbnSharedDeps_React_default.a.createElement(CopySavedObjectsToSpaceFlyout,{onClose:this.onClose,savedObject:this.record,spacesManager:this.spacesManager,toastNotifications:this.notifications.toasts})});copy_saved_objects_to_space_action_defineProperty(this,"onClose",()=>{this.finish()})}}class copy_saved_objects_to_space_service_CopySavedObjectsToSpaceService{setup({spacesManager:spacesManager,savedObjectsManagementSetup:savedObjectsManagementSetup,notificationsSetup:notificationsSetup}){const action=new copy_saved_objects_to_space_action_CopyToSpaceSavedObjectsManagementAction(spacesManager,notificationsSetup);savedObjectsManagementSetup.actions.register(action)}}var kibanaReact_public_=__webpack_require__(9);function context_wrapper_slicedToArray(arr,i){return context_wrapper_arrayWithHoles(arr)||context_wrapper_iterableToArrayLimit(arr,i)||context_wrapper_unsupportedIterableToArray(arr,i)||context_wrapper_nonIterableRest()}function context_wrapper_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function context_wrapper_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return context_wrapper_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return context_wrapper_arrayLikeToArray(o,minLen)}function context_wrapper_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function context_wrapper_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function context_wrapper_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const ContextWrapper=props=>{const getStartServices=props.getStartServices,children=props.children;const _useState=Object(external_kbnSharedDeps_React_["useState"])(),_useState2=context_wrapper_slicedToArray(_useState,2),coreStart=_useState2[0],setCoreStart=_useState2[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{getStartServices().then(startServices=>{const _startServices=context_wrapper_slicedToArray(startServices,1),coreStartValue=_startServices[0];setCoreStart(coreStartValue)})},[getStartServices]);if(!coreStart){return null}const application=coreStart.application,docLinks=coreStart.docLinks;const _createKibanaReactCon=Object(kibanaReact_public_["createKibanaReactContext"])({application:application,docLinks:docLinks}),KibanaReactContextProvider=_createKibanaReactCon.Provider;return external_kbnSharedDeps_React_default.a.createElement(KibanaReactContextProvider,null,children)};var constants=__webpack_require__(6);var share_to_space_form=__webpack_require__(87);var share_mode_control=__webpack_require__(96);var components_selectable_spaces_control=__webpack_require__(105);const NoSpacesAvailable=props=>{const _props$application=props.application,capabilities=_props$application.capabilities,getUrlForApp=_props$application.getUrlForApp;const canCreateNewSpaces=capabilities.spaces.manage;if(!canCreateNewSpaces){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.shareToSpace.noAvailableSpaces.canCreateNewSpace.text",defaultMessage:"You can {createANewSpaceLink} for sharing your objects.",values:{createANewSpaceLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"sts-new-space-link",href:getUrlForApp("management",{path:"kibana/spaces/create"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.shareToSpace.noAvailableSpaces.canCreateNewSpace.linkText",defaultMessage:"create a new space"}))}})))};function documentation_links_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class DocumentationLinksService{constructor(docLinks){documentation_links_defineProperty(this,"kbn",void 0);this.kbn="".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(docLinks.DOC_LINK_VERSION,"/")}getKibanaPrivilegesDocUrl(){return"".concat(this.kbn,"kibana-privileges.html")}}function selectable_spaces_control_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function selectable_spaces_control_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){selectable_spaces_control_ownKeys(Object(source),true).forEach((function(key){selectable_spaces_control_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{selectable_spaces_control_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function selectable_spaces_control_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const ROW_HEIGHT=40;const partiallyAuthorizedTooltip={checked:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.partiallyAuthorizedSpaceTooltip.checked",{defaultMessage:"You need additional privileges to deselect this space."}),unchecked:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.partiallyAuthorizedSpaceTooltip.unchecked",{defaultMessage:"You need additional privileges to select this space."})};const partiallyAuthorizedSpaceProps=checked=>({append:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:checked?partiallyAuthorizedTooltip.checked:partiallyAuthorizedTooltip.unchecked,position:"left",type:"iInCircle"}),disabled:true});const activeSpaceProps={append:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow"},"Current"),disabled:true,checked:"on"};const selectable_spaces_control_SelectableSpacesControl=props=>{const spaces=props.spaces,selectedSpaceIds=props.selectedSpaceIds,onChange=props.onChange;const _useKibana=Object(kibanaReact_public_["useKibana"])(),services=_useKibana.services;const application=services.application,docLinks=services.docLinks;const activeSpaceId=spaces.find(space=>space.isActiveSpace).id;const isGlobalControlChecked=selectedSpaceIds.includes(constants["a"]);const options=spaces.sort((a,b)=>a.isActiveSpace?-1:b.isActiveSpace?1:0).map(space=>{const checked=selectedSpaceIds.includes(space.id);return selectable_spaces_control_objectSpread(selectable_spaces_control_objectSpread(selectable_spaces_control_objectSpread({label:space.name,prepend:external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:space,size:"s"}),checked:checked?"on":undefined,["data-space-id"]:space.id,["data-test-subj"]:"sts-space-selector-row-".concat(space.id)},isGlobalControlChecked&&{disabled:true}),space.isPartiallyAuthorized&&partiallyAuthorizedSpaceProps(checked)),space.isActiveSpace&&activeSpaceProps)});function updateSelectedSpaces(spaceOptions){const selectedOptions=spaceOptions.filter(x=>x.checked&&x["data-space-id"]!==activeSpaceId).map(x=>x["data-space-id"]);const updatedSpaceIds=[...selectedOptions,...selectedSpaceIds.filter(x=>x===constants["f"])];onChange(updatedSpaceIds)}const getUnknownSpacesLabel=()=>{const count=selectedSpaceIds.filter(id=>id===constants["f"]).length;if(!count){return null}const kibanaPrivilegesUrl=new DocumentationLinksService(docLinks).getKibanaPrivilegesDocUrl();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.shareToSpace.unknownSpacesLabel.text",defaultMessage:"To view hidden spaces, you need {additionalPrivilegesLink}.",values:{additionalPrivilegesLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:kibanaPrivilegesUrl},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.shareToSpace.unknownSpacesLabel.additionalPrivilegesLink",defaultMessage:"additional privileges"}))}})))};const getNoSpacesAvailable=()=>{if(spaces.length<2){return external_kbnSharedDeps_React_default.a.createElement(NoSpacesAvailable,{application:application})}return null};const selectedCount=selectedSpaceIds.filter(id=>id!==constants["a"]&&id!==constants["f"]).length+1;const hiddenCount=selectedSpaceIds.filter(id=>id===constants["f"]).length;const selectSpacesLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareModeControl.selectSpacesLabel",{defaultMessage:"Select spaces"});const selectedSpacesLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareModeControl.selectedCountLabel",{defaultMessage:"{selectedCount} selected",values:{selectedCount:selectedCount}});const hiddenSpacesLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareModeControl.hiddenCountLabel",{defaultMessage:"+{hiddenCount} hidden",values:{hiddenCount:hiddenCount}});const hiddenSpaces=hiddenCount?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},hiddenSpacesLabel):null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:selectSpacesLabel,labelAppend:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",gutterSize:"none",alignItems:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},selectedSpacesLabel)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},hiddenSpaces)),fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelectable"],{options:options,onChange:newOptions=>updateSelectedSpaces(newOptions),listProps:{bordered:true,rowHeight:ROW_HEIGHT,className:"spcShareToSpace__spacesList","data-test-subj":"sts-form-space-selector"},height:ROW_HEIGHT*3.5,searchable:true},(list,search)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,search,list)),getUnknownSpacesLabel(),getNoSpacesAvailable()))};function share_mode_control_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function share_mode_control_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){share_mode_control_ownKeys(Object(source),true).forEach((function(key){share_mode_control_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{share_mode_control_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function share_mode_control_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function share_mode_control_createLabel({title:title,text:text,disabled:disabled,tooltip:tooltip}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,title)),tooltip&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:tooltip,position:"left",type:"iInCircle"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:disabled?undefined:"subdued",size:"s"},text))}const ShareModeControl=props=>{const spaces=props.spaces,canShareToAllSpaces=props.canShareToAllSpaces,selectedSpaceIds=props.selectedSpaceIds,onChange=props.onChange;if(spaces.length===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)}const isGlobalControlChecked=selectedSpaceIds.includes(constants["a"]);const shareToAllSpaces=share_mode_control_objectSpread(share_mode_control_objectSpread({id:"shareToAllSpaces",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareModeControl.shareToAllSpaces.title",{defaultMessage:"All spaces"}),text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareModeControl.shareToAllSpaces.text",{defaultMessage:"Make object available in all current and future spaces."})},!canShareToAllSpaces&&{tooltip:isGlobalControlChecked?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareModeControl.shareToAllSpaces.cannotUncheckTooltip",{defaultMessage:"You need additional privileges to change this option."}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareModeControl.shareToAllSpaces.cannotCheckTooltip",{defaultMessage:"You need additional privileges to use this option."})}),{},{disabled:!canShareToAllSpaces});const shareToExplicitSpaces={id:"shareToExplicitSpaces",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareModeControl.shareToExplicitSpaces.title",{defaultMessage:"Select spaces"}),text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareModeControl.shareToExplicitSpaces.text",{defaultMessage:"Make object available in selected spaces only."}),disabled:!canShareToAllSpaces&&isGlobalControlChecked};const shareOptionsTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareModeControl.shareOptionsTitle",{defaultMessage:"Share options"});const toggleShareOption=allSpaces=>{const updatedSpaceIds=allSpaces?[constants["a"],...selectedSpaceIds]:selectedSpaceIds.filter(id=>id!==constants["a"]);onChange(updatedSpaceIds)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormFieldset"],{legend:{children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("span",null,shareOptionsTitle))}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckableCard"],{id:shareToExplicitSpaces.id,label:share_mode_control_createLabel(shareToExplicitSpaces),checked:!isGlobalControlChecked,onChange:()=>toggleShareOption(false),disabled:shareToExplicitSpaces.disabled},external_kbnSharedDeps_React_default.a.createElement(selectable_spaces_control_SelectableSpacesControl,props)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckableCard"],{id:shareToAllSpaces.id,label:share_mode_control_createLabel(shareToAllSpaces),checked:isGlobalControlChecked,onChange:()=>toggleShareOption(true),disabled:shareToAllSpaces.disabled})))};function share_to_space_form_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function share_to_space_form_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){share_to_space_form_ownKeys(Object(source),true).forEach((function(key){share_to_space_form_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{share_to_space_form_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function share_to_space_form_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const ShareToSpaceForm=props=>{const spaces=props.spaces,onUpdate=props.onUpdate,shareOptions=props.shareOptions,showShareWarning=props.showShareWarning,canShareToAllSpaces=props.canShareToAllSpaces,makeCopy=props.makeCopy;const setSelectedSpaceIds=selectedSpaceIds=>onUpdate(share_to_space_form_objectSpread(share_to_space_form_objectSpread({},shareOptions),{},{selectedSpaceIds:selectedSpaceIds}));const getShareWarning=()=>{if(!showShareWarning){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{size:"s",title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.shareToSpace.shareWarningTitle",defaultMessage:"Editing a shared object applies the changes in all spaces"}),color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.shareToSpace.shareWarningBody",defaultMessage:"To edit in only one space, {makeACopyLink} instead.",values:{makeACopyLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"sts-copy-link",onClick:()=>makeCopy()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.shareToSpace.shareWarningLink",defaultMessage:"make a copy"}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}))};return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"share-to-space-form"},getShareWarning(),external_kbnSharedDeps_React_default.a.createElement(ShareModeControl,{spaces:spaces,canShareToAllSpaces:canShareToAllSpaces,selectedSpaceIds:shareOptions.selectedSpaceIds,onChange:selection=>setSelectedSpaceIds(selection)}))};function share_to_space_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function share_to_space_flyout_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){share_to_space_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){share_to_space_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function share_to_space_flyout_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function share_to_space_flyout_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){share_to_space_flyout_ownKeys(Object(source),true).forEach((function(key){share_to_space_flyout_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{share_to_space_flyout_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function share_to_space_flyout_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function share_to_space_flyout_slicedToArray(arr,i){return share_to_space_flyout_arrayWithHoles(arr)||share_to_space_flyout_iterableToArrayLimit(arr,i)||share_to_space_flyout_unsupportedIterableToArray(arr,i)||share_to_space_flyout_nonIterableRest()}function share_to_space_flyout_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function share_to_space_flyout_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return share_to_space_flyout_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return share_to_space_flyout_arrayLikeToArray(o,minLen)}function share_to_space_flyout_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function share_to_space_flyout_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function share_to_space_flyout_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const arraysAreEqual=(a,b)=>a.every(x=>b.includes(x))&&b.every(x=>a.includes(x));const ShareSavedObjectsToSpaceFlyout=props=>{const onClose=props.onClose,onObjectUpdated=props.onObjectUpdated,savedObject=props.savedObject,spacesManager=props.spacesManager,toastNotifications=props.toastNotifications;const _savedObject$namespac=savedObject.namespaces,currentNamespaces=_savedObject$namespac===void 0?[]:_savedObject$namespac;const _useState=Object(external_kbnSharedDeps_React_["useState"])({selectedSpaceIds:[]}),_useState2=share_to_space_flyout_slicedToArray(_useState,2),shareOptions=_useState2[0],setShareOptions=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=share_to_space_flyout_slicedToArray(_useState3,2),canShareToAllSpaces=_useState4[0],setCanShareToAllSpaces=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(false),_useState6=share_to_space_flyout_slicedToArray(_useState5,2),showMakeCopy=_useState6[0],setShowMakeCopy=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])({isLoading:true,spaces:[]}),_useState8=share_to_space_flyout_slicedToArray(_useState7,2),_useState8$=_useState8[0],isLoading=_useState8$.isLoading,spaces=_useState8$.spaces,setSpacesState=_useState8[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const getSpaces=spacesManager.getSpaces({includeAuthorizedPurposes:true});const getActiveSpace=spacesManager.getActiveSpace();const getPermissions=spacesManager.getShareSavedObjectPermissions(savedObject.type);Promise.all([getSpaces,getActiveSpace,getPermissions]).then(([allSpaces,activeSpace,permissions])=>{setShareOptions({selectedSpaceIds:currentNamespaces.filter(spaceId=>spaceId!==activeSpace.id)});setCanShareToAllSpaces(permissions.shareToAllSpaces);const createSpaceTarget=space=>{var _space$authorizedPurp;return share_to_space_flyout_objectSpread(share_to_space_flyout_objectSpread({},space),{},{isActiveSpace:space.id===activeSpace.id,isPartiallyAuthorized:((_space$authorizedPurp=space.authorizedPurposes)===null||_space$authorizedPurp===void 0?void 0:_space$authorizedPurp.shareSavedObjectsIntoSpace)===false})};setSpacesState({isLoading:false,spaces:allSpaces.map(space=>createSpaceTarget(space))})}).catch(e=>{toastNotifications.addError(e,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.spacesLoadErrorTitle",{defaultMessage:"Error loading available spaces"})})})},[currentNamespaces,spacesManager,savedObject,toastNotifications]);const getSelectionChanges=()=>{const activeSpace=spaces.find(space=>space.isActiveSpace);if(!activeSpace){return{isSelectionChanged:false,spacesToAdd:[],spacesToRemove:[]}}const initialSelection=currentNamespaces.filter(spaceId=>spaceId!==activeSpace.id&&spaceId!==constants["f"]);const selectedSpaceIds=shareOptions.selectedSpaceIds;const filteredSelection=selectedSpaceIds.filter(x=>x!==constants["f"]);const isSharedToAllSpaces=!initialSelection.includes(constants["a"])&&filteredSelection.includes(constants["a"]);const isUnsharedFromAllSpaces=initialSelection.includes(constants["a"])&&!filteredSelection.includes(constants["a"]);const selectedSpacesChanged=!filteredSelection.includes(constants["a"])&&!arraysAreEqual(initialSelection,filteredSelection);const isSelectionChanged=isSharedToAllSpaces||isUnsharedFromAllSpaces||!isSharedToAllSpaces&&!isUnsharedFromAllSpaces&&selectedSpacesChanged;const selectedSpacesToAdd=filteredSelection.filter(spaceId=>!initialSelection.includes(spaceId));const selectedSpacesToRemove=initialSelection.filter(spaceId=>!filteredSelection.includes(spaceId));const spacesToAdd=isSharedToAllSpaces?[constants["a"]]:isUnsharedFromAllSpaces?[activeSpace.id,...selectedSpacesToAdd]:selectedSpacesToAdd;const spacesToRemove=isUnsharedFromAllSpaces?[constants["a"]]:isSharedToAllSpaces?[activeSpace.id,...initialSelection]:selectedSpacesToRemove;return{isSelectionChanged:isSelectionChanged,spacesToAdd:spacesToAdd,spacesToRemove:spacesToRemove}};const _getSelectionChanges=getSelectionChanges(),isSelectionChanged=_getSelectionChanges.isSelectionChanged,spacesToAdd=_getSelectionChanges.spacesToAdd,spacesToRemove=_getSelectionChanges.spacesToRemove;const _useState9=Object(external_kbnSharedDeps_React_["useState"])(false),_useState10=share_to_space_flyout_slicedToArray(_useState9,2),shareInProgress=_useState10[0],setShareInProgress=_useState10[1];function startShare(){return _startShare.apply(this,arguments)}function _startShare(){_startShare=share_to_space_flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var type,id,meta,title,isSharedToAllSpaces,spaceTargets,text,isUnsharedFromAllSpaces;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setShareInProgress(true);_context.prev=1;type=savedObject.type,id=savedObject.id,meta=savedObject.meta;title=currentNamespaces.length===1?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareNewSuccessTitle",{defaultMessage:"Object is now shared"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareEditSuccessTitle",{defaultMessage:"Object was updated"});isSharedToAllSpaces=spacesToAdd.includes(constants["a"]);if(!(spacesToAdd.length>0)){_context.next=11;break}_context.next=8;return spacesManager.shareSavedObjectAdd({type:type,id:id},spacesToAdd);case 8:spaceTargets=isSharedToAllSpaces?"all":"".concat(spacesToAdd.length);text=!isSharedToAllSpaces&&spacesToAdd.length===1?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareAddSuccessTextSingular",{defaultMessage:"'{object}' was added to 1 space.",values:{object:meta.title}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareAddSuccessTextPlural",{defaultMessage:"'{object}' was added to {spaceTargets} spaces.",values:{object:meta.title,spaceTargets:spaceTargets}});toastNotifications.addSuccess({title:title,text:text});case 11:if(!(spacesToRemove.length>0)){_context.next=18;break}_context.next=14;return spacesManager.shareSavedObjectRemove({type:type,id:id},spacesToRemove);case 14:isUnsharedFromAllSpaces=spacesToRemove.includes(constants["a"]);spaceTargets=isUnsharedFromAllSpaces?"all":"".concat(spacesToRemove.length);text=!isUnsharedFromAllSpaces&&spacesToRemove.length===1?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareRemoveSuccessTextSingular",{defaultMessage:"'{object}' was removed from 1 space.",values:{object:meta.title}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareRemoveSuccessTextPlural",{defaultMessage:"'{object}' was removed from {spaceTargets} spaces.",values:{object:meta.title,spaceTargets:spaceTargets}});if(!isSharedToAllSpaces){toastNotifications.addSuccess({title:title,text:text})}case 18:onObjectUpdated();onClose();_context.next=26;break;case 22:_context.prev=22;_context.t0=_context["catch"](1);setShareInProgress(false);toastNotifications.addError(_context.t0,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.shareErrorTitle",{defaultMessage:"Error updating saved object"})});case 26:case"end":return _context.stop()}}),_callee,null,[[1,22]])})));return _startShare.apply(this,arguments)}const getFlyoutBody=()=>{if(isLoading){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)}const activeSpace=spaces.find(x=>x.isActiveSpace);const showShareWarning=spaces.length>1&&arraysAreEqual(currentNamespaces,[activeSpace.id]);return external_kbnSharedDeps_React_default.a.createElement(ShareToSpaceForm,{spaces:spaces,shareOptions:shareOptions,onUpdate:setShareOptions,showShareWarning:showShareWarning,canShareToAllSpaces:canShareToAllSpaces,makeCopy:()=>setShowMakeCopy(true)})};if(showMakeCopy){return external_kbnSharedDeps_React_default.a.createElement(CopySavedObjectsToSpaceFlyout,{onClose:onClose,savedObject:savedObject,spacesManager:spacesManager,toastNotifications:toastNotifications})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:onClose,maxWidth:500,"data-test-subj":"share-to-space-flyout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"m",type:"share"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.shareToSpaceFlyoutHeader",defaultMessage:"Share to space"})))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:savedObject.meta.icon||"apps"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,savedObject.meta.title)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),getFlyoutBody()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:()=>onClose(),"data-test-subj":"sts-cancel-button",disabled:shareInProgress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.shareToSpace.cancelButton",defaultMessage:"Cancel"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:()=>startShare(),"data-test-subj":"sts-initiate-button",disabled:!isSelectionChanged||shareInProgress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.shareToSpace.shareToSpacesButton",defaultMessage:"Save & close"}))))))};function share_saved_objects_to_space_action_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class share_saved_objects_to_space_action_ShareToSpaceSavedObjectsManagementAction extends savedObjectsManagement_public_["SavedObjectsManagementAction"]{constructor(spacesManager,notifications,getStartServices){super();this.spacesManager=spacesManager;this.notifications=notifications;this.getStartServices=getStartServices;share_saved_objects_to_space_action_defineProperty(this,"id","share_saved_objects_to_space");share_saved_objects_to_space_action_defineProperty(this,"euiAction",{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.actionTitle",{defaultMessage:"Share to space"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.shareToSpace.actionDescription",{defaultMessage:"Share this saved object to one or more spaces"}),icon:"share",type:"icon",available:object=>{const hasCapability=!this.actionContext||!!this.actionContext.capabilities.savedObjectsManagement.shareIntoSpace;return object.meta.namespaceType==="multiple"&&hasCapability},onClick:object=>{this.isDataChanged=false;this.start(object)}});share_saved_objects_to_space_action_defineProperty(this,"refreshOnFinish",()=>this.isDataChanged);share_saved_objects_to_space_action_defineProperty(this,"isDataChanged",false);share_saved_objects_to_space_action_defineProperty(this,"render",()=>{if(!this.record){throw new Error("No record available! `render()` was likely called before `start()`.")}return external_kbnSharedDeps_React_default.a.createElement(ContextWrapper,{getStartServices:this.getStartServices},external_kbnSharedDeps_React_default.a.createElement(ShareSavedObjectsToSpaceFlyout,{onClose:this.onClose,onObjectUpdated:()=>this.isDataChanged=true,savedObject:this.record,spacesManager:this.spacesManager,toastNotifications:this.notifications.toasts}))});share_saved_objects_to_space_action_defineProperty(this,"onClose",()=>{this.finish()})}}class share_saved_objects_to_space_service_ShareSavedObjectsToSpaceService{setup({spacesManager:spacesManager,savedObjectsManagementSetup:savedObjectsManagementSetup,notificationsSetup:notificationsSetup,getStartServices:getStartServices}){const action=new share_saved_objects_to_space_action_ShareToSpaceSavedObjectsManagementAction(spacesManager,notificationsSetup,getStartServices);savedObjectsManagementSetup.actions.register(action)}}function advanced_settings_subtitle_slicedToArray(arr,i){return advanced_settings_subtitle_arrayWithHoles(arr)||advanced_settings_subtitle_iterableToArrayLimit(arr,i)||advanced_settings_subtitle_unsupportedIterableToArray(arr,i)||advanced_settings_subtitle_nonIterableRest()}function advanced_settings_subtitle_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function advanced_settings_subtitle_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return advanced_settings_subtitle_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return advanced_settings_subtitle_arrayLikeToArray(o,minLen)}function advanced_settings_subtitle_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function advanced_settings_subtitle_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function advanced_settings_subtitle_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const AdvancedSettingsSubtitle=props=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=advanced_settings_subtitle_slicedToArray(_useState,2),activeSpace=_useState2[0],setActiveSpace=_useState2[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{props.getActiveSpace().then(space=>setActiveSpace(space))},[props]);if(!activeSpace)return null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"primary",iconType:"spacesApp",title:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.advancedSettingsSubtitle.applyingSettingsOnPageToSpaceDescription",defaultMessage:"The settings on this page apply to the {spaceName} space, unless otherwise specified.",values:{spaceName:external_kbnSharedDeps_React_default.a.createElement("strong",null,activeSpace.name)}}))}))};function advanced_settings_title_slicedToArray(arr,i){return advanced_settings_title_arrayWithHoles(arr)||advanced_settings_title_iterableToArrayLimit(arr,i)||advanced_settings_title_unsupportedIterableToArray(arr,i)||advanced_settings_title_nonIterableRest()}function advanced_settings_title_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function advanced_settings_title_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return advanced_settings_title_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return advanced_settings_title_arrayLikeToArray(o,minLen)}function advanced_settings_title_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function advanced_settings_title_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function advanced_settings_title_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const AdvancedSettingsTitle=props=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=advanced_settings_title_slicedToArray(_useState,2),activeSpace=_useState2[0],setActiveSpace=_useState2[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{props.getActiveSpace().then(space=>setActiveSpace(space))},[props]);if(!activeSpace)return null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",responsive:false,alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:activeSpace})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{marginLeft:"10px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"managementSettingsTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.advancedSettingsTitle.settingsTitle",defaultMessage:"Settings"})))))};class advanced_settings_service_AdvancedSettingsService{setup({getActiveSpace:getActiveSpace,componentRegistry:componentRegistry}){const PageTitle=()=>external_kbnSharedDeps_React_default.a.createElement(AdvancedSettingsTitle,{getActiveSpace:getActiveSpace});const SubTitle=()=>external_kbnSharedDeps_React_default.a.createElement(AdvancedSettingsSubtitle,{getActiveSpace:getActiveSpace});componentRegistry.register(componentRegistry.componentType.PAGE_TITLE_COMPONENT,PageTitle,true);componentRegistry.register(componentRegistry.componentType.PAGE_SUBTITLE_COMPONENT,SubTitle,true)}}var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(11);var confirm_delete_modal=__webpack_require__(114);function confirm_delete_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function confirm_delete_modal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){confirm_delete_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){confirm_delete_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function confirm_delete_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class confirm_delete_modal_ConfirmDeleteModalUI extends external_kbnSharedDeps_React_["Component"]{constructor(...args){var _this;super(...args);_this=this;confirm_delete_modal_defineProperty(this,"state",{confirmSpaceName:"",error:null,deleteInProgress:false,isDeletingCurrentSpace:false});confirm_delete_modal_defineProperty(this,"onSpaceNameChange",e=>{if(typeof this.state.error==="boolean"){this.setState({confirmSpaceName:e.target.value,error:e.target.value!==this.props.space.name})}else{this.setState({confirmSpaceName:e.target.value})}});confirm_delete_modal_defineProperty(this,"onConfirm",confirm_delete_modal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var needsRedirect,spacesManager;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(_this.state.confirmSpaceName===_this.props.space.name)){_context.next=10;break}needsRedirect=_this.state.isDeletingCurrentSpace;spacesManager=_this.props.spacesManager;_this.setState({deleteInProgress:true});_context.next=6;return _this.props.onConfirm();case 6:_this.setState({deleteInProgress:false});if(needsRedirect){spacesManager.redirectToSpaceSelector()}_context.next=11;break;case 10:_this.setState({error:true});case 11:case"end":return _context.stop()}}),_callee)}))))}componentDidMount(){isCurrentSpace(this.props.space,this.props.spacesManager).then(result=>{this.setState({isDeletingCurrentSpace:result})})}render(){const _this$props=this.props,space=_this$props.space,onCancel=_this$props.onCancel,intl=_this$props.intl;const isDeletingCurrentSpace=this.state.isDeletingCurrentSpace;let warning=null;if(isDeletingCurrentSpace){const name=external_kbnSharedDeps_React_default.a.createElement("span",null,"(",external_kbnSharedDeps_React_default.a.createElement("strong",null,space.name),")");warning=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmDeleteModal.redirectAfterDeletingCurrentSpaceWarningMessage",defaultMessage:"You are about to delete your current space {name}. You will be redirected to choose a different space if you continue.",values:{name:name}}))))}const modalProps={onClose:onCancel,className:"spcConfirmDeleteModal",initialFocus:'input[name="confirmDeleteSpaceInput"]'};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],modalProps,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],{"data-test-subj":"confirmModalTitleText"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmDeleteModal.confirmDeleteSpaceButtonLabel",defaultMessage:"Delete space {spaceName}",values:{spaceName:"'"+space.name+"'"}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{"data-test-subj":"confirmModalBodyText"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmDeleteModal.deletingSpaceWarningMessage",defaultMessage:"Deleting a space permanently removes the space and {allContents}. You can't undo this action.",values:{allContents:external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmDeleteModal.allContentsText",defaultMessage:"all of its contents"}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:intl.formatMessage({id:"xpack.spaces.management.confirmDeleteModal.confirmSpaceNameFormRowLabel",defaultMessage:"Confirm space name to delete"}),isInvalid:!!this.state.error,error:intl.formatMessage({id:"xpack.spaces.management.confirmDeleteModal.spaceNamesDoNoMatchErrorMessage",defaultMessage:"Space names do not match."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"data-test-subj":"deleteSpaceInput",name:"confirmDeleteSpaceInput",value:this.state.confirmSpaceName,onChange:this.onSpaceNameChange,disabled:this.state.deleteInProgress})),warning)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"confirmModalCancelButton",onClick:onCancel,isDisabled:this.state.deleteInProgress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmDeleteModal.cancelButtonLabel",defaultMessage:"Cancel"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"confirmModalConfirmButton",onClick:this.onConfirm,fill:true,color:"danger",isLoading:this.state.deleteInProgress},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmDeleteModal.deleteSpaceAndAllContentsButtonLabel",defaultMessage:" Delete space and all contents"})))))}}function isCurrentSpace(_x,_x2){return _isCurrentSpace.apply(this,arguments)}function _isCurrentSpace(){_isCurrentSpace=confirm_delete_modal_asyncToGenerator(regeneratorRuntime.mark((function _callee2(space,spacesManager){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.t0=space.id;_context2.next=3;return spacesManager.getActiveSpace();case 3:_context2.t1=_context2.sent.id;return _context2.abrupt("return",_context2.t0===_context2.t1);case 5:case"end":return _context2.stop()}}),_callee2)})));return _isCurrentSpace.apply(this,arguments)}const ConfirmDeleteModal=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(confirm_delete_modal_ConfirmDeleteModalUI);const SecureSpaceMessage=props=>{const rolesLinkTextAriaLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.secureSpaceMessage.rolesLinkTextAriaLabel",{defaultMessage:"Roles management page"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.secureSpaceMessage.howToAssignRoleToSpaceDescription",defaultMessage:"Want to assign a role to a space? Go to {rolesLink}.",values:{rolesLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"rolesManagementPage",href:props.getUrlForApp("management",{path:"security/roles"}),"aria-label":rolesLinkTextAriaLabel},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.secureSpaceMessage.rolesLinkText",defaultMessage:"Roles"}))}}))))};const UnauthorizedPrompt=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"spacesApp",iconColor:"danger",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.unauthorizedPrompt.permissionDeniedTitle",defaultMessage:"Permission denied"})),body:external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"permissionDeniedMessage"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.unauthorizedPrompt.permissionDeniedDescription",defaultMessage:"You don't have permission to manage spaces."}))});function getEnabledFeatures(features,space){return features.filter(feature=>!(space.disabledFeatures||[]).includes(feature.id))}function spaces_grid_page_extends(){spaces_grid_page_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return spaces_grid_page_extends.apply(this,arguments)}function spaces_grid_page_slicedToArray(arr,i){return spaces_grid_page_arrayWithHoles(arr)||spaces_grid_page_iterableToArrayLimit(arr,i)||spaces_grid_page_unsupportedIterableToArray(arr,i)||spaces_grid_page_nonIterableRest()}function spaces_grid_page_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function spaces_grid_page_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return spaces_grid_page_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return spaces_grid_page_arrayLikeToArray(o,minLen)}function spaces_grid_page_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function spaces_grid_page_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function spaces_grid_page_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function spaces_grid_page_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function spaces_grid_page_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){spaces_grid_page_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){spaces_grid_page_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function spaces_grid_page_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class spaces_grid_page_SpacesGridPage extends external_kbnSharedDeps_React_["Component"]{constructor(props){var _this;super(props);_this=this;spaces_grid_page_defineProperty(this,"getConfirmDeleteModal",()=>{if(!this.state.showConfirmDeleteModal||!this.state.selectedSpace){return null}const spacesManager=this.props.spacesManager;return external_kbnSharedDeps_React_default.a.createElement(ConfirmDeleteModal,{space:this.state.selectedSpace,spacesManager:spacesManager,onCancel:()=>{this.setState({showConfirmDeleteModal:false})},onConfirm:this.deleteSpace})});spaces_grid_page_defineProperty(this,"deleteSpace",spaces_grid_page_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var spacesManager,space,_ref2,_ref2$message,errorMessage,message;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:spacesManager=_this.props.spacesManager;space=_this.state.selectedSpace;if(space){_context.next=4;break}return _context.abrupt("return");case 4:_this.setState({showConfirmDeleteModal:false});_context.prev=5;_context.next=8;return spacesManager.deleteSpace(space);case 8:_context.next=15;break;case 10:_context.prev=10;_context.t0=_context["catch"](5);_ref2=_context.t0.data||_context.t0.body||{},_ref2$message=_ref2.message,errorMessage=_ref2$message===void 0?"":_ref2$message;_this.props.notifications.toasts.addDanger(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.errorDeletingSpaceErrorMessage",{defaultMessage:"Error deleting space: {errorMessage}",values:{errorMessage:errorMessage}}));return _context.abrupt("return");case 15:_this.loadGrid();message=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.spaceSuccessfullyDeletedNotificationMessage",{defaultMessage:'Deleted "{spaceName}" space.',values:{spaceName:space.name}});_this.props.notifications.toasts.addSuccess(message);case 18:case"end":return _context.stop()}}),_callee,null,[[5,10]])}))));spaces_grid_page_defineProperty(this,"loadGrid",spaces_grid_page_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this$props,spacesManager,getFeatures,notifications,getSpaces,_yield$Promise$all,_yield$Promise$all2,spaces,features;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,spacesManager=_this$props.spacesManager,getFeatures=_this$props.getFeatures,notifications=_this$props.notifications;_this.setState({loading:true,spaces:[],features:[]});getSpaces=spacesManager.getSpaces();_context2.prev=3;_context2.next=6;return Promise.all([getSpaces,getFeatures()]);case 6:_yield$Promise$all=_context2.sent;_yield$Promise$all2=spaces_grid_page_slicedToArray(_yield$Promise$all,2);spaces=_yield$Promise$all2[0];features=_yield$Promise$all2[1];_this.setState({loading:false,spaces:spaces,features:features});_context2.next=17;break;case 13:_context2.prev=13;_context2.t0=_context2["catch"](3);_this.setState({loading:false});notifications.toasts.addError(_context2.t0,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.errorTitle",{defaultMessage:"Error loading spaces"})});case 17:case"end":return _context2.stop()}}),_callee2,null,[[3,13]])}))));spaces_grid_page_defineProperty(this,"getEditSpacePath",space=>"edit/".concat(encodeURIComponent(space.id)));spaces_grid_page_defineProperty(this,"onDeleteSpaceClick",space=>{this.setState({selectedSpace:space,showConfirmDeleteModal:true})});this.state={spaces:[],features:[],loading:true,showConfirmDeleteModal:false,selectedSpace:null}}componentDidMount(){if(this.props.capabilities.spaces.manage){this.loadGrid()}}render(){return external_kbnSharedDeps_React_default.a.createElement("div",{className:"spcGridPage","data-test-subj":"spaces-grid-page"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{horizontalPosition:"center"},this.getPageContent()),this.props.securityEnabled&&external_kbnSharedDeps_React_default.a.createElement(SecureSpaceMessage,{getUrlForApp:this.props.getUrlForApp}),this.getConfirmDeleteModal())}getPageContent(){if(!this.props.capabilities.spaces.manage){return external_kbnSharedDeps_React_default.a.createElement(UnauthorizedPrompt,null)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spacesGridPage.spacesTitle",defaultMessage:"Spaces"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,getSpacesFeatureDescription()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},this.getPrimaryActionButton())),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{itemId:"id",items:this.state.spaces,tableCaption:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.tableCaption",{defaultMessage:"Kibana spaces"}),rowHeader:"name",columns:this.getColumnConfig(),hasActions:true,pagination:true,sorting:true,search:{box:{placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.searchPlaceholder",{defaultMessage:"Search"})}},loading:this.state.loading,message:this.state.loading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spacesGridPage.loadingTitle",defaultMessage:"loading…"}):undefined}))}getPrimaryActionButton(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],spaces_grid_page_extends({fill:true},Object(kibanaReact_public_["reactRouterNavigate"])(this.props.history,"/create"),{"data-test-subj":"createSpace"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spacesGridPage.createSpaceButtonLabel",defaultMessage:"Create a space"}))}getColumnConfig(){return[{field:"initials",name:"",width:"50px",render:(value,record)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],Object(kibanaReact_public_["reactRouterNavigate"])(this.props.history,this.getEditSpacePath(record)),external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:record,size:"s"}))},{field:"name",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.spaceColumnName",{defaultMessage:"Space"}),sortable:true,render:(value,record)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],Object(kibanaReact_public_["reactRouterNavigate"])(this.props.history,this.getEditSpacePath(record)),value)},{field:"description",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.descriptionColumnName",{defaultMessage:"Description"}),sortable:true},{field:"disabledFeatures",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.featuresColumnName",{defaultMessage:"Features"}),sortable:space=>getEnabledFeatures(this.state.features,space).length,render:(disabledFeatures,record)=>{const enabledFeatureCount=getEnabledFeatures(this.state.features,record).length;if(enabledFeatureCount===this.state.features.length){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spacesGridPage.allFeaturesEnabled",defaultMessage:"All features visible"})}if(enabledFeatureCount===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spacesGridPage.noFeaturesEnabled",defaultMessage:"No features visible"}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spacesGridPage.someFeaturesEnabled",defaultMessage:"{enabledFeatureCount} / {totalFeatureCount} features visible",values:{enabledFeatureCount:enabledFeatureCount,totalFeatureCount:this.state.features.length}})}},{field:"id",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.identifierColumnName",{defaultMessage:"Identifier"}),sortable:true,render(id){if(id===constants["b"]){return""}return id}},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.actionsColumnName",{defaultMessage:"Actions"}),actions:[{render:record=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],spaces_grid_page_extends({"data-test-subj":"".concat(record.name,"-editSpace"),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.editSpaceActionName",{defaultMessage:"Edit {spaceName}.",values:{spaceName:record.name}}),color:"primary",iconType:"pencil"},Object(kibanaReact_public_["reactRouterNavigate"])(this.props.history,this.getEditSpacePath(record))))},{available:record=>!Object(common["isReservedSpace"])(record),render:record=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"data-test-subj":"".concat(record.name,"-deleteSpace"),"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.spacesGridPage.deleteActionName",{defaultMessage:"Delete {spaceName}.",values:{spaceName:record.name}}),color:"danger",iconType:"trash",onClick:()=>this.onDeleteSpaceClick(record)})}]}]}}function toSpaceIdentifier(value=""){return value.toLowerCase().replace(/[^a-z0-9_]/g,"-")}function isValidSpaceIdentifier(value=""){return value===toSpaceIdentifier(value)}var is_reserved_space=__webpack_require__(14);function validate_space_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class validate_space_SpaceValidator{constructor(options={}){validate_space_defineProperty(this,"shouldValidate",void 0);this.shouldValidate=options.shouldValidate||false}enableValidation(){this.shouldValidate=true}disableValidation(){this.shouldValidate=false}validateSpaceName(space){if(!this.shouldValidate){return valid()}if(!space.name||!space.name.trim()){return invalid(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.validateSpace.requiredNameErrorMessage",{defaultMessage:"Name is required."}))}if(space.name.length>1024){return invalid(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.validateSpace.nameMaxLengthErrorMessage",{defaultMessage:"Name must not exceed 1024 characters."}))}return valid()}validateSpaceDescription(space){if(!this.shouldValidate){return valid()}if(space.description&&space.description.length>2e3){return invalid(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.validateSpace.describeMaxLengthErrorMessage",{defaultMessage:"Description must not exceed 2000 characters."}))}return valid()}validateURLIdentifier(space){if(!this.shouldValidate){return valid()}if(Object(is_reserved_space["a"])(space)){return valid()}if(!space.id){return invalid(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.validateSpace.urlIdentifierRequiredErrorMessage",{defaultMessage:"URL identifier is required."}))}if(!isValidSpaceIdentifier(space.id)){return invalid(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.validateSpace.urlIdentifierAllowedCharactersErrorMessage",{defaultMessage:'URL identifier can only contain a-z, 0-9, and the characters "_" and "-".'}))}return valid()}validateEnabledFeatures(space){return valid()}validateForSave(space){const _this$validateSpaceNa=this.validateSpaceName(space),isNameInvalid=_this$validateSpaceNa.isInvalid;const _this$validateSpaceDe=this.validateSpaceDescription(space),isDescriptionInvalid=_this$validateSpaceDe.isInvalid;const _this$validateURLIden=this.validateURLIdentifier(space),isIdentifierInvalid=_this$validateURLIden.isInvalid;const _this$validateEnabled=this.validateEnabledFeatures(space),areFeaturesInvalid=_this$validateEnabled.isInvalid;if(isNameInvalid||isDescriptionInvalid||isIdentifierInvalid||areFeaturesInvalid){return invalid()}return valid()}}function invalid(error=""){return{isInvalid:true,error:error}}function valid(){return{isInvalid:false}}const ConfirmAlterActiveSpaceModalUI=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{onConfirm:props.onConfirm,onCancel:props.onCancel,title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmAlterActiveSpaceModal.title",defaultMessage:"Confirm update space"}),defaultFocusedButton:"confirm",cancelButtonText:props.intl.formatMessage({id:"xpack.spaces.management.confirmAlterActiveSpaceModal.cancelButton",defaultMessage:"Cancel"}),confirmButtonText:props.intl.formatMessage({id:"xpack.spaces.management.confirmAlterActiveSpaceModal.updateSpaceButton",defaultMessage:"Update space"})},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.confirmAlterActiveSpaceModal.reloadWarningMessage",defaultMessage:"You have updated the visible features in this space. Your page will reload after saving."}))));const ConfirmAlterActiveSpaceModal=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(ConfirmAlterActiveSpaceModalUI);function section_panel_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class section_panel_SectionPanel extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);section_panel_defineProperty(this,"getTitle",()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"baseline",gutterSize:"s",responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,this.props.iconType&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:this.props.iconType,size:"xl",className:"spcSectionPanel__collapsiblePanelLogo"})," "),this.props.title)))));section_panel_defineProperty(this,"getForm",()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),this.props.children))}render(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,this.getTitle(),this.getForm())}}var base64_js=__webpack_require__(21);const imageTypes=["image/svg+xml","image/jpeg","image/png","image/gif"];function encode(data,type="text/plain"){if(FileReader){return new Promise((resolve,reject)=>{const reader=new FileReader;reader.onloadend=()=>resolve(reader.result);reader.onerror=err=>reject(err);reader.readAsDataURL(data)})}return Promise.resolve("data:".concat(type,";base64,").concat(Object(base64_js["fromByteArray"])(data)))}function customize_space_avatar_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function customize_space_avatar_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){customize_space_avatar_ownKeys(Object(source),true).forEach((function(key){customize_space_avatar_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{customize_space_avatar_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function customize_space_avatar_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class customize_space_avatar_CustomizeSpaceAvatar extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);customize_space_avatar_defineProperty(this,"initialsRef",null);customize_space_avatar_defineProperty(this,"handleImageUpload",imgUrl=>{const thisInstance=this;const image=new Image;image.addEventListener("load",(function(){const MAX_IMAGE_SIZE=64;const imgDimx=image.width;const imgDimy=image.height;if(imgDimx<=MAX_IMAGE_SIZE&&imgDimy<=MAX_IMAGE_SIZE){thisInstance.storeImageChanges(imgUrl)}else{const imageCanvas=document.createElement("canvas");const canvasContext=imageCanvas.getContext("2d");if(imgDimx>=imgDimy){imageCanvas.width=MAX_IMAGE_SIZE;imageCanvas.height=Math.floor(imgDimy*MAX_IMAGE_SIZE/imgDimx);if(canvasContext){canvasContext.drawImage(image,0,0,imageCanvas.width,imageCanvas.height);const resizedImageUrl=imageCanvas.toDataURL();thisInstance.storeImageChanges(resizedImageUrl)}}else{imageCanvas.height=MAX_IMAGE_SIZE;imageCanvas.width=Math.floor(imgDimx*MAX_IMAGE_SIZE/imgDimy);if(canvasContext){canvasContext.drawImage(image,0,0,imageCanvas.width,imageCanvas.height);const resizedImageUrl=imageCanvas.toDataURL();thisInstance.storeImageChanges(resizedImageUrl)}}}}),false);image.src=imgUrl});customize_space_avatar_defineProperty(this,"onFileUpload",files=>{if(files==null)return;const file=files[0];if(imageTypes.indexOf(file.type)>-1){encode(file).then(dataurl=>this.handleImageUpload(dataurl))}});customize_space_avatar_defineProperty(this,"initialsInputRef",ref=>{if(ref){this.initialsRef=ref;this.initialsRef.addEventListener("focus",this.onInitialsFocus);this.initialsRef.addEventListener("blur",this.onInitialsBlur)}else{if(this.initialsRef){this.initialsRef.removeEventListener("focus",this.onInitialsFocus);this.initialsRef.removeEventListener("blur",this.onInitialsBlur);this.initialsRef=null}}});customize_space_avatar_defineProperty(this,"onInitialsFocus",()=>{this.setState({initialsHasFocus:true,pendingInitials:Object(space_avatar["d"])(this.props.space)})});customize_space_avatar_defineProperty(this,"onInitialsBlur",()=>{this.setState({initialsHasFocus:false,pendingInitials:null})});customize_space_avatar_defineProperty(this,"onInitialsChange",e=>{const initials=(e.target.value||"").substring(0,common["MAX_SPACE_INITIALS"]);this.setState({pendingInitials:initials});this.props.onChange(customize_space_avatar_objectSpread(customize_space_avatar_objectSpread({},this.props.space),{},{initials:initials}))});customize_space_avatar_defineProperty(this,"onColorChange",color=>{this.props.onChange(customize_space_avatar_objectSpread(customize_space_avatar_objectSpread({},this.props.space),{},{color:color}))});this.state={initialsHasFocus:false}}storeImageChanges(imageUrl){this.props.onChange(customize_space_avatar_objectSpread(customize_space_avatar_objectSpread({},this.props.space),{},{imageUrl:imageUrl}))}render(){const space=this.props.space;const _this$state=this.state,initialsHasFocus=_this$state.initialsHasFocus,pendingInitials=_this$state.pendingInitials;const spaceColor=Object(space_avatar["b"])(space);const isInvalidSpaceColor=!Object(external_kbnSharedDeps_ElasticEui_["isValidHex"])(spaceColor)&&spaceColor!=="";return external_kbnSharedDeps_React_default.a.createElement("form",{onSubmit:()=>false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.customizeSpaceAvatar.initialItemsFormRowLabel",{defaultMessage:"Initials (2 max)"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{inputRef:this.initialsInputRef,"data-test-subj":"spaceLetterInitial",name:"spaceInitials",value:initialsHasFocus?pendingInitials||"":Object(space_avatar["d"])(space),onChange:this.onInitialsChange,disabled:this.props.space.imageUrl&&this.props.space.imageUrl!==""?true:false})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.customizeSpaceAvatar.colorFormRowLabel",{defaultMessage:"Color"}),isInvalid:isInvalidSpaceColor},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiColorPicker"],{color:spaceColor,onChange:this.onColorChange,isInvalid:isInvalidSpaceColor})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this.filePickerOrImage())}removeImageUrl(){this.props.onChange(customize_space_avatar_objectSpread(customize_space_avatar_objectSpread({},this.props.space),{},{imageUrl:""}))}filePickerOrImage(){if(!this.props.space.imageUrl){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.customizeSpaceAvatar.imageUrl",{defaultMessage:"Custom image"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilePicker"],{display:"default","data-test-subj":"uploadCustomImageFile",initialPromptText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.customizeSpaceAvatar.selectImageUrl",{defaultMessage:"Select image file"}),onChange:this.onFileUpload,accept:imageTypes.join(",")}))}else{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:()=>this.removeImageUrl(),color:"danger",iconType:"trash"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.customizeSpaceAvatar.removeImage",{defaultMessage:"Remove custom image"})))}}}function space_identifier_extends(){space_identifier_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return space_identifier_extends.apply(this,arguments)}function space_identifier_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class space_identifier_SpaceIdentifierUI extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);space_identifier_defineProperty(this,"textFieldRef",null);space_identifier_defineProperty(this,"getLabel",()=>{if(!this.props.editable){return external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spaceIdentifier.urlIdentifierTitle",defaultMessage:"URL identifier"}))}const editLinkText=this.state.editing?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spaceIdentifier.resetSpaceNameLinkText",defaultMessage:"[reset]"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spaceIdentifier.customizeSpaceLinkText",defaultMessage:"[customize]"});const editLinkLabel=this.state.editing?this.props.intl.formatMessage({id:"xpack.spaces.management.spaceIdentifier.resetSpaceNameLinkLabel",defaultMessage:"Reset the URL identifier"}):this.props.intl.formatMessage({id:"xpack.spaces.management.spaceIdentifier.customizeSpaceNameLinkLabel",defaultMessage:"Customize the URL identifier"});return external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spaceIdentifier.urlIdentifierLabel",defaultMessage:"URL identifier "}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"CustomizeOrReset",onClick:this.onEditClick,"aria-label":editLinkLabel},editLinkText))});space_identifier_defineProperty(this,"getHelpText",(identifier=this.props.intl.formatMessage({id:"xpack.spaces.management.spaceIdentifier.emptySpaceIdentifierText",defaultMessage:"awesome-space"}))=>external_kbnSharedDeps_React_default.a.createElement("p",{className:"eui-textBreakAll"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.spaceIdentifier.kibanaURLForSpaceIdentifierDescription",defaultMessage:"Example: https://my-kibana.example{spaceIdentifier}/app/kibana.",values:{spaceIdentifier:external_kbnSharedDeps_React_default.a.createElement("strong",null,"/s/",identifier)}})));space_identifier_defineProperty(this,"onEditClick",()=>{const currentlyEditing=this.state.editing;if(currentlyEditing){const resetIdentifier=toSpaceIdentifier(this.props.space.name);this.setState({editing:false});this.props.onChange(resetIdentifier)}else{this.setState({editing:true},()=>{if(this.textFieldRef){this.textFieldRef.focus()}})}});space_identifier_defineProperty(this,"onChange",e=>{if(!this.state.editing){return}this.props.onChange(e.target.value)});this.state={editing:false}}render(){const intl=this.props.intl;const _this$props$space$id=this.props.space.id,id=_this$props$space$id===void 0?"":_this$props$space$id;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],space_identifier_extends({label:this.getLabel(),helpText:this.getHelpText(id)},this.props.validator.validateURLIdentifier(this.props.space),{fullWidth:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{readOnly:!this.state.editing,"data-test-subj":"spaceURLDisplay",placeholder:this.state.editing||!this.props.editable?undefined:intl.formatMessage({id:"xpack.spaces.management.spaceIdentifier.urlIdentifierGeneratedFromSpaceNameTooltip",defaultMessage:"awesome-space"}),value:id,onChange:this.onChange,inputRef:ref=>this.textFieldRef=ref,fullWidth:true})))}}const SpaceIdentifier=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(space_identifier_SpaceIdentifierUI);function customize_space_extends(){customize_space_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return customize_space_extends.apply(this,arguments)}function customize_space_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function customize_space_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){customize_space_ownKeys(Object(source),true).forEach((function(key){customize_space_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{customize_space_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function customize_space_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class customize_space_CustomizeSpace extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);customize_space_defineProperty(this,"state",{customizingAvatar:false,usingCustomIdentifier:false});customize_space_defineProperty(this,"togglePopover",()=>{this.setState({customizingAvatar:!this.state.customizingAvatar})});customize_space_defineProperty(this,"closePopover",()=>{this.setState({customizingAvatar:false})});customize_space_defineProperty(this,"getPanelDescription",()=>this.props.editingExistingSpace?external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.manageSpacePage.customizeSpacePanelUrlIdentifierNotEditable",defaultMessage:"The url identifier cannot be changed."})):external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.manageSpacePage.customizeSpacePanelUrlIdentifierEditable",defaultMessage:"Note the URL identifier. You cannot change it after you create the space."})));customize_space_defineProperty(this,"onNameChange",e=>{if(!this.props.space){return}const canUpdateId=!this.props.editingExistingSpace&&!this.state.usingCustomIdentifier;let id=this.props.space.id;if(canUpdateId){id=toSpaceIdentifier(e.target.value)}this.props.onChange(customize_space_objectSpread(customize_space_objectSpread({},this.props.space),{},{name:e.target.value,id:id}))});customize_space_defineProperty(this,"onDescriptionChange",e=>{this.props.onChange(customize_space_objectSpread(customize_space_objectSpread({},this.props.space),{},{description:e.target.value}))});customize_space_defineProperty(this,"onSpaceIdentifierChange",updatedIdentifier=>{const usingCustomIdentifier=updatedIdentifier!==toSpaceIdentifier(this.props.space.name);this.setState({usingCustomIdentifier:usingCustomIdentifier});this.props.onChange(customize_space_objectSpread(customize_space_objectSpread({},this.props.space),{},{id:toSpaceIdentifier(updatedIdentifier)}))});customize_space_defineProperty(this,"onAvatarChange",space=>{this.props.onChange(space)})}render(){const _this$props=this.props,validator=_this$props.validator,editingExistingSpace=_this$props.editingExistingSpace;const _this$props$space=this.props.space,_this$props$space$nam=_this$props$space.name,name=_this$props$space$nam===void 0?"":_this$props$space$nam,_this$props$space$des=_this$props$space.description,description=_this$props$space$des===void 0?"":_this$props$space$des;const panelTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.customizeSpaceTitle",{defaultMessage:"Customize your space"});const extraPopoverProps={initialFocus:'input[name="spaceInitials"]'};return external_kbnSharedDeps_React_default.a.createElement(section_panel_SectionPanel,{title:panelTitle,description:panelTitle},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.manageSpacePage.customizeSpacePanelDescription",defaultMessage:"Name your space and customize its avatar."}))),description:this.getPanelDescription(),fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],customize_space_extends({label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.nameFormRowLabel",{defaultMessage:"Name"})},validator.validateSpaceName(this.props.space),{fullWidth:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{name:"name","data-test-subj":"addSpaceName",placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.awesomeSpacePlaceholder",{defaultMessage:"Awesome space"}),value:name,onChange:this.onNameChange,fullWidth:true})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),this.props.space&&Object(common["isReservedSpace"])(this.props.space)?null:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(SpaceIdentifier,{space:this.props.space,editable:!editingExistingSpace,onChange:this.onSpaceIdentifierChange,validator:validator})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],customize_space_extends({"data-test-subj":"optionalDescription",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.spaceDescriptionFormRowLabel",{defaultMessage:"Description (optional)"}),helpText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.spaceDescriptionHelpText",{defaultMessage:"The description appears on the Space selection screen."})},validator.validateSpaceDescription(this.props.space),{fullWidth:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextArea"],{"data-test-subj":"descriptionSpaceText",name:"description",value:description,onChange:this.onDescriptionChange,fullWidth:true,rows:2})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.avatarFormRowLabel",{defaultMessage:"Avatar"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],customize_space_extends({id:"customizeAvatarPopover",button:external_kbnSharedDeps_React_default.a.createElement("button",{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.clickToCustomizeTooltip",{defaultMessage:"Click to customize this space avatar"}),onClick:this.togglePopover},external_kbnSharedDeps_React_default.a.createElement(space_avatar["a"],{space:this.props.space,size:"l"})),closePopover:this.closePopover},extraPopoverProps,{ownFocus:true,isOpen:this.state.customizingAvatar}),external_kbnSharedDeps_React_default.a.createElement("div",{style:{maxWidth:240}},external_kbnSharedDeps_React_default.a.createElement(customize_space_avatar_CustomizeSpaceAvatar,{space:this.props.space,onChange:this.onAvatarChange}))))))}}function delete_spaces_button_extends(){delete_spaces_button_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return delete_spaces_button_extends.apply(this,arguments)}function delete_spaces_button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function delete_spaces_button_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){delete_spaces_button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){delete_spaces_button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function delete_spaces_button_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class delete_spaces_button_DeleteSpacesButton extends external_kbnSharedDeps_React_["Component"]{constructor(...args){var _this;super(...args);_this=this;delete_spaces_button_defineProperty(this,"state",{showConfirmDeleteModal:false,showConfirmRedirectModal:false});delete_spaces_button_defineProperty(this,"onDeleteClick",()=>{this.setState({showConfirmDeleteModal:true})});delete_spaces_button_defineProperty(this,"getConfirmDeleteModal",()=>{if(!this.state.showConfirmDeleteModal){return null}const spacesManager=this.props.spacesManager;return external_kbnSharedDeps_React_default.a.createElement(ConfirmDeleteModal,{space:this.props.space,spacesManager:spacesManager,onCancel:()=>{this.setState({showConfirmDeleteModal:false})},onConfirm:this.deleteSpaces})});delete_spaces_button_defineProperty(this,"deleteSpaces",delete_spaces_button_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$props,spacesManager,space,_ref2,_ref2$message,errorMessage,message;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this$props=_this.props,spacesManager=_this$props.spacesManager,space=_this$props.space;_this.setState({showConfirmDeleteModal:false});_context.prev=2;_context.next=5;return spacesManager.deleteSpace(space);case 5:_context.next=12;break;case 7:_context.prev=7;_context.t0=_context["catch"](2);_ref2=_context.t0.data||_context.t0.body||{},_ref2$message=_ref2.message,errorMessage=_ref2$message===void 0?"":_ref2$message;_this.props.notifications.toasts.addDanger(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.deleteSpacesButton.deleteSpaceErrorTitle",{defaultMessage:"Error deleting space: {errorMessage}",values:{errorMessage:errorMessage}}));return _context.abrupt("return");case 12:message=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.deleteSpacesButton.spaceSuccessfullyDeletedNotificationMessage",{defaultMessage:"Deleted {spaceName} space.",values:{spaceName:space.name}});_this.props.notifications.toasts.addSuccess(message);if(_this.props.onDelete){_this.props.onDelete()}case 15:case"end":return _context.stop()}}),_callee,null,[[2,7]])}))))}render(){const buttonText=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.deleteSpacesButton.deleteSpaceButtonLabel",defaultMessage:"Delete space"});let ButtonComponent=external_kbnSharedDeps_ElasticEui_["EuiButton"];let extraProps;if(this.props.style==="icon"){ButtonComponent=external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"];extraProps={iconType:"trash"}}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(ButtonComponent,delete_spaces_button_extends({color:"danger",onClick:this.onDeleteClick,"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.deleteSpacesButton.deleteSpaceAriaLabel",{defaultMessage:"Delete this space"})},extraProps),buttonText),this.getConfirmDeleteModal())}}var feature_table=__webpack_require__(123);function feature_table_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function feature_table_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){feature_table_ownKeys(Object(source),true).forEach((function(key){feature_table_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{feature_table_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function feature_table_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class feature_table_FeatureTable extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);feature_table_defineProperty(this,"featureCategories",new Map);feature_table_defineProperty(this,"onChange",featureId=>e=>{const updatedSpace=feature_table_objectSpread({},this.props.space);let disabledFeatures=updatedSpace.disabledFeatures||[];const isFeatureEnabled=e.target.checked;if(isFeatureEnabled){disabledFeatures=disabledFeatures.filter(feature=>feature!==featureId)}else{disabledFeatures=external_kbnSharedDeps_Lodash_default.a.uniq([...disabledFeatures,featureId])}updatedSpace.disabledFeatures=disabledFeatures;this.props.onChange(updatedSpace)});feature_table_defineProperty(this,"getAllFeatureIds",()=>[...this.featureCategories.values()].flat().map(feature=>feature.id));feature_table_defineProperty(this,"hideAll",()=>{this.setFeaturesVisibility(this.getAllFeatureIds(),false)});feature_table_defineProperty(this,"showAll",()=>{this.setFeaturesVisibility(this.getAllFeatureIds(),true)});feature_table_defineProperty(this,"setFeaturesVisibility",(features,visible)=>{const updatedSpace=feature_table_objectSpread({},this.props.space);if(visible){var _updatedSpace$disable;updatedSpace.disabledFeatures=((_updatedSpace$disable=updatedSpace.disabledFeatures)!==null&&_updatedSpace$disable!==void 0?_updatedSpace$disable:[]).filter(df=>!features.includes(df))}else{var _updatedSpace$disable2;updatedSpace.disabledFeatures=Array.from(new Set([...(_updatedSpace$disable2=updatedSpace.disabledFeatures)!==null&&_updatedSpace$disable2!==void 0?_updatedSpace$disable2:[],...features]))}this.props.onChange(updatedSpace)});feature_table_defineProperty(this,"getCategoryHelpText",category=>{if(category.id==="management"){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.managementCategoryHelpText",{defaultMessage:"Access to Stack Management is determined by your privileges, and cannot be hidden by Spaces."})}});props.features.forEach(feature=>{if(!this.featureCategories.has(feature.category.id)){this.featureCategories.set(feature.category.id,[])}this.featureCategories.get(feature.category.id).push(feature)})}render(){const space=this.props.space;const accordions=[];this.featureCategories.forEach(featuresInCategory=>{var _category$order;const category=featuresInCategory[0].category;const featureCount=featuresInCategory.length;const enabledCount=getEnabledFeatures(featuresInCategory,space).length;const canExpandCategory=featuresInCategory.length>1;const checkboxProps={id:"featureCategoryCheckbox_".concat(category.id),indeterminate:enabledCount>0&&enabledCount<featureCount,checked:featureCount===enabledCount,["aria-label"]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.enabledFeatures.featureCategoryButtonLabel",{defaultMessage:"Category toggle"}),onClick:e=>{e.stopPropagation()},onChange:e=>{this.setFeaturesVisibility(featuresInCategory.map(f=>f.id),e.target.checked)}};const buttonContent=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{"data-test-subj":"featureCategoryButton_".concat(category.id),alignItems:"center",responsive:false,gutterSize:"m",onClick:()=>{if(!canExpandCategory){const isChecked=enabledCount>0;this.setFeaturesVisibility(featuresInCategory.map(f=>f.id),!isChecked)}}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],checkboxProps)),category.euiIconType?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"m",type:category.euiIconType})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",{className:"eui-displayInlineBlock"},category.label))));const label=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.featureAccordionSwitchLabel",{defaultMessage:"{enabledCount} / {featureCount} features visible",values:{enabledCount:enabledCount,featureCount:featureCount}});const extraAction=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s","aria-hidden":"true",color:"subdued"},label);const helpText=this.getCategoryHelpText(category);const accordion=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"featureCategory_".concat(category.id),"data-test-subj":"featureCategory_".concat(category.id),key:category.id,arrowDisplay:canExpandCategory?"right":"none",forceState:canExpandCategory?undefined:"closed",buttonContent:buttonContent,extraAction:canExpandCategory?extraAction:undefined},external_kbnSharedDeps_React_default.a.createElement("div",{className:"spcFeatureTableAccordionContent"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),helpText&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{iconType:"iInCircle",size:"s"},helpText),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"})),featuresInCategory.map(feature=>{const featureChecked=!(space.disabledFeatures&&space.disabledFeatures.includes(feature.id));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{key:"".concat(feature.id,"-toggle")},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{id:"featureCheckbox_".concat(feature.id),"data-test-subj":"featureCheckbox_".concat(feature.id),checked:featureChecked,onChange:this.onChange(feature.id),label:feature.name})))})));accordions.push({order:(_category$order=category.order)!==null&&_category$order!==void 0?_category$order:Number.MAX_SAFE_INTEGER,element:accordion})});accordions.sort((a1,a2)=>a1.order-a2.order);const featureCount=this.props.features.length;const enabledCount=getEnabledFeatures(this.props.features,this.props.space).length;const controls=[];if(enabledCount<featureCount){controls.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>this.showAll(),"data-test-subj":"showAllFeaturesLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.selectAllFeaturesLink",{defaultMessage:"Select all"}))))}if(enabledCount>0){controls.push(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>this.hideAll(),"data-test-subj":"hideAllFeaturesLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.deselectAllFeaturesLink",{defaultMessage:"Deselect all"}))))}return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("b",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.featureVisibilityTitle",{defaultMessage:"Feature visibility"})))),controls.map((control,idx)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,key:idx},control))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),accordions.flatMap((a,idx)=>[a.element,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{key:"accordion-hr-".concat(idx),margin:"m"})]))}}function enabled_features_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class enabled_features_EnabledFeatures extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);enabled_features_defineProperty(this,"getPanelTitle",()=>{const featureCount=this.props.features.length;const enabledCount=getEnabledFeatures(this.props.features,this.props.space).length;let details=null;if(enabledCount===featureCount){details=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",style:{display:"inline-block"}},external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.allFeaturesEnabledMessage",defaultMessage:"(all features visible)"})))}else if(enabledCount===0){details=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"danger",size:"s",style:{display:"inline-block"}},external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.noFeaturesEnabledMessage",defaultMessage:"(no features visible)"})))}else{details=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",style:{display:"inline-block"}},external_kbnSharedDeps_React_default.a.createElement("em",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.someFeaturesEnabledMessage",defaultMessage:"({enabledCount} / {featureCount} features visible)",values:{enabledCount:enabledCount,featureCount:featureCount}})))}return external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.enabledFeaturesSectionMessage",defaultMessage:"Features"})," ",details)});enabled_features_defineProperty(this,"getDescription",()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.notASecurityMechanismMessage",defaultMessage:"The feature is hidden in the UI, but is not disabled."})),this.props.securityEnabled&&external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.goToRolesLink",defaultMessage:"If you wish to secure access to features, please {manageSecurityRoles}.",values:{manageSecurityRoles:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"goToRoles",href:this.props.getUrlForApp("management",{path:"security/roles"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.rolesLinkText",defaultMessage:"manage security roles"}))}})))))}render(){const description=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.customizeVisibleFeatures",{defaultMessage:"Customize visible features"});return external_kbnSharedDeps_React_default.a.createElement(section_panel_SectionPanel,{title:this.getPanelTitle(),description:description,"data-test-subj":"enabled-features-panel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.enabledSpaceFeatures.enableFeaturesInSpaceMessage",defaultMessage:"Set feature visibility for this space"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),this.getDescription()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(feature_table_FeatureTable,{features:this.props.features,space:this.props.space,onChange:this.props.onChange}))))}}const ReservedSpaceBadge=props=>{const space=props.space;if(space&&Object(common["isReservedSpace"])(space)){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.reversedSpaceBadge.reversedSpacesCanBePartiallyModifiedTooltip",defaultMessage:"Reserved spaces are built-in and can only be partially modified."})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"warning",iconType:"questionInCircle",iconSide:"right"},"Reserved space"))}return null};function manage_space_page_slicedToArray(arr,i){return manage_space_page_arrayWithHoles(arr)||manage_space_page_iterableToArrayLimit(arr,i)||manage_space_page_unsupportedIterableToArray(arr,i)||manage_space_page_nonIterableRest()}function manage_space_page_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function manage_space_page_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return manage_space_page_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return manage_space_page_arrayLikeToArray(o,minLen)}function manage_space_page_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function manage_space_page_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function manage_space_page_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function manage_space_page_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function manage_space_page_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){manage_space_page_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){manage_space_page_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function manage_space_page_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class manage_space_page_ManageSpacePage extends external_kbnSharedDeps_React_["Component"]{constructor(props){var _this;super(props);_this=this;manage_space_page_defineProperty(this,"validator",void 0);manage_space_page_defineProperty(this,"getLoadingIndicator",()=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h1",null,"Loading..."))));manage_space_page_defineProperty(this,"getForm",()=>{if(!this.props.capabilities.spaces.manage){return external_kbnSharedDeps_React_default.a.createElement(UnauthorizedPrompt,null)}const showAlteringActiveSpaceDialog=this.state.showAlteringActiveSpaceDialog;return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"spaces-edit-page"},this.getFormHeading(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.manageSpacePage.manageDescription",defaultMessage:"Organize your saved objects into meaningful categories."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(customize_space_CustomizeSpace,{space:this.state.space,onChange:this.onSpaceChange,editingExistingSpace:this.editingExistingSpace(),validator:this.validator}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(enabled_features_EnabledFeatures,{space:this.state.space,features:this.state.features,onChange:this.onSpaceChange,getUrlForApp:this.props.getUrlForApp,securityEnabled:this.props.securityEnabled}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),this.getFormButtons(),showAlteringActiveSpaceDialog&&external_kbnSharedDeps_React_default.a.createElement(ConfirmAlterActiveSpaceModal,{onConfirm:()=>this.performSave(true),onCancel:()=>{this.setState({showAlteringActiveSpaceDialog:false})}}))});manage_space_page_defineProperty(this,"getFormHeading",()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",{className:"eui-displayInlineBlock"},this.getTitle()))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(ReservedSpaceBadge,{space:this.state.space}))));manage_space_page_defineProperty(this,"getTitle",()=>{if(this.editingExistingSpace()){return"Edit space"}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.spaces.management.manageSpacePage.createSpaceTitle",defaultMessage:"Create a space"})});manage_space_page_defineProperty(this,"maybeGetSecureSpacesMessage",()=>{if(this.editingExistingSpace()&&this.props.securityEnabled){return external_kbnSharedDeps_React_default.a.createElement(SecureSpaceMessage,{getUrlForApp:this.props.getUrlForApp})}return null});manage_space_page_defineProperty(this,"getFormButtons",()=>{const createSpaceText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.createSpaceButton",{defaultMessage:"Create space"});const updateSpaceText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.updateSpaceButton",{defaultMessage:"Update space"});const cancelButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.cancelSpaceButton",{defaultMessage:"Cancel"});const saveText=this.editingExistingSpace()?updateSpaceText:createSpaceText;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:this.saveSpace,"data-test-subj":"save-space-button",isLoading:this.state.saveInProgress},saveText)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:this.backToSpacesList,"data-test-subj":"cancel-space-button"},cancelButtonText)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true}),this.getActionButton())});manage_space_page_defineProperty(this,"getActionButton",()=>{if(this.state.space&&this.editingExistingSpace()&&!Object(common["isReservedSpace"])(this.state.space)){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(delete_spaces_button_DeleteSpacesButton,{"data-test-subj":"delete-space-button",space:this.state.space,spacesManager:this.props.spacesManager,onDelete:this.backToSpacesList,notifications:this.props.notifications}))}return null});manage_space_page_defineProperty(this,"onSpaceChange",updatedSpace=>{this.setState({space:updatedSpace})});manage_space_page_defineProperty(this,"saveSpace",()=>{this.validator.enableValidation();const result=this.validator.validateForSave(this.state.space);if(result.isInvalid){this.setState({formError:result});return}if(this.editingExistingSpace()){const spacesManager=this.props.spacesManager;const originalSpace=this.state.originalSpace;const space=this.state.space;spacesManager.getActiveSpace().then(activeSpace=>{const editingActiveSpace=activeSpace.id===originalSpace.id;const haveDisabledFeaturesChanged=space.disabledFeatures.length!==originalSpace.disabledFeatures.length||external_kbnSharedDeps_Lodash_default.a.difference(space.disabledFeatures,originalSpace.disabledFeatures).length>0;if(editingActiveSpace&&haveDisabledFeaturesChanged){this.setState({showAlteringActiveSpaceDialog:true});return}this.performSave()})}else{this.performSave()}});manage_space_page_defineProperty(this,"loadSpace",function(){var _ref=manage_space_page_asyncToGenerator(regeneratorRuntime.mark((function _callee(spaceId,featuresPromise){var _this$props,spacesManager,onLoadSpace,_yield$Promise$all,_yield$Promise$all2,space,features,_error$body$message,_error$body,message;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this$props=_this.props,spacesManager=_this$props.spacesManager,onLoadSpace=_this$props.onLoadSpace;_context.prev=1;_context.next=4;return Promise.all([spacesManager.getSpace(spaceId),featuresPromise]);case 4:_yield$Promise$all=_context.sent;_yield$Promise$all2=manage_space_page_slicedToArray(_yield$Promise$all,2);space=_yield$Promise$all2[0];features=_yield$Promise$all2[1];if(space){if(onLoadSpace){onLoadSpace(space)}_this.setState({space:space,features:features,originalSpace:space,isLoading:false})}_context.next=16;break;case 11:_context.prev=11;_context.t0=_context["catch"](1);message=(_error$body$message=_context.t0===null||_context.t0===void 0?void 0:(_error$body=_context.t0.body)===null||_error$body===void 0?void 0:_error$body.message)!==null&&_error$body$message!==void 0?_error$body$message:"";_this.props.notifications.toasts.addDanger(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.errorLoadingSpaceTitle",{defaultMessage:"Error loading space: {message}",values:{message:message}}));_this.backToSpacesList();case 16:case"end":return _context.stop()}}),_callee,null,[[1,11]])})));return function(_x,_x2){return _ref.apply(this,arguments)}}());manage_space_page_defineProperty(this,"performSave",(requireRefresh=false)=>{if(!this.state.space){return}const name=this.state.space.name||"";const _this$state$space=this.state.space,_this$state$space$id=_this$state$space.id,id=_this$state$space$id===void 0?toSpaceIdentifier(name):_this$state$space$id,description=_this$state$space.description,initials=_this$state$space.initials,color=_this$state$space.color,_this$state$space$dis=_this$state$space.disabledFeatures,disabledFeatures=_this$state$space$dis===void 0?[]:_this$state$space$dis,imageUrl=_this$state$space.imageUrl;const params={name:name,id:id,description:description,initials:initials,color:color,disabledFeatures:disabledFeatures,imageUrl:imageUrl};let action;if(this.editingExistingSpace()){action=this.props.spacesManager.updateSpace(params)}else{action=this.props.spacesManager.createSpace(params)}this.setState({saveInProgress:true});action.then(()=>{this.props.notifications.toasts.addSuccess(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.spaceSuccessfullySavedNotificationMessage",{defaultMessage:"Space {name} was saved.",values:{name:"'".concat(name,"'")}}));this.backToSpacesList();if(requireRefresh){setTimeout(()=>{window.location.reload()})}}).catch(error=>{var _error$body$message2,_error$body2;const message=(_error$body$message2=error===null||error===void 0?void 0:(_error$body2=error.body)===null||_error$body2===void 0?void 0:_error$body2.message)!==null&&_error$body$message2!==void 0?_error$body$message2:"";this.setState({saveInProgress:false});this.props.notifications.toasts.addDanger(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.errorSavingSpaceTitle",{defaultMessage:"Error saving space: {message}",values:{message:message}}))})});manage_space_page_defineProperty(this,"backToSpacesList",()=>this.props.history.push("/"));manage_space_page_defineProperty(this,"editingExistingSpace",()=>!!this.props.spaceId);this.validator=new validate_space_SpaceValidator({shouldValidate:false});this.state={isLoading:true,showAlteringActiveSpaceDialog:false,saveInProgress:false,space:{},features:[]}}componentDidMount(){var _this2=this;return manage_space_page_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this2$props,spaceId,getFeatures,notifications,features;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(_this2.props.capabilities.spaces.manage){_context2.next=2;break}return _context2.abrupt("return");case 2:_this2$props=_this2.props,spaceId=_this2$props.spaceId,getFeatures=_this2$props.getFeatures,notifications=_this2$props.notifications;_context2.prev=3;if(!spaceId){_context2.next=9;break}_context2.next=7;return _this2.loadSpace(spaceId,getFeatures());case 7:_context2.next=13;break;case 9:_context2.next=11;return getFeatures();case 11:features=_context2.sent;_this2.setState({isLoading:false,features:features});case 13:_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2["catch"](3);notifications.toasts.addError(_context2.t0,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.manageSpacePage.loadErrorTitle",{defaultMessage:"Error loading available features"})});case 18:case"end":return _context2.stop()}}),_callee2,null,[[3,15]])})))()}componentDidUpdate(previousProps){var _this3=this;return manage_space_page_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!(_this3.props.spaceId!==previousProps.spaceId&&_this3.props.spaceId)){_context3.next=3;break}_context3.next=3;return _this3.loadSpace(_this3.props.spaceId,Promise.resolve(_this3.state.features));case 3:case"end":return _context3.stop()}}),_callee3)})))()}render(){const content=this.state.isLoading?this.getLoadingIndicator():this.getForm();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,content),this.maybeGetSecureSpacesMessage())}}function spaces_management_app_slicedToArray(arr,i){return spaces_management_app_arrayWithHoles(arr)||spaces_management_app_iterableToArrayLimit(arr,i)||spaces_management_app_unsupportedIterableToArray(arr,i)||spaces_management_app_nonIterableRest()}function spaces_management_app_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function spaces_management_app_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return spaces_management_app_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return spaces_management_app_arrayLikeToArray(o,minLen)}function spaces_management_app_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function spaces_management_app_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function spaces_management_app_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function spaces_management_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function spaces_management_app_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){spaces_management_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){spaces_management_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const spacesManagementApp=Object.freeze({id:"spaces",create({getStartServices:getStartServices,spacesManager:spacesManager,securityLicense:securityLicense}){return{id:this.id,order:2,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.displayName",{defaultMessage:"Spaces"}),mount({element:element,setBreadcrumbs:setBreadcrumbs,history:history}){return spaces_management_app_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$getStartServic,_yield$getStartServic2,_yield$getStartServic3,notifications,i18nStart,application,features,spacesBreadcrumbs,SpacesGridPageWithBreadcrumbs,CreateSpacePageWithBreadcrumbs,EditSpacePageWithBreadcrumbs;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getStartServices();case 2:_yield$getStartServic=_context.sent;_yield$getStartServic2=spaces_management_app_slicedToArray(_yield$getStartServic,2);_yield$getStartServic3=_yield$getStartServic2[0];notifications=_yield$getStartServic3.notifications;i18nStart=_yield$getStartServic3.i18n;application=_yield$getStartServic3.application;features=_yield$getStartServic2[1].features;spacesBreadcrumbs=[{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.breadcrumb",{defaultMessage:"Spaces"}),href:"/"}];SpacesGridPageWithBreadcrumbs=()=>{var _securityLicense$getF;setBreadcrumbs(spacesBreadcrumbs);return external_kbnSharedDeps_React_default.a.createElement(spaces_grid_page_SpacesGridPage,{capabilities:application.capabilities,getFeatures:features.getFeatures,notifications:notifications,spacesManager:spacesManager,history:history,getUrlForApp:application.getUrlForApp,securityEnabled:(_securityLicense$getF=securityLicense===null||securityLicense===void 0?void 0:securityLicense.getFeatures().showLinks)!==null&&_securityLicense$getF!==void 0?_securityLicense$getF:false})};CreateSpacePageWithBreadcrumbs=()=>{var _securityLicense$getF2;setBreadcrumbs([...spacesBreadcrumbs,{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.management.createSpaceBreadcrumb",{defaultMessage:"Create"})}]);return external_kbnSharedDeps_React_default.a.createElement(manage_space_page_ManageSpacePage,{capabilities:application.capabilities,getFeatures:features.getFeatures,notifications:notifications,spacesManager:spacesManager,history:history,getUrlForApp:application.getUrlForApp,securityEnabled:(_securityLicense$getF2=securityLicense===null||securityLicense===void 0?void 0:securityLicense.getFeatures().showLinks)!==null&&_securityLicense$getF2!==void 0?_securityLicense$getF2:false})};EditSpacePageWithBreadcrumbs=()=>{var _securityLicense$getF3;const _useParams=Object(external_kbnSharedDeps_ReactRouterDom_["useParams"])(),spaceId=_useParams.spaceId;const onLoadSpace=space=>{setBreadcrumbs([...spacesBreadcrumbs,{text:space.name,href:"/edit/".concat(encodeURIComponent(space.id))}])};return external_kbnSharedDeps_React_default.a.createElement(manage_space_page_ManageSpacePage,{capabilities:application.capabilities,getFeatures:features.getFeatures,notifications:notifications,spacesManager:spacesManager,spaceId:spaceId,onLoadSpace:onLoadSpace,history:history,getUrlForApp:application.getUrlForApp,securityEnabled:(_securityLicense$getF3=securityLicense===null||securityLicense===void 0?void 0:securityLicense.getFeatures().showLinks)!==null&&_securityLicense$getF3!==void 0?_securityLicense$getF3:false})};Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(i18nStart.Context,null,external_kbnSharedDeps_React_default.a.createElement(kibanaReact_public_["RedirectAppLinks"],{application:application},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Router"],{history:history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:["","/"],exact:true},external_kbnSharedDeps_React_default.a.createElement(SpacesGridPageWithBreadcrumbs,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:"/create"},external_kbnSharedDeps_React_default.a.createElement(CreateSpacePageWithBreadcrumbs,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:"/edit/:spaceId"},external_kbnSharedDeps_React_default.a.createElement(EditSpacePageWithBreadcrumbs,null)))))),element);return _context.abrupt("return",()=>{Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(element)});case 15:case"end":return _context.stop()}}),_callee)})))()}}}});function management_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class management_service_ManagementService{constructor(){management_service_defineProperty(this,"registeredSpacesManagementApp",void 0)}setup({getStartServices:getStartServices,management:management,spacesManager:spacesManager,securityLicense:securityLicense}){this.registeredSpacesManagementApp=management.sections.section.kibana.registerApp(spacesManagementApp.create({getStartServices:getStartServices,spacesManager:spacesManager,securityLicense:securityLicense}))}stop(){this.disableSpacesApp()}disableSpacesApp(){if(this.registeredSpacesManagementApp){this.registeredSpacesManagementApp.disable()}}}function space_selector_app_slicedToArray(arr,i){return space_selector_app_arrayWithHoles(arr)||space_selector_app_iterableToArrayLimit(arr,i)||space_selector_app_unsupportedIterableToArray(arr,i)||space_selector_app_nonIterableRest()}function space_selector_app_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function space_selector_app_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return space_selector_app_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return space_selector_app_arrayLikeToArray(o,minLen)}function space_selector_app_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function space_selector_app_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function space_selector_app_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function space_selector_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function space_selector_app_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){space_selector_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){space_selector_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const spaceSelectorApp=Object.freeze({id:"space_selector",create({application:application,getStartServices:getStartServices,spacesManager:spacesManager}){application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.spaces.spaceSelector.appTitle",{defaultMessage:"Select a space"}),chromeless:true,appRoute:"/spaces/space_selector",mount:function(){var _mount=space_selector_app_asyncToGenerator(regeneratorRuntime.mark((function _callee(params){var _yield$Promise$all,_yield$Promise$all2,_yield$Promise$all2$,coreStart,renderSpaceSelectorApp;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([getStartServices(),__webpack_require__.e(1).then(__webpack_require__.bind(null,165))]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=space_selector_app_slicedToArray(_yield$Promise$all,2);_yield$Promise$all2$=space_selector_app_slicedToArray(_yield$Promise$all2[0],1);coreStart=_yield$Promise$all2$[0];renderSpaceSelectorApp=_yield$Promise$all2[1].renderSpaceSelectorApp;return _context.abrupt("return",renderSpaceSelectorApp(coreStart.i18n,params.element,{spacesManager:spacesManager,serverBasePath:coreStart.http.basePath.serverBasePath}));case 8:case"end":return _context.stop()}}),_callee)})));function mount(_x){return _mount.apply(this,arguments)}return mount}()})}});function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class plugin_SpacesPlugin{constructor(){plugin_defineProperty(this,"spacesManager",void 0);plugin_defineProperty(this,"managementService",void 0)}setup(core,plugins){this.spacesManager=new spaces_manager_SpacesManager(core.http);if(plugins.home){plugins.home.featureCatalogue.register(createSpacesFeatureCatalogueEntry())}if(plugins.management){var _plugins$security;this.managementService=new management_service_ManagementService;this.managementService.setup({management:plugins.management,getStartServices:core.getStartServices,spacesManager:this.spacesManager,securityLicense:(_plugins$security=plugins.security)===null||_plugins$security===void 0?void 0:_plugins$security.license})}if(plugins.advancedSettings){const advancedSettingsService=new advanced_settings_service_AdvancedSettingsService;advancedSettingsService.setup({getActiveSpace:()=>this.spacesManager.getActiveSpace(),componentRegistry:plugins.advancedSettings.component})}if(plugins.savedObjectsManagement){const shareSavedObjectsToSpaceService=new share_saved_objects_to_space_service_ShareSavedObjectsToSpaceService;shareSavedObjectsToSpaceService.setup({spacesManager:this.spacesManager,notificationsSetup:core.notifications,savedObjectsManagementSetup:plugins.savedObjectsManagement,getStartServices:core.getStartServices});const copySavedObjectsToSpaceService=new copy_saved_objects_to_space_service_CopySavedObjectsToSpaceService;copySavedObjectsToSpaceService.setup({spacesManager:this.spacesManager,notificationsSetup:core.notifications,savedObjectsManagementSetup:plugins.savedObjectsManagement})}spaceSelectorApp.create({getStartServices:core.getStartServices,application:core.application,spacesManager:this.spacesManager});return{}}start(core,plugins){initSpacesNavControl(this.spacesManager,core);return{activeSpace$:this.spacesManager.onActiveSpaceChange$,getActiveSpace:()=>this.spacesManager.getActiveSpace()}}stop(){if(this.managementService){this.managementService.stop();this.managementService=undefined}}}var model_space=__webpack_require__(15);var types=__webpack_require__(16);const public_plugin=()=>new plugin_SpacesPlugin}]);