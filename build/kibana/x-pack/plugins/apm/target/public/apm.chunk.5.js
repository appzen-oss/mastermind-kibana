/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["apm_bundle_jsonpfunction"]=window["apm_bundle_jsonpfunction"]||[]).push([[5],{311:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};var __read=this&&this.__read||function(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error:error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error}}return ar};var __spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};Object.defineProperty(exports,"__esModule",{value:true});var uuid_1=__webpack_require__(836);exports.ColorVariant=Object.freeze({Series:"__use__series__color__",None:"__use__empty__color__"});exports.HorizontalAlignment=Object.freeze({Center:"center",Right:"right",Left:"left",Near:"near",Far:"far"});exports.VerticalAlignment=Object.freeze({Middle:"middle",Top:"top",Bottom:"bottom",Near:"near",Far:"far"});exports.Position=Object.freeze({Top:"top",Bottom:"bottom",Left:"left",Right:"right"});function identity(value){return value}exports.identity=identity;function compareByValueAsc(a,b){return a>b?1:-1}exports.compareByValueAsc=compareByValueAsc;function minValueWithLowerLimit(val1,val2,lowerLimit){return Math.max(Math.min(val1,val2),lowerLimit)}exports.minValueWithLowerLimit=minValueWithLowerLimit;function maxValueWithUpperLimit(val1,val2,upperLimit){return Math.min(Math.max(val1,val2),upperLimit)}exports.maxValueWithUpperLimit=maxValueWithUpperLimit;function getColorFromVariant(seriesColor,color){if(color===exports.ColorVariant.Series){return seriesColor}if(color===exports.ColorVariant.None){return"transparent"}return color||seriesColor}exports.getColorFromVariant=getColorFromVariant;function htmlIdGenerator(idPrefix){var prefix=idPrefix||"i"+uuid_1.v1();return function(suffix){return prefix+"_"+(suffix||uuid_1.v1())}}exports.htmlIdGenerator=htmlIdGenerator;function getPartialValue(base,partial,partials){if(partials===void 0){partials=[]}var partialWithValue=partial!==undefined?partial:partials.find((function(v){return v!==undefined}));return partialWithValue!==undefined?partialWithValue:base}exports.getPartialValue=getPartialValue;function getAllKeys(object,objects){if(objects===void 0){objects=[]}var initalKeys=object instanceof Map?__spread(object.keys()):Object.keys(object);return objects.reduce((function(keys,obj){if(obj&&typeof obj==="object"){var newKeys=obj instanceof Map?obj.keys():Object.keys(obj);keys.push.apply(keys,__spread(newKeys))}return keys}),initalKeys)}exports.getAllKeys=getAllKeys;function isArrayOrSet(value){return Array.isArray(value)||value instanceof Set}exports.isArrayOrSet=isArrayOrSet;function hasPartialObjectToMerge(base,partial,additionalPartials){if(additionalPartials===void 0){additionalPartials=[]}if(isArrayOrSet(base)){return false}if(typeof base==="object"&&base!==null){if(typeof partial==="object"&&!isArrayOrSet(partial)&&partial!==null){return true}return additionalPartials.some((function(p){return typeof p==="object"&&!Array.isArray(p)}))}return false}exports.hasPartialObjectToMerge=hasPartialObjectToMerge;function shallowClone(value){if(Array.isArray(value)){return __spread(value)}if(value instanceof Set){return new Set(__spread(value))}if(typeof value==="object"&&value!==null){if(value instanceof Map){return new Map(value.entries())}return __assign({},value)}return value}exports.shallowClone=shallowClone;function mergePartial(base,partial,options,additionalPartials){if(options===void 0){options={}}if(additionalPartials===void 0){additionalPartials=[]}var baseClone=shallowClone(base);if(hasPartialObjectToMerge(base,partial,additionalPartials)){var mapCondition=!(baseClone instanceof Map)||options.mergeMaps;if(partial!==undefined&&options.mergeOptionalPartialValues&&mapCondition){getAllKeys(partial,additionalPartials).forEach((function(key){if(baseClone instanceof Map){if(!baseClone.has(key)){baseClone.set(key,partial.get(key)!==undefined?partial.get(key):additionalPartials.find((function(v){return v.get(key)!==undefined}))||(new Map).get(key))}}else if(!(key in baseClone)){baseClone[key]=partial[key]!==undefined?partial[key]:(additionalPartials.find((function(v){return v[key]!==undefined}))||{})[key]}}))}if(baseClone instanceof Map){if(options.mergeMaps){return __spread(baseClone.keys()).reduce((function(newBase,key){var partialValue=partial&&partial.get(key);var partialValues=additionalPartials.map((function(v){return typeof v==="object"&&v instanceof Map?v.get(key):undefined}));var baseValue=base.get(key);newBase.set(key,mergePartial(baseValue,partialValue,options,partialValues));return newBase}),baseClone)}if(partial!==undefined){return partial}var additional=additionalPartials.find((function(p){return p!==undefined}));if(additional){return additional}return baseClone}return Object.keys(base).reduce((function(newBase,key){var partialValue=partial&&partial[key];var partialValues=additionalPartials.map((function(v){return typeof v==="object"?v[key]:undefined}));var baseValue=base[key];newBase[key]=mergePartial(baseValue,partialValue,options,partialValues);return newBase}),baseClone)}return getPartialValue(baseClone,partial,additionalPartials)}exports.mergePartial=mergePartial;function getUniqueValues(fullArray,uniqueProperty,filterConsecutives){if(filterConsecutives===void 0){filterConsecutives=false}return fullArray.reduce((function(acc,currentValue){var uniqueValue=currentValue[uniqueProperty];if(acc.uniqueValues.has(uniqueValue)){return acc}if(filterConsecutives){acc.uniqueValues.clear();acc.uniqueValues.add(uniqueValue)}else{acc.uniqueValues.add(uniqueValue)}acc.filtered.push(currentValue);return acc}),{filtered:[],uniqueValues:new Set}).filtered}exports.getUniqueValues=getUniqueValues;function getDistance(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))}exports.getDistance=getDistance;function stringifyNullsUndefined(value){if(value===undefined){return"undefined"}if(value===null){return"null"}return value}exports.stringifyNullsUndefined=stringifyNullsUndefined;function isUniqueArray(arr,extractor){var values=new Set;return function isUniqueArrayFn(){return arr.every((function(v){var value=extractor?extractor(v):v;if(values.has(value)){return false}values.add(value);return true}))}()}exports.isUniqueArray=isUniqueArray;function isDefined(value){return value!==null&&value!==undefined}exports.isDefined=isDefined;exports.isDefinedFrom=function(typeCheck){return function(value){if(value===undefined){return false}try{return typeCheck(value)}catch(_a){return false}}};exports.round=function(value,fractionDigits){if(fractionDigits===void 0){fractionDigits=0}var precision=Math.pow(10,Math.max(fractionDigits,0));var scaledValue=Math.floor(value*precision);return scaledValue/precision};exports.getPercentageValue=function(ratio,relativeValue,defaultValue){if(typeof ratio==="number"){return ratio}var ratioStr=ratio.trim();if(/\d+%$/.test(ratioStr)){var percentage=Number.parseInt(ratioStr.slice(0,-1),10);return relativeValue*(percentage/100)}var num=Number.parseFloat(ratioStr);return num&&!isNaN(num)?num:defaultValue}},312:function(module,exports){var getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8}}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;rnds[i]=r>>>((i&3)<<3)&255}return rnds}}},313:function(module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}module.exports=bytesToUuid},314:function(module,exports){var getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8}}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;rnds[i]=r>>>((i&3)<<3)&255}return rnds}}},315:function(module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}module.exports=bytesToUuid},316:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(30);var react_1=__webpack_require__(2);var useTimeoutFn_1=tslib_1.__importDefault(__webpack_require__(842));function useDebounce(fn,ms,deps){if(ms===void 0){ms=0}if(deps===void 0){deps=[]}var _a=useTimeoutFn_1.default(fn,ms),isReady=_a[0],cancel=_a[1],reset=_a[2];react_1.useEffect(reset,deps);return[isReady,cancel]}exports.default=useDebounce},836:function(module,exports,__webpack_require__){var v1=__webpack_require__(837);var v4=__webpack_require__(838);var uuid=v4;uuid.v1=v1;uuid.v4=v4;module.exports=uuid},837:function(module,exports,__webpack_require__){var rng=__webpack_require__(312);var bytesToUuid=__webpack_require__(313);var _nodeId;var _clockseq;var _lastMSecs=0;var _lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var node=options.node||_nodeId;var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){var seedBytes=rng();if(node==null){node=_nodeId=[seedBytes[0]|1,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]}if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&16383}}var msecs=options.msecs!==undefined?options.msecs:(new Date).getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;var tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;for(var n=0;n<6;++n){b[i+n]=node[n]}return buf?buf:bytesToUuid(b)}module.exports=v1},838:function(module,exports,__webpack_require__){var rng=__webpack_require__(312);var bytesToUuid=__webpack_require__(313);function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options==="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},839:function(module,exports,__webpack_require__){var v1=__webpack_require__(840);var v4=__webpack_require__(841);var uuid=v4;uuid.v1=v1;uuid.v4=v4;module.exports=uuid},840:function(module,exports,__webpack_require__){var rng=__webpack_require__(314);var bytesToUuid=__webpack_require__(315);var _nodeId;var _clockseq;var _lastMSecs=0;var _lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var node=options.node||_nodeId;var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){var seedBytes=rng();if(node==null){node=_nodeId=[seedBytes[0]|1,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]}if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&16383}}var msecs=options.msecs!==undefined?options.msecs:(new Date).getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;var tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;for(var n=0;n<6;++n){b[i+n]=node[n]}return buf?buf:bytesToUuid(b)}module.exports=v1},841:function(module,exports,__webpack_require__){var rng=__webpack_require__(314);var bytesToUuid=__webpack_require__(315);function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options==="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},842:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(2);function useTimeoutFn(fn,ms){if(ms===void 0){ms=0}var ready=react_1.useRef(false);var timeout=react_1.useRef();var callback=react_1.useRef(fn);var isReady=react_1.useCallback((function(){return ready.current}),[]);var set=react_1.useCallback((function(){ready.current=false;timeout.current&&clearTimeout(timeout.current);timeout.current=setTimeout((function(){ready.current=true;callback.current()}),ms)}),[ms]);var clear=react_1.useCallback((function(){ready.current=null;timeout.current&&clearTimeout(timeout.current)}),[]);react_1.useEffect((function(){callback.current=fn}),[fn]);react_1.useEffect((function(){set();return clear}),[ms]);return[isReady,clear,set]}exports.default=useTimeoutFn},843:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner)}}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(true&&module.exports){classNames.default=classNames;module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},844:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(2);var util_1=__webpack_require__(283);var defaultTarget=util_1.isClient?window:null;var isListenerType1=function(target){return!!target.addEventListener};var isListenerType2=function(target){return!!target.on};var useEvent=function(name,handler,target,options){if(target===void 0){target=defaultTarget}react_1.useEffect((function(){if(!handler){return}if(!target){return}if(isListenerType1(target)){target.addEventListener(name,handler,options)}else if(isListenerType2(target)){target.on(name,handler,options)}return function(){if(isListenerType1(target)){target.removeEventListener(name,handler,options)}else if(isListenerType2(target)){target.off(name,handler,options)}}}),[name,handler,target,JSON.stringify(options)])};exports.default=useEvent},850:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"rumRoutes",(function(){return rumRoutes}));__webpack_require__.d(__webpack_exports__,"CsmAppRoot",(function(){return CsmAppRoot}));__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp}));var external_kbnSharedDeps_Theme_euiDarkVars_=__webpack_require__(32);var external_kbnSharedDeps_Theme_euiDarkVars_default=__webpack_require__.n(external_kbnSharedDeps_Theme_euiDarkVars_);var external_kbnSharedDeps_Theme_euiLightVars_=__webpack_require__(25);var external_kbnSharedDeps_Theme_euiLightVars_default=__webpack_require__.n(external_kbnSharedDeps_Theme_euiLightVars_);var external_kbnSharedDeps_React_=__webpack_require__(2);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(33);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(20);var external_kbnSharedDeps_StyledComponents_=__webpack_require__(19);var external_kbnSharedDeps_StyledComponents_default=__webpack_require__.n(external_kbnSharedDeps_StyledComponents_);var public_=__webpack_require__(24);var route_config=__webpack_require__(317);var ScrollToTopOnPathChange=__webpack_require__(308);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(18);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var observability_public_=__webpack_require__(22);var projections=__webpack_require__(77);var external_kbnSharedDeps_ElasticNumeral_=__webpack_require__(26);var external_kbnSharedDeps_ElasticNumeral_default=__webpack_require__.n(external_kbnSharedDeps_ElasticNumeral_);var useFetcher=__webpack_require__(43);const I18LABELS={dataMissing:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.dataMissing",{defaultMessage:"N/A"}),totalPageLoad:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.totalPageLoad",{defaultMessage:"Total"}),backEnd:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.backend",{defaultMessage:"Backend"}),frontEnd:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.frontend",{defaultMessage:"Frontend"}),pageViews:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.pageViews",{defaultMessage:"Total page views"}),percPageLoaded:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.pagesLoaded.label",{defaultMessage:"Pages loaded"}),pageLoadTime:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.pageLoadTime.label",{defaultMessage:"Page load time (seconds)"}),pageLoadTimes:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.pageLoadTimes.label",{defaultMessage:"Page load times"}),pageLoadDuration:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.pageLoadDuration.label",{defaultMessage:"Page load duration"}),pageLoad:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.pageLoad.label",{defaultMessage:"Page load"}),pageLoadDistribution:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.pageLoadDistribution.label",{defaultMessage:"Page load distribution"}),jsErrors:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.impactfulMetrics.jsErrors",{defaultMessage:"JavaScript errors"}),highTrafficPages:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.impactfulMetrics.highTrafficPages",{defaultMessage:"High traffic pages"}),resetZoom:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.resetZoom.label",{defaultMessage:"Reset zoom"}),overall:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.overall.label",{defaultMessage:"Overall"}),selectBreakdown:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.filterGroup.selectBreakdown",{defaultMessage:"Select breakdown"}),breakdown:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.filterGroup.breakdown",{defaultMessage:"Breakdown"}),seconds:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.filterGroup.seconds",{defaultMessage:"seconds"}),coreWebVitals:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.filterGroup.coreWebVitals",{defaultMessage:"Core web vitals"}),browser:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.visitorBreakdown.browser",{defaultMessage:"Browser"}),operatingSystem:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.visitorBreakdown.operatingSystem",{defaultMessage:"Operating system"}),metrics:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.ux.metrics",{defaultMessage:"Metrics"}),median:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.ux.median",{defaultMessage:"median"}),avgPageLoadDuration:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.visitorBreakdownMap.avgPageLoadDuration",{defaultMessage:"Average page load duration"}),pageLoadDurationByRegion:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.visitorBreakdownMap.pageLoadDurationByRegion",{defaultMessage:"Page load duration by region (avg.)"}),searchByUrl:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.filters.searchByUrl",{defaultMessage:"Search by URL"}),getSearchResultsLabel:total=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.filters.searchResults",{defaultMessage:"{total} Search results",values:{total:total}}),topPages:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.filters.topPages",{defaultMessage:"Top pages"}),select:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.filters.select",{defaultMessage:"Select"}),url:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.filters.url",{defaultMessage:"Url"}),loadingResults:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.filters.url.loadingResults",{defaultMessage:"Loading results"}),noResults:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.filters.url.noResults",{defaultMessage:"No results available"}),totalErrors:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.jsErrors.totalErrors",{defaultMessage:"Total errors"}),errorRate:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.jsErrors.errorRate",{defaultMessage:"Error rate"}),errorMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.jsErrors.errorMessage",{defaultMessage:"Error message"}),impactedPageLoads:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.jsErrors.impactedPageLoads",{defaultMessage:"Impacted page loads"}),percentile:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.ux.percentile.label",{defaultMessage:"Percentile"}),percentile50thMedian:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.ux.percentile.50thMedian",{defaultMessage:"50th (Median)"}),percentile75th:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.ux.percentile.75th",{defaultMessage:"75th"}),percentile90th:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.ux.percentile.90th",{defaultMessage:"90th"}),percentile95th:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.ux.percentile.95th",{defaultMessage:"95th"}),percentile99th:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.ux.percentile.99th",{defaultMessage:"99th"}),noData:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.ux.visitorBreakdown.noData",{defaultMessage:"No data."}),totalPageLoadTooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.tooltips.totalPageLoad",{defaultMessage:"Total represents the full page load duration"}),frontEndTooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.tooltips.frontEnd",{defaultMessage:"Frontend time represents the total page load duration minus the backend time"}),backEndTooltip:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.dashboard.tooltips.backEnd",{defaultMessage:"Backend time represents time to first byte (TTFB), which is when the first response packet is received after the request has been made"})};const VisitorBreakdownLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.visitorBreakdown",{defaultMessage:"Visitor breakdown"});var useUrlParams=__webpack_require__(42);function useUxQuery(){const _useUrlParams=Object(useUrlParams["a"])(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;const start=urlParams.start,end=urlParams.end,searchTerm=urlParams.searchTerm,percentile=urlParams.percentile;const queryParams=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{const serviceName=uiFilters.serviceName;if(start&&end&&serviceName&&percentile){return{start:start,end:end,percentile:String(percentile),urlQuery:searchTerm||undefined,uiFilters:JSON.stringify(uiFilters)}}return null},[start,end,searchTerm,percentile,uiFilters]);return queryParams}const DATA_UNDEFINED_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.coreVitals.dataUndefined",{defaultMessage:"N/A"});const FCP_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.coreVitals.fcp",{defaultMessage:"First contentful paint"});const FCP_TOOLTIP=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.coreVitals.fcpTooltip",{defaultMessage:"First contentful paint (FCP) focusses on the initial rendering and measures the time from when the page starts loading to when any part of the pageâ€™s content is displayed on the screen."});const TBT_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.coreVitals.tbt",{defaultMessage:"Total blocking time"});const TBT_TOOLTIP=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.coreVitals.tbtTooltip",{defaultMessage:"Total blocking time (TBT) is the sum of the blocking time (duration above 50 ms) for each long task that occurs between the First contentful paint and the time when the transaction is completed."});const NO_OF_LONG_TASK=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.uxMetrics.noOfLongTasks",{defaultMessage:"No. of long tasks"});const NO_OF_LONG_TASK_TOOLTIP=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.uxMetrics.noOfLongTasksTooltip",{defaultMessage:"The number of long tasks, a long task is defined as any user activity or browser task that monopolizes the UI thread for extended periods (greater than 50 milliseconds) and blocks other critical tasks (frame rate or input latency) from being executed."});const LONGEST_LONG_TASK=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.uxMetrics.longestLongTasks",{defaultMessage:"Longest long task duration"});const LONGEST_LONG_TASK_TOOLTIP=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.uxMetrics.longestLongTasksTooltip",{defaultMessage:"The duration of the longest long task, a long task is defined as any user activity or browser task that monopolizes the UI thread for extended periods (greater than 50 milliseconds) and blocks other critical tasks (frame rate or input latency) from being executed."});const SUM_LONG_TASKS=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.uxMetrics.sumLongTasks",{defaultMessage:"Total long tasks duration"});const SUM_LONG_TASKS_TOOLTIP=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.rum.uxMetrics.sumLongTasksTooltip",{defaultMessage:"The total duration of long tasks, a long task is defined as any user activity or browser task that monopolizes the UI thread for extended periods (greater than 50 milliseconds) and blocks other critical tasks (frame rate or input latency) from being executed."});const getPercentileLabel=value=>{if(value===50)return I18LABELS.median;return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.ux.percentiles.label",{defaultMessage:"{value}th Perc.",values:{value:value}})};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function formatToSec(value,fromUnit="MicroSec"){const valueInMs=Number(value!==null&&value!==void 0?value:0)/(fromUnit==="MicroSec"?1e3:1);if(valueInMs<1e3){return valueInMs.toFixed(0)+" ms"}return(valueInMs/1e3).toFixed(2)+" s"}const KeyUXMetrics_STAT_STYLE={width:"240px"};function formatTitle(unit,value){if(typeof value==="undefined"||value===null)return DATA_UNDEFINED_LABEL;return formatToSec(value,unit)}function KeyUXMetrics({data:data,loading:loading}){const uxQuery=useUxQuery();const _useFetcher=Object(useFetcher["b"])(callApmApi=>{if(uxQuery){return callApmApi({endpoint:"GET /api/apm/rum-client/long-task-metrics",params:{query:_objectSpread({},uxQuery)}})}return Promise.resolve(null)},[uxQuery]),longTaskData=_useFetcher.data,status=_useFetcher.status;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:KeyUXMetrics_STAT_STYLE},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{titleSize:"s",title:formatTitle("ms",data===null||data===void 0?void 0:data.fcp),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,FCP_LABEL,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:FCP_TOOLTIP,type:"questionInCircle"})),isLoading:loading})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:KeyUXMetrics_STAT_STYLE},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{titleSize:"s",title:formatTitle("ms",data===null||data===void 0?void 0:data.tbt),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,TBT_LABEL,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:TBT_TOOLTIP,type:"questionInCircle"})),isLoading:loading})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:KeyUXMetrics_STAT_STYLE},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{titleSize:"s",title:(longTaskData===null||longTaskData===void 0?void 0:longTaskData.noOfLongTasks)!==undefined?external_kbnSharedDeps_ElasticNumeral_default()(longTaskData===null||longTaskData===void 0?void 0:longTaskData.noOfLongTasks).format("0,0"):DATA_UNDEFINED_LABEL,description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,NO_OF_LONG_TASK,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:NO_OF_LONG_TASK_TOOLTIP,type:"questionInCircle"})),isLoading:status!=="success"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:KeyUXMetrics_STAT_STYLE},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{titleSize:"s",title:formatTitle("ms",longTaskData===null||longTaskData===void 0?void 0:longTaskData.longestLongTask),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,LONGEST_LONG_TASK,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:LONGEST_LONG_TASK_TOOLTIP,type:"questionInCircle"})),isLoading:status!=="success"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:KeyUXMetrics_STAT_STYLE},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{titleSize:"s",title:formatTitle("ms",longTaskData===null||longTaskData===void 0?void 0:longTaskData.sumOfLongTasks),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,SUM_LONG_TASKS,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:SUM_LONG_TASKS_TOOLTIP,type:"questionInCircle"})),isLoading:status!=="success"})))}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const defaultContext={sharedData:{totalPageViews:0},setSharedData:d=>{throw new Error("setSharedData was not initialized, set it when you invoke the context")}};const CsmSharedContext=Object(external_kbnSharedDeps_React_["createContext"])(defaultContext);function CsmSharedContextProvider({children:children}){const _useState=Object(external_kbnSharedDeps_React_["useState"])({totalPageViews:0}),_useState2=_slicedToArray(_useState,2),newData=_useState2[0],setNewData=_useState2[1];const setSharedData=external_kbnSharedDeps_React_default.a.useCallback(data=>{setNewData(data)},[]);const value=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({sharedData:newData,setSharedData:setSharedData}),[newData,setSharedData]);return external_kbnSharedDeps_React_default.a.createElement(CsmSharedContext.Provider,{value:value,children:children})}function ClientMetrics_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function ClientMetrics_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ClientMetrics_ownKeys(Object(source),true).forEach((function(key){ClientMetrics_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ClientMetrics_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function ClientMetrics_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const ClFlexGroup=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"]).withConfig({displayName:"ClFlexGroup",componentId:"sc-1m748z4-0"})(["flex-direction:row;@media only screen and (max-width:768px){flex-direction:row;justify-content:space-between;}"]);function ClientMetrics_formatTitle(unit,value){if(typeof value==="undefined")return I18LABELS.dataMissing;return formatToSec(value,unit)}function PageViewsTotalTitle({pageViews:pageViews}){if(typeof pageViews==="undefined"){return external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_React_["Fragment"],null,I18LABELS.dataMissing)}return pageViews<1e4?external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_ElasticNumeral_default()(pageViews).format("0,0")):external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_ElasticNumeral_default()(pageViews).format("0,0")},external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_ElasticNumeral_default()(pageViews).format("0 a")))}function ClientMetrics(){var _data$totalPageLoadDu,_data$backEnd,_data$frontEnd,_data$pageViews2;const uxQuery=useUxQuery();const _useFetcher=Object(useFetcher["b"])(callApmApi=>{if(uxQuery){return callApmApi({endpoint:"GET /api/apm/rum/client-metrics",params:{query:ClientMetrics_objectSpread({},uxQuery)}})}return Promise.resolve(null)},[uxQuery]),data=_useFetcher.data,status=_useFetcher.status;const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(CsmSharedContext),setSharedData=_useContext.setSharedData;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{var _data$pageViews$value,_data$pageViews;setSharedData({totalPageViews:(_data$pageViews$value=data===null||data===void 0?void 0:(_data$pageViews=data.pageViews)===null||_data$pageViews===void 0?void 0:_data$pageViews.value)!==null&&_data$pageViews$value!==void 0?_data$pageViews$value:0})},[data,setSharedData]);const STAT_STYLE={width:"240px"};return external_kbnSharedDeps_React_["createElement"](ClFlexGroup,{responsive:false},external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:STAT_STYLE},external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiStat"],{titleSize:"l",title:ClientMetrics_formatTitle("ms",data===null||data===void 0?void 0:(_data$totalPageLoadDu=data.totalPageLoadDuration)===null||_data$totalPageLoadDu===void 0?void 0:_data$totalPageLoadDu.value),description:external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_React_["Fragment"],null,I18LABELS.totalPageLoad,external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:I18LABELS.totalPageLoadTooltip,type:"questionInCircle"})),isLoading:status!=="success"})),external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:STAT_STYLE},external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiStat"],{titleSize:"l",title:ClientMetrics_formatTitle("ms",data===null||data===void 0?void 0:(_data$backEnd=data.backEnd)===null||_data$backEnd===void 0?void 0:_data$backEnd.value),description:external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_React_["Fragment"],null,I18LABELS.backEnd,external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:I18LABELS.backEndTooltip,type:"questionInCircle"})),isLoading:status!=="success"})),external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:STAT_STYLE},external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiStat"],{titleSize:"l",title:ClientMetrics_formatTitle("ms",data===null||data===void 0?void 0:(_data$frontEnd=data.frontEnd)===null||_data$frontEnd===void 0?void 0:_data$frontEnd.value),description:external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_React_["Fragment"],null,I18LABELS.frontEnd,external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:I18LABELS.frontEndTooltip,type:"questionInCircle"})),isLoading:status!=="success"})),external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:STAT_STYLE},external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiStat"],{titleSize:"l",title:external_kbnSharedDeps_React_["createElement"](PageViewsTotalTitle,{pageViews:data===null||data===void 0?void 0:(_data$pageViews2=data.pageViews)===null||_data$pageViews2===void 0?void 0:_data$pageViews2.value}),description:I18LABELS.pageViews,isLoading:status!=="success"})))}function UXMetrics(){const _useUrlParams=Object(useUrlParams["a"])(),percentile=_useUrlParams.urlParams.percentile;const uxQuery=useUxQuery();const _useFetcher=Object(useFetcher["b"])(callApmApi=>{if(uxQuery){return callApmApi({endpoint:"GET /api/apm/rum-client/web-core-vitals",params:{query:uxQuery}})}return Promise.resolve(null)},[uxQuery]),data=_useFetcher.data,status=_useFetcher.status;const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(CsmSharedContext),totalPageViews=_useContext.sharedData.totalPageViews;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1,"data-cy":"client-metrics"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,I18LABELS.metrics," (",getPercentileLabel(percentile),")")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(KeyUXMetrics,{data:data,loading:status!=="success"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1,"data-cy":"client-metrics"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(observability_public_["CoreVitals"],{data:data,totalPageViews:totalPageViews,loading:status!=="success",displayTrafficMetric:true}))))}var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(28);var ErrorDetailLink=__webpack_require__(141);function JSErrors_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function JSErrors_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){JSErrors_ownKeys(Object(source),true).forEach((function(key){JSErrors_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{JSErrors_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function JSErrors_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function JSErrors_slicedToArray(arr,i){return JSErrors_arrayWithHoles(arr)||JSErrors_iterableToArrayLimit(arr,i)||JSErrors_unsupportedIterableToArray(arr,i)||JSErrors_nonIterableRest()}function JSErrors_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function JSErrors_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return JSErrors_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JSErrors_arrayLikeToArray(o,minLen)}function JSErrors_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function JSErrors_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function JSErrors_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function JSErrors(){var _data$totalErrors,_data$items,_data$totalErrorGroup;const _useUrlParams=Object(useUrlParams["a"])(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;const start=urlParams.start,end=urlParams.end,serviceName=urlParams.serviceName,searchTerm=urlParams.searchTerm;const _useState=Object(external_kbnSharedDeps_React_["useState"])({pageIndex:0,pageSize:5}),_useState2=JSErrors_slicedToArray(_useState,2),pagination=_useState2[0],setPagination=_useState2[1];const _useFetcher=Object(useFetcher["b"])(callApmApi=>{if(start&&end&&serviceName){return callApmApi({endpoint:"GET /api/apm/rum-client/js-errors",params:{query:{start:start,end:end,urlQuery:searchTerm||undefined,uiFilters:JSON.stringify(uiFilters),pageSize:String(pagination.pageSize),pageIndex:String(pagination.pageIndex)}}})}return Promise.resolve(null)},[start,end,serviceName,uiFilters,pagination,searchTerm]),data=_useFetcher.data,status=_useFetcher.status;const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(CsmSharedContext),totalPageViews=_useContext.sharedData.totalPageViews;const cols=[{field:"errorMessage",name:I18LABELS.errorMessage,render:(errorMessage,item)=>external_kbnSharedDeps_React_default.a.createElement(ErrorDetailLink["a"],{serviceName:serviceName,errorGroupId:item.errorGroupId},errorMessage)},{name:I18LABELS.impactedPageLoads,field:"count",align:"right",render:count=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.apm.ux.jsErrors.percent",defaultMessage:"{pageLoadPercent} %",values:{pageLoadPercent:(count/totalPageViews*100).toFixed(1)}})}];const onTableChange=({page:page})=>{setPagination({pageIndex:page.index,pageSize:page.size})};const totalErrors=(_data$totalErrors=data===null||data===void 0?void 0:data.totalErrors)!==null&&_data$totalErrors!==void 0?_data$totalErrors:0;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,I18LABELS.jsErrors)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{"data-test-subj":"uxJsErrorsTotal",titleSize:"s",title:totalErrors<1e3?totalErrors:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:totalErrors},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_ElasticNumeral_default()(totalErrors).format("0 a"))),description:I18LABELS.totalErrors,isLoading:status!=="success"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{"data-test-subj":"uxJsErrorTable",loading:status!=="success",responsive:false,compressed:true,columns:cols,items:(_data$items=data===null||data===void 0?void 0:data.items)!==null&&_data$items!==void 0?_data$items:[],onChange:onTableChange,pagination:JSErrors_objectSpread(JSErrors_objectSpread({},pagination),{},{totalItemCount:(_data$totalErrorGroup=data===null||data===void 0?void 0:data.totalErrorGroups)!==null&&_data$totalErrorGroup!==void 0?_data$totalErrorGroup:0})}))}function ImpactfulMetrics(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{flexBasis:650}},external_kbnSharedDeps_React_default.a.createElement(JSErrors,null))))}var elasticsearch_fieldnames=__webpack_require__(55);function BreakdownFilter({selectedBreakdown:selectedBreakdown,onBreakdownChange:onBreakdownChange,dataTestSubj:dataTestSubj}){var _selectedBreakdown$fi;const NO_BREAKDOWN="noBreakdown";const items=[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.csm.breakDownFilter.noBreakdown",{defaultMessage:"No breakdown"}),fieldName:NO_BREAKDOWN,type:"category"},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.csm.breakdownFilter.browser",{defaultMessage:"Browser"}),fieldName:elasticsearch_fieldnames["w"],type:"category"},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.csm.breakdownFilter.os",{defaultMessage:"OS"}),fieldName:elasticsearch_fieldnames["x"],type:"category"},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.csm.breakdownFilter.device",{defaultMessage:"Device"}),fieldName:elasticsearch_fieldnames["v"],type:"category"},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.csm.breakdownFilter.location",{defaultMessage:"Location"}),fieldName:elasticsearch_fieldnames["b"],type:"category"}];const options=items.map(({name:name,fieldName:fieldName})=>({inputDisplay:fieldName===NO_BREAKDOWN?name:external_kbnSharedDeps_React_default.a.createElement("strong",null,name),value:fieldName,dropdownDisplay:name}));const onOptionChange=value=>{if(value===NO_BREAKDOWN){onBreakdownChange(null)}else{onBreakdownChange(items.find(({fieldName:fieldName})=>fieldName===value))}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{fullWidth:true,compressed:true,options:options,valueOfSelected:(_selectedBreakdown$fi=selectedBreakdown===null||selectedBreakdown===void 0?void 0:selectedBreakdown.fieldName)!==null&&_selectedBreakdown$fi!==void 0?_selectedBreakdown$fi:NO_BREAKDOWN,onChange:value=>onOptionChange(value),"data-test-subj":dataTestSubj})}var external_kbnSharedDeps_ElasticCharts_=__webpack_require__(23);var external_kbnSharedDeps_ElasticEuiChartsTheme_=__webpack_require__(31);var commons=__webpack_require__(311);function generateAnnotationData(values){return Object.entries(values!==null&&values!==void 0?values:{}).map(value=>({dataValue:value[1],details:"".concat((+value[0]).toFixed(0))}))}function PercentileAnnotations({percentiles:percentiles}){var _generateAnnotationDa;const dataValues=(_generateAnnotationDa=generateAnnotationData(percentiles))!==null&&_generateAnnotationDa!==void 0?_generateAnnotationDa:[];const style={line:{strokeWidth:1,stroke:external_kbnSharedDeps_Theme_euiLightVars_default.a.euiColorSecondary,opacity:1}};function PercentileTooltip({annotation:annotation}){return external_kbnSharedDeps_React_["createElement"]("span",{"data-cy":"percentileTooltipTitle"},annotation.details,"th Percentile")}return external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_React_["Fragment"],null,dataValues.map((annotation,index)=>external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticCharts_["LineAnnotation"],{id:index+"annotation_"+annotation.dataValue,key:index+"percentile_"+annotation.dataValue,domainType:external_kbnSharedDeps_ElasticCharts_["AnnotationDomainTypes"].XDomain,dataValues:[annotation],style:style,hideTooltips:true,markerPosition:external_kbnSharedDeps_ElasticCharts_["Position"].Top,marker:external_kbnSharedDeps_React_["createElement"]("span",{"data-cy":"percentile-markers"},external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{title:external_kbnSharedDeps_React_["createElement"](PercentileTooltip,{annotation:annotation}),content:external_kbnSharedDeps_React_["createElement"]("span",null,"Pages loaded: ",Math.round(annotation.dataValue))},external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_React_["Fragment"],null,annotation.details,"th")))})))}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ChartWrapper_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function ChartWrapper_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ChartWrapper_ownKeys(Object(source),true).forEach((function(key){ChartWrapper_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ChartWrapper_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function ChartWrapper_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function ChartWrapper(_ref){let _ref$loading=_ref.loading,loading=_ref$loading===void 0?false:_ref$loading,_ref$height=_ref.height,height=_ref$height===void 0?"100%":_ref$height,maxWidth=_ref.maxWidth,children=_ref.children,rest=_objectWithoutProperties(_ref,["loading","height","maxWidth","children"]);const opacity=loading===true?.3:1;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiErrorBoundary"],null,external_kbnSharedDeps_React_default.a.createElement("div",_extends({style:ChartWrapper_objectSpread({height:height,opacity:opacity,transition:"opacity 0.2s"},maxWidth?{maxWidth:maxWidth}:{})},rest),children),loading===true&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceAround",alignItems:"center",style:ChartWrapper_objectSpread({height:height,marginTop:"-".concat(height),marginBottom:0},maxWidth?{maxWidth:maxWidth}:{})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingChart"],{size:"xl"}))))}function use_breakdowns_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function use_breakdowns_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){use_breakdowns_ownKeys(Object(source),true).forEach((function(key){use_breakdowns_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{use_breakdowns_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function use_breakdowns_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const useBreakdowns=({percentileRange:percentileRange,field:field,value:value})=>{const _useUrlParams=Object(useUrlParams["a"])(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;const start=urlParams.start,end=urlParams.end,searchTerm=urlParams.searchTerm;const _ref=percentileRange!==null&&percentileRange!==void 0?percentileRange:{},minP=_ref.min,maxP=_ref.max;return Object(useFetcher["b"])(callApmApi=>{if(start&&end&&field&&value){return callApmApi({endpoint:"GET /api/apm/rum-client/page-load-distribution/breakdown",params:{query:use_breakdowns_objectSpread({start:start,end:end,breakdown:value,uiFilters:JSON.stringify(uiFilters),urlQuery:searchTerm},minP&&maxP?{minPercentile:String(minP),maxPercentile:String(maxP)}:{})}})}},[end,start,uiFilters,field,value,minP,maxP,searchTerm])};function BreakdownSeries_slicedToArray(arr,i){return BreakdownSeries_arrayWithHoles(arr)||BreakdownSeries_iterableToArrayLimit(arr,i)||BreakdownSeries_unsupportedIterableToArray(arr,i)||BreakdownSeries_nonIterableRest()}function BreakdownSeries_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function BreakdownSeries_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return BreakdownSeries_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BreakdownSeries_arrayLikeToArray(o,minLen)}function BreakdownSeries_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function BreakdownSeries_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function BreakdownSeries_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function BreakdownSeries({field:field,value:value,percentileRange:percentileRange,onLoadingChange:onLoadingChange}){const _useUiSetting$=Object(public_["useUiSetting$"])("theme:darkMode"),_useUiSetting$2=BreakdownSeries_slicedToArray(_useUiSetting$,1),darkMode=_useUiSetting$2[0];const euiChartTheme=darkMode?external_kbnSharedDeps_ElasticEuiChartsTheme_["EUI_CHARTS_THEME_DARK"]:external_kbnSharedDeps_ElasticEuiChartsTheme_["EUI_CHARTS_THEME_LIGHT"];const _useBreakdowns=useBreakdowns({field:field,value:value,percentileRange:percentileRange}),data=_useBreakdowns.data,status=_useBreakdowns.status;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{onLoadingChange(status!=="success")},[status,onLoadingChange]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,data===null||data===void 0?void 0:data.map(({data:seriesData,name:name},sortIndex)=>{var _euiChartTheme$theme$,_euiChartTheme$theme$2;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["LineSeries"],{id:"".concat(field,"-").concat(value,"-").concat(name),key:"".concat(field,"-").concat(value,"-").concat(name),name:name,xScaleType:external_kbnSharedDeps_ElasticCharts_["ScaleType"].Linear,yScaleType:external_kbnSharedDeps_ElasticCharts_["ScaleType"].Linear,curve:external_kbnSharedDeps_ElasticCharts_["CurveType"].CURVE_CATMULL_ROM,data:seriesData!==null&&seriesData!==void 0?seriesData:[],lineSeriesStyle:{point:{visible:false}},fit:external_kbnSharedDeps_ElasticCharts_["Fit"].Linear,color:(_euiChartTheme$theme$=euiChartTheme.theme.colors)===null||_euiChartTheme$theme$===void 0?void 0:(_euiChartTheme$theme$2=_euiChartTheme$theme$.vizColors)===null||_euiChartTheme$theme$2===void 0?void 0:_euiChartTheme$theme$2[sortIndex===0?0:sortIndex+1],tickFormat:d=>external_kbnSharedDeps_ElasticNumeral_default()(d).format("0.0")+" %"})}))}function PageLoadDistChart_slicedToArray(arr,i){return PageLoadDistChart_arrayWithHoles(arr)||PageLoadDistChart_iterableToArrayLimit(arr,i)||PageLoadDistChart_unsupportedIterableToArray(arr,i)||PageLoadDistChart_nonIterableRest()}function PageLoadDistChart_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function PageLoadDistChart_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return PageLoadDistChart_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PageLoadDistChart_arrayLikeToArray(o,minLen)}function PageLoadDistChart_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function PageLoadDistChart_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function PageLoadDistChart_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const PageLoadChart=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticCharts_["Chart"]).withConfig({displayName:"PageLoadChart",componentId:"h0xeca-0"})([".echAnnotation{pointer-events:initial;}"]);function PageLoadDistChart({onPercentileChange:onPercentileChange,data:data,breakdown:breakdown,loading:loading,percentileRange:percentileRange}){var _data$pageLoadDistrib,_euiChartTheme$theme$,_euiChartTheme$theme$2;const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=PageLoadDistChart_slicedToArray(_useState,2),breakdownLoading=_useState2[0],setBreakdownLoading=_useState2[1];const onBrushEnd=({x:x})=>{if(!x){return}const _x=PageLoadDistChart_slicedToArray(x,2),minX=_x[0],maxX=_x[1];onPercentileChange(minX,maxX)};const headerFormatter=tooltip=>external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("p",null,tooltip.value," ",I18LABELS.seconds));const tooltipProps={headerFormatter:headerFormatter};const _useUiSetting$=Object(public_["useUiSetting$"])("theme:darkMode"),_useUiSetting$2=PageLoadDistChart_slicedToArray(_useUiSetting$,1),darkMode=_useUiSetting$2[0];const euiChartTheme=darkMode?external_kbnSharedDeps_ElasticEuiChartsTheme_["EUI_CHARTS_THEME_DARK"]:external_kbnSharedDeps_ElasticEuiChartsTheme_["EUI_CHARTS_THEME_LIGHT"];return external_kbnSharedDeps_React_default.a.createElement(ChartWrapper,{loading:loading||breakdownLoading,height:"250px"},(!loading||data)&&external_kbnSharedDeps_React_default.a.createElement(PageLoadChart,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Settings"],{baseTheme:darkMode?external_kbnSharedDeps_ElasticCharts_["DARK_THEME"]:external_kbnSharedDeps_ElasticCharts_["LIGHT_THEME"],theme:euiChartTheme.theme,onBrushEnd:onBrushEnd,tooltip:tooltipProps,showLegend:true}),external_kbnSharedDeps_React_default.a.createElement(PercentileAnnotations,{percentiles:data===null||data===void 0?void 0:data.percentiles}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Axis"],{id:"bottom",title:I18LABELS.pageLoadTime,position:commons["Position"].Bottom}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Axis"],{id:"left",title:I18LABELS.percPageLoaded,position:commons["Position"].Left,labelFormat:d=>d+" %"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["LineSeries"],{sortIndex:0,fit:external_kbnSharedDeps_ElasticCharts_["Fit"].Linear,id:"PagesPercentage",name:I18LABELS.overall,xScaleType:external_kbnSharedDeps_ElasticCharts_["ScaleType"].Linear,yScaleType:external_kbnSharedDeps_ElasticCharts_["ScaleType"].Linear,data:(_data$pageLoadDistrib=data===null||data===void 0?void 0:data.pageLoadDistribution)!==null&&_data$pageLoadDistrib!==void 0?_data$pageLoadDistrib:[],curve:external_kbnSharedDeps_ElasticCharts_["CurveType"].CURVE_CATMULL_ROM,lineSeriesStyle:{point:{visible:false},line:{strokeWidth:3}},color:(_euiChartTheme$theme$=euiChartTheme.theme.colors)===null||_euiChartTheme$theme$===void 0?void 0:(_euiChartTheme$theme$2=_euiChartTheme$theme$.vizColors)===null||_euiChartTheme$theme$2===void 0?void 0:_euiChartTheme$theme$2[1],tickFormat:d=>external_kbnSharedDeps_ElasticNumeral_default()(d).format("0.0")+" %"}),breakdown&&external_kbnSharedDeps_React_default.a.createElement(BreakdownSeries,{key:"".concat(breakdown.type,"-").concat(breakdown.name),field:breakdown.type,value:breakdown.name,percentileRange:percentileRange,onLoadingChange:bLoading=>{setBreakdownLoading(bLoading)}})))}function ResetPercentileZoom({percentileRange:percentileRange,setPercentileRange:setPercentileRange}){const isDisabled=percentileRange.min===null&&percentileRange.max===null;const onClick=()=>{setPercentileRange({min:null,max:null})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiShowFor"],{sizes:["xs"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"inspect",size:"s","aria-label":I18LABELS.resetZoom,onClick:onClick,disabled:isDisabled})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHideFor"],{sizes:["xs"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"inspect",size:"s",onClick:onClick,disabled:isDisabled},I18LABELS.resetZoom)))}function PageLoadDistribution_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function PageLoadDistribution_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){PageLoadDistribution_ownKeys(Object(source),true).forEach((function(key){PageLoadDistribution_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{PageLoadDistribution_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function PageLoadDistribution_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function PageLoadDistribution_slicedToArray(arr,i){return PageLoadDistribution_arrayWithHoles(arr)||PageLoadDistribution_iterableToArrayLimit(arr,i)||PageLoadDistribution_unsupportedIterableToArray(arr,i)||PageLoadDistribution_nonIterableRest()}function PageLoadDistribution_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function PageLoadDistribution_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return PageLoadDistribution_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PageLoadDistribution_arrayLikeToArray(o,minLen)}function PageLoadDistribution_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function PageLoadDistribution_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function PageLoadDistribution_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function PageLoadDistribution(){const _useUrlParams=Object(useUrlParams["a"])(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;const start=urlParams.start,end=urlParams.end,searchTerm=urlParams.searchTerm;const _useState=Object(external_kbnSharedDeps_React_["useState"])({min:null,max:null}),_useState2=PageLoadDistribution_slicedToArray(_useState,2),percentileRange=_useState2[0],setPercentileRange=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(null),_useState4=PageLoadDistribution_slicedToArray(_useState3,2),breakdown=_useState4[0],setBreakdown=_useState4[1];const _useFetcher=Object(useFetcher["b"])(callApmApi=>{const serviceName=uiFilters.serviceName;if(start&&end&&serviceName){return callApmApi({endpoint:"GET /api/apm/rum-client/page-load-distribution",params:{query:PageLoadDistribution_objectSpread({start:start,end:end,uiFilters:JSON.stringify(uiFilters),urlQuery:searchTerm},percentileRange.min&&percentileRange.max?{minPercentile:String(percentileRange.min),maxPercentile:String(percentileRange.max)}:{})}})}return Promise.resolve(null)},[end,start,uiFilters,percentileRange.min,percentileRange.max,searchTerm]),data=_useFetcher.data,status=_useFetcher.status;const onPercentileChange=(min,max)=>{setPercentileRange({min:min,max:max})};return external_kbnSharedDeps_React_default.a.createElement("div",{"data-cy":"pageLoadDist"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,I18LABELS.pageLoadDistribution))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(ResetPercentileZoom,{percentileRange:percentileRange,setPercentileRange:setPercentileRange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:{width:170}},external_kbnSharedDeps_React_default.a.createElement(BreakdownFilter,{selectedBreakdown:breakdown,onBreakdownChange:setBreakdown,dataTestSubj:"pldBreakdownFilter"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(PageLoadDistChart,{data:data,onPercentileChange:onPercentileChange,loading:status!=="success",breakdown:breakdown,percentileRange:{max:percentileRange.max||(data===null||data===void 0?void 0:data.maxDuration),min:percentileRange.min||(data===null||data===void 0?void 0:data.minDuration)}}))}var external_kbnSharedDeps_Moment_=__webpack_require__(27);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);var url_helpers=__webpack_require__(46);function PageViewsChart_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function PageViewsChart_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){PageViewsChart_ownKeys(Object(source),true).forEach((function(key){PageViewsChart_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{PageViewsChart_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function PageViewsChart_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function PageViewsChart_slicedToArray(arr,i){return PageViewsChart_arrayWithHoles(arr)||PageViewsChart_iterableToArrayLimit(arr,i)||PageViewsChart_unsupportedIterableToArray(arr,i)||PageViewsChart_nonIterableRest()}function PageViewsChart_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function PageViewsChart_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return PageViewsChart_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PageViewsChart_arrayLikeToArray(o,minLen)}function PageViewsChart_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function PageViewsChart_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function PageViewsChart_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function PageViewsChart({data:data,loading:loading}){var _data$topItems,_data$topItems2,_data$items,_euiChartTheme$theme$,_euiChartTheme$theme$2;const history=Object(external_kbnSharedDeps_ReactRouterDom_["useHistory"])();const _useUrlParams=Object(useUrlParams["a"])(),urlParams=_useUrlParams.urlParams;const start=urlParams.start,end=urlParams.end;const diffInDays=external_kbnSharedDeps_Moment_default()(new Date(end)).diff(external_kbnSharedDeps_Moment_default()(new Date(start)),"day");const formatter=Object(external_kbnSharedDeps_ElasticCharts_["timeFormatter"])(Object(external_kbnSharedDeps_ElasticCharts_["niceTimeFormatByDay"])(diffInDays>1?2:1));const onBrushEnd=({x:x})=>{if(!x){return}const _x=PageViewsChart_slicedToArray(x,2),minX=_x[0],maxX=_x[1];const rangeFrom=external_kbnSharedDeps_Moment_default()(minX).toISOString();const rangeTo=external_kbnSharedDeps_Moment_default()(maxX).toISOString();history.push(PageViewsChart_objectSpread(PageViewsChart_objectSpread({},history.location),{},{search:Object(url_helpers["b"])(PageViewsChart_objectSpread(PageViewsChart_objectSpread({},Object(url_helpers["c"])(history.location.search)),{},{rangeFrom:rangeFrom,rangeTo:rangeTo}))}))};const hasBreakdowns=!!(data===null||data===void 0?void 0:(_data$topItems=data.topItems)===null||_data$topItems===void 0?void 0:_data$topItems.length);const breakdownAccessors=(data===null||data===void 0?void 0:(_data$topItems2=data.topItems)===null||_data$topItems2===void 0?void 0:_data$topItems2.length)?data===null||data===void 0?void 0:data.topItems:["y"];const _useUiSetting$=Object(public_["useUiSetting$"])("theme:darkMode"),_useUiSetting$2=PageViewsChart_slicedToArray(_useUiSetting$,1),darkMode=_useUiSetting$2[0];const customSeriesNaming=({yAccessor:yAccessor})=>{if(yAccessor==="y"){return I18LABELS.overall}return yAccessor};const euiChartTheme=darkMode?external_kbnSharedDeps_ElasticEuiChartsTheme_["EUI_CHARTS_THEME_DARK"]:external_kbnSharedDeps_ElasticEuiChartsTheme_["EUI_CHARTS_THEME_LIGHT"];return external_kbnSharedDeps_React_default.a.createElement(ChartWrapper,{loading:loading,height:"250px"},(!loading||data)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Chart"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Settings"],{baseTheme:darkMode?external_kbnSharedDeps_ElasticCharts_["DARK_THEME"]:external_kbnSharedDeps_ElasticCharts_["LIGHT_THEME"],theme:euiChartTheme.theme,showLegend:true,onBrushEnd:onBrushEnd,xDomain:{min:new Date(start).valueOf(),max:new Date(end).valueOf()}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Axis"],{id:"date_time",position:commons["Position"].Bottom,tickFormat:formatter}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Axis"],{id:"page_views",title:I18LABELS.pageViews,position:commons["Position"].Left,tickFormat:d=>external_kbnSharedDeps_ElasticNumeral_default()(d).format("0"),labelFormat:d=>external_kbnSharedDeps_ElasticNumeral_default()(d).format("0a")}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["BarSeries"],{id:I18LABELS.pageViews,xScaleType:external_kbnSharedDeps_ElasticCharts_["ScaleType"].Time,yScaleType:external_kbnSharedDeps_ElasticCharts_["ScaleType"].Linear,xAccessor:"x",yAccessors:Array.from(breakdownAccessors),stackAccessors:["x"],data:(_data$items=data===null||data===void 0?void 0:data.items)!==null&&_data$items!==void 0?_data$items:[],name:customSeriesNaming,color:!hasBreakdowns?(_euiChartTheme$theme$=euiChartTheme.theme.colors)===null||_euiChartTheme$theme$===void 0?void 0:(_euiChartTheme$theme$2=_euiChartTheme$theme$.vizColors)===null||_euiChartTheme$theme$2===void 0?void 0:_euiChartTheme$theme$2[1]:undefined})))}function PageViewsTrend_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function PageViewsTrend_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){PageViewsTrend_ownKeys(Object(source),true).forEach((function(key){PageViewsTrend_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{PageViewsTrend_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function PageViewsTrend_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function PageViewsTrend_slicedToArray(arr,i){return PageViewsTrend_arrayWithHoles(arr)||PageViewsTrend_iterableToArrayLimit(arr,i)||PageViewsTrend_unsupportedIterableToArray(arr,i)||PageViewsTrend_nonIterableRest()}function PageViewsTrend_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function PageViewsTrend_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return PageViewsTrend_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PageViewsTrend_arrayLikeToArray(o,minLen)}function PageViewsTrend_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function PageViewsTrend_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function PageViewsTrend_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function PageViewsTrend(){const _useUrlParams=Object(useUrlParams["a"])(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;const start=urlParams.start,end=urlParams.end,searchTerm=urlParams.searchTerm;const _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=PageViewsTrend_slicedToArray(_useState,2),breakdown=_useState2[0],setBreakdown=_useState2[1];const _useFetcher=Object(useFetcher["b"])(callApmApi=>{const serviceName=uiFilters.serviceName;if(start&&end&&serviceName){return callApmApi({endpoint:"GET /api/apm/rum-client/page-view-trends",params:{query:PageViewsTrend_objectSpread({start:start,end:end,uiFilters:JSON.stringify(uiFilters),urlQuery:searchTerm},breakdown?{breakdowns:JSON.stringify(breakdown)}:{})}})}return Promise.resolve(undefined)},[end,start,uiFilters,breakdown,searchTerm]),data=_useFetcher.data,status=_useFetcher.status;return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,I18LABELS.pageViews))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:{width:170}},external_kbnSharedDeps_React_default.a.createElement(BreakdownFilter,{selectedBreakdown:breakdown,onBreakdownChange:setBreakdown,dataTestSubj:"pvBreakdownFilter"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(PageViewsChart,{data:data,loading:status!=="success"}))}function PageLoadAndViews(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{flexBasis:650}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(PageLoadDistribution,null))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{flexBasis:650}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(PageViewsTrend,null))))}function VisitorBreakdownChart_slicedToArray(arr,i){return VisitorBreakdownChart_arrayWithHoles(arr)||VisitorBreakdownChart_iterableToArrayLimit(arr,i)||VisitorBreakdownChart_unsupportedIterableToArray(arr,i)||VisitorBreakdownChart_nonIterableRest()}function VisitorBreakdownChart_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function VisitorBreakdownChart_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return VisitorBreakdownChart_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VisitorBreakdownChart_arrayLikeToArray(o,minLen)}function VisitorBreakdownChart_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function VisitorBreakdownChart_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function VisitorBreakdownChart_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const StyleChart=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"StyleChart",componentId:"sc-1d1m9rm-0"})(["height:100%;"]);const theme={legend:{verticalWidth:100}};function VisitorBreakdownChart({loading:loading,options:options}){const _useUiSetting$=Object(public_["useUiSetting$"])("theme:darkMode"),_useUiSetting$2=VisitorBreakdownChart_slicedToArray(_useUiSetting$,1),darkMode=_useUiSetting$2[0];const euiChartTheme=darkMode?external_kbnSharedDeps_ElasticEuiChartsTheme_["EUI_CHARTS_THEME_DARK"]:external_kbnSharedDeps_ElasticEuiChartsTheme_["EUI_CHARTS_THEME_LIGHT"];return external_kbnSharedDeps_React_default.a.createElement(ChartWrapper,{loading:loading,height:"245px",maxWidth:"430px"},external_kbnSharedDeps_React_default.a.createElement(StyleChart,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Chart"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Settings"],{showLegend:true,baseTheme:darkMode?external_kbnSharedDeps_ElasticCharts_["DARK_THEME"]:external_kbnSharedDeps_ElasticCharts_["LIGHT_THEME"],theme:theme}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Partition"],{id:"spec_1",data:(options===null||options===void 0?void 0:options.length)?options:[{count:1,name:I18LABELS.noData}],valueAccessor:d=>d.count,valueGetter:"percent",percentFormatter:d=>"".concat(Math.round((d+Number.EPSILON)*100)/100,"%"),layers:[{groupByRollup:d=>d.name,shape:{fillColor:d=>{var _euiChartTheme$theme$,_euiChartTheme$theme$2;return(_euiChartTheme$theme$=euiChartTheme.theme.colors)===null||_euiChartTheme$theme$===void 0?void 0:(_euiChartTheme$theme$2=_euiChartTheme$theme$.vizColors)===null||_euiChartTheme$theme$2===void 0?void 0:_euiChartTheme$theme$2[d.sortIndex]}}}],config:{partitionLayout:external_kbnSharedDeps_ElasticCharts_["PartitionLayout"].sunburst,linkLabel:{maximumSection:Infinity,maxCount:0},margin:{top:0,bottom:0,left:0,right:0},outerSizeRatio:1,circlePadding:4,clockwiseSectors:false}}))))}function VisitorBreakdown(){const _useUrlParams=Object(useUrlParams["a"])(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;const start=urlParams.start,end=urlParams.end,searchTerm=urlParams.searchTerm;const _useFetcher=Object(useFetcher["b"])(callApmApi=>{const serviceName=uiFilters.serviceName;if(start&&end&&serviceName){return callApmApi({endpoint:"GET /api/apm/rum-client/visitor-breakdown",params:{query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters),urlQuery:searchTerm}}})}return Promise.resolve(null)},[end,start,uiFilters,searchTerm]),data=_useFetcher.data,status=_useFetcher.status;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,VisitorBreakdownLabel)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{style:{height:"calc(100% - 32px)"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,I18LABELS.browser)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(VisitorBreakdownChart,{options:data===null||data===void 0?void 0:data.browsers,loading:status!=="success"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,I18LABELS.operatingSystem)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(VisitorBreakdownChart,{options:data===null||data===void 0?void 0:data.os,loading:status!=="success"}))))}var uuid=__webpack_require__(839);var uuid_default=__webpack_require__.n(uuid);var constants_=__webpack_require__(37);var embeddable_public_=__webpack_require__(41);var apmOss_public_=__webpack_require__(34);var transaction_types=__webpack_require__(116);const ES_TERM_SOURCE_COUNTRY={type:"ES_TERM_SOURCE",id:"3657625d-17b0-41ef-99ba-3a2b2938655c",indexPatternTitle:"apm-*",term:"client.geo.country_iso_code",metrics:[{type:constants_["AGG_TYPE"].AVG,field:"transaction.duration.us",label:"Page load duration"}],indexPatternId:apmOss_public_["APM_STATIC_INDEX_PATTERN_ID"],applyGlobalQuery:true,applyGlobalTime:true};const ES_TERM_SOURCE_REGION={type:"ES_TERM_SOURCE",id:"e62a1b9c-d7ff-4fd4-a0f6-0fdc44bb9e41",indexPatternTitle:"apm-*",term:"client.geo.region_iso_code",metrics:[{type:constants_["AGG_TYPE"].AVG,field:"transaction.duration.us"}],whereQuery:{query:'transaction.type : "page-load"',language:"kuery"},indexPatternId:apmOss_public_["APM_STATIC_INDEX_PATTERN_ID"],applyGlobalQuery:true,applyGlobalTime:true};const getWhereQuery=serviceName=>({query:"".concat(elasticsearch_fieldnames["t"],' : "').concat(transaction_types["a"],'" and ').concat(elasticsearch_fieldnames["i"],' : "').concat(serviceName,'"'),language:"kuery"});const REGION_NAME="region_name";const COUNTRY_NAME="name";const TRANSACTION_DURATION_REGION="__kbnjoin__avg_of_transaction.duration.us__e62a1b9c-d7ff-4fd4-a0f6-0fdc44bb9e41";const TRANSACTION_DURATION_COUNTRY="__kbnjoin__avg_of_transaction.duration.us__3657625d-17b0-41ef-99ba-3a2b2938655c";function useLayerList(){const _useUrlParams=Object(useUrlParams["a"])(),urlParams=_useUrlParams.urlParams;const serviceName=urlParams.serviceName;const baseLayer={sourceDescriptor:{type:"EMS_TMS",isAutoSelect:true},id:"b7af286d-2580-4f47-be93-9653d594ce7e",label:null,minZoom:0,maxZoom:24,alpha:1,visible:true,style:{type:"TILE"},type:"VECTOR_TILE"};ES_TERM_SOURCE_COUNTRY.whereQuery=getWhereQuery(serviceName);const getLayerStyle=fieldName=>({type:"VECTOR",properties:{icon:{type:constants_["STYLE_TYPE"].STATIC,options:{value:"marker"}},fillColor:{type:constants_["STYLE_TYPE"].DYNAMIC,options:{color:"Blue to Red",colorCategory:"palette_0",fieldMetaOptions:{isEnabled:true,sigma:3},type:constants_["COLOR_MAP_TYPE"].ORDINAL,field:{name:fieldName,origin:constants_["FIELD_ORIGIN"].JOIN},useCustomColorRamp:false}},lineColor:{type:constants_["STYLE_TYPE"].DYNAMIC,options:{color:"#3d3d3d",fieldMetaOptions:{isEnabled:true}}},lineWidth:{type:constants_["STYLE_TYPE"].STATIC,options:{size:1}},iconSize:{type:constants_["STYLE_TYPE"].STATIC,options:{size:6}},iconOrientation:{type:constants_["STYLE_TYPE"].STATIC,options:{orientation:0}},labelText:{type:constants_["STYLE_TYPE"].STATIC,options:{value:""}},labelColor:{type:constants_["STYLE_TYPE"].STATIC,options:{color:"#000000"}},labelSize:{type:constants_["STYLE_TYPE"].STATIC,options:{size:14}},labelBorderColor:{type:constants_["STYLE_TYPE"].STATIC,options:{color:"#FFFFFF"}},symbolizeAs:{options:{value:constants_["SYMBOLIZE_AS_TYPES"].CIRCLE}},labelBorderSize:{options:{size:constants_["LABEL_BORDER_SIZES"].SMALL}}},isTimeAware:true});const pageLoadDurationByCountryLayer={joins:[{leftField:"iso2",right:ES_TERM_SOURCE_COUNTRY}],sourceDescriptor:{type:"EMS_FILE",id:"world_countries",tooltipProperties:[COUNTRY_NAME]},style:getLayerStyle(TRANSACTION_DURATION_COUNTRY),id:"e8d1d974-eed8-462f-be2c-f0004b7619b2",label:null,minZoom:0,maxZoom:24,alpha:.75,visible:true,type:"VECTOR"};ES_TERM_SOURCE_REGION.whereQuery=getWhereQuery(serviceName);const pageLoadDurationByAdminRegionLayer={joins:[{leftField:"region_iso_code",right:ES_TERM_SOURCE_REGION}],sourceDescriptor:{type:"EMS_FILE",id:"administrative_regions_lvl2",tooltipProperties:["region_iso_code",REGION_NAME]},style:getLayerStyle(TRANSACTION_DURATION_REGION),id:"0e936d41-8765-41c9-97f0-05e166391366",label:null,minZoom:3,maxZoom:24,alpha:.75,visible:true,type:"VECTOR"};return[baseLayer,pageLoadDurationByCountryLayer,pageLoadDurationByAdminRegionLayer]}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function MapToolTip_slicedToArray(arr,i){return MapToolTip_arrayWithHoles(arr)||MapToolTip_iterableToArrayLimit(arr,i)||MapToolTip_unsupportedIterableToArray(arr,i)||MapToolTip_nonIterableRest()}function MapToolTip_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function MapToolTip_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return MapToolTip_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MapToolTip_arrayLikeToArray(o,minLen)}function MapToolTip_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function MapToolTip_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function MapToolTip_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const DescriptionItem=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListDescription"]).withConfig({displayName:"DescriptionItem",componentId:"sc-2807r4-0"})(["&&&{width:25%;}"]);const TitleItem=external_kbnSharedDeps_StyledComponents_default()(external_kbnSharedDeps_ElasticEui_["EuiDescriptionListTitle"]).withConfig({displayName:"TitleItem",componentId:"sc-2807r4-1"})(["&&&{width:75%;}"]);function MapToolTipComponent({closeTooltip:closeTooltip,features:features=[],loadFeatureProperties:loadFeatureProperties}){var _features$;const _ref=(_features$=features[0])!==null&&_features$!==void 0?_features$:{},featureId=_ref.id,layerId=_ref.layerId;const _useState=Object(external_kbnSharedDeps_React_["useState"])(featureId),_useState2=MapToolTip_slicedToArray(_useState,2),regionName=_useState2[0],setRegionName=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(""),_useState4=MapToolTip_slicedToArray(_useState3,2),pageLoadDuration=_useState4[0],setPageLoadDuration=_useState4[1];const formatPageLoadValue=val=>{const valInMs=val/1e3;if(valInMs>1e3){return(valInMs/1e3).toFixed(2)+" sec"}return(valInMs/1e3).toFixed(0)+" ms"};Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const loadRegionInfo=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var items;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!loadFeatureProperties){_context.next=5;break}_context.next=3;return loadFeatureProperties({layerId:layerId,featureId:featureId});case 3:items=_context.sent;items.forEach(item=>{if(item.getPropertyKey()===COUNTRY_NAME||item.getPropertyKey()===REGION_NAME){setRegionName(item.getRawValue())}if(item.getPropertyKey()===TRANSACTION_DURATION_REGION||item.getPropertyKey()===TRANSACTION_DURATION_COUNTRY){setPageLoadDuration(formatPageLoadValue(+item.getRawValue()))}});case 5:case"end":return _context.stop()}}),_callee)})));return function loadRegionInfo(){return _ref2.apply(this,arguments)}}();loadRegionInfo()});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOutsideClickDetector"],{onOutsideClick:()=>{if(closeTooltip!=null){closeTooltip()}}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,regionName),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{type:"column",textStyle:"reverse",compressed:true,style:{width:300}},external_kbnSharedDeps_React_default.a.createElement(TitleItem,{className:"eui-textNoWrap"},I18LABELS.avgPageLoadDuration),external_kbnSharedDeps_React_default.a.createElement(DescriptionItem,null,pageLoadDuration))))}const MapToolTip=external_kbnSharedDeps_React_default.a.memo(MapToolTipComponent);const getWildcardFilter=(field,value)=>({meta:{index:apmOss_public_["APM_STATIC_INDEX_PATTERN_ID"],alias:null,negate:false,disabled:false,type:"term",key:field,params:{query:value}},query:{wildcard:{[field]:{value:"*".concat(value,"*")}}}});const getMatchFilter=(field,value)=>({meta:{index:apmOss_public_["APM_STATIC_INDEX_PATTERN_ID"],alias:null,negate:false,disabled:false,type:"phrase",key:field,params:{query:value}},query:{term:{[field]:value}}});const getMultiMatchFilter=(field,values)=>({meta:{index:apmOss_public_["APM_STATIC_INDEX_PATTERN_ID"],type:"phrases",key:field,value:values.join(", "),params:values,alias:null,negate:false,disabled:false},query:{bool:{should:values.map(value=>({match_phrase:{[field]:value}})),minimum_should_match:1}}});const useMapFilters=()=>{const _useUrlParams=Object(useUrlParams["a"])(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;const serviceName=urlParams.serviceName,searchTerm=urlParams.searchTerm;const browser=uiFilters.browser,device=uiFilters.device,os=uiFilters.os,location=uiFilters.location,transactionUrl=uiFilters.transactionUrl;const existFilter={meta:{index:apmOss_public_["APM_STATIC_INDEX_PATTERN_ID"],alias:null,negate:false,disabled:false,type:"exists",key:"transaction.marks.navigationTiming.fetchStart",value:"exists"},exists:{field:"transaction.marks.navigationTiming.fetchStart"}};return Object(external_kbnSharedDeps_React_["useMemo"])(()=>{const filters=[existFilter];if(serviceName){filters.push(getMatchFilter(elasticsearch_fieldnames["i"],serviceName))}if(browser){filters.push(getMultiMatchFilter(elasticsearch_fieldnames["w"],browser))}if(device){filters.push(getMultiMatchFilter(elasticsearch_fieldnames["v"],device))}if(os){filters.push(getMultiMatchFilter(elasticsearch_fieldnames["x"],os))}if(location){filters.push(getMultiMatchFilter(elasticsearch_fieldnames["b"],location))}if(transactionUrl){filters.push(getMultiMatchFilter(elasticsearch_fieldnames["u"],transactionUrl))}if(searchTerm){filters.push(getWildcardFilter(elasticsearch_fieldnames["u"],searchTerm))}return filters},[serviceName,browser,device,os,location,searchTerm])};function EmbeddedMap_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function EmbeddedMap_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){EmbeddedMap_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){EmbeddedMap_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function EmbeddedMap_extends(){EmbeddedMap_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return EmbeddedMap_extends.apply(this,arguments)}function EmbeddedMap_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function EmbeddedMap_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){EmbeddedMap_ownKeys(Object(source),true).forEach((function(key){EmbeddedMap_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{EmbeddedMap_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function EmbeddedMap_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function EmbeddedMap_slicedToArray(arr,i){return EmbeddedMap_arrayWithHoles(arr)||EmbeddedMap_iterableToArrayLimit(arr,i)||EmbeddedMap_unsupportedIterableToArray(arr,i)||EmbeddedMap_nonIterableRest()}function EmbeddedMap_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function EmbeddedMap_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return EmbeddedMap_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EmbeddedMap_arrayLikeToArray(o,minLen)}function EmbeddedMap_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function EmbeddedMap_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function EmbeddedMap_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const EmbeddedPanel=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"EmbeddedPanel",componentId:"fmxjbq-0"})(["z-index:auto;flex:1;display:flex;flex-direction:column;height:100%;position:relative;.embPanel__content{display:flex;flex:1 1 100%;z-index:1;min-height:0;}&&& .mapboxgl-canvas{animation:none !important;}"]);function EmbeddedMapComponent(){const _useUrlParams=Object(useUrlParams["a"])(),urlParams=_useUrlParams.urlParams;const start=urlParams.start,end=urlParams.end,serviceName=urlParams.serviceName;const mapFilters=useMapFilters();const layerList=useLayerList();const _useState=Object(external_kbnSharedDeps_React_["useState"])(),_useState2=EmbeddedMap_slicedToArray(_useState,2),embeddable=_useState2[0],setEmbeddable=_useState2[1];const embeddableRoot=Object(external_kbnSharedDeps_React_["useRef"])(null);const _useKibana=Object(public_["useKibana"])(),embeddablePlugin=_useKibana.services.embeddable;if(!embeddablePlugin){throw new Error("Embeddable start plugin not found")}const factory=embeddablePlugin.getEmbeddableFactory(constants_["MAP_SAVED_OBJECT_TYPE"]);const input=EmbeddedMap_objectSpread(EmbeddedMap_objectSpread({attributes:{title:""},id:uuid_default.a.v4(),filters:mapFilters,refreshConfig:{value:0,pause:false},viewMode:embeddable_public_["ViewMode"].VIEW,isLayerTOCOpen:false,query:{query:'transaction.type : "page-load"',language:"kuery"}},start&&{timeRange:{from:new Date(start).toISOString(),to:new Date(end).toISOString()}}),{},{hideFilterActions:true});function renderTooltipContent({addFilters:addFilters,closeTooltip:closeTooltip,features:features,isLocked:isLocked,getLayerName:getLayerName,loadFeatureProperties:loadFeatureProperties,loadFeatureGeometry:loadFeatureGeometry}){const props={addFilters:addFilters,closeTooltip:closeTooltip,isLocked:isLocked,getLayerName:getLayerName,loadFeatureProperties:loadFeatureProperties,loadFeatureGeometry:loadFeatureGeometry};return external_kbnSharedDeps_React_default.a.createElement(MapToolTip,EmbeddedMap_extends({},props,{features:features}))}Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(embeddable!=null&&serviceName){embeddable.updateInput({filters:mapFilters})}},[mapFilters]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(embeddable!=null&&start!=null&&end!=null){const timeRange={from:new Date(start).toISOString(),to:new Date(end).toISOString()};embeddable.updateInput({timeRange:timeRange})}},[start,end]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{function setupEmbeddable(){return _setupEmbeddable.apply(this,arguments)}function _setupEmbeddable(){_setupEmbeddable=EmbeddedMap_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var embeddableObject;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(factory){_context.next=2;break}throw new Error("Map embeddable not found.");case 2:_context.next=4;return factory.create(EmbeddedMap_objectSpread(EmbeddedMap_objectSpread({},input),{},{title:"Visitors by region"}));case 4:embeddableObject=_context.sent;if(!(embeddableObject&&!Object(embeddable_public_["isErrorEmbeddable"])(embeddableObject))){_context.next=9;break}embeddableObject.setRenderTooltipContent(renderTooltipContent);_context.next=9;return embeddableObject.setLayerList(layerList);case 9:setEmbeddable(embeddableObject);case 10:case"end":return _context.stop()}}),_callee)})));return _setupEmbeddable.apply(this,arguments)}setupEmbeddable()},[]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(embeddableRoot.current&&embeddable&&serviceName){embeddable.render(embeddableRoot.current)}},[embeddable,embeddableRoot,serviceName]);return external_kbnSharedDeps_React_default.a.createElement(EmbeddedPanel,null,external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"xpack.apm.regionMap.embeddedPanel",className:"embPanel__content",ref:embeddableRoot}))}EmbeddedMapComponent.displayName="EmbeddedMap";const EmbeddedMap=external_kbnSharedDeps_React_default.a.memo(EmbeddedMapComponent);function VisitorBreakdownMap(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,I18LABELS.pageLoadDurationByRegion)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement("div",{style:{height:400}},external_kbnSharedDeps_React_default.a.createElement(EmbeddedMap,null)))}function VisitorBreakdownsPanel(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{flexBasis:650}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(VisitorBreakdownMap,null))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{flexBasis:650}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(VisitorBreakdown,null))))}var useWindowSize=__webpack_require__(282);var useWindowSize_default=__webpack_require__.n(useWindowSize);var useDebounce=__webpack_require__(316);var useDebounce_default=__webpack_require__.n(useDebounce);function useBreakPoints_slicedToArray(arr,i){return useBreakPoints_arrayWithHoles(arr)||useBreakPoints_iterableToArrayLimit(arr,i)||useBreakPoints_unsupportedIterableToArray(arr,i)||useBreakPoints_nonIterableRest()}function useBreakPoints_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function useBreakPoints_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return useBreakPoints_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useBreakPoints_arrayLikeToArray(o,minLen)}function useBreakPoints_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useBreakPoints_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function useBreakPoints_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function useBreakPoints(){const _useState=Object(external_kbnSharedDeps_React_["useState"])({isSmall:false,isMedium:false,isLarge:false,isXl:false}),_useState2=useBreakPoints_slicedToArray(_useState,2),screenSizes=_useState2[0],setScreenSizes=_useState2[1];const _useWindowSize=useWindowSize_default()(),width=_useWindowSize.width;useDebounce_default()(()=>{const windowWidth=window.innerWidth;setScreenSizes({isSmall:Object(external_kbnSharedDeps_ElasticEui_["isWithinMaxBreakpoint"])(windowWidth,"s"),isMedium:Object(external_kbnSharedDeps_ElasticEui_["isWithinMaxBreakpoint"])(windowWidth,"m"),isLarge:Object(external_kbnSharedDeps_ElasticEui_["isWithinMaxBreakpoint"])(windowWidth,"l"),isXl:Object(external_kbnSharedDeps_ElasticEui_["isWithinMaxBreakpoint"])(windowWidth,"xl")})},50,[width]);return screenSizes}function RumDashboard(){const _useUrlParams=Object(useUrlParams["a"])(),percentile=_useUrlParams.urlParams.percentile;const _useBreakPoints=useBreakPoints(),isSmall=_useBreakPoints.isSmall;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:isSmall?"row":"column",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1,"data-cy":"client-metrics"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,I18LABELS.pageLoad," (",getPercentileLabel(percentile),")")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(ClientMetrics,null))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(UXMetrics,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(PageLoadAndViews,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(VisitorBreakdownsPanel,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(ImpactfulMetrics,null)))}var LocalUIFilters=__webpack_require__(81);var external_kbnSharedDeps_Lodash_=__webpack_require__(21);var useEvent=__webpack_require__(844);var useEvent_default=__webpack_require__.n(useEvent);var classnames=__webpack_require__(843);var classnames_default=__webpack_require__.n(classnames);function RenderOption_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function RenderOption_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){RenderOption_ownKeys(Object(source),true).forEach((function(key){RenderOption_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{RenderOption_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function RenderOption_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const StyledSpan=external_kbnSharedDeps_StyledComponents_default.a.span.withConfig({displayName:"StyledSpan",componentId:"ywvq47-0"})(["color:",";font-weight:500;:not(:last-of-type)::after{content:'â€¢';margin:0 4px;}"],external_kbnSharedDeps_Theme_euiLightVars_default.a.euiColorSecondaryText);const StyledListSpan=external_kbnSharedDeps_StyledComponents_default.a.span.withConfig({displayName:"StyledListSpan",componentId:"ywvq47-1"})(["display:block;margin-top:4px;font-size:12px;"]);const formatOptions=options=>options.map(item=>RenderOption_objectSpread(RenderOption_objectSpread({title:item.label},item),{},{className:classnames_default()("euiSelectableTemplateSitewide__listItem",item.className)}));function selectableRenderOptions(option,searchValue){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHighlight"],{className:"euiSelectableTemplateSitewide__listItemTitle",search:searchValue},option.label),renderOptionMeta(option.meta))}function renderOptionMeta(meta){if(!meta||meta.length<1)return;return external_kbnSharedDeps_React_default.a.createElement(StyledListSpan,null,meta.map(item=>external_kbnSharedDeps_React_default.a.createElement(StyledSpan,{key:item},item)))}function SelectableUrlList_slicedToArray(arr,i){return SelectableUrlList_arrayWithHoles(arr)||SelectableUrlList_iterableToArrayLimit(arr,i)||SelectableUrlList_unsupportedIterableToArray(arr,i)||SelectableUrlList_nonIterableRest()}function SelectableUrlList_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function SelectableUrlList_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return SelectableUrlList_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SelectableUrlList_arrayLikeToArray(o,minLen)}function SelectableUrlList_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function SelectableUrlList_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function SelectableUrlList_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const StyledRow=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"StyledRow",componentId:"sc-1uwqtk-0"})(["text-align:center;padding:8px 0px;background-color:",";border-bottom:1px solid ",";"],props=>props.darkMode?external_kbnSharedDeps_Theme_euiDarkVars_default.a.euiPageBackgroundColor:external_kbnSharedDeps_Theme_euiLightVars_default.a.euiPageBackgroundColor,props=>props.darkMode?external_kbnSharedDeps_Theme_euiDarkVars_default.a.euiColorLightestShade:external_kbnSharedDeps_Theme_euiLightVars_default.a.euiColorLightestShade);function SelectableUrlList({data:data,loading:loading,onInputChange:onInputChange,onTermChange:onTermChange,onChange:onChange,searchValue:searchValue,onClose:onClose,popoverIsOpen:popoverIsOpen,setPopoverIsOpen:setPopoverIsOpen,initialValue:initialValue}){var _data$items,_data$total;const _useUiSetting$=Object(public_["useUiSetting$"])("theme:darkMode"),_useUiSetting$2=SelectableUrlList_slicedToArray(_useUiSetting$,1),darkMode=_useUiSetting$2[0];const _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=SelectableUrlList_slicedToArray(_useState,2),popoverRef=_useState2[0],setPopoverRef=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(null),_useState4=SelectableUrlList_slicedToArray(_useState3,2),searchRef=_useState4[0],setSearchRef=_useState4[1];const titleRef=Object(external_kbnSharedDeps_React_["useRef"])(null);const onEnterKey=evt=>{if(evt.key.toLowerCase()==="enter"){onTermChange();setPopoverIsOpen(false);if(searchRef){searchRef.blur()}}};useEvent_default()("keydown",onEnterKey,searchRef);const searchOnFocus=e=>{setPopoverIsOpen(true)};const onSearchInput=e=>{onInputChange(e);setPopoverIsOpen(true)};const searchOnBlur=e=>{if(!(popoverRef===null||popoverRef===void 0?void 0:popoverRef.contains(e.relatedTarget))&&!(popoverRef===null||popoverRef===void 0?void 0:popoverRef.contains(titleRef.current))){setPopoverIsOpen(false)}};const formattedOptions=formatOptions((_data$items=data.items)!==null&&_data$items!==void 0?_data$items:[]);const closePopover=()=>{setPopoverIsOpen(false);onClose();if(searchRef){searchRef.blur()}};Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(searchRef&&initialValue){searchRef.value=initialValue}},[searchRef]);const loadingMessage=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelectableMessage"],{style:{minHeight:300}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement("br",null),external_kbnSharedDeps_React_default.a.createElement("p",null,I18LABELS.loadingResults));const emptyMessage=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelectableMessage"],{style:{minHeight:300}},external_kbnSharedDeps_React_default.a.createElement("p",null,I18LABELS.noResults));const titleText=searchValue?I18LABELS.getSearchResultsLabel((_data$total=data===null||data===void 0?void 0:data.total)!==null&&_data$total!==void 0?_data$total:0):I18LABELS.topPages;function PopOverTitle(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{ref:titleRef,gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{justifyContent:"center"}},loading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null):titleText)))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelectable"],{searchable:true,onChange:onChange,isLoading:loading,options:formattedOptions,renderOption:selectableRenderOptions,singleSelection:false,searchProps:{isClearable:true,onFocus:searchOnFocus,onBlur:searchOnBlur,onInput:onSearchInput,inputRef:setSearchRef,placeholder:I18LABELS.searchByUrl},listProps:{rowHeight:68,showIcons:true,onFocusBadge:false},loadingMessage:loadingMessage,emptyMessage:emptyMessage,noMatchesMessage:emptyMessage},(list,search)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{panelPaddingSize:"none",isOpen:popoverIsOpen,display:"block",panelRef:setPopoverRef,button:search,closePopover:closePopover},external_kbnSharedDeps_React_default.a.createElement("div",{style:{width:600,maxWidth:"100%"}},external_kbnSharedDeps_React_default.a.createElement(PopOverTitle,null),searchValue&&external_kbnSharedDeps_React_default.a.createElement(StyledRow,{darkMode:darkMode},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.apm.ux.url.hitEnter.include",defaultMessage:"Hit {icon} or click apply to include all urls matching {searchValue}",values:{searchValue:external_kbnSharedDeps_React_default.a.createElement("strong",null,searchValue),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow"},"Enter ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"returnKey"}))}}))),list,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{style:{justifyContent:"flex-end"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,size:"s",onClick:()=>{onTermChange();closePopover()}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.apply.label",{defaultMessage:"Apply"}))))))))}function URLSearch_objectWithoutProperties(source,excluded){if(source==null)return{};var target=URLSearch_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function URLSearch_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function URLSearch_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function URLSearch_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){URLSearch_ownKeys(Object(source),true).forEach((function(key){URLSearch_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{URLSearch_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function URLSearch_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function URLSearch_slicedToArray(arr,i){return URLSearch_arrayWithHoles(arr)||URLSearch_iterableToArrayLimit(arr,i)||URLSearch_unsupportedIterableToArray(arr,i)||URLSearch_nonIterableRest()}function URLSearch_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function URLSearch_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return URLSearch_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return URLSearch_arrayLikeToArray(o,minLen)}function URLSearch_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function URLSearch_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function URLSearch_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function URLSearch({onChange:onFilterChange}){var _data$items,_data$total;const history=Object(external_kbnSharedDeps_ReactRouterDom_["useHistory"])();const _useUrlParams=Object(useUrlParams["a"])(),uiFilters=_useUrlParams.uiFilters,urlParams=_useUrlParams.urlParams;const searchTerm=urlParams.searchTerm,percentile=urlParams.percentile;const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=URLSearch_slicedToArray(_useState,2),popoverIsOpen=_useState2[0],setPopoverIsOpen=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(searchTerm!==null&&searchTerm!==void 0?searchTerm:""),_useState4=URLSearch_slicedToArray(_useState3,2),searchValue=_useState4[0],setSearchValue=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(searchTerm!==null&&searchTerm!==void 0?searchTerm:""),_useState6=URLSearch_slicedToArray(_useState5,2),debouncedValue=_useState6[0],setDebouncedValue=_useState6[1];useDebounce_default()(()=>{setSearchValue(debouncedValue)},250,[debouncedValue]);const updateSearchTerm=Object(external_kbnSharedDeps_React_["useCallback"])(searchTermN=>{const newQuery=URLSearch_objectSpread(URLSearch_objectSpread({},Object(url_helpers["c"])(history.location.search)),{},{searchTerm:searchTermN||undefined});if(!searchTermN){delete newQuery.searchTerm}const newLocation=URLSearch_objectSpread(URLSearch_objectSpread({},history.location),{},{search:Object(url_helpers["b"])(newQuery)});history.push(newLocation)},[history]);const _useState7=Object(external_kbnSharedDeps_React_["useState"])([]),_useState8=URLSearch_slicedToArray(_useState7,2),checkedUrls=_useState8[0],setCheckedUrls=_useState8[1];const uxQuery=useUxQuery();const _useFetcher=Object(useFetcher["b"])(callApmApi=>{if(uxQuery&&popoverIsOpen){const transactionUrl=uiFilters.transactionUrl,restFilters=URLSearch_objectWithoutProperties(uiFilters,["transactionUrl"]);return callApmApi({endpoint:"GET /api/apm/rum-client/url-search",params:{query:URLSearch_objectSpread(URLSearch_objectSpread({},uxQuery),{},{uiFilters:JSON.stringify(restFilters),urlQuery:searchValue})}})}return Promise.resolve(null)},[uxQuery,searchValue,popoverIsOpen]),data=_useFetcher.data,status=_useFetcher.status;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setCheckedUrls(uiFilters.transactionUrl||[])},[uiFilters]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(searchTerm&&searchValue===""){updateSearchTerm("")}},[searchValue,updateSearchTerm,searchTerm]);const onChange=updatedOptions=>{const clickedItems=updatedOptions.filter(option=>option.checked==="on");setCheckedUrls(clickedItems.map(item=>item.url))};const percTitle=getPercentileLabel(percentile);const items=((_data$items=data===null||data===void 0?void 0:data.items)!==null&&_data$items!==void 0?_data$items:[]).map(item=>({label:item.url,key:item.url,meta:[I18LABELS.pageViews+": "+item.count,I18LABELS.pageLoadDuration+": "+formatToSec(item.pld)+" (".concat(percTitle,")")],url:item.url,checked:(checkedUrls===null||checkedUrls===void 0?void 0:checkedUrls.includes(item.url))?"on":undefined}));const onInputChange=e=>{setDebouncedValue(e.currentTarget.value)};const isLoading=status!=="success";const onTermChange=()=>{updateSearchTerm(searchValue)};const onClose=()=>{if(uiFilters.transactionUrl||checkedUrls.length>0){onFilterChange(checkedUrls)}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxxs",textTransform:"uppercase"},external_kbnSharedDeps_React_default.a.createElement("h4",null,I18LABELS.url)),external_kbnSharedDeps_React_default.a.createElement(SelectableUrlList,{initialValue:searchTerm,loading:isLoading,onInputChange:onInputChange,onTermChange:onTermChange,data:{items:items,total:(_data$total=data===null||data===void 0?void 0:data.total)!==null&&_data$total!==void 0?_data$total:0},onChange:onChange,onClose:onClose,searchValue:searchValue,popoverIsOpen:popoverIsOpen,setPopoverIsOpen:setPopoverIsOpen}))}var variables=__webpack_require__(7);const BadgeText=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"BadgeText",componentId:"go8jvw-0"})(["display:inline-block;",";vertical-align:middle;"],Object(variables["truncate"])(Object(variables["px"])(variables["unit"]*12)));const formatUrlValue=val=>{const maxUrlToDisplay=30;const urlLength=val.length;if(urlLength<maxUrlToDisplay){return val}const urlObj=new URL(val);if(urlObj.pathname==="/"){return val}const domainVal=urlObj.hostname;const extraLength=urlLength-maxUrlToDisplay;const extraDomain=domainVal.substring(0,extraLength);if(urlObj.pathname.length+7>maxUrlToDisplay){return val.replace(domainVal,"..")}return val.replace(extraDomain,"..")};const removeFilterLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.uifilter.badge.removeFilter",{defaultMessage:"Remove filter"});function UrlList({onRemove:onRemove,value:value}){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGrid"],{gutterSize:"s"},value.map(val=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:val,grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow",onClick:()=>{onRemove(val)},onClickAriaLabel:removeFilterLabel,iconOnClick:()=>{onRemove(val)},iconOnClickAriaLabel:removeFilterLabel,iconType:"cross",iconSide:"right"},external_kbnSharedDeps_React_default.a.createElement(BadgeText,null,formatUrlValue(val))))))}var helpers=__webpack_require__(121);function URLFilter_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function URLFilter_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){URLFilter_ownKeys(Object(source),true).forEach((function(key){URLFilter_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{URLFilter_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function URLFilter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function URLFilter(){const history=Object(external_kbnSharedDeps_ReactRouterDom_["useHistory"])();const setFilterValue=(name,value)=>{const search=Object(external_kbnSharedDeps_Lodash_["omit"])(Object(url_helpers["c"])(history.location.search),name);history.push(URLFilter_objectSpread(URLFilter_objectSpread({},history.location),{},{search:Object(url_helpers["b"])(Object(helpers["d"])(URLFilter_objectSpread(URLFilter_objectSpread({},search),{},{[name]:value.length?value.join(","):undefined})))}))};const name="transactionUrl";const _useUrlParams=Object(useUrlParams["a"])(),uiFilters=_useUrlParams.uiFilters;const transactionUrl=uiFilters.transactionUrl;const filterValue=transactionUrl!==null&&transactionUrl!==void 0?transactionUrl:[];return external_kbnSharedDeps_React_default.a.createElement("span",{"data-cy":"csmUrlFilter"},external_kbnSharedDeps_React_default.a.createElement(URLSearch,{onChange:value=>{setFilterValue("transactionUrl",value)}}),filterValue.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(UrlList,{onRemove:val=>{setFilterValue(name,filterValue.filter(v=>val!==v))},value:filterValue})))}function RumDashboard_extends(){RumDashboard_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return RumDashboard_extends.apply(this,arguments)}function RumOverview(){Object(observability_public_["useTrackPageview"])({app:"ux",path:"home"});Object(observability_public_["useTrackPageview"])({app:"ux",path:"home",delay:15e3});const localUIFiltersConfig=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{const config={filterNames:["location","device","os","browser"],projection:projections["a"].rumOverview};return config},[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1},external_kbnSharedDeps_React_default.a.createElement(LocalUIFilters["a"],RumDashboard_extends({},localUIFiltersConfig,{showCount:true}),external_kbnSharedDeps_React_default.a.createElement(URLFilter,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:7},external_kbnSharedDeps_React_default.a.createElement(RumDashboard,null))))}var EnvironmentFilter=__webpack_require__(211);function ServiceNameFilter_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function ServiceNameFilter_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ServiceNameFilter_ownKeys(Object(source),true).forEach((function(key){ServiceNameFilter_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ServiceNameFilter_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function ServiceNameFilter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ServiceNameFilter({loading:loading,serviceNames:serviceNames}){const history=Object(external_kbnSharedDeps_ReactRouterDom_["useHistory"])();const _useUrlParams=Object(useUrlParams["a"])(),selectedServiceName=_useUrlParams.urlParams.serviceName;const options=serviceNames.map(type=>({text:type,value:type}));const updateServiceName=Object(external_kbnSharedDeps_React_["useCallback"])(serviceN=>{const newLocation=ServiceNameFilter_objectSpread(ServiceNameFilter_objectSpread({},history.location),{},{search:Object(url_helpers["b"])(ServiceNameFilter_objectSpread(ServiceNameFilter_objectSpread({},Object(url_helpers["c"])(history.location.search)),{},{serviceName:serviceN}))});history.push(newLocation)},[history]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if((serviceNames===null||serviceNames===void 0?void 0:serviceNames.length)>0){if(!selectedServiceName){updateServiceName(serviceNames[0])}if(selectedServiceName&&!serviceNames.includes(selectedServiceName)){updateServiceName(serviceNames[0])}}if(selectedServiceName&&serviceNames.length===0&&!loading){updateServiceName("")}},[serviceNames,selectedServiceName,updateServiceName,loading]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{prepend:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.ux.localFilters.titles.webApplication",{defaultMessage:"Web application"}),isLoading:loading,"data-cy":"serviceNameFilter",options:options,value:selectedServiceName,onChange:event=>{updateServiceName(event.target.value)}}))}var agent_name=__webpack_require__(76);function UserPercentile_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function UserPercentile_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){UserPercentile_ownKeys(Object(source),true).forEach((function(key){UserPercentile_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{UserPercentile_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function UserPercentile_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const DEFAULT_P=50;function UserPercentile(){const history=Object(external_kbnSharedDeps_ReactRouterDom_["useHistory"])();const _useUrlParams=Object(useUrlParams["a"])(),percentile=_useUrlParams.urlParams.percentile;const updatePercentile=Object(external_kbnSharedDeps_React_["useCallback"])(percentileN=>{const newLocation=UserPercentile_objectSpread(UserPercentile_objectSpread({},history.location),{},{search:Object(url_helpers["b"])(UserPercentile_objectSpread(UserPercentile_objectSpread({},Object(url_helpers["c"])(history.location.search)),{},{percentile:percentileN}))});history.push(newLocation)},[history]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!percentile){updatePercentile(DEFAULT_P)}});const options=[{value:"50",text:I18LABELS.percentile50thMedian,"data-test-subj":"p50Percentile"},{value:"75",text:I18LABELS.percentile75th,"data-test-subj":"p75Percentile"},{value:"90",text:I18LABELS.percentile90th,"data-test-subj":"p90Percentile"},{value:"95",text:I18LABELS.percentile95th,"data-test-subj":"p95Percentile"},{value:"99",text:I18LABELS.percentile99th,"data-test-subj":"p99Percentile"}];const _onChange=val=>{updatePercentile(Number(val))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{prepend:I18LABELS.percentile,"data-test-subj":"uxPercentileSelect",style:{width:150},options:options,onChange:evt=>_onChange(evt.target.value)})}function MainFilters(){const _useUrlParams=Object(useUrlParams["a"])(),_useUrlParams$urlPara=_useUrlParams.urlParams,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end;const _useFetcher=Object(useFetcher["b"])(callApmApi=>{if(start&&end){return callApmApi({endpoint:"GET /api/apm/rum-client/services",params:{query:{start:start,end:end,uiFilters:JSON.stringify({agentName:agent_name["b"]})}}})}},[start,end]),data=_useFetcher.data,status=_useFetcher.status;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(ServiceNameFilter,{loading:status!=="success",serviceNames:data!==null&&data!==void 0?data:[]})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,style:{maxWidth:200}},external_kbnSharedDeps_React_default.a.createElement(EnvironmentFilter["a"],null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(UserPercentile,null)))}var DatePicker=__webpack_require__(153);const UX_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.apm.ux.title",{defaultMessage:"User Experience"});function RumHome(){return external_kbnSharedDeps_React_default.a.createElement(CsmSharedContextProvider,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h1",{className:"eui-textNoWrap"},UX_LABEL))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{wrap:true,style:{flexWrap:"wrap-reverse"},justifyContent:"flexEnd",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(MainFilters,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(DatePicker["a"],null))))),external_kbnSharedDeps_React_default.a.createElement(RumOverview,null))}var ApmPluginContext=__webpack_require__(152);var UrlParamsContext=__webpack_require__(104);var use_breadcrumbs=__webpack_require__(309);var createCallApmApi=__webpack_require__(48);var index_pattern=__webpack_require__(310);function csmApp_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function csmApp_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){csmApp_ownKeys(Object(source),true).forEach((function(key){csmApp_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{csmApp_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function csmApp_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function csmApp_slicedToArray(arr,i){return csmApp_arrayWithHoles(arr)||csmApp_iterableToArrayLimit(arr,i)||csmApp_unsupportedIterableToArray(arr,i)||csmApp_nonIterableRest()}function csmApp_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function csmApp_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return csmApp_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return csmApp_arrayLikeToArray(o,minLen)}function csmApp_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function csmApp_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function csmApp_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const CsmMainContainer=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"CsmMainContainer",componentId:"sc-1ruzltb-0"})(["padding:",";height:100%;"],Object(variables["px"])(variables["units"].plus));const rumRoutes=[{exact:true,path:"/",render:Object(route_config["a"])("/ux"),breadcrumb:UX_LABEL}];function CsmApp(){const _useUiSetting$=Object(public_["useUiSetting$"])("theme:darkMode"),_useUiSetting$2=csmApp_slicedToArray(_useUiSetting$,1),darkMode=_useUiSetting$2[0];Object(use_breadcrumbs["a"])(rumRoutes);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_StyledComponents_["ThemeProvider"],{theme:outerTheme=>csmApp_objectSpread(csmApp_objectSpread({},outerTheme),{},{eui:darkMode?external_kbnSharedDeps_Theme_euiDarkVars_default.a:external_kbnSharedDeps_Theme_euiLightVars_default.a,darkMode:darkMode})},external_kbnSharedDeps_React_default.a.createElement(CsmMainContainer,{"data-test-subj":"csmMainContainer",role:"main"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{component:ScrollToTopOnPathChange["a"]}),external_kbnSharedDeps_React_default.a.createElement(RumHome,null)))}function CsmAppRoot({appMountParameters:appMountParameters,core:core,deps:deps,config:config,corePlugins:{embeddable:embeddable}}){const history=appMountParameters.history;const i18nCore=core.i18n;const plugins=deps;const apmPluginContextValue={appMountParameters:appMountParameters,config:config,core:core,plugins:plugins};return external_kbnSharedDeps_React_default.a.createElement(public_["RedirectAppLinks"],{application:core.application},external_kbnSharedDeps_React_default.a.createElement(ApmPluginContext["a"].Provider,{value:apmPluginContextValue},external_kbnSharedDeps_React_default.a.createElement(public_["KibanaContextProvider"],{services:csmApp_objectSpread(csmApp_objectSpread(csmApp_objectSpread({},core),plugins),{},{embeddable:embeddable})},external_kbnSharedDeps_React_default.a.createElement(i18nCore.Context,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Router"],{history:history},external_kbnSharedDeps_React_default.a.createElement(UrlParamsContext["b"],null,external_kbnSharedDeps_React_default.a.createElement(CsmApp,null)))))))}const renderApp=(core,deps,appMountParameters,config,corePlugins)=>{const element=appMountParameters.element;Object(createCallApmApi["b"])(core.http);Object(index_pattern["a"])().catch(e=>{console.log("Error creating static index pattern",e)});external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(CsmAppRoot,{appMountParameters:appMountParameters,core:core,deps:deps,config:config,corePlugins:corePlugins}),element);return()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(element)}}}}]);