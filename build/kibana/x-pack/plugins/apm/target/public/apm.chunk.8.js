/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["apm_bundle_jsonpfunction"]=window["apm_bundle_jsonpfunction"]||[]).push([[8],{73:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PopoverExpression}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(18);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function PopoverExpression(props){const title=props.title,value=props.value,children=props.children;const _useState=Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false),_useState2=_slicedToArray(_useState,2),popoverOpen=_useState2[0],setPopoverOpen=_useState2[1];return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiPopover"],{isOpen:popoverOpen,anchorPosition:"downLeft",closePopover:()=>setPopoverOpen(false),button:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiExpression"],{description:title,value:value,isActive:popoverOpen,onClick:()=>setPopoverOpen(true)})},children)}},78:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useServiceTransactionTypes}));var react_router_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20);var react_router_dom__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_0__);var _useFetcher__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(43);const INITIAL_DATA={transactionTypes:[]};function useServiceTransactionTypes(urlParams){const _useParams=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_0__["useParams"])(),serviceName=_useParams.serviceName;const start=urlParams.start,end=urlParams.end;const _useFetcher=Object(_useFetcher__WEBPACK_IMPORTED_MODULE_1__["b"])(callApmApi=>{if(serviceName&&start&&end){return callApmApi({endpoint:"GET /api/apm/services/{serviceName}/transaction_types",params:{path:{serviceName:serviceName},query:{start:start,end:end}}})}},[serviceName,start,end]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?INITIAL_DATA:_useFetcher$data;return data.transactionTypes}},849:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"TransactionErrorRateAlertTrigger",(function(){return TransactionErrorRateAlertTrigger}));var react_router_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20);var react_router_dom__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_0__);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);var react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);var _triggers_actions_ui_public__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(29);var _triggers_actions_ui_public__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_triggers_actions_ui_public__WEBPACK_IMPORTED_MODULE_2__);var _common_alert_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3);var _hooks_useEnvironments__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(108);var _hooks_useServiceTransactionTypes__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(78);var _hooks_useUrlParams__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(42);var _ServiceAlertTrigger__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(94);var _common_environment_filter_values__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(59);var _fields__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(93);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function TransactionErrorRateAlertTrigger(props){const setAlertParams=props.setAlertParams,alertParams=props.alertParams,setAlertProperty=props.setAlertProperty;const _useUrlParams=Object(_hooks_useUrlParams__WEBPACK_IMPORTED_MODULE_6__["a"])(),urlParams=_useUrlParams.urlParams;const transactionTypes=Object(_hooks_useServiceTransactionTypes__WEBPACK_IMPORTED_MODULE_5__["a"])(urlParams);const _useParams=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_0__["useParams"])(),serviceName=_useParams.serviceName;const start=urlParams.start,end=urlParams.end,transactionType=urlParams.transactionType;const _useEnvironments=Object(_hooks_useEnvironments__WEBPACK_IMPORTED_MODULE_4__["a"])({serviceName:serviceName,start:start,end:end}),environmentOptions=_useEnvironments.environmentOptions;if(serviceName&&!transactionTypes.length){return null}const defaultParams={threshold:30,windowSize:5,windowUnit:"m",transactionType:transactionType||transactionTypes[0],environment:urlParams.environment||_common_environment_filter_values__WEBPACK_IMPORTED_MODULE_8__["a"].value};const params=_objectSpread(_objectSpread({},defaultParams),alertParams);const fields=[react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_fields__WEBPACK_IMPORTED_MODULE_9__["c"],{value:serviceName}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_fields__WEBPACK_IMPORTED_MODULE_9__["d"],{currentValue:params.transactionType,options:transactionTypes.map(key=>({text:key,value:key})),onChange:e=>setAlertParams("transactionType",e.target.value)}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_fields__WEBPACK_IMPORTED_MODULE_9__["a"],{currentValue:params.environment,options:environmentOptions,onChange:e=>setAlertParams("environment",e.target.value)}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_fields__WEBPACK_IMPORTED_MODULE_9__["b"],{value:params.threshold,unit:"%",onChange:value=>setAlertParams("threshold",value)}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_triggers_actions_ui_public__WEBPACK_IMPORTED_MODULE_2__["ForLastExpression"],{onChangeWindowSize:timeWindowSize=>setAlertParams("windowSize",timeWindowSize||""),onChangeWindowUnit:timeWindowUnit=>setAlertParams("windowUnit",timeWindowUnit),timeWindowSize:params.windowSize,timeWindowUnit:params.windowUnit,errors:{timeWindowSize:[],timeWindowUnit:[]}})];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ServiceAlertTrigger__WEBPACK_IMPORTED_MODULE_7__["a"],{alertTypeName:_common_alert_types__WEBPACK_IMPORTED_MODULE_3__["a"][_common_alert_types__WEBPACK_IMPORTED_MODULE_3__["c"].TransactionErrorRate].name,fields:fields,defaults:defaultParams,setAlertParams:setAlertParams,setAlertProperty:setAlertProperty})}__webpack_exports__["default"]=TransactionErrorRateAlertTrigger},93:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return ServiceField}));__webpack_require__.d(__webpack_exports__,"a",(function(){return EnvironmentField}));__webpack_require__.d(__webpack_exports__,"d",(function(){return TransactionTypeField}));__webpack_require__.d(__webpack_exports__,"b",(function(){return IsAboveField}));var _elastic_eui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18);var _elastic_eui__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);var react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__);var _common_environment_filter_values__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(59);var _ServiceAlertTrigger_PopoverExpression__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(73);const ALL_OPTION=_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.apm.alerting.fields.all_option",{defaultMessage:"All"});function ServiceField({value:value}){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiExpression"],{description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.apm.alerting.fields.service",{defaultMessage:"Service"}),value:value||ALL_OPTION})}function EnvironmentField({currentValue:currentValue,options:options,onChange:onChange}){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ServiceAlertTrigger_PopoverExpression__WEBPACK_IMPORTED_MODULE_4__["a"],{value:Object(_common_environment_filter_values__WEBPACK_IMPORTED_MODULE_3__["c"])(currentValue),title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.apm.alerting.fields.environment",{defaultMessage:"Environment"})},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiSelect"],{defaultValue:currentValue,options:options,onChange:onChange,compressed:true}))}function TransactionTypeField({currentValue:currentValue,options:options,onChange:onChange}){const label=_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.apm.alerting.fields.type",{defaultMessage:"Type"});if(!options||options.length<=1){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiExpression"],{description:label,value:currentValue||ALL_OPTION})}return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ServiceAlertTrigger_PopoverExpression__WEBPACK_IMPORTED_MODULE_4__["a"],{value:currentValue,title:label},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiSelect"],{"data-test-subj":"transactionTypeField",defaultValue:currentValue,options:options,onChange:onChange,compressed:true}))}function IsAboveField({value:value,unit:unit,onChange:_onChange,step:step}){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ServiceAlertTrigger_PopoverExpression__WEBPACK_IMPORTED_MODULE_4__["a"],{value:value?"".concat(value.toString()).concat(unit):"",title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.apm.transactionErrorRateAlertTrigger.isAbove",{defaultMessage:"is above"})},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_0__["EuiFieldNumber"],{value:value!==null&&value!==void 0?value:"",onChange:e=>_onChange(parseInt(e.target.value,10)),append:unit,compressed:true,step:step}))}},94:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ServiceAlertTrigger}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(18);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__);var react_router_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(20);var react_router_dom__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_2__);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ServiceAlertTrigger(props){const _useParams=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_2__["useParams"])(),serviceName=_useParams.serviceName;const fields=props.fields,setAlertParams=props.setAlertParams,setAlertProperty=props.setAlertProperty,alertTypeName=props.alertTypeName,defaults=props.defaults;const params=_objectSpread(_objectSpread({},defaults),{},{serviceName:serviceName});Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(()=>{const alertName=params.serviceName?"".concat(alertTypeName," | ").concat(params.serviceName):alertTypeName;setAlertProperty("name",alertName);const tags=["apm"];if(params.serviceName){tags.push("service.name:".concat(params.serviceName).toLowerCase())}setAlertProperty("tags",tags);Object.keys(params).forEach(key=>{setAlertParams(key,params[key])})},[]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"l"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexGrid"],{gutterSize:"l",direction:"row",columns:2},fields.map((field,index)=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],{grow:false,key:index},field))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"m"}))}}}]);