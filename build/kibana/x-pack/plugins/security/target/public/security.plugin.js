/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={2:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+"security.chunk."+chunkId+".js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["security_bundle_jsonpfunction"]=window["security_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=35)})([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports,__webpack_require__){"use strict";(function(process){Object.defineProperty(exports,"__esModule",{value:true});exports.isPromise=isPromise;exports.sleep=sleep;exports.randomInt=randomInt;exports.randomToken=randomToken;exports.microSeconds=microSeconds;exports.isNode=void 0;function isPromise(obj){if(obj&&typeof obj.then==="function"){return true}else{return false}}function sleep(time){if(!time)time=0;return new Promise((function(res){return setTimeout(res,time)}))}function randomInt(min,max){return Math.floor(Math.random()*(max-min+1)+min)}function randomToken(){return Math.random().toString(36).substring(2)}var lastMs=0;var additional=0;function microSeconds(){var ms=(new Date).getTime();if(ms===lastMs){additional++;return ms*1e3+additional}else{lastMs=ms;additional=0;return ms*1e3}}var isNode=Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]";exports.isNode=isNode}).call(this,__webpack_require__(34))},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return tryDecodeURIComponent}));const tryDecodeURIComponent=uriComponent=>{try{return decodeURIComponent(uriComponent)}catch(_unused){return uriComponent}}},function(module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_interopRequireDefault},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return getUserDisplayName}));__webpack_require__.d(__webpack_exports__,"a",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"b",(function(){return canUserChangePassword}));__webpack_require__.d(__webpack_exports__,"c",(function(){return copyRole}));__webpack_require__.d(__webpack_exports__,"f",(function(){return isRoleDeprecated}));__webpack_require__.d(__webpack_exports__,"h",(function(){return isRoleReadOnly}));__webpack_require__.d(__webpack_exports__,"i",(function(){return isRoleReserved}));__webpack_require__.d(__webpack_exports__,"g",(function(){return isRoleEnabled}));__webpack_require__.d(__webpack_exports__,"j",(function(){return prepareRoleClone}));__webpack_require__.d(__webpack_exports__,"d",(function(){return getExtendedRoleDeprecationNotice}));var api_key=__webpack_require__(19);function getUserDisplayName(user){return user.full_name||user.username}const REALMS_ELIGIBLE_FOR_PASSWORD_CHANGE=["reserved","native"];function canUserChangePassword(user){return REALMS_ELIGIBLE_FOR_PASSWORD_CHANGE.includes(user.authentication_realm.type)&&user.authentication_provider.type!=="anonymous"}var builtin_es_privileges=__webpack_require__(28);var raw_kibana_privileges=__webpack_require__(20);var features_privileges=__webpack_require__(29);var external_kbnSharedDeps_Lodash_=__webpack_require__(14);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);function isRoleEnabled(role){var _role$transient_metad,_role$transient_metad2;return(_role$transient_metad=(_role$transient_metad2=role.transient_metadata)===null||_role$transient_metad2===void 0?void 0:_role$transient_metad2.enabled)!==null&&_role$transient_metad!==void 0?_role$transient_metad:true}function isRoleReserved(role){var _ref,_role$metadata;return(_ref=(_role$metadata=role.metadata)===null||_role$metadata===void 0?void 0:_role$metadata._reserved)!==null&&_ref!==void 0?_ref:false}function isRoleDeprecated(role){var _role$metadata$_depre,_role$metadata2;return(_role$metadata$_depre=(_role$metadata2=role.metadata)===null||_role$metadata2===void 0?void 0:_role$metadata2._deprecated)!==null&&_role$metadata$_depre!==void 0?_role$metadata$_depre:false}function getExtendedRoleDeprecationNotice(role){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.common.extendedRoleDeprecationNotice",{defaultMessage:"The {roleName} role is deprecated. {reason}",values:{roleName:role.name,reason:getRoleDeprecatedReason(role)}})}function isRoleReadOnly(role){var _role$_transform_erro,_role$_transform_erro2;return isRoleReserved(role)||((_role$_transform_erro=(_role$_transform_erro2=role._transform_error)===null||_role$_transform_erro2===void 0?void 0:_role$_transform_erro2.length)!==null&&_role$_transform_erro!==void 0?_role$_transform_erro:0)>0}function copyRole(role){return Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(role)}function prepareRoleClone(role){const clone=copyRole(role);clone.name="";return clone}function getRoleDeprecatedReason(role){var _role$metadata$_depre2,_role$metadata3;return(_role$metadata$_depre2=(_role$metadata3=role.metadata)===null||_role$metadata3===void 0?void 0:_role$metadata3._deprecated_reason)!==null&&_role$metadata$_depre2!==void 0?_role$metadata$_depre2:""}var role_mapping=__webpack_require__(7)},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"UserAPIClient",(function(){return UserAPIClient}));function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const usersUrl="/internal/security/users";class UserAPIClient{constructor(http){this.http=http}getUsers(){var _this=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _this.http.get(usersUrl);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})))()}getUser(username){var _this2=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this2.http.get("".concat(usersUrl,"/").concat(encodeURIComponent(username)));case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})))()}deleteUser(username){var _this3=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this3.http.delete("".concat(usersUrl,"/").concat(encodeURIComponent(username)));case 2:case"end":return _context3.stop()}}),_callee3)})))()}saveUser(user){var _this4=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this4.http.post("".concat(usersUrl,"/").concat(encodeURIComponent(user.username)),{body:JSON.stringify(user)});case 2:case"end":return _context4.stop()}}),_callee4)})))()}changePassword(username,password,currentPassword){var _this5=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var data;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:data={newPassword:password};if(currentPassword){data.password=currentPassword}_context5.next=4;return _this5.http.post("".concat(usersUrl,"/").concat(encodeURIComponent(username),"/password"),{body:JSON.stringify(data)});case 4:case"end":return _context5.stop()}}),_callee5)})))()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fillOptionsWithDefaults=fillOptionsWithDefaults;function fillOptionsWithDefaults(){var originalOptions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var options=JSON.parse(JSON.stringify(originalOptions));if(typeof options.webWorkerSupport==="undefined")options.webWorkerSupport=true;if(!options.idb)options.idb={};if(!options.idb.ttl)options.idb.ttl=1e3*45;if(!options.idb.fallbackInterval)options.idb.fallbackInterval=150;if(!options.localstorage)options.localstorage={};if(!options.localstorage.removeTimeout)options.localstorage.removeTimeout=1e3*60;if(originalOptions.methods)options.methods=originalOptions.methods;if(!options.node)options.node={};if(!options.node.ttl)options.node.ttl=1e3*60*2;if(typeof options.node.useFastPath==="undefined")options.node.useFastPath=true;return options}},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"rolesManagementApp",(function(){return rolesManagementApp}));__webpack_require__.d(__webpack_exports__,"RolesAPIClient",(function(){return roles_api_client["RolesAPIClient"]}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(4);var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(3);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class DocumentationLinksService{constructor(docLinks){_defineProperty(this,"esDocBasePath",void 0);this.esDocBasePath="".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(docLinks.DOC_LINK_VERSION,"/")}getESClusterPrivilegesDocUrl(){return"".concat(this.esDocBasePath,"security-privileges.html#privileges-list-cluster")}getESRunAsPrivilegesDocUrl(){return"".concat(this.esDocBasePath,"security-privileges.html#_run_as_privilege")}getESIndicesPrivilegesDocUrl(){return"".concat(this.esDocBasePath,"security-privileges.html#privileges-list-indices")}}var url_utils=__webpack_require__(8);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const rolesManagementApp=Object.freeze({id:"roles",create({license:license,fatalErrors:fatalErrors,getStartServices:getStartServices}){return{id:this.id,order:20,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.rolesTitle",{defaultMessage:"Roles"}),mount({element:element,setBreadcrumbs:setBreadcrumbs,history:history}){return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var rolesBreadcrumbs,_yield$Promise$all,_yield$Promise$all2,_yield$Promise$all2$,_yield$Promise$all2$$,application,docLinks,http,i18nStart,notifications,_yield$Promise$all2$$2,data,features,RolesGridPage,EditRolePage,RolesAPIClient,IndicesAPIClient,PrivilegesAPIClient,UserAPIClient,rolesAPIClient,RolesGridPageWithBreadcrumbs,EditRolePageWithBreadcrumbs;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:rolesBreadcrumbs=[{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.roles.breadcrumb",{defaultMessage:"Roles"}),href:"/"}];_context.next=3;return Promise.all([getStartServices(),__webpack_require__.e(12).then(__webpack_require__.bind(null,303)),__webpack_require__.e(3).then(__webpack_require__.bind(null,298)),Promise.resolve().then(__webpack_require__.bind(null,27)),__webpack_require__.e(17).then(__webpack_require__.bind(null,296)),__webpack_require__.e(18).then(__webpack_require__.bind(null,297)),Promise.resolve().then(__webpack_require__.bind(null,23))]);case 3:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,7);_yield$Promise$all2$=_slicedToArray(_yield$Promise$all2[0],2);_yield$Promise$all2$$=_yield$Promise$all2$[0];application=_yield$Promise$all2$$.application;docLinks=_yield$Promise$all2$$.docLinks;http=_yield$Promise$all2$$.http;i18nStart=_yield$Promise$all2$$.i18n;notifications=_yield$Promise$all2$$.notifications;_yield$Promise$all2$$2=_yield$Promise$all2$[1];data=_yield$Promise$all2$$2.data;features=_yield$Promise$all2$$2.features;RolesGridPage=_yield$Promise$all2[1].RolesGridPage;EditRolePage=_yield$Promise$all2[2].EditRolePage;RolesAPIClient=_yield$Promise$all2[3].RolesAPIClient;IndicesAPIClient=_yield$Promise$all2[4].IndicesAPIClient;PrivilegesAPIClient=_yield$Promise$all2[5].PrivilegesAPIClient;UserAPIClient=_yield$Promise$all2[6].UserAPIClient;rolesAPIClient=new RolesAPIClient(http);RolesGridPageWithBreadcrumbs=()=>{setBreadcrumbs(rolesBreadcrumbs);return external_kbnSharedDeps_React_default.a.createElement(RolesGridPage,{notifications:notifications,rolesAPIClient:rolesAPIClient,history:history})};EditRolePageWithBreadcrumbs=({action:action})=>{const _useParams=Object(external_kbnSharedDeps_ReactRouterDom_["useParams"])(),roleName=_useParams.roleName;const decodedRoleName=roleName?Object(url_utils["a"])(roleName):undefined;setBreadcrumbs([...rolesBreadcrumbs,action==="edit"&&roleName?{text:decodedRoleName,href:"/edit/".concat(encodeURIComponent(roleName))}:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.roles.createBreadcrumb",{defaultMessage:"Create"})}]);return external_kbnSharedDeps_React_default.a.createElement(EditRolePage,{action:action,roleName:decodedRoleName,rolesAPIClient:rolesAPIClient,userAPIClient:new UserAPIClient(http),indicesAPIClient:new IndicesAPIClient(http),privilegesAPIClient:new PrivilegesAPIClient(http),getFeatures:features.getFeatures,http:http,notifications:notifications,fatalErrors:fatalErrors,license:license,docLinks:new DocumentationLinksService(docLinks),uiCapabilities:application.capabilities,indexPatterns:data.indexPatterns,history:history})};Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(i18nStart.Context,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Router"],{history:history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:["/",""],exact:true},external_kbnSharedDeps_React_default.a.createElement(RolesGridPageWithBreadcrumbs,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:"/edit/:roleName?"},external_kbnSharedDeps_React_default.a.createElement(EditRolePageWithBreadcrumbs,{action:"edit"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:"/clone/:roleName"},external_kbnSharedDeps_React_default.a.createElement(EditRolePageWithBreadcrumbs,{action:"clone"}))))),element);return _context.abrupt("return",()=>{Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(element)});case 26:case"end":return _context.stop()}}),_callee)})))()}}}});var roles_api_client=__webpack_require__(27)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"UserAPIClient",(function(){return user_api_client["UserAPIClient"]}));__webpack_require__.d(__webpack_exports__,"usersManagementApp",(function(){return usersManagementApp}));var user_api_client=__webpack_require__(16);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(4);var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(3);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var url_utils=__webpack_require__(8);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const usersManagementApp=Object.freeze({id:"users",create({authc:authc,getStartServices:getStartServices}){return{id:this.id,order:10,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.usersTitle",{defaultMessage:"Users"}),mount({element:element,setBreadcrumbs:setBreadcrumbs,history:history}){return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$getStartServic,_yield$getStartServic2,coreStart,usersBreadcrumbs,_yield$Promise$all,_yield$Promise$all2,_yield$Promise$all2$,_yield$Promise$all2$$,http,notifications,i18nStart,UsersGridPage,EditUserPage,UserAPIClient,RolesAPIClient,userAPIClient,rolesAPIClient,UsersGridPageWithBreadcrumbs,EditUserPageWithBreadcrumbs;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getStartServices();case 2:_yield$getStartServic=_context.sent;_yield$getStartServic2=_slicedToArray(_yield$getStartServic,1);coreStart=_yield$getStartServic2[0];usersBreadcrumbs=[{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.users.breadcrumb",{defaultMessage:"Users"}),href:"/"}];_context.next=8;return Promise.all([getStartServices(),__webpack_require__.e(8).then(__webpack_require__.bind(null,306)),__webpack_require__.e(6).then(__webpack_require__.bind(null,305)),Promise.resolve().then(__webpack_require__.bind(null,16)),Promise.resolve().then(__webpack_require__.bind(null,22))]);case 8:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,5);_yield$Promise$all2$=_slicedToArray(_yield$Promise$all2[0],1);_yield$Promise$all2$$=_yield$Promise$all2$[0];http=_yield$Promise$all2$$.http;notifications=_yield$Promise$all2$$.notifications;i18nStart=_yield$Promise$all2$$.i18n;UsersGridPage=_yield$Promise$all2[1].UsersGridPage;EditUserPage=_yield$Promise$all2[2].EditUserPage;UserAPIClient=_yield$Promise$all2[3].UserAPIClient;RolesAPIClient=_yield$Promise$all2[4].RolesAPIClient;userAPIClient=new UserAPIClient(http);rolesAPIClient=new RolesAPIClient(http);UsersGridPageWithBreadcrumbs=()=>{setBreadcrumbs(usersBreadcrumbs);return external_kbnSharedDeps_React_default.a.createElement(UsersGridPage,{notifications:notifications,userAPIClient:userAPIClient,rolesAPIClient:rolesAPIClient,history:history,navigateToApp:coreStart.application.navigateToApp})};EditUserPageWithBreadcrumbs=()=>{const _useParams=Object(external_kbnSharedDeps_ReactRouterDom_["useParams"])(),username=_useParams.username;const decodedUsername=username?Object(url_utils["a"])(username):undefined;setBreadcrumbs([...usersBreadcrumbs,username?{text:decodedUsername,href:"/edit/".concat(encodeURIComponent(username))}:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.users.createBreadcrumb",{defaultMessage:"Create"})}]);return external_kbnSharedDeps_React_default.a.createElement(EditUserPage,{authc:authc,userAPIClient:userAPIClient,rolesAPIClient:new RolesAPIClient(http),notifications:notifications,username:decodedUsername,history:history})};Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(i18nStart.Context,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Router"],{history:history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:["/",""],exact:true},external_kbnSharedDeps_React_default.a.createElement(UsersGridPageWithBreadcrumbs,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:"/edit/:username?"},external_kbnSharedDeps_React_default.a.createElement(EditUserPageWithBreadcrumbs,null))))),element);return _context.abrupt("return",()=>{Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(element)});case 25:case"end":return _context.stop()}}),_callee)})))()}}}})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isGlobalPrivilegeDefinition}));function isGlobalPrivilegeDefinition(privilegeSpec){if(!privilegeSpec.spaces||privilegeSpec.spaces.length===0){return true}return privilegeSpec.spaces.includes("*")}},function(module,exports,__webpack_require__){"use strict";var punycode=__webpack_require__(59);var util=__webpack_require__(62);exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=__webpack_require__(63);function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}var queryIndex=url.indexOf("?"),splitter=queryIndex!==-1&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter),slashRegex=/\\/g;uSplit[0]=uSplit[0].replace(slashRegex,"/");url=uSplit.join(splitter);var rest=url;rest=rest.trim();if(!slashesDenoteHost&&url.split("#").length===1){var simplePath=simplePathPattern.exec(rest);if(simplePath){this.path=rest;this.href=rest;this.pathname=simplePath[1];if(simplePath[2]){this.search=simplePath[2];if(parseQueryString){this.query=querystring.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(parseQueryString){this.search="";this.query={}}return this}}var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){this.hostname=punycode.toASCII(this.hostname)}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(rest.indexOf(ae)===-1)continue;var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(util.isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&util.isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,(function(match){return encodeURIComponent(match)}));search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;var tkeys=Object.keys(this);for(var tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){var rkeys=Object.keys(relative);for(var rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];if(rkey!=="protocol")result[rkey]=relative[rkey]}if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){var keys=Object.keys(relative);for(var v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last==="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var ObliviousSet=function ObliviousSet(ttl){var set=new Set;var timeMap=new Map;this.has=set.has.bind(set);this.add=function(value){timeMap.set(value,now());set.add(value);_removeTooOldValues()};this.clear=function(){set.clear();timeMap.clear()};function _removeTooOldValues(){var olderThen=now()-ttl;var iterator=set[Symbol.iterator]();while(true){var value=iterator.next().value;if(!value)return;var time=timeMap.get(value);if(time<olderThen){timeMap["delete"](value);set["delete"](value)}else{return}}}};function now(){return(new Date).getTime()}var _default=ObliviousSet;exports["default"]=_default},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"RolesAPIClient",(function(){return RolesAPIClient}));var _common_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13);var _edit_role_privilege_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}class RolesAPIClient{constructor(http){this.http=http}getRoles(){var _this=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _this.http.get("/api/security/role");case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})))()}getRole(roleName){var _this2=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this2.http.get("/api/security/role/".concat(encodeURIComponent(roleName)));case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})))()}deleteRole(roleName){var _this3=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this3.http.delete("/api/security/role/".concat(encodeURIComponent(roleName)));case 2:case"end":return _context3.stop()}}),_callee3)})))()}saveRole({role:role,spacesEnabled:spacesEnabled}){var _this4=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this4.http.put("/api/security/role/".concat(encodeURIComponent(role.name)),{body:JSON.stringify(_this4.transformRoleForSave(Object(_common_model__WEBPACK_IMPORTED_MODULE_0__["c"])(role),spacesEnabled))});case 2:case"end":return _context4.stop()}}),_callee4)})))()}transformRoleForSave(role,spacesEnabled){const isPlaceholderPrivilege=indexPrivilege=>indexPrivilege.names.length===0;role.elasticsearch.indices=role.elasticsearch.indices.filter(indexPrivilege=>!isPlaceholderPrivilege(indexPrivilege));role.elasticsearch.indices.forEach(index=>index.query||delete index.query);if(!spacesEnabled){role.kibana=role.kibana.filter(_edit_role_privilege_utils__WEBPACK_IMPORTED_MODULE_1__["a"])}role.kibana.forEach(kibanaPrivilege=>{if(kibanaPrivilege.base.length>0){kibanaPrivilege.feature={}}});delete role.name;delete role.transient_metadata;delete role._unrecognized_applications;delete role._transform_error;return role}}},function(module,exports){},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/home/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(37);module.exports={BroadcastChannel:_index.BroadcastChannel,createLeaderElection:_index.createLeaderElection,clearNodeFolder:_index.clearNodeFolder,enforceOptions:_index.enforceOptions}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("entry/core/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"ManagementService",(function(){return management_service_ManagementService}));__webpack_require__.d(__webpack_exports__,"UserAPIClient",(function(){return user_api_client["UserAPIClient"]}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(4);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class DocumentationLinksService{constructor(docLinks){_defineProperty(this,"esDocBasePath",void 0);this.esDocBasePath="".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(docLinks.DOC_LINK_VERSION,"/")}getApiKeyServiceSettingsDocUrl(){return"".concat(this.esDocBasePath,"security-settings.html#api-key-service-settings")}getCreateApiKeyDocUrl(){return"".concat(this.esDocBasePath,"security-api-create-api-key.html")}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const apiKeysManagementApp=Object.freeze({id:"api_keys",create({getStartServices:getStartServices}){return{id:this.id,order:30,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.apiKeysTitle",{defaultMessage:"API Keys"}),mount({element:element,setBreadcrumbs:setBreadcrumbs}){return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$Promise$all,_yield$Promise$all2,_yield$Promise$all2$,_yield$Promise$all2$$,docLinks,http,notifications,i18nStart,application,APIKeysGridPage,APIKeysAPIClient;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setBreadcrumbs([{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.apiKeys.breadcrumb",{defaultMessage:"API Keys"}),href:"/"}]);_context.next=3;return Promise.all([getStartServices(),__webpack_require__.e(15).then(__webpack_require__.bind(null,300)),__webpack_require__.e(14).then(__webpack_require__.bind(null,294))]);case 3:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,3);_yield$Promise$all2$=_slicedToArray(_yield$Promise$all2[0],1);_yield$Promise$all2$$=_yield$Promise$all2$[0];docLinks=_yield$Promise$all2$$.docLinks;http=_yield$Promise$all2$$.http;notifications=_yield$Promise$all2$$.notifications;i18nStart=_yield$Promise$all2$$.i18n;application=_yield$Promise$all2$$.application;APIKeysGridPage=_yield$Promise$all2[1].APIKeysGridPage;APIKeysAPIClient=_yield$Promise$all2[2].APIKeysAPIClient;Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(i18nStart.Context,null,external_kbnSharedDeps_React_default.a.createElement(APIKeysGridPage,{navigateToApp:application.navigateToApp,notifications:notifications,docLinks:new DocumentationLinksService(docLinks),apiKeysAPIClient:new APIKeysAPIClient(http)})),element);return _context.abrupt("return",()=>{Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(element)});case 16:case"end":return _context.stop()}}),_callee)})))()}}}});var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(3);function documentation_links_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class documentation_links_DocumentationLinksService{constructor(docLinks){documentation_links_defineProperty(this,"esDocBasePath",void 0);this.esDocBasePath="".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(docLinks.DOC_LINK_VERSION,"/")}getRoleMappingDocUrl(){return"".concat(this.esDocBasePath,"/mapping-roles.html")}getRoleMappingAPIDocUrl(){return"".concat(this.esDocBasePath,"/security-api-put-role-mapping.html")}getRoleMappingTemplateDocUrl(){return"".concat(this.esDocBasePath,"/security-api-put-role-mapping.html#_role_templates")}getRoleMappingFieldRulesDocUrl(){return"".concat(this.esDocBasePath,"/role-mapping-resources.html#mapping-roles-rule-field")}}var url_utils=__webpack_require__(8);function role_mappings_management_app_slicedToArray(arr,i){return role_mappings_management_app_arrayWithHoles(arr)||role_mappings_management_app_iterableToArrayLimit(arr,i)||role_mappings_management_app_unsupportedIterableToArray(arr,i)||role_mappings_management_app_nonIterableRest()}function role_mappings_management_app_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function role_mappings_management_app_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return role_mappings_management_app_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return role_mappings_management_app_arrayLikeToArray(o,minLen)}function role_mappings_management_app_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function role_mappings_management_app_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function role_mappings_management_app_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function role_mappings_management_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function role_mappings_management_app_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){role_mappings_management_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){role_mappings_management_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const roleMappingsManagementApp=Object.freeze({id:"role_mappings",create({getStartServices:getStartServices}){return{id:this.id,order:40,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappingsTitle",{defaultMessage:"Role Mappings"}),mount({element:element,setBreadcrumbs:setBreadcrumbs,history:history}){return role_mappings_management_app_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$getStartServic,_yield$getStartServic2,coreStart,roleMappingsBreadcrumbs,_yield$Promise$all,_yield$Promise$all2,_yield$Promise$all2$,_yield$Promise$all2$$,docLinks,http,notifications,i18nStart,RoleMappingsGridPage,EditRoleMappingPage,RoleMappingsAPIClient,RolesAPIClient,roleMappingsAPIClient,dockLinksService,RoleMappingsGridPageWithBreadcrumbs,EditRoleMappingsPageWithBreadcrumbs;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getStartServices();case 2:_yield$getStartServic=_context.sent;_yield$getStartServic2=role_mappings_management_app_slicedToArray(_yield$getStartServic,1);coreStart=_yield$getStartServic2[0];roleMappingsBreadcrumbs=[{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.roleMapping.breadcrumb",{defaultMessage:"Role Mappings"}),href:"/"}];_context.next=8;return Promise.all([getStartServices(),__webpack_require__.e(9).then(__webpack_require__.bind(null,302)),__webpack_require__.e(5).then(__webpack_require__.bind(null,299)),__webpack_require__.e(16).then(__webpack_require__.bind(null,295)),Promise.resolve().then(__webpack_require__.bind(null,22))]);case 8:_yield$Promise$all=_context.sent;_yield$Promise$all2=role_mappings_management_app_slicedToArray(_yield$Promise$all,5);_yield$Promise$all2$=role_mappings_management_app_slicedToArray(_yield$Promise$all2[0],1);_yield$Promise$all2$$=_yield$Promise$all2$[0];docLinks=_yield$Promise$all2$$.docLinks;http=_yield$Promise$all2$$.http;notifications=_yield$Promise$all2$$.notifications;i18nStart=_yield$Promise$all2$$.i18n;RoleMappingsGridPage=_yield$Promise$all2[1].RoleMappingsGridPage;EditRoleMappingPage=_yield$Promise$all2[2].EditRoleMappingPage;RoleMappingsAPIClient=_yield$Promise$all2[3].RoleMappingsAPIClient;RolesAPIClient=_yield$Promise$all2[4].RolesAPIClient;roleMappingsAPIClient=new RoleMappingsAPIClient(http);dockLinksService=new documentation_links_DocumentationLinksService(docLinks);RoleMappingsGridPageWithBreadcrumbs=()=>{setBreadcrumbs(roleMappingsBreadcrumbs);return external_kbnSharedDeps_React_default.a.createElement(RoleMappingsGridPage,{notifications:notifications,rolesAPIClient:new RolesAPIClient(http),roleMappingsAPI:roleMappingsAPIClient,docLinks:dockLinksService,history:history,navigateToApp:coreStart.application.navigateToApp})};EditRoleMappingsPageWithBreadcrumbs=()=>{const _useParams=Object(external_kbnSharedDeps_ReactRouterDom_["useParams"])(),name=_useParams.name;const decodedName=name?Object(url_utils["a"])(name):undefined;setBreadcrumbs([...roleMappingsBreadcrumbs,name?{text:decodedName,href:"/edit/".concat(encodeURIComponent(name))}:{text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.roleMappings.createBreadcrumb",{defaultMessage:"Create"})}]);return external_kbnSharedDeps_React_default.a.createElement(EditRoleMappingPage,{name:decodedName,roleMappingsAPI:roleMappingsAPIClient,rolesAPIClient:new RolesAPIClient(http),notifications:notifications,docLinks:dockLinksService,history:history})};Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(i18nStart.Context,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Router"],{history:history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:["/",""],exact:true},external_kbnSharedDeps_React_default.a.createElement(RoleMappingsGridPageWithBreadcrumbs,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:"/edit/:name?"},external_kbnSharedDeps_React_default.a.createElement(EditRoleMappingsPageWithBreadcrumbs,null))))),element);return _context.abrupt("return",()=>{Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(element)});case 26:case"end":return _context.stop()}}),_callee)})))()}}}});var roles=__webpack_require__(22);var users=__webpack_require__(23);function management_service_slicedToArray(arr,i){return management_service_arrayWithHoles(arr)||management_service_iterableToArrayLimit(arr,i)||management_service_unsupportedIterableToArray(arr,i)||management_service_nonIterableRest()}function management_service_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function management_service_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return management_service_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return management_service_arrayLikeToArray(o,minLen)}function management_service_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function management_service_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function management_service_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function management_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function management_service_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){management_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){management_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function management_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class management_service_ManagementService{constructor(){management_service_defineProperty(this,"license",void 0);management_service_defineProperty(this,"licenseFeaturesSubscription",void 0);management_service_defineProperty(this,"securitySection",void 0)}setup({getStartServices:getStartServices,management:management,authc:authc,license:license,fatalErrors:fatalErrors}){this.license=license;this.securitySection=management.sections.section.security;this.securitySection.registerApp(users["usersManagementApp"].create({authc:authc,getStartServices:getStartServices}));this.securitySection.registerApp(roles["rolesManagementApp"].create({fatalErrors:fatalErrors,license:license,getStartServices:getStartServices}));this.securitySection.registerApp(apiKeysManagementApp.create({getStartServices:getStartServices}));this.securitySection.registerApp(roleMappingsManagementApp.create({getStartServices:getStartServices}))}start({capabilities:capabilities}){var _this=this;this.licenseFeaturesSubscription=this.license.features$.subscribe(function(){var _ref=management_service_asyncToGenerator(regeneratorRuntime.mark((function _callee(features){var securitySection,securityManagementAppsStatuses,_i,_securityManagementAp,_securityManagementAp2,app,enableStatus;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:securitySection=_this.securitySection;securityManagementAppsStatuses=[[securitySection.getApp(users["usersManagementApp"].id),features.showLinks],[securitySection.getApp(roles["rolesManagementApp"].id),features.showLinks],[securitySection.getApp(apiKeysManagementApp.id),features.showLinks],[securitySection.getApp(roleMappingsManagementApp.id),features.showLinks&&features.showRoleMappingsManagement]];_i=0,_securityManagementAp=securityManagementAppsStatuses;case 3:if(!(_i<_securityManagementAp.length)){_context.next=14;break}_securityManagementAp2=management_service_slicedToArray(_securityManagementAp[_i],2),app=_securityManagementAp2[0],enableStatus=_securityManagementAp2[1];if(!(capabilities.management.security[app.id]!==true)){_context.next=8;break}app.disable();return _context.abrupt("continue",11);case 8:if(!(app.enabled===enableStatus)){_context.next=10;break}return _context.abrupt("continue",11);case 10:if(enableStatus){app.enable()}else{app.disable()}case 11:_i++;_context.next=3;break;case 14:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}())}stop(){if(this.licenseFeaturesSubscription){this.licenseFeaturesSubscription.unsubscribe();this.licenseFeaturesSubscription=undefined}}}var user_api_client=__webpack_require__(16)},function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_security_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(36);var _node_modules_val_loader_dist_cjs_js_key_security_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_security_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/security/public",__webpack_require__,66)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["security"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"BroadcastChannel",{enumerable:true,get:function get(){return _broadcastChannel.BroadcastChannel}});Object.defineProperty(exports,"clearNodeFolder",{enumerable:true,get:function get(){return _broadcastChannel.clearNodeFolder}});Object.defineProperty(exports,"enforceOptions",{enumerable:true,get:function get(){return _broadcastChannel.enforceOptions}});Object.defineProperty(exports,"createLeaderElection",{enumerable:true,get:function get(){return _leaderElection.createLeaderElection}});var _broadcastChannel=__webpack_require__(38);var _leaderElection=__webpack_require__(45)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.clearNodeFolder=clearNodeFolder;exports.enforceOptions=enforceOptions;exports.BroadcastChannel=void 0;var _util=__webpack_require__(6);var _methodChooser=__webpack_require__(39);var _options=__webpack_require__(17);var BroadcastChannel=function BroadcastChannel(name,options){this.name=name;if(ENFORCED_OPTIONS){options=ENFORCED_OPTIONS}this.options=(0,_options.fillOptionsWithDefaults)(options);this.method=(0,_methodChooser.chooseMethod)(this.options);this._iL=false;this._onML=null;this._addEL={message:[],internal:[]};this._befC=[];this._prepP=null;_prepareChannel(this)};exports.BroadcastChannel=BroadcastChannel;BroadcastChannel._pubkey=true;function clearNodeFolder(options){options=(0,_options.fillOptionsWithDefaults)(options);var method=(0,_methodChooser.chooseMethod)(options);if(method.type==="node"){return method.clearNodeFolder().then((function(){return true}))}else{return Promise.resolve(false)}}var ENFORCED_OPTIONS;function enforceOptions(options){ENFORCED_OPTIONS=options}BroadcastChannel.prototype={postMessage:function postMessage(msg){if(this.closed){throw new Error("BroadcastChannel.postMessage(): "+"Cannot post message after channel has closed")}return _post(this,"message",msg)},postInternal:function postInternal(msg){return _post(this,"internal",msg)},set onmessage(fn){var time=this.method.microSeconds();var listenObj={time:time,fn:fn};_removeListenerObject(this,"message",this._onML);if(fn&&typeof fn==="function"){this._onML=listenObj;_addListenerObject(this,"message",listenObj)}else{this._onML=null}},addEventListener:function addEventListener(type,fn){var time=this.method.microSeconds();var listenObj={time:time,fn:fn};_addListenerObject(this,type,listenObj)},removeEventListener:function removeEventListener(type,fn){var obj=this._addEL[type].find((function(obj){return obj.fn===fn}));_removeListenerObject(this,type,obj)},close:function close(){var _this=this;if(this.closed)return;this.closed=true;var awaitPrepare=this._prepP?this._prepP:Promise.resolve();this._onML=null;this._addEL.message=[];return awaitPrepare.then((function(){return Promise.all(_this._befC.map((function(fn){return fn()})))})).then((function(){return _this.method.close(_this._state)}))},get type(){return this.method.type}};function _post(broadcastChannel,type,msg){var time=broadcastChannel.method.microSeconds();var msgObj={time:time,type:type,data:msg};var awaitPrepare=broadcastChannel._prepP?broadcastChannel._prepP:Promise.resolve();return awaitPrepare.then((function(){return broadcastChannel.method.postMessage(broadcastChannel._state,msgObj)}))}function _prepareChannel(channel){var maybePromise=channel.method.create(channel.name,channel.options);if((0,_util.isPromise)(maybePromise)){channel._prepP=maybePromise;maybePromise.then((function(s){channel._state=s}))}else{channel._state=maybePromise}}function _hasMessageListeners(channel){if(channel._addEL.message.length>0)return true;if(channel._addEL.internal.length>0)return true;return false}function _addListenerObject(channel,type,obj){channel._addEL[type].push(obj);_startListening(channel)}function _removeListenerObject(channel,type,obj){channel._addEL[type]=channel._addEL[type].filter((function(o){return o!==obj}));_stopListening(channel)}function _startListening(channel){if(!channel._iL&&_hasMessageListeners(channel)){var listenerFn=function listenerFn(msgObj){channel._addEL[msgObj.type].forEach((function(obj){if(msgObj.time>=obj.time){obj.fn(msgObj.data)}}))};var time=channel.method.microSeconds();if(channel._prepP){channel._prepP.then((function(){channel._iL=true;channel.method.onMessage(channel._state,listenerFn,time)}))}else{channel._iL=true;channel.method.onMessage(channel._state,listenerFn,time)}}}function _stopListening(channel){if(channel._iL&&!_hasMessageListeners(channel)){channel._iL=false;var time=channel.method.microSeconds();channel.method.onMessage(channel._state,null,time)}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:true});exports.chooseMethod=chooseMethod;var _native=_interopRequireDefault(__webpack_require__(40));var _indexedDb=_interopRequireDefault(__webpack_require__(41));var _localstorage=_interopRequireDefault(__webpack_require__(42));var _simulate=_interopRequireDefault(__webpack_require__(43));var _util=__webpack_require__(6);var METHODS=[_native["default"],_indexedDb["default"],_localstorage["default"]];if(_util.isNode){var NodeMethod=__webpack_require__(44);if(typeof NodeMethod.canBeUsed==="function"){METHODS.push(NodeMethod)}}function chooseMethod(options){var chooseMethods=[].concat(options.methods,METHODS).filter(Boolean);if(options.type){if(options.type==="simulate"){return _simulate["default"]}var ret=chooseMethods.find((function(m){return m.type===options.type}));if(!ret)throw new Error("method-type "+options.type+" not found");else return ret}if(!options.webWorkerSupport&&!_util.isNode){chooseMethods=chooseMethods.filter((function(m){return m.type!=="idb"}))}var useMethod=chooseMethods.find((function(method){return method.canBeUsed()}));if(!useMethod)throw new Error("No useable methode found:"+JSON.stringify(METHODS.map((function(m){return m.type}))));else return useMethod}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.create=create;exports.close=close;exports.postMessage=postMessage;exports.onMessage=onMessage;exports.canBeUsed=canBeUsed;exports.averageResponseTime=averageResponseTime;exports["default"]=exports.type=exports.microSeconds=void 0;var _util=__webpack_require__(6);var microSeconds=_util.microSeconds;exports.microSeconds=microSeconds;var type="native";exports.type=type;function create(channelName){var state={messagesCallback:null,bc:new BroadcastChannel(channelName),subFns:[]};state.bc.onmessage=function(msg){if(state.messagesCallback){state.messagesCallback(msg.data)}};return state}function close(channelState){channelState.bc.close();channelState.subFns=[]}function postMessage(channelState,messageJson){channelState.bc.postMessage(messageJson,false)}function onMessage(channelState,fn){channelState.messagesCallback=fn}function canBeUsed(){if(_util.isNode&&typeof window==="undefined")return false;if(typeof BroadcastChannel==="function"){if(BroadcastChannel._pubkey){throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill")}return true}else return false}function averageResponseTime(){return 150}var _default={create:create,close:close,onMessage:onMessage,postMessage:postMessage,canBeUsed:canBeUsed,type:type,averageResponseTime:averageResponseTime,microSeconds:microSeconds};exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:true});exports.getIdb=getIdb;exports.createDatabase=createDatabase;exports.writeMessage=writeMessage;exports.getAllMessages=getAllMessages;exports.getMessagesHigherThen=getMessagesHigherThen;exports.removeMessageById=removeMessageById;exports.getOldMessages=getOldMessages;exports.cleanOldMessages=cleanOldMessages;exports.create=create;exports.close=close;exports.postMessage=postMessage;exports.onMessage=onMessage;exports.canBeUsed=canBeUsed;exports.averageResponseTime=averageResponseTime;exports["default"]=exports.type=exports.microSeconds=void 0;var _util=__webpack_require__(6);var _obliviousSet=_interopRequireDefault(__webpack_require__(26));var _options=__webpack_require__(17);var microSeconds=_util.microSeconds;exports.microSeconds=microSeconds;var DB_PREFIX="pubkey.broadcast-channel-0-";var OBJECT_STORE_ID="messages";var type="idb";exports.type=type;function getIdb(){if(typeof indexedDB!=="undefined")return indexedDB;if(typeof window.mozIndexedDB!=="undefined")return window.mozIndexedDB;if(typeof window.webkitIndexedDB!=="undefined")return window.webkitIndexedDB;if(typeof window.msIndexedDB!=="undefined")return window.msIndexedDB;return false}function createDatabase(channelName){var IndexedDB=getIdb();var dbName=DB_PREFIX+channelName;var openRequest=IndexedDB.open(dbName,1);openRequest.onupgradeneeded=function(ev){var db=ev.target.result;db.createObjectStore(OBJECT_STORE_ID,{keyPath:"id",autoIncrement:true})};var dbPromise=new Promise((function(res,rej){openRequest.onerror=function(ev){return rej(ev)};openRequest.onsuccess=function(){res(openRequest.result)}}));return dbPromise}function writeMessage(db,readerUuid,messageJson){var time=(new Date).getTime();var writeObject={uuid:readerUuid,time:time,data:messageJson};var transaction=db.transaction([OBJECT_STORE_ID],"readwrite");return new Promise((function(res,rej){transaction.oncomplete=function(){return res()};transaction.onerror=function(ev){return rej(ev)};var objectStore=transaction.objectStore(OBJECT_STORE_ID);objectStore.add(writeObject)}))}function getAllMessages(db){var objectStore=db.transaction(OBJECT_STORE_ID).objectStore(OBJECT_STORE_ID);var ret=[];return new Promise((function(res){objectStore.openCursor().onsuccess=function(ev){var cursor=ev.target.result;if(cursor){ret.push(cursor.value);cursor["continue"]()}else{res(ret)}}}))}function getMessagesHigherThen(db,lastCursorId){var objectStore=db.transaction(OBJECT_STORE_ID).objectStore(OBJECT_STORE_ID);var ret=[];var keyRangeValue=IDBKeyRange.bound(lastCursorId+1,Infinity);return new Promise((function(res){objectStore.openCursor(keyRangeValue).onsuccess=function(ev){var cursor=ev.target.result;if(cursor){ret.push(cursor.value);cursor["continue"]()}else{res(ret)}}}))}function removeMessageById(db,id){var request=db.transaction([OBJECT_STORE_ID],"readwrite").objectStore(OBJECT_STORE_ID)["delete"](id);return new Promise((function(res){request.onsuccess=function(){return res()}}))}function getOldMessages(db,ttl){var olderThen=(new Date).getTime()-ttl;var objectStore=db.transaction(OBJECT_STORE_ID).objectStore(OBJECT_STORE_ID);var ret=[];return new Promise((function(res){objectStore.openCursor().onsuccess=function(ev){var cursor=ev.target.result;if(cursor){var msgObk=cursor.value;if(msgObk.time<olderThen){ret.push(msgObk);cursor["continue"]()}else{res(ret);return}}else{res(ret)}}}))}function cleanOldMessages(db,ttl){return getOldMessages(db,ttl).then((function(tooOld){return Promise.all(tooOld.map((function(msgObj){return removeMessageById(db,msgObj.id)})))}))}function create(channelName,options){options=(0,_options.fillOptionsWithDefaults)(options);return createDatabase(channelName).then((function(db){var state={closed:false,lastCursorId:0,channelName:channelName,options:options,uuid:(0,_util.randomToken)(),eMIs:new _obliviousSet["default"](options.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:db};_readLoop(state);return state}))}function _readLoop(state){if(state.closed)return;return readNewMessages(state).then((function(){return(0,_util.sleep)(state.options.idb.fallbackInterval)})).then((function(){return _readLoop(state)}))}function _filterMessage(msgObj,state){if(msgObj.uuid===state.uuid)return false;if(state.eMIs.has(msgObj.id))return false;if(msgObj.data.time<state.messagesCallbackTime)return false;return true}function readNewMessages(state){if(state.closed)return Promise.resolve();if(!state.messagesCallback)return Promise.resolve();return getMessagesHigherThen(state.db,state.lastCursorId).then((function(newerMessages){var useMessages=newerMessages.filter((function(msgObj){return!!msgObj})).map((function(msgObj){if(msgObj.id>state.lastCursorId){state.lastCursorId=msgObj.id}return msgObj})).filter((function(msgObj){return _filterMessage(msgObj,state)})).sort((function(msgObjA,msgObjB){return msgObjA.time-msgObjB.time}));useMessages.forEach((function(msgObj){if(state.messagesCallback){state.eMIs.add(msgObj.id);state.messagesCallback(msgObj.data)}}));return Promise.resolve()}))}function close(channelState){channelState.closed=true;channelState.db.close()}function postMessage(channelState,messageJson){channelState.writeBlockPromise=channelState.writeBlockPromise.then((function(){return writeMessage(channelState.db,channelState.uuid,messageJson)})).then((function(){if((0,_util.randomInt)(0,10)===0){cleanOldMessages(channelState.db,channelState.options.idb.ttl)}}));return channelState.writeBlockPromise}function onMessage(channelState,fn,time){channelState.messagesCallbackTime=time;channelState.messagesCallback=fn;readNewMessages(channelState)}function canBeUsed(){if(_util.isNode)return false;var idb=getIdb();if(!idb)return false;return true}function averageResponseTime(options){return options.idb.fallbackInterval*2}var _default={create:create,close:close,onMessage:onMessage,postMessage:postMessage,canBeUsed:canBeUsed,type:type,averageResponseTime:averageResponseTime,microSeconds:microSeconds};exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:true});exports.getLocalStorage=getLocalStorage;exports.storageKey=storageKey;exports.postMessage=postMessage;exports.addStorageEventListener=addStorageEventListener;exports.removeStorageEventListener=removeStorageEventListener;exports.create=create;exports.close=close;exports.onMessage=onMessage;exports.canBeUsed=canBeUsed;exports.averageResponseTime=averageResponseTime;exports["default"]=exports.type=exports.microSeconds=void 0;var _obliviousSet=_interopRequireDefault(__webpack_require__(26));var _options=__webpack_require__(17);var _util=__webpack_require__(6);var microSeconds=_util.microSeconds;exports.microSeconds=microSeconds;var KEY_PREFIX="pubkey.broadcastChannel-";var type="localstorage";exports.type=type;function getLocalStorage(){var localStorage;if(typeof window==="undefined")return null;try{localStorage=window.localStorage;localStorage=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return localStorage}function storageKey(channelName){return KEY_PREFIX+channelName}function postMessage(channelState,messageJson){return new Promise((function(res){(0,_util.sleep)().then((function(){var key=storageKey(channelState.channelName);var writeObj={token:(0,_util.randomToken)(),time:(new Date).getTime(),data:messageJson,uuid:channelState.uuid};var value=JSON.stringify(writeObj);getLocalStorage().setItem(key,value);var ev=document.createEvent("Event");ev.initEvent("storage",true,true);ev.key=key;ev.newValue=value;window.dispatchEvent(ev);res()}))}))}function addStorageEventListener(channelName,fn){var key=storageKey(channelName);var listener=function listener(ev){if(ev.key===key){fn(JSON.parse(ev.newValue))}};window.addEventListener("storage",listener);return listener}function removeStorageEventListener(listener){window.removeEventListener("storage",listener)}function create(channelName,options){options=(0,_options.fillOptionsWithDefaults)(options);if(!canBeUsed()){throw new Error("BroadcastChannel: localstorage cannot be used")}var uuid=(0,_util.randomToken)();var eMIs=new _obliviousSet["default"](options.localstorage.removeTimeout);var state={channelName:channelName,uuid:uuid,eMIs:eMIs};state.listener=addStorageEventListener(channelName,(function(msgObj){if(!state.messagesCallback)return;if(msgObj.uuid===uuid)return;if(!msgObj.token||eMIs.has(msgObj.token))return;if(msgObj.data.time&&msgObj.data.time<state.messagesCallbackTime)return;eMIs.add(msgObj.token);state.messagesCallback(msgObj.data)}));return state}function close(channelState){removeStorageEventListener(channelState.listener)}function onMessage(channelState,fn,time){channelState.messagesCallbackTime=time;channelState.messagesCallback=fn}function canBeUsed(){if(_util.isNode)return false;var ls=getLocalStorage();if(!ls)return false;try{var key="__broadcastchannel_check";ls.setItem(key,"works");ls.removeItem(key)}catch(e){return false}return true}function averageResponseTime(){var defaultTime=120;var userAgent=navigator.userAgent.toLowerCase();if(userAgent.includes("safari")&&!userAgent.includes("chrome")){return defaultTime*2}return defaultTime}var _default={create:create,close:close,onMessage:onMessage,postMessage:postMessage,canBeUsed:canBeUsed,type:type,averageResponseTime:averageResponseTime,microSeconds:microSeconds};exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.create=create;exports.close=close;exports.postMessage=postMessage;exports.onMessage=onMessage;exports.canBeUsed=canBeUsed;exports.averageResponseTime=averageResponseTime;exports["default"]=exports.type=exports.microSeconds=void 0;var _util=__webpack_require__(6);var microSeconds=_util.microSeconds;exports.microSeconds=microSeconds;var type="simulate";exports.type=type;var SIMULATE_CHANNELS=new Set;function create(channelName){var state={name:channelName,messagesCallback:null};SIMULATE_CHANNELS.add(state);return state}function close(channelState){SIMULATE_CHANNELS["delete"](channelState)}function postMessage(channelState,messageJson){return new Promise((function(res){return setTimeout((function(){var channelArray=Array.from(SIMULATE_CHANNELS);channelArray.filter((function(channel){return channel.name===channelState.name})).filter((function(channel){return channel!==channelState})).filter((function(channel){return!!channel.messagesCallback})).forEach((function(channel){return channel.messagesCallback(messageJson)}));res()}),5)}))}function onMessage(channelState,fn){channelState.messagesCallback=fn}function canBeUsed(){return true}function averageResponseTime(){return 5}var _default={create:create,close:close,onMessage:onMessage,postMessage:postMessage,canBeUsed:canBeUsed,type:type,averageResponseTime:averageResponseTime,microSeconds:microSeconds};exports["default"]=_default},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:true});exports.createLeaderElection=createLeaderElection;var _util=__webpack_require__(6);var _unload=_interopRequireDefault(__webpack_require__(46));var LeaderElection=function LeaderElection(channel,options){this._channel=channel;this._options=options;this.isLeader=false;this.isDead=false;this.token=(0,_util.randomToken)();this._isApl=false;this._reApply=false;this._unl=[];this._lstns=[];this._invs=[]};LeaderElection.prototype={applyOnce:function applyOnce(){var _this=this;if(this.isLeader)return Promise.resolve(false);if(this.isDead)return Promise.resolve(false);if(this._isApl){this._reApply=true;return Promise.resolve(false)}this._isApl=true;var stopCriteria=false;var recieved=[];var handleMessage=function handleMessage(msg){if(msg.context==="leader"&&msg.token!=_this.token){recieved.push(msg);if(msg.action==="apply"){if(msg.token>_this.token){stopCriteria=true}}if(msg.action==="tell"){stopCriteria=true}}};this._channel.addEventListener("internal",handleMessage);var ret=_sendMessage(this,"apply").then((function(){return(0,_util.sleep)(_this._options.responseTime)})).then((function(){if(stopCriteria)return Promise.reject(new Error);else return _sendMessage(_this,"apply")})).then((function(){return(0,_util.sleep)(_this._options.responseTime)})).then((function(){if(stopCriteria)return Promise.reject(new Error);else return _sendMessage(_this)})).then((function(){return _beLeader(_this)})).then((function(){return true}))["catch"]((function(){return false})).then((function(success){_this._channel.removeEventListener("internal",handleMessage);_this._isApl=false;if(!success&&_this._reApply){_this._reApply=false;return _this.applyOnce()}else return success}));return ret},awaitLeadership:function awaitLeadership(){if(!this._aLP){this._aLP=_awaitLeadershipOnce(this)}return this._aLP},die:function die(){var _this2=this;if(this.isDead)return;this.isDead=true;this._lstns.forEach((function(listener){return _this2._channel.removeEventListener("internal",listener)}));this._invs.forEach((function(interval){return clearInterval(interval)}));this._unl.forEach((function(uFn){uFn.remove()}));return _sendMessage(this,"death")}};function _awaitLeadershipOnce(leaderElector){if(leaderElector.isLeader)return Promise.resolve();return new Promise((function(res){var resolved=false;var finish=function finish(){if(resolved)return;resolved=true;clearInterval(interval);leaderElector._channel.removeEventListener("internal",whenDeathListener);res(true)};leaderElector.applyOnce().then((function(){if(leaderElector.isLeader)finish()}));var interval=setInterval((function(){leaderElector.applyOnce().then((function(){if(leaderElector.isLeader)finish()}))}),leaderElector._options.fallbackInterval);leaderElector._invs.push(interval);var whenDeathListener=function whenDeathListener(msg){if(msg.context==="leader"&&msg.action==="death"){leaderElector.applyOnce().then((function(){if(leaderElector.isLeader)finish()}))}};leaderElector._channel.addEventListener("internal",whenDeathListener);leaderElector._lstns.push(whenDeathListener)}))}function _sendMessage(leaderElector,action){var msgJson={context:"leader",action:action,token:leaderElector.token};return leaderElector._channel.postInternal(msgJson)}function _beLeader(leaderElector){leaderElector.isLeader=true;var unloadFn=_unload["default"].add((function(){return leaderElector.die()}));leaderElector._unl.push(unloadFn);var isLeaderListener=function isLeaderListener(msg){if(msg.context==="leader"&&msg.action==="apply"){_sendMessage(leaderElector,"tell")}};leaderElector._channel.addEventListener("internal",isLeaderListener);leaderElector._lstns.push(isLeaderListener);return _sendMessage(leaderElector,"tell")}function fillOptionsWithDefaults(options,channel){if(!options)options={};options=JSON.parse(JSON.stringify(options));if(!options.fallbackInterval){options.fallbackInterval=3e3}if(!options.responseTime){options.responseTime=channel.method.averageResponseTime(channel.options)}return options}function createLeaderElection(channel,options){if(channel._leaderElector){throw new Error("BroadcastChannel already has a leader-elector")}options=fillOptionsWithDefaults(options,channel);var elector=new LeaderElection(channel,options);channel._befC.push((function(){return elector.die()}));channel._leaderElector=elector;return elector}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(9);Object.defineProperty(exports,"__esModule",{value:true});exports.add=add;exports.runAll=runAll;exports.removeAll=removeAll;exports.getSize=getSize;exports["default"]=void 0;var _detectNode=_interopRequireDefault(__webpack_require__(47));var _browser=_interopRequireDefault(__webpack_require__(48));var _node=_interopRequireDefault(__webpack_require__(49));var USE_METHOD=_detectNode["default"]?_node["default"]:_browser["default"];var LISTENERS=new Set;var startedListening=false;function startListening(){if(startedListening)return;startedListening=true;USE_METHOD.add(runAll)}function add(fn){startListening();if(typeof fn!=="function")throw new Error("Listener is no function");LISTENERS.add(fn);var addReturn={remove:function remove(){return LISTENERS["delete"](fn)},run:function run(){LISTENERS["delete"](fn);return fn()}};return addReturn}function runAll(){var promises=[];LISTENERS.forEach((function(fn){promises.push(fn());LISTENERS["delete"](fn)}));return Promise.all(promises)}function removeAll(){LISTENERS.clear()}function getSize(){return LISTENERS.size}var _default={add:add,runAll:runAll,removeAll:removeAll,getSize:getSize};exports["default"]=_default},function(module,exports){module.exports=false},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function add(fn){if(typeof WorkerGlobalScope==="function"&&self instanceof WorkerGlobalScope){}else{if(typeof window.addEventListener!=="function")return;window.addEventListener("beforeunload",(function(){fn()}),true);window.addEventListener("unload",(function(){fn()}),true)}}var _default={add:add};exports["default"]=_default},function(module,exports){},function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(51);case"v7light":return __webpack_require__(53);case"v8dark":return __webpack_require__(55);case"v8light":return __webpack_require__(57)}},function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(52);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(12);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".chrNavControl__userMenu .euiContextMenuPanelTitle {\n  text-transform: none; }\n\n.chrNavControl__userMenu .euiContextMenuItem {\n  line-height: normal; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(54);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(12);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".chrNavControl__userMenu .euiContextMenuPanelTitle {\n  text-transform: none; }\n\n.chrNavControl__userMenu .euiContextMenuItem {\n  line-height: normal; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(56);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(12);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".chrNavControl__userMenu .euiContextMenuPanelTitle {\n  text-transform: none; }\n\n.chrNavControl__userMenu .euiContextMenuItem {\n  line-height: normal; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(58);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(12);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".chrNavControl__userMenu .euiContextMenuPanelTitle {\n  text-transform: none; }\n\n.chrNavControl__userMenu .euiContextMenuItem {\n  line-height: normal; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(root){var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=true&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,(function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output})).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,(function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}))}function toASCII(input){return mapDomain(input,(function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string}))}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(this)}).call(this,__webpack_require__(60)(module),__webpack_require__(61))},function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];if(!module.children)module.children=[];Object.defineProperty(module,"loaded",{enumerable:true,get:function(){return module.l}});Object.defineProperty(module,"id",{enumerable:true,get:function(){return module.i}});module.webpackPolyfill=1}return module}},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports,__webpack_require__){"use strict";module.exports={isString:function(arg){return typeof arg==="string"},isObject:function(arg){return typeof arg==="object"&&arg!==null},isNull:function(arg){return arg===null},isNullOrUndefined:function(arg){return arg==null}}},function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(64);exports.encode=exports.stringify=__webpack_require__(65)},function(module,exports,__webpack_require__){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},function(module,exports,__webpack_require__){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))})).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}})).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"SecurityPluginSetup",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SecurityPluginStart",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"AuthenticatedUser",(function(){return model["a"]}));__webpack_require__.d(__webpack_exports__,"SecurityLicense",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SecurityLicenseFeatures",(function(){return license_features["SecurityLicenseFeatures"]}));__webpack_require__.d(__webpack_exports__,"UserMenuLink",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var public_=__webpack_require__(30);const getNextParameter=()=>{const _window=window,location=_window.location;const next=encodeURIComponent("".concat(location.pathname).concat(location.search).concat(location.hash));return"&next=".concat(next)};const getProviderParameter=tenant=>{const key="".concat(tenant,"/session_provider");const providerName=sessionStorage.getItem(key);return providerName?"&provider=".concat(encodeURIComponent(providerName)):""};class SessionExpired{constructor(logoutUrl,tenant){this.logoutUrl=logoutUrl;this.tenant=tenant}logout(){const next=getNextParameter();const provider=getProviderParameter(this.tenant);window.location.assign("".concat(this.logoutUrl,"?msg=SESSION_EXPIRED").concat(next).concat(provider))}}var index_es5=__webpack_require__(31);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(5);var kibanaReact_public_=__webpack_require__(15);const SessionIdleTimeoutWarning=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiProgress"],{size:"xs",color:"danger",position:"absolute"}),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.components.sessionIdleTimeoutWarning.message",defaultMessage:"You will be logged out {timeout} due to inactivity. Click OK to resume.",values:{timeout:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedRelative"],{value:props.timeout,units:"second",updateInterval:1e3})}})),external_kbnSharedDeps_React_default.a.createElement("div",{className:"eui-textRight"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",color:"warning",onClick:props.onRefreshSession,"data-test-subj":"refreshSessionButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.components.sessionIdleTimeoutWarning.okButtonText",defaultMessage:"OK"}))));const createToast=(toastLifeTimeMs,onRefreshSession)=>{const timeout=toastLifeTimeMs+Date.now();return{color:"warning",text:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(SessionIdleTimeoutWarning,{onRefreshSession:onRefreshSession,timeout:timeout})),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.components.sessionIdleTimeoutWarning.title",{defaultMessage:"Warning"}),iconType:"clock",toastLifeTimeMs:toastLifeTimeMs}};const SessionLifespanWarning=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiProgress"],{size:"xs",color:"danger",position:"absolute"}),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.components.sessionLifespanWarning.message",defaultMessage:"Your session will reach the maximum time limit {timeout}. You will need to log in again.",values:{timeout:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedRelative"],{value:props.timeout,units:"second",updateInterval:1e3})}})));const session_lifespan_warning_createToast=toastLifeTimeMs=>{const timeout=toastLifeTimeMs+Date.now();return{color:"danger",text:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(SessionLifespanWarning,{timeout:timeout})),title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.components.sessionLifespanWarning.title",{defaultMessage:"Warning"}),iconType:"alert",toastLifeTimeMs:toastLifeTimeMs}};function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const GRACE_PERIOD_MS=5*1e3;const WARNING_MS=60*1e3;const SESSION_CHECK_MS=1e3;const SESSION_ROUTE="/internal/security/session";class session_timeout_SessionTimeout{constructor(notifications,sessionExpired,http,tenant){var _this=this;this.notifications=notifications;this.sessionExpired=sessionExpired;this.http=http;this.tenant=tenant;_defineProperty(this,"channel",void 0);_defineProperty(this,"sessionInfo",void 0);_defineProperty(this,"fetchTimer",void 0);_defineProperty(this,"warningTimer",void 0);_defineProperty(this,"expirationTimer",void 0);_defineProperty(this,"warningToast",void 0);_defineProperty(this,"fetchSessionInfoAndResetTimers",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(extend=false){var method,result;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:method=extend?"POST":"GET";_context.prev=1;_context.next=4;return _this.http.fetch(SESSION_ROUTE,{method:method,asSystemRequest:!extend});case 4:result=_context.sent;_this.handleSessionInfoAndResetTimers(result);if(_this.channel){_this.channel.postMessage(result)}_context.next=11;break;case 9:_context.prev=9;_context.t0=_context["catch"](1);case 11:case"end":return _context.stop()}}),_callee,null,[[1,9]])})));return function(){return _ref.apply(this,arguments)}}());_defineProperty(this,"handleSessionInfoAndResetTimers",sessionInfo=>{this.sessionInfo=sessionInfo;const key="".concat(this.tenant,"/session_provider");sessionStorage.setItem(key,sessionInfo.provider.name);const _this$getTimeout=this.getTimeout(),timeout=_this$getTimeout.timeout,isLifespanTimeout=_this$getTimeout.isLifespanTimeout;if(timeout==null){return}this.cleanup();const timeoutVal=timeout-WARNING_MS-GRACE_PERIOD_MS-SESSION_CHECK_MS;if(timeoutVal>0&&!isLifespanTimeout){this.startTimer(timeoutID=>this.fetchTimer=timeoutID,this.fetchSessionInfoAndResetTimers,timeoutVal)}this.startTimer(timeoutID=>this.warningTimer=timeoutID,this.showWarning,Math.max(timeout-WARNING_MS-GRACE_PERIOD_MS,0));this.startTimer(timeoutID=>this.expirationTimer=timeoutID,()=>this.sessionExpired.logout(),Math.max(timeout-GRACE_PERIOD_MS,0))});_defineProperty(this,"cleanup",()=>{if(this.fetchTimer){window.clearTimeout(this.fetchTimer)}if(this.warningTimer){window.clearTimeout(this.warningTimer)}if(this.expirationTimer){window.clearTimeout(this.expirationTimer)}if(this.warningToast){this.notifications.toasts.remove(this.warningToast);this.warningToast=undefined}});_defineProperty(this,"getTimeout",()=>{let timeout=null;let isLifespanTimeout=false;if(this.sessionInfo){const _this$sessionInfo=this.sessionInfo,now=_this$sessionInfo.now,idleTimeoutExpiration=_this$sessionInfo.idleTimeoutExpiration,lifespanExpiration=_this$sessionInfo.lifespanExpiration;if(idleTimeoutExpiration){timeout=idleTimeoutExpiration-now}if(lifespanExpiration&&(idleTimeoutExpiration===null||lifespanExpiration<=idleTimeoutExpiration)){timeout=lifespanExpiration-now;isLifespanTimeout=true}}return{timeout:timeout,isLifespanTimeout:isLifespanTimeout}});_defineProperty(this,"showWarning",()=>{const _this$getTimeout2=this.getTimeout(),timeout=_this$getTimeout2.timeout,isLifespanTimeout=_this$getTimeout2.isLifespanTimeout;const toastLifeTimeMs=Math.min(timeout-GRACE_PERIOD_MS,WARNING_MS);let toast;if(!isLifespanTimeout){const refresh=()=>this.fetchSessionInfoAndResetTimers(true);toast=createToast(toastLifeTimeMs,refresh)}else{toast=session_lifespan_warning_createToast(toastLifeTimeMs)}this.warningToast=this.notifications.toasts.add(toast)})}start(){if(this.http.anonymousPaths.isAnonymous(window.location.pathname)){return}const name="".concat(this.tenant,"/session_timeout");this.channel=new index_es5["BroadcastChannel"](name,{webWorkerSupport:false});this.channel.onmessage=this.handleSessionInfoAndResetTimers;return this.fetchSessionInfoAndResetTimers()}stop(){if(this.channel){this.channel.close()}this.cleanup()}extend(url){if(url.endsWith(SESSION_ROUTE)){return}const _this$getTimeout3=this.getTimeout(),isLifespanTimeout=_this$getTimeout3.isLifespanTimeout;if(this.warningToast&&!isLifespanTimeout){return this.fetchSessionInfoAndResetTimers()}}startTimer(updater,callback,timeout){const maxTimeout=2147483647;updater(timeout>maxTimeout?window.setTimeout(()=>this.startTimer(updater,callback,timeout-maxTimeout),maxTimeout):window.setTimeout(callback,timeout))}}class SessionTimeoutHttpInterceptor{constructor(sessionTimeout,anonymousPaths){this.sessionTimeout=sessionTimeout;this.anonymousPaths=anonymousPaths}response(httpResponse){if(this.anonymousPaths.isAnonymous(window.location.pathname)){return}if(httpResponse.fetchOptions.asSystemRequest){return}this.sessionTimeout.extend(httpResponse.request.url)}responseError(httpErrorResponse){if(this.anonymousPaths.isAnonymous(window.location.pathname)){return}if(httpErrorResponse.fetchOptions.asSystemRequest){return}const response=httpErrorResponse.response;if(!response){return}this.sessionTimeout.extend(httpErrorResponse.request.url)}}class UnauthorizedResponseHttpInterceptor{constructor(sessionExpired,anonymousPaths){this.sessionExpired=sessionExpired;this.anonymousPaths=anonymousPaths}responseError(httpErrorResponse,controller){if(this.anonymousPaths.isAnonymous(window.location.pathname)){return}if(httpErrorResponse.request.credentials==="omit"){return}const response=httpErrorResponse.response;if(!response){return}if(response.status===401){this.sessionExpired.logout();controller.halt()}}}var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(10);function license_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class license_service_SecurityLicenseService{constructor(){license_service_defineProperty(this,"licenseSubscription",void 0)}setup({license$:license$}){let rawLicense;this.licenseSubscription=license$.subscribe(nextRawLicense=>{rawLicense=nextRawLicense});return{license:Object.freeze({isLicenseAvailable:()=>{var _rawLicense$isAvailab,_rawLicense;return(_rawLicense$isAvailab=(_rawLicense=rawLicense)===null||_rawLicense===void 0?void 0:_rawLicense.isAvailable)!==null&&_rawLicense$isAvailab!==void 0?_rawLicense$isAvailab:false},isEnabled:()=>this.isSecurityEnabledFromRawLicense(rawLicense),getType:()=>{var _rawLicense2;return(_rawLicense2=rawLicense)===null||_rawLicense2===void 0?void 0:_rawLicense2.type},getFeatures:()=>this.calculateFeaturesFromRawLicense(rawLicense),features$:license$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["map"])(nextRawLicense=>this.calculateFeaturesFromRawLicense(nextRawLicense)))})}}stop(){if(this.licenseSubscription){this.licenseSubscription.unsubscribe();this.licenseSubscription=undefined}}isSecurityEnabledFromRawLicense(rawLicense){if(!rawLicense){return false}const securityFeature=rawLicense.getFeature("security");return securityFeature!==undefined&&securityFeature.isAvailable&&securityFeature.isEnabled}calculateFeaturesFromRawLicense(rawLicense){if(!(rawLicense===null||rawLicense===void 0?void 0:rawLicense.isAvailable)){return{showLogin:true,allowLogin:false,showLinks:false,showRoleMappingsManagement:false,allowAccessAgreement:false,allowAuditLogging:false,allowRoleDocumentLevelSecurity:false,allowRoleFieldLevelSecurity:false,allowRbac:false,allowSubFeaturePrivileges:false,layout:rawLicense!==undefined&&!(rawLicense===null||rawLicense===void 0?void 0:rawLicense.isAvailable)?"error-xpack-unavailable":"error-es-unavailable"}}if(!this.isSecurityEnabledFromRawLicense(rawLicense)){return{showLogin:false,allowLogin:false,showLinks:false,showRoleMappingsManagement:false,allowAccessAgreement:false,allowAuditLogging:false,allowRoleDocumentLevelSecurity:false,allowRoleFieldLevelSecurity:false,allowRbac:false,allowSubFeaturePrivileges:false}}const isLicenseStandardOrBetter=rawLicense.hasAtLeast("standard");const isLicenseGoldOrBetter=rawLicense.hasAtLeast("gold");const isLicensePlatinumOrBetter=rawLicense.hasAtLeast("platinum");return{showLogin:true,allowLogin:true,showLinks:true,showRoleMappingsManagement:isLicenseGoldOrBetter,allowAccessAgreement:isLicenseGoldOrBetter,allowAuditLogging:isLicenseStandardOrBetter,allowSubFeaturePrivileges:isLicenseGoldOrBetter,allowRoleDocumentLevelSecurity:isLicensePlatinumOrBetter,allowRoleFieldLevelSecurity:isLicensePlatinumOrBetter,allowRbac:true}}}var license_features=__webpack_require__(18);var external_kbnSharedDeps_Lodash_=__webpack_require__(14);var external_kbnSharedDeps_Rxjs_=__webpack_require__(21);var external_kbnSharedDeps_ReactDom_=__webpack_require__(4);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var nav_control_component=__webpack_require__(50);function nav_control_component_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function nav_control_component_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){nav_control_component_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){nav_control_component_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function nav_control_component_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class nav_control_component_SecurityNavControl extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);nav_control_component_defineProperty(this,"subscription",void 0);nav_control_component_defineProperty(this,"onMenuButtonClick",()=>{if(!this.state.authenticatedUser){return}this.setState({isOpen:!this.state.isOpen})});nav_control_component_defineProperty(this,"closeMenu",()=>{this.setState({isOpen:false})});this.state={isOpen:false,authenticatedUser:null,userMenuLinks:[]};props.user.then(authenticatedUser=>{this.setState({authenticatedUser:authenticatedUser})})}componentDidMount(){var _this=this;this.subscription=this.props.userMenuLinks$.subscribe(function(){var _ref=nav_control_component_asyncToGenerator(regeneratorRuntime.mark((function _callee(userMenuLinks){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.setState({userMenuLinks:userMenuLinks});case 1:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}())}componentWillUnmount(){if(this.subscription){this.subscription.unsubscribe()}}render(){const _this$props=this.props,editProfileUrl=_this$props.editProfileUrl,logoutUrl=_this$props.logoutUrl;const _this$state=this.state,authenticatedUser=_this$state.authenticatedUser,userMenuLinks=_this$state.userMenuLinks;const username=authenticatedUser&&(authenticatedUser.full_name||authenticatedUser.username)||"";const buttonContents=authenticatedUser?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAvatar"],{name:username,size:"s"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"m"});const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHeaderSectionItemButton"],{"aria-controls":"headerUserMenu","aria-expanded":this.state.isOpen,"aria-haspopup":"true","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.navControlComponent.accountMenuAriaLabel",{defaultMessage:"Account menu"}),onClick:this.onMenuButtonClick,"data-test-subj":"userMenuButton"},buttonContents);const isAnonymousUser=(authenticatedUser===null||authenticatedUser===void 0?void 0:authenticatedUser.authentication_provider.type)==="anonymous";const items=[];if(!isAnonymousUser){const profileMenuItem={name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.navControlComponent.editProfileLinkText",defaultMessage:"Profile"}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"user",size:"m"}),href:editProfileUrl,"data-test-subj":"profileLink"};items.push(profileMenuItem)}if(userMenuLinks.length){const userMenuLinkMenuItems=userMenuLinks.sort(({order:orderA=Infinity},{order:orderB=Infinity})=>orderA-orderB).map(({label:label,iconType:iconType,href:href})=>({name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,label),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:iconType,size:"m"}),href:href,"data-test-subj":"userMenuLink__".concat(label)}));items.push(...userMenuLinkMenuItems,{isSeparator:true,key:"securityNavControlComponent__userMenuLinksSeparator"})}const logoutMenuItem={name:isAnonymousUser?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.navControlComponent.loginLinkText",defaultMessage:"Log in"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.navControlComponent.logoutLinkText",defaultMessage:"Log out"}),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"exit",size:"m"}),href:logoutUrl,"data-test-subj":"logoutLink"};items.push(logoutMenuItem);const panels=[{id:0,title:username,items:items}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"headerUserMenu",ownFocus:true,button:button,isOpen:this.state.isOpen,anchorPosition:"downRight",repositionOnScroll:true,closePopover:this.closeMenu,panelPaddingSize:"none",buffer:0},external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"userMenu"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenu"],{className:"chrNavControl__userMenu",initialPanelId:0,panels:panels})))}}function nav_control_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class nav_control_service_SecurityNavControlService{constructor(){nav_control_service_defineProperty(this,"securityLicense",void 0);nav_control_service_defineProperty(this,"authc",void 0);nav_control_service_defineProperty(this,"logoutUrl",void 0);nav_control_service_defineProperty(this,"navControlRegistered",void 0);nav_control_service_defineProperty(this,"securityFeaturesSubscription",void 0);nav_control_service_defineProperty(this,"stop$",new external_kbnSharedDeps_Rxjs_["ReplaySubject"](1));nav_control_service_defineProperty(this,"userMenuLinks$",new external_kbnSharedDeps_Rxjs_["BehaviorSubject"]([]))}setup({securityLicense:securityLicense,authc:authc,logoutUrl:logoutUrl}){this.securityLicense=securityLicense;this.authc=authc;this.logoutUrl=logoutUrl}start({core:core}){this.securityFeaturesSubscription=this.securityLicense.features$.subscribe(({showLinks:showLinks})=>{const isAnonymousPath=core.http.anonymousPaths.isAnonymous(window.location.pathname);const shouldRegisterNavControl=!isAnonymousPath&&showLinks&&!this.navControlRegistered;if(shouldRegisterNavControl){this.registerSecurityNavControl(core)}});return{getUserMenuLinks$:()=>this.userMenuLinks$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["map"])(this.sortUserMenuLinks),Object(external_kbnSharedDeps_RxjsOperators_["takeUntil"])(this.stop$)),addUserMenuLinks:userMenuLinks=>{const currentLinks=this.userMenuLinks$.value;const newLinks=[...currentLinks,...userMenuLinks];this.userMenuLinks$.next(newLinks)}}}stop(){if(this.securityFeaturesSubscription){this.securityFeaturesSubscription.unsubscribe();this.securityFeaturesSubscription=undefined}this.navControlRegistered=false;this.stop$.next()}registerSecurityNavControl(core){const currentUserPromise=this.authc.getCurrentUser();core.chrome.navControls.registerRight({order:2e3,mount:el=>{const I18nContext=core.i18n.Context;const props={user:currentUserPromise,editProfileUrl:core.http.basePath.prepend("/security/account"),logoutUrl:this.logoutUrl,userMenuLinks$:this.userMenuLinks$};external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(I18nContext,null,external_kbnSharedDeps_React_default.a.createElement(nav_control_component_SecurityNavControl,props)),el);return()=>external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(el)}});this.navControlRegistered=true}sortUserMenuLinks(userMenuLinks){return Object(external_kbnSharedDeps_Lodash_["sortBy"])(userMenuLinks,"order")}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function access_agreement_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function access_agreement_app_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){access_agreement_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){access_agreement_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const accessAgreementApp=Object.freeze({id:"security_access_agreement",create({application:application,getStartServices:getStartServices}){application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.accessAgreementAppTitle",{defaultMessage:"Access Agreement"}),chromeless:true,appRoute:"/security/access_agreement",mount({element:element}){return access_agreement_app_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$Promise$all,_yield$Promise$all2,_yield$Promise$all2$,coreStart,renderAccessAgreementPage;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([getStartServices(),Promise.all([__webpack_require__.e(0),__webpack_require__.e(1),__webpack_require__.e(7)]).then(__webpack_require__.bind(null,291))]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);_yield$Promise$all2$=_slicedToArray(_yield$Promise$all2[0],1);coreStart=_yield$Promise$all2$[0];renderAccessAgreementPage=_yield$Promise$all2[1].renderAccessAgreementPage;return _context.abrupt("return",renderAccessAgreementPage(coreStart.i18n,element,{http:coreStart.http,notifications:coreStart.notifications,fatalErrors:coreStart.fatalErrors}));case 8:case"end":return _context.stop()}}),_callee)})))()}})}});function login_app_slicedToArray(arr,i){return login_app_arrayWithHoles(arr)||login_app_iterableToArrayLimit(arr,i)||login_app_unsupportedIterableToArray(arr,i)||login_app_nonIterableRest()}function login_app_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function login_app_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return login_app_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return login_app_arrayLikeToArray(o,minLen)}function login_app_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function login_app_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function login_app_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function login_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function login_app_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){login_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){login_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const loginApp=Object.freeze({id:"security_login",create({application:application,http:http,getStartServices:getStartServices,config:config}){http.anonymousPaths.register("/login");application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.loginAppTitle",{defaultMessage:"Login"}),chromeless:true,appRoute:"/login",mount({element:element}){return login_app_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$Promise$all,_yield$Promise$all2,_yield$Promise$all2$,coreStart,renderLoginPage;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([getStartServices(),Promise.all([__webpack_require__.e(1),__webpack_require__.e(4)]).then(__webpack_require__.bind(null,301))]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=login_app_slicedToArray(_yield$Promise$all,2);_yield$Promise$all2$=login_app_slicedToArray(_yield$Promise$all2[0],1);coreStart=_yield$Promise$all2$[0];renderLoginPage=_yield$Promise$all2[1].renderLoginPage;return _context.abrupt("return",renderLoginPage(coreStart.i18n,element,{http:coreStart.http,notifications:coreStart.notifications,fatalErrors:coreStart.fatalErrors,loginAssistanceMessage:config.loginAssistanceMessage}));case 8:case"end":return _context.stop()}}),_callee)})))()}})}});function logout_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function logout_app_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){logout_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){logout_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const logoutApp=Object.freeze({id:"security_logout",create({application:application,http:http}){http.anonymousPaths.register("/logout");application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.logoutAppTitle",{defaultMessage:"Logout"}),chromeless:true,appRoute:"/logout",mount(){return logout_app_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:window.sessionStorage.clear();window.location.href=http.basePath.prepend("/api/security/logout".concat(window.location.search));return _context.abrupt("return",()=>{});case 3:case"end":return _context.stop()}}),_callee)})))()}})}});function logged_out_app_slicedToArray(arr,i){return logged_out_app_arrayWithHoles(arr)||logged_out_app_iterableToArrayLimit(arr,i)||logged_out_app_unsupportedIterableToArray(arr,i)||logged_out_app_nonIterableRest()}function logged_out_app_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function logged_out_app_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return logged_out_app_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return logged_out_app_arrayLikeToArray(o,minLen)}function logged_out_app_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function logged_out_app_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function logged_out_app_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function logged_out_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function logged_out_app_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){logged_out_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){logged_out_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const loggedOutApp=Object.freeze({id:"security_logged_out",create({application:application,http:http,getStartServices:getStartServices}){http.anonymousPaths.register("/security/logged_out");application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.loggedOutAppTitle",{defaultMessage:"Logged out"}),chromeless:true,appRoute:"/security/logged_out",mount({element:element}){return logged_out_app_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$Promise$all,_yield$Promise$all2,_yield$Promise$all2$,coreStart,renderLoggedOutPage;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([getStartServices(),Promise.all([__webpack_require__.e(0),__webpack_require__.e(13)]).then(__webpack_require__.bind(null,292))]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=logged_out_app_slicedToArray(_yield$Promise$all,2);_yield$Promise$all2$=logged_out_app_slicedToArray(_yield$Promise$all2[0],1);coreStart=_yield$Promise$all2$[0];renderLoggedOutPage=_yield$Promise$all2[1].renderLoggedOutPage;return _context.abrupt("return",renderLoggedOutPage(coreStart.i18n,element,{basePath:coreStart.http.basePath}));case 8:case"end":return _context.stop()}}),_callee)})))()}})}});function overwritten_session_app_slicedToArray(arr,i){return overwritten_session_app_arrayWithHoles(arr)||overwritten_session_app_iterableToArrayLimit(arr,i)||overwritten_session_app_unsupportedIterableToArray(arr,i)||overwritten_session_app_nonIterableRest()}function overwritten_session_app_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function overwritten_session_app_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return overwritten_session_app_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return overwritten_session_app_arrayLikeToArray(o,minLen)}function overwritten_session_app_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function overwritten_session_app_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function overwritten_session_app_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function overwritten_session_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function overwritten_session_app_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){overwritten_session_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){overwritten_session_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const overwrittenSessionApp=Object.freeze({id:"security_overwritten_session",create({application:application,authc:authc,getStartServices:getStartServices}){application.register({id:this.id,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.overwrittenSessionAppTitle",{defaultMessage:"Overwritten Session"}),chromeless:true,appRoute:"/security/overwritten_session",mount({element:element}){return overwritten_session_app_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$Promise$all,_yield$Promise$all2,_yield$Promise$all2$,coreStart,renderOverwrittenSessionPage;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([getStartServices(),Promise.all([__webpack_require__.e(0),__webpack_require__.e(10)]).then(__webpack_require__.bind(null,293))]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=overwritten_session_app_slicedToArray(_yield$Promise$all,2);_yield$Promise$all2$=overwritten_session_app_slicedToArray(_yield$Promise$all2[0],1);coreStart=_yield$Promise$all2$[0];renderOverwrittenSessionPage=_yield$Promise$all2[1].renderOverwrittenSessionPage;return _context.abrupt("return",renderOverwrittenSessionPage(coreStart.i18n,element,{authc:authc,basePath:coreStart.http.basePath}));case 8:case"end":return _context.stop()}}),_callee)})))()}})}});var url=__webpack_require__(25);function capture_url_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function capture_url_app_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){capture_url_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){capture_url_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const captureURLApp=Object.freeze({id:"security_capture_url",create({application:application,fatalErrors:fatalErrors,http:http}){http.anonymousPaths.register("/internal/security/capture-url");application.register({id:this.id,title:"Capture URL",chromeless:true,appRoute:"/internal/security/capture-url",mount(){return capture_url_app_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _parse$query,_ref,providerName,providerType,_yield$http$post,location;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_ref=(_parse$query=Object(url["parse"])(window.location.href,true).query)!==null&&_parse$query!==void 0?_parse$query:{},providerName=_ref.providerName,providerType=_ref.providerType;if(!(!providerName||!providerType)){_context.next=5;break}fatalErrors.add(new Error("Provider to capture URL for is not specified."));return _context.abrupt("return",()=>{});case 5:_context.next=7;return http.post("/internal/security/login",{body:JSON.stringify({providerType:providerType,providerName:providerName,currentURL:window.location.href})});case 7:_yield$http$post=_context.sent;location=_yield$http$post.location;window.location.href=location;_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](0);fatalErrors.add(new Error("Cannot login with captured URL."));case 15:return _context.abrupt("return",()=>{});case 16:case"end":return _context.stop()}}),_callee,null,[[0,12]])})))()}})}});function authentication_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function authentication_service_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){authentication_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){authentication_service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}class authentication_service_AuthenticationService{setup({application:application,fatalErrors:fatalErrors,config:config,getStartServices:getStartServices,http:http}){const getCurrentUser=function(){var _ref=authentication_service_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return http.get("/internal/security/me",{asSystemRequest:true});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})));return function getCurrentUser(){return _ref.apply(this,arguments)}}();const areAPIKeysEnabled=function(){var _ref2=authentication_service_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return http.get("/internal/security/api_key/_enabled");case 2:return _context2.abrupt("return",_context2.sent.apiKeysEnabled);case 3:case"end":return _context2.stop()}}),_callee2)})));return function areAPIKeysEnabled(){return _ref2.apply(this,arguments)}}();accessAgreementApp.create({application:application,getStartServices:getStartServices});captureURLApp.create({application:application,fatalErrors:fatalErrors,http:http});loginApp.create({application:application,config:config,getStartServices:getStartServices,http:http});logoutApp.create({application:application,http:http});loggedOutApp.create({application:application,getStartServices:getStartServices,http:http});overwrittenSessionApp.create({application:application,authc:{getCurrentUser:getCurrentUser},getStartServices:getStartServices});return{getCurrentUser:getCurrentUser,areAPIKeysEnabled:areAPIKeysEnabled}}}var public_management=__webpack_require__(33);var core_public_=__webpack_require__(32);function account_management_app_slicedToArray(arr,i){return account_management_app_arrayWithHoles(arr)||account_management_app_iterableToArrayLimit(arr,i)||account_management_app_unsupportedIterableToArray(arr,i)||account_management_app_nonIterableRest()}function account_management_app_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function account_management_app_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return account_management_app_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return account_management_app_arrayLikeToArray(o,minLen)}function account_management_app_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function account_management_app_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function account_management_app_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function account_management_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function account_management_app_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){account_management_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){account_management_app_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const accountManagementApp=Object.freeze({id:"security_account",create({application:application,authc:authc,getStartServices:getStartServices}){const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.account.breadcrumb",{defaultMessage:"Account Management"});application.register({id:this.id,title:title,navLinkStatus:core_public_["AppNavLinkStatus"].hidden,appRoute:"/security/account",mount({element:element}){return account_management_app_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$Promise$all,_yield$Promise$all2,_yield$Promise$all2$,coreStart,renderAccountManagementPage,UserAPIClient;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([getStartServices(),__webpack_require__.e(11).then(__webpack_require__.bind(null,304)),Promise.resolve().then(__webpack_require__.bind(null,33))]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=account_management_app_slicedToArray(_yield$Promise$all,3);_yield$Promise$all2$=account_management_app_slicedToArray(_yield$Promise$all2[0],1);coreStart=_yield$Promise$all2$[0];renderAccountManagementPage=_yield$Promise$all2[1].renderAccountManagementPage;UserAPIClient=_yield$Promise$all2[2].UserAPIClient;coreStart.chrome.setBreadcrumbs([{text:title}]);return _context.abrupt("return",renderAccountManagementPage(coreStart.i18n,element,{authc:authc,notifications:coreStart.notifications,userAPIClient:new UserAPIClient(coreStart.http)}));case 10:case"end":return _context.stop()}}),_callee)})))()}})}});function insecure_cluster_alert_slicedToArray(arr,i){return insecure_cluster_alert_arrayWithHoles(arr)||insecure_cluster_alert_iterableToArrayLimit(arr,i)||insecure_cluster_alert_unsupportedIterableToArray(arr,i)||insecure_cluster_alert_nonIterableRest()}function insecure_cluster_alert_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function insecure_cluster_alert_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return insecure_cluster_alert_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return insecure_cluster_alert_arrayLikeToArray(o,minLen)}function insecure_cluster_alert_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function insecure_cluster_alert_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function insecure_cluster_alert_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const insecureClusterAlertTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.checkup.insecureClusterTitle",{defaultMessage:"Your data is not secure"});const insecureClusterAlertText=(getDocLinksService,onDismiss)=>e=>{const AlertText=()=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=insecure_cluster_alert_slicedToArray(_useState,2),persist=_useState2[0],setPersist=_useState2[1];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"insecureClusterAlertText"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.checkup.insecureClusterMessage",defaultMessage:"Don’t lose one bit. Enable our free security features."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{id:"persistDismissedAlertPreference",checked:persist,onChange:changeEvent=>setPersist(changeEvent.target.checked),label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.checkup.dontShowAgain",{defaultMessage:"Don't show again"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",color:"primary",fill:true,href:getDocLinksService().getEnableSecurityDocUrl(),target:"_blank","data-test-subj":"learnMoreButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.checkup.enableButtonText",{defaultMessage:"Enable security"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",onClick:()=>onDismiss(persist),"data-test-subj":"dismissAlertButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.checkup.dismissButtonText",{defaultMessage:"Dismiss"}))))))};Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(AlertText,null),e);return()=>Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(e)};function documentation_links_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class DocumentationLinksService{constructor(docLinks){documentation_links_defineProperty(this,"esDocBasePath",void 0);this.esDocBasePath="".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(docLinks.DOC_LINK_VERSION)}getEnableSecurityDocUrl(){return"".concat(this.esDocBasePath,"/get-started-enable-security.html?blade=kibanasecuritymessage")}}function security_checkup_service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class security_checkup_service_SecurityCheckupService{constructor(){security_checkup_service_defineProperty(this,"securityOssStart",void 0);security_checkup_service_defineProperty(this,"docLinksService",void 0)}setup({securityOssSetup:securityOssSetup}){securityOssSetup.insecureCluster.setAlertTitle(insecureClusterAlertTitle);securityOssSetup.insecureCluster.setAlertText(insecureClusterAlertText(()=>this.docLinksService,persist=>this.onDismiss(persist)))}start({securityOssStart:securityOssStart,docLinks:docLinks}){this.securityOssStart=securityOssStart;this.docLinksService=new DocumentationLinksService(docLinks)}onDismiss(persist){if(this.securityOssStart){this.securityOssStart.insecureCluster.hideAlert(persist)}}stop(){}}function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class plugin_SecurityPlugin{constructor(initializerContext){this.initializerContext=initializerContext;plugin_defineProperty(this,"sessionTimeout",void 0);plugin_defineProperty(this,"authenticationService",new authentication_service_AuthenticationService);plugin_defineProperty(this,"navControlService",new nav_control_service_SecurityNavControlService);plugin_defineProperty(this,"securityLicenseService",new license_service_SecurityLicenseService);plugin_defineProperty(this,"managementService",new public_management["ManagementService"]);plugin_defineProperty(this,"securityCheckupService",new security_checkup_service_SecurityCheckupService);plugin_defineProperty(this,"authc",void 0);plugin_defineProperty(this,"config",void 0);this.config=this.initializerContext.config.get()}setup(core,{home:home,licensing:licensing,management:management,securityOss:securityOss}){const http=core.http,notifications=core.notifications;const anonymousPaths=http.anonymousPaths;const logoutUrl="".concat(core.http.basePath.serverBasePath,"/logout");const tenant=core.http.basePath.serverBasePath;const sessionExpired=new SessionExpired(logoutUrl,tenant);http.intercept(new UnauthorizedResponseHttpInterceptor(sessionExpired,anonymousPaths));this.sessionTimeout=new session_timeout_SessionTimeout(notifications,sessionExpired,http,tenant);http.intercept(new SessionTimeoutHttpInterceptor(this.sessionTimeout,anonymousPaths));const _this$securityLicense=this.securityLicenseService.setup({license$:licensing.license$}),license=_this$securityLicense.license;this.securityCheckupService.setup({securityOssSetup:securityOss});this.authc=this.authenticationService.setup({application:core.application,fatalErrors:core.fatalErrors,config:this.config,getStartServices:core.getStartServices,http:core.http});this.navControlService.setup({securityLicense:license,authc:this.authc,logoutUrl:logoutUrl});accountManagementApp.create({authc:this.authc,application:core.application,getStartServices:core.getStartServices});if(management){this.managementService.setup({license:license,management:management,authc:this.authc,fatalErrors:core.fatalErrors,getStartServices:core.getStartServices})}if(management&&home){home.featureCatalogue.register({id:"security",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.registerFeature.securitySettingsTitle",{defaultMessage:"Manage permissions"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.registerFeature.securitySettingsDescription",{defaultMessage:"Control who has access and what tasks they can perform."}),icon:"securityApp",path:"/app/management/security/roles",showOnHomePage:true,category:public_["FeatureCatalogueCategory"].ADMIN,order:600})}return{authc:this.authc,sessionTimeout:this.sessionTimeout,license:license,__legacyCompat:{logoutUrl:logoutUrl,tenant:tenant}}}start(core,{management:management,securityOss:securityOss}){this.sessionTimeout.start();this.securityCheckupService.start({securityOssStart:securityOss,docLinks:core.docLinks});if(management){this.managementService.start({capabilities:core.application.capabilities})}return{navControlService:this.navControlService.start({core:core})}}stop(){this.sessionTimeout.stop();this.navControlService.stop();this.securityLicenseService.stop();this.managementService.stop();this.securityCheckupService.stop()}}var model=__webpack_require__(13);const public_plugin=initializerContext=>new plugin_SecurityPlugin(initializerContext)},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/spaces/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/features/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/spaces/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))}]);