/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["security_bundle_jsonpfunction"]=window["security_bundle_jsonpfunction"]||[]).push([[9],{302:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"RoleMappingsGridPage",(function(){return role_mappings_grid_page_RoleMappingsGridPage}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(5);const EDIT_ROLE_MAPPING_PATH="/edit";const getEditRoleMappingHref=roleMappingName=>"".concat(EDIT_ROLE_MAPPING_PATH,"/").concat(encodeURIComponent(roleMappingName));var public_=__webpack_require__(15);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const CreateRoleMappingButton=({history:history})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],_extends({"data-test-subj":"createRoleMappingButton"},Object(public_["reactRouterNavigate"])(history,EDIT_ROLE_MAPPING_PATH),{fill:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.createRoleMappingButton",defaultMessage:"Create role mapping"}));const EmptyPrompt=({history:history})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"managementApp",title:external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.emptyPromptTitle",defaultMessage:"Create your first role mapping"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.emptyPromptDescription",defaultMessage:"Role mappings control which roles are assigned to your users."}))),actions:external_kbnSharedDeps_React_default.a.createElement(CreateRoleMappingButton,{history:history}),"data-test-subj":"roleMappingsEmptyPrompt"});var components=__webpack_require__(90);var role_table_display=__webpack_require__(95);var badges=__webpack_require__(81);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function role_mappings_grid_page_extends(){role_mappings_grid_page_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return role_mappings_grid_page_extends.apply(this,arguments)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class role_mappings_grid_page_RoleMappingsGridPage extends external_kbnSharedDeps_React_["Component"]{constructor(props){var _this;super(props);_this=this;_defineProperty(this,"renderTable",()=>{const _this$state=this.state,roleMappings=_this$state.roleMappings,selectedItems=_this$state.selectedItems,loadState=_this$state.loadState;const message=loadState==="loadingTable"?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.roleMappingTableLoadingMessage",defaultMessage:"Loading role mappingsâ€¦"}):undefined;const sorting={sort:{field:"name",direction:"asc"}};const pagination={initialPageSize:20,pageSizeOptions:[10,20,50]};const selection={onSelectionChange:newSelectedItems=>{this.setState({selectedItems:newSelectedItems})}};const search={toolsLeft:selectedItems.length?external_kbnSharedDeps_React_default.a.createElement(components["a"],{roleMappingsAPI:this.props.roleMappingsAPI,notifications:this.props.notifications},deleteRoleMappingsPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:()=>deleteRoleMappingsPrompt(selectedItems,this.onRoleMappingsDeleted),color:"danger","data-test-subj":"bulkDeleteActionButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.deleteRoleMappingButton",defaultMessage:"Delete {count, plural, one {role mapping} other {role mappings}}",values:{count:selectedItems.length}}))):undefined,toolsRight:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"secondary",iconType:"refresh",onClick:()=>this.reloadRoleMappings(),"data-test-subj":"reloadButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.reloadRoleMappingsButton",defaultMessage:"Reload"})),box:{incremental:true},filters:undefined};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:roleMappings,itemId:"name",columns:this.getColumnConfig(),search:search,sorting:sorting,selection:selection,pagination:pagination,loading:loadState==="loadingTable",message:message,isSelectable:true,rowProps:()=>({"data-test-subj":"roleMappingRow"})})});_defineProperty(this,"getColumnConfig",()=>{const config=[{field:"name",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.nameColumnName",{defaultMessage:"Name"}),sortable:true,render:roleMappingName=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],role_mappings_grid_page_extends({},Object(public_["reactRouterNavigate"])(this.props.history,getEditRoleMappingHref(roleMappingName)),{"data-test-subj":"roleMappingName"}),roleMappingName)},{field:"roles",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.rolesColumnName",{defaultMessage:"Roles"}),sortable:true,render:(entry,record)=>{const _record$roles=record.roles,assignedRoleNames=_record$roles===void 0?[]:_record$roles,_record$role_template=record.role_templates,roleTemplates=_record$role_template===void 0?[]:_record$role_template;if(roleTemplates.length>0){return external_kbnSharedDeps_React_default.a.createElement("span",{"data-test-subj":"roleMappingRoles"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.roleTemplates",{defaultMessage:"{templateCount, plural, one{# role template} other {# role templates}} defined",values:{templateCount:roleTemplates.length}}))}const roleLinks=assignedRoleNames.map((rolename,index)=>{var _this$state$roles$fin,_this$state$roles;const role=(_this$state$roles$fin=(_this$state$roles=this.state.roles)===null||_this$state$roles===void 0?void 0:_this$state$roles.find(r=>r.name===rolename))!==null&&_this$state$roles$fin!==void 0?_this$state$roles$fin:rolename;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,key:rolename},external_kbnSharedDeps_React_default.a.createElement(role_table_display["a"],{role:role,navigateToApp:this.props.navigateToApp}))});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s","data-test-subj":"roleMappingRoles",wrap:true},roleLinks)}},{field:"enabled",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.enabledColumnName",{defaultMessage:"Enabled"}),sortable:true,render:enabled=>{if(enabled){return external_kbnSharedDeps_React_default.a.createElement(badges["c"],{"data-test-subj":"roleMappingEnabled"})}return external_kbnSharedDeps_React_default.a.createElement(badges["b"],{"data-test-subj":"roleMappingEnabled"})}},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.actionsColumnName",{defaultMessage:"Actions"}),actions:[{render:record=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.actionEditTooltip",{defaultMessage:"Edit"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],role_mappings_grid_page_extends({"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.actionEditAriaLabel",{defaultMessage:"Edit '{name}'",values:{name:record.name}}),iconType:"pencil",color:"primary","data-test-subj":"editRoleMappingButton-".concat(record.name)},Object(public_["reactRouterNavigate"])(this.props.history,getEditRoleMappingHref(record.name)))))},{render:record=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(components["a"],{roleMappingsAPI:this.props.roleMappingsAPI,notifications:this.props.notifications},deleteRoleMappingPrompt=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.actionDeleteTooltip",{defaultMessage:"Delete"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.actionDeleteAriaLabel",{defaultMessage:"Delete '{name}'",values:{name:record.name}}),iconType:"trash",color:"danger","data-test-subj":"deleteRoleMappingButton-".concat(record.name),onClick:()=>deleteRoleMappingPrompt([record],this.onRoleMappingsDeleted)})))))}]}];return config});_defineProperty(this,"onRoleMappingsDeleted",roleMappings=>{if(roleMappings.length){this.reloadRoleMappings()}});_defineProperty(this,"performInitialLoad",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$Promise$all,_yield$Promise$all2,roleMappings,roles;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Promise.all([_this.props.roleMappingsAPI.getRoleMappings(),_this.props.rolesAPIClient.getRoles()]);case 3:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);roleMappings=_yield$Promise$all2[0];roles=_yield$Promise$all2[1];_this.setState({roleMappings:roleMappings,roles:roles});_context.next=13;break;case 10:_context.prev=10;_context.t0=_context["catch"](0);_this.setState({error:_context.t0});case 13:_this.setState({loadState:"finished"});case 14:case"end":return _context.stop()}}),_callee,null,[[0,10]])}))));_defineProperty(this,"reloadRoleMappings",()=>{this.setState({roleMappings:[],loadState:"loadingTable"});this.loadRoleMappings()});_defineProperty(this,"loadRoleMappings",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var roleMappings;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _this.props.roleMappingsAPI.getRoleMappings();case 3:roleMappings=_context2.sent;_this.setState({roleMappings:roleMappings});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](0);_this.setState({error:_context2.t0});case 10:_this.setState({loadState:"finished"});case 11:case"end":return _context2.stop()}}),_callee2,null,[[0,7]])}))));this.state={loadState:"loadingApp",roleMappings:null,roles:null,hasCompatibleRealms:true,selectedItems:[],error:undefined}}componentDidMount(){this.checkPrivileges()}render(){const _this$state2=this.state,loadState=_this$state2.loadState,error=_this$state2.error,roleMappings=_this$state2.roleMappings;if(loadState==="permissionDenied"){return external_kbnSharedDeps_React_default.a.createElement(components["c"],null)}if(loadState==="loadingApp"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(components["d"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.loadingRoleMappingsDescription",defaultMessage:"Loading role mappingsâ€¦"})))}if(error){const _error$body=error.body,errorTitle=_error$body.error,message=_error$body.message,statusCode=_error$body.statusCode;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.loadingRoleMappingsErrorTitle",defaultMessage:"Error loading Role mappings"}),color:"danger",iconType:"alert"},statusCode,": ",errorTitle," - ",message))}if(loadState==="finished"&&roleMappings&&roleMappings.length===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(EmptyPrompt,{history:this.props.history}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.roleMappingTitle",defaultMessage:"Role Mappings"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.roleMappingDescription",defaultMessage:"Role mappings define which roles are assigned to users from an external identity provider. {learnMoreLink}",values:{learnMoreLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:this.props.docLinks.getRoleMappingDocUrl(),external:true,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.learnMoreLinkText",defaultMessage:"Learn more."}))}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],role_mappings_grid_page_extends({"data-test-subj":"createRoleMappingButton"},Object(public_["reactRouterNavigate"])(this.props.history,EDIT_ROLE_MAPPING_PATH)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.createRoleMappingButtonLabel",defaultMessage:"Create role mapping"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,!this.state.hasCompatibleRealms&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(components["b"],{docLinks:this.props.docLinks}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),this.renderTable())))}checkPrivileges(){var _this2=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var _yield$_this2$props$r,canManageRoleMappings,hasCompatibleRealms;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return _this2.props.roleMappingsAPI.checkRoleMappingFeatures();case 3:_yield$_this2$props$r=_context3.sent;canManageRoleMappings=_yield$_this2$props$r.canManageRoleMappings;hasCompatibleRealms=_yield$_this2$props$r.hasCompatibleRealms;_this2.setState({loadState:canManageRoleMappings?_this2.state.loadState:"permissionDenied",hasCompatibleRealms:hasCompatibleRealms});if(canManageRoleMappings){_this2.performInitialLoad()}_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3["catch"](0);_this2.setState({error:_context3.t0,loadState:"finished"});case 13:case"end":return _context3.stop()}}),_callee3,null,[[0,10]])})))()}}},81:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DeprecatedBadge}));__webpack_require__.d(__webpack_exports__,"b",(function(){return DisabledBadge}));__webpack_require__.d(__webpack_exports__,"c",(function(){return EnabledBadge}));__webpack_require__.d(__webpack_exports__,"d",(function(){return ReservedBadge}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(5);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);const OptionalToolTip=props=>{if(props.tooltipContent){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:props.tooltipContent},props.children)}return props.children};const DeprecatedBadge=props=>external_kbnSharedDeps_React_default.a.createElement(OptionalToolTip,{tooltipContent:props.tooltipContent},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{"data-test-subj":props["data-test-subj"],color:"warning"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.deprecatedBadge",defaultMessage:"Deprecated"})));const DisabledBadge=props=>external_kbnSharedDeps_React_default.a.createElement(OptionalToolTip,{tooltipContent:props.tooltipContent},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{"data-test-subj":props["data-test-subj"],color:"hollow"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.disabledBadge",defaultMessage:"Disabled"})));const EnabledBadge=props=>external_kbnSharedDeps_React_default.a.createElement(OptionalToolTip,{tooltipContent:props.tooltipContent},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{"data-test-subj":props["data-test-subj"],color:"secondary"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.enabledBadge",defaultMessage:"Enabled"})));const ReservedBadge=props=>external_kbnSharedDeps_React_default.a.createElement(OptionalToolTip,{tooltipContent:props.tooltipContent},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{"data-test-subj":props["data-test-subj"],color:"primary"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.reservedBadge",defaultMessage:"Reserved"})))},90:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DeleteProvider}));__webpack_require__.d(__webpack_exports__,"b",(function(){return NoCompatibleRealms}));__webpack_require__.d(__webpack_exports__,"c",(function(){return PermissionDenied}));__webpack_require__.d(__webpack_exports__,"d",(function(){return SectionLoading}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const DeleteProvider=({roleMappingsAPI:roleMappingsAPI,children:children,notifications:notifications})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=_slicedToArray(_useState,2),roleMappings=_useState2[0],setRoleMappings=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=_slicedToArray(_useState3,2),isModalOpen=_useState4[0],setIsModalOpen=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(false),_useState6=_slicedToArray(_useState5,2),isDeleteInProgress=_useState6[0],setIsDeleteInProgress=_useState6[1];const onSuccessCallback=Object(external_kbnSharedDeps_React_["useRef"])(null);const deleteRoleMappingsPrompt=(roleMappingsToDelete,onSuccess=(()=>undefined))=>{if(!roleMappingsToDelete||!roleMappingsToDelete.length){throw new Error("No Role Mappings specified for delete")}setIsModalOpen(true);setRoleMappings(roleMappingsToDelete);onSuccessCallback.current=onSuccess};const closeModal=()=>{setIsModalOpen(false);setRoleMappings([])};const deleteRoleMappings=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var result,successfulDeletes,erroredDeletes,hasMultipleSuccesses,successMessage,hasMultipleErrors,errorMessage;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsDeleteInProgress(true);_context.prev=1;_context.next=4;return roleMappingsAPI.deleteRoleMappings(roleMappings.map(rm=>rm.name));case 4:result=_context.sent;_context.next=12;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);notifications.toasts.addError(_context.t0,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.unknownError",{defaultMessage:"Error deleting role mappings"})});setIsDeleteInProgress(false);return _context.abrupt("return");case 12:setIsDeleteInProgress(false);closeModal();successfulDeletes=result.filter(res=>res.success);erroredDeletes=result.filter(res=>!res.success);if(successfulDeletes.length>0){hasMultipleSuccesses=successfulDeletes.length>1;successMessage=hasMultipleSuccesses?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.successMultipleNotificationTitle",{defaultMessage:"Deleted {count} role mappings",values:{count:successfulDeletes.length}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.successSingleNotificationTitle",{defaultMessage:"Deleted role mapping '{name}'",values:{name:successfulDeletes[0].name}});notifications.toasts.addSuccess({title:successMessage,"data-test-subj":"deletedRoleMappingSuccessToast"});if(onSuccessCallback.current){onSuccessCallback.current(successfulDeletes.map(({name:name})=>name))}}if(erroredDeletes.length>0){hasMultipleErrors=erroredDeletes.length>1;errorMessage=hasMultipleErrors?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.errorMultipleNotificationTitle",{defaultMessage:"Error deleting {count} role mappings",values:{count:erroredDeletes.length}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.errorSingleNotificationTitle",{defaultMessage:"Error deleting role mapping '{name}'",values:{name:erroredDeletes[0].name}});notifications.toasts.addDanger(errorMessage)}case 18:case"end":return _context.stop()}}),_callee,null,[[1,7]])})));return function deleteRoleMappings(){return _ref.apply(this,arguments)}}();const renderModal=()=>{if(!isModalOpen){return null}const isSingle=roleMappings.length===1;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:isSingle?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.deleteSingleTitle",{defaultMessage:"Delete role mapping '{name}'?",values:{name:roleMappings[0].name}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.deleteMultipleTitle",{defaultMessage:"Delete {count} role mappings?",values:{count:roleMappings.length}}),onCancel:closeModal,onConfirm:deleteRoleMappings,cancelButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.confirmButtonLabel",{defaultMessage:"Delete {count, plural, one {role mapping} other {role mappings}}",values:{count:roleMappings.length}}),confirmButtonDisabled:isDeleteInProgress,buttonColor:"danger","data-test-subj":"deleteRoleMappingConfirmationModal"},!isSingle?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.deleteMultipleListDescription",{defaultMessage:"You are about to delete these role mappings:"})),external_kbnSharedDeps_React_default.a.createElement("ul",null,roleMappings.map(({name:name})=>external_kbnSharedDeps_React_default.a.createElement("li",{key:name},name)))):null))};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,children(deleteRoleMappingsPrompt),renderModal())};var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(5);const NoCompatibleRealms=({docLinks:docLinks})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.noCompatibleRealmsErrorTitle",defaultMessage:"No compatible realms are enabled in Elasticsearch"}),color:"warning",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.noCompatibleRealmsErrorDescription",defaultMessage:"Role mappings will not be applied to any users. Contact your system administrator and refer to the {link} for more information.",values:{link:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:docLinks.getRoleMappingDocUrl(),external:true,target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.noCompatibleRealmsErrorLinkText",defaultMessage:"docs"}))}}));const PermissionDenied=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{horizontalPosition:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"securityApp",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.deniedPermissionTitle",defaultMessage:"You need permission to manage role mappings"})),body:external_kbnSharedDeps_React_default.a.createElement("p",{"data-test-subj":"permissionDeniedMessage"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.roleMappings.deniedPermissionDescription",defaultMessage:"Contact your system administrator."}))})));const SectionLoading=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"}),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},props.children||external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.security.management.editRoleMapping.loadingRoleMappingDescription",defaultMessage:"Loadingâ€¦"})),"data-test-subj":"sectionLoading"})},95:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RoleTableDisplay}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var model=__webpack_require__(13);const RoleTableDisplay=({role:role,navigateToApp:navigateToApp})=>{let content;let path;if(typeof role==="string"){content=external_kbnSharedDeps_React_default.a.createElement("div",null,role);path="security/roles/edit/".concat(encodeURIComponent(role))}else if(Object(model["f"])(role)){content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:Object(model["d"])(role),"data-test-subj":"roleDeprecationTooltip"},external_kbnSharedDeps_React_default.a.createElement("div",null,role.name," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"alert",color:"warning",size:"s",className:"eui-alignTop"})));path="security/roles/edit/".concat(encodeURIComponent(role.name))}else{content=external_kbnSharedDeps_React_default.a.createElement("div",null,role.name);path="security/roles/edit/".concat(encodeURIComponent(role.name))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>navigateToApp("management",{path:path})},content)}}}]);