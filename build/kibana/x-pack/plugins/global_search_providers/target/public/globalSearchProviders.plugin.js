/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=3)})([function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,exports,__webpack_require__){"use strict";module.exports=function(){function _min(d0,d1,d2,bx,ay){return d0<d1||d2<d1?d0>d2?d2+1:d0+1:bx===ay?d1:d1+1}return function(a,b){if(a===b){return 0}if(a.length>b.length){var tmp=a;a=b;b=tmp}var la=a.length;var lb=b.length;while(la>0&&a.charCodeAt(la-1)===b.charCodeAt(lb-1)){la--;lb--}var offset=0;while(offset<la&&a.charCodeAt(offset)===b.charCodeAt(offset)){offset++}la-=offset;lb-=offset;if(la===0||lb<3){return lb}var x=0;var y;var d0;var d1;var d2;var d3;var dd;var dy;var ay;var bx0;var bx1;var bx2;var bx3;var vector=[];for(y=0;y<la;y++){vector.push(y+1);vector.push(a.charCodeAt(offset+y))}var len=vector.length-1;for(;x<lb-3;){bx0=b.charCodeAt(offset+(d0=x));bx1=b.charCodeAt(offset+(d1=x+1));bx2=b.charCodeAt(offset+(d2=x+2));bx3=b.charCodeAt(offset+(d3=x+3));dd=x+=4;for(y=0;y<len;y+=2){dy=vector[y];ay=vector[y+1];d0=_min(dy,d0,d1,bx0,ay);d1=_min(d0,d1,d2,bx1,ay);d2=_min(d1,d2,d3,bx2,ay);dd=_min(d2,d3,dd,bx3,ay);vector[y]=dd;d3=d2;d2=d1;d1=d0;d0=dy}}for(;x<lb;){bx0=b.charCodeAt(offset+(d0=x));dd=++x;for(y=0;y<len;y+=2){dy=vector[y];vector[y]=dd=_min(dy,d0,dd,bx0,vector[y+1]);d0=dy}}return dd}}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_globalSearchProviders_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var _node_modules_val_loader_dist_cjs_js_key_globalSearchProviders_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_globalSearchProviders_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/globalSearchProviders/public",__webpack_require__,5)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["globalSearchProviders"]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_Rxjs_=__webpack_require__(1);var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(0);var js_levenshtein=__webpack_require__(2);var js_levenshtein_default=__webpack_require__.n(js_levenshtein);const getAppResults=(term,apps)=>apps.map(app=>({app:app,score:scoreApp(term,app)})).filter(({score:score})=>score>0).map(({app:app,score:score})=>appToResult(app,score));const scoreApp=(term,{title:title})=>{term=term.toLowerCase();title=title.toLowerCase();if(title===term){return 100}if(title.startsWith(term)){return 90}if(title.includes(term)){return 75}const length=Math.max(term.length,title.length);const distance=js_levenshtein_default()(term,title);const ratio=Math.floor((1-distance/length)*100);if(ratio>=60){return ratio}return 0};const appToResult=(app,score)=>{var _app$category$id,_app$category,_app$category$label,_app$category2;return{id:app.id,title:app.title,type:"application",icon:app.euiIconType,url:app.appRoute,meta:{categoryId:(_app$category$id=(_app$category=app.category)===null||_app$category===void 0?void 0:_app$category.id)!==null&&_app$category$id!==void 0?_app$category$id:null,categoryLabel:(_app$category$label=(_app$category2=app.category)===null||_app$category2===void 0?void 0:_app$category2.label)!==null&&_app$category$label!==void 0?_app$category$label:null},score:score}};const createApplicationResultProvider=applicationPromise=>{const searchableApps$=Object(external_kbnSharedDeps_Rxjs_["from"])(applicationPromise).pipe(Object(external_kbnSharedDeps_RxjsOperators_["mergeMap"])(application=>application.applications$),Object(external_kbnSharedDeps_RxjsOperators_["map"])(apps=>[...apps.values()].filter(app=>app.status===0&&app.navLinkStatus===1&&app.chromeless!==true)),Object(external_kbnSharedDeps_RxjsOperators_["shareReplay"])(1));return{id:"application",find:({term:term,types:types,tags:tags},{aborted$:aborted$,maxResults:maxResults})=>{if(tags||types&&!types.includes("application")){return Object(external_kbnSharedDeps_Rxjs_["of"])([])}return searchableApps$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["takeUntil"])(aborted$),Object(external_kbnSharedDeps_RxjsOperators_["take"])(1),Object(external_kbnSharedDeps_RxjsOperators_["map"])(apps=>{const results=getAppResults(term!==null&&term!==void 0?term:"",[...apps.values()]);return results.sort((a,b)=>b.score-a.score).slice(0,maxResults)}))}}};class plugin_GlobalSearchProvidersPlugin{setup({getStartServices:getStartServices},{globalSearch:globalSearch}){const applicationPromise=getStartServices().then(([core])=>core.application);globalSearch.registerResultProvider(createApplicationResultProvider(applicationPromise));return{}}start(){return{}}}const public_plugin=()=>new plugin_GlobalSearchProvidersPlugin}]);