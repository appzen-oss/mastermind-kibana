/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["ml_bundle_jsonpfunction"]=window["ml_bundle_jsonpfunction"]||[]).push([[16],{743:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"OverviewPage",(function(){return OverviewPage}));var external_kbnSharedDeps_React_=__webpack_require__(10);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(26);var check_capabilities=__webpack_require__(55);var check_ml_nodes=__webpack_require__(69);var navigation_menu=__webpack_require__(82);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(27);var kibana=__webpack_require__(51);const feedbackLink="https://www.elastic.co/community/";const OverviewSideBar=({createAnomalyDetectionJobDisabled:createAnomalyDetectionJobDisabled})=>{const _useMlKibana=Object(kibana["a"])(),_useMlKibana$services=_useMlKibana.services,docLinks=_useMlKibana$services.docLinks,basePath=_useMlKibana$services.http.basePath;const ELASTIC_WEBSITE_URL=docLinks.ELASTIC_WEBSITE_URL,DOC_LINK_VERSION=docLinks.DOC_LINK_VERSION;const docsLink="".concat(ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(DOC_LINK_VERSION,"/xpack-ml.html");const transformsLink="".concat(basePath.get(),"/app/management/data/transform");return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.ml.overview.gettingStartedSectionTitle",defaultMessage:"Getting started"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{className:"mlOverview__sidebar"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.ml.overview.gettingStartedSectionText",defaultMessage:"Welcome to Machine Learning. Get started by reviewing our {docs} or creating a new job. We recommend using {transforms} to create feature indices for analytics jobs.",values:{docs:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:docsLink,target:"blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.ml.overview.gettingStartedSectionDocs",defaultMessage:"documentation"})),transforms:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:transformsLink,target:"blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.ml.overview.gettingStartedSectionTransforms",defaultMessage:"Elasticsearch's transforms"}))}})),external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.ml.overview.feedbackSectionTitle",defaultMessage:"Feedback"})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.ml.overview.feedbackSectionText",defaultMessage:"If you have input or suggestions regarding your experience, please submit {feedbackLink}.",values:{feedbackLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:feedbackLink,target:"blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.ml.overview.feedbackSectionLink",defaultMessage:"feedback online"}))}}))))};var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);var external_kbnSharedDeps_Moment_=__webpack_require__(28);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);var date_utils=__webpack_require__(58);var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(32);var use_create_ad_links=__webpack_require__(205);const ExplorerLink=({jobsList:jobsList})=>{const openJobsInAnomalyExplorerText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.resultActions.openJobsInAnomalyExplorerText",{defaultMessage:"Open {jobsCount, plural, one {{jobId}} other {# jobs}} in Anomaly Explorer",values:{jobsCount:jobsList.length,jobId:jobsList[0]&&jobsList[0].id}});const _useCreateADLinks=Object(use_create_ad_links["a"])(),createLinkWithUserDefaults=_useCreateADLinks.createLinkWithUserDefaults;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:openJobsInAnomalyExplorerText},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Link"],{to:createLinkWithUserDefaults("explorer",jobsList)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"text",size:"xs",iconType:"visTable","aria-label":openJobsInAnomalyExplorerText,className:"results-button","data-test-subj":"openOverviewJobsInAnomalyExplorer"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.viewActionName",{defaultMessage:"View"}))))};var states=__webpack_require__(98);function getGroupsFromJobs(jobs){const groups={ungrouped:{id:"ungrouped",jobIds:[],docs_processed:0,latest_timestamp:0,max_anomaly_score:null,jobs_in_group:0}};jobs.forEach(job=>{if(job.groups.length>0){job.groups.forEach(g=>{if(groups[g]===undefined){groups[g]={id:g,jobIds:[job.id],docs_processed:job.processed_record_count,latest_timestamp:job.latestTimestampMs,max_anomaly_score:null,jobs_in_group:1}}else{groups[g].jobIds.push(job.id);groups[g].docs_processed+=job.processed_record_count;groups[g].jobs_in_group++;if(groups[g].latest_timestamp===undefined){groups[g].latest_timestamp=job.latestTimestampMs}else if(job.latestTimestampMs&&job.latestTimestampMs>groups[g].latest_timestamp){groups[g].latest_timestamp=job.latestTimestampMs}}})}else{groups.ungrouped.jobIds.push(job.id);groups.ungrouped.docs_processed+=job.processed_record_count;groups.ungrouped.jobs_in_group++;if(job.latestTimestampMs&&job.latestTimestampMs>groups.ungrouped.latest_timestamp){groups.ungrouped.latest_timestamp=job.latestTimestampMs}}});if(groups.ungrouped.jobIds.length===0){delete groups.ungrouped}const count=Object.values(groups).length;return{groups:groups,count:count}}function getStatsBarData(jobsList){const jobStats={activeNodes:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overviewJobsList.statsBar.activeMLNodesLabel",{defaultMessage:"Active ML nodes"}),value:0,show:true},total:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overviewJobsList.statsBar.totalJobsLabel",{defaultMessage:"Total jobs"}),value:0,show:true},open:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overviewJobsList.statsBar.openJobsLabel",{defaultMessage:"Open jobs"}),value:0,show:true},closed:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overviewJobsList.statsBar.closedJobsLabel",{defaultMessage:"Closed jobs"}),value:0,show:true},failed:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overviewJobsList.statsBar.failedJobsLabel",{defaultMessage:"Failed jobs"}),value:0,show:false},activeDatafeeds:{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.jobsList.statsBar.activeDatafeedsLabel",{defaultMessage:"Active datafeeds"}),value:0,show:true}};if(jobsList===undefined){return jobStats}const mlNodes={};let failedJobs=0;jobsList.forEach(job=>{if(job.jobState===states["c"].OPENED){jobStats.open.value++}else if(job.jobState===states["c"].CLOSED){jobStats.closed.value++}else if(job.jobState===states["c"].FAILED){failedJobs++}if(job.hasDatafeed&&job.datafeedState===states["a"].STARTED){jobStats.activeDatafeeds.value++}if(job.nodeName!==undefined){mlNodes[job.nodeName]={}}});jobStats.total.value=jobsList.length;if(failedJobs){jobStats.failed.value=failedJobs;jobStats.failed.show=true}else{jobStats.failed.show=false}jobStats.activeNodes.value=Object.keys(mlNodes).length;return jobStats}function getJobsFromGroup(group,jobs){return group.jobIds.map(jobId=>jobs[jobId]).filter(id=>id!==undefined)}function getJobsWithTimerange(jobsList){const jobs={};jobsList.forEach(job=>{if(jobs[job.id]===undefined){if(job.earliestTimestampMs!==undefined){const earliestTimestampMs=job.earliestTimestampMs,latestResultsTimestampMs=job.latestResultsTimestampMs;jobs[job.id]={id:job.id,earliestTimestampMs:earliestTimestampMs,latestResultsTimestampMs:latestResultsTimestampMs}}}});return jobs}var stats_bar=__webpack_require__(159);var job_selector_badge=__webpack_require__(197);var string_utils=__webpack_require__(72);var anomaly_utils=__webpack_require__(5);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}let AnomalyDetectionListColumns;(function(AnomalyDetectionListColumns){AnomalyDetectionListColumns["id"]="id";AnomalyDetectionListColumns["maxAnomalyScore"]="max_anomaly_score";AnomalyDetectionListColumns["jobIds"]="jobIds";AnomalyDetectionListColumns["latestTimestamp"]="latest_timestamp";AnomalyDetectionListColumns["docsProcessed"]="docs_processed";AnomalyDetectionListColumns["jobsInGroup"]="jobs_in_group"})(AnomalyDetectionListColumns||(AnomalyDetectionListColumns={}));const AnomalyDetectionTable=({items:items,jobsList:jobsList,statsBarData:statsBarData})=>{const groupsList=Object.values(items);const _useState=Object(external_kbnSharedDeps_React_["useState"])(0),_useState2=_slicedToArray(_useState,2),pageIndex=_useState2[0],setPageIndex=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(10),_useState4=_slicedToArray(_useState3,2),pageSize=_useState4[0],setPageSize=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(AnomalyDetectionListColumns.id),_useState6=_slicedToArray(_useState5,2),sortField=_useState6[0],setSortField=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])("asc"),_useState8=_slicedToArray(_useState7,2),sortDirection=_useState8[0],setSortDirection=_useState8[1];const columns=[{field:AnomalyDetectionListColumns.id,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.tableId",{defaultMessage:"Group ID"}),render:id=>external_kbnSharedDeps_React_default.a.createElement(job_selector_badge["a"],{id:id,isGroup:id!=="ungrouped"}),sortable:true,truncateText:true,width:"20%"},{field:AnomalyDetectionListColumns.maxAnomalyScore,name:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.tableMaxScoreTooltip",{defaultMessage:"Maximum score across all jobs in the group over its most recent 24 hour period"})},external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.tableMaxScore",{defaultMessage:"Max anomaly score"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),sortable:true,render:score=>{if(score===undefined){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],null)}else if(score===null){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.tableMaxScoreErrorTooltip",{defaultMessage:"There was a problem loading the maximum anomaly score"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"alert"}))}else if(score===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHealth"],{color:"transparent",compressed:"true"},score)}else{const color=Object(anomaly_utils["i"])(score);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHealth"],{color:color,compressed:"true"},score>=1?Math.floor(score):"< 1")}},truncateText:true,width:"150px"},{field:AnomalyDetectionListColumns.jobsInGroup,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.tableNumJobs",{defaultMessage:"Jobs in group"}),sortable:true,truncateText:true,width:"100px"},{field:AnomalyDetectionListColumns.latestTimestamp,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.tableLatestTimestamp",{defaultMessage:"Latest timestamp"}),dataType:"date",render:time=>Object(date_utils["c"])(time),textOnly:true,truncateText:true,sortable:true,width:"20%"},{field:AnomalyDetectionListColumns.docsProcessed,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.tableDocsProcessed",{defaultMessage:"Docs processed"}),render:docs=>Object(string_utils["g"])(docs),textOnly:true,sortable:true,width:"20%"},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.tableActionLabel",{defaultMessage:"Actions"}),render:group=>external_kbnSharedDeps_React_default.a.createElement(ExplorerLink,{jobsList:getJobsFromGroup(group,jobsList)}),width:"100px",align:"right"}];const onTableChange=({page:page={index:0,size:10},sort:sort={field:AnomalyDetectionListColumns.id,direction:"asc"}})=>{const index=page.index,size=page.size;setPageIndex(index);setPageSize(size);const field=sort.field,direction=sort.direction;setSortField(field);setSortDirection(direction)};const pagination={initialPageIndex:pageIndex,initialPageSize:pageSize,totalItemCount:groupsList.length,pageSizeOptions:[10,20,50],hidePerPageOptions:false};const sorting={sort:{field:sortField,direction:sortDirection}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.panelTitle",{defaultMessage:"Anomaly Detection"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mlOverviewPanel__statsBar"},external_kbnSharedDeps_React_default.a.createElement(stats_bar["a"],{stats:statsBarData,dataTestSub:"mlOverviewJobStatsBar"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{allowNeutralSort:false,className:"mlAnomalyDetectionTable",columns:columns,hasActions:false,isExpandable:false,isSelectable:false,items:groupsList,itemId:AnomalyDetectionListColumns.id,onTableChange:onTableChange,pagination:pagination,sorting:sorting,"data-test-subj":"mlOverviewTableAnomalyDetection"}))};var ml_api_service=__webpack_require__(50);var ml_url_generator=__webpack_require__(0);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function anomaly_detection_panel_slicedToArray(arr,i){return anomaly_detection_panel_arrayWithHoles(arr)||anomaly_detection_panel_iterableToArrayLimit(arr,i)||anomaly_detection_panel_unsupportedIterableToArray(arr,i)||anomaly_detection_panel_nonIterableRest()}function anomaly_detection_panel_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function anomaly_detection_panel_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return anomaly_detection_panel_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return anomaly_detection_panel_arrayLikeToArray(o,minLen)}function anomaly_detection_panel_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function anomaly_detection_panel_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function anomaly_detection_panel_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getDefaultAnomalyScores(groups){const anomalyScores={};groups.forEach(group=>{anomalyScores[group.id]={maxScore:0}});return anomalyScores}const AnomalyDetectionPanel=({jobCreationDisabled:jobCreationDisabled})=>{const _useMlKibana=Object(kibana["a"])(),notifications=_useMlKibana.services.notifications;const mlUrlGenerator=Object(kibana["c"])();const navigateToPath=Object(kibana["d"])();const redirectToJobsManagementPage=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var path;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return mlUrlGenerator.createUrl({page:ml_url_generator["b"].ANOMALY_DETECTION_JOBS_MANAGE});case 2:path=_context.sent;_context.next=5;return navigateToPath(path,true);case 5:case"end":return _context.stop()}}),_callee)})));return function redirectToJobsManagementPage(){return _ref.apply(this,arguments)}}();const redirectToCreateJobSelectIndexPage=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var path;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return mlUrlGenerator.createUrl({page:ml_url_generator["b"].ANOMALY_DETECTION_CREATE_JOB_SELECT_INDEX});case 2:path=_context2.sent;_context2.next=5;return navigateToPath(path,true);case 5:case"end":return _context2.stop()}}),_callee2)})));return function redirectToCreateJobSelectIndexPage(){return _ref2.apply(this,arguments)}}();const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=anomaly_detection_panel_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])({}),_useState4=anomaly_detection_panel_slicedToArray(_useState3,2),groups=_useState4[0],setGroups=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(0),_useState6=anomaly_detection_panel_slicedToArray(_useState5,2),groupsCount=_useState6[0],setGroupsCount=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])([]),_useState8=anomaly_detection_panel_slicedToArray(_useState7,2),jobsList=_useState8[0],setJobsList=_useState8[1];const _useState9=Object(external_kbnSharedDeps_React_["useState"])(undefined),_useState10=anomaly_detection_panel_slicedToArray(_useState9,2),statsBarData=_useState10[0],setStatsBarData=_useState10[1];const _useState11=Object(external_kbnSharedDeps_React_["useState"])(undefined),_useState12=anomaly_detection_panel_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];const loadJobs=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var jobsResult,jobsSummaryList,_getGroupsFromJobs,jobsGroups,count,jobsWithTimerange,stats;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:setIsLoading(true);_context3.prev=1;_context3.next=4;return ml_api_service["ml"].jobs.jobsSummary([]);case 4:jobsResult=_context3.sent;jobsSummaryList=jobsResult.map(job=>{job.latestTimestampSortValue=job.latestTimestampMs||0;return job});_getGroupsFromJobs=getGroupsFromJobs(jobsSummaryList),jobsGroups=_getGroupsFromJobs.groups,count=_getGroupsFromJobs.count;jobsWithTimerange=getJobsWithTimerange(jobsSummaryList);stats=getStatsBarData(jobsSummaryList);setIsLoading(false);setErrorMessage(undefined);setStatsBarData(stats);setGroupsCount(count);setGroups(jobsGroups);setJobsList(jobsWithTimerange);loadMaxAnomalyScores(jobsGroups);_context3.next=22;break;case 18:_context3.prev=18;_context3.t0=_context3["catch"](1);setErrorMessage(_context3.t0.message!==undefined?_context3.t0.message:JSON.stringify(_context3.t0));setIsLoading(false);case 22:case"end":return _context3.stop()}}),_callee3,null,[[1,18]])})));return function loadJobs(){return _ref3.apply(this,arguments)}}();const loadMaxAnomalyScores=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(groupsObject){var groupsList,scores,promises,results,tempGroups,toasts;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:groupsList=Object.values(groupsObject);scores=getDefaultAnomalyScores(groupsList);_context4.prev=2;promises=groupsList.filter(group=>group.jobIds.length>0).map((group,i)=>{scores[group.id].index=i;const latestTimestamp=group.latest_timestamp;const startMoment=external_kbnSharedDeps_Moment_default()(latestTimestamp);const twentyFourHoursAgo=startMoment.subtract(24,"hours").valueOf();return ml_api_service["ml"].results.getMaxAnomalyScore(group.jobIds,twentyFourHoursAgo,latestTimestamp)});_context4.next=6;return Promise.all(promises);case 6:results=_context4.sent;tempGroups=_objectSpread({},groupsObject);Object.keys(scores).forEach(groupId=>{const resultsIndex=scores[groupId]&&scores[groupId].index;const _ref5=resultsIndex!==undefined&&results[resultsIndex],maxScore=_ref5.maxScore;tempGroups[groupId].max_anomaly_score=maxScore});setGroups(tempGroups);_context4.next=16;break;case 12:_context4.prev=12;_context4.t0=_context4["catch"](2);toasts=notifications.toasts;toasts.addDanger(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.errorWithFetchingAnomalyScoreNotificationErrorMessage",{defaultMessage:"An error occurred fetching anomaly scores: {error}",values:{error:_context4.t0.message!==undefined?_context4.t0.message:JSON.stringify(_context4.t0)}}));case 16:case"end":return _context4.stop()}}),_callee4,null,[[2,12]])})));return function loadMaxAnomalyScores(_x){return _ref4.apply(this,arguments)}}();Object(external_kbnSharedDeps_React_["useEffect"])(()=>{loadJobs()},[]);const onRefresh=()=>{loadJobs()};const errorDisplay=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.errorPromptTitle",{defaultMessage:"An error occurred getting the anomaly detection jobs list."}),color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("pre",null,errorMessage)));const panelClass=isLoading?"mlOverviewPanel__isLoading":"mlOverviewPanel";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{className:panelClass},typeof errorMessage!=="undefined"&&errorDisplay,isLoading&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{className:"mlOverviewPanel__spinner",size:"xl"}),isLoading===false&&typeof errorMessage==="undefined"&&groupsCount===0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"createSingleMetricJob",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.createFirstJobMessage",{defaultMessage:"Create your first anomaly detection job"})),body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.emptyPromptText",{defaultMessage:"Anomaly detection enables you to find unusual behavior in time series data. Start automatically spotting the anomalies hiding in your data and resolve issues faster."}))),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"primary",onClick:redirectToCreateJobSelectIndexPage,fill:true,iconType:"plusInCircle",isDisabled:jobCreationDisabled,"data-test-subj":"mlOverviewCreateADJobButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.createJobButtonText",{defaultMessage:"Create job"}))}),isLoading===false&&typeof errorMessage==="undefined"&&groupsCount>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(AnomalyDetectionTable,{items:groups,jobsList:jobsList,statsBarData:statsBarData}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mlOverviewPanel__buttons"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",onClick:onRefresh,className:"mlOverviewPanel__refreshButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.refreshJobsButtonText",{defaultMessage:"Refresh"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",fill:true,onClick:redirectToJobsManagementPage},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.anomalyDetection.manageJobsButtonText",{defaultMessage:"Manage jobs"})))))};var common_analytics=__webpack_require__(54);var common=__webpack_require__(78);var use_columns=__webpack_require__(233);var get_view_link_status=__webpack_require__(173);const ViewLink=({item:item})=>{const _getViewLinkStatus=Object(get_view_link_status["a"])(item),disabled=_getViewLinkStatus.disabled,tooltipContent=_getViewLinkStatus.tooltipContent;const viewJobResultsButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analytics.resultActions.openJobText",{defaultMessage:"View job results"});const tooltipText=disabled===false?viewJobResultsButtonText:tooltipContent;const analysisType=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object(common_analytics["r"])(item.config.analysis),[item]);const viewAnalyticsResultsLink=Object(kibana["b"])({page:ml_url_generator["b"].DATA_FRAME_ANALYTICS_EXPLORATION,pageState:{jobId:item.id,analysisType:analysisType},excludeBasePath:true});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"bottom",content:tooltipText},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Link"],{to:viewAnalyticsResultsLink},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"text",size:"xs",iconType:"visTable","aria-label":viewJobResultsButtonText,className:"results-button","data-test-subj":"mlOverviewAnalyticsJobViewButton",isDisabled:disabled},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analytics.viewActionName",{defaultMessage:"View"}))))};function table_slicedToArray(arr,i){return table_arrayWithHoles(arr)||table_iterableToArrayLimit(arr,i)||table_unsupportedIterableToArray(arr,i)||table_nonIterableRest()}function table_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function table_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return table_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return table_arrayLikeToArray(o,minLen)}function table_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function table_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function table_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const AnalyticsTable=({items:items})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(0),_useState2=table_slicedToArray(_useState,2),pageIndex=_useState2[0],setPageIndex=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(10),_useState4=table_slicedToArray(_useState3,2),pageSize=_useState4[0],setPageSize=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(common["c"].id),_useState6=table_slicedToArray(_useState5,2),sortField=_useState6[0],setSortField=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])("asc"),_useState8=table_slicedToArray(_useState7,2),sortDirection=_useState8[0],setSortDirection=_useState8[1];const columns=[{field:common["c"].id,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analyticsList.id",{defaultMessage:"ID"}),sortable:true,truncateText:true,width:"20%"},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analyticsList.type",{defaultMessage:"Type"}),sortable:item=>Object(common_analytics["r"])(item.config.analysis),truncateText:true,render(item){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],{color:"hollow"},Object(common_analytics["r"])(item.config.analysis))},width:"150px"},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analyticsList.status",{defaultMessage:"Status"}),sortable:item=>item.stats.state,truncateText:true,render(item){return Object(use_columns["b"])(item.stats.state,item.stats.failure_reason)},width:"100px"},use_columns["c"],{field:common["c"].configCreateTime,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analyticsList.reatedTimeColumnName",{defaultMessage:"Creation time"}),dataType:"date",render:time=>Object(date_utils["c"])(time),textOnly:true,truncateText:true,sortable:true,width:"20%"},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analyticsList.tableActionLabel",{defaultMessage:"Actions"}),actions:[{render:item=>external_kbnSharedDeps_React_default.a.createElement(ViewLink,{item:item})}],width:"100px"}];const onTableChange=({page:page={index:0,size:10},sort:sort={field:common["c"].id,direction:"asc"}})=>{const index=page.index,size=page.size;setPageIndex(index);setPageSize(size);const field=sort.field,direction=sort.direction;setSortField(field);setSortDirection(direction)};const pagination={initialPageIndex:pageIndex,initialPageSize:pageSize,totalItemCount:items.length,pageSizeOptions:[10,20,50],hidePerPageOptions:false};const sorting={sort:{field:sortField,direction:sortDirection}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{allowNeutralSort:false,className:"mlAnalyticsTable",columns:columns,hasActions:false,isExpandable:false,isSelectable:false,items:items,itemId:common["c"].id,onTableChange:onTableChange,pagination:pagination,sorting:sorting,"data-test-subj":"mlOverviewTableAnalytics"})};var analytics_service=__webpack_require__(158);function analytics_panel_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function analytics_panel_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){analytics_panel_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){analytics_panel_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function analytics_panel_slicedToArray(arr,i){return analytics_panel_arrayWithHoles(arr)||analytics_panel_iterableToArrayLimit(arr,i)||analytics_panel_unsupportedIterableToArray(arr,i)||analytics_panel_nonIterableRest()}function analytics_panel_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function analytics_panel_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return analytics_panel_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return analytics_panel_arrayLikeToArray(o,minLen)}function analytics_panel_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function analytics_panel_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function analytics_panel_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const AnalyticsPanel=({jobCreationDisabled:jobCreationDisabled})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=analytics_panel_slicedToArray(_useState,2),analytics=_useState2[0],setAnalytics=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(undefined),_useState4=analytics_panel_slicedToArray(_useState3,2),analyticsStats=_useState4[0],setAnalyticsStats=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(undefined),_useState6=analytics_panel_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])(false),_useState8=analytics_panel_slicedToArray(_useState7,2),isInitialized=_useState8[0],setIsInitialized=_useState8[1];const mlUrlGenerator=Object(kibana["c"])();const navigateToPath=Object(kibana["d"])();const redirectToDataFrameAnalyticsManagementPage=function(){var _ref=analytics_panel_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var path;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return mlUrlGenerator.createUrl({page:ml_url_generator["b"].DATA_FRAME_ANALYTICS_JOBS_MANAGE});case 2:path=_context.sent;_context.next=5;return navigateToPath(path,true);case 5:case"end":return _context.stop()}}),_callee)})));return function redirectToDataFrameAnalyticsManagementPage(){return _ref.apply(this,arguments)}}();const getAnalytics=Object(analytics_service["d"])(setAnalytics,setAnalyticsStats,setErrorMessage,setIsInitialized,false,false);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{getAnalytics(true)},[]);const onRefresh=()=>{getAnalytics(true)};const errorDisplay=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analyticsList.errorPromptTitle",{defaultMessage:"An error occurred getting the data frame analytics list."}),color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("pre",null,errorMessage&&errorMessage.message!==undefined?errorMessage.message:JSON.stringify(errorMessage)));const panelClass=isInitialized===false?"mlOverviewPanel__isLoading":"mlOverviewPanel";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{className:panelClass},typeof errorMessage!=="undefined"&&errorDisplay,isInitialized===false&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{className:"mlOverviewPanel__spinner",size:"xl"}),errorMessage===undefined&&isInitialized===true&&analytics.length===0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"createAdvancedJob",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analyticsList.createFirstJobMessage",{defaultMessage:"Create your first data frame analytics job"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analyticsList.emptyPromptText",{defaultMessage:"Data frame analytics enables you to perform outlier detection, regression, or classification analysis on your data and annotates it with the results. The job puts the annotated data and a copy of the source data in a new index."})),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:redirectToDataFrameAnalyticsManagementPage,color:"primary",fill:true,iconType:"plusInCircle",isDisabled:jobCreationDisabled,"data-test-subj":"mlOverviewCreateDFAJobButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analyticsList.createJobButtonText",{defaultMessage:"Create job"}))}),isInitialized===true&&analytics.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analyticsList.PanelTitle",{defaultMessage:"Analytics"})))),analyticsStats!==undefined&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"mlOverviewPanel__statsBar"},external_kbnSharedDeps_React_default.a.createElement(stats_bar["a"],{stats:analyticsStats,dataTestSub:"mlOverviewAnalyticsStatsBar"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(AnalyticsTable,{items:analytics}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement("div",{className:"mlOverviewPanel__buttons"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",onClick:onRefresh,className:"mlOverviewPanel__refreshButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analyticsList.refreshJobsButtonText",{defaultMessage:"Refresh"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s",fill:true,onClick:redirectToDataFrameAnalyticsManagementPage},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.overview.analyticsList.manageJobsButtonText",{defaultMessage:"Manage jobs"})))))};const OverviewContent=({createAnomalyDetectionJobDisabled:createAnomalyDetectionJobDisabled,createAnalyticsJobDisabled:createAnalyticsJobDisabled})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:3},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(AnomalyDetectionPanel,{jobCreationDisabled:createAnomalyDetectionJobDisabled})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(AnalyticsPanel,{jobCreationDisabled:createAnalyticsJobDisabled}))));var node_available_warning=__webpack_require__(241);var upgrade=__webpack_require__(242);const OverviewPage=()=>{const disableCreateAnomalyDetectionJob=!Object(check_capabilities["e"])("canCreateJob")||!Object(check_ml_nodes["c"])();const disableCreateAnalyticsButton=!Object(check_ml_nodes["c"])()||!Object(check_capabilities["e"])("canCreateDataFrameAnalytics")||!Object(check_capabilities["e"])("canStartStopDataFrameAnalytics");return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(navigation_menu["a"],{tabId:"overview"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPage"],{"data-test-subj":"mlPageOverview"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(node_available_warning["a"],null),external_kbnSharedDeps_React_default.a.createElement(upgrade["a"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(OverviewSideBar,{createAnomalyDetectionJobDisabled:disableCreateAnomalyDetectionJob}),external_kbnSharedDeps_React_default.a.createElement(OverviewContent,{createAnomalyDetectionJobDisabled:disableCreateAnomalyDetectionJob,createAnalyticsJobDisabled:disableCreateAnalyticsButton})))))};var overview_page=__webpack_exports__["default"]=OverviewPage}}]);