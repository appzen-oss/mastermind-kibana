/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["triggersActionsUi_bundle_jsonpfunction"]=window["triggersActionsUi_bundle_jsonpfunction"]||[]).push([[18],{217:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return JiraConnectorFields}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__);var lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(16);var lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);var _case_mappings__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(96);var _translations__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6);var _config__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(24);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const JiraConnectorFields=({action:action,editActionSecrets:editActionSecrets,editActionConfig:editActionConfig,errors:errors,consumer:consumer,readOnly:readOnly})=>{const _action$config=action.config,apiUrl=_action$config.apiUrl,projectKey=_action$config.projectKey,incidentConfiguration=_action$config.incidentConfiguration,isCaseOwned=_action$config.isCaseOwned;const mapping=incidentConfiguration?incidentConfiguration.mapping:[];const isApiUrlInvalid=errors.apiUrl.length>0&&apiUrl!=null;const _action$secrets=action.secrets,email=_action$secrets.email,apiToken=_action$secrets.apiToken;const isProjectKeyInvalid=errors.projectKey.length>0&&projectKey!=null;const isEmailInvalid=errors.email.length>0&&email!=null;const isApiTokenInvalid=errors.apiToken.length>0&&apiToken!=null;if(consumer==="case"){if(Object(lodash__WEBPACK_IMPORTED_MODULE_2__["isEmpty"])(mapping)){editActionConfig("incidentConfiguration",{mapping:Object(_case_mappings__WEBPACK_IMPORTED_MODULE_3__["b"])(_config__WEBPACK_IMPORTED_MODULE_5__["a"].fields)})}if(!isCaseOwned){editActionConfig("isCaseOwned",true)}}const handleOnChangeActionConfig=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])((key,value)=>editActionConfig(key,value),[]);const handleOnChangeSecretConfig=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])((key,value)=>editActionSecrets(key,value),[]);const handleOnChangeMappingConfig=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(newMapping=>editActionConfig("incidentConfiguration",_objectSpread(_objectSpread({},action.config.incidentConfiguration),{},{mapping:newMapping})),[action.config]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexGroup"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFormRow"],{id:"apiUrl",fullWidth:true,error:errors.apiUrl,isInvalid:isApiUrlInvalid,label:_translations__WEBPACK_IMPORTED_MODULE_4__["b"]},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFieldText"],{fullWidth:true,isInvalid:isApiUrlInvalid,name:"apiUrl",readOnly:readOnly,value:apiUrl||"","data-test-subj":"apiUrlFromInput",onChange:evt=>handleOnChangeActionConfig("apiUrl",evt.target.value),onBlur:()=>{if(!apiUrl){editActionConfig("apiUrl","")}}})))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"m"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexGroup"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFormRow"],{id:"connector-jira-project-key",fullWidth:true,error:errors.projectKey,isInvalid:isProjectKeyInvalid,label:_translations__WEBPACK_IMPORTED_MODULE_4__["o"]},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFieldText"],{fullWidth:true,isInvalid:isProjectKeyInvalid,name:"connector-jira-project-key",value:projectKey||"","data-test-subj":"connector-jira-project-key-form-input",onChange:evt=>handleOnChangeActionConfig("projectKey",evt.target.value),onBlur:()=>{if(!projectKey){editActionConfig("projectKey","")}}})))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"m"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexGroup"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiTitle"],{size:"xxs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4",null,_translations__WEBPACK_IMPORTED_MODULE_4__["k"])))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"m"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexGroup"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFormRow"],{fullWidth:true},getEncryptedFieldNotifyLabel(!action.id)))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"m"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexGroup"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFormRow"],{id:"connector-jira-email",fullWidth:true,error:errors.email,isInvalid:isEmailInvalid,label:_translations__WEBPACK_IMPORTED_MODULE_4__["m"]},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFieldText"],{fullWidth:true,isInvalid:isEmailInvalid,readOnly:readOnly,name:"connector-jira-email",value:email||"","data-test-subj":"connector-jira-email-form-input",onChange:evt=>handleOnChangeSecretConfig("email",evt.target.value),onBlur:()=>{if(!email){editActionSecrets("email","")}}})))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"m"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexGroup"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFormRow"],{id:"connector-jira-apiToken",fullWidth:true,error:errors.apiToken,isInvalid:isApiTokenInvalid,label:_translations__WEBPACK_IMPORTED_MODULE_4__["i"]},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFieldPassword"],{fullWidth:true,readOnly:readOnly,isInvalid:isApiTokenInvalid,name:"connector-jira-apiToken",value:apiToken||"","data-test-subj":"connector-jira-apiToken-form-input",onChange:evt=>handleOnChangeSecretConfig("apiToken",evt.target.value),onBlur:()=>{if(!apiToken){editActionSecrets("apiToken","")}}})))),consumer==="case"&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"l"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexGroup"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],{"data-test-subj":"case-jira-mappings"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_case_mappings__WEBPACK_IMPORTED_MODULE_3__["a"],{disabled:true,connectorConfiguration:_config__WEBPACK_IMPORTED_MODULE_5__["a"],mapping:mapping,onChangeMapping:handleOnChangeMappingConfig})))))};function getEncryptedFieldNotifyLabel(isCreate){if(isCreate){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiText"],{size:"s","data-test-subj":"rememberValuesMessage"},_translations__WEBPACK_IMPORTED_MODULE_4__["r"])}return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiCallOut"],{size:"s",iconType:"iInCircle",title:_translations__WEBPACK_IMPORTED_MODULE_4__["q"],"data-test-subj":"reenterValuesMessage"})}},96:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FieldMapping}));__webpack_require__.d(__webpack_exports__,"b",(function(){return createDefaultMapping}));var types=__webpack_require__(9);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var external_kbnSharedDeps_StyledComponents_=__webpack_require__(65);var external_kbnSharedDeps_StyledComponents_default=__webpack_require__.n(external_kbnSharedDeps_StyledComponents_);var external_kbnSharedDeps_Lodash_=__webpack_require__(16);const FieldMappingRowComponent=({id:id,disabled:disabled,securitySolutionField:securitySolutionField,thirdPartyOptions:thirdPartyOptions,actionTypeOptions:actionTypeOptions,onChangeActionType:onChangeActionType,onChangeThirdParty:onChangeThirdParty,selectedActionType:selectedActionType,selectedThirdParty:selectedThirdParty})=>{const securitySolutionFieldCapitalized=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object(external_kbnSharedDeps_Lodash_["capitalize"])(securitySolutionField),[securitySolutionField]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{component:"span",justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{component:"span",grow:false},securitySolutionFieldCapitalized),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{component:"span",grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"sortRight"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{disabled:disabled,options:thirdPartyOptions,valueOfSelected:selectedThirdParty,onChange:onChangeThirdParty.bind(null,securitySolutionField),"data-test-subj":"case-configure-third-party-select-".concat(id)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{disabled:disabled,options:actionTypeOptions,valueOfSelected:selectedActionType,onChange:onChangeActionType.bind(null,securitySolutionField),"data-test-subj":"case-configure-action-type-select-".concat(id)})))};const FieldMappingRow=external_kbnSharedDeps_React_default.a.memo(FieldMappingRowComponent);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);const INCIDENT_MANAGEMENT_SYSTEM_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.incidentManagementSystemTitle",{defaultMessage:"Connect to external incident management system"});const INCIDENT_MANAGEMENT_SYSTEM_DESC=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.incidentManagementSystemDesc",{defaultMessage:"You may optionally connect Security cases to an external incident management system of your choosing. This will allow you to push case data as an incident in your chosen third-party system."});const INCIDENT_MANAGEMENT_SYSTEM_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.incidentManagementSystemLabel",{defaultMessage:"Incident management system"});const NO_CONNECTOR=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.noConnector",{defaultMessage:"No connector selected"});const ADD_NEW_CONNECTOR=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.addNewConnector",{defaultMessage:"Add new connector"});const CASE_CLOSURE_OPTIONS_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.caseClosureOptionsTitle",{defaultMessage:"Case Closures"});const CASE_CLOSURE_OPTIONS_DESC=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.caseClosureOptionsDesc",{defaultMessage:"Define how you wish Security cases to be closed. Automated case closures require an established connection to an external incident management system."});const CASE_CLOSURE_OPTIONS_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.caseClosureOptionsLabel",{defaultMessage:"Case closure options"});const CASE_CLOSURE_OPTIONS_MANUAL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.caseClosureOptionsManual",{defaultMessage:"Manually close Security cases"});const CASE_CLOSURE_OPTIONS_NEW_INCIDENT=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.caseClosureOptionsNewIncident",{defaultMessage:"Automatically close Security cases when pushing new incident to external system"});const CASE_CLOSURE_OPTIONS_CLOSED_INCIDENT=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.caseClosureOptionsClosedIncident",{defaultMessage:"Automatically close Security cases when incident is closed in external system"});const FIELD_MAPPING_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.fieldMappingTitle",{defaultMessage:"Field mappings"});const FIELD_MAPPING_DESC=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.fieldMappingDesc",{defaultMessage:"Map Security case fields when pushing data to a third-party. Field mappings require an established connection to an external incident management system."});const FIELD_MAPPING_FIRST_COL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.fieldMappingFirstCol",{defaultMessage:"Security case field"});const FIELD_MAPPING_SECOND_COL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.fieldMappingSecondCol",{defaultMessage:"External incident field"});const FIELD_MAPPING_THIRD_COL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.fieldMappingThirdCol",{defaultMessage:"On edit and update"});const FIELD_MAPPING_EDIT_NOTHING=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.fieldMappingEditNothing",{defaultMessage:"Nothing"});const FIELD_MAPPING_EDIT_OVERWRITE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.fieldMappingEditOverwrite",{defaultMessage:"Overwrite"});const FIELD_MAPPING_EDIT_APPEND=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.fieldMappingEditAppend",{defaultMessage:"Append"});const CANCEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.cancelButton",{defaultMessage:"Cancel"});const WARNING_NO_CONNECTOR_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.warningTitle",{defaultMessage:"Warning"});const WARNING_NO_CONNECTOR_MESSAGE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.warningMessage",{defaultMessage:"The selected connector has been deleted. Either select a different connector or create a new one."});const MAPPING_FIELD_NOT_MAPPED=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.mappingFieldNotMapped",{defaultMessage:"Not mapped"});const UPDATE_CONNECTOR=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.updateConnector",{defaultMessage:"Update connector"});const UPDATE_SELECTED_CONNECTOR=connectorName=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.updateSelectedConnector",{values:{connectorName:connectorName},defaultMessage:"Update { connectorName }"});function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const setActionTypeToMapping=(caseField,newActionType,mapping)=>{const findItemIndex=mapping.findIndex(item=>item.source===caseField);if(findItemIndex>=0){return[...mapping.slice(0,findItemIndex),_objectSpread(_objectSpread({},mapping[findItemIndex]),{},{actionType:newActionType}),...mapping.slice(findItemIndex+1)]}return[...mapping]};const setThirdPartyToMapping=(caseField,newThirdPartyField,mapping)=>mapping.map(item=>{if(item.source!==caseField&&item.target===newThirdPartyField){return _objectSpread(_objectSpread({},item),{},{target:"not_mapped"})}else if(item.source===caseField){return _objectSpread(_objectSpread({},item),{},{target:newThirdPartyField})}return item});const createDefaultMapping=fields=>Object.keys(fields).map(key=>({source:fields[key].defaultSourceField,target:key,actionType:fields[key].defaultActionType}));const FieldRowWrapper=external_kbnSharedDeps_StyledComponents_default.a.div.withConfig({displayName:"FieldRowWrapper",componentId:"sc-1b7zgsi-0"})(["margin-top:8px;font-size:14px;"]);const field_mapping_actionTypeOptions=[{value:"nothing",inputDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,FIELD_MAPPING_EDIT_NOTHING),"data-test-subj":"edit-update-option-nothing"},{value:"overwrite",inputDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,FIELD_MAPPING_EDIT_OVERWRITE),"data-test-subj":"edit-update-option-overwrite"},{value:"append",inputDisplay:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,FIELD_MAPPING_EDIT_APPEND),"data-test-subj":"edit-update-option-append"}];const getThirdPartyOptions=(caseField,thirdPartyFields)=>Object.keys(thirdPartyFields).reduce((acc,key)=>{if(thirdPartyFields[key].validSourceFields.includes(caseField)){return[...acc,{value:key,inputDisplay:external_kbnSharedDeps_React_default.a.createElement("span",null,thirdPartyFields[key].label),"data-test-subj":"dropdown-mapping-".concat(key)}]}return acc},[{value:"not_mapped",inputDisplay:MAPPING_FIELD_NOT_MAPPED,"data-test-subj":"dropdown-mapping-not_mapped"}]);const FieldMappingComponent=({disabled:disabled,mapping:mapping,onChangeMapping:onChangeMapping,connectorConfiguration:connectorConfiguration})=>{const onChangeActionType=Object(external_kbnSharedDeps_React_["useCallback"])((caseField,newActionType)=>{const myMapping=mapping!==null&&mapping!==void 0?mapping:defaultMapping;onChangeMapping(setActionTypeToMapping(caseField,newActionType,myMapping))},[mapping]);const onChangeThirdParty=Object(external_kbnSharedDeps_React_["useCallback"])((caseField,newThirdPartyField)=>{const myMapping=mapping!==null&&mapping!==void 0?mapping:defaultMapping;onChangeMapping(setThirdPartyToMapping(caseField,newThirdPartyField,myMapping))},[mapping]);const selectedConnector=connectorConfiguration!==null&&connectorConfiguration!==void 0?connectorConfiguration:{fields:{}};const defaultMapping=Object(external_kbnSharedDeps_React_["useMemo"])(()=>createDefaultMapping(selectedConnector.fields),[selectedConnector.fields]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,"data-test-subj":"case-configure-field-mapping-cols"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement("span",{className:"euiFormLabel"},FIELD_MAPPING_FIRST_COL)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement("span",{className:"euiFormLabel"},FIELD_MAPPING_SECOND_COL)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement("span",{className:"euiFormLabel"},FIELD_MAPPING_THIRD_COL)))),external_kbnSharedDeps_React_default.a.createElement(FieldRowWrapper,{"data-test-subj":"case-configure-field-mapping-row-wrapper"},(mapping!==null&&mapping!==void 0?mapping:defaultMapping).map(item=>{var _item$target;return external_kbnSharedDeps_React_default.a.createElement(FieldMappingRow,{key:"".concat(item.source),id:"".concat(item.source),disabled:disabled,securitySolutionField:item.source,thirdPartyOptions:getThirdPartyOptions(item.source,selectedConnector.fields),actionTypeOptions:field_mapping_actionTypeOptions,onChangeActionType:onChangeActionType,onChangeThirdParty:onChangeThirdParty,selectedActionType:item.actionType,selectedThirdParty:(_item$target=item.target)!==null&&_item$target!==void 0?_item$target:"not_mapped"})})))};const FieldMapping=external_kbnSharedDeps_React_default.a.memo(FieldMappingComponent)}}]);