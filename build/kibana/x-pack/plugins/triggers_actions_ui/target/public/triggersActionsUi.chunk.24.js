/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["triggersActionsUi_bundle_jsonpfunction"]=window["triggersActionsUi_bundle_jsonpfunction"]||[]).push([[24],{221:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return JiraParamsFields}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_LodashFp_=__webpack_require__(66);var Option=__webpack_require__(77);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var text_area_with_message_variables=__webpack_require__(87);var text_field_with_message_variables=__webpack_require__(89);var constants=__webpack_require__(3);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getIssueTypes(_x){return _getIssueTypes.apply(this,arguments)}function _getIssueTypes(){_getIssueTypes=_asyncToGenerator(regeneratorRuntime.mark((function _callee({http:http,signal:signal,connectorId:connectorId}){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return http.post("".concat(constants["a"],"/action/").concat(connectorId,"/_execute"),{body:JSON.stringify({params:{subAction:"issueTypes",subActionParams:{}}}),signal:signal});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})));return _getIssueTypes.apply(this,arguments)}function getFieldsByIssueType(_x2){return _getFieldsByIssueType.apply(this,arguments)}function _getFieldsByIssueType(){_getFieldsByIssueType=_asyncToGenerator(regeneratorRuntime.mark((function _callee2({http:http,signal:signal,connectorId:connectorId,id:id}){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return http.post("".concat(constants["a"],"/action/").concat(connectorId,"/_execute"),{body:JSON.stringify({params:{subAction:"fieldsByIssueType",subActionParams:{id:id}}}),signal:signal});case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})));return _getFieldsByIssueType.apply(this,arguments)}function getIssues(_x3){return _getIssues.apply(this,arguments)}function _getIssues(){_getIssues=_asyncToGenerator(regeneratorRuntime.mark((function _callee3({http:http,signal:signal,connectorId:connectorId,title:title}){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return http.post("".concat(constants["a"],"/action/").concat(connectorId,"/_execute"),{body:JSON.stringify({params:{subAction:"issues",subActionParams:{title:title}}}),signal:signal});case 2:return _context3.abrupt("return",_context3.sent);case 3:case"end":return _context3.stop()}}),_callee3)})));return _getIssues.apply(this,arguments)}function getIssue(_x4){return _getIssue.apply(this,arguments)}function _getIssue(){_getIssue=_asyncToGenerator(regeneratorRuntime.mark((function _callee4({http:http,signal:signal,connectorId:connectorId,id:id}){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return http.post("".concat(constants["a"],"/action/").concat(connectorId,"/_execute"),{body:JSON.stringify({params:{subAction:"issue",subActionParams:{id:id}}}),signal:signal});case 2:return _context4.abrupt("return",_context4.sent);case 3:case"end":return _context4.stop()}}),_callee4)})));return _getIssue.apply(this,arguments)}var translations=__webpack_require__(6);function use_get_issue_types_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_get_issue_types_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_get_issue_types_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_get_issue_types_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useGetIssueTypes=({http:http,actionConnector:actionConnector,toastNotifications:toastNotifications})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=_slicedToArray(_useState3,2),issueTypes=_useState4[0],setIssueTypes=_useState4[1];const abortCtrl=Object(external_kbnSharedDeps_React_["useRef"])(new AbortController);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{let didCancel=false;const fetchData=function(){var _ref=use_get_issue_types_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var res,_res$data,_res$serviceMessage;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(actionConnector){_context.next=3;break}setIsLoading(false);return _context.abrupt("return");case 3:abortCtrl.current=new AbortController;setIsLoading(true);_context.prev=5;_context.next=8;return getIssueTypes({http:http,signal:abortCtrl.current.signal,connectorId:actionConnector.id});case 8:res=_context.sent;if(!didCancel){setIsLoading(false);setIssueTypes((_res$data=res.data)!==null&&_res$data!==void 0?_res$data:[]);if(res.status&&res.status==="error"){toastNotifications.addDanger({title:translations["h"],text:"".concat((_res$serviceMessage=res.serviceMessage)!==null&&_res$serviceMessage!==void 0?_res$serviceMessage:res.message)})}}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);if(!didCancel){setIsLoading(false);toastNotifications.addDanger({title:translations["h"],text:_context.t0.message})}case 15:case"end":return _context.stop()}}),_callee,null,[[5,12]])})));return function fetchData(){return _ref.apply(this,arguments)}}();abortCtrl.current.abort();fetchData();return()=>{didCancel=true;setIsLoading(false);abortCtrl.current.abort()}},[http,actionConnector,toastNotifications]);return{issueTypes:issueTypes,isLoading:isLoading}};function use_get_fields_by_issue_type_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_get_fields_by_issue_type_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_get_fields_by_issue_type_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_get_fields_by_issue_type_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function use_get_fields_by_issue_type_slicedToArray(arr,i){return use_get_fields_by_issue_type_arrayWithHoles(arr)||use_get_fields_by_issue_type_iterableToArrayLimit(arr,i)||use_get_fields_by_issue_type_unsupportedIterableToArray(arr,i)||use_get_fields_by_issue_type_nonIterableRest()}function use_get_fields_by_issue_type_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_get_fields_by_issue_type_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_get_fields_by_issue_type_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_get_fields_by_issue_type_arrayLikeToArray(o,minLen)}function use_get_fields_by_issue_type_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_get_fields_by_issue_type_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_get_fields_by_issue_type_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useGetFieldsByIssueType=({http:http,toastNotifications:toastNotifications,actionConnector:actionConnector,issueType:issueType})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(true),_useState2=use_get_fields_by_issue_type_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])({}),_useState4=use_get_fields_by_issue_type_slicedToArray(_useState3,2),fields=_useState4[0],setFields=_useState4[1];const abortCtrl=Object(external_kbnSharedDeps_React_["useRef"])(new AbortController);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{let didCancel=false;const fetchData=function(){var _ref=use_get_fields_by_issue_type_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var res,_res$data,_res$serviceMessage;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(!actionConnector||!issueType)){_context.next=3;break}setIsLoading(false);return _context.abrupt("return");case 3:abortCtrl.current=new AbortController;setIsLoading(true);_context.prev=5;_context.next=8;return getFieldsByIssueType({http:http,signal:abortCtrl.current.signal,connectorId:actionConnector.id,id:issueType});case 8:res=_context.sent;if(!didCancel){setIsLoading(false);setFields((_res$data=res.data)!==null&&_res$data!==void 0?_res$data:{});if(res.status&&res.status==="error"){toastNotifications.addDanger({title:translations["e"],text:"".concat((_res$serviceMessage=res.serviceMessage)!==null&&_res$serviceMessage!==void 0?_res$serviceMessage:res.message)})}}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);if(!didCancel){setIsLoading(false);toastNotifications.addDanger({title:translations["e"],text:_context.t0.message})}case 15:case"end":return _context.stop()}}),_callee,null,[[5,12]])})));return function fetchData(){return _ref.apply(this,arguments)}}();abortCtrl.current.abort();fetchData();return()=>{didCancel=true;setIsLoading(false);abortCtrl.current.abort()}},[http,actionConnector,issueType,toastNotifications]);return{isLoading:isLoading,fields:fields}};function use_get_issues_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_get_issues_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_get_issues_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_get_issues_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function use_get_issues_slicedToArray(arr,i){return use_get_issues_arrayWithHoles(arr)||use_get_issues_iterableToArrayLimit(arr,i)||use_get_issues_unsupportedIterableToArray(arr,i)||use_get_issues_nonIterableRest()}function use_get_issues_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_get_issues_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_get_issues_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_get_issues_arrayLikeToArray(o,minLen)}function use_get_issues_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_get_issues_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_get_issues_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useGetIssues=({http:http,actionConnector:actionConnector,toastNotifications:toastNotifications,query:query})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=use_get_issues_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=use_get_issues_slicedToArray(_useState3,2),issues=_useState4[0],setIssues=_useState4[1];const abortCtrl=Object(external_kbnSharedDeps_React_["useRef"])(new AbortController);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{let didCancel=false;const fetchData=Object(external_kbnSharedDeps_LodashFp_["debounce"])(500,use_get_issues_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var res,_res$data,_res$serviceMessage;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(!actionConnector||Object(external_kbnSharedDeps_LodashFp_["isEmpty"])(query))){_context.next=3;break}setIsLoading(false);return _context.abrupt("return");case 3:abortCtrl.current=new AbortController;setIsLoading(true);_context.prev=5;_context.next=8;return getIssues({http:http,signal:abortCtrl.current.signal,connectorId:actionConnector.id,title:query!==null&&query!==void 0?query:""});case 8:res=_context.sent;if(!didCancel){setIsLoading(false);setIssues((_res$data=res.data)!==null&&_res$data!==void 0?_res$data:[]);if(res.status&&res.status==="error"){toastNotifications.addDanger({title:translations["g"],text:"".concat((_res$serviceMessage=res.serviceMessage)!==null&&_res$serviceMessage!==void 0?_res$serviceMessage:res.message)})}}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);if(!didCancel){setIsLoading(false);toastNotifications.addDanger({title:translations["g"],text:_context.t0.message})}case 15:case"end":return _context.stop()}}),_callee,null,[[5,12]])}))));abortCtrl.current.abort();fetchData();return()=>{didCancel=true;setIsLoading(false);abortCtrl.current.abort()}},[http,actionConnector,toastNotifications,query]);return{issues:issues,isLoading:isLoading}};function use_get_single_issue_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_get_single_issue_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_get_single_issue_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_get_single_issue_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function use_get_single_issue_slicedToArray(arr,i){return use_get_single_issue_arrayWithHoles(arr)||use_get_single_issue_iterableToArrayLimit(arr,i)||use_get_single_issue_unsupportedIterableToArray(arr,i)||use_get_single_issue_nonIterableRest()}function use_get_single_issue_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_get_single_issue_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_get_single_issue_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_get_single_issue_arrayLikeToArray(o,minLen)}function use_get_single_issue_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_get_single_issue_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_get_single_issue_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useGetSingleIssue=({http:http,toastNotifications:toastNotifications,actionConnector:actionConnector,id:id})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=use_get_single_issue_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(null),_useState4=use_get_single_issue_slicedToArray(_useState3,2),issue=_useState4[0],setIssue=_useState4[1];const abortCtrl=Object(external_kbnSharedDeps_React_["useRef"])(new AbortController);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{let didCancel=false;const fetchData=function(){var _ref=use_get_single_issue_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var res,_res$data,_res$serviceMessage;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(!actionConnector||!id)){_context.next=3;break}setIsLoading(false);return _context.abrupt("return");case 3:abortCtrl.current=new AbortController;setIsLoading(true);_context.prev=5;_context.next=8;return getIssue({http:http,signal:abortCtrl.current.signal,connectorId:actionConnector.id,id:id});case 8:res=_context.sent;if(!didCancel){setIsLoading(false);setIssue((_res$data=res.data)!==null&&_res$data!==void 0?_res$data:null);if(res.status&&res.status==="error"){toastNotifications.addDanger({title:translations["f"](id),text:"".concat((_res$serviceMessage=res.serviceMessage)!==null&&_res$serviceMessage!==void 0?_res$serviceMessage:res.message)})}}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);if(!didCancel){setIsLoading(false);toastNotifications.addDanger({title:translations["f"](id),text:_context.t0.message})}case 15:case"end":return _context.stop()}}),_callee,null,[[5,12]])})));return function fetchData(){return _ref.apply(this,arguments)}}();abortCtrl.current.abort();fetchData();return()=>{didCancel=true;setIsLoading(false);abortCtrl.current.abort()}},[http,actionConnector,id,toastNotifications]);return{isLoading:isLoading,issue:issue}};function search_issues_slicedToArray(arr,i){return search_issues_arrayWithHoles(arr)||search_issues_iterableToArrayLimit(arr,i)||search_issues_unsupportedIterableToArray(arr,i)||search_issues_nonIterableRest()}function search_issues_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function search_issues_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return search_issues_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return search_issues_arrayLikeToArray(o,minLen)}function search_issues_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function search_issues_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function search_issues_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const SearchIssuesComponent=({selectedValue:selectedValue,http:http,toastNotifications:toastNotifications,actionConnector:actionConnector,onChange:onChange})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=search_issues_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=search_issues_slicedToArray(_useState3,2),selectedOptions=_useState4[0],setSelectedOptions=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])([]),_useState6=search_issues_slicedToArray(_useState5,2),options=_useState6[0],setOptions=_useState6[1];const _useGetIssues=useGetIssues({http:http,toastNotifications:toastNotifications,actionConnector:actionConnector,query:query}),isLoadingIssues=_useGetIssues.isLoading,issues=_useGetIssues.issues;const _useGetSingleIssue=useGetSingleIssue({http:http,toastNotifications:toastNotifications,actionConnector:actionConnector,id:selectedValue}),isLoadingSingleIssue=_useGetSingleIssue.isLoading,singleIssue=_useGetSingleIssue.issue;Object(external_kbnSharedDeps_React_["useEffect"])(()=>setOptions(issues.map(issue=>({label:issue.title,value:issue.key}))),[issues]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(isLoadingSingleIssue||singleIssue==null){return}const singleIssueAsOptions=[{label:singleIssue.title,value:singleIssue.key}];setOptions(singleIssueAsOptions);setSelectedOptions(singleIssueAsOptions)},[singleIssue,isLoadingSingleIssue]);const onSearchChange=Object(external_kbnSharedDeps_React_["useCallback"])(searchVal=>{setQuery(searchVal)},[]);const onChangeComboBox=Object(external_kbnSharedDeps_React_["useCallback"])(changedOptions=>{setSelectedOptions(changedOptions);onChange(changedOptions[0].value)},[onChange]);const inputPlaceholder=Object(external_kbnSharedDeps_React_["useMemo"])(()=>isLoadingIssues||isLoadingSingleIssue?translations["x"]:translations["y"],[isLoadingIssues,isLoadingSingleIssue]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{singleSelection:true,fullWidth:true,placeholder:inputPlaceholder,"data-test-sub":"search-parent-issues","aria-label":translations["w"],options:options,isLoading:isLoadingIssues||isLoadingSingleIssue,onSearchChange:onSearchChange,selectedOptions:selectedOptions,onChange:onChangeComboBox})};const SearchIssues=Object(external_kbnSharedDeps_React_["memo"])(SearchIssuesComponent);var extract_action_variable=__webpack_require__(101);var kibana=__webpack_require__(37);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function jira_params_slicedToArray(arr,i){return jira_params_arrayWithHoles(arr)||jira_params_iterableToArrayLimit(arr,i)||jira_params_unsupportedIterableToArray(arr,i)||jira_params_nonIterableRest()}function jira_params_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jira_params_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return jira_params_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jira_params_arrayLikeToArray(o,minLen)}function jira_params_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function jira_params_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function jira_params_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const JiraParamsFields=({actionParams:actionParams,editAction:editAction,index:index,errors:errors,messageVariables:messageVariables,actionConnector:actionConnector})=>{const _useKibana$services=Object(kibana["b"])().services,http=_useKibana$services.http,toasts=_useKibana$services.notifications.toasts;const _ref=actionParams.subActionParams||{},title=_ref.title,description=_ref.description,comments=_ref.comments,issueType=_ref.issueType,priority=_ref.priority,labels=_ref.labels,parent=_ref.parent,savedObjectId=_ref.savedObjectId;const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=jira_params_slicedToArray(_useState,2),issueTypesSelectOptions=_useState2[0],setIssueTypesSelectOptions=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=jira_params_slicedToArray(_useState3,2),firstLoad=_useState4[0],setFirstLoad=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])([]),_useState6=jira_params_slicedToArray(_useState5,2),prioritiesSelectOptions=_useState6[0],setPrioritiesSelectOptions=_useState6[1];const isActionBeingConfiguredByAnAlert=messageVariables?Object(Option["isSome"])(Object(extract_action_variable["a"])(messageVariables,"alertId")):false;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setFirstLoad(true)},[]);const _useGetIssueTypes=useGetIssueTypes({http:http,toastNotifications:toasts,actionConnector:actionConnector}),isLoadingIssueTypes=_useGetIssueTypes.isLoading,issueTypes=_useGetIssueTypes.issueTypes;const _useGetFieldsByIssueT=useGetFieldsByIssueType({http:http,toastNotifications:toasts,actionConnector:actionConnector,issueType:issueType}),isLoadingFields=_useGetFieldsByIssueT.isLoading,fields=_useGetFieldsByIssueT.fields;const hasLabels=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object.prototype.hasOwnProperty.call(fields,"labels"),[fields]);const hasDescription=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object.prototype.hasOwnProperty.call(fields,"description"),[fields]);const hasPriority=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object.prototype.hasOwnProperty.call(fields,"priority"),[fields]);const hasParent=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object.prototype.hasOwnProperty.call(fields,"parent"),[fields]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const options=issueTypes.map(type=>{var _type$id,_type$name;return{value:(_type$id=type.id)!==null&&_type$id!==void 0?_type$id:"",text:(_type$name=type.name)!==null&&_type$name!==void 0?_type$name:""}});setIssueTypesSelectOptions(options)},[issueTypes]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(issueType!=null&&fields!=null){var _fields$priority$allo,_fields$priority;const priorities=(_fields$priority$allo=(_fields$priority=fields.priority)===null||_fields$priority===void 0?void 0:_fields$priority.allowedValues)!==null&&_fields$priority$allo!==void 0?_fields$priority$allo:[];const options=Object(external_kbnSharedDeps_LodashFp_["map"])(p=>({value:p.name,text:p.name}),priorities);setPrioritiesSelectOptions(options)}},[fields,issueType]);const labelOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>labels?labels.map(label=>({label:label})):[],[labels]);const editSubActionProperty=(key,value)=>{const newProps=_objectSpread(_objectSpread({},actionParams.subActionParams),{},{[key]:value});editAction("subActionParams",newProps,index)};Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!firstLoad){return}setIssueTypesSelectOptions([]);editAction("subActionParams",{title:title,comments:comments,description:"",savedObjectId:savedObjectId},index)},[actionConnector]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!firstLoad){return}setPrioritiesSelectOptions([]);editAction("subActionParams",{title:title,issueType:issueType,comments:comments,description:"",savedObjectId:savedObjectId},index)},[issueType,savedObjectId]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!actionParams.subAction){editAction("subAction","pushToService",index)}if(!savedObjectId&&isActionBeingConfiguredByAnAlert){editSubActionProperty("savedObjectId","{{alertId}}")}},[actionConnector,actionParams.subAction,index,savedObjectId,issueTypesSelectOptions,issueType]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!issueType&&issueTypesSelectOptions.length>0){editSubActionProperty("issueType",issueTypesSelectOptions[0].value)}},[issueTypes,issueTypesSelectOptions]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!priority&&prioritiesSelectOptions.length>0){editSubActionProperty("priority",prioritiesSelectOptions[0].value)}},[actionConnector,issueType,prioritiesSelectOptions]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.jira.urgencySelectFieldLabel",{defaultMessage:"Issue type"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{fullWidth:true,isLoading:isLoadingIssueTypes,disabled:isLoadingIssueTypes||isLoadingFields,"data-test-subj":"issueTypeSelect",options:issueTypesSelectOptions,value:issueType,onChange:e=>{editSubActionProperty("issueType",e.target.value)}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),hasParent&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.jira.parentIssueSearchLabel",{defaultMessage:"Parent issue"})},external_kbnSharedDeps_React_default.a.createElement(SearchIssues,{selectedValue:parent,http:http,toastNotifications:toasts,actionConnector:actionConnector,onChange:parentIssueKey=>{editSubActionProperty("parent",parentIssueKey)}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,hasPriority&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.jira.severitySelectFieldLabel",{defaultMessage:"Priority"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{fullWidth:true,isLoading:isLoadingFields,disabled:isLoadingIssueTypes||isLoadingFields,"data-test-subj":"prioritySelect",options:prioritiesSelectOptions,value:priority,onChange:e=>{editSubActionProperty("priority",e.target.value)}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,error:errors.title,isInvalid:errors.title.length>0&&title!==undefined,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.jira.titleFieldLabel",{defaultMessage:"Summary"})},external_kbnSharedDeps_React_default.a.createElement(text_field_with_message_variables["a"],{index:index,editAction:editSubActionProperty,messageVariables:messageVariables,paramsProperty:"title",inputTargetValue:title,errors:errors.title})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),!isActionBeingConfiguredByAnAlert&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.jira.savedObjectIdFieldLabel",{defaultMessage:"Object ID (optional)"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormControlLayout"],{fullWidth:true,append:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.jira.savedObjectIdFieldHelp",{defaultMessage:"JIRA will associate this action with the ID of a Kibana saved object."})})},external_kbnSharedDeps_React_default.a.createElement(text_field_with_message_variables["a"],{index:index,editAction:editSubActionProperty,messageVariables:messageVariables,paramsProperty:"savedObjectId",inputTargetValue:savedObjectId})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})),hasLabels&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.jira.impactSelectFieldLabel",{defaultMessage:"Labels (optional)"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{noSuggestions:true,fullWidth:true,isLoading:isLoadingFields,isDisabled:isLoadingIssueTypes||isLoadingFields,selectedOptions:labelOptions,onCreateOption:searchValue=>{const newOptions=[...labelOptions,{label:searchValue}];editSubActionProperty("labels",newOptions.map(newOption=>newOption.label))},onChange:selectedOptions=>{editSubActionProperty("labels",selectedOptions.map(selectedOption=>selectedOption.label))},onBlur:()=>{if(!labels){editSubActionProperty("labels",[])}},isClearable:true,"data-test-subj":"labelsComboBox"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})),hasDescription&&external_kbnSharedDeps_React_default.a.createElement(text_area_with_message_variables["a"],{index:index,editAction:editSubActionProperty,messageVariables:messageVariables,paramsProperty:"description",inputTargetValue:description,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.jira.descriptionTextAreaFieldLabel",{defaultMessage:"Description (optional)"}),errors:errors.description}),external_kbnSharedDeps_React_default.a.createElement(text_area_with_message_variables["a"],{index:index,editAction:(key,value)=>{editSubActionProperty(key,[{commentId:"1",comment:value}])},messageVariables:messageVariables,paramsProperty:"comments",inputTargetValue:comments&&comments.length>0?comments[0].comment:"",label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.components.builtinActionTypes.jira.commentsTextAreaFieldLabel",{defaultMessage:"Additional comments (optional)"}),errors:errors.comments}))))}}}]);