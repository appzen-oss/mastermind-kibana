/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["triggersActionsUi_bundle_jsonpfunction"]=window["triggersActionsUi_bundle_jsonpfunction"]||[]).push([[2],{102:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return actionTypeCompare}));function actionTypeCompare(a,b,preconfiguredConnectors){const aEnabled=getIsEnabledValue(a,preconfiguredConnectors);const bEnabled=getIsEnabledValue(b,preconfiguredConnectors);if(aEnabled===true&&bEnabled===false){return-1}if(aEnabled===false&&bEnabled===true){return 1}return a.name.localeCompare(b.name)}const getIsEnabledValue=(actionType,preconfiguredConnectors)=>{let isEnabled=actionType.enabled;if(!actionType.enabledInConfig&&preconfiguredConnectors&&preconfiguredConnectors.length>0){isEnabled=preconfiguredConnectors.find(connector=>connector.actionTypeId===actionType.id)!==undefined}return isEnabled}},103:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(104);case"v7light":return __webpack_require__(106);case"v8dark":return __webpack_require__(108);case"v8light":return __webpack_require__(110)}},104:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(105);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},105:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actCheckActionTypeEnabled__disabledActionWarningCard {\n  background-color: #25262E; }\n\n.actAccordionActionForm {\n  background-color: #25262E; }\n\n.actAccordionActionForm .euiCard {\n  box-shadow: none; }\n\n.actAccordionActionForm__button {\n  padding: 12px; }\n\n.actConnectorsListGrid .euiToolTipAnchor,\n.actConnectorsListGrid .euiCard {\n  height: 100%; }\n",""]);module.exports=exports},106:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(107);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},107:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actCheckActionTypeEnabled__disabledActionWarningCard {\n  background-color: #F8F8F8; }\n\n.actAccordionActionForm {\n  background-color: #F8F8F8; }\n\n.actAccordionActionForm .euiCard {\n  box-shadow: none; }\n\n.actAccordionActionForm__button {\n  padding: 12px; }\n\n.actConnectorsListGrid .euiToolTipAnchor,\n.actConnectorsListGrid .euiCard {\n  height: 100%; }\n",""]);module.exports=exports},108:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(109);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},109:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actCheckActionTypeEnabled__disabledActionWarningCard {\n  background-color: #25262E; }\n\n.actAccordionActionForm {\n  background-color: #25262E; }\n\n.actAccordionActionForm .euiCard {\n  box-shadow: none; }\n\n.actAccordionActionForm__button {\n  padding: 12px; }\n\n.actConnectorsListGrid .euiToolTipAnchor,\n.actConnectorsListGrid .euiCard {\n  height: 100%; }\n",""]);module.exports=exports},110:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(111);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},111:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".actCheckActionTypeEnabled__disabledActionWarningCard {\n  background-color: #F8F8F8; }\n\n.actAccordionActionForm {\n  background-color: #F8F8F8; }\n\n.actAccordionActionForm .euiCard {\n  box-shadow: none; }\n\n.actAccordionActionForm__button {\n  padding: 12px; }\n\n.actConnectorsListGrid .euiToolTipAnchor,\n.actConnectorsListGrid .euiCard {\n  height: 100%; }\n",""]);module.exports=exports},50:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return ConnectorAddFlyout}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(8);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var action_connector_api=__webpack_require__(38);var action_type_compare=__webpack_require__(102);var check_action_type_enabled=__webpack_require__(95);var kibana=__webpack_require__(37);function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e3){didErr=true;err=_e3},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const ActionTypeMenu=({onActionTypeChange:onActionTypeChange,actionTypes:actionTypes,setHasActionsUpgradeableByTrial:setHasActionsUpgradeableByTrial,actionTypeRegistry:actionTypeRegistry})=>{const _useKibana$services=Object(kibana["b"])().services,http=_useKibana$services.http,toasts=_useKibana$services.notifications.toasts;const _useState=Object(external_kbnSharedDeps_React_["useState"])(undefined),_useState2=_slicedToArray(_useState,2),actionTypesIndex=_useState2[0],setActionTypesIndex=_useState2[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var availableActionTypes,index,_iterator,_step,actionTypeItem,hasActionsUpgradeableByTrial;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!(actionTypes!==null&&actionTypes!==void 0)){_context.next=5;break}_context.t0=actionTypes;_context.next=8;break;case 5:_context.next=7;return Object(action_connector_api["d"])({http:http});case 7:_context.t0=_context.sent;case 8:availableActionTypes=_context.t0;index={};_iterator=_createForOfIteratorHelper(availableActionTypes);try{for(_iterator.s();!(_step=_iterator.n()).done;){actionTypeItem=_step.value;index[actionTypeItem.id]=actionTypeItem}}catch(err){_iterator.e(err)}finally{_iterator.f()}setActionTypesIndex(index);if(setHasActionsUpgradeableByTrial){hasActionsUpgradeableByTrial=availableActionTypes.some(action=>!index[action.id].enabledInLicense&&index[action.id].minimumLicenseRequired==="gold");setHasActionsUpgradeableByTrial(hasActionsUpgradeableByTrial)}_context.next=19;break;case 16:_context.prev=16;_context.t1=_context["catch"](0);if(toasts){toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.actionsConnectorsList.unableToLoadActionTypesMessage",{defaultMessage:"Unable to load action types"})})}case 19:case"end":return _context.stop()}}),_callee,null,[[0,16]])})))()},[]);const registeredActionTypes=Object.entries(actionTypesIndex!==null&&actionTypesIndex!==void 0?actionTypesIndex:[]).filter(([id,details])=>actionTypeRegistry.has(id)&&details.enabledInConfig===true).map(([id,actionType])=>{const actionTypeModel=actionTypeRegistry.get(id);return{iconClass:actionTypeModel?actionTypeModel.iconClass:"",selectMessage:actionTypeModel?actionTypeModel.selectMessage:"",actionType:actionType,name:actionType.name,typeName:id.replace(".","")}});const cardNodes=registeredActionTypes.sort((a,b)=>Object(action_type_compare["a"])(a.actionType,b.actionType)).map((item,index)=>{const checkEnabledResult=Object(check_action_type_enabled["b"])(item.actionType);const card=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCard"],{titleSize:"xs","data-test-subj":"".concat(item.actionType.id,"-card"),icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"xl",type:item.iconClass}),title:item.name,description:item.selectMessage,isDisabled:!checkEnabledResult.isEnabled,onClick:()=>onActionTypeChange(item.actionType)});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:index},checkEnabledResult.isEnabled&&card,checkEnabledResult.isEnabled===false&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:checkEnabledResult.message},card))});return external_kbnSharedDeps_React_default.a.createElement("div",{className:"actConnectorsListGrid"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGrid"],{gutterSize:"xl",columns:3},cardNodes))};var action_connector_form=__webpack_require__(92);var connector_reducer=__webpack_require__(93);var lib_capabilities=__webpack_require__(75);var constants=__webpack_require__(12);function connector_add_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function connector_add_flyout_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){connector_add_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){connector_add_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function connector_add_flyout_slicedToArray(arr,i){return connector_add_flyout_arrayWithHoles(arr)||connector_add_flyout_iterableToArrayLimit(arr,i)||connector_add_flyout_unsupportedIterableToArray(arr,i)||connector_add_flyout_nonIterableRest()}function connector_add_flyout_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function connector_add_flyout_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return connector_add_flyout_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return connector_add_flyout_arrayLikeToArray(o,minLen)}function connector_add_flyout_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function connector_add_flyout_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function connector_add_flyout_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const ConnectorAddFlyout=({onClose:onClose,actionTypes:actionTypes,onTestConnector:onTestConnector,reloadConnectors:reloadConnectors,consumer:consumer,actionTypeRegistry:actionTypeRegistry})=>{var _actionType$id;let hasErrors=false;const _useKibana$services=Object(kibana["b"])().services,http=_useKibana$services.http,toasts=_useKibana$services.notifications.toasts,capabilities=_useKibana$services.application.capabilities;const _useState=Object(external_kbnSharedDeps_React_["useState"])(undefined),_useState2=connector_add_flyout_slicedToArray(_useState,2),actionType=_useState2[0],setActionType=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=connector_add_flyout_slicedToArray(_useState3,2),hasActionsUpgradeableByTrial=_useState4[0],setHasActionsUpgradeableByTrial=_useState4[1];const initialConnector={actionTypeId:(_actionType$id=actionType===null||actionType===void 0?void 0:actionType.id)!==null&&_actionType$id!==void 0?_actionType$id:"",config:{},secrets:{}};const _useReducer=Object(external_kbnSharedDeps_React_["useReducer"])(connector_reducer["a"],{connector:initialConnector}),_useReducer2=connector_add_flyout_slicedToArray(_useReducer,2),connector=_useReducer2[0].connector,dispatch=_useReducer2[1];const setActionProperty=(key,value)=>{dispatch({command:{type:"setProperty"},payload:{key:key,value:value}})};const setConnector=value=>{dispatch({command:{type:"setConnector"},payload:{key:"connector",value:value}})};const _useState5=Object(external_kbnSharedDeps_React_["useState"])(false),_useState6=connector_add_flyout_slicedToArray(_useState5,2),isSaving=_useState6[0],setIsSaving=_useState6[1];const closeFlyout=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{onClose()},[onClose]);const canSave=Object(lib_capabilities["d"])(capabilities);function onActionTypeChange(newActionType){setActionType(newActionType);setActionProperty("actionTypeId",newActionType.id)}let currentForm;let actionTypeModel;if(!actionType){currentForm=external_kbnSharedDeps_React_default.a.createElement(ActionTypeMenu,{onActionTypeChange:onActionTypeChange,actionTypes:actionTypes,setHasActionsUpgradeableByTrial:setHasActionsUpgradeableByTrial,actionTypeRegistry:actionTypeRegistry})}else{var _actionTypeModel;actionTypeModel=actionTypeRegistry.get(actionType.id);const errors=_objectSpread(_objectSpread({},(_actionTypeModel=actionTypeModel)===null||_actionTypeModel===void 0?void 0:_actionTypeModel.validateConnector(connector).errors),Object(action_connector_form["b"])(connector).errors);hasErrors=!!Object.keys(errors).find(errorKey=>errors[errorKey].length>=1);currentForm=external_kbnSharedDeps_React_default.a.createElement(action_connector_form["a"],{actionTypeName:actionType.name,connector:connector,dispatch:dispatch,errors:errors,actionTypeRegistry:actionTypeRegistry,consumer:consumer})}const onActionConnectorSave=function(){var _ref=connector_add_flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Object(action_connector_api["a"])({http:http,connector:connector}).then(savedConnector=>{if(toasts){toasts.addSuccess(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.addConnectorForm.updateSuccessNotificationText",{defaultMessage:"Created '{connectorName}'",values:{connectorName:savedConnector.name}}))}return savedConnector}).catch(errorRes=>{var _errorRes$body$messag,_errorRes$body;toasts.addDanger((_errorRes$body$messag=(_errorRes$body=errorRes.body)===null||_errorRes$body===void 0?void 0:_errorRes$body.message)!==null&&_errorRes$body$messag!==void 0?_errorRes$body$messag:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.addConnectorForm.updateErrorNotificationText",{defaultMessage:"Cannot create a connector."}));return undefined});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})));return function onActionConnectorSave(){return _ref.apply(this,arguments)}}();const onSaveClicked=function(){var _ref2=connector_add_flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var savedAction;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setIsSaving(true);_context2.next=3;return onActionConnectorSave();case 3:savedAction=_context2.sent;setIsSaving(false);if(!savedAction){_context2.next=10;break}closeFlyout();if(!reloadConnectors){_context2.next=10;break}_context2.next=10;return reloadConnectors();case 10:return _context2.abrupt("return",savedAction);case 11:case"end":return _context2.stop()}}),_callee2)})));return function onSaveClicked(){return _ref2.apply(this,arguments)}}();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:closeFlyout,"aria-labelledby":"flyoutActionAddTitle",size:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"m",alignItems:"center"},actionTypeModel&&actionTypeModel.iconClass?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:actionTypeModel.iconClass,size:"xl"})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,actionTypeModel&&actionType?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",{id:"flyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"{actionTypeName} connector",id:"xpack.triggersActionsUI.sections.addConnectorForm.flyoutTitle",values:{actionTypeName:actionType.name}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},actionTypeModel.selectMessage)):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",{id:"selectConnectorFlyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Select a connector",id:"xpack.triggersActionsUI.sections.addConnectorForm.selectConnectorFlyoutTitle"})))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],{banner:!actionType&&hasActionsUpgradeableByTrial?external_kbnSharedDeps_React_default.a.createElement(UpgradeYourLicenseCallOut,{http:http}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null)},currentForm),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},!actionType?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"cancelButton",onClick:closeFlyout},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.actionConnectorAdd.cancelButtonLabel",{defaultMessage:"Cancel"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"backButton",onClick:()=>{setActionType(undefined);setConnector(initialConnector)}},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.actionConnectorAdd.backButtonLabel",{defaultMessage:"Back"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},canSave&&actionTypeModel&&actionType?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,onTestConnector&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"secondary","data-test-subj":"saveAndTestNewActionButton",type:"submit",isDisabled:hasErrors,isLoading:isSaving,onClick:connector_add_flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var savedConnector;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return onSaveClicked();case 2:savedConnector=_context3.sent;if(savedConnector){onTestConnector(savedConnector)}case 4:case"end":return _context3.stop()}}),_callee3)})))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorAdd.saveAndTestButtonLabel",defaultMessage:"Save & Test"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,color:"secondary","data-test-subj":"saveNewActionButton",type:"submit",isDisabled:hasErrors,isLoading:isSaving,onClick:onSaveClicked},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorAdd.saveButtonLabel",defaultMessage:"Save"})))):null)))))};const UpgradeYourLicenseCallOut=({http:http})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.actionConnectorAdd.upgradeYourPlanBannerTitle",{defaultMessage:"Upgrade your license to access all connectors"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorAdd.upgradeYourPlanBannerMessage",defaultMessage:"Upgrade your license or start a 30-day free trial for immediate access to all third-party connectors."}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{href:"".concat(http.basePath.get(),"/app/management/stack/license_management"),iconType:"gear",target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorAdd.manageLicensePlanBannerLinkTitle",defaultMessage:"Manage license"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{href:constants["VIEW_LICENSE_OPTIONS_LINK"],iconType:"popout",iconSide:"right",target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorAdd.upgradeYourPlanBannerLinkTitle",defaultMessage:"Subscription plans"})))))},92:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return validateBaseProperties}));__webpack_require__.d(__webpack_exports__,"a",(function(){return ActionConnectorForm}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__);var _kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8);var _kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__);var _lib_capabilities__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(75);var _common_lib_kibana__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(37);function validateBaseProperties(actionObject){const validationResult={errors:{}};const verrors={name:new Array};validationResult.errors=verrors;if(!actionObject.name){verrors.name.push(_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.sections.actionConnectorForm.error.requiredNameText",{defaultMessage:"Name is required."}))}return validationResult}const ActionConnectorForm=({connector:connector,dispatch:dispatch,actionTypeName:actionTypeName,serverError:serverError,errors:errors,actionTypeRegistry:actionTypeRegistry,consumer:consumer})=>{const _useKibana$services=Object(_common_lib_kibana__WEBPACK_IMPORTED_MODULE_5__["b"])().services,docLinks=_useKibana$services.docLinks,capabilities=_useKibana$services.application.capabilities;const canSave=Object(_lib_capabilities__WEBPACK_IMPORTED_MODULE_4__["d"])(capabilities);const setActionProperty=(key,value)=>{dispatch({command:{type:"setProperty"},payload:{key:key,value:value}})};const setActionConfigProperty=(key,value)=>{dispatch({command:{type:"setConfigProperty"},payload:{key:key,value:value}})};const setActionSecretsProperty=(key,value)=>{dispatch({command:{type:"setSecretsProperty"},payload:{key:key,value:value}})};const actionTypeRegistered=actionTypeRegistry.get(connector.actionTypeId);if(!actionTypeRegistered)return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Fragment"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiCallOut"],{title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.sections.actionConnectorForm.actions.actionTypeConfigurationWarningTitleText",{defaultMessage:"Action type not registered"}),color:"warning",iconType:"help"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiText"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actions.actionConfigurationWarningDescriptionText",defaultMessage:"To create this connector, you must configure at least one {actionType} account. {docLink}",values:{actionType:actionTypeName,docLink:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiLink"],{href:"".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(docLinks.DOC_LINK_VERSION,"/action-types.html"),target:"_blank"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actions.actionConfigurationWarningHelpLinkText",defaultMessage:"Learn more."}))}})))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],null));const FieldsComponent=actionTypeRegistered.actionConnectorFields;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiForm"],{isInvalid:!!serverError,error:serverError===null||serverError===void 0?void 0:serverError.body.message},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFormRow"],{id:"actionName",fullWidth:true,label:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorForm.actionNameLabel",defaultMessage:"Connector name"}),isInvalid:errors.name.length>0&&connector.name!==undefined,error:errors.name},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFieldText"],{fullWidth:true,readOnly:!canSave,isInvalid:errors.name.length>0&&connector.name!==undefined,name:"name",placeholder:"Untitled","data-test-subj":"nameInput",value:connector.name||"",onChange:e=>{setActionProperty("name",e.target.value)},onBlur:()=>{if(!connector.name){setActionProperty("name","")}}})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"m"}),FieldsComponent!==null?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiTitle"],{size:"xxs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h4",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.actionConnectorForm.connectorSettingsLabel",defaultMessage:"Connector settings"}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"s"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiErrorBoundary"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Suspense"],{fallback:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexGroup"],{justifyContent:"center"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],{grow:false},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiLoadingSpinner"],{size:"m"})))},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FieldsComponent,{action:connector,errors:errors,readOnly:!canSave,editActionConfig:setActionConfigProperty,editActionSecrets:setActionSecretsProperty,consumer:consumer})))):null)}},93:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return connectorReducer}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(16);var lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const connectorReducer=(state,action)=>{const command=action.command,payload=action.payload;const connector=state.connector;switch(command.type){case"setConnector":{const key=payload.key,value=payload.value;if(key==="connector"){return _objectSpread(_objectSpread({},state),{},{connector:value})}else{return state}}case"setProperty":{const key=payload.key,value=payload.value;if(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEqual"])(connector[key],value)){return state}else{return _objectSpread(_objectSpread({},state),{},{connector:_objectSpread(_objectSpread({},connector),{},{[key]:value})})}}case"setConfigProperty":{const key=payload.key,value=payload.value;if(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEqual"])(connector.config[key],value)){return state}else{return _objectSpread(_objectSpread({},state),{},{connector:_objectSpread(_objectSpread({},connector),{},{config:_objectSpread(_objectSpread({},connector.config),{},{[key]:value})})})}}case"setSecretsProperty":{const key=payload.key,value=payload.value;if(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEqual"])(connector.secrets[key],value)){return state}else{return _objectSpread(_objectSpread({},state),{},{connector:_objectSpread(_objectSpread({},connector),{},{secrets:_objectSpread(_objectSpread({},connector.secrets),{},{[key]:value})})})}}}}},95:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return checkActionTypeEnabled}));__webpack_require__.d(__webpack_exports__,"a",(function(){return checkActionFormActionTypeEnabled}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(16);var lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__);var _kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8);var _kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__);var _elastic_eui__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2);var _elastic_eui__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__);var _common_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(12);var _check_action_type_enabled_scss__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(103);var _check_action_type_enabled_scss__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_check_action_type_enabled_scss__WEBPACK_IMPORTED_MODULE_6__);const getLicenseCheckResult=actionType=>({isEnabled:false,message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.checkActionTypeEnabled.actionTypeDisabledByLicenseMessage",{defaultMessage:"This connector requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(lodash__WEBPACK_IMPORTED_MODULE_1__["upperFirst"])(actionType.minimumLicenseRequired)}}),messageCard:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiCard"],{titleSize:"xs",title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.actionTypeDisabledByLicenseMessageTitle",{defaultMessage:"This feature requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(lodash__WEBPACK_IMPORTED_MODULE_1__["upperFirst"])(actionType.minimumLicenseRequired)}}),description:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.actionTypeDisabledByLicenseMessageDescription",{defaultMessage:"To re-enable this action, please upgrade your license."}),className:"actCheckActionTypeEnabled__disabledActionWarningCard",children:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiLink"],{href:_common_constants__WEBPACK_IMPORTED_MODULE_5__["VIEW_LICENSE_OPTIONS_LINK"],target:"_blank"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{defaultMessage:"View license options",id:"xpack.triggersActionsUI.sections.alertForm.actionTypeDisabledByLicenseLinkTitle"}))})});const configurationCheckResult={isEnabled:false,message:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.checkActionTypeEnabled.actionTypeDisabledByConfigMessage",{defaultMessage:"This connector is disabled by the Kibana configuration."}),messageCard:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiCard"],{title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_2__["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.actionTypeDisabledByConfigMessageTitle",{defaultMessage:"This feature is disabled by the Kibana configuration."}),description:"",className:"actCheckActionTypeEnabled__disabledActionWarningCard"})};function checkActionTypeEnabled(actionType){if((actionType===null||actionType===void 0?void 0:actionType.enabledInLicense)===false){return getLicenseCheckResult(actionType)}if((actionType===null||actionType===void 0?void 0:actionType.enabledInConfig)===false){return configurationCheckResult}return{isEnabled:true}}function checkActionFormActionTypeEnabled(actionType,preconfiguredConnectors){if((actionType===null||actionType===void 0?void 0:actionType.enabledInLicense)===false){return getLicenseCheckResult(actionType)}if((actionType===null||actionType===void 0?void 0:actionType.enabledInConfig)===false&&!preconfiguredConnectors.find(preconfiguredConnector=>preconfiguredConnector.actionTypeId===actionType.id)){return configurationCheckResult}return{isEnabled:true}}}}]);