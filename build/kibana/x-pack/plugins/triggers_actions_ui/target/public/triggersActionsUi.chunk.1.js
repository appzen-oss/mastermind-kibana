/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["triggersActionsUi_bundle_jsonpfunction"]=window["triggersActionsUi_bundle_jsonpfunction"]||[]).push([[1],{121:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(122);case"v7light":return __webpack_require__(124);case"v8dark":return __webpack_require__(126);case"v8light":return __webpack_require__(128)}},122:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(123);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},123:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".alertingHealthCheck__body {\n  padding-left: 32px;\n  padding-right: 32px; }\n\n.alertingFlyoutHealthCheck__body {\n  padding-left: 32px;\n  padding-right: 32px;\n  margin-top: 16px; }\n",""]);module.exports=exports},124:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(125);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},125:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".alertingHealthCheck__body {\n  padding-left: 32px;\n  padding-right: 32px; }\n\n.alertingFlyoutHealthCheck__body {\n  padding-left: 32px;\n  padding-right: 32px;\n  margin-top: 16px; }\n",""]);module.exports=exports},126:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(127);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},127:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".alertingHealthCheck__body {\n  padding-left: 32px;\n  padding-right: 32px; }\n\n.alertingFlyoutHealthCheck__body {\n  padding-left: 32px;\n  padding-right: 32px;\n  margin-top: 16px; }\n",""]);module.exports=exports},128:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(129);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},129:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".alertingHealthCheck__body {\n  padding-left: 32px;\n  padding-right: 32px; }\n\n.alertingFlyoutHealthCheck__body {\n  padding-left: 32px;\n  padding-right: 32px;\n  margin-top: 16px; }\n",""]);module.exports=exports},138:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return validateBaseProperties}));__webpack_require__.d(__webpack_exports__,"b",(function(){return isValidAlert}));__webpack_require__.d(__webpack_exports__,"a",(function(){return AlertForm}));var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(8);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var Option=__webpack_require__(77);var pipeable=__webpack_require__(86);var external_kbnSharedDeps_Lodash_=__webpack_require__(16);var parse_duration_=__webpack_require__(68);var alert_api=__webpack_require__(88);var get_time_options=__webpack_require__(21);var alerts_context=__webpack_require__(34);var action_connector_form=__webpack_require__(20);var common_=__webpack_require__(10);var lib_capabilities=__webpack_require__(75);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const SolutionFilter=({solutions:solutions,onChange:onChange})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=_slicedToArray(_useState,2),selectedValues=_useState2[0],setSelectedValues=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=_slicedToArray(_useState3,2),isPopoverOpen=_useState4[0],setIsPopoverOpen=_useState4[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(onChange){onChange(selectedValues)}},[selectedValues]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{isOpen:isPopoverOpen,closePopover:()=>setIsPopoverOpen(false),button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterButton"],{iconType:"arrowDown",hasActiveFilters:selectedValues.length>0,numActiveFilters:selectedValues.length,numFilters:selectedValues.length,onClick:()=>setIsPopoverOpen(!isPopoverOpen),"data-test-subj":"solutionsFilterButton"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.solutionFilterLabel",defaultMessage:"Filter by solution"}))},external_kbnSharedDeps_React_default.a.createElement("div",{className:"euiFilterSelect__items"},[...solutions.entries()].map(([id,title])=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFilterSelectItem"],{key:id,onClick:()=>{const isPreviouslyChecked=selectedValues.includes(id);if(isPreviouslyChecked){setSelectedValues(selectedValues.filter(val=>val!==id))}else{setSelectedValues([...selectedValues,id])}},checked:selectedValues.includes(id)?"on":undefined,"data-test-subj":"solution".concat(id,"FilterOption")},title)))))};var alert_form=__webpack_require__(150);function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=alert_form_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e3){didErr=true;err=_e3},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function alert_form_slicedToArray(arr,i){return alert_form_arrayWithHoles(arr)||alert_form_iterableToArrayLimit(arr,i)||alert_form_unsupportedIterableToArray(arr,i)||alert_form_nonIterableRest()}function alert_form_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function alert_form_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return alert_form_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return alert_form_arrayLikeToArray(o,minLen)}function alert_form_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function alert_form_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function alert_form_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const ENTER_KEY=13;function validateBaseProperties(alertObject){const validationResult={errors:{}};const errors={name:new Array,interval:new Array,alertTypeId:new Array,actionConnectors:new Array};validationResult.errors=errors;if(!alertObject.name){errors.name.push(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.error.requiredNameText",{defaultMessage:"Name is required."}))}if(alertObject.schedule.interval.length<2){errors.interval.push(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.error.requiredIntervalText",{defaultMessage:"Check interval is required."}))}if(!alertObject.alertTypeId){errors.alertTypeId.push(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.error.requiredAlertTypeIdText",{defaultMessage:"Alert trigger is required."}))}return validationResult}const hasErrors=errors=>!!Object.values(errors).find(errorList=>{if(Object(external_kbnSharedDeps_Lodash_["isObject"])(errorList))return hasErrors(errorList);return errorList.length>=1});function isValidAlert(alertObject,validationResult){return!hasErrors(validationResult)}function getProducerFeatureName(producer,kibanaFeatures){var _kibanaFeatures$find;return(_kibanaFeatures$find=kibanaFeatures.find(featureItem=>featureItem.id===producer))===null||_kibanaFeatures$find===void 0?void 0:_kibanaFeatures$find.name}const AlertForm=({alert:alert,canChangeTrigger:canChangeTrigger=true,dispatch:dispatch,errors:errors,setHasActionsDisabled:setHasActionsDisabled,setHasActionsWithBrokenConnector:setHasActionsWithBrokenConnector,operation:operation})=>{const alertsContext=Object(alerts_context["c"])();const http=alertsContext.http,toastNotifications=alertsContext.toastNotifications,alertTypeRegistry=alertsContext.alertTypeRegistry,actionTypeRegistry=alertsContext.actionTypeRegistry,docLinks=alertsContext.docLinks,capabilities=alertsContext.capabilities,kibanaFeatures=alertsContext.kibanaFeatures;const canShowActions=Object(lib_capabilities["e"])(capabilities);const _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=alert_form_slicedToArray(_useState,2),alertTypeModel=_useState2[0],setAlertTypeModel=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(alert.schedule.interval?Object(parse_duration_["getDurationNumberInItsUnit"])(alert.schedule.interval):undefined),_useState4=alert_form_slicedToArray(_useState3,2),alertInterval=_useState4[0],setAlertInterval=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(alert.schedule.interval?Object(parse_duration_["getDurationUnitValue"])(alert.schedule.interval):"m"),_useState6=alert_form_slicedToArray(_useState5,2),alertIntervalUnit=_useState6[0],setAlertIntervalUnit=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])(alert.throttle?Object(parse_duration_["getDurationNumberInItsUnit"])(alert.throttle):null),_useState8=alert_form_slicedToArray(_useState7,2),alertThrottle=_useState8[0],setAlertThrottle=_useState8[1];const _useState9=Object(external_kbnSharedDeps_React_["useState"])(alert.throttle?Object(parse_duration_["getDurationUnitValue"])(alert.throttle):"m"),_useState10=alert_form_slicedToArray(_useState9,2),alertThrottleUnit=_useState10[0],setAlertThrottleUnit=_useState10[1];const _useState11=Object(external_kbnSharedDeps_React_["useState"])(undefined),_useState12=alert_form_slicedToArray(_useState11,2),defaultActionGroupId=_useState12[0],setDefaultActionGroupId=_useState12[1];const _useState13=Object(external_kbnSharedDeps_React_["useState"])(null),_useState14=alert_form_slicedToArray(_useState13,2),alertTypesIndex=_useState14[0],setAlertTypesIndex=_useState14[1];const _useState15=Object(external_kbnSharedDeps_React_["useState"])([]),_useState16=alert_form_slicedToArray(_useState15,2),availableAlertTypes=_useState16[0],setAvailableAlertTypes=_useState16[1];const _useState17=Object(external_kbnSharedDeps_React_["useState"])([]),_useState18=alert_form_slicedToArray(_useState17,2),filteredAlertTypes=_useState18[0],setFilteredAlertTypes=_useState18[1];const _useState19=Object(external_kbnSharedDeps_React_["useState"])(),_useState20=alert_form_slicedToArray(_useState19,2),searchText=_useState20[0],setSearchText=_useState20[1];const _useState21=Object(external_kbnSharedDeps_React_["useState"])(),_useState22=alert_form_slicedToArray(_useState21,2),inputText=_useState22[0],setInputText=_useState22[1];const _useState23=Object(external_kbnSharedDeps_React_["useState"])(undefined),_useState24=alert_form_slicedToArray(_useState23,2),solutions=_useState24[0],setSolutions=_useState24[1];const _useState25=Object(external_kbnSharedDeps_React_["useState"])([]),_useState26=alert_form_slicedToArray(_useState25,2),solutionsFilter=_useState26[0],setSolutionFilter=_useState26[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var alertTypesResult,index,_iterator,_step,alertTypeItem,availableAlertTypesResult,solutionsResult;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Object(alert_api["l"])({http:http});case 3:alertTypesResult=_context.sent;index=new Map;_iterator=_createForOfIteratorHelper(alertTypesResult);try{for(_iterator.s();!(_step=_iterator.n()).done;){alertTypeItem=_step.value;index.set(alertTypeItem.id,alertTypeItem)}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(alert.alertTypeId&&index.has(alert.alertTypeId)){setDefaultActionGroupId(index.get(alert.alertTypeId).defaultActionGroupId)}setAlertTypesIndex(index);availableAlertTypesResult=getAvailableAlertTypes(alertTypesResult);setAvailableAlertTypes(availableAlertTypesResult);solutionsResult=availableAlertTypesResult.reduce((result,alertTypeItem)=>{if(!result.has(alertTypeItem.alertType.producer)){var _ref2;result.set(alertTypeItem.alertType.producer,(_ref2=kibanaFeatures?getProducerFeatureName(alertTypeItem.alertType.producer,kibanaFeatures):Object(external_kbnSharedDeps_Lodash_["capitalize"])(alertTypeItem.alertType.producer))!==null&&_ref2!==void 0?_ref2:Object(external_kbnSharedDeps_Lodash_["capitalize"])(alertTypeItem.alertType.producer))}return result},new Map);setSolutions(new Map([...solutionsResult.entries()].sort(([,a],[,b])=>a.localeCompare(b))));_context.next=18;break;case 15:_context.prev=15;_context.t0=_context["catch"](0);toastNotifications.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.unableToLoadAlertTypesMessage",{defaultMessage:"Unable to load alert types"})});case 18:case"end":return _context.stop()}}),_callee,null,[[0,15]])})))()},[]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setAlertTypeModel(alert.alertTypeId?alertTypeRegistry.get(alert.alertTypeId):null);if(alert.alertTypeId&&alertTypesIndex&&alertTypesIndex.has(alert.alertTypeId)){setDefaultActionGroupId(alertTypesIndex.get(alert.alertTypeId).defaultActionGroupId)}},[alert,alert.alertTypeId,alertTypesIndex,alertTypeRegistry]);const setAlertProperty=Object(external_kbnSharedDeps_React_["useCallback"])((key,value)=>{dispatch({command:{type:"setProperty"},payload:{key:key,value:value}})},[dispatch]);const setActions=Object(external_kbnSharedDeps_React_["useCallback"])(updatedActions=>setAlertProperty("actions",updatedActions),[setAlertProperty]);const setAlertParams=(key,value)=>{dispatch({command:{type:"setAlertParams"},payload:{key:key,value:value}})};const setScheduleProperty=(key,value)=>{dispatch({command:{type:"setScheduleProperty"},payload:{key:key,value:value}})};const setActionProperty=(key,value,index)=>{dispatch({command:{type:"setAlertActionProperty"},payload:{key:key,value:value,index:index}})};const setActionParamsProperty=Object(external_kbnSharedDeps_React_["useCallback"])((key,value,index)=>{dispatch({command:{type:"setAlertActionParams"},payload:{key:key,value:value,index:index}})},[dispatch]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const searchValue=searchText?searchText.trim().toLocaleLowerCase():null;setFilteredAlertTypes(availableAlertTypes.filter(alertTypeItem=>solutionsFilter.length>0?solutionsFilter.find(item=>alertTypeItem.alertType.producer===item):alertTypeItem).filter(alertTypeItem=>searchValue?alertTypeItem.alertTypeModel.name.toString().toLocaleLowerCase().includes(searchValue)||alertTypeItem.alertType.producer.toLocaleLowerCase().includes(searchValue)||alertTypeItem.alertTypeModel.description.toLocaleLowerCase().includes(searchValue):alertTypeItem))},[alertTypeRegistry,availableAlertTypes,searchText,JSON.stringify(solutionsFilter)]);const getAvailableAlertTypes=alertTypesResult=>alertTypeRegistry.list().reduce((arr,alertTypeRegistryItem)=>{const alertType=alertTypesResult.find(item=>alertTypeRegistryItem.id===item.id);if(alertType){arr.push({alertType:alertType,alertTypeModel:alertTypeRegistryItem})}return arr},[]).filter(item=>item.alertType&&Object(lib_capabilities["a"])(alert,item.alertType)).filter(item=>alert.consumer===common_["ALERTS_FEATURE_ID"]?!item.alertTypeModel.requiresAppContext:item.alertType.producer===alert.consumer);const tagsOptions=alert.tags?alert.tags.map(label=>({label:label})):[];const AlertParamsExpressionComponent=alertTypeModel?alertTypeModel.alertParamsExpression:null;const alertTypesByProducer=filteredAlertTypes.reduce((result,alertTypeValue)=>{const producer=alertTypeValue.alertType.producer;if(producer){(result[producer]=result[producer]||[]).push({name:typeof alertTypeValue.alertTypeModel.name==="string"?alertTypeValue.alertTypeModel.name:alertTypeValue.alertTypeModel.name.props.defaultMessage,id:alertTypeValue.alertTypeModel.id,alertTypeItem:alertTypeValue.alertTypeModel})}return result},{});const alertTypeNodes=Object.entries(alertTypesByProducer).sort(([a],[b])=>solutions?solutions.get(a).localeCompare(solutions.get(b)):a.localeCompare(b)).map(([solution,items],groupIndex)=>{var _ref3;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:"group".concat(groupIndex)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none",alignItems:"center",className:"triggersActionsUI__alertTypeNodeHeading"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{"data-test-subj":"alertType".concat(groupIndex,"Group"),size:"xxxs",textTransform:"uppercase"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},(_ref3=kibanaFeatures?getProducerFeatureName(solution,kibanaFeatures):Object(external_kbnSharedDeps_Lodash_["capitalize"])(solution))!==null&&_ref3!==void 0?_ref3:Object(external_kbnSharedDeps_Lodash_["capitalize"])(solution)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiNotificationBadge"],{color:"subdued"},items.length))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{size:"full",margin:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroup"],{flush:true,gutterSize:"m",size:"l",maxWidth:false},items.sort((a,b)=>a.name.toString().localeCompare(b.name.toString())).map((item,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiListGroupItem"],{"data-test-subj":"".concat(item.id,"-SelectOption"),color:"primary",label:external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,item.name),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,item.alertTypeItem.description))),onClick:()=>{setAlertProperty("alertTypeId",item.id);setActions([]);setAlertTypeModel(item.alertTypeItem);setAlertProperty("params",{});if(alertTypesIndex&&alertTypesIndex.has(item.id)){setDefaultActionGroupId(alertTypesIndex.get(item.id).defaultActionGroupId)}}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))});const alertTypeDetails=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s","data-test-subj":"selectedAlertTypeTitle"},external_kbnSharedDeps_React_default.a.createElement("h5",{id:"selectedAlertTypeTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"{alertType}",id:"xpack.triggersActionsUI.sections.alertForm.selectedAlertTypeTitle",values:{alertType:alertTypeModel?alertTypeModel.name:""}})))),canChangeTrigger?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"cross",color:"danger","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.changeAlertTypeAriaLabel",{defaultMessage:"Delete"}),onClick:()=>{setAlertProperty("alertTypeId",null);setAlertTypeModel(null);setAlertProperty("params",{})}})):null),(alertTypeModel===null||alertTypeModel===void 0?void 0:alertTypeModel.description)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s","data-test-subj":"alertDescription"},alertTypeModel.description," ",(alertTypeModel===null||alertTypeModel===void 0?void 0:alertTypeModel.documentationUrl)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{external:true,target:"_blank","data-test-subj":"alertDocumentationLink",href:typeof alertTypeModel.documentationUrl==="function"?alertTypeModel.documentationUrl(docLinks):alertTypeModel.documentationUrl},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.documentationLabel",defaultMessage:"Documentation"}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),AlertParamsExpressionComponent&&defaultActionGroupId&&alert.alertTypeId&&(alertTypesIndex===null||alertTypesIndex===void 0?void 0:alertTypesIndex.has(alert.alertTypeId))?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiErrorBoundary"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Suspense"],{fallback:external_kbnSharedDeps_React_default.a.createElement(CenterJustifiedSpinner,null)},external_kbnSharedDeps_React_default.a.createElement(AlertParamsExpressionComponent,{alertParams:alert.params,alertInterval:"".concat(alertInterval!==null&&alertInterval!==void 0?alertInterval:1).concat(alertIntervalUnit),alertThrottle:"".concat(alertThrottle!==null&&alertThrottle!==void 0?alertThrottle:1).concat(alertThrottleUnit),errors:errors,setAlertParams:setAlertParams,setAlertProperty:setAlertProperty,alertsContext:alertsContext,defaultActionGroupId:defaultActionGroupId,actionGroups:alertTypesIndex.get(alert.alertTypeId).actionGroups}))):null,canShowActions&&defaultActionGroupId&&alertTypeModel&&alert.alertTypeId&&(alertTypesIndex===null||alertTypesIndex===void 0?void 0:alertTypesIndex.has(alert.alertTypeId))?external_kbnSharedDeps_React_default.a.createElement(action_connector_form["a"],{actions:alert.actions,setHasActionsDisabled:setHasActionsDisabled,setHasActionsWithBrokenConnector:setHasActionsWithBrokenConnector,messageVariables:alertTypesIndex.get(alert.alertTypeId).actionVariables,defaultActionGroupId:defaultActionGroupId,actionGroups:alertTypesIndex.get(alert.alertTypeId).actionGroups,setActionIdByIndex:(id,index)=>setActionProperty("id",id,index),setActionGroupIdByIndex:(group,index)=>setActionProperty("group",group,index),setAlertProperty:setActions,setActionParamsProperty:setActionParamsProperty,actionTypeRegistry:actionTypeRegistry,defaultActionMessage:alertTypeModel===null||alertTypeModel===void 0?void 0:alertTypeModel.defaultActionMessage}):null);const labelForAlertChecked=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.checkFieldLabel",defaultMessage:"Check every"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",type:"questionInCircle",content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.checkWithTooltip",{defaultMessage:"Define how often to evaluate the condition."})}));const labelForAlertRenotify=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.renotifyFieldLabel",defaultMessage:"Notify every"})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",type:"questionInCircle",content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.renotifyWithTooltip",{defaultMessage:"Define how often to repeat the action while the alert is active."})}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGrid"],{columns:2},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,id:"alertName",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.alertNameLabel",defaultMessage:"Name"}),isInvalid:errors.name.length>0&&alert.name!==undefined,error:errors.name},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{fullWidth:true,autoFocus:true,isInvalid:errors.name.length>0&&alert.name!==undefined,compressed:true,name:"name","data-test-subj":"alertNameInput",value:alert.name||"",onChange:e=>{setAlertProperty("name",e.target.value)},onBlur:()=>{if(!alert.name){setAlertProperty("name","")}}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.tagsFieldLabel",{defaultMessage:"Tags (optional)"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{noSuggestions:true,fullWidth:true,compressed:true,"data-test-subj":"tagsComboBox",selectedOptions:tagsOptions,onCreateOption:searchValue=>{const newOptions=[...tagsOptions,{label:searchValue}];setAlertProperty("tags",newOptions.map(newOption=>newOption.label))},onChange:selectedOptions=>{setAlertProperty("tags",selectedOptions.map(selectedOption=>selectedOption.label))},onBlur:()=>{if(!alert.tags){setAlertProperty("tags",[])}}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGrid"],{columns:2},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,display:"rowCompressed",label:labelForAlertChecked,isInvalid:errors.interval.length>0,error:errors.interval},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{fullWidth:true,min:1,isInvalid:errors.interval.length>0,compressed:true,value:alertInterval||"",name:"interval","data-test-subj":"intervalInput",onChange:e=>{const interval=e.target.value!==""?parseInt(e.target.value,10):undefined;setAlertInterval(interval);setScheduleProperty("interval","".concat(e.target.value).concat(alertIntervalUnit))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{fullWidth:true,compressed:true,value:alertIntervalUnit,options:Object(get_time_options["b"])(alertInterval!==null&&alertInterval!==void 0?alertInterval:1),onChange:e=>{setAlertIntervalUnit(e.target.value);setScheduleProperty("interval","".concat(alertInterval).concat(e.target.value))}}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:labelForAlertRenotify},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldNumber"],{fullWidth:true,min:1,compressed:true,value:alertThrottle||"",name:"throttle","data-test-subj":"throttleInput",onChange:e=>{Object(pipeable["pipe"])(Object(Option["some"])(e.target.value.trim()),Object(Option["filter"])(value=>value!==""),Object(Option["map"])(value=>parseInt(value,10)),Object(Option["filter"])(value=>!isNaN(value)),Object(Option["fold"])(()=>{setAlertThrottle(null);setAlertProperty("throttle",null)},throttle=>{setAlertThrottle(throttle);setAlertProperty("throttle","".concat(throttle).concat(alertThrottleUnit))}))}})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{compressed:true,value:alertThrottleUnit,options:Object(get_time_options["b"])(alertThrottle!==null&&alertThrottle!==void 0?alertThrottle:1),onChange:e=>{setAlertThrottleUnit(e.target.value);if(alertThrottle){setAlertProperty("throttle","".concat(alertThrottle).concat(e.target.value))}}})))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),alertTypeModel?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,alertTypeDetails):availableAlertTypes.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxs"},external_kbnSharedDeps_React_default.a.createElement("h5",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.alertTypeSelectLabel",defaultMessage:"Select alert type"})))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldSearch"],{fullWidth:true,"data-test-subj":"alertSearchField",onChange:e=>setInputText(e.target.value),onKeyUp:e=>{if(e.keyCode===ENTER_KEY){setSearchText(inputText)}},placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.triggersActionsUI.sections.alertForm.searchPlaceholderTitle",{defaultMessage:"Search"})})),solutions?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(SolutionFilter,{key:"solution-filter",solutions:solutions,onChange:selectedSolutions=>setSolutionFilter(selectedSolutions)})):null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),alertTypeNodes):alertTypesIndex?external_kbnSharedDeps_React_default.a.createElement(NoAuthorizedAlertTypes,{operation:operation}):external_kbnSharedDeps_React_default.a.createElement(CenterJustifiedSpinner,null))};const CenterJustifiedSpinner=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"m"})));const NoAuthorizedAlertTypes=({operation:operation})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"lock","data-test-subj":"noAuthorizedAlertTypesPrompt",titleSize:"xs",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.error.noAuthorizedAlertTypesTitle",defaultMessage:"You have not been authorized to {operation} any Alert types",values:{operation:operation}})),body:external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("p",{role:"banner"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.triggersActionsUI.sections.alertForm.error.noAuthorizedAlertTypes",defaultMessage:"In order to {operation} an Alert you need to have been granted the appropriate privileges.",values:{operation:operation}})))})},150:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(151);case"v7light":return __webpack_require__(153);case"v8dark":return __webpack_require__(155);case"v8light":return __webpack_require__(157)}},151:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(152);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},152:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".triggersActionsUI__alertTypeNodeHeading {\n  margin-left: 8px;\n  margin-right: 8px; }\n",""]);module.exports=exports},153:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(154);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},154:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".triggersActionsUI__alertTypeNodeHeading {\n  margin-left: 8px;\n  margin-right: 8px; }\n",""]);module.exports=exports},155:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(156);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},156:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".triggersActionsUI__alertTypeNodeHeading {\n  margin-left: 8px;\n  margin-right: 8px; }\n",""]);module.exports=exports},157:function(module,exports,__webpack_require__){var api=__webpack_require__(27);var content=__webpack_require__(158);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},158:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(28);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".triggersActionsUI__alertTypeNodeHeading {\n  margin-left: 8px;\n  margin-right: 8px; }\n",""]);module.exports=exports},90:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return HealthContextProvider}));__webpack_require__.d(__webpack_exports__,"b",(function(){return useHealthContext}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const defaultHealthContext={loadingHealthCheck:false,setLoadingHealthCheck:loading=>{throw new Error("setLoadingHealthCheck was not initialized, set it when you invoke the context")}};const HealthContext=Object(react__WEBPACK_IMPORTED_MODULE_0__["createContext"])(defaultHealthContext);const HealthContextProvider=({children:children})=>{const _useState=Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];const setLoadingHealthCheck=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(isLoading=>{setLoading(isLoading)},[]);const value=Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(()=>({loadingHealthCheck:loading,setLoadingHealthCheck:setLoadingHealthCheck}),[loading,setLoadingHealthCheck]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(HealthContext.Provider,{value:value},children)};const useHealthContext=()=>{const ctx=Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(HealthContext);if(!ctx){throw new Error("HealthContext has not been set.")}return ctx}},98:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return alertReducer}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(16);var lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const alertReducer=(state,action)=>{const alert=state.alert;switch(action.command.type){case"setAlert":{const _ref=action.payload,key=_ref.key,value=_ref.value;if(key==="alert"){return _objectSpread(_objectSpread({},state),{},{alert:value})}else{return state}}case"setProperty":{const _ref2=action.payload,key=_ref2.key,value=_ref2.value;if(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEqual"])(alert[key],value)){return state}else{return _objectSpread(_objectSpread({},state),{},{alert:_objectSpread(_objectSpread({},alert),{},{[key]:value})})}}case"setScheduleProperty":{const _ref3=action.payload,key=_ref3.key,value=_ref3.value;if(alert.schedule&&Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEqual"])(alert.schedule[key],value)){return state}else{return _objectSpread(_objectSpread({},state),{},{alert:_objectSpread(_objectSpread({},alert),{},{schedule:_objectSpread(_objectSpread({},alert.schedule),{},{[key]:value})})})}}case"setAlertParams":{const _ref4=action.payload,key=_ref4.key,value=_ref4.value;if(Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEqual"])(alert.params[key],value)){return state}else{return _objectSpread(_objectSpread({},state),{},{alert:_objectSpread(_objectSpread({},alert),{},{params:_objectSpread(_objectSpread({},alert.params),{},{[key]:value})})})}}case"setAlertActionParams":{const _ref5=action.payload,key=_ref5.key,value=_ref5.value,index=_ref5.index;if(index===undefined||Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEqual"])(alert.actions[index][key],value)){return state}else{const oldAction=alert.actions.splice(index,1)[0];const updatedAction=_objectSpread(_objectSpread({},oldAction),{},{params:_objectSpread(_objectSpread({},oldAction.params),{},{[key]:value})});alert.actions.splice(index,0,updatedAction);return _objectSpread(_objectSpread({},state),{},{alert:_objectSpread(_objectSpread({},alert),{},{actions:[...alert.actions]})})}}case"setAlertActionProperty":{const _ref6=action.payload,key=_ref6.key,value=_ref6.value,index=_ref6.index;if(index===undefined||Object(lodash__WEBPACK_IMPORTED_MODULE_0__["isEqual"])(alert.actions[index][key],value)){return state}else{const oldAction=alert.actions.splice(index,1)[0];const updatedAction=_objectSpread(_objectSpread({},oldAction),{},{[key]:value});alert.actions.splice(index,0,updatedAction);return _objectSpread(_objectSpread({},state),{},{alert:_objectSpread(_objectSpread({},alert),{},{actions:[...alert.actions]})})}}}}},99:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return HealthCheck}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var fp_ts_lib_Option__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(77);var fp_ts_lib_Option__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(fp_ts_lib_Option__WEBPACK_IMPORTED_MODULE_1__);var fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(86);var fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_2__);var _kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8);var _kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__);var _elastic_eui__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2);var _elastic_eui__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_5__);var _lib_alert_api__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(88);var _health_check_scss__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(121);var _health_check_scss__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_health_check_scss__WEBPACK_IMPORTED_MODULE_7__);var _context_health_context__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(90);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const HealthCheck=({docLinks:docLinks,http:http,children:children,waitForCheck:waitForCheck,inFlyout:inFlyout=false})=>{const _useHealthContext=Object(_context_health_context__WEBPACK_IMPORTED_MODULE_8__["b"])(),setLoadingHealthCheck=_useHealthContext.setLoadingHealthCheck;const _React$useState=react__WEBPACK_IMPORTED_MODULE_0___default.a.useState(fp_ts_lib_Option__WEBPACK_IMPORTED_MODULE_1__["none"]),_React$useState2=_slicedToArray(_React$useState,2),alertingHealth=_React$useState2[0],setAlertingHealth=_React$useState2[1];react__WEBPACK_IMPORTED_MODULE_0___default.a.useEffect(()=>{_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoadingHealthCheck(true);_context.t0=setAlertingHealth;_context.t1=fp_ts_lib_Option__WEBPACK_IMPORTED_MODULE_1__["some"];_context.next=5;return Object(_lib_alert_api__WEBPACK_IMPORTED_MODULE_6__["g"])({http:http});case 5:_context.t2=_context.sent;_context.t3=(0,_context.t1)(_context.t2);(0,_context.t0)(_context.t3);setLoadingHealthCheck(false);case 9:case"end":return _context.stop()}}),_callee)})))()},[http,setLoadingHealthCheck]);const className=inFlyout?"alertingFlyoutHealthCheck":"alertingHealthCheck";return Object(fp_ts_lib_pipeable__WEBPACK_IMPORTED_MODULE_2__["pipe"])(alertingHealth,Object(fp_ts_lib_Option__WEBPACK_IMPORTED_MODULE_1__["fold"])(()=>waitForCheck?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiLoadingSpinner"],{size:"m"}):react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Fragment"],null,children),healthCheck=>(healthCheck===null||healthCheck===void 0?void 0:healthCheck.isSufficientlySecure)&&(healthCheck===null||healthCheck===void 0?void 0:healthCheck.hasPermanentEncryptionKey)?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Fragment"],null,children):!healthCheck.isSufficientlySecure&&!healthCheck.hasPermanentEncryptionKey?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TlsAndEncryptionError,{docLinks:docLinks,className:className}):!healthCheck.hasPermanentEncryptionKey?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EncryptionError,{docLinks:docLinks,className:className}):react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TlsError,{docLinks:docLinks,className:className})))};const TlsAndEncryptionError=({docLinks:{ELASTIC_WEBSITE_URL:ELASTIC_WEBSITE_URL,DOC_LINK_VERSION:DOC_LINK_VERSION},className:className})=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiEmptyPrompt"],{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:className,titleSize:"xs",title:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{id:"xpack.triggersActionsUI.components.healthCheck.tlsAndEncryptionErrorTitle",defaultMessage:"Additional setup required"})),body:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"".concat(className,"__body")},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",{role:"banner"},_kbn_i18n__WEBPACK_IMPORTED_MODULE_5__["i18n"].translate("xpack.triggersActionsUI.components.healthCheck.tlsAndEncryptionError",{defaultMessage:"You must enable Transport Layer Security between Kibana and Elasticsearch and configure an encryption key in your kibana.yml file. "}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiLink"],{href:"".concat(ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(DOC_LINK_VERSION,"/alerting-getting-started.html#alerting-setup-prerequisites"),external:true,target:"_blank"},_kbn_i18n__WEBPACK_IMPORTED_MODULE_5__["i18n"].translate("xpack.triggersActionsUI.components.healthCheck.tlsAndEncryptionErrorAction",{defaultMessage:"Learn how"}))))});const EncryptionError=({docLinks:{ELASTIC_WEBSITE_URL:ELASTIC_WEBSITE_URL,DOC_LINK_VERSION:DOC_LINK_VERSION},className:className})=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiEmptyPrompt"],{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:className,titleSize:"xs",title:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{id:"xpack.triggersActionsUI.components.healthCheck.encryptionErrorTitle",defaultMessage:"You must set an encryption key"})),body:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"".concat(className,"__body")},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",{role:"banner"},_kbn_i18n__WEBPACK_IMPORTED_MODULE_5__["i18n"].translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorBeforeKey",{defaultMessage:"To create an alert, set a value for "}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiCode"],null,"xpack.encryptedSavedObjects.encryptionKey"),_kbn_i18n__WEBPACK_IMPORTED_MODULE_5__["i18n"].translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorAfterKey",{defaultMessage:" in your kibana.yml file. "}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiLink"],{href:"".concat(ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(DOC_LINK_VERSION,"/alert-action-settings-kb.html#general-alert-action-settings"),external:true,target:"_blank"},_kbn_i18n__WEBPACK_IMPORTED_MODULE_5__["i18n"].translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorAction",{defaultMessage:"Learn how."}))))});const TlsError=({docLinks:{ELASTIC_WEBSITE_URL:ELASTIC_WEBSITE_URL,DOC_LINK_VERSION:DOC_LINK_VERSION},className:className})=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiEmptyPrompt"],{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:className,titleSize:"xs",title:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_3__["FormattedMessage"],{id:"xpack.triggersActionsUI.components.healthCheck.tlsErrorTitle",defaultMessage:"You must enable Transport Layer Security"})),body:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"".concat(className,"__body")},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",{role:"banner"},_kbn_i18n__WEBPACK_IMPORTED_MODULE_5__["i18n"].translate("xpack.triggersActionsUI.components.healthCheck.tlsError",{defaultMessage:"Alerting relies on API keys, which require TLS between Elasticsearch and Kibana. "}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_4__["EuiLink"],{href:"".concat(ELASTIC_WEBSITE_URL,"guide/en/kibana/").concat(DOC_LINK_VERSION,"/configuring-tls.html"),external:true,target:"_blank"},_kbn_i18n__WEBPACK_IMPORTED_MODULE_5__["i18n"].translate("xpack.triggersActionsUI.components.healthCheck.tlsErrorAction",{defaultMessage:"Learn how to enable TLS."}))))})}}]);