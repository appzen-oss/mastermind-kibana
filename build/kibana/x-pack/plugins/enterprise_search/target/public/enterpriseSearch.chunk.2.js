/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["enterpriseSearch_bundle_jsonpfunction"]=window["enterpriseSearch_bundle_jsonpfunction"]||[]).push([[2],{17:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FlashMessages}));__webpack_require__.d(__webpack_exports__,"b",(function(){return FlashMessagesLogic}));__webpack_require__.d(__webpack_exports__,"d",(function(){return mountFlashMessagesLogic}));__webpack_require__.d(__webpack_exports__,"c",(function(){return flashAPIErrors}));__webpack_require__.d(__webpack_exports__,"h",(function(){return setSuccessMessage}));__webpack_require__.d(__webpack_exports__,"e",(function(){return setErrorMessage}));__webpack_require__.d(__webpack_exports__,"g",(function(){return setQueuedSuccessMessage}));__webpack_require__.d(__webpack_exports__,"f",(function(){return setQueuedErrorMessage}));var external_kbnSharedDeps_React_=__webpack_require__(7);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var index_cjs=__webpack_require__(14);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(8);var kibana=__webpack_require__(22);const convertToArray=messages=>!Array.isArray(messages)?[messages]:messages;const FlashMessagesLogic=Object(index_cjs["kea"])({path:["enterprise_search","flash_messages_logic"],actions:{setFlashMessages:messages=>({messages:convertToArray(messages)}),clearFlashMessages:()=>null,setQueuedMessages:messages=>({messages:convertToArray(messages)}),clearQueuedMessages:()=>null,setHistoryListener:historyListener=>({historyListener:historyListener})},reducers:{messages:[[],{setFlashMessages:(_,{messages:messages})=>messages,clearFlashMessages:()=>[]}],queuedMessages:[[],{setQueuedMessages:(_,{messages:messages})=>messages,clearQueuedMessages:()=>[]}],historyListener:[null,{setHistoryListener:(_,{historyListener:historyListener})=>historyListener}]},events:({values:values,actions:actions})=>({afterMount:()=>{const unlisten=kibana["a"].values.history.listen(()=>{actions.clearFlashMessages();actions.setFlashMessages(values.queuedMessages);actions.clearQueuedMessages()});actions.setHistoryListener(unlisten)},beforeUnmount:()=>{const removeHistoryListener=values.historyListener;if(removeHistoryListener)removeHistoryListener()}})});const mountFlashMessagesLogic=()=>{const unmount=FlashMessagesLogic.mount();return unmount};const FLASH_MESSAGE_TYPES={success:{color:"success",icon:"check"},info:{color:"primary",icon:"iInCircle"},warning:{color:"warning",icon:"alert"},error:{color:"danger",icon:"cross"}};const FlashMessages=({children:children})=>{const _useValues=Object(index_cjs["useValues"])(FlashMessagesLogic),messages=_useValues.messages;if(!messages.length)return null;return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"FlashMessages"},messages.map(({type:type,message:message,description:description},index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:index},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:FLASH_MESSAGE_TYPES[type].color,iconType:FLASH_MESSAGE_TYPES[type].icon,title:message},description),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))),children)};const flashAPIErrors=(error,{isQueued:isQueued}={})=>{var _error$body,_error$body$attribute,_error$body2,_error$body3;const defaultErrorMessage="An unexpected error occurred";const errorFlashMessages=Array.isArray(error===null||error===void 0?void 0:(_error$body=error.body)===null||_error$body===void 0?void 0:(_error$body$attribute=_error$body.attributes)===null||_error$body$attribute===void 0?void 0:_error$body$attribute.errors)?error.body.attributes.errors.map(message=>({type:"error",message:message})):[{type:"error",message:(error===null||error===void 0?void 0:(_error$body2=error.body)===null||_error$body2===void 0?void 0:_error$body2.message)||defaultErrorMessage}];if(isQueued){FlashMessagesLogic.actions.setQueuedMessages(errorFlashMessages)}else{FlashMessagesLogic.actions.setFlashMessages(errorFlashMessages)}if(!(error===null||error===void 0?void 0:(_error$body3=error.body)===null||_error$body3===void 0?void 0:_error$body3.message)){throw error}};const setSuccessMessage=message=>{FlashMessagesLogic.actions.setFlashMessages({type:"success",message:message})};const setErrorMessage=message=>{FlashMessagesLogic.actions.setFlashMessages({type:"error",message:message})};const setQueuedSuccessMessage=message=>{FlashMessagesLogic.actions.setQueuedMessages({type:"success",message:message})};const setQueuedErrorMessage=message=>{FlashMessagesLogic.actions.setQueuedMessages({type:"error",message:message})}},24:function(module,__webpack_exports__,__webpack_require__){"use strict";var _external_url__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25);__webpack_require__.d(__webpack_exports__,"a",(function(){return _external_url__WEBPACK_IMPORTED_MODULE_0__["a"]}));__webpack_require__.d(__webpack_exports__,"b",(function(){return _external_url__WEBPACK_IMPORTED_MODULE_0__["b"]}));__webpack_require__.d(__webpack_exports__,"c",(function(){return _external_url__WEBPACK_IMPORTED_MODULE_0__["c"]}))},25:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return externalUrl}));__webpack_require__.d(__webpack_exports__,"b",(function(){return getAppSearchUrl}));__webpack_require__.d(__webpack_exports__,"c",(function(){return getWorkplaceSearchUrl}));const externalUrl={_enterpriseSearchUrl:"",get enterpriseSearchUrl(){return this._enterpriseSearchUrl},set enterpriseSearchUrl(value){if(this._enterpriseSearchUrl){return}this._enterpriseSearchUrl=value}};const getEnterpriseSearchUrl=(path="")=>externalUrl.enterpriseSearchUrl+path;const getAppSearchUrl=(path="")=>getEnterpriseSearchUrl("/as"+path);const getWorkplaceSearchUrl=(path="")=>getEnterpriseSearchUrl("/ws"+path)},27:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LicensingLogic}));__webpack_require__.d(__webpack_exports__,"b",(function(){return mountLicensingLogic}));var index_cjs=__webpack_require__(14);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const LicensingLogic=Object(index_cjs["kea"])({path:["enterprise_search","licensing_logic"],actions:{setLicense:license=>license,setLicenseSubscription:licenseSubscription=>licenseSubscription},reducers:{license:[null,{setLicense:(_,license)=>license}],licenseSubscription:[null,{setLicenseSubscription:(_,licenseSubscription)=>licenseSubscription}]},selectors:{hasPlatinumLicense:[selectors=>[selectors.license],license=>{const qualifyingLicenses=["platinum","enterprise","trial"];return(license===null||license===void 0?void 0:license.isActive)&&qualifyingLicenses.includes(license===null||license===void 0?void 0:license.type)}],hasGoldLicense:[selectors=>[selectors.license],license=>{const qualifyingLicenses=["gold","platinum","enterprise","trial"];return(license===null||license===void 0?void 0:license.isActive)&&qualifyingLicenses.includes(license===null||license===void 0?void 0:license.type)}]},events:({props:props,actions:actions,values:values})=>({afterMount:()=>{const licenseSubscription=props.license$.subscribe(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(license){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:actions.setLicense(license);case 1:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}());actions.setLicenseSubscription(licenseSubscription)},beforeUnmount:()=>{if(values.licenseSubscription)values.licenseSubscription.unsubscribe()}})});const mountLicensingLogic=props=>{LicensingLogic(props);const unmount=LicensingLogic.mount();return unmount}},375:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp}));__webpack_require__.d(__webpack_exports__,"renderHeaderActions",(function(){return _renderHeaderActions}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13);var react_dom__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);var react_router_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9);var react_router_dom__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_2__);var react_redux__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(44);var react_redux__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_3__);var kea__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(14);var kea__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(kea__WEBPACK_IMPORTED_MODULE_4__);var _kbn_i18n_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10);var _kbn_i18n_react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_5__);var _shared_kibana__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(22);var _shared_licensing__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(27);var _shared_http__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(20);var _shared_flash_messages__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(17);var _shared_enterprise_search_url__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(24);function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const renderApp=(App,{params:params,core:core,plugins:plugins},{config:config,data:data})=>{const publicUrl=data.publicUrl,errorConnecting=data.errorConnecting,initialData=_objectWithoutProperties(data,["publicUrl","errorConnecting"]);_shared_enterprise_search_url__WEBPACK_IMPORTED_MODULE_10__["a"].enterpriseSearchUrl=publicUrl||config.host||"";Object(kea__WEBPACK_IMPORTED_MODULE_4__["resetContext"])({createStore:true});const store=Object(kea__WEBPACK_IMPORTED_MODULE_4__["getContext"])().store;const unmountKibanaLogic=Object(_shared_kibana__WEBPACK_IMPORTED_MODULE_6__["b"])({config:config,cloud:plugins.cloud||{},history:params.history,navigateToUrl:core.application.navigateToUrl,setBreadcrumbs:core.chrome.setBreadcrumbs,setDocTitle:core.chrome.docTitle.change,renderHeaderActions:HeaderActions=>params.setHeaderActionMenu(el=>_renderHeaderActions(HeaderActions,store,el))});const unmountLicensingLogic=Object(_shared_licensing__WEBPACK_IMPORTED_MODULE_7__["b"])({license$:plugins.licensing.license$});const unmountHttpLogic=Object(_shared_http__WEBPACK_IMPORTED_MODULE_8__["b"])({http:core.http,errorConnecting:errorConnecting,readOnlyMode:initialData.readOnlyMode});const unmountFlashMessagesLogic=Object(_shared_flash_messages__WEBPACK_IMPORTED_MODULE_9__["d"])();react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_kbn_i18n_react__WEBPACK_IMPORTED_MODULE_5__["I18nProvider"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_redux__WEBPACK_IMPORTED_MODULE_3__["Provider"],{store:store},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Router"],{history:params.history},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(App,initialData)))),params.element);return()=>{react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.unmountComponentAtNode(params.element);unmountKibanaLogic();unmountLicensingLogic();unmountHttpLogic();unmountFlashMessagesLogic()}};const _renderHeaderActions=(HeaderActions,store,kibanaHeaderEl)=>{react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_redux__WEBPACK_IMPORTED_MODULE_3__["Provider"],{store:store},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(HeaderActions,null)),kibanaHeaderEl);return()=>react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.unmountComponentAtNode(kibanaHeaderEl)}}}]);