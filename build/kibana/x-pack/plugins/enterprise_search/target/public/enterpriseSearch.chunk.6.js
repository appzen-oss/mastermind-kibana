/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["enterpriseSearch_bundle_jsonpfunction"]=window["enterpriseSearch_bundle_jsonpfunction"]||[]).push([[6],{157:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(158);case"v7light":return __webpack_require__(160);case"v8dark":return __webpack_require__(162);case"v8light":return __webpack_require__(164)}},158:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(159);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},159:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n/**\n * Empty/Error UI states\n */\n.emptyState {\n  min-height: 450px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center; }\n  .emptyState__prompt > .euiIcon {\n    margin-bottom: 8px; }\n",""]);module.exports=exports},160:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(161);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},161:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n/**\n * Empty/Error UI states\n */\n.emptyState {\n  min-height: 450px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center; }\n  .emptyState__prompt > .euiIcon {\n    margin-bottom: 8px; }\n",""]);module.exports=exports},162:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(163);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},163:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n/**\n * Empty/Error UI states\n */\n.emptyState {\n  min-height: 450px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center; }\n  .emptyState__prompt > .euiIcon {\n    margin-bottom: 8px; }\n",""]);module.exports=exports},164:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(165);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},165:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n/**\n * Empty/Error UI states\n */\n.emptyState {\n  min-height: 450px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center; }\n  .emptyState__prompt > .euiIcon {\n    margin-bottom: 8px; }\n",""]);module.exports=exports},166:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(167);case"v7light":return __webpack_require__(169);case"v8dark":return __webpack_require__(171);case"v8light":return __webpack_require__(173)}},167:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(168);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},168:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n.enginesOverview {\n  padding: 16px; }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .enginesOverview {\n      padding: 32px; } }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .enginesOverview {\n      padding: 32px; } }\n  @media only screen and (min-width: 1200px) {\n    .enginesOverview {\n      padding: 32px; } }\n\n.engineIcon {\n  display: inline-block;\n  width: 16px;\n  height: 2rem;\n  vertical-align: top;\n  margin-right: 4px; }\n",""]);module.exports=exports},169:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(170);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},170:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n.enginesOverview {\n  padding: 16px; }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .enginesOverview {\n      padding: 32px; } }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .enginesOverview {\n      padding: 32px; } }\n  @media only screen and (min-width: 1200px) {\n    .enginesOverview {\n      padding: 32px; } }\n\n.engineIcon {\n  display: inline-block;\n  width: 16px;\n  height: 2rem;\n  vertical-align: top;\n  margin-right: 4px; }\n",""]);module.exports=exports},171:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(172);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},172:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n.enginesOverview {\n  padding: 16px; }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .enginesOverview {\n      padding: 32px; } }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .enginesOverview {\n      padding: 32px; } }\n  @media only screen and (min-width: 1200px) {\n    .enginesOverview {\n      padding: 32px; } }\n\n.engineIcon {\n  display: inline-block;\n  width: 16px;\n  height: 2.28571rem;\n  vertical-align: top;\n  margin-right: 4px; }\n",""]);module.exports=exports},173:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(174);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},174:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n.enginesOverview {\n  padding: 16px; }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .enginesOverview {\n      padding: 32px; } }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .enginesOverview {\n      padding: 32px; } }\n  @media only screen and (min-width: 1200px) {\n    .enginesOverview {\n      padding: 32px; } }\n\n.engineIcon {\n  display: inline-block;\n  width: 16px;\n  height: 2.28571rem;\n  vertical-align: top;\n  margin-right: 4px; }\n",""]);module.exports=exports},184:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(185);case"v7light":return __webpack_require__(187);case"v8dark":return __webpack_require__(189);case"v8light":return __webpack_require__(191)}},185:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(186);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},186:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n.enterpriseSearchDataType--number, .enterpriseSearchDataType--float {\n  color: #e2439b;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.enterpriseSearchDataType--location {\n  color: #01A3E1;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.enterpriseSearchDataType--date {\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.enterpriseSearchResultHighlight {\n  color: #1C24D3;\n  font-weight: 600; }\n',""]);module.exports=exports},187:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(188);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},188:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n.enterpriseSearchDataType--number, .enterpriseSearchDataType--float {\n  color: #DA1884;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.enterpriseSearchDataType--location {\n  color: #19825a;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.enterpriseSearchDataType--date {\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.enterpriseSearchResultHighlight {\n  color: #1C24D3;\n  font-weight: 600; }\n',""]);module.exports=exports},189:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(190);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},190:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n.enterpriseSearchDataType--number, .enterpriseSearchDataType--float {\n  color: #e2439b;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.enterpriseSearchDataType--location {\n  color: #01A3E1;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.enterpriseSearchDataType--date {\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.enterpriseSearchResultHighlight {\n  color: #238CFF;\n  font-weight: 600; }\n',""]);module.exports=exports},191:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(192);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},192:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n.enterpriseSearchDataType--number, .enterpriseSearchDataType--float {\n  color: #cc3b78;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.enterpriseSearchDataType--location {\n  color: #19825a;\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.enterpriseSearchDataType--date {\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.enterpriseSearchResultHighlight {\n  color: #3F70D2;\n  font-weight: 600; }\n',""]);module.exports=exports},193:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(194);case"v7light":return __webpack_require__(196);case"v8dark":return __webpack_require__(198);case"v8light":return __webpack_require__(200)}},194:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(195);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},195:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n.appSearchNavEngineLabel {\n  padding-top: 8px;\n  padding-bottom: 8px; }\n  .appSearchNavEngineLabel .euiText {\n    font-weight: 500; }\n  .appSearchNavEngineLabel .euiBadge {\n    margin-top: 4px; }\n\n.appSearchNavIcons.euiFlexItem {\n  flex-grow: 0;\n  flex-direction: row; }\n",""]);module.exports=exports},196:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(197);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},197:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n.appSearchNavEngineLabel {\n  padding-top: 8px;\n  padding-bottom: 8px; }\n  .appSearchNavEngineLabel .euiText {\n    font-weight: 500; }\n  .appSearchNavEngineLabel .euiBadge {\n    margin-top: 4px; }\n\n.appSearchNavIcons.euiFlexItem {\n  flex-grow: 0;\n  flex-direction: row; }\n",""]);module.exports=exports},198:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(199);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},199:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n.appSearchNavEngineLabel {\n  padding-top: 8px;\n  padding-bottom: 8px; }\n  .appSearchNavEngineLabel .euiText {\n    font-weight: 500; }\n  .appSearchNavEngineLabel .euiBadge {\n    margin-top: 4px; }\n\n.appSearchNavIcons.euiFlexItem {\n  flex-grow: 0;\n  flex-direction: row; }\n",""]);module.exports=exports},200:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(201);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},201:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,"/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License;\n * you may not use this file except in compliance with the Elastic License.\n */\n.appSearchNavEngineLabel {\n  padding-top: 8px;\n  padding-bottom: 8px; }\n  .appSearchNavEngineLabel .euiText {\n    font-weight: 500; }\n  .appSearchNavEngineLabel .euiBadge {\n    margin-top: 4px; }\n\n.appSearchNavIcons.euiFlexItem {\n  flex-grow: 0;\n  flex-direction: row; }\n",""]);module.exports=exports},202:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"73e29c608c16210ec702b89a5c0e258c.png"},377:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"AppSearch",(function(){return AppSearch}));__webpack_require__.d(__webpack_exports__,"AppSearchUnconfigured",(function(){return AppSearchUnconfigured}));__webpack_require__.d(__webpack_exports__,"AppSearchConfigured",(function(){return AppSearchConfigured}));__webpack_require__.d(__webpack_exports__,"AppSearchNav",(function(){return AppSearchNav}));var external_kbnSharedDeps_React_=__webpack_require__(7);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(9);var index_cjs=__webpack_require__(14);var enterprise_search_url=__webpack_require__(24);var kibana=__webpack_require__(22);var shared_http=__webpack_require__(20);const getRoleAbilities=role=>{const myRole={can:(action,subject)=>{var _role$ability,_role$ability$manage;return(role===null||role===void 0?void 0:(_role$ability=role.ability)===null||_role$ability===void 0?void 0:(_role$ability$manage=_role$ability.manage)===null||_role$ability$manage===void 0?void 0:_role$ability$manage.includes(subject))||Array.isArray(role.ability[action])&&role.ability[action].includes(subject)}};const topLevelProps={id:role.id,roleType:role.roleType,availableRoleTypes:role.ability.availableRoleTypes,credentialTypes:role.ability.credentialTypes};const abilities={canAccessAllEngines:role.ability.accessAllEngines,canViewMetaEngines:myRole.can("view","account_meta_engines"),canViewAccountCredentials:myRole.can("view","account_credentials"),canViewEngineAnalytics:myRole.can("view","engine_analytics"),canViewEngineApiLogs:myRole.can("view","engine_api_logs"),canViewEngineCrawler:myRole.can("view","engine_crawler"),canViewEngineCredentials:myRole.can("view","engine_credentials"),canViewEngineDocuments:myRole.can("view","engine_documents"),canViewEngineSchema:myRole.can("view","engine_schema"),canViewEngineQueryTester:myRole.can("view","engine_query_tester"),canViewMetaEngineSourceEngines:myRole.can("view","meta_engine_source_engines"),canViewSettings:myRole.can("view","account_settings"),canViewRoleMappings:myRole.can("view","role_mappings"),canManageEngines:myRole.can("manage","account_engines"),canManageMetaEngines:myRole.can("manage","account_meta_engines"),canManageLogSettings:myRole.can("manage","account_log_settings"),canManageSettings:myRole.can("manage","account_settings"),canManageEngineCrawler:myRole.can("manage","engine_crawler"),canManageEngineDocuments:myRole.can("manage","engine_documents"),canManageEngineSynonyms:myRole.can("manage","engine_synonyms"),canManageEngineCredentials:myRole.can("manage","engine_credentials"),canManageEngineCurations:myRole.can("manage","engine_curations"),canManageEngineRelevanceTuning:myRole.can("manage","engine_relevance_tuning"),canManageEngineResultSettings:myRole.can("manage","engine_result_settings"),canManageEngineSchema:myRole.can("manage","engine_schema"),canManageEngineSearchUi:myRole.can("manage","engine_reference_ui"),canManageMetaEngineSourceEngines:myRole.can("manage","meta_engine_source_engines")};return Object.assign(myRole,topLevelProps,abilities)};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const AppLogic=Object(index_cjs["kea"])({path:["enterprise_search","app_search","app_logic"],actions:{initializeAppData:props=>props,setOnboardingComplete:()=>true},reducers:{hasInitialized:[false,{initializeAppData:()=>true}],account:[{},{initializeAppData:(_,{appSearch:account})=>account||{},setOnboardingComplete:account=>_objectSpread(_objectSpread({},account),{},{onboardingComplete:true})}],configuredLimits:[{},{initializeAppData:(_,{configuredLimits:configuredLimits})=>(configuredLimits===null||configuredLimits===void 0?void 0:configuredLimits.appSearch)||{}}],ilmEnabled:[false,{initializeAppData:(_,{ilmEnabled:ilmEnabled})=>!!ilmEnabled}]},selectors:{myRole:[selectors=>[selectors.account],({role:role})=>role?getRoleAbilities(role):{}]}});var constants=__webpack_require__(0);var layout=__webpack_require__(31);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var kibana_chrome=__webpack_require__(19);var flash_messages=__webpack_require__(17);var version=__webpack_require__(39);const DOCS_PREFIX="https://www.elastic.co/guide/en/app-search/".concat(version["a"]);const ROOT_PATH="/";const SETUP_GUIDE_PATH="/setup_guide";const SETTINGS_PATH="/settings/account";const CREDENTIALS_PATH="/credentials";const ROLE_MAPPINGS_PATH="#/role-mappings";const ENGINES_PATH="/engines";const CREATE_ENGINES_PATH="".concat(ENGINES_PATH,"/new");const ENGINE_PATH="/engines/:engineName";const SAMPLE_ENGINE_PATH="/engines/national-parks-demo";const getEngineRoute=engineName=>Object(external_kbnSharedDeps_ReactRouterDom_["generatePath"])(ENGINE_PATH,{engineName:engineName});const ENGINE_ANALYTICS_PATH="/analytics";const ENGINE_DOCUMENTS_PATH="/documents";const ENGINE_DOCUMENT_DETAIL_PATH="".concat(ENGINE_DOCUMENTS_PATH,"/:documentId");const ENGINE_SCHEMA_PATH="/schema/edit";const ENGINE_REINDEX_JOB_PATH="/reindex-job/:activeReindexJobId";const ENGINE_CRAWLER_PATH="/crawler";const META_ENGINE_SOURCE_ENGINES_PATH="/engines";const ENGINE_RELEVANCE_TUNING_PATH="/search-settings";const ENGINE_SYNONYMS_PATH="/synonyms";const ENGINE_CURATIONS_PATH="/curations";const ENGINE_RESULT_SETTINGS_PATH="/result-settings";const ENGINE_SEARCH_UI_PATH="/reference_application/new";const ENGINE_API_LOGS_PATH="/api-logs";var external_kbnSharedDeps_ElasticEui_=__webpack_require__(8);var telemetry=__webpack_require__(18);var licensing=__webpack_require__(27);const EngineIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"18",height:"18",className:"euiIcon engineIcon","aria-hidden":"true"},external_kbnSharedDeps_React_default.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.776 1.389a7.66 7.66 0 00-.725-.04v.001H9a7.65 7.65 0 00-.051 15.301v-.001H9a7.65 7.65 0 00.776-15.261zm-1.52 1.254a6.401 6.401 0 00.02 12.716l2.333-3.791a.875.875 0 00-.354-1.242l-3.07-1.534a2.125 2.125 0 01-.859-3.015l1.93-3.134zm1.489 12.714l1.929-3.134a2.125 2.125 0 00-.86-3.015l-3.07-1.534a.875.875 0 01-.353-1.242L9.724 2.64a6.401 6.401 0 01.02 12.717z"}));const MetaEngineIcon=()=>external_kbnSharedDeps_React_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"18",height:"18",className:"euiIcon engineIcon","aria-hidden":"true"},external_kbnSharedDeps_React_default.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 9a5.002 5.002 0 005 5 5 5 0 10-5-5zm5.506 1.653L8.37 12.697a3.751 3.751 0 01-.003-7.394L7.402 7.04a1.625 1.625 0 00.519 2.142l1.465.976a.375.375 0 01.12.495zm1.092.607l-.777 1.4a3.751 3.751 0 00-.04-7.329L8.494 7.647a.375.375 0 00.12.495l1.465.976c.705.47.93 1.402.52 2.142z"}),external_kbnSharedDeps_React_default.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 1.375A5.125 5.125 0 001.375 6.5v5A5.125 5.125 0 006.5 16.625h5a5.125 5.125 0 005.125-5.125v-5A5.125 5.125 0 0011.5 1.375h-5zM2.625 6.5A3.875 3.875 0 016.5 2.625h5A3.875 3.875 0 0115.375 6.5v5a3.875 3.875 0 01-3.875 3.875h-5A3.875 3.875 0 012.625 11.5v-5z"}));const ENGINES_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engines.title",{defaultMessage:"Engines"});const META_ENGINES_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.metaEngines.title",{defaultMessage:"Meta Engines"});var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(10);const EnginesOverviewHeader=()=>{const _useActions=Object(index_cjs["useActions"])(telemetry["d"]),sendAppSearchTelemetry=_useActions.sendAppSearchTelemetry;const buttonProps={fill:true,iconType:"popout","data-test-subj":"launchButton",href:Object(enterprise_search_url["b"])(),target:"_blank",onClick:()=>sendAppSearchTelemetry({action:"clicked",metric:"header_launch_button"})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.enterpriseSearch.appSearch.enginesOverview.title",defaultMessage:"Engines Overview"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],buttonProps,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.enterpriseSearch.appSearch.productCta",defaultMessage:"Launch App Search"}))))};const LoadingState=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(kibana_chrome["a"],null),external_kbnSharedDeps_React_default.a.createElement(EnginesOverviewHeader,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingContent"],{lines:5}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xxl"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingContent"],{lines:4})));var empty_state=__webpack_require__(157);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const EmptyState=()=>{const _useActions=Object(index_cjs["useActions"])(telemetry["d"]),sendAppSearchTelemetry=_useActions.sendAppSearchTelemetry;const buttonProps={href:Object(enterprise_search_url["b"])(CREATE_ENGINES_PATH),target:"_blank",onClick:()=>sendAppSearchTelemetry({action:"clicked",metric:"create_first_engine_button"})};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(kibana_chrome["a"],null),external_kbnSharedDeps_React_default.a.createElement(EnginesOverviewHeader,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{className:"emptyState"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{className:"emptyState__prompt",iconType:"eyeClosed",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.enterpriseSearch.appSearch.emptyState.title",defaultMessage:"Create your first engine"})),titleSize:"l",body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.enterpriseSearch.appSearch.emptyState.description1",defaultMessage:"An App Search engine stores the documents for your search experience."})),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],_extends({iconType:"popout",fill:true},buttonProps),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.enterpriseSearch.appSearch.emptyState.createFirstEngineCta",defaultMessage:"Create an engine"}))})))};var react_router_helpers=__webpack_require__(23);const UNIVERSAL_LANGUAGE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.universalLanguage",{defaultMessage:"Universal"});function engines_table_extends(){engines_table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return engines_table_extends.apply(this,arguments)}const EnginesTable=({data:data,pagination:{totalEngines:totalEngines,pageIndex:pageIndex,onPaginate:onPaginate}})=>{const _useActions=Object(index_cjs["useActions"])(telemetry["d"]),sendAppSearchTelemetry=_useActions.sendAppSearchTelemetry;const engineLinkProps=name=>({to:getEngineRoute(name),onClick:()=>sendAppSearchTelemetry({action:"clicked",metric:"engine_table_link"})});const columns=[{field:"name",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.name",{defaultMessage:"Name"}),render:name=>external_kbnSharedDeps_React_default.a.createElement(react_router_helpers["b"],engines_table_extends({"data-test-subj":"engineNameLink"},engineLinkProps(name)),name),width:"30%",truncateText:true,mobileOptions:{header:true,enlarge:true,fullWidth:true,truncateText:false}},{field:"created_at",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.createdAt",{defaultMessage:"Created At"}),dataType:"string",render:dateString=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedDate"],{value:new Date(dateString),year:"numeric",month:"short",day:"numeric"})},{field:"language",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.language",{defaultMessage:"Language"}),dataType:"string",render:(language,engine)=>engine.isMeta?"":language||UNIVERSAL_LANGUAGE},{field:"document_count",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.documentCount",{defaultMessage:"Document Count"}),dataType:"number",render:number=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedNumber"],{value:number}),truncateText:true},{field:"field_count",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.fieldCount",{defaultMessage:"Field Count"}),dataType:"number",render:number=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedNumber"],{value:number}),truncateText:true},{field:"name",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.actions",{defaultMessage:"Actions"}),dataType:"string",render:name=>external_kbnSharedDeps_React_default.a.createElement(react_router_helpers["b"],engineLinkProps(name),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.enterpriseSearch.appSearch.enginesOverview.table.action.manage",defaultMessage:"Manage"})),align:"right",width:"100px"}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{items:data,columns:columns,pagination:{pageIndex:pageIndex,pageSize:constants["b"],totalItemCount:totalEngines,hidePerPageOptions:true},onChange:({page:page})=>{const index=page.index;onPaginate(index+1)}})};var engines_overview=__webpack_require__(166);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const EnginesOverview=()=>{const _useValues=Object(index_cjs["useValues"])(shared_http["a"]),http=_useValues.http;const _useValues2=Object(index_cjs["useValues"])(licensing["a"]),hasPlatinumLicense=_useValues2.hasPlatinumLicense;const _useState=Object(external_kbnSharedDeps_React_["useState"])(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=_slicedToArray(_useState3,2),engines=_useState4[0],setEngines=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(1),_useState6=_slicedToArray(_useState5,2),enginesPage=_useState6[0],setEnginesPage=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])(0),_useState8=_slicedToArray(_useState7,2),enginesTotal=_useState8[0],setEnginesTotal=_useState8[1];const _useState9=Object(external_kbnSharedDeps_React_["useState"])([]),_useState10=_slicedToArray(_useState9,2),metaEngines=_useState10[0],setMetaEngines=_useState10[1];const _useState11=Object(external_kbnSharedDeps_React_["useState"])(1),_useState12=_slicedToArray(_useState11,2),metaEnginesPage=_useState12[0],setMetaEnginesPage=_useState12[1];const _useState13=Object(external_kbnSharedDeps_React_["useState"])(0),_useState14=_slicedToArray(_useState13,2),metaEnginesTotal=_useState14[0],setMetaEnginesTotal=_useState14[1];const getEnginesData=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee({type:type,pageIndex:pageIndex}){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return http.get("/api/app_search/engines",{query:{type:type,pageIndex:pageIndex}});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})));return function getEnginesData(_x){return _ref.apply(this,arguments)}}();const setEnginesData=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(params,callbacks){var response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getEnginesData(params);case 2:response=_context2.sent;callbacks.setResults(response.results);callbacks.setResultsTotal(response.meta.page.total_results);setIsLoading(false);case 6:case"end":return _context2.stop()}}),_callee2)})));return function setEnginesData(_x2,_x3){return _ref2.apply(this,arguments)}}();Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const params={type:"indexed",pageIndex:enginesPage};const callbacks={setResults:setEngines,setResultsTotal:setEnginesTotal};setEnginesData(params,callbacks)},[enginesPage]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(hasPlatinumLicense){const params={type:"meta",pageIndex:metaEnginesPage};const callbacks={setResults:setMetaEngines,setResultsTotal:setMetaEnginesTotal};setEnginesData(params,callbacks)}},[hasPlatinumLicense,metaEnginesPage]);if(isLoading)return external_kbnSharedDeps_React_default.a.createElement(LoadingState,null);if(!engines.length)return external_kbnSharedDeps_React_default.a.createElement(EmptyState,null);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(kibana_chrome["a"],null),external_kbnSharedDeps_React_default.a.createElement(telemetry["a"],{action:"viewed",metric:"engines_overview"}),external_kbnSharedDeps_React_default.a.createElement(EnginesOverviewHeader,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{panelPaddingSize:"s",className:"enginesOverview"},external_kbnSharedDeps_React_default.a.createElement(flash_messages["a"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(EngineIcon,null)," ",ENGINES_TITLE))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],{"data-test-subj":"appSearchEngines"},external_kbnSharedDeps_React_default.a.createElement(EnginesTable,{data:engines,pagination:{totalEngines:enginesTotal,pageIndex:enginesPage-1,onPaginate:setEnginesPage}})),metaEngines.length>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(MetaEngineIcon,null)," ",META_ENGINES_TITLE))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],{"data-test-subj":"appSearchMetaEngines"},external_kbnSharedDeps_React_default.a.createElement(EnginesTable,{data:metaEngines,pagination:{totalEngines:metaEnginesTotal,pageIndex:metaEnginesPage-1,onPaginate:setMetaEnginesPage}})))))};function engine_overview_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function engine_overview_logic_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){engine_overview_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){engine_overview_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const POLLING_DURATION=5e3;const EngineOverviewLogic=Object(index_cjs["kea"])({path:["enterprise_search","app_search","engine_overview_logic"],actions:()=>({setPolledData:engineMetrics=>engineMetrics,setTimeoutId:timeoutId=>({timeoutId:timeoutId}),pollForOverviewMetrics:true,onPollingSuccess:engineMetrics=>engineMetrics}),reducers:()=>({dataLoading:[true,{setPolledData:()=>false}],apiLogsUnavailable:[false,{setPolledData:(_,{apiLogsUnavailable:apiLogsUnavailable})=>apiLogsUnavailable}],startDate:["",{setPolledData:(_,{startDate:startDate})=>startDate}],endDate:["",{setPolledData:(_,{endDate:endDate})=>endDate}],queriesPerDay:[[],{setPolledData:(_,{queriesPerDay:queriesPerDay})=>queriesPerDay}],operationsPerDay:[[],{setPolledData:(_,{operationsPerDay:operationsPerDay})=>operationsPerDay}],totalQueries:[0,{setPolledData:(_,{totalQueries:totalQueries})=>totalQueries}],totalClicks:[0,{setPolledData:(_,{totalClicks:totalClicks})=>totalClicks}],documentCount:[0,{setPolledData:(_,{documentCount:documentCount})=>documentCount}],timeoutId:[null,{setTimeoutId:(_,{timeoutId:timeoutId})=>timeoutId}]}),listeners:({actions:actions})=>({pollForOverviewMetrics:function(){var _pollForOverviewMetrics=engine_overview_logic_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var http,engineName,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:http=shared_http["a"].values.http;engineName=EngineLogic.values.engineName;_context.prev=2;_context.next=5;return http.get("/api/app_search/engines/".concat(engineName,"/overview"));case 5:response=_context.sent;actions.onPollingSuccess(response);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](2);Object(flash_messages["c"])(_context.t0);case 12:case"end":return _context.stop()}}),_callee,null,[[2,9]])})));function pollForOverviewMetrics(){return _pollForOverviewMetrics.apply(this,arguments)}return pollForOverviewMetrics}(),onPollingSuccess:engineMetrics=>{const timeoutId=window.setTimeout(actions.pollForOverviewMetrics,POLLING_DURATION);actions.setTimeoutId(timeoutId);actions.setPolledData(engineMetrics)}}),events:({values:values})=>({beforeUnmount(){if(values.timeoutId!==null)clearTimeout(values.timeoutId)}})});var loading=__webpack_require__(21);const DOCUMENT_CREATION_DESCRIPTION=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.enterpriseSearch.appSearch.engine.documentCreation.description",defaultMessage:"There are three ways to send documents to your engine for indexing. You can paste raw JSON, upload a {jsonCode} file, or {postCode} to the {documentsApiLink} endpoint. Click on your choice below or see {apiStrong}.",values:{jsonCode:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,".json"),postCode:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"POST"),documentsApiLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{target:"_blank",href:"".concat(DOCS_PREFIX,"/indexing-documents-guide.html")},"documents API"),apiStrong:external_kbnSharedDeps_React_default.a.createElement("strong",null,"Indexing by API")}});const DOCUMENT_API_INDEXING_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.documentCreation.api.title",{defaultMessage:"Indexing by API"});const DOCUMENT_API_INDEXING_DESCRIPTION=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.enterpriseSearch.appSearch.engine.documentCreation.api.description",defaultMessage:"The {documentsApiLink} can be used to add new documents to your engine, update documents, retrieve documents by id, and delete documents. There are a variety of {clientLibrariesLink} to help you get started.",values:{documentsApiLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{target:"_blank",href:"".concat(DOCS_PREFIX,"/indexing-documents-guide.html")},"documents API"),clientLibrariesLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{target:"_blank",href:"".concat(DOCS_PREFIX,"/api-clients.html")},"client libraries")}});const EmptyEngineOverview=()=>{const _useValues=Object(index_cjs["useValues"])(EngineLogic),engineName=_useValues.engineName;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.overview.empty.heading",{defaultMessage:"Engine setup"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{href:"".concat(DOCS_PREFIX,"/index.html"),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.overview.empty.headingAction",{defaultMessage:"View documentation"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.overview.empty.subheading",{defaultMessage:"Setting up the “{engineName}” engine",values:{engineName:engineName}})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,DOCUMENT_CREATION_DESCRIPTION)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h3",null,DOCUMENT_API_INDEXING_TITLE))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,DOCUMENT_API_INDEXING_DESCRIPTION),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.overview.empty.apiExample",{defaultMessage:"To see the API in action, you can experiment with the example request below using a command line or a client library."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))))};const UnavailablePrompt=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"clock",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.overview.unavailableTitle",{defaultMessage:"Dashboard metrics are currently unavailable"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.overview.unavailableBody",{defaultMessage:"Please try again in a few minutes."}))});const TOTAL_DOCUMENTS=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.analytics.totalDocuments",{defaultMessage:"Total documents"});const TOTAL_API_OPERATIONS=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.analytics.totalApiOperations",{defaultMessage:"Total API operations"});const TOTAL_QUERIES=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.analytics.totalQueries",{defaultMessage:"Total queries"});const TOTAL_CLICKS=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.analytics.totalClicks",{defaultMessage:"Total clicks"});const TotalStats=()=>{const _useValues=Object(index_cjs["useValues"])(EngineOverviewLogic),totalQueries=_useValues.totalQueries,documentCount=_useValues.documentCount,totalClicks=_useValues.totalClicks;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{"data-test-subj":"TotalQueriesCard"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{title:totalQueries,description:TOTAL_QUERIES,titleColor:"primary"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{"data-test-subj":"TotalDocumentsCard"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{title:documentCount,description:TOTAL_DOCUMENTS,titleColor:"primary"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{"data-test-subj":"TotalClicksCard"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{title:totalClicks,description:TOTAL_CLICKS,titleColor:"primary"}))))};const OVERVIEW_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.overview.title",{defaultMessage:"Overview"});const VIEW_ANALYTICS=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.overview.analyticsLink",{defaultMessage:"View analytics"});const VIEW_API_LOGS=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.overview.apiLogsLink",{defaultMessage:"View API logs"});const LAST_7_DAYS=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.overview.chartDuration",{defaultMessage:"Last 7 days"});function _objectDestructuringEmpty(obj){if(obj==null)throw new TypeError("Cannot destructure undefined")}const TotalCharts=()=>{const _useValues=Object(index_cjs["useValues"])(EngineLogic),engineName=_useValues.engineName;const engineRoute=getEngineRoute(engineName);const _useValues2=Object(index_cjs["useValues"])(EngineOverviewLogic);_objectDestructuringEmpty(_useValues2);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{"data-test-subj":"TotalQueriesChart"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h2",null,TOTAL_QUERIES)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},LAST_7_DAYS)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(react_router_helpers["a"],{to:engineRoute+ENGINE_ANALYTICS_PATH,size:"s"},VIEW_ANALYTICS))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,"TODO: Analytics chart"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{"data-test-subj":"TotalApiOperationsChart"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h2",null,TOTAL_API_OPERATIONS)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},LAST_7_DAYS)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(react_router_helpers["a"],{to:engineRoute+ENGINE_API_LOGS_PATH,size:"s"},VIEW_API_LOGS))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,"TODO: API Logs chart"))))};const RECENT_API_EVENTS=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.recent",{defaultMessage:"Recent API events"});const RecentApiLogs=()=>{const _useValues=Object(index_cjs["useValues"])(EngineLogic),engineName=_useValues.engineName;const engineRoute=getEngineRoute(engineName);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h2",null,RECENT_API_EVENTS))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(react_router_helpers["a"],{to:engineRoute+ENGINE_API_LOGS_PATH,size:"s"},VIEW_API_LOGS))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,"TODO: API Logs Table"))};const EngineOverviewMetrics=()=>{const _useValues=Object(index_cjs["useValues"])(EngineOverviewLogic),apiLogsUnavailable=_useValues.apiLogsUnavailable;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.overview.heading",{defaultMessage:"Engine overview"})))),apiLogsUnavailable?external_kbnSharedDeps_React_default.a.createElement(UnavailablePrompt,null):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(TotalStats,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(TotalCharts,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(RecentApiLogs,null)))};const EngineOverview=()=>{const _useValues=Object(index_cjs["useValues"])(AppLogic),_useValues$myRole=_useValues.myRole,canManageEngineDocuments=_useValues$myRole.canManageEngineDocuments,canViewEngineCredentials=_useValues$myRole.canViewEngineCredentials;const _useValues2=Object(index_cjs["useValues"])(EngineLogic),isMetaEngine=_useValues2.isMetaEngine;const _useActions=Object(index_cjs["useActions"])(EngineOverviewLogic),pollForOverviewMetrics=_useActions.pollForOverviewMetrics;const _useValues3=Object(index_cjs["useValues"])(EngineOverviewLogic),dataLoading=_useValues3.dataLoading,documentCount=_useValues3.documentCount;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{pollForOverviewMetrics()},[]);if(dataLoading){return external_kbnSharedDeps_React_default.a.createElement(loading["a"],null)}const engineHasDocuments=documentCount>0;const canAddDocuments=canManageEngineDocuments&&canViewEngineCredentials;const showEngineOverview=engineHasDocuments||!canAddDocuments||isMetaEngine;return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"EngineOverview"},showEngineOverview?external_kbnSharedDeps_React_default.a.createElement(EngineOverviewMetrics,null):external_kbnSharedDeps_React_default.a.createElement(EmptyEngineOverview,null))};const ANALYTICS_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.analytics.title",{defaultMessage:"Analytics"});const DOCUMENTS_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.documents.title",{defaultMessage:"Documents"});const SCHEMA_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.schema.title",{defaultMessage:"Schema"});const CRAWLER_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.crawler.title",{defaultMessage:"Crawler"});const RELEVANCE_TUNING_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.title",{defaultMessage:"Relevance Tuning"});const SYNONYMS_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.synonyms.title",{defaultMessage:"Synonyms"});const CURATIONS_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.curations.title",{defaultMessage:"Curations"});const RESULT_SETTINGS_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.title",{defaultMessage:"Result Settings"});const SEARCH_UI_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.searchUI.title",{defaultMessage:"Search UI"});const API_LOGS_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.title",{defaultMessage:"API Logs"});function document_detail_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function document_detail_logic_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){document_detail_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){document_detail_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const CONFIRM_DELETE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.documentDetail.confirmDelete",{defaultMessage:"Are you sure you want to delete this document?"});const DELETE_SUCCESS=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.documentDetail.deleteSuccess",{defaultMessage:"Successfully marked document for deletion. It will be deleted momentarily."});const DocumentDetailLogic=Object(index_cjs["kea"])({path:["enterprise_search","app_search","document_detail_logic"],actions:()=>({setFields:fields=>({fields:fields}),getDocumentDetails:documentId=>({documentId:documentId}),deleteDocument:documentId=>({documentId:documentId})}),reducers:()=>({dataLoading:[true,{setFields:()=>false}],fields:[[],{setFields:(_,{fields:fields})=>fields}]}),listeners:({actions:actions})=>({getDocumentDetails:function(){var _getDocumentDetails=document_detail_logic_asyncToGenerator(regeneratorRuntime.mark((function _callee({documentId:documentId}){var engineName,http,response,engineRoute;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:engineName=EngineLogic.values.engineName;_context.prev=1;http=shared_http["a"].values.http;_context.next=5;return http.get("/api/app_search/engines/".concat(engineName,"/documents/").concat(documentId));case 5:response=_context.sent;actions.setFields(response.fields);_context.next=14;break;case 9:_context.prev=9;_context.t0=_context["catch"](1);Object(flash_messages["c"])(_context.t0,{isQueued:true});engineRoute=getEngineRoute(engineName);kibana["a"].values.navigateToUrl(engineRoute+ENGINE_DOCUMENTS_PATH);case 14:case"end":return _context.stop()}}),_callee,null,[[1,9]])})));function getDocumentDetails(_x){return _getDocumentDetails.apply(this,arguments)}return getDocumentDetails}(),deleteDocument:function(){var _deleteDocument=document_detail_logic_asyncToGenerator(regeneratorRuntime.mark((function _callee2({documentId:documentId}){var engineName,http,engineRoute;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:engineName=EngineLogic.values.engineName;if(!window.confirm(CONFIRM_DELETE)){_context2.next=14;break}_context2.prev=2;http=shared_http["a"].values.http;_context2.next=6;return http.delete("/api/app_search/engines/".concat(engineName,"/documents/").concat(documentId));case 6:Object(flash_messages["g"])(DELETE_SUCCESS);engineRoute=getEngineRoute(engineName);kibana["a"].values.navigateToUrl(engineRoute+ENGINE_DOCUMENTS_PATH);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2["catch"](2);Object(flash_messages["c"])(_context2.t0);case 14:case"end":return _context2.stop()}}),_callee2,null,[[2,11]])})));function deleteDocument(_x2){return _deleteDocument.apply(this,arguments)}return deleteDocument}()})});const DocumentsLogic=Object(index_cjs["kea"])({path:["enterprise_search","app_search","documents_logic"],actions:()=>({openDocumentCreation:true,closeDocumentCreation:true}),reducers:()=>({isDocumentCreationOpen:[false,{openDocumentCreation:()=>true,closeDocumentCreation:()=>false}]})});const constants_DOCUMENTS_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.documents.title",{defaultMessage:"Documents"});const Documents=({engineBreadcrumb:engineBreadcrumb})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(kibana_chrome["a"],{trail:[...engineBreadcrumb,constants_DOCUMENTS_TITLE]}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,constants_DOCUMENTS_TITLE)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,external_kbnSharedDeps_React_default.a.createElement(flash_messages["a"],null))));var classnames=__webpack_require__(28);var classnames_default=__webpack_require__.n(classnames);var result_field_value=__webpack_require__(184);const isNotNumeric=raw=>{if(typeof raw==="number")return false;return isNaN(parseFloat(raw))};const getRawArrayDisplay=rawArray=>"[".concat(rawArray.map(raw=>isNotNumeric(raw)?'"'.concat(raw,'"'):raw).join(", "),"]");const parseHighlights=highlight=>highlight.replace(/<em>(.+?)<\/em>/gi,'<em class="enterpriseSearchResultHighlight">$1</em>');const isFieldValueEmpty=(type,raw,snippet)=>{const isNumber=type==="number";if(isNumber){return raw===null}return!snippet&&!raw};const ResultFieldValue=({snippet:snippet,raw:raw,type:type,className:className})=>{const isEmpty=isFieldValueEmpty(type,raw,snippet);if(isEmpty)return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,"—");const classes=classnames_default()({["enterpriseSearchDataType--".concat(type)]:!!type},className);return external_kbnSharedDeps_React_default.a.createElement("div",{className:classes,dangerouslySetInnerHTML:snippet?{__html:parseHighlights(snippet)}:undefined},!!snippet?null:Array.isArray(raw)?getRawArrayDisplay(raw):raw)};const DOCUMENT_DETAIL_TITLE=documentId=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.documentDetail.title",{defaultMessage:"Document: {documentId}",values:{documentId:documentId}});const DocumentDetail=({engineBreadcrumb:engineBreadcrumb})=>{const _useValues=Object(index_cjs["useValues"])(DocumentDetailLogic),dataLoading=_useValues.dataLoading,fields=_useValues.fields;const _useActions=Object(index_cjs["useActions"])(DocumentDetailLogic),deleteDocument=_useActions.deleteDocument,getDocumentDetails=_useActions.getDocumentDetails,setFields=_useActions.setFields;const _ref=Object(external_kbnSharedDeps_ReactRouterDom_["useParams"])(),documentId=_ref.documentId;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{getDocumentDetails(documentId);return()=>{setFields([])}},[]);if(dataLoading){return external_kbnSharedDeps_React_default.a.createElement(loading["a"],null)}const columns=[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.documentDetail.fieldHeader",{defaultMessage:"Field"}),width:"20%",render:field=>field.name},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.documentDetail.valueHeader",{defaultMessage:"Value"}),width:"80%",render:({value:value,type:type})=>external_kbnSharedDeps_React_default.a.createElement(ResultFieldValue,{raw:value,type:type})}];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(kibana_chrome["a"],{trail:[...engineBreadcrumb,constants_DOCUMENTS_TITLE,decodeURIComponent(documentId)]}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,DOCUMENT_DETAIL_TITLE(decodeURIComponent(documentId))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"danger",iconType:"trash",onClick:()=>deleteDocument(documentId),"data-test-subj":"DeleteDocumentButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.documentDetail.deleteButton",{defaultMessage:"Delete"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,external_kbnSharedDeps_React_default.a.createElement(flash_messages["a"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{columns:columns,items:fields}))))};const EngineRouter=()=>{const _useValues=Object(index_cjs["useValues"])(AppLogic),canViewEngineAnalytics=_useValues.myRole.canViewEngineAnalytics;const _useValues2=Object(index_cjs["useValues"])(EngineLogic),dataLoading=_useValues2.dataLoading,engineNotFound=_useValues2.engineNotFound;const _useActions=Object(index_cjs["useActions"])(EngineLogic),setEngineName=_useActions.setEngineName,initializeEngine=_useActions.initializeEngine,clearEngine=_useActions.clearEngine;const _ref=Object(external_kbnSharedDeps_ReactRouterDom_["useParams"])(),engineName=_ref.engineName;const engineBreadcrumb=[ENGINES_TITLE,engineName];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setEngineName(engineName);initializeEngine();return clearEngine},[engineName]);if(engineNotFound){Object(flash_messages["f"])(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.notFound",{defaultMessage:"No engine with name '{engineName}' could be found.",values:{engineName:engineName}}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Redirect"],{to:ENGINES_PATH})}if(dataLoading)return external_kbnSharedDeps_React_default.a.createElement(loading["a"],null);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,canViewEngineAnalytics&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:ENGINE_PATH+ENGINE_ANALYTICS_PATH},external_kbnSharedDeps_React_default.a.createElement(kibana_chrome["a"],{trail:[...engineBreadcrumb,ANALYTICS_TITLE]}),external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"AnalyticsTODO"},"Just testing right now")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:ENGINE_PATH+ENGINE_DOCUMENT_DETAIL_PATH},external_kbnSharedDeps_React_default.a.createElement(DocumentDetail,{engineBreadcrumb:engineBreadcrumb})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:ENGINE_PATH+ENGINE_DOCUMENTS_PATH},external_kbnSharedDeps_React_default.a.createElement(Documents,{engineBreadcrumb:engineBreadcrumb})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],null,external_kbnSharedDeps_React_default.a.createElement(kibana_chrome["a"],{trail:[...engineBreadcrumb,OVERVIEW_TITLE]}),external_kbnSharedDeps_React_default.a.createElement(EngineOverview,null)))};var engine_nav=__webpack_require__(193);const EngineNav=()=>{const _useValues=Object(index_cjs["useValues"])(AppLogic),_useValues$myRole=_useValues.myRole,canViewEngineAnalytics=_useValues$myRole.canViewEngineAnalytics,canViewEngineDocuments=_useValues$myRole.canViewEngineDocuments,canViewEngineSchema=_useValues$myRole.canViewEngineSchema,canViewEngineCrawler=_useValues$myRole.canViewEngineCrawler,canViewMetaEngineSourceEngines=_useValues$myRole.canViewMetaEngineSourceEngines,canManageEngineSynonyms=_useValues$myRole.canManageEngineSynonyms,canManageEngineCurations=_useValues$myRole.canManageEngineCurations,canManageEngineRelevanceTuning=_useValues$myRole.canManageEngineRelevanceTuning,canManageEngineResultSettings=_useValues$myRole.canManageEngineResultSettings,canManageEngineSearchUi=_useValues$myRole.canManageEngineSearchUi,canViewEngineApiLogs=_useValues$myRole.canViewEngineApiLogs;const _useValues2=Object(index_cjs["useValues"])(EngineLogic),engineName=_useValues2.engineName,dataLoading=_useValues2.dataLoading,isSampleEngine=_useValues2.isSampleEngine,isMetaEngine=_useValues2.isMetaEngine,hasSchemaConflicts=_useValues2.hasSchemaConflicts,hasUnconfirmedSchemaFields=_useValues2.hasUnconfirmedSchemaFields,engine=_useValues2.engine;if(dataLoading)return null;if(!engineName)return null;const engineRoute=getEngineRoute(engineName);const _ref=engine,invalidBoosts=_ref.invalidBoosts,unsearchedUnconfirmedFields=_ref.unsearchedUnconfirmedFields;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(layout["c"],{className:"appSearchNavEngineLabel","data-test-subj":"EngineLabel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s"},external_kbnSharedDeps_React_default.a.createElement("div",{className:"eui-textTruncate"},engineName.toUpperCase()),isSampleEngine&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.sampleEngineBadge",{defaultMessage:"SAMPLE ENGINE"})),isMetaEngine&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.metaEngineBadge",{defaultMessage:"META ENGINE"})))),external_kbnSharedDeps_React_default.a.createElement(layout["d"],{to:engineRoute,"data-test-subj":"EngineOverviewLink"},OVERVIEW_TITLE),canViewEngineAnalytics&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{to:engineRoute+ENGINE_ANALYTICS_PATH,"data-test-subj":"EngineAnalyticsLink"},ANALYTICS_TITLE),canViewEngineDocuments&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{to:engineRoute+ENGINE_DOCUMENTS_PATH,shouldShowActiveForSubroutes:true,"data-test-subj":"EngineDocumentsLink"},DOCUMENTS_TITLE),canViewEngineSchema&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{isExternal:true,to:Object(enterprise_search_url["b"])(engineRoute+ENGINE_SCHEMA_PATH),"data-test-subj":"EngineSchemaLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,SCHEMA_TITLE),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"appSearchNavIcons"},hasUnconfirmedSchemaFields&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"iInCircle",color:"primary",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.schema.unconfirmedFields",{defaultMessage:"New unconfirmed fields"}),"data-test-subj":"EngineNavSchemaUnconfirmedFields"}),hasSchemaConflicts&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"alert",color:"warning",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.schema.conflicts",{defaultMessage:"Schema conflicts"}),"data-test-subj":"EngineNavSchemaConflicts"})))),canViewEngineCrawler&&!isMetaEngine&&!isSampleEngine&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{isExternal:true,to:Object(enterprise_search_url["b"])(engineRoute+ENGINE_CRAWLER_PATH),"data-test-subj":"EngineCrawlerLink"},CRAWLER_TITLE),canViewMetaEngineSourceEngines&&isMetaEngine&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{isExternal:true,to:Object(enterprise_search_url["b"])(engineRoute+META_ENGINE_SOURCE_ENGINES_PATH),"data-test-subj":"MetaEngineEnginesLink"},ENGINES_TITLE),canManageEngineRelevanceTuning&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{isExternal:true,to:Object(enterprise_search_url["b"])(engineRoute+ENGINE_RELEVANCE_TUNING_PATH),"data-test-subj":"EngineRelevanceTuningLink"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",gutterSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,RELEVANCE_TUNING_TITLE),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:"appSearchNavIcons"},invalidBoosts&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"alert",color:"warning",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.invalidBoosts",{defaultMessage:"Invalid boosts"}),"data-test-subj":"EngineNavRelevanceTuningInvalidBoosts"}),unsearchedUnconfirmedFields&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"alert",color:"warning",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.unsearchedFields",{defaultMessage:"Unsearched fields"}),"data-test-subj":"EngineNavRelevanceTuningUnsearchedFields"})))),canManageEngineSynonyms&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{isExternal:true,to:Object(enterprise_search_url["b"])(engineRoute+ENGINE_SYNONYMS_PATH),"data-test-subj":"EngineSynonymsLink"},SYNONYMS_TITLE),canManageEngineCurations&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{isExternal:true,to:Object(enterprise_search_url["b"])(engineRoute+ENGINE_CURATIONS_PATH),"data-test-subj":"EngineCurationsLink"},CURATIONS_TITLE),canManageEngineResultSettings&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{isExternal:true,to:Object(enterprise_search_url["b"])(engineRoute+ENGINE_RESULT_SETTINGS_PATH),"data-test-subj":"EngineResultSettingsLink"},RESULT_SETTINGS_TITLE),canManageEngineSearchUi&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{isExternal:true,to:Object(enterprise_search_url["b"])(engineRoute+ENGINE_SEARCH_UI_PATH),"data-test-subj":"EngineSearchUILink"},SEARCH_UI_TITLE),canViewEngineApiLogs&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{isExternal:true,to:Object(enterprise_search_url["b"])(engineRoute+ENGINE_API_LOGS_PATH),"data-test-subj":"EngineAPILogsLink"},API_LOGS_TITLE))};function engine_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function engine_logic_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){engine_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){engine_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function engine_logic_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function engine_logic_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){engine_logic_ownKeys(Object(source),true).forEach((function(key){engine_logic_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{engine_logic_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function engine_logic_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const EngineLogic=Object(index_cjs["kea"])({path:["enterprise_search","app_search","engine_logic"],actions:{setEngineData:engine=>({engine:engine}),setEngineName:engineName=>({engineName:engineName}),setIndexingStatus:activeReindexJob=>({activeReindexJob:activeReindexJob}),setEngineNotFound:notFound=>({notFound:notFound}),clearEngine:true,initializeEngine:true},reducers:{dataLoading:[true,{setEngineData:()=>false,clearEngine:()=>true}],engine:[{},{setEngineData:(_,{engine:engine})=>engine,clearEngine:()=>({}),setIndexingStatus:(state,{activeReindexJob:activeReindexJob})=>engine_logic_objectSpread(engine_logic_objectSpread({},state),{},{activeReindexJob:activeReindexJob})}],engineName:["",{setEngineName:(_,{engineName:engineName})=>engineName}],engineNotFound:[false,{setEngineNotFound:(_,{notFound:notFound})=>notFound}]},selectors:({selectors:_selectors})=>({isMetaEngine:[()=>[_selectors.engine],engine=>(engine===null||engine===void 0?void 0:engine.type)==="meta"],isSampleEngine:[()=>[_selectors.engine],engine=>!!(engine===null||engine===void 0?void 0:engine.sample)],hasSchemaConflicts:[()=>[_selectors.engine],engine=>!!((engine===null||engine===void 0?void 0:engine.schemaConflicts)&&Object.keys(engine.schemaConflicts).length>0)],hasUnconfirmedSchemaFields:[()=>[_selectors.engine],engine=>{var _engine$unconfirmedFi;return(engine===null||engine===void 0?void 0:(_engine$unconfirmedFi=engine.unconfirmedFields)===null||_engine$unconfirmedFi===void 0?void 0:_engine$unconfirmedFi.length)>0}]}),listeners:({actions:actions,values:values})=>({initializeEngine:function(){var _initializeEngine=engine_logic_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var engineName,http,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:engineName=values.engineName;http=shared_http["a"].values.http;_context.prev=2;_context.next=5;return http.get("/api/app_search/engines/".concat(engineName));case 5:response=_context.sent;actions.setEngineData(response);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](2);actions.setEngineNotFound(true);case 12:case"end":return _context.stop()}}),_callee,null,[[2,9]])})));function initializeEngine(){return _initializeEngine.apply(this,arguments)}return initializeEngine}()})});var setup_guide=__webpack_require__(42);var getting_started=__webpack_require__(202);var getting_started_default=__webpack_require__.n(getting_started);const SetupGuide=()=>external_kbnSharedDeps_React_default.a.createElement(setup_guide["b"],{productName:constants["a"].NAME,productEuiIcon:"logoAppSearch",standardAuthLink:"".concat(DOCS_PREFIX,"/security-and-users.html#app-search-self-managed-security-and-user-management-standard"),elasticsearchNativeAuthLink:"".concat(DOCS_PREFIX,"/security-and-users.html#app-search-self-managed-security-and-user-management-elasticsearch-native-realm")},external_kbnSharedDeps_React_default.a.createElement(kibana_chrome["a"],{trail:[setup_guide["a"]]}),external_kbnSharedDeps_React_default.a.createElement(telemetry["a"],{action:"viewed",metric:"setup_guide"}),external_kbnSharedDeps_React_default.a.createElement("a",{href:"https://www.elastic.co/webinars/getting-started-with-elastic-app-search",target:"_blank",rel:"noopener noreferrer"},external_kbnSharedDeps_React_default.a.createElement("img",{className:"setupGuide__thumbnail",src:getting_started_default.a,alt:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.setupGuide.videoAlt",{defaultMessage:"Getting started with App Search - in this short video we'll guide you through how to get App Search up and running"}),width:"1280","height-":"720"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.enterpriseSearch.appSearch.setupGuide.description",defaultMessage:"Elastic App Search provides tools to design and deploy a powerful search to your websites and mobile applications."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.enterpriseSearch.appSearch.setupGuide.notConfigured",defaultMessage:"App Search is not configured in your Kibana instance yet."}))));var error_state=__webpack_require__(43);const ErrorConnecting=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(kibana_chrome["a"],null),external_kbnSharedDeps_React_default.a.createElement(telemetry["a"],{action:"error",metric:"cannot_connect"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(error_state["a"],null)));var not_found=__webpack_require__(64);let LogRetentionOptions;(function(LogRetentionOptions){LogRetentionOptions["Analytics"]="analytics";LogRetentionOptions["API"]="api"})(LogRetentionOptions||(LogRetentionOptions={}));const convertLogRetentionFromServerToClient=logRetention=>({[LogRetentionOptions.Analytics]:convertLogRetentionSettingsFromServerToClient(logRetention[LogRetentionOptions.Analytics]),[LogRetentionOptions.API]:convertLogRetentionSettingsFromServerToClient(logRetention[LogRetentionOptions.API])});const convertLogRetentionSettingsFromServerToClient=({disabled_at:disabledAt,enabled:enabled,retention_policy:retentionPolicy})=>({disabledAt:disabledAt,enabled:enabled,retentionPolicy:retentionPolicy===null?null:convertLogRetentionPolicyFromServerToClient(retentionPolicy)});const convertLogRetentionPolicyFromServerToClient=({min_age_days:minAgeDays,is_default:isDefault})=>({isDefault:isDefault,minAgeDays:minAgeDays});function log_retention_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function log_retention_logic_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){log_retention_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){log_retention_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const LogRetentionLogic=Object(index_cjs["kea"])({path:["enterprise_search","app_search","log_retention_logic"],actions:()=>({clearLogRetentionUpdating:true,closeModals:true,fetchLogRetention:true,saveLogRetention:(option,enabled)=>({enabled:enabled,option:option}),setOpenedModal:option=>({option:option}),toggleLogRetention:option=>({option:option}),updateLogRetention:logRetention=>({logRetention:logRetention})}),reducers:()=>({logRetention:[null,{updateLogRetention:(_,{logRetention:logRetention})=>logRetention}],isLogRetentionUpdating:[false,{clearLogRetentionUpdating:()=>false,closeModals:()=>false,fetchLogRetention:()=>true,toggleLogRetention:()=>true}],openedModal:[null,{closeModals:()=>null,saveLogRetention:()=>null,setOpenedModal:(_,{option:option})=>option}]}),listeners:({actions:actions,values:values})=>({fetchLogRetention:function(){var _fetchLogRetention=log_retention_logic_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var http,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;http=shared_http["a"].values.http;_context.next=4;return http.get("/api/app_search/log_settings");case 4:response=_context.sent;actions.updateLogRetention(convertLogRetentionFromServerToClient(response));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);Object(flash_messages["c"])(_context.t0);case 11:_context.prev=11;actions.clearLogRetentionUpdating();return _context.finish(11);case 14:case"end":return _context.stop()}}),_callee,null,[[0,8,11,14]])})));function fetchLogRetention(){return _fetchLogRetention.apply(this,arguments)}return fetchLogRetention}(),saveLogRetention:function(){var _saveLogRetention=log_retention_logic_asyncToGenerator(regeneratorRuntime.mark((function _callee2({enabled:enabled,option:option}){var updateData,http,response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:updateData={[option]:{enabled:enabled}};_context2.prev=1;http=shared_http["a"].values.http;_context2.next=5;return http.put("/api/app_search/log_settings",{body:JSON.stringify(updateData)});case 5:response=_context2.sent;actions.updateLogRetention(convertLogRetentionFromServerToClient(response));_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](1);Object(flash_messages["c"])(_context2.t0);case 12:_context2.prev=12;actions.clearLogRetentionUpdating();return _context2.finish(12);case 15:case"end":return _context2.stop()}}),_callee2,null,[[1,9,12,15]])})));function saveLogRetention(_x){return _saveLogRetention.apply(this,arguments)}return saveLogRetention}(),toggleLogRetention:({option:option})=>{var _values$logRetention;const logRetention=(_values$logRetention=values.logRetention)===null||_values$logRetention===void 0?void 0:_values$logRetention[option];if(!logRetention){return}const optionIsAlreadyEnabled=logRetention.enabled;if(optionIsAlreadyEnabled){actions.setOpenedModal(option)}else{actions.saveLogRetention(option,true)}}})});var external_kbnSharedDeps_Moment_=__webpack_require__(12);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);const determineTooltipContent=(messages,ilmEnabled,logRetentionSettings)=>{var _logRetentionSettings,_logRetentionSettings2;if(typeof logRetentionSettings==="undefined"){return}const renderOrReturnMessage=message=>{if(typeof message==="function"){return message(ilmEnabled,logRetentionSettings)}return message};if(!logRetentionSettings.enabled){return renderOrReturnMessage(messages.noLogging)}if(logRetentionSettings.enabled&&!ilmEnabled){return renderOrReturnMessage(messages.ilmDisabled)}if(logRetentionSettings.enabled&&ilmEnabled&&!((_logRetentionSettings=logRetentionSettings.retentionPolicy)===null||_logRetentionSettings===void 0?void 0:_logRetentionSettings.isDefault)){return renderOrReturnMessage(messages.customPolicy)}if(logRetentionSettings.enabled&&ilmEnabled&&((_logRetentionSettings2=logRetentionSettings.retentionPolicy)===null||_logRetentionSettings2===void 0?void 0:_logRetentionSettings2.isDefault)){return renderOrReturnMessage(messages.defaultPolicy)}};const ANALYTICS_NO_LOGGING=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.analytics.noLogging",{defaultMessage:"Analytics collection has been disabled for all engines."});const ANALYTICS_NO_LOGGING_COLLECTED=disabledAt=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.analytics.noLogging.collected",{defaultMessage:"The last date analytics were collected was {disabledAt}.",values:{disabledAt:disabledAt}});const ANALYTICS_NO_LOGGING_NOT_COLLECTED=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.analytics.noLogging.notCollected",{defaultMessage:"There are no analytics collected."});const ANALYTICS_ILM_DISABLED=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.analytics.ilmDisabled",{defaultMessage:"App Search isn't managing analytics retention."});const ANALYTICS_CUSTOM_POLICY=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.analytics.customPolicy",{defaultMessage:"You have a custom analytics retention policy."});const ANALYTICS_STORED=minAgeDays=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.analytics.stored",{defaultMessage:"Your analytics are being stored for at least {minAgeDays} days.",values:{minAgeDays:minAgeDays}});const API_NO_LOGGING=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.api.noLogging",{defaultMessage:"API logging has been disabled for all engines."});const API_NO_LOGGING_COLLECTED=disabledAt=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.api.noLogging.collected",{defaultMessage:"The last date logs were collected was {disabledAt}.",values:{disabledAt:disabledAt}});const API_NO_LOGGING_NOT_COLLECTED=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.api.noLogging.notCollected",{defaultMessage:"There are no logs collected."});const API_ILM_DISABLED=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.api.ilmDisabled",{defaultMessage:"App Search isn't managing API log retention."});const API_CUSTOM_POLICY=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.api.customPolicy",{defaultMessage:"You have a custom API log retention policy."});const API_STORED=minAgeDays=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.api.stored",{defaultMessage:"Your logs are being stored for at least {minAgeDays} days.",values:{minAgeDays:minAgeDays}});const ANALYTICS_MESSAGES={noLogging:(_,logRetentionSettings)=>"".concat(ANALYTICS_NO_LOGGING," ").concat(logRetentionSettings.disabledAt?ANALYTICS_NO_LOGGING_COLLECTED(renderLogRetentionDate(logRetentionSettings.disabledAt)):ANALYTICS_NO_LOGGING_NOT_COLLECTED),ilmDisabled:ANALYTICS_ILM_DISABLED,customPolicy:ANALYTICS_CUSTOM_POLICY,defaultPolicy:(_,logRetentionSettings)=>{var _logRetentionSettings;return ANALYTICS_STORED((_logRetentionSettings=logRetentionSettings.retentionPolicy)===null||_logRetentionSettings===void 0?void 0:_logRetentionSettings.minAgeDays)}};const API_MESSAGES={noLogging:(_,logRetentionSettings)=>"".concat(API_NO_LOGGING," ").concat(logRetentionSettings.disabledAt?API_NO_LOGGING_COLLECTED(renderLogRetentionDate(logRetentionSettings.disabledAt)):API_NO_LOGGING_NOT_COLLECTED),ilmDisabled:API_ILM_DISABLED,customPolicy:API_CUSTOM_POLICY,defaultPolicy:(_,logRetentionSettings)=>{var _logRetentionSettings2;return API_STORED((_logRetentionSettings2=logRetentionSettings.retentionPolicy)===null||_logRetentionSettings2===void 0?void 0:_logRetentionSettings2.minAgeDays)}};const renderLogRetentionDate=dateString=>external_kbnSharedDeps_Moment_default()(dateString).format("MMMM D, YYYY");const AnalyticsLogRetentionMessage=()=>{const _useValues=Object(index_cjs["useValues"])(AppLogic),ilmEnabled=_useValues.ilmEnabled;const _useValues2=Object(index_cjs["useValues"])(LogRetentionLogic),logRetention=_useValues2.logRetention;if(!logRetention)return null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,determineTooltipContent(ANALYTICS_MESSAGES,ilmEnabled,logRetention[LogRetentionOptions.Analytics]))};const ApiLogRetentionMessage=()=>{const _useValues3=Object(index_cjs["useValues"])(AppLogic),ilmEnabled=_useValues3.ilmEnabled;const _useValues4=Object(index_cjs["useValues"])(LogRetentionLogic),logRetention=_useValues4.logRetention;if(!logRetention)return null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,determineTooltipContent(API_MESSAGES,ilmEnabled,logRetention[LogRetentionOptions.API]))};const LogRetentionPanel=()=>{const _useActions=Object(index_cjs["useActions"])(LogRetentionLogic),toggleLogRetention=_useActions.toggleLogRetention,fetchLogRetention=_useActions.fetchLogRetention;const _useValues=Object(index_cjs["useValues"])(LogRetentionLogic),logRetention=_useValues.logRetention,isLogRetentionUpdating=_useValues.isLogRetentionUpdating;const hasILM=logRetention!==null;const analyticsLogRetentionSettings=logRetention===null||logRetention===void 0?void 0:logRetention[LogRetentionOptions.Analytics];const apiLogRetentionSettings=logRetention===null||logRetention===void 0?void 0:logRetention[LogRetentionOptions.API];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{fetchLogRetention()},[]);return external_kbnSharedDeps_React_default.a.createElement("div",{"data-test-subj":"LogRetentionPanel"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.title",{defaultMessage:"Log Retention"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.description",{defaultMessage:"Manage the default write settings for API Logs and Analytics."})," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:"".concat(DOCS_PREFIX,"/logs.html"),target:"_blank"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.learnMore",{defaultMessage:"Learn more about retention settings."})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.analytics.label",{defaultMessage:"Analytics Logs"})),": ",hasILM&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(AnalyticsLogRetentionMessage,null))),checked:!!(analyticsLogRetentionSettings===null||analyticsLogRetentionSettings===void 0?void 0:analyticsLogRetentionSettings.enabled),onChange:()=>toggleLogRetention(LogRetentionOptions.Analytics),disabled:isLogRetentionUpdating,"data-test-subj":"LogRetentionPanelAnalyticsSwitch"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.api.label",{defaultMessage:"API Logs"})),": ",hasILM&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(ApiLogRetentionMessage,null))),checked:!!(apiLogRetentionSettings===null||apiLogRetentionSettings===void 0?void 0:apiLogRetentionSettings.enabled),onChange:()=>toggleLogRetention(LogRetentionOptions.API),disabled:isLogRetentionUpdating,"data-test-subj":"LogRetentionPanelAPISwitch"})))};function generic_confirmation_modal_slicedToArray(arr,i){return generic_confirmation_modal_arrayWithHoles(arr)||generic_confirmation_modal_iterableToArrayLimit(arr,i)||generic_confirmation_modal_unsupportedIterableToArray(arr,i)||generic_confirmation_modal_nonIterableRest()}function generic_confirmation_modal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function generic_confirmation_modal_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return generic_confirmation_modal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return generic_confirmation_modal_arrayLikeToArray(o,minLen)}function generic_confirmation_modal_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function generic_confirmation_modal_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function generic_confirmation_modal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const GenericConfirmationModal=({description:description,onClose:onClose,onSave:onSave,subheading:subheading,target:target,title:title})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(""),_useState2=generic_confirmation_modal_slicedToArray(_useState,2),inputValue=_useState2[0],setInputValue=_useState2[1];const onConfirm=()=>{setInputValue("");onSave()};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:onClose,initialFocus:".euiFieldText","aria-label":title},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,title)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,subheading)),external_kbnSharedDeps_React_default.a.createElement("p",null,description)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.prompt",{defaultMessage:'Type "{target}" to confirm.',values:{target:target}})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"data-test-subj":"GenericConfirmationModalInput",value:inputValue,onChange:e=>setInputValue(e.target.value)}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"GenericConfirmationModalCancel",onClick:onClose},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.cancel",{defaultMessage:"Cancel"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"GenericConfirmationModalSave",onClick:onConfirm,disabled:inputValue.toLowerCase()!==target.toLowerCase()},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.save",{defaultMessage:"Save setting"}))))};const LogRetentionConfirmationModal=()=>{var _logRetention$LogRete,_logRetention$LogRete2,_logRetention$LogRete3,_logRetention$LogRete4;const CANNOT_BE_RECOVERED_TEXT=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.recovery",{defaultMessage:"Once your data has been removed, it cannot be recovered."});const DISABLE_TEXT=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.disable",{defaultMessage:"DISABLE"});const _useActions=Object(index_cjs["useActions"])(LogRetentionLogic),closeModals=_useActions.closeModals,saveLogRetention=_useActions.saveLogRetention;const _useValues=Object(index_cjs["useValues"])(LogRetentionLogic),logRetention=_useValues.logRetention,openedModal=_useValues.openedModal;if(openedModal===null){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,openedModal===LogRetentionOptions.Analytics&&external_kbnSharedDeps_React_default.a.createElement(GenericConfirmationModal,{"data-test-subj":"AnalyticsLogRetentionConfirmationModal",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.analytics.title",{defaultMessage:"Disable Analytics writes"}),subheading:logRetention&&((_logRetention$LogRete=logRetention[LogRetentionOptions.Analytics].retentionPolicy)===null||_logRetention$LogRete===void 0?void 0:_logRetention$LogRete.minAgeDays)&&external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.analytics.subheading",{defaultMessage:"Your Analytics Logs are currently being stored for {minAgeDays} days.",values:{minAgeDays:(_logRetention$LogRete2=logRetention[LogRetentionOptions.Analytics].retentionPolicy)===null||_logRetention$LogRete2===void 0?void 0:_logRetention$LogRete2.minAgeDays}}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.analytics.description",{defaultMessage:"When disabling Analytics Logs, all your engines will immediately stop indexing Analytics Logs. Your existing data will be deleted in accordance with the storage timeframes outlined above."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"danger"},CANNOT_BE_RECOVERED_TEXT)))),target:DISABLE_TEXT,onClose:closeModals,onSave:()=>saveLogRetention(LogRetentionOptions.Analytics,false)}),openedModal===LogRetentionOptions.API&&external_kbnSharedDeps_React_default.a.createElement(GenericConfirmationModal,{"data-test-subj":"APILogRetentionConfirmationModal",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.api.title",{defaultMessage:"Disable API writes"}),subheading:logRetention&&(logRetention===null||logRetention===void 0?void 0:(_logRetention$LogRete3=logRetention[LogRetentionOptions.API].retentionPolicy)===null||_logRetention$LogRete3===void 0?void 0:_logRetention$LogRete3.minAgeDays)&&external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.api.subheading",{defaultMessage:"Your API Logs are currently being stored for {minAgeDays} days.",values:{minAgeDays:logRetention===null||logRetention===void 0?void 0:(_logRetention$LogRete4=logRetention[LogRetentionOptions.API].retentionPolicy)===null||_logRetention$LogRete4===void 0?void 0:_logRetention$LogRete4.minAgeDays}}),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.api.description",{defaultMessage:"When disabling API Logs, all your engines will immediately stop indexing API Logs. Your existing data will be deleted in accordance with the storage timeframes outlined above."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"danger"},CANNOT_BE_RECOVERED_TEXT)))),target:DISABLE_TEXT,onClose:closeModals,onSave:()=>saveLogRetention(LogRetentionOptions.API,false)}))};const Settings=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(kibana_chrome["a"],{trail:[SETTINGS_TITLE]}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,SETTINGS_TITLE)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,external_kbnSharedDeps_React_default.a.createElement(flash_messages["a"],null),external_kbnSharedDeps_React_default.a.createElement(LogRetentionConfirmationModal,null),external_kbnSharedDeps_React_default.a.createElement(LogRetentionPanel,null))));const SETTINGS_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.settings.title",{defaultMessage:"Settings"});const formatApiName=rawName=>rawName.trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^[-]+|[-]+$/g,"").toLowerCase();const CREDENTIALS_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.title",{defaultMessage:"Credentials"});let ApiTokenTypes;(function(ApiTokenTypes){ApiTokenTypes["Admin"]="admin";ApiTokenTypes["Private"]="private";ApiTokenTypes["Search"]="search"})(ApiTokenTypes||(ApiTokenTypes={}));const CREATE_MESSAGE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.created",{defaultMessage:"Successfully created key."});const UPDATE_MESSAGE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.update",{defaultMessage:"Successfully updated API Key."});const DELETE_MESSAGE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.deleted",{defaultMessage:"Successfully deleted key."});const SEARCH_DISPLAY=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.permissions.display.search",{defaultMessage:"search"});const ALL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.permissions.display.all",{defaultMessage:"all"});const READ_WRITE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.permissions.display.readwrite",{defaultMessage:"read/write"});const READ_ONLY=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.permissions.display.readonly",{defaultMessage:"read-only"});const WRITE_ONLY=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.permissions.display.writeonly",{defaultMessage:"write-only"});const TOKEN_TYPE_DESCRIPTION={[ApiTokenTypes.Search]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.search.description",{defaultMessage:"Public Search Keys are used for search endpoints only."}),[ApiTokenTypes.Private]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.private.description",{defaultMessage:"Private API Keys are used for read and/or write access on one or more Engines."}),[ApiTokenTypes.Admin]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.admin.description",{defaultMessage:"Private Admin Keys are used to interact with the Credentials API."})};const TOKEN_TYPE_DISPLAY_NAMES={[ApiTokenTypes.Search]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.search.name",{defaultMessage:"Public Search Key"}),[ApiTokenTypes.Private]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.private.name",{defaultMessage:"Private API Key"}),[ApiTokenTypes.Admin]:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.tokens.admin.name",{defaultMessage:"Private Admin Key"})};const TOKEN_TYPE_INFO=[{value:ApiTokenTypes.Search,text:TOKEN_TYPE_DISPLAY_NAMES[ApiTokenTypes.Search]},{value:ApiTokenTypes.Private,text:TOKEN_TYPE_DISPLAY_NAMES[ApiTokenTypes.Private]},{value:ApiTokenTypes.Admin,text:TOKEN_TYPE_DISPLAY_NAMES[ApiTokenTypes.Admin]}];const FLYOUT_ARIA_LABEL_ID="credentialsFlyoutTitle";const DOCS_HREF="".concat(DOCS_PREFIX,"/authentication.html");function credentials_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function credentials_logic_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){credentials_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){credentials_logic_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function credentials_logic_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function credentials_logic_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){credentials_logic_ownKeys(Object(source),true).forEach((function(key){credentials_logic_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{credentials_logic_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function credentials_logic_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const defaultApiToken={name:"",type:ApiTokenTypes.Private,read:true,write:true,access_all_engines:true};const CredentialsLogic=Object(index_cjs["kea"])({path:["enterprise_search","app_search","credentials_logic"],actions:()=>({addEngineName:engineName=>engineName,onApiKeyDelete:tokenName=>tokenName,onApiTokenCreateSuccess:apiToken=>apiToken,onApiTokenError:formErrors=>formErrors,onApiTokenUpdateSuccess:apiToken=>apiToken,removeEngineName:engineName=>engineName,setAccessAllEngines:accessAll=>accessAll,setCredentialsData:(meta,apiTokens)=>({meta:meta,apiTokens:apiTokens}),setCredentialsDetails:details=>details,setNameInputBlurred:nameInputBlurred=>nameInputBlurred,setTokenReadWrite:({name:name,checked:checked})=>({name:name,checked:checked}),setTokenName:name=>name,setTokenType:tokenType=>tokenType,showCredentialsForm:(apiToken=credentials_logic_objectSpread({},defaultApiToken))=>apiToken,hideCredentialsForm:false,resetCredentials:false,initializeCredentialsData:true,fetchCredentials:page=>page,fetchDetails:true,deleteApiKey:tokenName=>tokenName,onApiTokenChange:()=>null,onEngineSelect:engineName=>engineName}),reducers:()=>({apiTokens:[[],{setCredentialsData:(_,{apiTokens:apiTokens})=>apiTokens,onApiTokenCreateSuccess:(apiTokens,apiToken)=>[...apiTokens,apiToken],onApiTokenUpdateSuccess:(apiTokens,apiToken)=>[...apiTokens.filter(token=>token.name!==apiToken.name),apiToken],onApiKeyDelete:(apiTokens,tokenName)=>apiTokens.filter(token=>token.name!==tokenName)}],meta:[{},{setCredentialsData:(_,{meta:meta})=>meta}],isCredentialsDetailsComplete:[false,{setCredentialsDetails:()=>true,resetCredentials:()=>false}],isCredentialsDataComplete:[false,{setCredentialsData:()=>true,resetCredentials:()=>false}],engines:[[],{setCredentialsDetails:(_,{engines:engines})=>engines}],nameInputBlurred:[false,{setNameInputBlurred:(_,nameInputBlurred)=>nameInputBlurred}],activeApiToken:[defaultApiToken,{addEngineName:(activeApiToken,engineName)=>credentials_logic_objectSpread(credentials_logic_objectSpread({},activeApiToken),{},{engines:[...activeApiToken.engines||[],engineName]}),removeEngineName:(activeApiToken,engineName)=>credentials_logic_objectSpread(credentials_logic_objectSpread({},activeApiToken),{},{engines:(activeApiToken.engines||[]).filter(name=>name!==engineName)}),setAccessAllEngines:(activeApiToken,accessAll)=>credentials_logic_objectSpread(credentials_logic_objectSpread({},activeApiToken),{},{access_all_engines:accessAll,engines:accessAll?[]:activeApiToken.engines}),onApiTokenCreateSuccess:()=>defaultApiToken,onApiTokenUpdateSuccess:()=>defaultApiToken,setTokenName:(activeApiToken,name)=>credentials_logic_objectSpread(credentials_logic_objectSpread({},activeApiToken),{},{name:formatApiName(name)}),setTokenReadWrite:(activeApiToken,{name:name,checked:checked})=>credentials_logic_objectSpread(credentials_logic_objectSpread({},activeApiToken),{},{[name]:checked}),setTokenType:(activeApiToken,tokenType)=>credentials_logic_objectSpread(credentials_logic_objectSpread({},activeApiToken),{},{access_all_engines:tokenType===ApiTokenTypes.Admin?false:activeApiToken.access_all_engines,engines:tokenType===ApiTokenTypes.Admin?[]:activeApiToken.engines,write:tokenType===ApiTokenTypes.Private,read:tokenType===ApiTokenTypes.Private,type:tokenType}),showCredentialsForm:(_,activeApiToken)=>activeApiToken}],activeApiTokenRawName:["",{setTokenName:(_,activeApiTokenRawName)=>activeApiTokenRawName,showCredentialsForm:(_,activeApiToken)=>activeApiToken.name,hideCredentialsForm:()=>"",onApiTokenCreateSuccess:()=>"",onApiTokenUpdateSuccess:()=>""}],shouldShowCredentialsForm:[false,{showCredentialsForm:()=>true,hideCredentialsForm:()=>false,onApiTokenCreateSuccess:()=>false,onApiTokenUpdateSuccess:()=>false}],formErrors:[[],{onApiTokenError:(_,formErrors)=>formErrors,onApiTokenCreateSuccess:()=>[],showCredentialsForm:()=>[],resetCredentials:()=>[]}]}),selectors:({selectors:_selectors})=>({fullEngineAccessChecked:[()=>[AppLogic.selectors.myRole,_selectors.activeApiToken],(myRole,activeApiToken)=>!!(myRole.canAccessAllEngines&&activeApiToken.access_all_engines)],dataLoading:[()=>[_selectors.isCredentialsDetailsComplete,_selectors.isCredentialsDataComplete],(isCredentialsDetailsComplete,isCredentialsDataComplete)=>isCredentialsDetailsComplete===false||isCredentialsDataComplete===false],activeApiTokenExists:[()=>[_selectors.activeApiToken],activeApiToken=>!!activeApiToken.id]}),listeners:({actions:actions,values:values})=>({showCredentialsForm:()=>{flash_messages["b"].actions.clearFlashMessages()},initializeCredentialsData:()=>{actions.fetchCredentials();actions.fetchDetails()},fetchCredentials:function(){var _fetchCredentials=credentials_logic_asyncToGenerator(regeneratorRuntime.mark((function _callee(page=1){var http,query,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;http=shared_http["a"].values.http;query={"page[current]":page};_context.next=5;return http.get("/api/app_search/credentials",{query:query});case 5:response=_context.sent;actions.setCredentialsData(response.meta,response.results);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](0);Object(flash_messages["c"])(_context.t0);case 12:case"end":return _context.stop()}}),_callee,null,[[0,9]])})));function fetchCredentials(){return _fetchCredentials.apply(this,arguments)}return fetchCredentials}(),fetchDetails:function(){var _fetchDetails=credentials_logic_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var http,response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;http=shared_http["a"].values.http;_context2.next=4;return http.get("/api/app_search/credentials/details");case 4:response=_context2.sent;actions.setCredentialsDetails(response);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](0);Object(flash_messages["c"])(_context2.t0);case 11:case"end":return _context2.stop()}}),_callee2,null,[[0,8]])})));function fetchDetails(){return _fetchDetails.apply(this,arguments)}return fetchDetails}(),deleteApiKey:function(){var _deleteApiKey=credentials_logic_asyncToGenerator(regeneratorRuntime.mark((function _callee3(tokenName){var http;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;http=shared_http["a"].values.http;_context3.next=4;return http.delete("/api/app_search/credentials/".concat(tokenName));case 4:actions.onApiKeyDelete(tokenName);Object(flash_messages["h"])(DELETE_MESSAGE);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3["catch"](0);Object(flash_messages["c"])(_context3.t0);case 11:case"end":return _context3.stop()}}),_callee3,null,[[0,8]])})));function deleteApiKey(_x){return _deleteApiKey.apply(this,arguments)}return deleteApiKey}(),onApiTokenChange:function(){var _onApiTokenChange=credentials_logic_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var _values$activeApiToke,id,name,engines,type,read,write,data,http,body,response;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_values$activeApiToke=values.activeApiToken,id=_values$activeApiToke.id,name=_values$activeApiToke.name,engines=_values$activeApiToke.engines,type=_values$activeApiToke.type,read=_values$activeApiToke.read,write=_values$activeApiToke.write;data={name:name,type:type};if(type===ApiTokenTypes.Private){data.read=read;data.write=write}if(type!==ApiTokenTypes.Admin){data.access_all_engines=values.fullEngineAccessChecked;data.engines=engines}_context4.prev=4;http=shared_http["a"].values.http;body=JSON.stringify(data);if(!id){_context4.next=15;break}_context4.next=10;return http.put("/api/app_search/credentials/".concat(name),{body:body});case 10:response=_context4.sent;actions.onApiTokenUpdateSuccess(response);Object(flash_messages["h"])(UPDATE_MESSAGE);_context4.next=20;break;case 15:_context4.next=17;return http.post("/api/app_search/credentials",{body:body});case 17:response=_context4.sent;actions.onApiTokenCreateSuccess(response);Object(flash_messages["h"])(CREATE_MESSAGE);case 20:_context4.next=25;break;case 22:_context4.prev=22;_context4.t0=_context4["catch"](4);Object(flash_messages["c"])(_context4.t0);case 25:case"end":return _context4.stop()}}),_callee4,null,[[4,22]])})));function onApiTokenChange(){return _onApiTokenChange.apply(this,arguments)}return onApiTokenChange}(),onEngineSelect:engineName=>{var _values$activeApiToke2,_values$activeApiToke3;if((_values$activeApiToke2=values.activeApiToken)===null||_values$activeApiToke2===void 0?void 0:(_values$activeApiToke3=_values$activeApiToke2.engines)===null||_values$activeApiToke3===void 0?void 0:_values$activeApiToke3.includes(engineName)){actions.removeEngineName(engineName)}else{actions.addEngineName(engineName)}}})});var external_url=__webpack_require__(25);const Key=({copy:copy,toggleIsHidden:toggleIsHidden,isHidden:isHidden,text:text})=>{const hideIcon=isHidden?"eye":"eyeClosed";const hideIconLabel=isHidden?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.showApiKey",{defaultMessage:"Show API Key"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.hideApiKey",{defaultMessage:"Hide API Key"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:copy,iconType:"copyClipboard","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.copyApiKey",{defaultMessage:"Copy API Key to clipboard"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:toggleIsHidden,iconType:hideIcon,"aria-label":hideIconLabel,"aria-pressed":!isHidden}),text)};function hidden_text_slicedToArray(arr,i){return hidden_text_arrayWithHoles(arr)||hidden_text_iterableToArrayLimit(arr,i)||hidden_text_unsupportedIterableToArray(arr,i)||hidden_text_nonIterableRest()}function hidden_text_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hidden_text_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return hidden_text_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hidden_text_arrayLikeToArray(o,minLen)}function hidden_text_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function hidden_text_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function hidden_text_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const HiddenText=({text:text,children:children})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(true),_useState2=hidden_text_slicedToArray(_useState,2),isHidden=_useState2[0],toggleIsHidden=_useState2[1];const hiddenLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.hiddenText",{defaultMessage:"Hidden text"});const hiddenText=isHidden?external_kbnSharedDeps_React_default.a.createElement("span",{"aria-label":hiddenLabel},text.replace(/./g,"•")):text;return children({hiddenText:hiddenText,isHidden:isHidden,toggle:()=>toggleIsHidden(!isHidden)})};const apiTokenSort=(apiTokenA,apiTokenB)=>{if(!apiTokenA.id){return-1}if(!apiTokenB.id){return 1}return apiTokenA.id-apiTokenB.id};const getEnginesDisplayText=apiToken=>{const type=apiToken.type,accessAll=apiToken.access_all_engines,_apiToken$engines=apiToken.engines,engines=_apiToken$engines===void 0?[]:_apiToken$engines;if(type===ApiTokenTypes.Admin){return"--"}if(accessAll){return ALL}return external_kbnSharedDeps_React_default.a.createElement("ul",null,engines.map(engine=>external_kbnSharedDeps_React_default.a.createElement("li",{key:engine},engine)))};const getModeDisplayText=apiToken=>{const _apiToken$read=apiToken.read,read=_apiToken$read===void 0?false:_apiToken$read,_apiToken$write=apiToken.write,write=_apiToken$write===void 0?false:_apiToken$write,type=apiToken.type;switch(type){case ApiTokenTypes.Admin:return"--";case ApiTokenTypes.Search:return SEARCH_DISPLAY;default:if(read&&write){return READ_WRITE}return write?WRITE_ONLY:READ_ONLY}};const CredentialsList=()=>{const _useActions=Object(index_cjs["useActions"])(CredentialsLogic),deleteApiKey=_useActions.deleteApiKey,fetchCredentials=_useActions.fetchCredentials,showCredentialsForm=_useActions.showCredentialsForm;const _useValues=Object(index_cjs["useValues"])(CredentialsLogic),apiTokens=_useValues.apiTokens,meta=_useValues.meta;const items=Object(external_kbnSharedDeps_React_["useMemo"])(()=>apiTokens.slice().sort(apiTokenSort),[apiTokens]);const columns=[{name:"Name",width:"12%",render:token=>token.name},{name:"Type",width:"15%",render:token=>TOKEN_TYPE_DISPLAY_NAMES[token.type]},{name:"Key",width:"36%",render:token=>{const key=token.key;if(!key)return null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCopy"],{textToCopy:key,afterMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.copied",{defaultMessage:"Copied"})},copy=>external_kbnSharedDeps_React_default.a.createElement(HiddenText,{text:key},({hiddenText:hiddenText,isHidden:isHidden,toggle:toggle})=>external_kbnSharedDeps_React_default.a.createElement(Key,{copy:copy,toggleIsHidden:toggle,isHidden:isHidden,text:hiddenText})))}},{name:"Modes",width:"10%",render:token=>getModeDisplayText(token)},{name:"Engines",width:"18%",render:token=>getEnginesDisplayText(token)},{actions:[{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.actions.edit",{defaultMessage:"Edit"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.editKey",{defaultMessage:"Edit API Key"}),type:"icon",icon:"pencil",color:"primary",onClick:token=>showCredentialsForm(token)},{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.actions.delete",{defaultMessage:"Delete"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.deleteKey",{defaultMessage:"Delete API Key"}),type:"icon",icon:"trash",color:"danger",onClick:token=>deleteApiKey(token.name)}]}];const pagination={pageIndex:meta.page?meta.page.current-1:0,pageSize:meta.page?meta.page.size:0,totalItemCount:meta.page?meta.page.total_results:0,hidePerPageOptions:true};const onTableChange=({page:page})=>{const current=page.index;fetchCredentials(current+1)};return items.length<1?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"editorStrike",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.empty.title",{defaultMessage:"No API Keys have been created yet."})),body:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.empty.body",{defaultMessage:'Click the "Create a key" button to make your first one.'})}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{columns:columns,items:items,pagination:pagination,onChange:onTableChange})};const CredentialsFlyoutHeader=()=>{const _useValues=Object(index_cjs["useValues"])(CredentialsLogic),activeApiToken=_useValues.activeApiToken;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",{id:FLYOUT_ARIA_LABEL_ID},activeApiToken.id?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.flyout.updateTitle",{defaultMessage:"Update {tokenName}",values:{tokenName:activeApiToken.name}}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.flyout.createTitle",{defaultMessage:"Create a new key"}))))};const FormKeyName=()=>{const _useActions=Object(index_cjs["useActions"])(CredentialsLogic),setNameInputBlurred=_useActions.setNameInputBlurred,setTokenName=_useActions.setTokenName;const _useValues=Object(index_cjs["useValues"])(CredentialsLogic),name=_useValues.activeApiToken.name,rawName=_useValues.activeApiTokenRawName,activeApiTokenExists=_useValues.activeApiTokenExists;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formName.label",{defaultMessage:"Key name"}),helpText:!!name&&name!==rawName?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formName.helpText",{defaultMessage:"Your key will be named: {name}",values:{name:name}}):"",fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{name:"raw_name",id:"raw_name",placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formName.placeholder",{defaultMessage:"i.e., my-engine-key"}),"data-test-subj":"APIKeyField",value:rawName,onChange:e=>setTokenName(e.target.value),onBlur:()=>setNameInputBlurred(true),autoComplete:"off",maxLength:64,disabled:activeApiTokenExists,required:true,fullWidth:true,autoFocus:true}))};const FormKeyType=()=>{const _useValues=Object(index_cjs["useValues"])(AppLogic),myRole=_useValues.myRole;const _useActions=Object(index_cjs["useActions"])(CredentialsLogic),setTokenType=_useActions.setTokenType;const _useValues2=Object(index_cjs["useValues"])(CredentialsLogic),activeApiToken=_useValues2.activeApiToken,activeApiTokenExists=_useValues2.activeApiTokenExists;const tokenDescription=TOKEN_TYPE_DESCRIPTION[activeApiToken.type];const tokenOptions=TOKEN_TYPE_INFO.filter(typeInfo=>{var _myRole$credentialTyp;return myRole===null||myRole===void 0?void 0:(_myRole$credentialTyp=myRole.credentialTypes)===null||_myRole$credentialTyp===void 0?void 0:_myRole$credentialTyp.includes(typeInfo.value)});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formType.label",{defaultMessage:"Key type"}),fullWidth:true,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,tokenDescription)," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:DOCS_HREF},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.documentationLink1",{defaultMessage:"Visit the documentation"}))," ",external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.documentationLink2",{defaultMessage:"to learn more about keys."})))},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelect"],{name:"token_type",options:tokenOptions,value:activeApiToken.type,onChange:e=>setTokenType(e.target.value),placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formType.placeholder",{defaultMessage:"Select a key type"}),disabled:activeApiTokenExists,required:true,fullWidth:true}))};const FormKeyReadWriteAccess=()=>{const _useActions=Object(index_cjs["useActions"])(CredentialsLogic),setTokenReadWrite=_useActions.setTokenReadWrite;const _useValues=Object(index_cjs["useValues"])(CredentialsLogic),activeApiToken=_useValues.activeApiToken;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formReadWrite.label",{defaultMessage:"Read and Write Access Levels"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formReadWrite.helpText",{defaultMessage:"Only applies to Private API Keys."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{name:"read",id:"read",checked:activeApiToken.read,onChange:e=>setTokenReadWrite(e.target),label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formReadWrite.readLabel",{defaultMessage:"Read Access"})}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{name:"write",id:"write",checked:activeApiToken.write,onChange:e=>setTokenReadWrite(e.target),label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formReadWrite.writeLabel",{defaultMessage:"Write Access"})})))};const FormKeyEngineAccess=()=>{const _useValues=Object(index_cjs["useValues"])(AppLogic),myRole=_useValues.myRole;const _useActions=Object(index_cjs["useActions"])(CredentialsLogic),setAccessAllEngines=_useActions.setAccessAllEngines;const _useValues2=Object(index_cjs["useValues"])(CredentialsLogic),fullEngineAccessChecked=_useValues2.fullEngineAccessChecked;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.label",{defaultMessage:"Engine Access Control"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRadio"],{name:"engine_access",id:"all_engines",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.fullAccess.label",{defaultMessage:"Full Engine Access"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.fullAccess.helpText",{defaultMessage:"Access to all current and future Engines."}))),hidden:!myRole.canAccessAllEngines,checked:fullEngineAccessChecked,value:fullEngineAccessChecked.toString(),onChange:()=>setAccessAllEngines(true)}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiRadio"],{name:"engine_access",id:"specific_engines",label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xxs"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.limitedAccess.label",{defaultMessage:"Limited Engine Access"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.limitedAccess.helpText",{defaultMessage:"Limit key access to specific Engines."}))),checked:!fullEngineAccessChecked,value:(!fullEngineAccessChecked).toString(),onChange:()=>setAccessAllEngines(false)}))),!fullEngineAccessChecked&&external_kbnSharedDeps_React_default.a.createElement(EngineSelection,null))};const EngineSelection=()=>{const _useActions2=Object(index_cjs["useActions"])(CredentialsLogic),onEngineSelect=_useActions2.onEngineSelect;const _useValues3=Object(index_cjs["useValues"])(CredentialsLogic),activeApiToken=_useValues3.activeApiToken,engines=_useValues3.engines;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.engineAccess.label",{defaultMessage:"Select Engines"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.engineAccess.helpText",{defaultMessage:"Engines which the key can access:"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),engines.map(engine=>{var _activeApiToken$engin;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCheckbox"],{key:engine.name,name:engine.name,id:"engine_".concat(engine.name),label:engine.name,checked:!!(activeApiToken===null||activeApiToken===void 0?void 0:(_activeApiToken$engin=activeApiToken.engines)===null||_activeApiToken$engin===void 0?void 0:_activeApiToken$engin.includes(engine.name)),onChange:()=>onEngineSelect(engine.name)})})))};const FormKeyUpdateWarning=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.updateWarningTitle",{defaultMessage:"Proceed with caution!"}),color:"warning",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.updateWarning",{defaultMessage:"Existing API keys may be shared between users. Changing permissions for this key will affect all users who have access to this key."}))));const CredentialsFlyoutBody=()=>{const _useActions=Object(index_cjs["useActions"])(CredentialsLogic),onApiTokenChange=_useActions.onApiTokenChange;const _useValues=Object(index_cjs["useValues"])(CredentialsLogic),activeApiToken=_useValues.activeApiToken,activeApiTokenExists=_useValues.activeApiTokenExists;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(flash_messages["a"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{onSubmit:e=>{e.preventDefault();onApiTokenChange()},component:"form"},external_kbnSharedDeps_React_default.a.createElement(FormKeyName,null),external_kbnSharedDeps_React_default.a.createElement(FormKeyType,null),activeApiToken.type===ApiTokenTypes.Private&&external_kbnSharedDeps_React_default.a.createElement(FormKeyReadWriteAccess,null),activeApiToken.type!==ApiTokenTypes.Admin&&external_kbnSharedDeps_React_default.a.createElement(FormKeyEngineAccess,null)),activeApiTokenExists&&external_kbnSharedDeps_React_default.a.createElement(FormKeyUpdateWarning,null))};const CredentialsFlyoutFooter=()=>{const _useActions=Object(index_cjs["useActions"])(CredentialsLogic),hideCredentialsForm=_useActions.hideCredentialsForm,onApiTokenChange=_useActions.onApiTokenChange;const _useValues=Object(index_cjs["useValues"])(CredentialsLogic),activeApiTokenExists=_useValues.activeApiTokenExists;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"cross",onClick:hideCredentialsForm},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.flyout.closeText",{defaultMessage:"Close"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:onApiTokenChange,fill:true,color:"secondary",iconType:"check","data-test-subj":"APIKeyActionButton"},activeApiTokenExists?external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.flyout.updateText",{defaultMessage:"Update"}):external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.flyout.saveText",{defaultMessage:"Save"})))))};const CredentialsFlyout=()=>{const _useActions=Object(index_cjs["useActions"])(CredentialsLogic),hideCredentialsForm=_useActions.hideCredentialsForm;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPortal"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:hideCredentialsForm,hideCloseButton:true,ownFocus:true,"aria-labelledby":FLYOUT_ARIA_LABEL_ID,size:"s"},external_kbnSharedDeps_React_default.a.createElement(CredentialsFlyoutHeader,null),external_kbnSharedDeps_React_default.a.createElement(CredentialsFlyoutBody,null),external_kbnSharedDeps_React_default.a.createElement(CredentialsFlyoutFooter,null)))};const Credentials=()=>{const _useActions=Object(index_cjs["useActions"])(CredentialsLogic),initializeCredentialsData=_useActions.initializeCredentialsData,resetCredentials=_useActions.resetCredentials,showCredentialsForm=_useActions.showCredentialsForm;const _useValues=Object(index_cjs["useValues"])(CredentialsLogic),dataLoading=_useValues.dataLoading,shouldShowCredentialsForm=_useValues.shouldShowCredentialsForm;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{initializeCredentialsData();return()=>{resetCredentials()}},[]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(kibana_chrome["a"],{trail:[CREDENTIALS_TITLE]}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,CREDENTIALS_TITLE)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentBody"],null,shouldShowCredentialsForm&&external_kbnSharedDeps_React_default.a.createElement(CredentialsFlyout,null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{className:"eui-textCenter"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.apiEndpoint",{defaultMessage:"Endpoint"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCopy"],{textToCopy:external_url["a"].enterpriseSearchUrl,afterMessage:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.copied",{defaultMessage:"Copied"})},copy=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:copy,iconType:"copyClipboard","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.copyApiEndpoint",{defaultMessage:"Copy API Endpoint to clipboard."})}),external_url["a"].enterpriseSearchUrl))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xxl"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],{responsive:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.apiKeys",{defaultMessage:"API Keys"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,!dataLoading&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"primary","data-test-subj":"CreateAPIKeyButton",fill:true,onClick:()=>showCredentialsForm()},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.credentials.createKey",{defaultMessage:"Create a key"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(flash_messages["a"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,!!dataLoading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingContent"],{lines:3}):external_kbnSharedDeps_React_default.a.createElement(CredentialsList,null))))};const ROLE_MAPPINGS_TITLE=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.enterpriseSearch.appSearch.roleMappings.title",{defaultMessage:"Role Mappings"});const AppSearch=props=>{const _useValues=Object(index_cjs["useValues"])(kibana["a"]),config=_useValues.config;return!config.host?external_kbnSharedDeps_React_default.a.createElement(AppSearchUnconfigured,null):external_kbnSharedDeps_React_default.a.createElement(AppSearchConfigured,props)};const AppSearchUnconfigured=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:SETUP_GUIDE_PATH},external_kbnSharedDeps_React_default.a.createElement(SetupGuide,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Redirect"],{to:SETUP_GUIDE_PATH})));const AppSearchConfigured=props=>{const _useActions=Object(index_cjs["useActions"])(AppLogic),initializeAppData=_useActions.initializeAppData;const _useValues2=Object(index_cjs["useValues"])(AppLogic),hasInitialized=_useValues2.hasInitialized;const _useValues3=Object(index_cjs["useValues"])(shared_http["a"]),errorConnecting=_useValues3.errorConnecting,readOnlyMode=_useValues3.readOnlyMode;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!hasInitialized)initializeAppData(props)},[hasInitialized]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:SETUP_GUIDE_PATH},external_kbnSharedDeps_React_default.a.createElement(SetupGuide,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:ENGINE_PATH},external_kbnSharedDeps_React_default.a.createElement(layout["a"],{navigation:external_kbnSharedDeps_React_default.a.createElement(AppSearchNav,{subNav:external_kbnSharedDeps_React_default.a.createElement(EngineNav,null)}),readOnlyMode:readOnlyMode},external_kbnSharedDeps_React_default.a.createElement(EngineRouter,null))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],null,external_kbnSharedDeps_React_default.a.createElement(layout["a"],{navigation:external_kbnSharedDeps_React_default.a.createElement(AppSearchNav,null),readOnlyMode:readOnlyMode},errorConnecting?external_kbnSharedDeps_React_default.a.createElement(ErrorConnecting,null):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:ROOT_PATH},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Redirect"],{to:ENGINES_PATH})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:ENGINES_PATH},external_kbnSharedDeps_React_default.a.createElement(EnginesOverview,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:SETTINGS_PATH},external_kbnSharedDeps_React_default.a.createElement(Settings,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{exact:true,path:CREDENTIALS_PATH},external_kbnSharedDeps_React_default.a.createElement(Credentials,null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],null,external_kbnSharedDeps_React_default.a.createElement(not_found["a"],{product:constants["a"]}))))))};const AppSearchNav=({subNav:subNav})=>{const _useValues4=Object(index_cjs["useValues"])(AppLogic),_useValues4$myRole=_useValues4.myRole,canViewSettings=_useValues4$myRole.canViewSettings,canViewAccountCredentials=_useValues4$myRole.canViewAccountCredentials,canViewRoleMappings=_useValues4$myRole.canViewRoleMappings;return external_kbnSharedDeps_React_default.a.createElement(layout["b"],{product:constants["a"]},external_kbnSharedDeps_React_default.a.createElement(layout["d"],{to:ENGINES_PATH,subNav:subNav,isRoot:true},ENGINES_TITLE),canViewSettings&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{to:SETTINGS_PATH},SETTINGS_TITLE),canViewAccountCredentials&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{to:CREDENTIALS_PATH},CREDENTIALS_TITLE),canViewRoleMappings&&external_kbnSharedDeps_React_default.a.createElement(layout["d"],{isExternal:true,to:Object(enterprise_search_url["b"])(ROLE_MAPPINGS_PATH)},ROLE_MAPPINGS_TITLE))}}}]);