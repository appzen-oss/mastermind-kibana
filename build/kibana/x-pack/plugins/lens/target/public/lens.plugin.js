/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={1:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+"lens.chunk."+chunkId+".js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["lens_bundle_jsonpfunction"]=window["lens_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=17)})([function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,__webpack_exports__,__webpack_require__){"use strict";var _api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);var _api__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_api__WEBPACK_IMPORTED_MODULE_0__);if(__webpack_require__.o(_api__WEBPACK_IMPORTED_MODULE_0__,"BASE_API_URL"))__webpack_require__.d(__webpack_exports__,"BASE_API_URL",(function(){return _api__WEBPACK_IMPORTED_MODULE_0__["BASE_API_URL"]}));if(__webpack_require__.o(_api__WEBPACK_IMPORTED_MODULE_0__,"DOC_TYPE"))__webpack_require__.d(__webpack_exports__,"DOC_TYPE",(function(){return _api__WEBPACK_IMPORTED_MODULE_0__["DOC_TYPE"]}));if(__webpack_require__.o(_api__WEBPACK_IMPORTED_MODULE_0__,"LENS_EDIT_BY_VALUE"))__webpack_require__.d(__webpack_exports__,"LENS_EDIT_BY_VALUE",(function(){return _api__WEBPACK_IMPORTED_MODULE_0__["LENS_EDIT_BY_VALUE"]}));if(__webpack_require__.o(_api__WEBPACK_IMPORTED_MODULE_0__,"LENS_EMBEDDABLE_TYPE"))__webpack_require__.d(__webpack_exports__,"LENS_EMBEDDABLE_TYPE",(function(){return _api__WEBPACK_IMPORTED_MODULE_0__["LENS_EMBEDDABLE_TYPE"]}));if(__webpack_require__.o(_api__WEBPACK_IMPORTED_MODULE_0__,"NOT_INTERNATIONALIZED_PRODUCT_NAME"))__webpack_require__.d(__webpack_exports__,"NOT_INTERNATIONALIZED_PRODUCT_NAME",(function(){return _api__WEBPACK_IMPORTED_MODULE_0__["NOT_INTERNATIONALIZED_PRODUCT_NAME"]}));if(__webpack_require__.o(_api__WEBPACK_IMPORTED_MODULE_0__,"getBasePath"))__webpack_require__.d(__webpack_exports__,"getBasePath",(function(){return _api__WEBPACK_IMPORTED_MODULE_0__["getBasePath"]}));if(__webpack_require__.o(_api__WEBPACK_IMPORTED_MODULE_0__,"getEditPath"))__webpack_require__.d(__webpack_exports__,"getEditPath",(function(){return _api__WEBPACK_IMPORTED_MODULE_0__["getEditPath"]}));if(__webpack_require__.o(_api__WEBPACK_IMPORTED_MODULE_0__,"getFullPath"))__webpack_require__.d(__webpack_exports__,"getFullPath",(function(){return _api__WEBPACK_IMPORTED_MODULE_0__["getFullPath"]}));var _constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6);__webpack_require__.d(__webpack_exports__,"BASE_API_URL",(function(){return _constants__WEBPACK_IMPORTED_MODULE_1__["BASE_API_URL"]}));__webpack_require__.d(__webpack_exports__,"DOC_TYPE",(function(){return _constants__WEBPACK_IMPORTED_MODULE_1__["DOC_TYPE"]}));__webpack_require__.d(__webpack_exports__,"LENS_EDIT_BY_VALUE",(function(){return _constants__WEBPACK_IMPORTED_MODULE_1__["LENS_EDIT_BY_VALUE"]}));__webpack_require__.d(__webpack_exports__,"LENS_EMBEDDABLE_TYPE",(function(){return _constants__WEBPACK_IMPORTED_MODULE_1__["LENS_EMBEDDABLE_TYPE"]}));__webpack_require__.d(__webpack_exports__,"NOT_INTERNATIONALIZED_PRODUCT_NAME",(function(){return _constants__WEBPACK_IMPORTED_MODULE_1__["NOT_INTERNATIONALIZED_PRODUCT_NAME"]}));__webpack_require__.d(__webpack_exports__,"getBasePath",(function(){return _constants__WEBPACK_IMPORTED_MODULE_1__["getBasePath"]}));__webpack_require__.d(__webpack_exports__,"getEditPath",(function(){return _constants__WEBPACK_IMPORTED_MODULE_1__["getEditPath"]}));__webpack_require__.d(__webpack_exports__,"getFullPath",(function(){return _constants__WEBPACK_IMPORTED_MODULE_1__["getFullPath"]}));var _types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13);var _types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_types__WEBPACK_IMPORTED_MODULE_2__)},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("entry/core/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"PLUGIN_ID",(function(){return PLUGIN_ID}));__webpack_require__.d(__webpack_exports__,"LENS_EMBEDDABLE_TYPE",(function(){return LENS_EMBEDDABLE_TYPE}));__webpack_require__.d(__webpack_exports__,"DOC_TYPE",(function(){return DOC_TYPE}));__webpack_require__.d(__webpack_exports__,"NOT_INTERNATIONALIZED_PRODUCT_NAME",(function(){return NOT_INTERNATIONALIZED_PRODUCT_NAME}));__webpack_require__.d(__webpack_exports__,"BASE_API_URL",(function(){return BASE_API_URL}));__webpack_require__.d(__webpack_exports__,"LENS_EDIT_BY_VALUE",(function(){return LENS_EDIT_BY_VALUE}));__webpack_require__.d(__webpack_exports__,"getBasePath",(function(){return getBasePath}));__webpack_require__.d(__webpack_exports__,"getEditPath",(function(){return getEditPath}));__webpack_require__.d(__webpack_exports__,"getFullPath",(function(){return getFullPath}));const PLUGIN_ID="lens";const LENS_EMBEDDABLE_TYPE="lens";const DOC_TYPE="lens";const NOT_INTERNATIONALIZED_PRODUCT_NAME="Lens Visualizations";const BASE_API_URL="/api/lens";const LENS_EDIT_BY_VALUE="edit_by_value";function getBasePath(){return"#/"}function getEditPath(id){return id?"#/edit/".concat(encodeURIComponent(id)):"#/".concat(LENS_EDIT_BY_VALUE)}function getFullPath(id){return"/app/".concat(PLUGIN_ID).concat(id?getEditPath(id):getBasePath())}},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isDraggedOperation}));__webpack_require__.d(__webpack_exports__,"c",(function(){return isLensFilterEvent}));__webpack_require__.d(__webpack_exports__,"b",(function(){return isLensBrushEvent}));function isDraggedOperation(operationCandidate){return typeof operationCandidate==="object"&&operationCandidate!==null&&"columnId"in operationCandidate}function isLensFilterEvent(event){return event.name==="filter"}function isLensBrushEvent(event){return event.name==="brush"}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){},function(module,exports){},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/lensOss/common/constants");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";module.exports=function(){function _min(d0,d1,d2,bx,ay){return d0<d1||d2<d1?d0>d2?d2+1:d0+1:bx===ay?d1:d1+1}return function(a,b){if(a===b){return 0}if(a.length>b.length){var tmp=a;a=b;b=tmp}var la=a.length;var lb=b.length;while(la>0&&a.charCodeAt(la-1)===b.charCodeAt(lb-1)){la--;lb--}var offset=0;while(offset<la&&a.charCodeAt(offset)===b.charCodeAt(offset)){offset++}la-=offset;lb-=offset;if(la===0||lb<3){return lb}var x=0;var y;var d0;var d1;var d2;var d3;var dd;var dy;var ay;var bx0;var bx1;var bx2;var bx3;var vector=[];for(y=0;y<la;y++){vector.push(y+1);vector.push(a.charCodeAt(offset+y))}var len=vector.length-1;for(;x<lb-3;){bx0=b.charCodeAt(offset+(d0=x));bx1=b.charCodeAt(offset+(d1=x+1));bx2=b.charCodeAt(offset+(d2=x+2));bx3=b.charCodeAt(offset+(d3=x+3));dd=x+=4;for(y=0;y<len;y+=2){dy=vector[y];ay=vector[y+1];d0=_min(dy,d0,d1,bx0,ay);d1=_min(d0,d1,d2,bx1,ay);d2=_min(d1,d2,d3,bx2,ay);dd=_min(d2,d3,dd,bx3,ay);vector[y]=dd;d3=d2;d2=d1;d1=d0;d0=dy}}for(;x<lb;){bx0=b.charCodeAt(offset+(d0=x));dd=++x;for(y=0;y<len;y+=2){dy=vector[y];vector[y]=dd=_min(dy,d0,dd,bx0,vector[y+1]);d0=dy}}return dd}}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_lens_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(18);var _node_modules_val_loader_dist_cjs_js_key_lens_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_lens_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/lens/public",__webpack_require__,19);__kbnBundles__.define("plugin/lens/common/constants",__webpack_require__,6)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["lens"]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"isDraggedOperation",(function(){return public_types["a"]}));__webpack_require__.d(__webpack_exports__,"isLensFilterEvent",(function(){return public_types["c"]}));__webpack_require__.d(__webpack_exports__,"isLensBrushEvent",(function(){return public_types["b"]}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_React_=__webpack_require__(4);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(5);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(8);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var public_=__webpack_require__(9);const toAbsoluteDates=public_["search"].aggs.toAbsoluteDates;const mergeTables={name:"lens_merge_tables",type:"lens_multitable",help:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.lens.functions.mergeTables.help",{defaultMessage:"A helper to merge any number of kibana tables into a single table and expose it via inspector adapter"}),args:{layerIds:{types:["string"],help:"",multi:true},tables:{types:["datatable"],help:"",multi:true}},inputTypes:["kibana_context","null"],fn(input,{layerIds:layerIds,tables:tables},context){if(!context.inspectorAdapters){context.inspectorAdapters={}}if(!context.inspectorAdapters.tables){context.inspectorAdapters.tables={}}const resultTables={};tables.forEach((table,index)=>{resultTables[layerIds[index]]=table;context.inspectorAdapters.tables[layerIds[index]]=table});return{type:"lens_multitable",tables:resultTables,dateRange:getDateRange(input)}}};function getDateRange(value){if(!value||!value.timeRange){return}const dateRange=toAbsoluteDates(value.timeRange);if(!dateRange){return}return{fromDate:dateRange.from,toDate:dateRange.to}}var common=__webpack_require__(1);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class embeddable_factory_EmbeddableFactory{constructor(getStartServices){var _this=this;this.getStartServices=getStartServices;_defineProperty(this,"type",common["DOC_TYPE"]);_defineProperty(this,"savedObjectMetaData",{name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.lens.lensSavedObjectLabel",{defaultMessage:"Lens Visualization"}),type:common["DOC_TYPE"],getIconForSavedObject:()=>"lensApp"});_defineProperty(this,"isEditable",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$_this$getStart,capabilities;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return _this.getStartServices();case 2:_yield$_this$getStart=_context.sent;capabilities=_yield$_this$getStart.capabilities;return _context.abrupt("return",capabilities.visualize.save);case 5:case"end":return _context.stop()}}),_callee)}))));_defineProperty(this,"createFromSavedObject",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(savedObjectId,input,parent){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!input.savedObjectId){input.savedObjectId=savedObjectId}return _context2.abrupt("return",_this.create(input,parent));case 2:case"end":return _context2.stop()}}),_callee2)})));return function(_x,_x2,_x3){return _ref2.apply(this,arguments)}}())}canCreateNew(){return false}getDisplayName(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.lens.embeddableDisplayName",{defaultMessage:"lens"})}create(input,parent){var _this2=this;return _asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var _yield$_this2$getStar,timefilter,expressionRenderer,documentToExpression,uiActions,coreHttp,attributeService,indexPatternService,_yield$import,Embeddable;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this2.getStartServices();case 2:_yield$_this2$getStar=_context3.sent;timefilter=_yield$_this2$getStar.timefilter;expressionRenderer=_yield$_this2$getStar.expressionRenderer;documentToExpression=_yield$_this2$getStar.documentToExpression;uiActions=_yield$_this2$getStar.uiActions;coreHttp=_yield$_this2$getStar.coreHttp;attributeService=_yield$_this2$getStar.attributeService;indexPatternService=_yield$_this2$getStar.indexPatternService;_context3.next=12;return __webpack_require__.e(0).then(__webpack_require__.bind(null,289));case 12:_yield$import=_context3.sent;Embeddable=_yield$import.Embeddable;_context3.t0=Embeddable;_context3.t1=attributeService;_context3.t2=indexPatternService;_context3.t3=timefilter;_context3.t4=expressionRenderer;_context3.next=21;return _this2.isEditable();case 21:_context3.t5=_context3.sent;_context3.t6=coreHttp.basePath;_context3.t7=uiActions===null||uiActions===void 0?void 0:uiActions.getTrigger;_context3.t8=documentToExpression;_context3.t9={attributeService:_context3.t1,indexPatternService:_context3.t2,timefilter:_context3.t3,expressionRenderer:_context3.t4,editable:_context3.t5,basePath:_context3.t6,getTrigger:_context3.t7,documentToExpression:_context3.t8};_context3.t10=input;_context3.t11=parent;return _context3.abrupt("return",new _context3.t0(_context3.t9,_context3.t10,_context3.t11));case 29:case"end":return _context3.stop()}}),_callee3)})))()}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function service_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function service_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){service_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function collectAsyncDefinitions(_x){return _collectAsyncDefinitions.apply(this,arguments)}function _collectAsyncDefinitions(){_collectAsyncDefinitions=service_asyncToGenerator(regeneratorRuntime.mark((function _callee5(definitions){var resolvedDefinitions,definitionMap;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return Promise.all(definitions.map(definition=>typeof definition==="function"?definition():definition));case 2:resolvedDefinitions=_context5.sent;definitionMap={};resolvedDefinitions.forEach(definition=>{definitionMap[definition.id]=definition});return _context5.abrupt("return",definitionMap);case 6:case"end":return _context5.stop()}}),_callee5)})));return _collectAsyncDefinitions.apply(this,arguments)}class service_EditorFrameService{constructor(){service_defineProperty(this,"datasources",[]);service_defineProperty(this,"visualizations",[])}documentToExpression(doc){var _this=this;return service_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$Promise$all,_yield$Promise$all2,resolvedDatasources,resolvedVisualizations,_yield$import,persistedStateToExpression;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([collectAsyncDefinitions(_this.datasources),collectAsyncDefinitions(_this.visualizations)]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);resolvedDatasources=_yield$Promise$all2[0];resolvedVisualizations=_yield$Promise$all2[1];_context.next=8;return __webpack_require__.e(0).then(__webpack_require__.bind(null,289));case 8:_yield$import=_context.sent;persistedStateToExpression=_yield$import.persistedStateToExpression;_context.next=12;return persistedStateToExpression(resolvedDatasources,resolvedVisualizations,doc);case 12:return _context.abrupt("return",_context.sent);case 13:case"end":return _context.stop()}}),_callee)})))()}setup(core,plugins,getAttributeService){var _this2=this;plugins.expressions.registerFunction(()=>mergeTables);const getStartServices=function(){var _ref=service_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _yield$core$getStartS,_yield$core$getStartS2,coreStart,deps;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return core.getStartServices();case 2:_yield$core$getStartS=_context2.sent;_yield$core$getStartS2=_slicedToArray(_yield$core$getStartS,2);coreStart=_yield$core$getStartS2[0];deps=_yield$core$getStartS2[1];_context2.next=8;return getAttributeService();case 8:_context2.t0=_context2.sent;_context2.t1=coreStart.application.capabilities;_context2.t2=coreStart.http;_context2.t3=deps.data.query.timefilter.timefilter;_context2.t4=deps.expressions.ReactExpressionRenderer;_context2.t5=_this2.documentToExpression.bind(_this2);_context2.t6=deps.data.indexPatterns;_context2.t7=deps.uiActions;return _context2.abrupt("return",{attributeService:_context2.t0,capabilities:_context2.t1,coreHttp:_context2.t2,timefilter:_context2.t3,expressionRenderer:_context2.t4,documentToExpression:_context2.t5,indexPatternService:_context2.t6,uiActions:_context2.t7});case 17:case"end":return _context2.stop()}}),_callee2)})));return function getStartServices(){return _ref.apply(this,arguments)}}();if(plugins.embeddable){plugins.embeddable.registerEmbeddableFactory("lens",new embeddable_factory_EmbeddableFactory(getStartServices))}return{registerDatasource:datasource=>{this.datasources.push(datasource)},registerVisualization:visualization=>{this.visualizations.push(visualization)}}}start(core,plugins){var _this3=this;const createInstance=function(){var _ref2=service_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var domElement,_yield$Promise$all3,_yield$Promise$all4,resolvedDatasources,resolvedVisualizations;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Promise.all([collectAsyncDefinitions(_this3.datasources),collectAsyncDefinitions(_this3.visualizations)]);case 2:_yield$Promise$all3=_context4.sent;_yield$Promise$all4=_slicedToArray(_yield$Promise$all3,2);resolvedDatasources=_yield$Promise$all4[0];resolvedVisualizations=_yield$Promise$all4[1];return _context4.abrupt("return",{mount:function(){var _mount=service_asyncToGenerator(regeneratorRuntime.mark((function _callee3(element,{doc:doc,onError:onError,dateRange:dateRange,query:query,filters:filters,savedQuery:savedQuery,onChange:onChange,showNoDataPopover:showNoDataPopover,initialContext:initialContext}){var firstDatasourceId,firstVisualizationId,_yield$import2,EditorFrame,getActiveDatasourceIdFromDoc,palettes;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:domElement=element;firstDatasourceId=Object.keys(resolvedDatasources)[0];firstVisualizationId=Object.keys(resolvedVisualizations)[0];_context3.next=5;return __webpack_require__.e(0).then(__webpack_require__.bind(null,289));case 5:_yield$import2=_context3.sent;EditorFrame=_yield$import2.EditorFrame;getActiveDatasourceIdFromDoc=_yield$import2.getActiveDatasourceIdFromDoc;_context3.next=10;return plugins.charts.palettes.getPalettes();case 10:palettes=_context3.sent;Object(external_kbnSharedDeps_ReactDom_["render"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(EditorFrame,{"data-test-subj":"lnsEditorFrame",onError:onError,datasourceMap:resolvedDatasources,visualizationMap:resolvedVisualizations,initialDatasourceId:getActiveDatasourceIdFromDoc(doc)||firstDatasourceId||null,initialVisualizationId:doc&&doc.visualizationType||firstVisualizationId||null,key:doc===null||doc===void 0?void 0:doc.savedObjectId,core:core,plugins:plugins,ExpressionRenderer:plugins.expressions.ReactExpressionRenderer,palettes:palettes,doc:doc,dateRange:dateRange,query:query,filters:filters,savedQuery:savedQuery,onChange:onChange,showNoDataPopover:showNoDataPopover,initialContext:initialContext})),domElement);case 12:case"end":return _context3.stop()}}),_callee3)})));function mount(_x2,_x3){return _mount.apply(this,arguments)}return mount}(),unmount(){if(domElement){Object(external_kbnSharedDeps_ReactDom_["unmountComponentAtNode"])(domElement)}}});case 7:case"end":return _context4.stop()}}),_callee4)})));return function createInstance(){return _ref2.apply(this,arguments)}}();return{createInstance:createInstance}}}var kibanaUtils_public_=__webpack_require__(11);function indexpattern_datasource_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function indexpattern_datasource_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){indexpattern_datasource_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){indexpattern_datasource_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}class indexpattern_datasource_IndexPatternDatasource{constructor(){}setup(core,{expressions:expressions,editorFrame:editorFrame,charts:charts}){editorFrame.registerDatasource(indexpattern_datasource_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$import,getIndexPatternDatasource,renameColumns,formatColumn,counterRate,getTimeScaleFunction,getSuffixFormatter;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(0).then(__webpack_require__.bind(null,289));case 2:_yield$import=_context.sent;getIndexPatternDatasource=_yield$import.getIndexPatternDatasource;renameColumns=_yield$import.renameColumns;formatColumn=_yield$import.formatColumn;counterRate=_yield$import.counterRate;getTimeScaleFunction=_yield$import.getTimeScaleFunction;getSuffixFormatter=_yield$import.getSuffixFormatter;return _context.abrupt("return",core.getStartServices().then(([coreStart,{data:data}])=>{data.fieldFormats.register([getSuffixFormatter(data.fieldFormats.deserialize)]);expressions.registerFunction(getTimeScaleFunction(data));expressions.registerFunction(counterRate);expressions.registerFunction(renameColumns);expressions.registerFunction(formatColumn);return getIndexPatternDatasource({core:coreStart,storage:new kibanaUtils_public_["Storage"](localStorage),data:data,charts:charts})}));case 10:case"end":return _context.stop()}}),_callee)}))))}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(14);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function xy_visualization_slicedToArray(arr,i){return xy_visualization_arrayWithHoles(arr)||xy_visualization_iterableToArrayLimit(arr,i)||xy_visualization_unsupportedIterableToArray(arr,i)||xy_visualization_nonIterableRest()}function xy_visualization_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xy_visualization_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return xy_visualization_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xy_visualization_arrayLikeToArray(o,minLen)}function xy_visualization_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function xy_visualization_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function xy_visualization_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function xy_visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function xy_visualization_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){xy_visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){xy_visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getTimeZone(uiSettings){const configuredTimeZone=uiSettings.get("dateFormat:tz");if(configuredTimeZone==="Browser"){return external_kbnSharedDeps_MomentTimezone_default.a.tz.guess()}return configuredTimeZone}class XyVisualization{constructor(){}setup(core,{expressions:expressions,formatFactory:formatFactory,editorFrame:editorFrame,charts:charts}){editorFrame.registerVisualization(xy_visualization_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$import,legendConfig,yAxisConfig,tickLabelsConfig,gridlinesConfig,axisTitlesVisibilityConfig,layerConfig,xyChart,getXyChartRenderer,getXyVisualization,_yield$core$getStartS,_yield$core$getStartS2,data,palettes;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(0).then(__webpack_require__.bind(null,289));case 2:_yield$import=_context.sent;legendConfig=_yield$import.legendConfig;yAxisConfig=_yield$import.yAxisConfig;tickLabelsConfig=_yield$import.tickLabelsConfig;gridlinesConfig=_yield$import.gridlinesConfig;axisTitlesVisibilityConfig=_yield$import.axisTitlesVisibilityConfig;layerConfig=_yield$import.layerConfig;xyChart=_yield$import.xyChart;getXyChartRenderer=_yield$import.getXyChartRenderer;getXyVisualization=_yield$import.getXyVisualization;_context.next=14;return core.getStartServices();case 14:_yield$core$getStartS=_context.sent;_yield$core$getStartS2=xy_visualization_slicedToArray(_yield$core$getStartS,2);data=_yield$core$getStartS2[1].data;_context.next=19;return charts.palettes.getPalettes();case 19:palettes=_context.sent;expressions.registerFunction(()=>legendConfig);expressions.registerFunction(()=>yAxisConfig);expressions.registerFunction(()=>tickLabelsConfig);expressions.registerFunction(()=>gridlinesConfig);expressions.registerFunction(()=>axisTitlesVisibilityConfig);expressions.registerFunction(()=>layerConfig);expressions.registerFunction(()=>xyChart);expressions.registerRenderer(getXyChartRenderer({formatFactory:formatFactory,chartsThemeService:charts.theme,paletteService:palettes,timeZone:getTimeZone(core.uiSettings),getIntervalByColumn:data.search.aggs.getDateMetaByDatatableColumn}));return _context.abrupt("return",getXyVisualization({paletteService:palettes,data:data}));case 29:case"end":return _context.stop()}}),_callee)}))))}}function metric_visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function metric_visualization_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){metric_visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){metric_visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}class MetricVisualization{constructor(){}setup(_core,{expressions:expressions,formatFactory:formatFactory,editorFrame:editorFrame}){editorFrame.registerVisualization(metric_visualization_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$import,metricVisualization,metricChart,getMetricChartRenderer;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(0).then(__webpack_require__.bind(null,289));case 2:_yield$import=_context.sent;metricVisualization=_yield$import.metricVisualization;metricChart=_yield$import.metricChart;getMetricChartRenderer=_yield$import.getMetricChartRenderer;expressions.registerFunction(()=>metricChart);expressions.registerRenderer(()=>getMetricChartRenderer(formatFactory));return _context.abrupt("return",metricVisualization);case 9:case"end":return _context.stop()}}),_callee)}))))}}function datatable_visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function datatable_visualization_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){datatable_visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){datatable_visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}class DatatableVisualization{constructor(){}setup(core,{expressions:expressions,formatFactory:formatFactory,editorFrame:editorFrame}){editorFrame.registerVisualization(datatable_visualization_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$import,datatable,datatableColumns,getDatatableRenderer,datatableVisualization;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(0).then(__webpack_require__.bind(null,289));case 2:_yield$import=_context.sent;datatable=_yield$import.datatable;datatableColumns=_yield$import.datatableColumns;getDatatableRenderer=_yield$import.getDatatableRenderer;datatableVisualization=_yield$import.datatableVisualization;expressions.registerFunction(()=>datatableColumns);expressions.registerFunction(()=>datatable);expressions.registerRenderer(()=>getDatatableRenderer({formatFactory:formatFactory,getType:core.getStartServices().then(([_,{data:dataStart}])=>dataStart.search.aggs.types.get)}));return _context.abrupt("return",datatableVisualization);case 11:case"end":return _context.stop()}}),_callee)}))))}}function pie_visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function pie_visualization_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){pie_visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){pie_visualization_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}class PieVisualization{constructor(){}setup(core,{expressions:expressions,formatFactory:formatFactory,editorFrame:editorFrame,charts:charts}){editorFrame.registerVisualization(pie_visualization_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$import,getPieVisualization,pie,getPieRenderer,palettes;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(0).then(__webpack_require__.bind(null,289));case 2:_yield$import=_context.sent;getPieVisualization=_yield$import.getPieVisualization;pie=_yield$import.pie;getPieRenderer=_yield$import.getPieRenderer;_context.next=8;return charts.palettes.getPalettes();case 8:palettes=_context.sent;expressions.registerFunction(()=>pie);expressions.registerRenderer(getPieRenderer({formatFactory:formatFactory,chartsThemeService:charts.theme,paletteService:palettes}));return _context.abrupt("return",getPieVisualization({paletteService:palettes}));case 12:case"end":return _context.stop()}}),_callee)}))))}}var core_public_=__webpack_require__(3);var uiActions_public_=__webpack_require__(2);var constants_=__webpack_require__(15);const getLensAliasConfig=()=>({aliasPath:Object(common["getBasePath"])(),aliasApp:"lens",name:"lens",promotion:true,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.lens.visTypeAlias.title",{defaultMessage:"Lens"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.lens.visTypeAlias.description",{defaultMessage:"Create visualizations with our drag and drop editor. Switch between visualization types at any time."}),note:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.lens.visTypeAlias.note",{defaultMessage:"Recommended for most users."}),icon:"lensApp",stage:"production",appExtensions:{visualizations:{docTypes:["lens"],searchFields:["title^3"],toListItem(savedObject){const id=savedObject.id,type=savedObject.type,attributes=savedObject.attributes;const _ref=attributes,title=_ref.title,description=_ref.description;return{id:id,title:title,description:description,editUrl:Object(common["getEditPath"])(id),editApp:"lens",icon:"lensApp",stage:"production",savedObjectType:type,typeTitle:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.lens.visTypeAlias.type",{defaultMessage:"Lens"})}}}}});function visualize_field_actions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function visualize_field_actions_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){visualize_field_actions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){visualize_field_actions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const visualizeFieldAction=application=>Object(uiActions_public_["createAction"])({type:uiActions_public_["ACTION_VISUALIZE_LENS_FIELD"],id:uiActions_public_["ACTION_VISUALIZE_LENS_FIELD"],getDisplayName:()=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.lens.discover.visualizeFieldLegend",{defaultMessage:"Visualize field"}),isCompatible:function(){var _isCompatible=visualize_field_actions_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",!!application.capabilities.visualize.show);case 1:case"end":return _context.stop()}}),_callee)})));function isCompatible(){return _isCompatible.apply(this,arguments)}return isCompatible}(),execute:function(){var _execute=visualize_field_actions_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:application.navigateToApp("lens",{state:{type:uiActions_public_["ACTION_VISUALIZE_LENS_FIELD"],payload:context}});case 1:case"end":return _context2.stop()}}),_callee2)})));function execute(_x){return _execute.apply(this,arguments)}return execute}()});var js_levenshtein=__webpack_require__(16);var js_levenshtein_default=__webpack_require__.n(js_levenshtein);var external_kbnSharedDeps_Rxjs_=__webpack_require__(7);const getSearchProvider=uiCapabilities=>({id:"lens",find:({term:term="",types:types,tags:tags})=>{if(tags||types&&!types.includes("application")){return Object(external_kbnSharedDeps_Rxjs_["of"])([])}return Object(external_kbnSharedDeps_Rxjs_["from"])(uiCapabilities.then(({navLinks:{visualize:visualizeNavLink}})=>{if(!visualizeNavLink){return[]}const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.lens.searchTitle",{defaultMessage:"Lens: create visualizations",description:"Lens is a product name and should not be translated"});const searchableTitle=title.toLowerCase();term=term.toLowerCase();let score=0;if(searchableTitle===term){score=100}else if(searchableTitle.startsWith(term)){score=90}else if(searchableTitle.includes(term)){score=75}else{const length=Math.max(term.length,searchableTitle.length);const distance=js_levenshtein_default()(term,searchableTitle);const ratio=Math.floor((1-distance/length)*100);if(ratio>=60){score=ratio}}if(score===0)return[];return[{id:"lens",title:title,type:"application",icon:"logoKibana",meta:{categoryId:core_public_["DEFAULT_APP_CATEGORIES"].kibana.id,categoryLabel:core_public_["DEFAULT_APP_CATEGORIES"].kibana.label},score:score,url:Object(common["getFullPath"])()}]}))}});function plugin_slicedToArray(arr,i){return plugin_arrayWithHoles(arr)||plugin_iterableToArrayLimit(arr,i)||plugin_unsupportedIterableToArray(arr,i)||plugin_nonIterableRest()}function plugin_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function plugin_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return plugin_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return plugin_arrayLikeToArray(o,minLen)}function plugin_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function plugin_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function plugin_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function plugin_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class plugin_LensPlugin{constructor(){plugin_defineProperty(this,"datatableVisualization",void 0);plugin_defineProperty(this,"editorFrameService",void 0);plugin_defineProperty(this,"createEditorFrame",null);plugin_defineProperty(this,"attributeService",null);plugin_defineProperty(this,"indexpatternDatasource",void 0);plugin_defineProperty(this,"xyVisualization",void 0);plugin_defineProperty(this,"metricVisualization",void 0);plugin_defineProperty(this,"pieVisualization",void 0);plugin_defineProperty(this,"stopReportManager",void 0);this.datatableVisualization=new DatatableVisualization;this.editorFrameService=new service_EditorFrameService;this.indexpatternDatasource=new indexpattern_datasource_IndexPatternDatasource;this.xyVisualization=new XyVisualization;this.metricVisualization=new MetricVisualization;this.pieVisualization=new PieVisualization}setup(core,{urlForwarding:urlForwarding,expressions:expressions,data:data,embeddable:embeddable,visualizations:visualizations,charts:charts,globalSearch:globalSearch}){var _this=this;this.attributeService=plugin_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$import,getLensAttributeService,_yield$core$getStartS,_yield$core$getStartS2,coreStart,startDependencies;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(0).then(__webpack_require__.bind(null,289));case 2:_yield$import=_context.sent;getLensAttributeService=_yield$import.getLensAttributeService;_context.next=6;return core.getStartServices();case 6:_yield$core$getStartS=_context.sent;_yield$core$getStartS2=plugin_slicedToArray(_yield$core$getStartS,2);coreStart=_yield$core$getStartS2[0];startDependencies=_yield$core$getStartS2[1];return _context.abrupt("return",getLensAttributeService(coreStart,startDependencies));case 11:case"end":return _context.stop()}}),_callee)})));const editorFrameSetupInterface=this.editorFrameService.setup(core,{data:data,embeddable:embeddable,charts:charts,expressions:expressions},this.attributeService);const dependencies={expressions:expressions,data:data,charts:charts,editorFrame:editorFrameSetupInterface,formatFactory:core.getStartServices().then(([_,{data:dataStart}])=>dataStart.fieldFormats.deserialize)};this.indexpatternDatasource.setup(core,dependencies);this.xyVisualization.setup(core,dependencies);this.datatableVisualization.setup(core,dependencies);this.metricVisualization.setup(core,dependencies);this.pieVisualization.setup(core,dependencies);visualizations.registerAlias(getLensAliasConfig());const getByValueFeatureFlag=function(){var _ref2=plugin_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _yield$core$getStartS3,_yield$core$getStartS4,deps;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return core.getStartServices();case 2:_yield$core$getStartS3=_context2.sent;_yield$core$getStartS4=plugin_slicedToArray(_yield$core$getStartS3,2);deps=_yield$core$getStartS4[1];return _context2.abrupt("return",deps.dashboard.dashboardFeatureFlagConfig);case 6:case"end":return _context2.stop()}}),_callee2)})));return function getByValueFeatureFlag(){return _ref2.apply(this,arguments)}}();core.application.register({id:"lens",title:common["NOT_INTERNATIONALIZED_PRODUCT_NAME"],navLinkStatus:core_public_["AppNavLinkStatus"].hidden,mount:function(){var _mount=plugin_asyncToGenerator(regeneratorRuntime.mark((function _callee3(params){var _yield$import2,mountApp,stopReportManager;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return __webpack_require__.e(0).then(__webpack_require__.bind(null,289));case 2:_yield$import2=_context3.sent;mountApp=_yield$import2.mountApp;stopReportManager=_yield$import2.stopReportManager;_this.stopReportManager=stopReportManager;return _context3.abrupt("return",mountApp(core,params,{createEditorFrame:_this.createEditorFrame,attributeService:_this.attributeService,getByValueFeatureFlag:getByValueFeatureFlag}));case 7:case"end":return _context3.stop()}}),_callee3)})));function mount(_x){return _mount.apply(this,arguments)}return mount}()});if(globalSearch){globalSearch.registerResultProvider(getSearchProvider(core.getStartServices().then(([{application:{capabilities:capabilities}}])=>capabilities)))}urlForwarding.forwardApp("lens","lens")}start(core,startDependencies){this.createEditorFrame=this.editorFrameService.start(core,startDependencies).createInstance;startDependencies.visualizations.unRegisterAlias(constants_["PLUGIN_ID_OSS"]);if(startDependencies.uiActions.hasAction(uiActions_public_["ACTION_VISUALIZE_FIELD"])){startDependencies.uiActions.unregisterAction(uiActions_public_["ACTION_VISUALIZE_FIELD"])}startDependencies.uiActions.addTriggerAction(uiActions_public_["VISUALIZE_FIELD_TRIGGER"],visualizeFieldAction(core.application))}stop(){if(this.stopReportManager){this.stopReportManager()}}}var public_types=__webpack_require__(10);const public_plugin=()=>new plugin_LensPlugin},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.ElasticCharts},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Moment},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/expressions/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.TsLib},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/share/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))}]);