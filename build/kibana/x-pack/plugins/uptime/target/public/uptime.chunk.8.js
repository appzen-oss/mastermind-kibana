/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["uptime_bundle_jsonpfunction"]=window["uptime_bundle_jsonpfunction"]||[]).push([[8],{278:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"UptimeDataHelper",(function(){return UptimeDataHelper}));var _state_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(47);var _state_kibana_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(48);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function fetchUptimeOverviewData(_x){return _fetchUptimeOverviewData.apply(this,arguments)}function _fetchUptimeOverviewData(){_fetchUptimeOverviewData=_asyncToGenerator(regeneratorRuntime.mark((function _callee({absoluteTime:absoluteTime,relativeTime:relativeTime,bucketSize:bucketSize}){var start,end,snapshot,pings,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:start=new Date(absoluteTime.start).toISOString();end=new Date(absoluteTime.end).toISOString();_context.next=4;return Object(_state_api__WEBPACK_IMPORTED_MODULE_0__["k"])({dateRangeStart:start,dateRangeEnd:end});case 4:snapshot=_context.sent;_context.next=7;return Object(_state_api__WEBPACK_IMPORTED_MODULE_0__["i"])({dateStart:start,dateEnd:end,bucketSize:bucketSize});case 7:pings=_context.sent;response={appLink:"/app/uptime?dateRangeStart=".concat(relativeTime.start,"&dateRangeEnd=").concat(relativeTime.end),stats:{monitors:{type:"number",value:snapshot.total},up:{type:"number",value:snapshot.up},down:{type:"number",value:snapshot.down}},series:{up:{coordinates:pings.histogram.map(p=>({x:p.x,y:p.upCount||0}))},down:{coordinates:pings.histogram.map(p=>({x:p.x,y:p.downCount||0}))}}};return _context.abrupt("return",response);case 10:case"end":return _context.stop()}}),_callee)})));return _fetchUptimeOverviewData.apply(this,arguments)}function UptimeDataHelper(coreStart){_state_kibana_service__WEBPACK_IMPORTED_MODULE_1__["a"].core=coreStart;return{indexStatus:_state_api__WEBPACK_IMPORTED_MODULE_0__["b"],overviewData:fetchUptimeOverviewData}}}}]);