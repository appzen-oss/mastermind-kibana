/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["infra_bundle_jsonpfunction"]=window["infra_bundle_jsonpfunction"]||[]).push([[10],{150:function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports,__webpack_require__(128),__webpack_require__(391),__webpack_require__(392),__webpack_require__(393),__webpack_require__(251),__webpack_require__(394),__webpack_require__(250)):undefined})(this,(function(exports,d3Array,d3Collection,d3Interpolate,d3Format,d3Time,d3TimeFormat,d3Color){"use strict";var array=Array.prototype;var map$1=array.map;var slice=array.slice;var implicit={name:"implicit"};function ordinal(range$$1){var index=d3Collection.map(),domain=[],unknown=implicit;range$$1=range$$1==null?[]:slice.call(range$$1);function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;index.set(key,i=domain.push(d))}return range$$1[(i-1)%range$$1.length]}scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=d3Collection.map();var i=-1,n=_.length,d,key;while(++i<n)if(!index.has(key=(d=_[i])+""))index.set(key,domain.push(d));return scale};scale.range=function(_){return arguments.length?(range$$1=slice.call(_),scale):range$$1.slice()};scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown};scale.copy=function(){return ordinal().domain(domain).range(range$$1).unknown(unknown)};return scale}function band(){var scale=ordinal().unknown(undefined),domain=scale.domain,ordinalRange=scale.range,range$$1=[0,1],step,bandwidth,round=false,paddingInner=0,paddingOuter=0,align=.5;delete scale.unknown;function rescale(){var n=domain().length,reverse=range$$1[1]<range$$1[0],start=range$$1[reverse-0],stop=range$$1[1-reverse];step=(stop-start)/Math.max(1,n-paddingInner+paddingOuter*2);if(round)step=Math.floor(step);start+=(stop-start-step*(n-paddingInner))*align;bandwidth=step*(1-paddingInner);if(round)start=Math.round(start),bandwidth=Math.round(bandwidth);var values=d3Array.range(n).map((function(i){return start+step*i}));return ordinalRange(reverse?values.reverse():values)}scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()};scale.range=function(_){return arguments.length?(range$$1=[+_[0],+_[1]],rescale()):range$$1.slice()};scale.rangeRound=function(_){return range$$1=[+_[0],+_[1]],round=true,rescale()};scale.bandwidth=function(){return bandwidth};scale.step=function(){return step};scale.round=function(_){return arguments.length?(round=!!_,rescale()):round};scale.padding=function(_){return arguments.length?(paddingInner=paddingOuter=Math.max(0,Math.min(1,_)),rescale()):paddingInner};scale.paddingInner=function(_){return arguments.length?(paddingInner=Math.max(0,Math.min(1,_)),rescale()):paddingInner};scale.paddingOuter=function(_){return arguments.length?(paddingOuter=Math.max(0,Math.min(1,_)),rescale()):paddingOuter};scale.align=function(_){return arguments.length?(align=Math.max(0,Math.min(1,_)),rescale()):align};scale.copy=function(){return band().domain(domain()).range(range$$1).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)};return rescale()}function pointish(scale){var copy=scale.copy;scale.padding=scale.paddingOuter;delete scale.paddingInner;delete scale.paddingOuter;scale.copy=function(){return pointish(copy())};return scale}function point(){return pointish(band().paddingInner(1))}var constant=function(x){return function(){return x}};var number=function(x){return+x};var unit=[0,1];function deinterpolateLinear(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:constant(b)}function deinterpolateClamp(deinterpolate){return function(a,b){var d=deinterpolate(a=+a,b=+b);return function(x){return x<=a?0:x>=b?1:d(x)}}}function reinterpolateClamp(reinterpolate){return function(a,b){var r=reinterpolate(a=+a,b=+b);return function(t){return t<=0?a:t>=1?b:r(t)}}}function bimap(domain,range$$1,deinterpolate,reinterpolate){var d0=domain[0],d1=domain[1],r0=range$$1[0],r1=range$$1[1];if(d1<d0)d0=deinterpolate(d1,d0),r0=reinterpolate(r1,r0);else d0=deinterpolate(d0,d1),r0=reinterpolate(r0,r1);return function(x){return r0(d0(x))}}function polymap(domain,range$$1,deinterpolate,reinterpolate){var j=Math.min(domain.length,range$$1.length)-1,d=new Array(j),r=new Array(j),i=-1;if(domain[j]<domain[0]){domain=domain.slice().reverse();range$$1=range$$1.slice().reverse()}while(++i<j){d[i]=deinterpolate(domain[i],domain[i+1]);r[i]=reinterpolate(range$$1[i],range$$1[i+1])}return function(x){var i=d3Array.bisect(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp())}function continuous(deinterpolate,reinterpolate){var domain=unit,range$$1=unit,interpolate$$1=d3Interpolate.interpolate,clamp=false,piecewise,output,input;function rescale(){piecewise=Math.min(domain.length,range$$1.length)>2?polymap:bimap;output=input=null;return scale}function scale(x){return(output||(output=piecewise(domain,range$$1,clamp?deinterpolateClamp(deinterpolate):deinterpolate,interpolate$$1)))(+x)}scale.invert=function(y){return(input||(input=piecewise(range$$1,domain,deinterpolateLinear,clamp?reinterpolateClamp(reinterpolate):reinterpolate)))(+y)};scale.domain=function(_){return arguments.length?(domain=map$1.call(_,number),rescale()):domain.slice()};scale.range=function(_){return arguments.length?(range$$1=slice.call(_),rescale()):range$$1.slice()};scale.rangeRound=function(_){return range$$1=slice.call(_),interpolate$$1=d3Interpolate.interpolateRound,rescale()};scale.clamp=function(_){return arguments.length?(clamp=!!_,rescale()):clamp};scale.interpolate=function(_){return arguments.length?(interpolate$$1=_,rescale()):interpolate$$1};return rescale()}var tickFormat=function(domain,count,specifier){var start=domain[0],stop=domain[domain.length-1],step=d3Array.tickStep(start,stop,count==null?10:count),precision;specifier=d3Format.formatSpecifier(specifier==null?",f":specifier);switch(specifier.type){case"s":{var value=Math.max(Math.abs(start),Math.abs(stop));if(specifier.precision==null&&!isNaN(precision=d3Format.precisionPrefix(step,value)))specifier.precision=precision;return d3Format.formatPrefix(specifier,value)}case"":case"e":case"g":case"p":case"r":{if(specifier.precision==null&&!isNaN(precision=d3Format.precisionRound(step,Math.max(Math.abs(start),Math.abs(stop)))))specifier.precision=precision-(specifier.type==="e");break}case"f":case"%":{if(specifier.precision==null&&!isNaN(precision=d3Format.precisionFixed(step)))specifier.precision=precision-(specifier.type==="%")*2;break}}return d3Format.format(specifier)};function linearish(scale){var domain=scale.domain;scale.ticks=function(count){var d=domain();return d3Array.ticks(d[0],d[d.length-1],count==null?10:count)};scale.tickFormat=function(count,specifier){return tickFormat(domain(),count,specifier)};scale.nice=function(count){if(count==null)count=10;var d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1],step;if(stop<start){step=start,start=stop,stop=step;step=i0,i0=i1,i1=step}step=d3Array.tickIncrement(start,stop,count);if(step>0){start=Math.floor(start/step)*step;stop=Math.ceil(stop/step)*step;step=d3Array.tickIncrement(start,stop,count)}else if(step<0){start=Math.ceil(start*step)/step;stop=Math.floor(stop*step)/step;step=d3Array.tickIncrement(start,stop,count)}if(step>0){d[i0]=Math.floor(start/step)*step;d[i1]=Math.ceil(stop/step)*step;domain(d)}else if(step<0){d[i0]=Math.ceil(start*step)/step;d[i1]=Math.floor(stop*step)/step;domain(d)}return scale};return scale}function linear(){var scale=continuous(deinterpolateLinear,d3Interpolate.interpolateNumber);scale.copy=function(){return copy(scale,linear())};return linearish(scale)}function identity(){var domain=[0,1];function scale(x){return+x}scale.invert=scale;scale.domain=scale.range=function(_){return arguments.length?(domain=map$1.call(_,number),scale):domain.slice()};scale.copy=function(){return identity().domain(domain)};return linearish(scale)}var nice=function(domain,interval){domain=domain.slice();var i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1],t;if(x1<x0){t=i0,i0=i1,i1=t;t=x0,x0=x1,x1=t}domain[i0]=interval.floor(x0);domain[i1]=interval.ceil(x1);return domain};function deinterpolate(a,b){return(b=Math.log(b/a))?function(x){return Math.log(x/a)/b}:constant(b)}function reinterpolate(a,b){return a<0?function(t){return-Math.pow(-b,t)*Math.pow(-a,1-t)}:function(t){return Math.pow(b,t)*Math.pow(a,1-t)}}function pow10(x){return isFinite(x)?+("1e"+x):x<0?0:x}function powp(base){return base===10?pow10:base===Math.E?Math.exp:function(x){return Math.pow(base,x)}}function logp(base){return base===Math.E?Math.log:base===10&&Math.log10||base===2&&Math.log2||(base=Math.log(base),function(x){return Math.log(x)/base})}function reflect(f){return function(x){return-f(-x)}}function log(){var scale=continuous(deinterpolate,reinterpolate).domain([1,10]),domain=scale.domain,base=10,logs=logp(10),pows=powp(10);function rescale(){logs=logp(base),pows=powp(base);if(domain()[0]<0)logs=reflect(logs),pows=reflect(pows);return scale}scale.base=function(_){return arguments.length?(base=+_,rescale()):base};scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()};scale.ticks=function(count){var d=domain(),u=d[0],v=d[d.length-1],r;if(r=v<u)i=u,u=v,v=i;var i=logs(u),j=logs(v),p,k,t,n=count==null?10:+count,z=[];if(!(base%1)&&j-i<n){i=Math.round(i)-1,j=Math.round(j)+1;if(u>0)for(;i<j;++i){for(k=1,p=pows(i);k<base;++k){t=p*k;if(t<u)continue;if(t>v)break;z.push(t)}}else for(;i<j;++i){for(k=base-1,p=pows(i);k>=1;--k){t=p*k;if(t<u)continue;if(t>v)break;z.push(t)}}}else{z=d3Array.ticks(i,j,Math.min(j-i,n)).map(pows)}return r?z.reverse():z};scale.tickFormat=function(count,specifier){if(specifier==null)specifier=base===10?".0e":",";if(typeof specifier!=="function")specifier=d3Format.format(specifier);if(count===Infinity)return specifier;if(count==null)count=10;var k=Math.max(1,base*count/scale.ticks().length);return function(d){var i=d/pows(Math.round(logs(d)));if(i*base<base-.5)i*=base;return i<=k?specifier(d):""}};scale.nice=function(){return domain(nice(domain(),{floor:function(x){return pows(Math.floor(logs(x)))},ceil:function(x){return pows(Math.ceil(logs(x)))}}))};scale.copy=function(){return copy(scale,log().base(base))};return scale}function raise(x,exponent){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}function pow(){var exponent=1,scale=continuous(deinterpolate,reinterpolate),domain=scale.domain;function deinterpolate(a,b){return(b=raise(b,exponent)-(a=raise(a,exponent)))?function(x){return(raise(x,exponent)-a)/b}:constant(b)}function reinterpolate(a,b){b=raise(b,exponent)-(a=raise(a,exponent));return function(t){return raise(a+b*t,1/exponent)}}scale.exponent=function(_){return arguments.length?(exponent=+_,domain(domain())):exponent};scale.copy=function(){return copy(scale,pow().exponent(exponent))};return linearish(scale)}function sqrt(){return pow().exponent(.5)}function quantile$1(){var domain=[],range$$1=[],thresholds=[];function rescale(){var i=0,n=Math.max(1,range$$1.length);thresholds=new Array(n-1);while(++i<n)thresholds[i-1]=d3Array.quantile(domain,i/n);return scale}function scale(x){if(!isNaN(x=+x))return range$$1[d3Array.bisect(thresholds,x)]}scale.invertExtent=function(y){var i=range$$1.indexOf(y);return i<0?[NaN,NaN]:[i>0?thresholds[i-1]:domain[0],i<thresholds.length?thresholds[i]:domain[domain.length-1]]};scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(var i=0,n=_.length,d;i<n;++i)if(d=_[i],d!=null&&!isNaN(d=+d))domain.push(d);domain.sort(d3Array.ascending);return rescale()};scale.range=function(_){return arguments.length?(range$$1=slice.call(_),rescale()):range$$1.slice()};scale.quantiles=function(){return thresholds.slice()};scale.copy=function(){return quantile$1().domain(domain).range(range$$1)};return scale}function quantize(){var x0=0,x1=1,n=1,domain=[.5],range$$1=[0,1];function scale(x){if(x<=x)return range$$1[d3Array.bisect(domain,x,0,n)]}function rescale(){var i=-1;domain=new Array(n);while(++i<n)domain[i]=((i+1)*x1-(i-n)*x0)/(n+1);return scale}scale.domain=function(_){return arguments.length?(x0=+_[0],x1=+_[1],rescale()):[x0,x1]};scale.range=function(_){return arguments.length?(n=(range$$1=slice.call(_)).length-1,rescale()):range$$1.slice()};scale.invertExtent=function(y){var i=range$$1.indexOf(y);return i<0?[NaN,NaN]:i<1?[x0,domain[0]]:i>=n?[domain[n-1],x1]:[domain[i-1],domain[i]]};scale.copy=function(){return quantize().domain([x0,x1]).range(range$$1)};return linearish(scale)}function threshold(){var domain=[.5],range$$1=[0,1],n=1;function scale(x){if(x<=x)return range$$1[d3Array.bisect(domain,x,0,n)]}scale.domain=function(_){return arguments.length?(domain=slice.call(_),n=Math.min(domain.length,range$$1.length-1),scale):domain.slice()};scale.range=function(_){return arguments.length?(range$$1=slice.call(_),n=Math.min(domain.length,range$$1.length-1),scale):range$$1.slice()};scale.invertExtent=function(y){var i=range$$1.indexOf(y);return[domain[i-1],domain[i]]};scale.copy=function(){return threshold().domain(domain).range(range$$1)};return scale}var durationSecond=1e3;var durationMinute=durationSecond*60;var durationHour=durationMinute*60;var durationDay=durationHour*24;var durationWeek=durationDay*7;var durationMonth=durationDay*30;var durationYear=durationDay*365;function date(t){return new Date(t)}function number$1(t){return t instanceof Date?+t:+new Date(+t)}function calendar(year,month,week,day,hour,minute,second,millisecond,format$$1){var scale=continuous(deinterpolateLinear,d3Interpolate.interpolateNumber),invert=scale.invert,domain=scale.domain;var formatMillisecond=format$$1(".%L"),formatSecond=format$$1(":%S"),formatMinute=format$$1("%I:%M"),formatHour=format$$1("%I %p"),formatDay=format$$1("%a %d"),formatWeek=format$$1("%b %d"),formatMonth=format$$1("%B"),formatYear=format$$1("%Y");var tickIntervals=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[minute,1,durationMinute],[minute,5,5*durationMinute],[minute,15,15*durationMinute],[minute,30,30*durationMinute],[hour,1,durationHour],[hour,3,3*durationHour],[hour,6,6*durationHour],[hour,12,12*durationHour],[day,1,durationDay],[day,2,2*durationDay],[week,1,durationWeek],[month,1,durationMonth],[month,3,3*durationMonth],[year,1,durationYear]];function tickFormat(date){return(second(date)<date?formatMillisecond:minute(date)<date?formatSecond:hour(date)<date?formatMinute:day(date)<date?formatHour:month(date)<date?week(date)<date?formatDay:formatWeek:year(date)<date?formatMonth:formatYear)(date)}function tickInterval(interval,start,stop,step){if(interval==null)interval=10;if(typeof interval==="number"){var target=Math.abs(stop-start)/interval,i=d3Array.bisector((function(i){return i[2]})).right(tickIntervals,target);if(i===tickIntervals.length){step=d3Array.tickStep(start/durationYear,stop/durationYear,interval);interval=year}else if(i){i=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i];step=i[1];interval=i[0]}else{step=Math.max(d3Array.tickStep(start,stop,interval),1);interval=millisecond}}return step==null?interval:interval.every(step)}scale.invert=function(y){return new Date(invert(y))};scale.domain=function(_){return arguments.length?domain(map$1.call(_,number$1)):domain().map(date)};scale.ticks=function(interval,step){var d=domain(),t0=d[0],t1=d[d.length-1],r=t1<t0,t;if(r)t=t0,t0=t1,t1=t;t=tickInterval(interval,t0,t1,step);t=t?t.range(t0,t1+1):[];return r?t.reverse():t};scale.tickFormat=function(count,specifier){return specifier==null?tickFormat:format$$1(specifier)};scale.nice=function(interval,step){var d=domain();return(interval=tickInterval(interval,d[0],d[d.length-1],step))?domain(nice(d,interval)):scale};scale.copy=function(){return copy(scale,calendar(year,month,week,day,hour,minute,second,millisecond,format$$1))};return scale}var time=function(){return calendar(d3Time.timeYear,d3Time.timeMonth,d3Time.timeWeek,d3Time.timeDay,d3Time.timeHour,d3Time.timeMinute,d3Time.timeSecond,d3Time.timeMillisecond,d3TimeFormat.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])};var utcTime=function(){return calendar(d3Time.utcYear,d3Time.utcMonth,d3Time.utcWeek,d3Time.utcDay,d3Time.utcHour,d3Time.utcMinute,d3Time.utcSecond,d3Time.utcMillisecond,d3TimeFormat.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])};var colors=function(s){return s.match(/.{6}/g).map((function(x){return"#"+x}))};var category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var category20b=colors("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");var category20c=colors("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");var category20=colors("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");var cubehelix$1=d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(300,.5,0),d3Color.cubehelix(-240,.5,1));var warm=d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(-100,.75,.35),d3Color.cubehelix(80,1.5,.8));var cool=d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(260,.75,.35),d3Color.cubehelix(80,1.5,.8));var rainbow=d3Color.cubehelix();var rainbow$1=function(t){if(t<0||t>1)t-=Math.floor(t);var ts=Math.abs(t-.5);rainbow.h=360*t-100;rainbow.s=1.5-1.5*ts;rainbow.l=.8-.9*ts;return rainbow+""};function ramp(range$$1){var n=range$$1.length;return function(t){return range$$1[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var viridis=ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));var inferno=ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));var plasma=ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function sequential(interpolator){var x0=0,x1=1,clamp=false;function scale(x){var t=(x-x0)/(x1-x0);return interpolator(clamp?Math.max(0,Math.min(1,t)):t)}scale.domain=function(_){return arguments.length?(x0=+_[0],x1=+_[1],scale):[x0,x1]};scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp};scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator};scale.copy=function(){return sequential(interpolator).domain([x0,x1]).clamp(clamp)};return linearish(scale)}exports.scaleBand=band;exports.scalePoint=point;exports.scaleIdentity=identity;exports.scaleLinear=linear;exports.scaleLog=log;exports.scaleOrdinal=ordinal;exports.scaleImplicit=implicit;exports.scalePow=pow;exports.scaleSqrt=sqrt;exports.scaleQuantile=quantile$1;exports.scaleQuantize=quantize;exports.scaleThreshold=threshold;exports.scaleTime=time;exports.scaleUtc=utcTime;exports.schemeCategory10=category10;exports.schemeCategory20b=category20b;exports.schemeCategory20c=category20c;exports.schemeCategory20=category20;exports.interpolateCubehelixDefault=cubehelix$1;exports.interpolateRainbow=rainbow$1;exports.interpolateWarm=warm;exports.interpolateCool=cool;exports.interpolateViridis=viridis;exports.interpolateMagma=magma;exports.interpolateInferno=inferno;exports.interpolatePlasma=plasma;exports.scaleSequential=sequential;Object.defineProperty(exports,"__esModule",{value:true})}))},248:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(59);var react_1=__webpack_require__(2);var useSet=function(initialSet){if(initialSet===void 0){initialSet=new Set}var _a=react_1.useState(initialSet),set=_a[0],setSet=_a[1];var stableActions=react_1.useMemo((function(){var add=function(item){return setSet((function(prevSet){return new Set(tslib_1.__spreadArrays(Array.from(prevSet),[item]))}))};var remove=function(item){return setSet((function(prevSet){return new Set(Array.from(prevSet).filter((function(i){return i!==item})))}))};var toggle=function(item){return setSet((function(prevSet){return prevSet.has(item)?new Set(Array.from(prevSet).filter((function(i){return i!==item}))):new Set(tslib_1.__spreadArrays(Array.from(prevSet),[item]))}))};return{add:add,remove:remove,toggle:toggle,reset:function(){return setSet(initialSet)}}}),[setSet]);var utils=tslib_1.__assign({has:react_1.useCallback((function(item){return set.has(item)}),[set])},stableActions);return[set,utils]};exports.default=useSet},250:function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports):undefined})(this,(function(exports){"use strict";function define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype;prototype.constructor=constructor}function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var darker=.7;var brighter=1/darker;var reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$");var named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy:function(channels){return Object.assign(new this.constructor,this,channels)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;format=(format+"").trim().toLowerCase();return(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),l===6?rgbn(m):l===3?new Rgb(m>>8&15|m>>4&240,m>>4&15|m&240,(m&15)<<4|m&15,1):l===8?rgba(m>>24&255,m>>16&255,m>>8&255,(m&255)/255):l===4?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|m&240,((m&15)<<4|m&15)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(m[1]*255/100,m[2]*255/100,m[3]*255/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(m[1]*255/100,m[2]*255/100,m[3]*255/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):format==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,n&255,1)}function rgba(r,g,b,a){if(a<=0)r=g=b=NaN;return new Rgb(r,g,b,a)}function rgbConvert(o){if(!(o instanceof Color))o=color(o);if(!o)return new Rgb;o=o.rgb();return new Rgb(o.r,o.g,o.b,o.opacity)}function rgb(r,g,b,opacity){return arguments.length===1?rgbConvert(r):new Rgb(r,g,b,opacity==null?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r;this.g=+g;this.b=+b;this.opacity=+opacity}define(Rgb,rgb,extend(Color,{brighter:function(k){k=k==null?brighter:Math.pow(brighter,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){k=k==null?darker:Math.pow(darker,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(a===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(a===1?")":", "+a+")")}function hex(value){value=Math.max(0,Math.min(255,Math.round(value)||0));return(value<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){if(a<=0)h=s=l=NaN;else if(l<=0||l>=1)h=s=NaN;else if(s<=0)h=NaN;return new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(!(o instanceof Color))o=color(o);if(!o)return new Hsl;if(o instanceof Hsl)return o;o=o.rgb();var r=o.r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;if(s){if(r===max)h=(g-b)/s+(g<b)*6;else if(g===max)h=(b-r)/s+2;else h=(r-g)/s+4;s/=l<.5?max+min:2-max-min;h*=60}else{s=l>0&&l<1?0:h}return new Hsl(h,s,l,o.opacity)}function hsl(h,s,l,opacity){return arguments.length===1?hslConvert(h):new Hsl(h,s,l,opacity==null?1:opacity)}function Hsl(h,s,l,opacity){this.h=+h;this.s=+s;this.l=+l;this.opacity=+opacity}define(Hsl,hsl,extend(Color,{brighter:function(k){k=k==null?brighter:Math.pow(brighter,k);return new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){k=k==null?darker:Math.pow(darker,k);return new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+(this.h<0)*360,s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(a===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(a===1?")":", "+a+")")}}));function hsl2rgb(h,m1,m2){return(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)*255}var deg2rad=Math.PI/180;var rad2deg=180/Math.PI;var K=18,Xn=.96422,Yn=1,Zn=.82521,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl)return hcl2lab(o);if(!(o instanceof Rgb))o=rgbConvert(o);var r=rgb2lrgb(o.r),g=rgb2lrgb(o.g),b=rgb2lrgb(o.b),y=xyz2lab((.2225045*r+.7168786*g+.0606169*b)/Yn),x,z;if(r===g&&g===b)x=z=y;else{x=xyz2lab((.4360747*r+.3850649*g+.1430804*b)/Xn);z=xyz2lab((.0139322*r+.0971045*g+.7141733*b)/Zn)}return new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function gray(l,opacity){return new Lab(l,0,0,opacity==null?1:opacity)}function lab(l,a,b,opacity){return arguments.length===1?labConvert(l):new Lab(l,a,b,opacity==null?1:opacity)}function Lab(l,a,b,opacity){this.l=+l;this.a=+a;this.b=+b;this.opacity=+opacity}define(Lab,lab,extend(Color,{brighter:function(k){return new Lab(this.l+K*(k==null?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-K*(k==null?1:k),this.a,this.b,this.opacity)},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;x=Xn*lab2xyz(x);y=Yn*lab2xyz(y);z=Zn*lab2xyz(z);return new Rgb(lrgb2rgb(3.1338561*x-1.6168667*y-.4906146*z),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}}));function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/t2+t0}function lab2xyz(t){return t>t1?t*t*t:t2*(t-t0)}function lrgb2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(!(o instanceof Lab))o=labConvert(o);if(o.a===0&&o.b===0)return new Hcl(NaN,0<o.l&&o.l<100?0:NaN,o.l,o.opacity);var h=Math.atan2(o.b,o.a)*rad2deg;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function lch(l,c,h,opacity){return arguments.length===1?hclConvert(l):new Hcl(h,c,l,opacity==null?1:opacity)}function hcl(h,c,l,opacity){return arguments.length===1?hclConvert(h):new Hcl(h,c,l,opacity==null?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h;this.c=+c;this.l=+l;this.opacity=+opacity}function hcl2lab(o){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h=o.h*deg2rad;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}define(Hcl,hcl,extend(Color,{brighter:function(k){return new Hcl(this.h,this.c,this.l+K*(k==null?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,this.l-K*(k==null?1:k),this.opacity)},rgb:function(){return hcl2lab(this).rgb()}}));var A=-.14861,B=+1.78277,C=-.29227,D=-.90649,E=+1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);if(!(o instanceof Rgb))o=rgbConvert(o);var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*rad2deg-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}function cubehelix(h,s,l,opacity){return arguments.length===1?cubehelixConvert(h):new Cubehelix(h,s,l,opacity==null?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h;this.s=+s;this.l=+l;this.opacity=+opacity}define(Cubehelix,cubehelix,extend(Color,{brighter:function(k){k=k==null?brighter:Math.pow(brighter,k);return new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){k=k==null?darker:Math.pow(darker,k);return new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=isNaN(this.h)?0:(this.h+120)*deg2rad,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity)}}));exports.color=color;exports.cubehelix=cubehelix;exports.gray=gray;exports.hcl=hcl;exports.hsl=hsl;exports.lab=lab;exports.lch=lch;exports.rgb=rgb;Object.defineProperty(exports,"__esModule",{value:true})}))},251:function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports):undefined})(this,(function(exports){"use strict";var t0=new Date,t1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=arguments.length===0?new Date:new Date(+date)),date}interval.floor=function(date){return floori(date=new Date(+date)),date};interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date};interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1};interval.offset=function(date,step){return offseti(date=new Date(+date),step==null?1:Math.floor(step)),date};interval.range=function(start,stop,step){var range=[],previous;start=interval.ceil(start);step=step==null?1:Math.floor(step);if(!(start<stop)||!(step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range};interval.filter=function(test){return newInterval((function(date){if(date>=date)while(floori(date),!test(date))date.setTime(date-1)}),(function(date,step){if(date>=date){if(step<0)while(++step<=0){while(offseti(date,-1),!test(date)){}}else while(--step>=0){while(offseti(date,+1),!test(date)){}}}}))};if(count){interval.count=function(start,end){t0.setTime(+start),t1.setTime(+end);floori(t0),floori(t1);return Math.floor(count(t0,t1))};interval.every=function(step){step=Math.floor(step);return!isFinite(step)||!(step>0)?null:!(step>1)?interval:interval.filter(field?function(d){return field(d)%step===0}:function(d){return interval.count(0,d)%step===0})}}return interval}var millisecond=newInterval((function(){}),(function(date,step){date.setTime(+date+step)}),(function(start,end){return end-start}));millisecond.every=function(k){k=Math.floor(k);if(!isFinite(k)||!(k>0))return null;if(!(k>1))return millisecond;return newInterval((function(date){date.setTime(Math.floor(date/k)*k)}),(function(date,step){date.setTime(+date+step*k)}),(function(start,end){return(end-start)/k}))};var milliseconds=millisecond.range;var durationSecond=1e3;var durationMinute=6e4;var durationHour=36e5;var durationDay=864e5;var durationWeek=6048e5;var second=newInterval((function(date){date.setTime(date-date.getMilliseconds())}),(function(date,step){date.setTime(+date+step*durationSecond)}),(function(start,end){return(end-start)/durationSecond}),(function(date){return date.getUTCSeconds()}));var seconds=second.range;var minute=newInterval((function(date){date.setTime(date-date.getMilliseconds()-date.getSeconds()*durationSecond)}),(function(date,step){date.setTime(+date+step*durationMinute)}),(function(start,end){return(end-start)/durationMinute}),(function(date){return date.getMinutes()}));var minutes=minute.range;var hour=newInterval((function(date){date.setTime(date-date.getMilliseconds()-date.getSeconds()*durationSecond-date.getMinutes()*durationMinute)}),(function(date,step){date.setTime(+date+step*durationHour)}),(function(start,end){return(end-start)/durationHour}),(function(date){return date.getHours()}));var hours=hour.range;var day=newInterval((function(date){date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+step)}),(function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationDay}),(function(date){return date.getDate()-1}));var days=day.range;function weekday(i){return newInterval((function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7);date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+step*7)}),(function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationWeek}))}var sunday=weekday(0);var monday=weekday(1);var tuesday=weekday(2);var wednesday=weekday(3);var thursday=weekday(4);var friday=weekday(5);var saturday=weekday(6);var sundays=sunday.range;var mondays=monday.range;var tuesdays=tuesday.range;var wednesdays=wednesday.range;var thursdays=thursday.range;var fridays=friday.range;var saturdays=saturday.range;var month=newInterval((function(date){date.setDate(1);date.setHours(0,0,0,0)}),(function(date,step){date.setMonth(date.getMonth()+step)}),(function(start,end){return end.getMonth()-start.getMonth()+(end.getFullYear()-start.getFullYear())*12}),(function(date){return date.getMonth()}));var months=month.range;var year=newInterval((function(date){date.setMonth(0,1);date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step)}),(function(start,end){return end.getFullYear()-start.getFullYear()}),(function(date){return date.getFullYear()}));year.every=function(k){return!isFinite(k=Math.floor(k))||!(k>0)?null:newInterval((function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k);date.setMonth(0,1);date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step*k)}))};var years=year.range;var utcMinute=newInterval((function(date){date.setUTCSeconds(0,0)}),(function(date,step){date.setTime(+date+step*durationMinute)}),(function(start,end){return(end-start)/durationMinute}),(function(date){return date.getUTCMinutes()}));var utcMinutes=utcMinute.range;var utcHour=newInterval((function(date){date.setUTCMinutes(0,0,0)}),(function(date,step){date.setTime(+date+step*durationHour)}),(function(start,end){return(end-start)/durationHour}),(function(date){return date.getUTCHours()}));var utcHours=utcHour.range;var utcDay=newInterval((function(date){date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+step)}),(function(start,end){return(end-start)/durationDay}),(function(date){return date.getUTCDate()-1}));var utcDays=utcDay.range;function utcWeekday(i){return newInterval((function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7);date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+step*7)}),(function(start,end){return(end-start)/durationWeek}))}var utcSunday=utcWeekday(0);var utcMonday=utcWeekday(1);var utcTuesday=utcWeekday(2);var utcWednesday=utcWeekday(3);var utcThursday=utcWeekday(4);var utcFriday=utcWeekday(5);var utcSaturday=utcWeekday(6);var utcSundays=utcSunday.range;var utcMondays=utcMonday.range;var utcTuesdays=utcTuesday.range;var utcWednesdays=utcWednesday.range;var utcThursdays=utcThursday.range;var utcFridays=utcFriday.range;var utcSaturdays=utcSaturday.range;var utcMonth=newInterval((function(date){date.setUTCDate(1);date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCMonth(date.getUTCMonth()+step)}),(function(start,end){return end.getUTCMonth()-start.getUTCMonth()+(end.getUTCFullYear()-start.getUTCFullYear())*12}),(function(date){return date.getUTCMonth()}));var utcMonths=utcMonth.range;var utcYear=newInterval((function(date){date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)}),(function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),(function(date){return date.getUTCFullYear()}));utcYear.every=function(k){return!isFinite(k=Math.floor(k))||!(k>0)?null:newInterval((function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k);date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)}))};var utcYears=utcYear.range;exports.timeDay=day;exports.timeDays=days;exports.timeFriday=friday;exports.timeFridays=fridays;exports.timeHour=hour;exports.timeHours=hours;exports.timeInterval=newInterval;exports.timeMillisecond=millisecond;exports.timeMilliseconds=milliseconds;exports.timeMinute=minute;exports.timeMinutes=minutes;exports.timeMonday=monday;exports.timeMondays=mondays;exports.timeMonth=month;exports.timeMonths=months;exports.timeSaturday=saturday;exports.timeSaturdays=saturdays;exports.timeSecond=second;exports.timeSeconds=seconds;exports.timeSunday=sunday;exports.timeSundays=sundays;exports.timeThursday=thursday;exports.timeThursdays=thursdays;exports.timeTuesday=tuesday;exports.timeTuesdays=tuesdays;exports.timeWednesday=wednesday;exports.timeWednesdays=wednesdays;exports.timeWeek=sunday;exports.timeWeeks=sundays;exports.timeYear=year;exports.timeYears=years;exports.utcDay=utcDay;exports.utcDays=utcDays;exports.utcFriday=utcFriday;exports.utcFridays=utcFridays;exports.utcHour=utcHour;exports.utcHours=utcHours;exports.utcMillisecond=millisecond;exports.utcMilliseconds=milliseconds;exports.utcMinute=utcMinute;exports.utcMinutes=utcMinutes;exports.utcMonday=utcMonday;exports.utcMondays=utcMondays;exports.utcMonth=utcMonth;exports.utcMonths=utcMonths;exports.utcSaturday=utcSaturday;exports.utcSaturdays=utcSaturdays;exports.utcSecond=second;exports.utcSeconds=seconds;exports.utcSunday=utcSunday;exports.utcSundays=utcSundays;exports.utcThursday=utcThursday;exports.utcThursdays=utcThursdays;exports.utcTuesday=utcTuesday;exports.utcTuesdays=utcTuesdays;exports.utcWednesday=utcWednesday;exports.utcWednesdays=utcWednesdays;exports.utcWeek=utcSunday;exports.utcWeeks=utcSundays;exports.utcYear=utcYear;exports.utcYears=utcYears;Object.defineProperty(exports,"__esModule",{value:true})}))},252:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(59);var react_1=__webpack_require__(2);var useUnmount_1=tslib_1.__importDefault(__webpack_require__(398));var useThrottle=function(value,ms){if(ms===void 0){ms=200}var _a=react_1.useState(value),state=_a[0],setState=_a[1];var timeout=react_1.useRef();var nextValue=react_1.useRef(null);var hasNextValue=react_1.useRef(0);react_1.useEffect((function(){if(!timeout.current){setState(value);var timeoutCallback_1=function(){if(hasNextValue.current){hasNextValue.current=false;setState(nextValue.current);timeout.current=setTimeout(timeoutCallback_1,ms)}else{timeout.current=undefined}};timeout.current=setTimeout(timeoutCallback_1,ms)}else{nextValue.current=value;hasNextValue.current=true}}),[value]);useUnmount_1.default((function(){timeout.current&&clearTimeout(timeout.current)}));return state};exports.default=useThrottle},380:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(59);var util_1=__webpack_require__(381);var useCustomCompareEffect_1=tslib_1.__importDefault(__webpack_require__(383));var isPrimitive=function(val){return val!==Object(val)};var useDeepCompareEffect=function(effect,deps){if(false){}useCustomCompareEffect_1.default(effect,deps,util_1.isDeepEqual)};exports.default=useDeepCompareEffect},381:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isClient=typeof window==="object";exports.on=function(obj){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}return obj.addEventListener.apply(obj,args)};exports.off=function(obj){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}return obj.removeEventListener.apply(obj,args)};exports.isDeepEqual=__webpack_require__(382)},382:function(module,exports,__webpack_require__){"use strict";module.exports=function equal(a,b){if(a===b)return true;if(a&&b&&typeof a=="object"&&typeof b=="object"){if(a.constructor!==b.constructor)return false;var length,i,keys;if(Array.isArray(a)){length=a.length;if(length!=b.length)return false;for(i=length;i--!==0;)if(!equal(a[i],b[i]))return false;return true}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();keys=Object.keys(a);length=keys.length;if(length!==Object.keys(b).length)return false;for(i=length;i--!==0;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return false;for(i=length;i--!==0;){var key=keys[i];if(key==="_owner"&&a.$$typeof){continue}if(!equal(a[key],b[key]))return false}return true}return a!==a&&b!==b}},383:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(2);var isPrimitive=function(val){return val!==Object(val)};var useCustomCompareEffect=function(effect,deps,depsEqual){if(false){}var ref=react_1.useRef(undefined);if(!ref.current||!depsEqual(deps,ref.current)){ref.current=deps}react_1.useEffect(effect,ref.current)};exports.default=useCustomCompareEffect},391:function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports):undefined})(this,(function(exports){"use strict";var prefix="$";function Map(){}Map.prototype=map.prototype={constructor:Map,has:function(key){return prefix+key in this},get:function(key){return this[prefix+key]},set:function(key,value){this[prefix+key]=value;return this},remove:function(key){var property=prefix+key;return property in this&&delete this[property]},clear:function(){for(var property in this)if(property[0]===prefix)delete this[property]},keys:function(){var keys=[];for(var property in this)if(property[0]===prefix)keys.push(property.slice(1));return keys},values:function(){var values=[];for(var property in this)if(property[0]===prefix)values.push(this[property]);return values},entries:function(){var entries=[];for(var property in this)if(property[0]===prefix)entries.push({key:property.slice(1),value:this[property]});return entries},size:function(){var size=0;for(var property in this)if(property[0]===prefix)++size;return size},empty:function(){for(var property in this)if(property[0]===prefix)return false;return true},each:function(f){for(var property in this)if(property[0]===prefix)f(this[property],property.slice(1),this)}};function map(object,f){var map=new Map;if(object instanceof Map)object.each((function(value,key){map.set(key,value)}));else if(Array.isArray(object)){var i=-1,n=object.length,o;if(f==null)while(++i<n)map.set(i,object[i]);else while(++i<n)map.set(f(o=object[i],i,object),o)}else if(object)for(var key in object)map.set(key,object[key]);return map}function nest(){var keys=[],sortKeys=[],sortValues,rollup,nest;function apply(array,depth,createResult,setResult){if(depth>=keys.length){if(sortValues!=null)array.sort(sortValues);return rollup!=null?rollup(array):array}var i=-1,n=array.length,key=keys[depth++],keyValue,value,valuesByKey=map(),values,result=createResult();while(++i<n){if(values=valuesByKey.get(keyValue=key(value=array[i])+"")){values.push(value)}else{valuesByKey.set(keyValue,[value])}}valuesByKey.each((function(values,key){setResult(result,key,apply(values,depth,createResult,setResult))}));return result}function entries(map$$1,depth){if(++depth>keys.length)return map$$1;var array,sortKey=sortKeys[depth-1];if(rollup!=null&&depth>=keys.length)array=map$$1.entries();else array=[],map$$1.each((function(v,k){array.push({key:k,values:entries(v,depth)})}));return sortKey!=null?array.sort((function(a,b){return sortKey(a.key,b.key)})):array}return nest={object:function(array){return apply(array,0,createObject,setObject)},map:function(array){return apply(array,0,createMap,setMap)},entries:function(array){return entries(apply(array,0,createMap,setMap),0)},key:function(d){keys.push(d);return nest},sortKeys:function(order){sortKeys[keys.length-1]=order;return nest},sortValues:function(order){sortValues=order;return nest},rollup:function(f){rollup=f;return nest}}}function createObject(){return{}}function setObject(object,key,value){object[key]=value}function createMap(){return map()}function setMap(map$$1,key,value){map$$1.set(key,value)}function Set(){}var proto=map.prototype;Set.prototype=set.prototype={constructor:Set,has:proto.has,add:function(value){value+="";this[prefix+value]=value;return this},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each};function set(object,f){var set=new Set;if(object instanceof Set)object.each((function(value){set.add(value)}));else if(object){var i=-1,n=object.length;if(f==null)while(++i<n)set.add(object[i]);else while(++i<n)set.add(f(object[i],i,object))}return set}function keys(map){var keys=[];for(var key in map)keys.push(key);return keys}function values(map){var values=[];for(var key in map)values.push(map[key]);return values}function entries(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries}exports.nest=nest;exports.set=set;exports.map=map;exports.keys=keys;exports.values=values;exports.entries=entries;Object.defineProperty(exports,"__esModule",{value:true})}))},392:function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports,__webpack_require__(250)):undefined})(this,(function(exports,d3Color){"use strict";function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}function basis$1(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}}function basisClosed(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}}function constant(x){return function(){return x}}function linear(a,d){return function(t){return a+t*d}}function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}function hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):constant(isNaN(a)?b:a)}function gamma(y){return(y=+y)===1?nogamma:function(a,b){return b-a?exponential(a,b,y):constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):constant(isNaN(a)?b:a)}var rgb=function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=d3Color.rgb(start)).r,(end=d3Color.rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){start.r=r(t);start.g=g(t);start.b=b(t);start.opacity=opacity(t);return start+""}}rgb.gamma=rgbGamma;return rgb}(1);function rgbSpline(spline){return function(colors){var n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n),i,color;for(i=0;i<n;++i){color=d3Color.rgb(colors[i]);r[i]=color.r||0;g[i]=color.g||0;b[i]=color.b||0}r=spline(r);g=spline(g);b=spline(b);color.opacity=1;return function(t){color.r=r(t);color.g=g(t);color.b=b(t);return color+""}}}var rgbBasis=rgbSpline(basis$1);var rgbBasisClosed=rgbSpline(basisClosed);function numberArray(a,b){if(!b)b=[];var n=a?Math.min(b.length,a.length):0,c=b.slice(),i;return function(t){for(i=0;i<n;++i)c[i]=a[i]*(1-t)+b[i]*t;return c}}function isNumberArray(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}function array(a,b){return(isNumberArray(b)?numberArray:genericArray)(a,b)}function genericArray(a,b){var nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb),i;for(i=0;i<na;++i)x[i]=value(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}function date(a,b){var d=new Date;return a=+a,b=+b,function(t){return d.setTime(a*(1-t)+b*t),d}}function number(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function object(a,b){var i={},c={},k;if(a===null||typeof a!=="object")a={};if(b===null||typeof b!=="object")b={};for(k in b){if(k in a){i[k]=value(a[k],b[k])}else{c[k]=b[k]}}return function(t){for(k in i)c[k]=i[k](t);return c}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(b){return function(){return b}}function one(b){return function(t){return b(t)+""}}function string(a,b){var bi=reA.lastIndex=reB.lastIndex=0,am,bm,bs,i=-1,s=[],q=[];a=a+"",b=b+"";while((am=reA.exec(a))&&(bm=reB.exec(b))){if((bs=bm.index)>bi){bs=b.slice(bi,bs);if(s[i])s[i]+=bs;else s[++i]=bs}if((am=am[0])===(bm=bm[0])){if(s[i])s[i]+=bm;else s[++i]=bm}else{s[++i]=null;q.push({i:i,x:number(am,bm)})}bi=reB.lastIndex}if(bi<b.length){bs=b.slice(bi);if(s[i])s[i]+=bs;else s[++i]=bs}return s.length<2?q[0]?one(q[0].x):zero(b):(b=q.length,function(t){for(var i=0,o;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function value(a,b){var t=typeof b,c;return b==null||t==="boolean"?constant(b):(t==="number"?number:t==="string"?(c=d3Color.color(b))?(b=c,rgb):string:b instanceof d3Color.color?rgb:b instanceof Date?date:isNumberArray(b)?numberArray:Array.isArray(b)?genericArray:typeof b.valueOf!=="function"&&typeof b.toString!=="function"||isNaN(b)?object:number)(a,b)}function discrete(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}function hue$1(a,b){var i=hue(+a,+b);return function(t){var x=i(t);return x-360*Math.floor(x/360)}}function round(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}}var degrees=180/Math.PI;var identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;if(scaleX=Math.sqrt(a*a+b*b))a/=scaleX,b/=scaleX;if(skewX=a*c+b*d)c-=a*skewX,d-=b*skewX;if(scaleY=Math.sqrt(c*c+d*d))c/=scaleY,d/=scaleY,skewX/=scaleY;if(a*d<b*c)a=-a,b=-b,skewX=-skewX,scaleX=-scaleX;return{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY}}var cssNode,cssRoot,cssView,svgNode;function parseCss(value){if(value==="none")return identity;if(!cssNode)cssNode=document.createElement("DIV"),cssRoot=document.documentElement,cssView=document.defaultView;cssNode.style.transform=value;value=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform");cssRoot.removeChild(cssNode);value=value.slice(7,-1).split(",");return decompose(+value[0],+value[1],+value[2],+value[3],+value[4],+value[5])}function parseSvg(value){if(value==null)return identity;if(!svgNode)svgNode=document.createElementNS("http://www.w3.org/2000/svg","g");svgNode.setAttribute("transform",value);if(!(value=svgNode.transform.baseVal.consolidate()))return identity;value=value.matrix;return decompose(value.a,value.b,value.c,value.d,value.e,value.f)}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:number(xa,xb)},{i:i-2,x:number(ya,yb)})}else if(xb||yb){s.push("translate("+xb+pxComma+yb+pxParen)}}function rotate(a,b,s,q){if(a!==b){if(a-b>180)b+=360;else if(b-a>180)a+=360;q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:number(a,b)})}else if(b){s.push(pop(s)+"rotate("+b+degParen)}}function skewX(a,b,s,q){if(a!==b){q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:number(a,b)})}else if(b){s.push(pop(s)+"skewX("+b+degParen)}}function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:number(xa,xb)},{i:i-2,x:number(ya,yb)})}else if(xb!==1||yb!==1){s.push(pop(s)+"scale("+xb+","+yb+")")}}return function(a,b){var s=[],q=[];a=parse(a),b=parse(b);translate(a.translateX,a.translateY,b.translateX,b.translateY,s,q);rotate(a.rotate,b.rotate,s,q);skewX(a.skewX,b.skewX,s,q);scale(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q);a=b=null;return function(t){var i=-1,n=q.length,o;while(++i<n)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)");var interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");var rho=Math.SQRT2,rho2=2,rho4=4,epsilon2=1e-12;function cosh(x){return((x=Math.exp(x))+1/x)/2}function sinh(x){return((x=Math.exp(x))-1/x)/2}function tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}function zoom(p0,p1){var ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy,i,S;if(d2<epsilon2){S=Math.log(w1/w0)/rho;i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]}}else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4*d2)/(2*w0*rho2*d1),b1=(w1*w1-w0*w0-rho4*d2)/(2*w1*rho2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho;i=function(t){var s=t*S,coshr0=cosh(r0),u=w0/(rho2*d1)*(coshr0*tanh(rho*s+r0)-sinh(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh(rho*s+r0)]}}i.duration=S*1e3;return i}function hsl(hue){return function(start,end){var h=hue((start=d3Color.hsl(start)).h,(end=d3Color.hsl(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){start.h=h(t);start.s=s(t);start.l=l(t);start.opacity=opacity(t);return start+""}}}var hsl$1=hsl(hue);var hslLong=hsl(nogamma);function lab(start,end){var l=nogamma((start=d3Color.lab(start)).l,(end=d3Color.lab(end)).l),a=nogamma(start.a,end.a),b=nogamma(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){start.l=l(t);start.a=a(t);start.b=b(t);start.opacity=opacity(t);return start+""}}function hcl(hue){return function(start,end){var h=hue((start=d3Color.hcl(start)).h,(end=d3Color.hcl(end)).h),c=nogamma(start.c,end.c),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){start.h=h(t);start.c=c(t);start.l=l(t);start.opacity=opacity(t);return start+""}}}var hcl$1=hcl(hue);var hclLong=hcl(nogamma);function cubehelix(hue){return function cubehelixGamma(y){y=+y;function cubehelix(start,end){var h=hue((start=d3Color.cubehelix(start)).h,(end=d3Color.cubehelix(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){start.h=h(t);start.s=s(t);start.l=l(Math.pow(t,y));start.opacity=opacity(t);return start+""}}cubehelix.gamma=cubehelixGamma;return cubehelix}(1)}var cubehelix$1=cubehelix(hue);var cubehelixLong=cubehelix(nogamma);function piecewise(interpolate,values){var i=0,n=values.length-1,v=values[0],I=new Array(n<0?0:n);while(i<n)I[i]=interpolate(v,v=values[++i]);return function(t){var i=Math.max(0,Math.min(n-1,Math.floor(t*=n)));return I[i](t-i)}}function quantize(interpolator,n){var samples=new Array(n);for(var i=0;i<n;++i)samples[i]=interpolator(i/(n-1));return samples}exports.interpolate=value;exports.interpolateArray=array;exports.interpolateBasis=basis$1;exports.interpolateBasisClosed=basisClosed;exports.interpolateCubehelix=cubehelix$1;exports.interpolateCubehelixLong=cubehelixLong;exports.interpolateDate=date;exports.interpolateDiscrete=discrete;exports.interpolateHcl=hcl$1;exports.interpolateHclLong=hclLong;exports.interpolateHsl=hsl$1;exports.interpolateHslLong=hslLong;exports.interpolateHue=hue$1;exports.interpolateLab=lab;exports.interpolateNumber=number;exports.interpolateNumberArray=numberArray;exports.interpolateObject=object;exports.interpolateRgb=rgb;exports.interpolateRgbBasis=rgbBasis;exports.interpolateRgbBasisClosed=rgbBasisClosed;exports.interpolateRound=round;exports.interpolateString=string;exports.interpolateTransformCss=interpolateTransformCss;exports.interpolateTransformSvg=interpolateTransformSvg;exports.interpolateZoom=zoom;exports.piecewise=piecewise;exports.quantize=quantize;Object.defineProperty(exports,"__esModule",{value:true})}))},393:function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports):undefined})(this,(function(exports){"use strict";function formatDecimal(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}function exponent(x){return x=formatDecimal(Math.abs(x)),x?x[1]:NaN}function formatGroup(grouping,thousands){return function(value,width){var i=value.length,t=[],j=0,g=grouping[0],length=0;while(i>0&&g>0){if(length+g+1>width)g=Math.max(1,width-length);t.push(value.substring(i-=g,i+g));if((length+=g+1)>width)break;g=grouping[j=(j+1)%grouping.length]}return t.reverse().join(thousands)}}function formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(specifier){this.fill=specifier.fill===undefined?" ":specifier.fill+"";this.align=specifier.align===undefined?">":specifier.align+"";this.sign=specifier.sign===undefined?"-":specifier.sign+"";this.symbol=specifier.symbol===undefined?"":specifier.symbol+"";this.zero=!!specifier.zero;this.width=specifier.width===undefined?undefined:+specifier.width;this.comma=!!specifier.comma;this.precision=specifier.precision===undefined?undefined:+specifier.precision;this.trim=!!specifier.trim;this.type=specifier.type===undefined?"":specifier.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(s){out:for(var n=s.length,i=1,i0=-1,i1;i<n;++i){switch(s[i]){case".":i0=i1=i;break;case"0":if(i0===0)i0=i;i1=i;break;default:if(!+s[i])break out;if(i0>0)i0=0;break}}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}var prefixExponent;function formatPrefixAuto(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(exponent/3)))*3)+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimal(x,Math.max(0,p+i-1))[0]}function formatRounded(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}var formatTypes={"%":function(x,p){return(x*100).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(x*100,p)},r:formatRounded,s:formatPrefixAuto,X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}};function identity(x){return x}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(locale){var group=locale.grouping===undefined||locale.thousands===undefined?identity:formatGroup(map.call(locale.grouping,Number),locale.thousands+""),currencyPrefix=locale.currency===undefined?"":locale.currency[0]+"",currencySuffix=locale.currency===undefined?"":locale.currency[1]+"",decimal=locale.decimal===undefined?".":locale.decimal+"",numerals=locale.numerals===undefined?identity:formatNumerals(map.call(locale.numerals,String)),percent=locale.percent===undefined?"%":locale.percent+"",minus=locale.minus===undefined?"-":locale.minus+"",nan=locale.nan===undefined?"NaN":locale.nan+"";function newFormat(specifier){specifier=formatSpecifier(specifier);var fill=specifier.fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;if(type==="n")comma=true,type="g";else if(!formatTypes[type])precision===undefined&&(precision=12),trim=true,type="g";if(zero||fill==="0"&&align==="=")zero=true,fill="0",align="=";var prefix=symbol==="$"?currencyPrefix:symbol==="#"&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix=symbol==="$"?currencySuffix:/[%p]/.test(type)?percent:"";var formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);precision=precision===undefined?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision));function format(value){var valuePrefix=prefix,valueSuffix=suffix,i,n,c;if(type==="c"){valueSuffix=formatType(value)+valueSuffix;value=""}else{value=+value;var valueNegative=value<0||1/value<0;value=isNaN(value)?nan:formatType(Math.abs(value),precision);if(trim)value=formatTrim(value);if(valueNegative&&+value===0&&sign!=="+")valueNegative=false;valuePrefix=(valueNegative?sign==="("?sign:minus:sign==="-"||sign==="("?"":sign)+valuePrefix;valueSuffix=(type==="s"?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&sign==="("?")":"");if(maybeSuffix){i=-1,n=value.length;while(++i<n){if(c=value.charCodeAt(i),48>c||c>57){valueSuffix=(c===46?decimal+value.slice(i+1):value.slice(i))+valueSuffix;value=value.slice(0,i);break}}}}if(comma&&!zero)value=group(value,Infinity);var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";if(comma&&zero)value=group(padding+value,padding.length?width-valueSuffix.length:Infinity),padding="";switch(align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix;break}return numerals(value)}format.toString=function(){return specifier+""};return format}function formatPrefix(specifier,value){var f=newFormat((specifier=formatSpecifier(specifier),specifier.type="f",specifier)),e=Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))*3,k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}return{format:newFormat,formatPrefix:formatPrefix}}var locale;defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function defaultLocale(definition){locale=formatLocale(definition);exports.format=locale.format;exports.formatPrefix=locale.formatPrefix;return locale}function precisionFixed(step){return Math.max(0,-exponent(Math.abs(step)))}function precisionPrefix(step,value){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))*3-exponent(Math.abs(step)))}function precisionRound(step,max){step=Math.abs(step),max=Math.abs(max)-step;return Math.max(0,exponent(max)-exponent(step))+1}exports.FormatSpecifier=FormatSpecifier;exports.formatDefaultLocale=defaultLocale;exports.formatLocale=formatLocale;exports.formatSpecifier=formatSpecifier;exports.precisionFixed=precisionFixed;exports.precisionPrefix=precisionPrefix;exports.precisionRound=precisionRound;Object.defineProperty(exports,"__esModule",{value:true})}))},394:function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports,__webpack_require__(251)):undefined})(this,(function(exports,d3Time){"use strict";function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);date.setFullYear(d.y);return date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));date.setUTCFullYear(d.y);return date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newDate(y,m,d){return{y:y,m:m,d:d,H:0,M:0,S:0,L:0}}function formatLocale(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;var periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths);var formats={a:formatShortWeekday,A:formatWeekday,b:formatShortMonth,B:formatMonth,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:formatPeriod,q:formatQuarter,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent};var utcFormats={a:formatUTCShortWeekday,A:formatUTCWeekday,b:formatUTCShortMonth,B:formatUTCMonth,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:formatUTCPeriod,q:formatUTCQuarter,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent};var parses={a:parseShortWeekday,A:parseWeekday,b:parseShortMonth,B:parseMonth,c:parseLocaleDateTime,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:parsePeriod,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:parseLocaleDate,X:parseLocaleTime,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};formats.x=newFormat(locale_date,formats);formats.X=newFormat(locale_time,formats);formats.c=newFormat(locale_dateTime,formats);utcFormats.x=newFormat(locale_date,utcFormats);utcFormats.X=newFormat(locale_time,utcFormats);utcFormats.c=newFormat(locale_dateTime,utcFormats);function newFormat(specifier,formats){return function(date){var string=[],i=-1,j=0,n=specifier.length,c,pad,format;if(!(date instanceof Date))date=new Date(+date);while(++i<n){if(specifier.charCodeAt(i)===37){string.push(specifier.slice(j,i));if((pad=pads[c=specifier.charAt(++i)])!=null)c=specifier.charAt(++i);else pad=c==="e"?" ":"0";if(format=formats[c])c=format(date,pad);string.push(c);j=i+1}}string.push(specifier.slice(j,i));return string.join("")}}function newParse(specifier,Z){return function(string){var d=newDate(1900,undefined,1),i=parseSpecifier(d,specifier,string+="",0),week,day;if(i!=string.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(d.s*1e3+("L"in d?d.L:0));if(Z&&!("Z"in d))d.Z=0;if("p"in d)d.H=d.H%12+d.p*12;if(d.m===undefined)d.m="q"in d?d.q:0;if("V"in d){if(d.V<1||d.V>53)return null;if(!("w"in d))d.w=1;if("Z"in d){week=utcDate(newDate(d.y,0,1)),day=week.getUTCDay();week=day>4||day===0?d3Time.utcMonday.ceil(week):d3Time.utcMonday(week);week=d3Time.utcDay.offset(week,(d.V-1)*7);d.y=week.getUTCFullYear();d.m=week.getUTCMonth();d.d=week.getUTCDate()+(d.w+6)%7}else{week=localDate(newDate(d.y,0,1)),day=week.getDay();week=day>4||day===0?d3Time.timeMonday.ceil(week):d3Time.timeMonday(week);week=d3Time.timeDay.offset(week,(d.V-1)*7);d.y=week.getFullYear();d.m=week.getMonth();d.d=week.getDate()+(d.w+6)%7}}else if("W"in d||"U"in d){if(!("w"in d))d.w="u"in d?d.u%7:"W"in d?1:0;day="Z"in d?utcDate(newDate(d.y,0,1)).getUTCDay():localDate(newDate(d.y,0,1)).getDay();d.m=0;d.d="W"in d?(d.w+6)%7+d.W*7-(day+5)%7:d.w+d.U*7-(day+6)%7}if("Z"in d){d.H+=d.Z/100|0;d.M+=d.Z%100;return utcDate(d)}return localDate(d)}}function parseSpecifier(d,specifier,string,j){var i=0,n=specifier.length,m=string.length,c,parse;while(i<n){if(j>=m)return-1;c=specifier.charCodeAt(i++);if(c===37){c=specifier.charAt(i++);parse=parses[c in pads?specifier.charAt(i++):c];if(!parse||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++)){return-1}}return j}function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)}function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)}function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)}function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]}function formatWeekday(d){return locale_weekdays[d.getDay()]}function formatShortMonth(d){return locale_shortMonths[d.getMonth()]}function formatMonth(d){return locale_months[d.getMonth()]}function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]}function formatQuarter(d){return 1+~~(d.getMonth()/3)}function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]}function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]}function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]}function formatUTCMonth(d){return locale_months[d.getUTCMonth()]}function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]}function formatUTCQuarter(d){return 1+~~(d.getUTCMonth()/3)}return{format:function(specifier){var f=newFormat(specifier+="",formats);f.toString=function(){return specifier};return f},parse:function(specifier){var p=newParse(specifier+="",false);p.toString=function(){return specifier};return p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);f.toString=function(){return specifier};return f},utcParse:function(specifier){var p=newParse(specifier+="",true);p.toString=function(){return specifier};return p}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){var map={},i=-1,n=names.length;while(++i<n)map[names[i].toLowerCase()]=i;return map}function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseQuarter(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.q=n[0]*3-3,i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.s=+n[0],i+n[0].length):-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2)}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad(1+d3Time.timeDay.count(d3Time.timeYear(d),d),p,3)}function formatMilliseconds(d,p){return pad(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+"000"}function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){var day=d.getDay();return day===0?7:day}function formatWeekNumberSunday(d,p){return pad(d3Time.timeSunday.count(d3Time.timeYear(d)-1,d),p,2)}function formatWeekNumberISO(d,p){var day=d.getDay();d=day>=4||day===0?d3Time.timeThursday(d):d3Time.timeThursday.ceil(d);return pad(d3Time.timeThursday.count(d3Time.timeYear(d),d)+(d3Time.timeYear(d).getDay()===4),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad(d3Time.timeMonday.count(d3Time.timeYear(d)-1,d),p,2)}function formatYear(d,p){return pad(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return pad(d.getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad(z/60|0,"0",2)+pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return pad(1+d3Time.utcDay.count(d3Time.utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+"000"}function formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return dow===0?7:dow}function formatUTCWeekNumberSunday(d,p){return pad(d3Time.utcSunday.count(d3Time.utcYear(d)-1,d),p,2)}function formatUTCWeekNumberISO(d,p){var day=d.getUTCDay();d=day>=4||day===0?d3Time.utcThursday(d):d3Time.utcThursday.ceil(d);return pad(d3Time.utcThursday.count(d3Time.utcYear(d),d)+(d3Time.utcYear(d).getUTCDay()===4),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad(d3Time.utcMonday.count(d3Time.utcYear(d)-1,d),p,2)}function formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(d){return+d}function formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}var locale;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(definition){locale=formatLocale(definition);exports.timeFormat=locale.format;exports.timeParse=locale.parse;exports.utcFormat=locale.utcFormat;exports.utcParse=locale.utcParse;return locale}var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(date){return date.toISOString()}var formatIso=Date.prototype.toISOString?formatIsoNative:exports.utcFormat(isoSpecifier);function parseIsoNative(string){var date=new Date(string);return isNaN(date)?null:date}var parseIso=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:exports.utcParse(isoSpecifier);exports.isoFormat=formatIso;exports.isoParse=parseIso;exports.timeFormatDefaultLocale=defaultLocale;exports.timeFormatLocale=formatLocale;Object.defineProperty(exports,"__esModule",{value:true})}))},395:function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports,__webpack_require__(396)):undefined})(this,(function(exports,d3Path){"use strict";function constant(x){return function constant(){return x}}var abs=Math.abs;var atan2=Math.atan2;var cos=Math.cos;var max=Math.max;var min=Math.min;var sin=Math.sin;var sqrt=Math.sqrt;var epsilon=1e-12;var pi=Math.PI;var halfPi=pi/2;var tau=2*pi;function acos(x){return x>1?0:x<-1?pi:Math.acos(x)}function asin(x){return x>=1?halfPi:x<=-1?-halfPi:Math.asin(x)}function arcInnerRadius(d){return d.innerRadius}function arcOuterRadius(d){return d.outerRadius}function arcStartAngle(d){return d.startAngle}function arcEndAngle(d){return d.endAngle}function arcPadAngle(d){return d&&d.padAngle}function intersect(x0,y0,x1,y1,x2,y2,x3,y3){var x10=x1-x0,y10=y1-y0,x32=x3-x2,y32=y3-y2,t=y32*x10-x32*y10;if(t*t<epsilon)return;t=(x32*(y0-y2)-y32*(x0-x2))/t;return[x0+t*x10,y0+t*y10]}function cornerTangents(x0,y0,x1,y1,r1,rc,cw){var x01=x0-x1,y01=y0-y1,lo=(cw?rc:-rc)/sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x11=x0+ox,y11=y0+oy,x10=x1+ox,y10=y1+oy,x00=(x11+x10)/2,y00=(y11+y10)/2,dx=x10-x11,dy=y10-y11,d2=dx*dx+dy*dy,r=r1-rc,D=x11*y10-x10*y11,d=(dy<0?-1:1)*sqrt(max(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x00,dy0=cy0-y00,dx1=cx1-x00,dy1=cy1-y00;if(dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1)cx0=cx1,cy0=cy1;return{cx:cx0,cy:cy0,x01:-ox,y01:-oy,x11:cx0*(r1/r-1),y11:cy0*(r1/r-1)}}function arc(){var innerRadius=arcInnerRadius,outerRadius=arcOuterRadius,cornerRadius=constant(0),padRadius=null,startAngle=arcStartAngle,endAngle=arcEndAngle,padAngle=arcPadAngle,context=null;function arc(){var buffer,r,r0=+innerRadius.apply(this,arguments),r1=+outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)-halfPi,a1=endAngle.apply(this,arguments)-halfPi,da=abs(a1-a0),cw=a1>a0;if(!context)context=buffer=d3Path.path();if(r1<r0)r=r1,r1=r0,r0=r;if(!(r1>epsilon))context.moveTo(0,0);else if(da>tau-epsilon){context.moveTo(r1*cos(a0),r1*sin(a0));context.arc(0,0,r1,a0,a1,!cw);if(r0>epsilon){context.moveTo(r0*cos(a1),r0*sin(a1));context.arc(0,0,r0,a1,a0,cw)}}else{var a01=a0,a11=a1,a00=a0,a10=a1,da0=da,da1=da,ap=padAngle.apply(this,arguments)/2,rp=ap>epsilon&&(padRadius?+padRadius.apply(this,arguments):sqrt(r0*r0+r1*r1)),rc=min(abs(r1-r0)/2,+cornerRadius.apply(this,arguments)),rc0=rc,rc1=rc,t0,t1;if(rp>epsilon){var p0=asin(rp/r0*sin(ap)),p1=asin(rp/r1*sin(ap));if((da0-=p0*2)>epsilon)p0*=cw?1:-1,a00+=p0,a10-=p0;else da0=0,a00=a10=(a0+a1)/2;if((da1-=p1*2)>epsilon)p1*=cw?1:-1,a01+=p1,a11-=p1;else da1=0,a01=a11=(a0+a1)/2}var x01=r1*cos(a01),y01=r1*sin(a01),x10=r0*cos(a10),y10=r0*sin(a10);if(rc>epsilon){var x11=r1*cos(a11),y11=r1*sin(a11),x00=r0*cos(a00),y00=r0*sin(a00),oc;if(da<pi&&(oc=intersect(x01,y01,x00,y00,x11,y11,x10,y10))){var ax=x01-oc[0],ay=y01-oc[1],bx=x11-oc[0],by=y11-oc[1],kc=1/sin(acos((ax*bx+ay*by)/(sqrt(ax*ax+ay*ay)*sqrt(bx*bx+by*by)))/2),lc=sqrt(oc[0]*oc[0]+oc[1]*oc[1]);rc0=min(rc,(r0-lc)/(kc-1));rc1=min(rc,(r1-lc)/(kc+1))}}if(!(da1>epsilon))context.moveTo(x01,y01);else if(rc1>epsilon){t0=cornerTangents(x00,y00,x01,y01,r1,rc1,cw);t1=cornerTangents(x11,y11,x10,y10,r1,rc1,cw);context.moveTo(t0.cx+t0.x01,t0.cy+t0.y01);if(rc1<rc)context.arc(t0.cx,t0.cy,rc1,atan2(t0.y01,t0.x01),atan2(t1.y01,t1.x01),!cw);else{context.arc(t0.cx,t0.cy,rc1,atan2(t0.y01,t0.x01),atan2(t0.y11,t0.x11),!cw);context.arc(0,0,r1,atan2(t0.cy+t0.y11,t0.cx+t0.x11),atan2(t1.cy+t1.y11,t1.cx+t1.x11),!cw);context.arc(t1.cx,t1.cy,rc1,atan2(t1.y11,t1.x11),atan2(t1.y01,t1.x01),!cw)}}else context.moveTo(x01,y01),context.arc(0,0,r1,a01,a11,!cw);if(!(r0>epsilon)||!(da0>epsilon))context.lineTo(x10,y10);else if(rc0>epsilon){t0=cornerTangents(x10,y10,x11,y11,r0,-rc0,cw);t1=cornerTangents(x01,y01,x00,y00,r0,-rc0,cw);context.lineTo(t0.cx+t0.x01,t0.cy+t0.y01);if(rc0<rc)context.arc(t0.cx,t0.cy,rc0,atan2(t0.y01,t0.x01),atan2(t1.y01,t1.x01),!cw);else{context.arc(t0.cx,t0.cy,rc0,atan2(t0.y01,t0.x01),atan2(t0.y11,t0.x11),!cw);context.arc(0,0,r0,atan2(t0.cy+t0.y11,t0.cx+t0.x11),atan2(t1.cy+t1.y11,t1.cx+t1.x11),cw);context.arc(t1.cx,t1.cy,rc0,atan2(t1.y11,t1.x11),atan2(t1.y01,t1.x01),!cw)}}else context.arc(0,0,r0,a10,a00,cw)}context.closePath();if(buffer)return context=null,buffer+""||null}arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-pi/2;return[cos(a)*r,sin(a)*r]};arc.innerRadius=function(_){return arguments.length?(innerRadius=typeof _==="function"?_:constant(+_),arc):innerRadius};arc.outerRadius=function(_){return arguments.length?(outerRadius=typeof _==="function"?_:constant(+_),arc):outerRadius};arc.cornerRadius=function(_){return arguments.length?(cornerRadius=typeof _==="function"?_:constant(+_),arc):cornerRadius};arc.padRadius=function(_){return arguments.length?(padRadius=_==null?null:typeof _==="function"?_:constant(+_),arc):padRadius};arc.startAngle=function(_){return arguments.length?(startAngle=typeof _==="function"?_:constant(+_),arc):startAngle};arc.endAngle=function(_){return arguments.length?(endAngle=typeof _==="function"?_:constant(+_),arc):endAngle};arc.padAngle=function(_){return arguments.length?(padAngle=typeof _==="function"?_:constant(+_),arc):padAngle};arc.context=function(_){return arguments.length?(context=_==null?null:_,arc):context};return arc}function Linear(context){this._context=context}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:this._context.lineTo(x,y);break}}};function curveLinear(context){return new Linear(context)}function x(p){return p[0]}function y(p){return p[1]}function line(){var x$1=x,y$1=y,defined=constant(true),context=null,curve=curveLinear,output=null;function line(data){var i,n=data.length,d,defined0=false,buffer;if(context==null)output=curve(buffer=d3Path.path());for(i=0;i<=n;++i){if(!(i<n&&defined(d=data[i],i,data))===defined0){if(defined0=!defined0)output.lineStart();else output.lineEnd()}if(defined0)output.point(+x$1(d,i,data),+y$1(d,i,data))}if(buffer)return output=null,buffer+""||null}line.x=function(_){return arguments.length?(x$1=typeof _==="function"?_:constant(+_),line):x$1};line.y=function(_){return arguments.length?(y$1=typeof _==="function"?_:constant(+_),line):y$1};line.defined=function(_){return arguments.length?(defined=typeof _==="function"?_:constant(!!_),line):defined};line.curve=function(_){return arguments.length?(curve=_,context!=null&&(output=curve(context)),line):curve};line.context=function(_){return arguments.length?(_==null?context=output=null:output=curve(context=_),line):context};return line}function area(){var x0=x,x1=null,y0=constant(0),y1=y,defined=constant(true),context=null,curve=curveLinear,output=null;function area(data){var i,j,k,n=data.length,d,defined0=false,buffer,x0z=new Array(n),y0z=new Array(n);if(context==null)output=curve(buffer=d3Path.path());for(i=0;i<=n;++i){if(!(i<n&&defined(d=data[i],i,data))===defined0){if(defined0=!defined0){j=i;output.areaStart();output.lineStart()}else{output.lineEnd();output.lineStart();for(k=i-1;k>=j;--k){output.point(x0z[k],y0z[k])}output.lineEnd();output.areaEnd()}}if(defined0){x0z[i]=+x0(d,i,data),y0z[i]=+y0(d,i,data);output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i])}}if(buffer)return output=null,buffer+""||null}function arealine(){return line().defined(defined).curve(curve).context(context)}area.x=function(_){return arguments.length?(x0=typeof _==="function"?_:constant(+_),x1=null,area):x0};area.x0=function(_){return arguments.length?(x0=typeof _==="function"?_:constant(+_),area):x0};area.x1=function(_){return arguments.length?(x1=_==null?null:typeof _==="function"?_:constant(+_),area):x1};area.y=function(_){return arguments.length?(y0=typeof _==="function"?_:constant(+_),y1=null,area):y0};area.y0=function(_){return arguments.length?(y0=typeof _==="function"?_:constant(+_),area):y0};area.y1=function(_){return arguments.length?(y1=_==null?null:typeof _==="function"?_:constant(+_),area):y1};area.lineX0=area.lineY0=function(){return arealine().x(x0).y(y0)};area.lineY1=function(){return arealine().x(x0).y(y1)};area.lineX1=function(){return arealine().x(x1).y(y0)};area.defined=function(_){return arguments.length?(defined=typeof _==="function"?_:constant(!!_),area):defined};area.curve=function(_){return arguments.length?(curve=_,context!=null&&(output=curve(context)),area):curve};area.context=function(_){return arguments.length?(_==null?context=output=null:output=curve(context=_),area):context};return area}function descending(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function identity(d){return d}function pie(){var value=identity,sortValues=descending,sort=null,startAngle=constant(0),endAngle=constant(tau),padAngle=constant(0);function pie(data){var i,n=data.length,j,k,sum=0,index=new Array(n),arcs=new Array(n),a0=+startAngle.apply(this,arguments),da=Math.min(tau,Math.max(-tau,endAngle.apply(this,arguments)-a0)),a1,p=Math.min(Math.abs(da)/n,padAngle.apply(this,arguments)),pa=p*(da<0?-1:1),v;for(i=0;i<n;++i){if((v=arcs[index[i]=i]=+value(data[i],i,data))>0){sum+=v}}if(sortValues!=null)index.sort((function(i,j){return sortValues(arcs[i],arcs[j])}));else if(sort!=null)index.sort((function(i,j){return sort(data[i],data[j])}));for(i=0,k=sum?(da-n*pa)/sum:0;i<n;++i,a0=a1){j=index[i],v=arcs[j],a1=a0+(v>0?v*k:0)+pa,arcs[j]={data:data[j],index:i,value:v,startAngle:a0,endAngle:a1,padAngle:p}}return arcs}pie.value=function(_){return arguments.length?(value=typeof _==="function"?_:constant(+_),pie):value};pie.sortValues=function(_){return arguments.length?(sortValues=_,sort=null,pie):sortValues};pie.sort=function(_){return arguments.length?(sort=_,sortValues=null,pie):sort};pie.startAngle=function(_){return arguments.length?(startAngle=typeof _==="function"?_:constant(+_),pie):startAngle};pie.endAngle=function(_){return arguments.length?(endAngle=typeof _==="function"?_:constant(+_),pie):endAngle};pie.padAngle=function(_){return arguments.length?(padAngle=typeof _==="function"?_:constant(+_),pie):padAngle};return pie}var curveRadialLinear=curveRadial(curveLinear);function Radial(curve){this._curve=curve}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,r){this._curve.point(r*Math.sin(a),r*-Math.cos(a))}};function curveRadial(curve){function radial(context){return new Radial(curve(context))}radial._curve=curve;return radial}function lineRadial(l){var c=l.curve;l.angle=l.x,delete l.x;l.radius=l.y,delete l.y;l.curve=function(_){return arguments.length?c(curveRadial(_)):c()._curve};return l}function lineRadial$1(){return lineRadial(line().curve(curveRadialLinear))}function areaRadial(){var a=area().curve(curveRadialLinear),c=a.curve,x0=a.lineX0,x1=a.lineX1,y0=a.lineY0,y1=a.lineY1;a.angle=a.x,delete a.x;a.startAngle=a.x0,delete a.x0;a.endAngle=a.x1,delete a.x1;a.radius=a.y,delete a.y;a.innerRadius=a.y0,delete a.y0;a.outerRadius=a.y1,delete a.y1;a.lineStartAngle=function(){return lineRadial(x0())},delete a.lineX0;a.lineEndAngle=function(){return lineRadial(x1())},delete a.lineX1;a.lineInnerRadius=function(){return lineRadial(y0())},delete a.lineY0;a.lineOuterRadius=function(){return lineRadial(y1())},delete a.lineY1;a.curve=function(_){return arguments.length?c(curveRadial(_)):c()._curve};return a}function pointRadial(x,y){return[(y=+y)*Math.cos(x-=Math.PI/2),y*Math.sin(x)]}var slice=Array.prototype.slice;function linkSource(d){return d.source}function linkTarget(d){return d.target}function link(curve){var source=linkSource,target=linkTarget,x$1=x,y$1=y,context=null;function link(){var buffer,argv=slice.call(arguments),s=source.apply(this,argv),t=target.apply(this,argv);if(!context)context=buffer=d3Path.path();curve(context,+x$1.apply(this,(argv[0]=s,argv)),+y$1.apply(this,argv),+x$1.apply(this,(argv[0]=t,argv)),+y$1.apply(this,argv));if(buffer)return context=null,buffer+""||null}link.source=function(_){return arguments.length?(source=_,link):source};link.target=function(_){return arguments.length?(target=_,link):target};link.x=function(_){return arguments.length?(x$1=typeof _==="function"?_:constant(+_),link):x$1};link.y=function(_){return arguments.length?(y$1=typeof _==="function"?_:constant(+_),link):y$1};link.context=function(_){return arguments.length?(context=_==null?null:_,link):context};return link}function curveHorizontal(context,x0,y0,x1,y1){context.moveTo(x0,y0);context.bezierCurveTo(x0=(x0+x1)/2,y0,x0,y1,x1,y1)}function curveVertical(context,x0,y0,x1,y1){context.moveTo(x0,y0);context.bezierCurveTo(x0,y0=(y0+y1)/2,x1,y0,x1,y1)}function curveRadial$1(context,x0,y0,x1,y1){var p0=pointRadial(x0,y0),p1=pointRadial(x0,y0=(y0+y1)/2),p2=pointRadial(x1,y0),p3=pointRadial(x1,y1);context.moveTo(p0[0],p0[1]);context.bezierCurveTo(p1[0],p1[1],p2[0],p2[1],p3[0],p3[1])}function linkHorizontal(){return link(curveHorizontal)}function linkVertical(){return link(curveVertical)}function linkRadial(){var l=link(curveRadial$1);l.angle=l.x,delete l.x;l.radius=l.y,delete l.y;return l}var circle={draw:function(context,size){var r=Math.sqrt(size/pi);context.moveTo(r,0);context.arc(0,0,r,0,tau)}};var cross={draw:function(context,size){var r=Math.sqrt(size/5)/2;context.moveTo(-3*r,-r);context.lineTo(-r,-r);context.lineTo(-r,-3*r);context.lineTo(r,-3*r);context.lineTo(r,-r);context.lineTo(3*r,-r);context.lineTo(3*r,r);context.lineTo(r,r);context.lineTo(r,3*r);context.lineTo(-r,3*r);context.lineTo(-r,r);context.lineTo(-3*r,r);context.closePath()}};var tan30=Math.sqrt(1/3),tan30_2=tan30*2;var diamond={draw:function(context,size){var y=Math.sqrt(size/tan30_2),x=y*tan30;context.moveTo(0,-y);context.lineTo(x,0);context.lineTo(0,y);context.lineTo(-x,0);context.closePath()}};var ka=.8908130915292852,kr=Math.sin(pi/10)/Math.sin(7*pi/10),kx=Math.sin(tau/10)*kr,ky=-Math.cos(tau/10)*kr;var star={draw:function(context,size){var r=Math.sqrt(size*ka),x=kx*r,y=ky*r;context.moveTo(0,-r);context.lineTo(x,y);for(var i=1;i<5;++i){var a=tau*i/5,c=Math.cos(a),s=Math.sin(a);context.lineTo(s*r,-c*r);context.lineTo(c*x-s*y,s*x+c*y)}context.closePath()}};var square={draw:function(context,size){var w=Math.sqrt(size),x=-w/2;context.rect(x,x,w,w)}};var sqrt3=Math.sqrt(3);var triangle={draw:function(context,size){var y=-Math.sqrt(size/(sqrt3*3));context.moveTo(0,y*2);context.lineTo(-sqrt3*y,-y);context.lineTo(sqrt3*y,-y);context.closePath()}};var c=-.5,s=Math.sqrt(3)/2,k=1/Math.sqrt(12),a=(k/2+1)*3;var wye={draw:function(context,size){var r=Math.sqrt(size/a),x0=r/2,y0=r*k,x1=x0,y1=r*k+r,x2=-x1,y2=y1;context.moveTo(x0,y0);context.lineTo(x1,y1);context.lineTo(x2,y2);context.lineTo(c*x0-s*y0,s*x0+c*y0);context.lineTo(c*x1-s*y1,s*x1+c*y1);context.lineTo(c*x2-s*y2,s*x2+c*y2);context.lineTo(c*x0+s*y0,c*y0-s*x0);context.lineTo(c*x1+s*y1,c*y1-s*x1);context.lineTo(c*x2+s*y2,c*y2-s*x2);context.closePath()}};var symbols=[circle,cross,diamond,square,star,triangle,wye];function symbol(){var type=constant(circle),size=constant(64),context=null;function symbol(){var buffer;if(!context)context=buffer=d3Path.path();type.apply(this,arguments).draw(context,+size.apply(this,arguments));if(buffer)return context=null,buffer+""||null}symbol.type=function(_){return arguments.length?(type=typeof _==="function"?_:constant(_),symbol):type};symbol.size=function(_){return arguments.length?(size=typeof _==="function"?_:constant(+_),symbol):size};symbol.context=function(_){return arguments.length?(context=_==null?null:_,symbol):context};return symbol}function noop(){}function point(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6)}function Basis(context){this._context=context}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point(this,x,y);break}this._x0=this._x1,this._x1=x;this._y0=this._y1,this._y1=y}};function basis(context){return new Basis(context)}function BasisClosed(context){this._context=context}BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2);this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break}case 3:{this.point(this._x2,this._y2);this.point(this._x3,this._y3);this.point(this._x4,this._y4);break}}},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;this._x2=x,this._y2=y;break;case 1:this._point=2;this._x3=x,this._y3=y;break;case 2:this._point=3;this._x4=x,this._y4=y;this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);break;default:point(this,x,y);break}this._x0=this._x1,this._x1=x;this._y0=this._y1,this._y1=y}};function basisClosed(context){return new BasisClosed(context)}function BasisOpen(context){this._context=context}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var x0=(this._x0+4*this._x1+x)/6,y0=(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);break;case 3:this._point=4;default:point(this,x,y);break}this._x0=this._x1,this._x1=x;this._y0=this._y1,this._y1=y}};function basisOpen(context){return new BasisOpen(context)}function Bundle(context,beta){this._basis=new Basis(context);this._beta=beta}Bundle.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0){var x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1,t;while(++i<=j){t=i/j;this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy))}}this._x=this._y=null;this._basis.lineEnd()},point:function(x,y){this._x.push(+x);this._y.push(+y)}};var bundle=function custom(beta){function bundle(context){return beta===1?new Basis(context):new Bundle(context,beta)}bundle.beta=function(beta){return custom(+beta)};return bundle}(.85);function point$1(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2)}function Cardinal(context,tension){this._context=context;this._k=(1-tension)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$1(this,this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;this._x1=x,this._y1=y;break;case 2:this._point=3;default:point$1(this,x,y);break}this._x0=this._x1,this._x1=this._x2,this._x2=x;this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinal=function custom(tension){function cardinal(context){return new Cardinal(context,tension)}cardinal.tension=function(tension){return custom(+tension)};return cardinal}(0);function CardinalClosed(context,tension){this._context=context;this._k=(1-tension)/6}CardinalClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;this._x3=x,this._y3=y;break;case 1:this._point=2;this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3;this._x5=x,this._y5=y;break;default:point$1(this,x,y);break}this._x0=this._x1,this._x1=this._x2,this._x2=x;this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalClosed=function custom(tension){function cardinal(context){return new CardinalClosed(context,tension)}cardinal.tension=function(tension){return custom(+tension)};return cardinal}(0);function CardinalOpen(context,tension){this._context=context;this._k=(1-tension)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$1(this,x,y);break}this._x0=this._x1,this._x1=this._x2,this._x2=x;this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalOpen=function custom(tension){function cardinal(context){return new CardinalOpen(context,tension)}cardinal.tension=function(tension){return custom(+tension)};return cardinal}(0);function point$2(that,x,y){var x1=that._x1,y1=that._y1,x2=that._x2,y2=that._y2;if(that._l01_a>epsilon){var a=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n=3*that._l01_a*(that._l01_a+that._l12_a);x1=(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n;y1=(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n}if(that._l23_a>epsilon){var b=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m=3*that._l23_a*(that._l23_a+that._l12_a);x2=(x2*b+that._x1*that._l23_2a-x*that._l12_2a)/m;y2=(y2*b+that._y1*that._l23_2a-y*that._l12_2a)/m}that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom(context,alpha){this._context=context;this._alpha=alpha}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;if(this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;default:point$2(this,x,y);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=x;this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRom=function custom(alpha){function catmullRom(context){return alpha?new CatmullRom(context,alpha):new Cardinal(context,0)}catmullRom.alpha=function(alpha){return custom(+alpha)};return catmullRom}(.5);function CatmullRomClosed(context,alpha){this._context=context;this._alpha=alpha}CatmullRomClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function(x,y){x=+x,y=+y;if(this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=x,this._y3=y;break;case 1:this._point=2;this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3;this._x5=x,this._y5=y;break;default:point$2(this,x,y);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=x;this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRomClosed=function custom(alpha){function catmullRom(context){return alpha?new CatmullRomClosed(context,alpha):new CardinalClosed(context,0)}catmullRom.alpha=function(alpha){return custom(+alpha)};return catmullRom}(.5);function CatmullRomOpen(context,alpha){this._context=context;this._alpha=alpha}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3)this._context.closePath();this._line=1-this._line},point:function(x,y){x=+x,y=+y;if(this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,x,y);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=x;this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRomOpen=function custom(alpha){function catmullRom(context){return alpha?new CatmullRomOpen(context,alpha):new CardinalOpen(context,0)}catmullRom.alpha=function(alpha){return custom(+alpha)};return catmullRom}(.5);function LinearClosed(context){this._context=context}LinearClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._point=0},lineEnd:function(){if(this._point)this._context.closePath()},point:function(x,y){x=+x,y=+y;if(this._point)this._context.lineTo(x,y);else this._point=1,this._context.moveTo(x,y)}};function linearClosed(context){return new LinearClosed(context)}function sign(x){return x<0?-1:1}function slope3(that,x2,y2){var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y2-that._y1)/(h1||h0<0&&-0),p=(s0*h1+s1*h0)/(h0+h1);return(sign(s0)+sign(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0}function slope2(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}function point$3(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX(context){this._context=context}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$3(this,this._t0,slope2(this,this._t0));break}if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(x,y){var t1=NaN;x=+x,y=+y;if(x===this._x1&&y===this._y1)return;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;point$3(this,slope2(this,t1=slope3(this,x,y)),t1);break;default:point$3(this,this._t0,t1=slope3(this,x,y));break}this._x0=this._x1,this._x1=x;this._y0=this._y1,this._y1=y;this._t0=t1}};function MonotoneY(context){this._context=new ReflectContext(context)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(x,y){MonotoneX.prototype.point.call(this,y,x)};function ReflectContext(context){this._context=context}ReflectContext.prototype={moveTo:function(x,y){this._context.moveTo(y,x)},closePath:function(){this._context.closePath()},lineTo:function(x,y){this._context.lineTo(y,x)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._context.bezierCurveTo(y1,x1,y2,x2,y,x)}};function monotoneX(context){return new MonotoneX(context)}function monotoneY(context){return new MonotoneY(context)}function Natural(context){this._context=context}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var x=this._x,y=this._y,n=x.length;if(n){this._line?this._context.lineTo(x[0],y[0]):this._context.moveTo(x[0],y[0]);if(n===2){this._context.lineTo(x[1],y[1])}else{var px=controlPoints(x),py=controlPoints(y);for(var i0=0,i1=1;i1<n;++i0,++i1){this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],py[1][i0],x[i1],y[i1])}}}if(this._line||this._line!==0&&n===1)this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(x,y){this._x.push(+x);this._y.push(+y)}};function controlPoints(x){var i,n=x.length-1,m,a=new Array(n),b=new Array(n),r=new Array(n);a[0]=0,b[0]=2,r[0]=x[0]+2*x[1];for(i=1;i<n-1;++i)a[i]=1,b[i]=4,r[i]=4*x[i]+2*x[i+1];a[n-1]=2,b[n-1]=7,r[n-1]=8*x[n-1]+x[n];for(i=1;i<n;++i)m=a[i]/b[i-1],b[i]-=m,r[i]-=m*r[i-1];a[n-1]=r[n-1]/b[n-1];for(i=n-2;i>=0;--i)a[i]=(r[i]-a[i+1])/b[i];b[n-1]=(x[n]+a[n-1])/2;for(i=0;i<n-1;++i)b[i]=2*x[i+1]-a[i+1];return[a,b]}function natural(context){return new Natural(context)}function Step(context,t){this._context=context;this._t=t}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){if(0<this._t&&this._t<1&&this._point===2)this._context.lineTo(this._x,this._y);if(this._line||this._line!==0&&this._point===1)this._context.closePath();if(this._line>=0)this._t=1-this._t,this._line=1-this._line},point:function(x,y){x=+x,y=+y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:{if(this._t<=0){this._context.lineTo(this._x,y);this._context.lineTo(x,y)}else{var x1=this._x*(1-this._t)+x*this._t;this._context.lineTo(x1,this._y);this._context.lineTo(x1,y)}break}}this._x=x,this._y=y}};function step(context){return new Step(context,.5)}function stepBefore(context){return new Step(context,0)}function stepAfter(context){return new Step(context,1)}function none(series,order){if(!((n=series.length)>1))return;for(var i=1,j,s0,s1=series[order[0]],n,m=s1.length;i<n;++i){s0=s1,s1=series[order[i]];for(j=0;j<m;++j){s1[j][1]+=s1[j][0]=isNaN(s0[j][1])?s0[j][0]:s0[j][1]}}}function none$1(series){var n=series.length,o=new Array(n);while(--n>=0)o[n]=n;return o}function stackValue(d,key){return d[key]}function stack(){var keys=constant([]),order=none$1,offset=none,value=stackValue;function stack(data){var kz=keys.apply(this,arguments),i,m=data.length,n=kz.length,sz=new Array(n),oz;for(i=0;i<n;++i){for(var ki=kz[i],si=sz[i]=new Array(m),j=0,sij;j<m;++j){si[j]=sij=[0,+value(data[j],ki,j,data)];sij.data=data[j]}si.key=ki}for(i=0,oz=order(sz);i<n;++i){sz[oz[i]].index=i}offset(sz,oz);return sz}stack.keys=function(_){return arguments.length?(keys=typeof _==="function"?_:constant(slice.call(_)),stack):keys};stack.value=function(_){return arguments.length?(value=typeof _==="function"?_:constant(+_),stack):value};stack.order=function(_){return arguments.length?(order=_==null?none$1:typeof _==="function"?_:constant(slice.call(_)),stack):order};stack.offset=function(_){return arguments.length?(offset=_==null?none:_,stack):offset};return stack}function expand(series,order){if(!((n=series.length)>0))return;for(var i,n,j=0,m=series[0].length,y;j<m;++j){for(y=i=0;i<n;++i)y+=series[i][j][1]||0;if(y)for(i=0;i<n;++i)series[i][j][1]/=y}none(series,order)}function diverging(series,order){if(!((n=series.length)>0))return;for(var i,j=0,d,dy,yp,yn,n,m=series[order[0]].length;j<m;++j){for(yp=yn=0,i=0;i<n;++i){if((dy=(d=series[order[i]][j])[1]-d[0])>0){d[0]=yp,d[1]=yp+=dy}else if(dy<0){d[1]=yn,d[0]=yn+=dy}else{d[0]=0,d[1]=dy}}}}function silhouette(series,order){if(!((n=series.length)>0))return;for(var j=0,s0=series[order[0]],n,m=s0.length;j<m;++j){for(var i=0,y=0;i<n;++i)y+=series[i][j][1]||0;s0[j][1]+=s0[j][0]=-y/2}none(series,order)}function wiggle(series,order){if(!((n=series.length)>0)||!((m=(s0=series[order[0]]).length)>0))return;for(var y=0,j=1,s0,m,n;j<m;++j){for(var i=0,s1=0,s2=0;i<n;++i){var si=series[order[i]],sij0=si[j][1]||0,sij1=si[j-1][1]||0,s3=(sij0-sij1)/2;for(var k=0;k<i;++k){var sk=series[order[k]],skj0=sk[j][1]||0,skj1=sk[j-1][1]||0;s3+=skj0-skj1}s1+=sij0,s2+=s3*sij0}s0[j-1][1]+=s0[j-1][0]=y;if(s1)y-=s2/s1}s0[j-1][1]+=s0[j-1][0]=y;none(series,order)}function appearance(series){var peaks=series.map(peak);return none$1(series).sort((function(a,b){return peaks[a]-peaks[b]}))}function peak(series){var i=-1,j=0,n=series.length,vi,vj=-Infinity;while(++i<n)if((vi=+series[i][1])>vj)vj=vi,j=i;return j}function ascending(series){var sums=series.map(sum);return none$1(series).sort((function(a,b){return sums[a]-sums[b]}))}function sum(series){var s=0,i=-1,n=series.length,v;while(++i<n)if(v=+series[i][1])s+=v;return s}function descending$1(series){return ascending(series).reverse()}function insideOut(series){var n=series.length,i,j,sums=series.map(sum),order=appearance(series),top=0,bottom=0,tops=[],bottoms=[];for(i=0;i<n;++i){j=order[i];if(top<bottom){top+=sums[j];tops.push(j)}else{bottom+=sums[j];bottoms.push(j)}}return bottoms.reverse().concat(tops)}function reverse(series){return none$1(series).reverse()}exports.arc=arc;exports.area=area;exports.areaRadial=areaRadial;exports.curveBasis=basis;exports.curveBasisClosed=basisClosed;exports.curveBasisOpen=basisOpen;exports.curveBundle=bundle;exports.curveCardinal=cardinal;exports.curveCardinalClosed=cardinalClosed;exports.curveCardinalOpen=cardinalOpen;exports.curveCatmullRom=catmullRom;exports.curveCatmullRomClosed=catmullRomClosed;exports.curveCatmullRomOpen=catmullRomOpen;exports.curveLinear=curveLinear;exports.curveLinearClosed=linearClosed;exports.curveMonotoneX=monotoneX;exports.curveMonotoneY=monotoneY;exports.curveNatural=natural;exports.curveStep=step;exports.curveStepAfter=stepAfter;exports.curveStepBefore=stepBefore;exports.line=line;exports.lineRadial=lineRadial$1;exports.linkHorizontal=linkHorizontal;exports.linkRadial=linkRadial;exports.linkVertical=linkVertical;exports.pie=pie;exports.pointRadial=pointRadial;exports.radialArea=areaRadial;exports.radialLine=lineRadial$1;exports.stack=stack;exports.stackOffsetDiverging=diverging;exports.stackOffsetExpand=expand;exports.stackOffsetNone=none;exports.stackOffsetSilhouette=silhouette;exports.stackOffsetWiggle=wiggle;exports.stackOrderAppearance=appearance;exports.stackOrderAscending=ascending;exports.stackOrderDescending=descending$1;exports.stackOrderInsideOut=insideOut;exports.stackOrderNone=none$1;exports.stackOrderReverse=reverse;exports.symbol=symbol;exports.symbolCircle=circle;exports.symbolCross=cross;exports.symbolDiamond=diamond;exports.symbolSquare=square;exports.symbolStar=star;exports.symbolTriangle=triangle;exports.symbolWye=wye;exports.symbols=symbols;Object.defineProperty(exports,"__esModule",{value:true})}))},396:function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports):undefined})(this,(function(exports){"use strict";var pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function Path(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y)},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null){this._+="M"+(this._x1=x1)+","+(this._y1=y1)}else if(!(l01_2>epsilon));else if(!(Math.abs(y01*x21-y21*x01)>epsilon)||!r){this._+="L"+(this._x1=x1)+","+(this._y1=y1)}else{var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((pi-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;if(Math.abs(t01-1)>epsilon){this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)}this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}},arc:function(x,y,r,a0,a1,ccw){x=+x,y=+y,r=+r,ccw=!!ccw;var dx=r*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null){this._+="M"+x0+","+y0}else if(Math.abs(this._x1-x0)>epsilon||Math.abs(this._y1-y0)>epsilon){this._+="L"+x0+","+y0}if(!r)return;if(da<0)da=da%tau+tau;if(da>tauEpsilon){this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0)}else if(da>epsilon){this._+="A"+r+","+r+",0,"+ +(da>=pi)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))}},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z"},toString:function(){return this._}};exports.path=path;Object.defineProperty(exports,"__esModule",{value:true})}))},397:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner)}}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(true&&module.exports){classNames.default=classNames;module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},398:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(59);var react_1=__webpack_require__(2);var useEffectOnce_1=tslib_1.__importDefault(__webpack_require__(213));var useUnmount=function(fn){var fnRef=react_1.useRef(fn);fnRef.current=fn;useEffectOnce_1.default((function(){return function(){return fnRef.current()}}))};exports.default=useUnmount},495:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp}));var external_kbnSharedDeps_React_=__webpack_require__(2);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(65);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(60);var public_0=__webpack_require__(211);var _404=__webpack_require__(212);var link_to_logs=__webpack_require__(207);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(7);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var useMount=__webpack_require__(107);var useMount_default=__webpack_require__.n(useMount);var log_threshold=__webpack_require__(39);var public_=__webpack_require__(8);var document_title=__webpack_require__(108);var header=__webpack_require__(169);var help_center_content=__webpack_require__(221);var app_navigation=__webpack_require__(222);var routed_tabs=__webpack_require__(223);var components_page=__webpack_require__(89);var log_source=__webpack_require__(81);var redirect_with_query_params=__webpack_require__(224);var log_analysis=__webpack_require__(77);var loading_page=__webpack_require__(100);var log_analysis_setup=__webpack_require__(131);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(12);var lib=__webpack_require__(0);var runtime_types=__webpack_require__(13);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callJobsSummaryAPI=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var spaceId,sourceId,jobTypes,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:spaceId=requestArgs.spaceId,sourceId=requestArgs.sourceId,jobTypes=requestArgs.jobTypes;_context.next=3;return fetch("/api/ml/jobs/jobs_summary",{method:"POST",body:JSON.stringify(fetchJobStatusRequestPayloadRT.encode({jobIds:jobTypes.map(jobType=>Object(log_analysis["getJobId"])(spaceId,sourceId,jobType))}))});case 3:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(fetchJobStatusResponsePayloadRT)(response));case 5:case"end":return _context.stop()}}),_callee)})));return function callJobsSummaryAPI(_x,_x2){return _ref.apply(this,arguments)}}();const fetchJobStatusRequestPayloadRT=lib["type"]({jobIds:lib["array"](lib["string"])});const datafeedStateRT=lib["keyof"]({started:null,stopped:null,stopping:null,"":null});const jobStateRT=lib["keyof"]({closed:null,closing:null,deleting:null,failed:null,opened:null,opening:null});const jobAnalysisConfigRT=lib["partial"]({per_partition_categorization:lib["intersection"]([lib["type"]({enabled:lib["boolean"]}),lib["partial"]({stop_on_warn:lib["boolean"]})])});const jobCategorizationStatusRT=lib["keyof"]({ok:null,warn:null});const jobModelSizeStatsRT=lib["type"]({categorization_status:jobCategorizationStatusRT,categorized_doc_count:lib["number"],dead_category_count:lib["number"],frequent_category_count:lib["number"],log_time:lib["number"],rare_category_count:lib["number"],total_category_count:lib["number"]});const jobSummaryRT=lib["intersection"]([lib["type"]({id:lib["string"],jobState:jobStateRT}),lib["partial"]({datafeedIndices:lib["array"](lib["string"]),datafeedState:datafeedStateRT,fullJob:lib["partial"]({analysis_config:jobAnalysisConfigRT,create_time:lib["number"],custom_settings:log_analysis["jobCustomSettingsRT"],finished_time:lib["number"],model_size_stats:jobModelSizeStatsRT})})]);const fetchJobStatusResponsePayloadRT=lib["array"](jobSummaryRT);function ml_get_module_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function ml_get_module_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ml_get_module_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ml_get_module_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callGetMlModuleAPI=function(){var _ref=ml_get_module_asyncToGenerator(regeneratorRuntime.mark((function _callee(moduleId,fetch){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch("/api/ml/modules/get_module/".concat(moduleId),{method:"GET"});case 2:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(getMlModuleResponsePayloadRT)(response));case 4:case"end":return _context.stop()}}),_callee)})));return function callGetMlModuleAPI(_x,_x2){return _ref.apply(this,arguments)}}();const jobDefinitionRT=lib["type"]({id:lib["string"],config:lib["type"]({custom_settings:log_analysis["jobCustomSettingsRT"]})});const getMlModuleResponsePayloadRT=lib["type"]({id:lib["string"],jobs:lib["array"](jobDefinitionRT)});function ml_setup_module_api_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function ml_setup_module_api_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ml_setup_module_api_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ml_setup_module_api_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callSetupMlModuleAPI=function(){var _ref=ml_setup_module_api_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var moduleId,start,end,spaceId,sourceId,indexPattern,_requestArgs$jobOverr,jobOverrides,_requestArgs$datafeed,datafeedOverrides,query,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:moduleId=requestArgs.moduleId,start=requestArgs.start,end=requestArgs.end,spaceId=requestArgs.spaceId,sourceId=requestArgs.sourceId,indexPattern=requestArgs.indexPattern,_requestArgs$jobOverr=requestArgs.jobOverrides,jobOverrides=_requestArgs$jobOverr===void 0?[]:_requestArgs$jobOverr,_requestArgs$datafeed=requestArgs.datafeedOverrides,datafeedOverrides=_requestArgs$datafeed===void 0?[]:_requestArgs$datafeed,query=requestArgs.query;_context.next=3;return fetch("/api/ml/modules/setup/".concat(moduleId),{method:"POST",body:JSON.stringify(setupMlModuleRequestPayloadRT.encode({start:start,end:end,indexPatternName:indexPattern,prefix:Object(log_analysis["getJobIdPrefix"])(spaceId,sourceId),startDatafeed:true,jobOverrides:jobOverrides,datafeedOverrides:datafeedOverrides,query:query}))});case 3:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(setupMlModuleResponsePayloadRT)(response));case 5:case"end":return _context.stop()}}),_callee)})));return function callSetupMlModuleAPI(_x,_x2){return _ref.apply(this,arguments)}}();const setupMlModuleTimeParamsRT=lib["partial"]({start:lib["number"],end:lib["number"]});const setupMlModuleJobOverridesRT=lib["type"]({job_id:lib["string"],custom_settings:log_analysis["jobCustomSettingsRT"]});const setupMlModuleDatafeedOverridesRT=lib["object"];const setupMlModuleRequestParamsRT=lib["intersection"]([lib["strict"]({indexPatternName:lib["string"],prefix:lib["string"],startDatafeed:lib["boolean"],jobOverrides:lib["array"](setupMlModuleJobOverridesRT),datafeedOverrides:lib["array"](setupMlModuleDatafeedOverridesRT)}),lib["exact"](lib["partial"]({query:lib["object"]}))]);const setupMlModuleRequestPayloadRT=lib["intersection"]([setupMlModuleTimeParamsRT,setupMlModuleRequestParamsRT]);const setupErrorResponseRT=lib["type"]({msg:lib["string"]});const datafeedSetupResponseRT=lib["intersection"]([lib["type"]({id:lib["string"],started:lib["boolean"],success:lib["boolean"]}),lib["partial"]({error:setupErrorResponseRT})]);const jobSetupResponseRT=lib["intersection"]([lib["type"]({id:lib["string"],success:lib["boolean"]}),lib["partial"]({error:setupErrorResponseRT})]);const setupMlModuleResponsePayloadRT=lib["type"]({datafeeds:lib["array"](datafeedSetupResponseRT),jobs:lib["array"](jobSetupResponseRT)});var http_api=__webpack_require__(86);function validate_datasets_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function validate_datasets_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){validate_datasets_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){validate_datasets_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callValidateDatasetsAPI=function(){var _ref=validate_datasets_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var indices,timestampField,startTime,endTime,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:indices=requestArgs.indices,timestampField=requestArgs.timestampField,startTime=requestArgs.startTime,endTime=requestArgs.endTime;_context.next=3;return fetch(http_api["c"],{method:"POST",body:JSON.stringify(http_api["y"].encode({data:{endTime:endTime,indices:indices,startTime:startTime,timestampField:timestampField}}))});case 3:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api["z"])(response));case 5:case"end":return _context.stop()}}),_callee)})));return function callValidateDatasetsAPI(_x,_x2){return _ref.apply(this,arguments)}}();function validate_indices_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function validate_indices_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){validate_indices_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){validate_indices_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callValidateIndicesAPI=function(){var _ref=validate_indices_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var indices,fields,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:indices=requestArgs.indices,fields=requestArgs.fields;_context.next=3;return fetch(http_api["d"],{method:"POST",body:JSON.stringify(http_api["B"].encode({data:{indices:indices,fields:fields}}))});case 3:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api["C"])(response));case 5:case"end":return _context.stop()}}),_callee)})));return function callValidateIndicesAPI(_x,_x2){return _ref.apply(this,arguments)}}();function ml_cleanup_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function ml_cleanup_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ml_cleanup_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ml_cleanup_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callDeleteJobs=function(){var _ref=ml_cleanup_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var spaceId,sourceId,jobTypes,deleteJobsResponse;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:spaceId=requestArgs.spaceId,sourceId=requestArgs.sourceId,jobTypes=requestArgs.jobTypes;_context.next=3;return fetch("/api/ml/jobs/delete_jobs",{method:"POST",body:JSON.stringify(deleteJobsRequestPayloadRT.encode({jobIds:jobTypes.map(jobType=>Object(log_analysis["getJobId"])(spaceId,sourceId,jobType))}))});case 3:deleteJobsResponse=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(deleteJobsResponsePayloadRT)(deleteJobsResponse));case 5:case"end":return _context.stop()}}),_callee)})));return function callDeleteJobs(_x,_x2){return _ref.apply(this,arguments)}}();const callGetJobDeletionTasks=function(){var _ref2=ml_cleanup_asyncToGenerator(regeneratorRuntime.mark((function _callee2(fetch){var jobDeletionTasksResponse;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch("/api/ml/jobs/deleting_jobs_tasks");case 2:jobDeletionTasksResponse=_context2.sent;return _context2.abrupt("return",Object(runtime_types["b"])(getJobDeletionTasksResponsePayloadRT)(jobDeletionTasksResponse));case 4:case"end":return _context2.stop()}}),_callee2)})));return function callGetJobDeletionTasks(_x3){return _ref2.apply(this,arguments)}}();const callStopDatafeeds=function(){var _ref3=ml_cleanup_asyncToGenerator(regeneratorRuntime.mark((function _callee3(requestArgs,fetch){var spaceId,sourceId,jobTypes,stopDatafeedResponse;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:spaceId=requestArgs.spaceId,sourceId=requestArgs.sourceId,jobTypes=requestArgs.jobTypes;_context3.next=3;return fetch("/api/ml/jobs/stop_datafeeds",{method:"POST",body:JSON.stringify(stopDatafeedsRequestPayloadRT.encode({datafeedIds:jobTypes.map(jobType=>Object(log_analysis["getDatafeedId"])(spaceId,sourceId,jobType))}))});case 3:stopDatafeedResponse=_context3.sent;return _context3.abrupt("return",Object(runtime_types["b"])(stopDatafeedsResponsePayloadRT)(stopDatafeedResponse));case 5:case"end":return _context3.stop()}}),_callee3)})));return function callStopDatafeeds(_x4,_x5){return _ref3.apply(this,arguments)}}();const deleteJobsRequestPayloadRT=lib["type"]({jobIds:lib["array"](lib["string"])});const deleteJobsResponsePayloadRT=lib["record"](lib["string"],lib["type"]({deleted:lib["boolean"]}));const getJobDeletionTasksResponsePayloadRT=lib["type"]({jobIds:lib["array"](lib["string"])});const stopDatafeedsRequestPayloadRT=lib["type"]({datafeedIds:lib["array"](lib["string"])});const stopDatafeedsResponsePayloadRT=lib["record"](lib["string"],lib["type"]({stopped:lib["boolean"]}));function log_analysis_cleanup_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function log_analysis_cleanup_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){log_analysis_cleanup_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){log_analysis_cleanup_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const cleanUpJobsAndDatafeeds=function(){var _ref=log_analysis_cleanup_asyncToGenerator(regeneratorRuntime.mark((function _callee(spaceId,sourceId,jobTypes,fetch){var _err$res;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return callStopDatafeeds({spaceId:spaceId,sourceId:sourceId,jobTypes:jobTypes},fetch);case 3:_context.next=9;break;case 5:_context.prev=5;_context.t0=_context["catch"](0);if(!((_context.t0===null||_context.t0===void 0?void 0:(_err$res=_context.t0.res)===null||_err$res===void 0?void 0:_err$res.status)!==404)){_context.next=9;break}throw _context.t0;case 9:_context.next=11;return deleteJobs(spaceId,sourceId,jobTypes,fetch);case 11:return _context.abrupt("return",_context.sent);case 12:case"end":return _context.stop()}}),_callee,null,[[0,5]])})));return function cleanUpJobsAndDatafeeds(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)}}();const deleteJobs=function(){var _ref2=log_analysis_cleanup_asyncToGenerator(regeneratorRuntime.mark((function _callee2(spaceId,sourceId,jobTypes,fetch){var deleteJobsResponse;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return callDeleteJobs({spaceId:spaceId,sourceId:sourceId,jobTypes:jobTypes},fetch);case 2:deleteJobsResponse=_context2.sent;_context2.next=5;return waitUntilJobsAreDeleted(spaceId,sourceId,jobTypes,fetch);case 5:return _context2.abrupt("return",deleteJobsResponse);case 6:case"end":return _context2.stop()}}),_callee2)})));return function deleteJobs(_x5,_x6,_x7,_x8){return _ref2.apply(this,arguments)}}();const waitUntilJobsAreDeleted=function(){var _ref3=log_analysis_cleanup_asyncToGenerator(regeneratorRuntime.mark((function _callee3(spaceId,sourceId,jobTypes,fetch){var moduleJobIds,_yield$callGetJobDele,jobIdsBeingDeleted,needToWait;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:moduleJobIds=jobTypes.map(jobType=>Object(log_analysis["getJobId"])(spaceId,sourceId,jobType));case 1:if(false){}_context3.next=4;return callGetJobDeletionTasks(fetch);case 4:_yield$callGetJobDele=_context3.sent;jobIdsBeingDeleted=_yield$callGetJobDele.jobIds;needToWait=jobIdsBeingDeleted.some(jobId=>moduleJobIds.includes(jobId));if(!needToWait){_context3.next=12;break}_context3.next=10;return timeout(1e3);case 10:_context3.next=13;break;case 12:return _context3.abrupt("return",true);case 13:_context3.next=1;break;case 15:case"end":return _context3.stop()}}),_callee3)})));return function waitUntilJobsAreDeleted(_x9,_x10,_x11,_x12){return _ref3.apply(this,arguments)}}();const timeout=ms=>new Promise(res=>setTimeout(res,ms));function module_descriptor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function module_descriptor_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){module_descriptor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){module_descriptor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const module_descriptor_moduleId="logs_ui_categories";const module_descriptor_moduleName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.logEntryCategoriesModuleName",{defaultMessage:"Categorization"});const module_descriptor_moduleDescription=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.logEntryCategoriesModuleDescription",{defaultMessage:"Use Machine Learning to automatically categorize log messages."});const getJobIds=(spaceId,sourceId)=>log_analysis["logEntryCategoriesJobTypes"].reduce((accumulatedJobIds,jobType)=>_objectSpread(_objectSpread({},accumulatedJobIds),{},{[jobType]:Object(log_analysis["getJobId"])(spaceId,sourceId,jobType)}),{});const getJobSummary=function(){var _ref=module_descriptor_asyncToGenerator(regeneratorRuntime.mark((function _callee(spaceId,sourceId,fetch){var response,jobIds;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return callJobsSummaryAPI({spaceId:spaceId,sourceId:sourceId,jobTypes:log_analysis["logEntryCategoriesJobTypes"]},fetch);case 2:response=_context.sent;jobIds=Object.values(getJobIds(spaceId,sourceId));return _context.abrupt("return",response.filter(jobSummary=>jobIds.includes(jobSummary.id)));case 5:case"end":return _context.stop()}}),_callee)})));return function getJobSummary(_x,_x2,_x3){return _ref.apply(this,arguments)}}();const getModuleDefinition=function(){var _ref2=module_descriptor_asyncToGenerator(regeneratorRuntime.mark((function _callee2(fetch){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return callGetMlModuleAPI(module_descriptor_moduleId,fetch);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})));return function getModuleDefinition(_x4){return _ref2.apply(this,arguments)}}();const module_descriptor_setUpModule=function(){var _ref3=module_descriptor_asyncToGenerator(regeneratorRuntime.mark((function _callee3(start,end,datasetFilter,{spaceId:spaceId,sourceId:sourceId,indices:indices,timestampField:timestampField},fetch){var indexNamePattern,jobOverrides,query;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:indexNamePattern=indices.join(",");jobOverrides=[{job_id:"log-entry-categories-count",analysis_config:{bucket_span:"".concat(log_analysis["bucketSpan"],"ms")},data_description:{time_field:timestampField},custom_settings:{logs_source_config:{indexPattern:indexNamePattern,timestampField:timestampField,bucketSpan:log_analysis["bucketSpan"],datasetFilter:datasetFilter}}}];query={bool:{filter:[...datasetFilter.type==="includeSome"?[{terms:{"event.dataset":datasetFilter.datasets}}]:[],{exists:{field:"message"}}]}};return _context3.abrupt("return",callSetupMlModuleAPI({moduleId:module_descriptor_moduleId,start:start,end:end,spaceId:spaceId,sourceId:sourceId,indexPattern:indexNamePattern,jobOverrides:jobOverrides,query:query},fetch));case 4:case"end":return _context3.stop()}}),_callee3)})));return function setUpModule(_x5,_x6,_x7,_x8,_x9){return _ref3.apply(this,arguments)}}();const module_descriptor_cleanUpModule=function(){var _ref4=module_descriptor_asyncToGenerator(regeneratorRuntime.mark((function _callee4(spaceId,sourceId,fetch){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return cleanUpJobsAndDatafeeds(spaceId,sourceId,log_analysis["logEntryCategoriesJobTypes"],fetch);case 2:return _context4.abrupt("return",_context4.sent);case 3:case"end":return _context4.stop()}}),_callee4)})));return function cleanUpModule(_x10,_x11,_x12){return _ref4.apply(this,arguments)}}();const module_descriptor_validateSetupIndices=function(){var _ref5=module_descriptor_asyncToGenerator(regeneratorRuntime.mark((function _callee5(indices,timestampField,fetch){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return callValidateIndicesAPI({indices:indices,fields:[{name:timestampField,validTypes:["date"]},{name:log_analysis["partitionField"],validTypes:["keyword"]},{name:log_analysis["categoriesMessageField"],validTypes:["text"]}]},fetch);case 2:return _context5.abrupt("return",_context5.sent);case 3:case"end":return _context5.stop()}}),_callee5)})));return function validateSetupIndices(_x13,_x14,_x15){return _ref5.apply(this,arguments)}}();const module_descriptor_validateSetupDatasets=function(){var _ref6=module_descriptor_asyncToGenerator(regeneratorRuntime.mark((function _callee6(indices,timestampField,startTime,endTime,fetch){return regeneratorRuntime.wrap((function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return callValidateDatasetsAPI({indices:indices,timestampField:timestampField,startTime:startTime,endTime:endTime},fetch);case 2:return _context6.abrupt("return",_context6.sent);case 3:case"end":return _context6.stop()}}),_callee6)})));return function validateSetupDatasets(_x16,_x17,_x18,_x19,_x20){return _ref6.apply(this,arguments)}}();const logEntryCategoriesModule={moduleId:module_descriptor_moduleId,moduleName:module_descriptor_moduleName,moduleDescription:module_descriptor_moduleDescription,jobTypes:log_analysis["logEntryCategoriesJobTypes"],bucketSpan:log_analysis["bucketSpan"],getJobIds:getJobIds,getJobSummary:getJobSummary,getModuleDefinition:getModuleDefinition,setUpModule:module_descriptor_setUpModule,cleanUpModule:module_descriptor_cleanUpModule,validateSetupDatasets:module_descriptor_validateSetupDatasets,validateSetupIndices:module_descriptor_validateSetupIndices};var constate_cjs=__webpack_require__(76);var constate_cjs_default=__webpack_require__.n(constate_cjs);var use_kibana=__webpack_require__(78);var use_tracked_promise=__webpack_require__(79);function log_analysis_module_status_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function log_analysis_module_status_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){log_analysis_module_status_ownKeys(Object(source),true).forEach((function(key){log_analysis_module_status_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{log_analysis_module_status_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function log_analysis_module_status_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const createInitialState=({jobTypes:jobTypes})=>({jobStatus:jobTypes.reduce((accumulatedJobStatus,jobType)=>log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},accumulatedJobStatus),{},{[jobType]:"unknown"}),{}),jobSummaries:[],lastSetupErrorMessages:[],setupStatus:{type:"initializing"}});const createStatusReducer=jobTypes=>(state,action)=>{switch(action.type){case"startedSetup":{return log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},state),{},{jobStatus:jobTypes.reduce((accumulatedJobStatus,jobType)=>log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},accumulatedJobStatus),{},{[jobType]:"initializing"}),{}),setupStatus:{type:"pending"}})}case"finishedSetup":{const datafeedSetupResults=action.datafeedSetupResults,jobSetupResults=action.jobSetupResults,jobSummaries=action.jobSummaries,spaceId=action.spaceId,sourceId=action.sourceId;const nextJobStatus=jobTypes.reduce((accumulatedJobStatus,jobType)=>log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},accumulatedJobStatus),{},{[jobType]:hasSuccessfullyCreatedJob(Object(log_analysis["getJobId"])(spaceId,sourceId,jobType))(jobSetupResults)&&hasSuccessfullyStartedDatafeed(Object(log_analysis["getDatafeedId"])(spaceId,sourceId,jobType))(datafeedSetupResults)?"started":"failed"}),{});const nextSetupStatus=Object.values(nextJobStatus).every(jobState=>jobState==="started")?{type:"succeeded"}:{type:"failed",reasons:[...Object.values(datafeedSetupResults).filter(hasError).map(datafeed=>datafeed.error.msg),...Object.values(jobSetupResults).filter(hasError).map(job=>job.error.msg)]};return log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},state),{},{jobStatus:nextJobStatus,jobSummaries:jobSummaries,setupStatus:nextSetupStatus})}case"failedSetup":{return log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},state),{},{jobStatus:jobTypes.reduce((accumulatedJobStatus,jobType)=>log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},accumulatedJobStatus),{},{[jobType]:"failed"}),{}),setupStatus:{type:"failed",reasons:["unknown"]}})}case"fetchingJobStatuses":{return log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},state),{},{setupStatus:state.setupStatus.type==="unknown"?{type:"initializing"}:state.setupStatus})}case"fetchedJobStatuses":{const jobSummaries=action.payload,spaceId=action.spaceId,sourceId=action.sourceId;const setupStatus=state.setupStatus;const nextJobStatus=jobTypes.reduce((accumulatedJobStatus,jobType)=>log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},accumulatedJobStatus),{},{[jobType]:getJobStatus(Object(log_analysis["getJobId"])(spaceId,sourceId,jobType))(jobSummaries)}),{});const nextSetupStatus=getSetupStatus(nextJobStatus)(setupStatus);return log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},state),{},{jobSummaries:jobSummaries,jobStatus:nextJobStatus,setupStatus:nextSetupStatus})}case"failedFetchingJobStatuses":{return log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},state),{},{setupStatus:{type:"unknown"},jobStatus:jobTypes.reduce((accumulatedJobStatus,jobType)=>log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},accumulatedJobStatus),{},{[jobType]:"unknown"}),{})})}case"viewedResults":{return log_analysis_module_status_objectSpread(log_analysis_module_status_objectSpread({},state),{},{setupStatus:{type:"skipped",newlyCreated:true}})}default:{return state}}};const hasSuccessfullyCreatedJob=jobId=>jobSetupResponses=>jobSetupResponses.filter(jobSetupResponse=>jobSetupResponse.id===jobId&&jobSetupResponse.success&&!jobSetupResponse.error).length>0;const hasSuccessfullyStartedDatafeed=datafeedId=>datafeedSetupResponses=>datafeedSetupResponses.filter(datafeedSetupResponse=>datafeedSetupResponse.id===datafeedId&&datafeedSetupResponse.success&&datafeedSetupResponse.started&&!datafeedSetupResponse.error).length>0;const getJobStatus=jobId=>jobSummaries=>jobSummaries.filter(jobSummary=>jobSummary.id===jobId).map(jobSummary=>{if(jobSummary.jobState==="failed"||jobSummary.datafeedState===""){return"failed"}else if(jobSummary.jobState==="closed"&&jobSummary.datafeedState==="stopped"&&jobSummary.fullJob&&jobSummary.fullJob.finished_time!=null){return"finished"}else if(jobSummary.jobState==="closed"||jobSummary.jobState==="closing"||jobSummary.datafeedState==="stopped"){return"stopped"}else if(jobSummary.jobState==="opening"){return"initializing"}else if(jobSummary.jobState==="opened"&&jobSummary.datafeedState==="started"){return"started"}return"unknown"})[0]||"missing";const getSetupStatus=everyJobStatus=>previousSetupStatus=>Object.entries(everyJobStatus).reduce((setupStatus,[,jobStatus])=>{if(jobStatus==="missing"){return{type:"required"}}else if(setupStatus.type==="required"||setupStatus.type==="succeeded"){return setupStatus}else if(setupStatus.type==="skipped"||Object(log_analysis["isJobStatusWithResults"])(jobStatus)){return{type:"skipped",newlyCreated:setupStatus.type==="skipped"&&setupStatus.newlyCreated}}return setupStatus},previousSetupStatus);const hasError=value=>value.error!=null;const useModuleStatus=jobTypes=>Object(external_kbnSharedDeps_React_["useReducer"])(createStatusReducer(jobTypes),{jobTypes:jobTypes},createInitialState);function log_analysis_module_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function log_analysis_module_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){log_analysis_module_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){log_analysis_module_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogAnalysisModule=({sourceConfiguration:sourceConfiguration,moduleDescriptor:moduleDescriptor})=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const spaceId=sourceConfiguration.spaceId,sourceId=sourceConfiguration.sourceId,timestampField=sourceConfiguration.timestampField;const _useModuleStatus=useModuleStatus(moduleDescriptor.jobTypes),_useModuleStatus2=_slicedToArray(_useModuleStatus,2),moduleStatus=_useModuleStatus2[0],dispatchModuleStatus=_useModuleStatus2[1];const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"resolution",createPromise:function(){var _createPromise=log_analysis_module_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:dispatchModuleStatus({type:"fetchingJobStatuses"});_context.next=3;return moduleDescriptor.getJobSummary(spaceId,sourceId,services.http.fetch);case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}),_callee)})));function createPromise(){return _createPromise.apply(this,arguments)}return createPromise}(),onResolve:jobResponse=>{dispatchModuleStatus({type:"fetchedJobStatuses",payload:jobResponse,spaceId:spaceId,sourceId:sourceId})},onReject:()=>{dispatchModuleStatus({type:"failedFetchingJobStatuses"})}},[spaceId,sourceId]),_useTrackedPromise2=_slicedToArray(_useTrackedPromise,2),fetchJobStatus=_useTrackedPromise2[1];const _useTrackedPromise3=Object(use_tracked_promise["b"])({cancelPreviousOn:"resolution",createPromise:function(){var _createPromise2=log_analysis_module_asyncToGenerator(regeneratorRuntime.mark((function _callee2(selectedIndices,start,end,datasetFilter){var setupResult,jobSummaries;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:dispatchModuleStatus({type:"startedSetup"});_context2.next=3;return moduleDescriptor.setUpModule(start,end,datasetFilter,{indices:selectedIndices,sourceId:sourceId,spaceId:spaceId,timestampField:timestampField},services.http.fetch);case 3:setupResult=_context2.sent;_context2.next=6;return moduleDescriptor.getJobSummary(spaceId,sourceId,services.http.fetch);case 6:jobSummaries=_context2.sent;return _context2.abrupt("return",{setupResult:setupResult,jobSummaries:jobSummaries});case 8:case"end":return _context2.stop()}}),_callee2)})));function createPromise(_x,_x2,_x3,_x4){return _createPromise2.apply(this,arguments)}return createPromise}(),onResolve:({setupResult:{datafeeds:datafeeds,jobs:jobs},jobSummaries:jobSummaries})=>{dispatchModuleStatus({type:"finishedSetup",datafeedSetupResults:datafeeds,jobSetupResults:jobs,jobSummaries:jobSummaries,spaceId:spaceId,sourceId:sourceId})},onReject:()=>{dispatchModuleStatus({type:"failedSetup"})}},[moduleDescriptor.setUpModule,spaceId,sourceId,timestampField]),_useTrackedPromise4=_slicedToArray(_useTrackedPromise3,2),setUpModule=_useTrackedPromise4[1];const _useTrackedPromise5=Object(use_tracked_promise["b"])({cancelPreviousOn:"resolution",createPromise:function(){var _createPromise3=log_analysis_module_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return moduleDescriptor.cleanUpModule(spaceId,sourceId,services.http.fetch);case 2:return _context3.abrupt("return",_context3.sent);case 3:case"end":return _context3.stop()}}),_callee3)})));function createPromise(){return _createPromise3.apply(this,arguments)}return createPromise}()},[spaceId,sourceId]),_useTrackedPromise6=_slicedToArray(_useTrackedPromise5,2),cleanUpModuleRequest=_useTrackedPromise6[0],cleanUpModule=_useTrackedPromise6[1];const isCleaningUp=Object(external_kbnSharedDeps_React_["useMemo"])(()=>cleanUpModuleRequest.state==="pending",[cleanUpModuleRequest.state]);const cleanUpAndSetUpModule=Object(external_kbnSharedDeps_React_["useCallback"])((selectedIndices,start,end,datasetFilter)=>{dispatchModuleStatus({type:"startedSetup"});cleanUpModule().then(()=>{setUpModule(selectedIndices,start,end,datasetFilter)}).catch(()=>{dispatchModuleStatus({type:"failedSetup"})})},[cleanUpModule,dispatchModuleStatus,setUpModule]);const viewResults=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{dispatchModuleStatus({type:"viewedResults"})},[dispatchModuleStatus]);const jobIds=Object(external_kbnSharedDeps_React_["useMemo"])(()=>moduleDescriptor.getJobIds(spaceId,sourceId),[moduleDescriptor,spaceId,sourceId]);return{cleanUpAndSetUpModule:cleanUpAndSetUpModule,cleanUpModule:cleanUpModule,fetchJobStatus:fetchJobStatus,isCleaningUp:isCleaningUp,jobIds:jobIds,jobStatus:moduleStatus.jobStatus,jobSummaries:moduleStatus.jobSummaries,lastSetupErrorMessages:moduleStatus.lastSetupErrorMessages,moduleDescriptor:moduleDescriptor,setUpModule:setUpModule,setupStatus:moduleStatus.setupStatus,sourceConfiguration:sourceConfiguration,viewResults:viewResults}};const useLogAnalysisModuleConfiguration=({moduleDescriptor:moduleDescriptor,sourceConfiguration:sourceConfiguration})=>{const getIsJobConfigurationOutdated=Object(external_kbnSharedDeps_React_["useMemo"])(()=>isJobConfigurationOutdated(moduleDescriptor,sourceConfiguration),[sourceConfiguration,moduleDescriptor]);return{getIsJobConfigurationOutdated:getIsJobConfigurationOutdated}};const isJobConfigurationOutdated=({bucketSpan:bucketSpan},currentSourceConfiguration)=>jobSummary=>{if(!jobSummary.fullJob||!jobSummary.fullJob.custom_settings){return false}const jobConfiguration=jobSummary.fullJob.custom_settings.logs_source_config;return!(jobConfiguration&&jobConfiguration.bucketSpan===bucketSpan&&jobConfiguration.indexPattern&&isSubset(new Set(jobConfiguration.indexPattern.split(",")),new Set(currentSourceConfiguration.indices))&&jobConfiguration.timestampField===currentSourceConfiguration.timestampField)};const isSubset=(subset,superset)=>Array.from(subset).every(subsetElement=>superset.has(subsetElement));function log_analysis_module_definition_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function log_analysis_module_definition_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){log_analysis_module_definition_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){log_analysis_module_definition_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function log_analysis_module_definition_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function log_analysis_module_definition_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){log_analysis_module_definition_ownKeys(Object(source),true).forEach((function(key){log_analysis_module_definition_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{log_analysis_module_definition_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function log_analysis_module_definition_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function log_analysis_module_definition_slicedToArray(arr,i){return log_analysis_module_definition_arrayWithHoles(arr)||log_analysis_module_definition_iterableToArrayLimit(arr,i)||log_analysis_module_definition_unsupportedIterableToArray(arr,i)||log_analysis_module_definition_nonIterableRest()}function log_analysis_module_definition_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_analysis_module_definition_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_analysis_module_definition_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_analysis_module_definition_arrayLikeToArray(o,minLen)}function log_analysis_module_definition_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_analysis_module_definition_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_analysis_module_definition_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogAnalysisModuleDefinition=({sourceConfiguration:{spaceId:spaceId,sourceId:sourceId},moduleDescriptor:moduleDescriptor})=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const _useState=Object(external_kbnSharedDeps_React_["useState"])(),_useState2=log_analysis_module_definition_slicedToArray(_useState,2),moduleDefinition=_useState2[0],setModuleDefinition=_useState2[1];const jobDefinitionByJobId=Object(external_kbnSharedDeps_React_["useMemo"])(()=>moduleDefinition?moduleDefinition.jobs.reduce((accumulatedJobDefinitions,jobDefinition)=>log_analysis_module_definition_objectSpread(log_analysis_module_definition_objectSpread({},accumulatedJobDefinitions),{},{[Object(log_analysis["getJobId"])(spaceId,sourceId,jobDefinition.id)]:jobDefinition}),{}):{},[moduleDefinition,sourceId,spaceId]);const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"resolution",createPromise:function(){var _createPromise=log_analysis_module_definition_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return moduleDescriptor.getModuleDefinition(services.http.fetch);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})));function createPromise(){return _createPromise.apply(this,arguments)}return createPromise}(),onResolve:response=>{setModuleDefinition(response)},onReject:()=>{setModuleDefinition(undefined)}},[moduleDescriptor.getModuleDefinition,spaceId,sourceId]),_useTrackedPromise2=log_analysis_module_definition_slicedToArray(_useTrackedPromise,2),fetchModuleDefinitionRequest=_useTrackedPromise2[0],fetchModuleDefinition=_useTrackedPromise2[1];const getIsJobDefinitionOutdated=Object(external_kbnSharedDeps_React_["useCallback"])(jobSummary=>{var _jobSummary$fullJob$c,_jobSummary$fullJob,_jobSummary$fullJob$c2;const jobDefinition=jobDefinitionByJobId[jobSummary.id];if(jobDefinition==null){return false}const currentRevision=jobDefinition===null||jobDefinition===void 0?void 0:jobDefinition.config.custom_settings.job_revision;return((_jobSummary$fullJob$c=(_jobSummary$fullJob=jobSummary.fullJob)===null||_jobSummary$fullJob===void 0?void 0:(_jobSummary$fullJob$c2=_jobSummary$fullJob.custom_settings)===null||_jobSummary$fullJob$c2===void 0?void 0:_jobSummary$fullJob$c2.job_revision)!==null&&_jobSummary$fullJob$c!==void 0?_jobSummary$fullJob$c:0)<(currentRevision!==null&&currentRevision!==void 0?currentRevision:0)},[jobDefinitionByJobId]);return{fetchModuleDefinition:fetchModuleDefinition,fetchModuleDefinitionRequestState:fetchModuleDefinitionRequest.state,getIsJobDefinitionOutdated:getIsJobDefinitionOutdated,jobDefinitionByJobId:jobDefinitionByJobId,moduleDefinition:moduleDefinition}};var useDeepCompareEffect=__webpack_require__(380);var useDeepCompareEffect_default=__webpack_require__.n(useDeepCompareEffect);function get_latest_categories_datasets_stats_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function get_latest_categories_datasets_stats_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){get_latest_categories_datasets_stats_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){get_latest_categories_datasets_stats_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callGetLatestCategoriesDatasetsStatsAPI=function(){var _ref=get_latest_categories_datasets_stats_asyncToGenerator(regeneratorRuntime.mark((function _callee({jobIds:jobIds,startTime:startTime,endTime:endTime,includeCategorizerStatuses:includeCategorizerStatuses},fetch){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(http_api["b"],{method:"POST",body:JSON.stringify(http_api["k"].encode({data:{jobIds:jobIds,timeRange:{startTime:startTime,endTime:endTime},includeCategorizerStatuses:includeCategorizerStatuses}}))});case 2:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api["l"])(response));case 4:case"end":return _context.stop()}}),_callee)})));return function callGetLatestCategoriesDatasetsStatsAPI(_x,_x2){return _ref.apply(this,arguments)}}();function use_log_entry_categories_quality_slicedToArray(arr,i){return use_log_entry_categories_quality_arrayWithHoles(arr)||use_log_entry_categories_quality_iterableToArrayLimit(arr,i)||use_log_entry_categories_quality_unsupportedIterableToArray(arr,i)||use_log_entry_categories_quality_nonIterableRest()}function use_log_entry_categories_quality_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_log_entry_categories_quality_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_log_entry_categories_quality_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_log_entry_categories_quality_arrayLikeToArray(o,minLen)}function use_log_entry_categories_quality_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_log_entry_categories_quality_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_log_entry_categories_quality_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogEntryCategoriesQuality=({jobSummaries:jobSummaries})=>{const _useKibanaContextForP=Object(use_kibana["b"])(),fetch=_useKibanaContextForP.services.http.fetch;const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=use_log_entry_categories_quality_slicedToArray(_useState,2),lastestWarnedDatasetsStats=_useState2[0],setLatestWarnedDatasetsStats=_useState2[1];const jobSummariesWithCategoryWarnings=Object(external_kbnSharedDeps_React_["useMemo"])(()=>jobSummaries.filter(isJobWithCategoryWarnings),[jobSummaries]);const jobSummariesWithPartitionedCategoryWarnings=Object(external_kbnSharedDeps_React_["useMemo"])(()=>jobSummariesWithCategoryWarnings.filter(isJobWithPartitionedCategories),[jobSummariesWithCategoryWarnings]);const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"creation",createPromise:statsIntervals=>Promise.all(statsIntervals.map(({jobId:jobId,startTime:startTime,endTime:endTime})=>callGetLatestCategoriesDatasetsStatsAPI({jobIds:[jobId],startTime:startTime,endTime:endTime,includeCategorizerStatuses:["warn"]},fetch))),onResolve:results=>{setLatestWarnedDatasetsStats(results.flatMap(({data:{datasetStats:datasetStats}})=>datasetStats))}},[]),_useTrackedPromise2=use_log_entry_categories_quality_slicedToArray(_useTrackedPromise,2),fetchLatestWarnedDatasetsStatsRequest=_useTrackedPromise2[0],fetchLatestWarnedDatasetsStats=_useTrackedPromise2[1];useDeepCompareEffect_default()(()=>{fetchLatestWarnedDatasetsStats(jobSummariesWithPartitionedCategoryWarnings.map(jobSummary=>{var _jobSummary$fullJob$c,_jobSummary$fullJob,_jobSummary$fullJob$m,_jobSummary$fullJob2,_jobSummary$fullJob2$;return{jobId:jobSummary.id,startTime:(_jobSummary$fullJob$c=(_jobSummary$fullJob=jobSummary.fullJob)===null||_jobSummary$fullJob===void 0?void 0:_jobSummary$fullJob.create_time)!==null&&_jobSummary$fullJob$c!==void 0?_jobSummary$fullJob$c:0,endTime:(_jobSummary$fullJob$m=(_jobSummary$fullJob2=jobSummary.fullJob)===null||_jobSummary$fullJob2===void 0?void 0:(_jobSummary$fullJob2$=_jobSummary$fullJob2.model_size_stats)===null||_jobSummary$fullJob2$===void 0?void 0:_jobSummary$fullJob2$.log_time)!==null&&_jobSummary$fullJob$m!==void 0?_jobSummary$fullJob$m:Date.now()}}))},[jobSummariesWithPartitionedCategoryWarnings]);const categoryQualityWarnings=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[...jobSummariesWithCategoryWarnings.filter(jobSummary=>!isJobWithPartitionedCategories(jobSummary)).map(jobSummary=>{var _jobSummary$fullJob3;return{type:"categoryQualityWarning",jobId:jobSummary.id,dataset:"",reasons:((_jobSummary$fullJob3=jobSummary.fullJob)===null||_jobSummary$fullJob3===void 0?void 0:_jobSummary$fullJob3.model_size_stats)?getCategoryQualityWarningReasons(jobSummary.fullJob.model_size_stats):[]}}),...lastestWarnedDatasetsStats.map(datasetStats=>({type:"categoryQualityWarning",jobId:datasetStats.job_id,dataset:datasetStats.dataset,reasons:getCategoryQualityWarningReasons(datasetStats)}))],[jobSummariesWithCategoryWarnings,lastestWarnedDatasetsStats]);return{categoryQualityWarnings:categoryQualityWarnings,lastLatestWarnedDatasetsStatsRequestErrors:fetchLatestWarnedDatasetsStatsRequest.state==="rejected"?fetchLatestWarnedDatasetsStatsRequest.value:null,isLoadingCategoryQualityWarnings:fetchLatestWarnedDatasetsStatsRequest.state==="pending"}};const isJobWithCategoryWarnings=jobSummary=>{var _jobSummary$fullJob4,_jobSummary$fullJob4$;return((_jobSummary$fullJob4=jobSummary.fullJob)===null||_jobSummary$fullJob4===void 0?void 0:(_jobSummary$fullJob4$=_jobSummary$fullJob4.model_size_stats)===null||_jobSummary$fullJob4$===void 0?void 0:_jobSummary$fullJob4$.categorization_status)==="warn"};const isJobWithPartitionedCategories=jobSummary=>{var _jobSummary$fullJob$a,_jobSummary$fullJob5,_jobSummary$fullJob5$;return(_jobSummary$fullJob$a=(_jobSummary$fullJob5=jobSummary.fullJob)===null||_jobSummary$fullJob5===void 0?void 0:(_jobSummary$fullJob5$=_jobSummary$fullJob5.analysis_config)===null||_jobSummary$fullJob5$===void 0?void 0:_jobSummary$fullJob5$.per_partition_categorization)!==null&&_jobSummary$fullJob$a!==void 0?_jobSummary$fullJob$a:false};const getCategoryQualityWarningReasons=({categorized_doc_count:categorizedDocCount,dead_category_count:deadCategoryCount,frequent_category_count:frequentCategoryCount,rare_category_count:rareCategoryCount,total_category_count:totalCategoryCount})=>{const rareCategoriesRatio=rareCategoryCount/totalCategoryCount;const categoriesDocumentRatio=totalCategoryCount/categorizedDocCount;const deadCategoriesRatio=deadCategoryCount/totalCategoryCount;return[...totalCategoryCount===1?[{type:"singleCategory"}]:[],...rareCategoriesRatio>=.9?[{type:"manyRareCategories",rareCategoriesRatio:rareCategoriesRatio}]:[],...categorizedDocCount>100&&categoriesDocumentRatio>=.5?[{type:"manyCategories",categoriesDocumentRatio:categoriesDocumentRatio}]:[],...frequentCategoryCount===0?[{type:"noFrequentCategories"}]:[],...deadCategoriesRatio>=.5?[{type:"manyDeadCategories",deadCategoriesRatio:deadCategoriesRatio}]:[]]};function use_log_entry_categories_module_slicedToArray(arr,i){return use_log_entry_categories_module_arrayWithHoles(arr)||use_log_entry_categories_module_iterableToArrayLimit(arr,i)||use_log_entry_categories_module_unsupportedIterableToArray(arr,i)||use_log_entry_categories_module_nonIterableRest()}function use_log_entry_categories_module_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_log_entry_categories_module_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_log_entry_categories_module_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_log_entry_categories_module_arrayLikeToArray(o,minLen)}function use_log_entry_categories_module_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_log_entry_categories_module_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_log_entry_categories_module_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function use_log_entry_categories_module_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function use_log_entry_categories_module_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){use_log_entry_categories_module_ownKeys(Object(source),true).forEach((function(key){use_log_entry_categories_module_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{use_log_entry_categories_module_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function use_log_entry_categories_module_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const useLogEntryCategoriesModule=({indexPattern:indexPattern,sourceId:sourceId,spaceId:spaceId,timestampField:timestampField})=>{const sourceConfiguration=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({indices:indexPattern.split(","),sourceId:sourceId,spaceId:spaceId,timestampField:timestampField}),[indexPattern,sourceId,spaceId,timestampField]);const logAnalysisModule=useLogAnalysisModule({moduleDescriptor:logEntryCategoriesModule,sourceConfiguration:sourceConfiguration});const _useLogAnalysisModule=useLogAnalysisModuleConfiguration({sourceConfiguration:sourceConfiguration,moduleDescriptor:logEntryCategoriesModule}),getIsJobConfigurationOutdated=_useLogAnalysisModule.getIsJobConfigurationOutdated;const _useLogAnalysisModule2=useLogAnalysisModuleDefinition({sourceConfiguration:sourceConfiguration,moduleDescriptor:logEntryCategoriesModule}),fetchModuleDefinition=_useLogAnalysisModule2.fetchModuleDefinition,getIsJobDefinitionOutdated=_useLogAnalysisModule2.getIsJobDefinitionOutdated;const _useLogEntryCategorie=useLogEntryCategoriesQuality({jobSummaries:logAnalysisModule.jobSummaries}),categoryQualityWarnings=_useLogEntryCategorie.categoryQualityWarnings;const hasOutdatedJobConfigurations=Object(external_kbnSharedDeps_React_["useMemo"])(()=>logAnalysisModule.jobSummaries.some(getIsJobConfigurationOutdated),[getIsJobConfigurationOutdated,logAnalysisModule.jobSummaries]);const hasOutdatedJobDefinitions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>logAnalysisModule.jobSummaries.some(getIsJobDefinitionOutdated),[getIsJobDefinitionOutdated,logAnalysisModule.jobSummaries]);const hasStoppedJobs=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object.values(logAnalysisModule.jobStatus).some(currentJobStatus=>currentJobStatus==="stopped"),[logAnalysisModule.jobStatus]);return use_log_entry_categories_module_objectSpread(use_log_entry_categories_module_objectSpread({},logAnalysisModule),{},{categoryQualityWarnings:categoryQualityWarnings,fetchModuleDefinition:fetchModuleDefinition,hasOutdatedJobConfigurations:hasOutdatedJobConfigurations,hasOutdatedJobDefinitions:hasOutdatedJobDefinitions,hasStoppedJobs:hasStoppedJobs})};const _createContainer=constate_cjs_default()(useLogEntryCategoriesModule),_createContainer2=use_log_entry_categories_module_slicedToArray(_createContainer,2),LogEntryCategoriesModuleProvider=_createContainer2[0],useLogEntryCategoriesModuleContext=_createContainer2[1];var external_kbnSharedDeps_Lodash_=__webpack_require__(4);var usePrevious=__webpack_require__(243);var usePrevious_default=__webpack_require__.n(usePrevious);function log_analysis_setup_state_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function log_analysis_setup_state_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){log_analysis_setup_state_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){log_analysis_setup_state_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function log_analysis_setup_state_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function log_analysis_setup_state_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){log_analysis_setup_state_ownKeys(Object(source),true).forEach((function(key){log_analysis_setup_state_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{log_analysis_setup_state_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function log_analysis_setup_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function log_analysis_setup_state_slicedToArray(arr,i){return log_analysis_setup_state_arrayWithHoles(arr)||log_analysis_setup_state_iterableToArrayLimit(arr,i)||log_analysis_setup_state_unsupportedIterableToArray(arr,i)||log_analysis_setup_state_nonIterableRest()}function log_analysis_setup_state_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_analysis_setup_state_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_analysis_setup_state_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_analysis_setup_state_arrayLikeToArray(o,minLen)}function log_analysis_setup_state_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_analysis_setup_state_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_analysis_setup_state_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const fourWeeksInMs=864e5*7*4;const useAnalysisSetupState=({cleanUpAndSetUpModule:cleanUpAndSetUpModule,moduleDescriptor:{validateSetupDatasets:validateSetupDatasets,validateSetupIndices:validateSetupIndices},setUpModule:setUpModule,sourceConfiguration:sourceConfiguration})=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const _useState=Object(external_kbnSharedDeps_React_["useState"])(Date.now()-fourWeeksInMs),_useState2=log_analysis_setup_state_slicedToArray(_useState,2),startTime=_useState2[0],setStartTime=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(undefined),_useState4=log_analysis_setup_state_slicedToArray(_useState3,2),endTime=_useState4[0],setEndTime=_useState4[1];const isTimeRangeValid=Object(external_kbnSharedDeps_React_["useMemo"])(()=>startTime!=null&&endTime!=null?startTime<endTime:true,[endTime,startTime]);const _useState5=Object(external_kbnSharedDeps_React_["useState"])(sourceConfiguration.indices.map(indexName=>({name:indexName,validity:"unknown"}))),_useState6=log_analysis_setup_state_slicedToArray(_useState5,2),validatedIndices=_useState6[0],setValidatedIndices=_useState6[1];const updateIndicesWithValidationErrors=Object(external_kbnSharedDeps_React_["useCallback"])(validationErrors=>setValidatedIndices(availableIndices=>availableIndices.map(previousAvailableIndex=>{const indexValiationErrors=validationErrors.filter(({index:index})=>index===previousAvailableIndex.name);if(indexValiationErrors.length>0){return{validity:"invalid",name:previousAvailableIndex.name,errors:indexValiationErrors}}else if(previousAvailableIndex.validity==="valid"){return log_analysis_setup_state_objectSpread(log_analysis_setup_state_objectSpread({},previousAvailableIndex),{},{validity:"valid",errors:[]})}else{return{validity:"valid",name:previousAvailableIndex.name,isSelected:!Object(log_analysis["isExampleDataIndex"])(previousAvailableIndex.name),availableDatasets:[],datasetFilter:{type:"includeAll"}}}})),[]);const updateIndicesWithAvailableDatasets=Object(external_kbnSharedDeps_React_["useCallback"])(availableDatasets=>setValidatedIndices(availableIndices=>availableIndices.map(previousAvailableIndex=>{if(previousAvailableIndex.validity!=="valid"){return previousAvailableIndex}const availableDatasetsForIndex=availableDatasets.filter(({indexName:indexName})=>indexName===previousAvailableIndex.name);const newAvailableDatasets=availableDatasetsForIndex.flatMap(({datasets:datasets})=>datasets);const newDatasetFilter=availableDatasetsForIndex.length>0?Object(log_analysis["filterDatasetFilter"])(previousAvailableIndex.datasetFilter,dataset=>newAvailableDatasets.includes(dataset)):previousAvailableIndex.datasetFilter;return log_analysis_setup_state_objectSpread(log_analysis_setup_state_objectSpread({},previousAvailableIndex),{},{availableDatasets:newAvailableDatasets,datasetFilter:newDatasetFilter})})),[]);const validIndexNames=Object(external_kbnSharedDeps_React_["useMemo"])(()=>validatedIndices.filter(index=>index.validity==="valid").map(index=>index.name),[validatedIndices]);const selectedIndexNames=Object(external_kbnSharedDeps_React_["useMemo"])(()=>validatedIndices.filter(index=>index.validity==="valid"&&index.isSelected).map(i=>i.name),[validatedIndices]);const datasetFilter=Object(external_kbnSharedDeps_React_["useMemo"])(()=>validatedIndices.flatMap(validatedIndex=>validatedIndex.validity==="valid"?validatedIndex.datasetFilter:{type:"includeAll"}).reduce(log_analysis["combineDatasetFilters"],{type:"includeAll"}),[validatedIndices]);const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"resolution",createPromise:function(){var _createPromise=log_analysis_setup_state_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return validateSetupIndices(sourceConfiguration.indices,sourceConfiguration.timestampField,services.http.fetch);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})));function createPromise(){return _createPromise.apply(this,arguments)}return createPromise}(),onResolve:({data:{errors:errors}})=>{updateIndicesWithValidationErrors(errors)},onReject:()=>{setValidatedIndices([])}},[sourceConfiguration.indices,sourceConfiguration.timestampField]),_useTrackedPromise2=log_analysis_setup_state_slicedToArray(_useTrackedPromise,2),validateIndicesRequest=_useTrackedPromise2[0],validateIndices=_useTrackedPromise2[1];const _useTrackedPromise3=Object(use_tracked_promise["b"])({cancelPreviousOn:"resolution",createPromise:function(){var _createPromise2=log_analysis_setup_state_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(validIndexNames.length===0)){_context2.next=2;break}return _context2.abrupt("return",{data:{datasets:[]}});case 2:_context2.next=4;return validateSetupDatasets(validIndexNames,sourceConfiguration.timestampField,startTime!==null&&startTime!==void 0?startTime:0,endTime!==null&&endTime!==void 0?endTime:Date.now(),services.http.fetch);case 4:return _context2.abrupt("return",_context2.sent);case 5:case"end":return _context2.stop()}}),_callee2)})));function createPromise(){return _createPromise2.apply(this,arguments)}return createPromise}(),onResolve:({data:{datasets:datasets}})=>{updateIndicesWithAvailableDatasets(datasets)}},[validIndexNames,sourceConfiguration.timestampField,startTime,endTime]),_useTrackedPromise4=log_analysis_setup_state_slicedToArray(_useTrackedPromise3,2),validateDatasetsRequest=_useTrackedPromise4[0],validateDatasets=_useTrackedPromise4[1];const setUp=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setUpModule(selectedIndexNames,startTime,endTime,datasetFilter),[setUpModule,selectedIndexNames,startTime,endTime,datasetFilter]);const cleanUpAndSetUp=Object(external_kbnSharedDeps_React_["useCallback"])(()=>cleanUpAndSetUpModule(selectedIndexNames,startTime,endTime,datasetFilter),[cleanUpAndSetUpModule,selectedIndexNames,startTime,endTime,datasetFilter]);const isValidating=Object(external_kbnSharedDeps_React_["useMemo"])(()=>validateIndicesRequest.state==="pending"||validateDatasetsRequest.state==="pending",[validateDatasetsRequest.state,validateIndicesRequest.state]);const validationErrors=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{if(isValidating){return[]}return[...validateIndicesRequest.state==="rejected"||validateDatasetsRequest.state==="rejected"?[{error:"NETWORK_ERROR"}]:[],...validatedIndices.reduce((errors,index)=>index.validity==="invalid"&&selectedIndexNames.includes(index.name)?[...errors,...index.errors]:errors,[]),...selectedIndexNames.length===0?[{error:"TOO_FEW_SELECTED_INDICES"}]:[],...!isTimeRangeValid?[{error:"INVALID_TIME_RANGE"}]:[]]},[isValidating,validateIndicesRequest.state,validateDatasetsRequest.state,validatedIndices,selectedIndexNames,isTimeRangeValid]);const prevStartTime=usePrevious_default()(startTime);const prevEndTime=usePrevious_default()(endTime);const prevValidIndexNames=usePrevious_default()(validIndexNames);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!isTimeRangeValid){return}validateIndices()},[isTimeRangeValid,validateIndices]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(!isTimeRangeValid){return}if(startTime!==prevStartTime||endTime!==prevEndTime||!Object(external_kbnSharedDeps_Lodash_["isEqual"])(validIndexNames,prevValidIndexNames)){validateDatasets()}},[endTime,isTimeRangeValid,prevEndTime,prevStartTime,prevValidIndexNames,startTime,validIndexNames,validateDatasets]);return{cleanUpAndSetUp:cleanUpAndSetUp,datasetFilter:datasetFilter,endTime:endTime,isValidating:isValidating,selectedIndexNames:selectedIndexNames,setEndTime:setEndTime,setStartTime:setStartTime,setUp:setUp,startTime:startTime,validatedIndices:validatedIndices,setValidatedIndices:setValidatedIndices,validationErrors:validationErrors}};const useLogEntryCategoriesSetup=()=>{const _useLogEntryCategorie=useLogEntryCategoriesModuleContext(),categoryQualityWarnings=_useLogEntryCategorie.categoryQualityWarnings,cleanUpAndSetUpModule=_useLogEntryCategorie.cleanUpAndSetUpModule,fetchJobStatus=_useLogEntryCategorie.fetchJobStatus,lastSetupErrorMessages=_useLogEntryCategorie.lastSetupErrorMessages,moduleDescriptor=_useLogEntryCategorie.moduleDescriptor,setUpModule=_useLogEntryCategorie.setUpModule,setupStatus=_useLogEntryCategorie.setupStatus,sourceConfiguration=_useLogEntryCategorie.sourceConfiguration,viewResults=_useLogEntryCategorie.viewResults;const _useAnalysisSetupStat=useAnalysisSetupState({cleanUpAndSetUpModule:cleanUpAndSetUpModule,moduleDescriptor:moduleDescriptor,setUpModule:setUpModule,sourceConfiguration:sourceConfiguration}),cleanUpAndSetUp=_useAnalysisSetupStat.cleanUpAndSetUp,endTime=_useAnalysisSetupStat.endTime,isValidating=_useAnalysisSetupStat.isValidating,setEndTime=_useAnalysisSetupStat.setEndTime,setStartTime=_useAnalysisSetupStat.setStartTime,setValidatedIndices=_useAnalysisSetupStat.setValidatedIndices,setUp=_useAnalysisSetupStat.setUp,startTime=_useAnalysisSetupStat.startTime,validatedIndices=_useAnalysisSetupStat.validatedIndices,validationErrors=_useAnalysisSetupStat.validationErrors;return{categoryQualityWarnings:categoryQualityWarnings,cleanUpAndSetUp:cleanUpAndSetUp,endTime:endTime,fetchJobStatus:fetchJobStatus,isValidating:isValidating,lastSetupErrorMessages:lastSetupErrorMessages,moduleDescriptor:moduleDescriptor,setEndTime:setEndTime,setStartTime:setStartTime,setValidatedIndices:setValidatedIndices,setUp:setUp,setupStatus:setupStatus,startTime:startTime,validatedIndices:validatedIndices,validationErrors:validationErrors,viewResults:viewResults}};var initial_configuration_step=__webpack_require__(163);var process_step=__webpack_require__(166);const LogEntryCategoriesSetupView=({onClose:onClose})=>{const _useLogEntryCategorie=useLogEntryCategoriesSetup(),categoryQualityWarnings=_useLogEntryCategorie.categoryQualityWarnings,cleanUpAndSetUp=_useLogEntryCategorie.cleanUpAndSetUp,endTime=_useLogEntryCategorie.endTime,fetchJobStatus=_useLogEntryCategorie.fetchJobStatus,isValidating=_useLogEntryCategorie.isValidating,lastSetupErrorMessages=_useLogEntryCategorie.lastSetupErrorMessages,moduleDescriptor=_useLogEntryCategorie.moduleDescriptor,setEndTime=_useLogEntryCategorie.setEndTime,setStartTime=_useLogEntryCategorie.setStartTime,setValidatedIndices=_useLogEntryCategorie.setValidatedIndices,setUp=_useLogEntryCategorie.setUp,setupStatus=_useLogEntryCategorie.setupStatus,startTime=_useLogEntryCategorie.startTime,validatedIndices=_useLogEntryCategorie.validatedIndices,validationErrors=_useLogEntryCategorie.validationErrors,viewResults=_useLogEntryCategorie.viewResults;useMount_default()(()=>{fetchJobStatus()});const viewResultsAndClose=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{viewResults();onClose()},[viewResults,onClose]);const steps=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[Object(initial_configuration_step["a"])({setStartTime:setStartTime,setEndTime:setEndTime,startTime:startTime,endTime:endTime,isValidating:isValidating,validatedIndices:validatedIndices,setupStatus:setupStatus,setValidatedIndices:setValidatedIndices,validationErrors:validationErrors,previousQualityWarnings:categoryQualityWarnings}),Object(process_step["a"])({cleanUpAndSetUp:cleanUpAndSetUp,errorMessages:lastSetupErrorMessages,isConfigurationValid:validationErrors.length<=0&&!isValidating,setUp:setUp,setupStatus:setupStatus,viewResults:viewResultsAndClose})],[categoryQualityWarnings,cleanUpAndSetUp,endTime,isValidating,lastSetupErrorMessages,setEndTime,setStartTime,setUp,setValidatedIndices,setupStatus,startTime,validatedIndices,validationErrors,viewResultsAndClose]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,moduleDescriptor.moduleName," ")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},moduleDescriptor.moduleDescription),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSteps"],{steps:steps}))};function log_entry_rate_module_descriptor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function log_entry_rate_module_descriptor_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){log_entry_rate_module_descriptor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){log_entry_rate_module_descriptor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function module_descriptor_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function module_descriptor_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){module_descriptor_ownKeys(Object(source),true).forEach((function(key){module_descriptor_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{module_descriptor_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function module_descriptor_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const log_entry_rate_module_descriptor_moduleId="logs_ui_analysis";const log_entry_rate_module_descriptor_moduleName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.logEntryRateModuleName",{defaultMessage:"Log rate"});const log_entry_rate_module_descriptor_moduleDescription=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.logEntryRateModuleDescription",{defaultMessage:"Use Machine Learning to automatically detect anomalous log entry rates."});const module_descriptor_getJobIds=(spaceId,sourceId)=>log_analysis["logEntryRateJobTypes"].reduce((accumulatedJobIds,jobType)=>module_descriptor_objectSpread(module_descriptor_objectSpread({},accumulatedJobIds),{},{[jobType]:Object(log_analysis["getJobId"])(spaceId,sourceId,jobType)}),{});const module_descriptor_getJobSummary=function(){var _ref=log_entry_rate_module_descriptor_asyncToGenerator(regeneratorRuntime.mark((function _callee(spaceId,sourceId,fetch){var response,jobIds;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return callJobsSummaryAPI({spaceId:spaceId,sourceId:sourceId,jobTypes:log_analysis["logEntryRateJobTypes"]},fetch);case 2:response=_context.sent;jobIds=Object.values(module_descriptor_getJobIds(spaceId,sourceId));return _context.abrupt("return",response.filter(jobSummary=>jobIds.includes(jobSummary.id)));case 5:case"end":return _context.stop()}}),_callee)})));return function getJobSummary(_x,_x2,_x3){return _ref.apply(this,arguments)}}();const module_descriptor_getModuleDefinition=function(){var _ref2=log_entry_rate_module_descriptor_asyncToGenerator(regeneratorRuntime.mark((function _callee2(fetch){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return callGetMlModuleAPI(log_entry_rate_module_descriptor_moduleId,fetch);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})));return function getModuleDefinition(_x4){return _ref2.apply(this,arguments)}}();const log_entry_rate_module_descriptor_setUpModule=function(){var _ref3=log_entry_rate_module_descriptor_asyncToGenerator(regeneratorRuntime.mark((function _callee3(start,end,datasetFilter,{spaceId:spaceId,sourceId:sourceId,indices:indices,timestampField:timestampField},fetch){var indexNamePattern,jobOverrides,query;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:indexNamePattern=indices.join(",");jobOverrides=[{job_id:"log-entry-rate",analysis_config:{bucket_span:"".concat(log_analysis["bucketSpan"],"ms")},data_description:{time_field:timestampField},custom_settings:{logs_source_config:{indexPattern:indexNamePattern,timestampField:timestampField,bucketSpan:log_analysis["bucketSpan"]}}}];query=datasetFilter.type==="includeSome"?{bool:{filter:[{terms:{"event.dataset":datasetFilter.datasets}}]}}:undefined;return _context3.abrupt("return",callSetupMlModuleAPI({moduleId:log_entry_rate_module_descriptor_moduleId,start:start,end:end,spaceId:spaceId,sourceId:sourceId,indexPattern:indexNamePattern,jobOverrides:jobOverrides,query:query},fetch));case 4:case"end":return _context3.stop()}}),_callee3)})));return function setUpModule(_x5,_x6,_x7,_x8,_x9){return _ref3.apply(this,arguments)}}();const log_entry_rate_module_descriptor_cleanUpModule=function(){var _ref4=log_entry_rate_module_descriptor_asyncToGenerator(regeneratorRuntime.mark((function _callee4(spaceId,sourceId,fetch){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return cleanUpJobsAndDatafeeds(spaceId,sourceId,log_analysis["logEntryRateJobTypes"],fetch);case 2:return _context4.abrupt("return",_context4.sent);case 3:case"end":return _context4.stop()}}),_callee4)})));return function cleanUpModule(_x10,_x11,_x12){return _ref4.apply(this,arguments)}}();const log_entry_rate_module_descriptor_validateSetupIndices=function(){var _ref5=log_entry_rate_module_descriptor_asyncToGenerator(regeneratorRuntime.mark((function _callee5(indices,timestampField,fetch){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return callValidateIndicesAPI({indices:indices,fields:[{name:timestampField,validTypes:["date"]},{name:log_analysis["partitionField"],validTypes:["keyword"]}]},fetch);case 2:return _context5.abrupt("return",_context5.sent);case 3:case"end":return _context5.stop()}}),_callee5)})));return function validateSetupIndices(_x13,_x14,_x15){return _ref5.apply(this,arguments)}}();const log_entry_rate_module_descriptor_validateSetupDatasets=function(){var _ref6=log_entry_rate_module_descriptor_asyncToGenerator(regeneratorRuntime.mark((function _callee6(indices,timestampField,startTime,endTime,fetch){return regeneratorRuntime.wrap((function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return callValidateDatasetsAPI({indices:indices,timestampField:timestampField,startTime:startTime,endTime:endTime},fetch);case 2:return _context6.abrupt("return",_context6.sent);case 3:case"end":return _context6.stop()}}),_callee6)})));return function validateSetupDatasets(_x16,_x17,_x18,_x19,_x20){return _ref6.apply(this,arguments)}}();const logEntryRateModule={moduleId:log_entry_rate_module_descriptor_moduleId,moduleName:log_entry_rate_module_descriptor_moduleName,moduleDescription:log_entry_rate_module_descriptor_moduleDescription,jobTypes:log_analysis["logEntryRateJobTypes"],bucketSpan:log_analysis["bucketSpan"],getJobIds:module_descriptor_getJobIds,getJobSummary:module_descriptor_getJobSummary,getModuleDefinition:module_descriptor_getModuleDefinition,setUpModule:log_entry_rate_module_descriptor_setUpModule,cleanUpModule:log_entry_rate_module_descriptor_cleanUpModule,validateSetupDatasets:log_entry_rate_module_descriptor_validateSetupDatasets,validateSetupIndices:log_entry_rate_module_descriptor_validateSetupIndices};function use_log_entry_rate_module_slicedToArray(arr,i){return use_log_entry_rate_module_arrayWithHoles(arr)||use_log_entry_rate_module_iterableToArrayLimit(arr,i)||use_log_entry_rate_module_unsupportedIterableToArray(arr,i)||use_log_entry_rate_module_nonIterableRest()}function use_log_entry_rate_module_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_log_entry_rate_module_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_log_entry_rate_module_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_log_entry_rate_module_arrayLikeToArray(o,minLen)}function use_log_entry_rate_module_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_log_entry_rate_module_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_log_entry_rate_module_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function use_log_entry_rate_module_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function use_log_entry_rate_module_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){use_log_entry_rate_module_ownKeys(Object(source),true).forEach((function(key){use_log_entry_rate_module_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{use_log_entry_rate_module_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function use_log_entry_rate_module_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const useLogEntryRateModule=({indexPattern:indexPattern,sourceId:sourceId,spaceId:spaceId,timestampField:timestampField})=>{const sourceConfiguration=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({indices:indexPattern.split(","),sourceId:sourceId,spaceId:spaceId,timestampField:timestampField}),[indexPattern,sourceId,spaceId,timestampField]);const logAnalysisModule=useLogAnalysisModule({moduleDescriptor:logEntryRateModule,sourceConfiguration:sourceConfiguration});const _useLogAnalysisModule=useLogAnalysisModuleConfiguration({sourceConfiguration:sourceConfiguration,moduleDescriptor:logEntryRateModule}),getIsJobConfigurationOutdated=_useLogAnalysisModule.getIsJobConfigurationOutdated;const _useLogAnalysisModule2=useLogAnalysisModuleDefinition({sourceConfiguration:sourceConfiguration,moduleDescriptor:logEntryRateModule}),fetchModuleDefinition=_useLogAnalysisModule2.fetchModuleDefinition,getIsJobDefinitionOutdated=_useLogAnalysisModule2.getIsJobDefinitionOutdated;const hasOutdatedJobConfigurations=Object(external_kbnSharedDeps_React_["useMemo"])(()=>logAnalysisModule.jobSummaries.some(getIsJobConfigurationOutdated),[getIsJobConfigurationOutdated,logAnalysisModule.jobSummaries]);const hasOutdatedJobDefinitions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>logAnalysisModule.jobSummaries.some(getIsJobDefinitionOutdated),[getIsJobDefinitionOutdated,logAnalysisModule.jobSummaries]);const hasStoppedJobs=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object.values(logAnalysisModule.jobStatus).some(currentJobStatus=>currentJobStatus==="stopped"),[logAnalysisModule.jobStatus]);return use_log_entry_rate_module_objectSpread(use_log_entry_rate_module_objectSpread({},logAnalysisModule),{},{fetchModuleDefinition:fetchModuleDefinition,hasOutdatedJobConfigurations:hasOutdatedJobConfigurations,hasOutdatedJobDefinitions:hasOutdatedJobDefinitions,hasStoppedJobs:hasStoppedJobs})};const use_log_entry_rate_module_createContainer=constate_cjs_default()(useLogEntryRateModule),use_log_entry_rate_module_createContainer2=use_log_entry_rate_module_slicedToArray(use_log_entry_rate_module_createContainer,2),LogEntryRateModuleProvider=use_log_entry_rate_module_createContainer2[0],useLogEntryRateModuleContext=use_log_entry_rate_module_createContainer2[1];function use_log_entry_rate_setup_slicedToArray(arr,i){return use_log_entry_rate_setup_arrayWithHoles(arr)||use_log_entry_rate_setup_iterableToArrayLimit(arr,i)||use_log_entry_rate_setup_unsupportedIterableToArray(arr,i)||use_log_entry_rate_setup_nonIterableRest()}function use_log_entry_rate_setup_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_log_entry_rate_setup_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_log_entry_rate_setup_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_log_entry_rate_setup_arrayLikeToArray(o,minLen)}function use_log_entry_rate_setup_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_log_entry_rate_setup_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_log_entry_rate_setup_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogEntryRateSetup=()=>{const _useLogEntryRateModul=useLogEntryRateModuleContext(),cleanUpAndSetUpModule=_useLogEntryRateModul.cleanUpAndSetUpModule,lastSetupErrorMessages=_useLogEntryRateModul.lastSetupErrorMessages,moduleDescriptor=_useLogEntryRateModul.moduleDescriptor,setUpModule=_useLogEntryRateModul.setUpModule,setupStatus=_useLogEntryRateModul.setupStatus,sourceConfiguration=_useLogEntryRateModul.sourceConfiguration,viewResults=_useLogEntryRateModul.viewResults;const _useAnalysisSetupStat=useAnalysisSetupState({cleanUpAndSetUpModule:cleanUpAndSetUpModule,moduleDescriptor:moduleDescriptor,setUpModule:setUpModule,sourceConfiguration:sourceConfiguration}),cleanUpAndSetUp=_useAnalysisSetupStat.cleanUpAndSetUp,endTime=_useAnalysisSetupStat.endTime,isValidating=_useAnalysisSetupStat.isValidating,setEndTime=_useAnalysisSetupStat.setEndTime,setStartTime=_useAnalysisSetupStat.setStartTime,setValidatedIndices=_useAnalysisSetupStat.setValidatedIndices,setUp=_useAnalysisSetupStat.setUp,startTime=_useAnalysisSetupStat.startTime,validatedIndices=_useAnalysisSetupStat.validatedIndices,validationErrors=_useAnalysisSetupStat.validationErrors;return{cleanUpAndSetUp:cleanUpAndSetUp,endTime:endTime,isValidating:isValidating,lastSetupErrorMessages:lastSetupErrorMessages,moduleDescriptor:moduleDescriptor,setEndTime:setEndTime,setStartTime:setStartTime,setValidatedIndices:setValidatedIndices,setUp:setUp,setupStatus:setupStatus,startTime:startTime,validatedIndices:validatedIndices,validationErrors:validationErrors,viewResults:viewResults}};const use_log_entry_rate_setup_createContainer=constate_cjs_default()(useLogEntryRateSetup),use_log_entry_rate_setup_createContainer2=use_log_entry_rate_setup_slicedToArray(use_log_entry_rate_setup_createContainer,2),LogEntryRateSetupProvider=use_log_entry_rate_setup_createContainer2[0],useLogEntryRateSetupContext=use_log_entry_rate_setup_createContainer2[1];const LogEntryRateSetupView=({onClose:onClose})=>{const _useLogEntryRateSetup=useLogEntryRateSetup(),cleanUpAndSetUp=_useLogEntryRateSetup.cleanUpAndSetUp,endTime=_useLogEntryRateSetup.endTime,isValidating=_useLogEntryRateSetup.isValidating,lastSetupErrorMessages=_useLogEntryRateSetup.lastSetupErrorMessages,moduleDescriptor=_useLogEntryRateSetup.moduleDescriptor,setEndTime=_useLogEntryRateSetup.setEndTime,setStartTime=_useLogEntryRateSetup.setStartTime,setValidatedIndices=_useLogEntryRateSetup.setValidatedIndices,setUp=_useLogEntryRateSetup.setUp,setupStatus=_useLogEntryRateSetup.setupStatus,startTime=_useLogEntryRateSetup.startTime,validatedIndices=_useLogEntryRateSetup.validatedIndices,validationErrors=_useLogEntryRateSetup.validationErrors,viewResults=_useLogEntryRateSetup.viewResults;const viewResultsAndClose=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{viewResults();onClose()},[viewResults,onClose]);const steps=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[Object(initial_configuration_step["a"])({setStartTime:setStartTime,setEndTime:setEndTime,startTime:startTime,endTime:endTime,isValidating:isValidating,validatedIndices:validatedIndices,setupStatus:setupStatus,setValidatedIndices:setValidatedIndices,validationErrors:validationErrors}),Object(process_step["a"])({cleanUpAndSetUp:cleanUpAndSetUp,errorMessages:lastSetupErrorMessages,isConfigurationValid:validationErrors.length<=0&&!isValidating,setUp:setUp,setupStatus:setupStatus,viewResults:viewResultsAndClose})],[cleanUpAndSetUp,endTime,isValidating,lastSetupErrorMessages,setEndTime,setStartTime,setUp,setValidatedIndices,setupStatus,startTime,validatedIndices,validationErrors,viewResultsAndClose]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,moduleDescriptor.moduleName," ")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},moduleDescriptor.moduleDescription),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSteps"],{steps:steps}))};const getMlCapabilitiesResponsePayloadRT=lib["type"]({capabilities:lib["type"]({canGetJobs:lib["boolean"],canCreateJob:lib["boolean"],canDeleteJob:lib["boolean"],canOpenJob:lib["boolean"],canCloseJob:lib["boolean"],canForecastJob:lib["boolean"],canGetDatafeeds:lib["boolean"],canStartStopDatafeed:lib["boolean"],canUpdateJob:lib["boolean"],canUpdateDatafeed:lib["boolean"],canPreviewDatafeed:lib["boolean"]}),isPlatinumOrTrialLicense:lib["boolean"],mlFeatureEnabledInSpace:lib["boolean"],upgradeInProgress:lib["boolean"]});function log_analysis_capabilities_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function log_analysis_capabilities_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){log_analysis_capabilities_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){log_analysis_capabilities_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function log_analysis_capabilities_slicedToArray(arr,i){return log_analysis_capabilities_arrayWithHoles(arr)||log_analysis_capabilities_iterableToArrayLimit(arr,i)||log_analysis_capabilities_unsupportedIterableToArray(arr,i)||log_analysis_capabilities_nonIterableRest()}function log_analysis_capabilities_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_analysis_capabilities_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_analysis_capabilities_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_analysis_capabilities_arrayLikeToArray(o,minLen)}function log_analysis_capabilities_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_analysis_capabilities_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_analysis_capabilities_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogAnalysisCapabilities=()=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const _useState=Object(external_kbnSharedDeps_React_["useState"])(initialMlCapabilities),_useState2=log_analysis_capabilities_slicedToArray(_useState,2),mlCapabilities=_useState2[0],setMlCapabilities=_useState2[1];const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"resolution",createPromise:function(){var _createPromise=log_analysis_capabilities_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var rawResponse;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return services.http.fetch("/api/ml/ml_capabilities");case 2:rawResponse=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(getMlCapabilitiesResponsePayloadRT)(rawResponse));case 4:case"end":return _context.stop()}}),_callee)})));function createPromise(){return _createPromise.apply(this,arguments)}return createPromise}(),onResolve:response=>{setMlCapabilities(response)}},[]),_useTrackedPromise2=log_analysis_capabilities_slicedToArray(_useTrackedPromise,2),fetchMlCapabilitiesRequest=_useTrackedPromise2[0],fetchMlCapabilities=_useTrackedPromise2[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{fetchMlCapabilities()},[fetchMlCapabilities]);const isLoading=Object(external_kbnSharedDeps_React_["useMemo"])(()=>fetchMlCapabilitiesRequest.state==="pending",[fetchMlCapabilitiesRequest.state]);const hasLogAnalysisSetupCapabilities=mlCapabilities.capabilities.canCreateJob;const hasLogAnalysisReadCapabilities=mlCapabilities.capabilities.canGetJobs;const hasLogAnalysisCapabilites=mlCapabilities.isPlatinumOrTrialLicense&&mlCapabilities.mlFeatureEnabledInSpace;return{hasLogAnalysisCapabilites:hasLogAnalysisCapabilites,hasLogAnalysisReadCapabilities:hasLogAnalysisReadCapabilities,hasLogAnalysisSetupCapabilities:hasLogAnalysisSetupCapabilities,isLoading:isLoading}};const log_analysis_capabilities_createContainer=constate_cjs_default()(useLogAnalysisCapabilities),log_analysis_capabilities_createContainer2=log_analysis_capabilities_slicedToArray(log_analysis_capabilities_createContainer,2),LogAnalysisCapabilitiesProvider=log_analysis_capabilities_createContainer2[0],useLogAnalysisCapabilitiesContext=log_analysis_capabilities_createContainer2[1];const initialMlCapabilities={capabilities:{canGetJobs:false,canCreateJob:false,canDeleteJob:false,canOpenJob:false,canCloseJob:false,canForecastJob:false,canGetDatafeeds:false,canStartStopDatafeed:false,canUpdateJob:false,canUpdateDatafeed:false,canPreviewDatafeed:false,canGetCalendars:false,canCreateCalendar:false,canDeleteCalendar:false,canGetFilters:false,canCreateFilter:false,canDeleteFilter:false,canFindFileStructure:false,canGetDataFrameJobs:false,canDeleteDataFrameJob:false,canPreviewDataFrameJob:false,canCreateDataFrameJob:false,canStartStopDataFrameJob:false},isPlatinumOrTrialLicense:false,mlFeatureEnabledInSpace:false,upgradeInProgress:false};var create_job_button=__webpack_require__(210);var utils_=__webpack_require__(69);function module_list_card_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function module_list_card_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){module_list_card_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){module_list_card_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function module_list_card_slicedToArray(arr,i){return module_list_card_arrayWithHoles(arr)||module_list_card_iterableToArrayLimit(arr,i)||module_list_card_unsupportedIterableToArray(arr,i)||module_list_card_nonIterableRest()}function module_list_card_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function module_list_card_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return module_list_card_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return module_list_card_arrayLikeToArray(o,minLen)}function module_list_card_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function module_list_card_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function module_list_card_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const LogAnalysisModuleListCard=({jobId:jobId,hasSetupCapabilities:hasSetupCapabilities,moduleDescription:moduleDescription,moduleName:moduleName,moduleStatus:moduleStatus,onViewSetup:onViewSetup})=>{const _useKibanaContextForP=Object(use_kibana["b"])(),_useKibanaContextForP2=_useKibanaContextForP.services,ml=_useKibanaContextForP2.ml,navigateToUrl=_useKibanaContextForP2.application.navigateToUrl,toasts=_useKibanaContextForP2.notifications.toasts;const _useState=Object(external_kbnSharedDeps_React_["useState"])(""),_useState2=module_list_card_slicedToArray(_useState,2),viewInMlLink=_useState2[0],setViewInMlLink=_useState2[1];const getMlUrl=function(){var _ref=module_list_card_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(ml.urlGenerator){_context.next=3;break}toasts.addWarning({title:Object(utils_["mountReactNode"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.analysis.mlNotAvailable",defaultMessage:"ML plugin is not available"}))});return _context.abrupt("return");case 3:_context.t0=setViewInMlLink;_context.next=6;return ml.urlGenerator.createUrl({page:"jobs",pageState:{jobId:jobId}});case 6:_context.t1=_context.sent;(0,_context.t0)(_context.t1);case 8:case"end":return _context.stop()}}),_callee)})));return function getMlUrl(){return _ref.apply(this,arguments)}}();Object(external_kbnSharedDeps_React_["useEffect"])(()=>{getMlUrl()});const navigateToMlApp=function(){var _ref2=module_list_card_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return navigateToUrl(viewInMlLink);case 2:case"end":return _context2.stop()}}),_callee2)})));return function navigateToMlApp(){return _ref2.apply(this,arguments)}}();const moduleIcon=moduleStatus.type==="required"?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{size:"xxl",type:"machineLearningApp"}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{color:"secondary",size:"xxl",type:"check"});const moduleSetupButton=moduleStatus.type==="required"?external_kbnSharedDeps_React_default.a.createElement(create_job_button["a"],{hasSetupCapabilities:hasSetupCapabilities,onClick:onViewSetup},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.analysis.enableAnomalyDetectionButtonLabel",defaultMessage:"Enable anomaly detection"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(create_job_button["b"],{hasSetupCapabilities:hasSetupCapabilities,onClick:onViewSetup}),viewInMlLink?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:navigateToMlApp},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.analysis.viewInMlButtonLabel",defaultMessage:"View in Machine Learning"}))):null);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCard"],{description:moduleDescription,footer:external_kbnSharedDeps_React_default.a.createElement("div",null,moduleSetupButton),icon:moduleIcon,title:moduleName})};const LogAnalysisModuleList=({onViewModuleSetup:onViewModuleSetup})=>{const _useLogAnalysisCapabi=useLogAnalysisCapabilitiesContext(),hasLogAnalysisSetupCapabilities=_useLogAnalysisCapabi.hasLogAnalysisSetupCapabilities;const _useLogEntryRateModul=useLogEntryRateModuleContext(),logEntryRateSetupStatus=_useLogEntryRateModul.setupStatus,logEntryRateJobIds=_useLogEntryRateModul.jobIds;const _useLogEntryCategorie=useLogEntryCategoriesModuleContext(),logEntryCategoriesSetupStatus=_useLogEntryCategorie.setupStatus,logEntryCategoriesJobIds=_useLogEntryCategorie.jobIds;const viewLogEntryRateSetupFlyout=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{onViewModuleSetup("logs_ui_analysis")},[onViewModuleSetup]);const viewLogEntryCategoriesSetupFlyout=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{onViewModuleSetup("logs_ui_categories")},[onViewModuleSetup]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(LogAnalysisModuleListCard,{jobId:logEntryRateJobIds["log-entry-rate"],hasSetupCapabilities:hasLogAnalysisSetupCapabilities,moduleDescription:logEntryRateModule.moduleDescription,moduleName:logEntryRateModule.moduleName,moduleStatus:logEntryRateSetupStatus,onViewSetup:viewLogEntryRateSetupFlyout})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(LogAnalysisModuleListCard,{jobId:logEntryCategoriesJobIds["log-entry-categories-count"],hasSetupCapabilities:hasLogAnalysisSetupCapabilities,moduleDescription:logEntryCategoriesModule.moduleDescription,moduleName:logEntryCategoriesModule.moduleName,moduleStatus:logEntryCategoriesSetupStatus,onViewSetup:viewLogEntryCategoriesSetupFlyout}))))};function setup_flyout_state_slicedToArray(arr,i){return setup_flyout_state_arrayWithHoles(arr)||setup_flyout_state_iterableToArrayLimit(arr,i)||setup_flyout_state_unsupportedIterableToArray(arr,i)||setup_flyout_state_nonIterableRest()}function setup_flyout_state_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function setup_flyout_state_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return setup_flyout_state_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return setup_flyout_state_arrayLikeToArray(o,minLen)}function setup_flyout_state_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function setup_flyout_state_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function setup_flyout_state_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const moduleIds=["logs_ui_analysis","logs_ui_categories"];const useLogAnalysisSetupFlyoutState=({initialFlyoutView:initialFlyoutView={view:"hidden"}})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(initialFlyoutView),_useState2=setup_flyout_state_slicedToArray(_useState,2),flyoutView=_useState2[0],setFlyoutView=_useState2[1];const closeFlyout=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setFlyoutView({view:"hidden"}),[]);const showModuleList=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setFlyoutView({view:"moduleList"}),[]);const showModuleSetup=Object(external_kbnSharedDeps_React_["useCallback"])(module=>{setFlyoutView({view:"moduleSetup",module:module})},[setFlyoutView]);return{closeFlyout:closeFlyout,flyoutView:flyoutView,setFlyoutView:setFlyoutView,showModuleList:showModuleList,showModuleSetup:showModuleSetup}};const setup_flyout_state_createContainer=constate_cjs_default()(useLogAnalysisSetupFlyoutState),setup_flyout_state_createContainer2=setup_flyout_state_slicedToArray(setup_flyout_state_createContainer,2),LogAnalysisSetupFlyoutStateProvider=setup_flyout_state_createContainer2[0],useLogAnalysisSetupFlyoutStateContext=setup_flyout_state_createContainer2[1];const FLYOUT_HEADING_ID="logAnalysisSetupFlyoutHeading";const LogAnalysisSetupFlyout=({allowedModules:allowedModules=moduleIds})=>{const _useLogAnalysisSetupF=useLogAnalysisSetupFlyoutStateContext(),closeFlyout=_useLogAnalysisSetupF.closeFlyout,flyoutView=_useLogAnalysisSetupF.flyoutView,showModuleList=_useLogAnalysisSetupF.showModuleList,showModuleSetup=_useLogAnalysisSetupF.showModuleSetup;if(flyoutView.view==="hidden"){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{"aria-labelledby":FLYOUT_HEADING_ID,maxWidth:800,onClose:closeFlyout},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h2",{id:FLYOUT_HEADING_ID},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.analysis.setupFlyoutTitle",defaultMessage:"Anomaly detection with Machine Learning"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,flyoutView.view==="moduleList"?external_kbnSharedDeps_React_default.a.createElement(LogAnalysisModuleList,{onViewModuleSetup:showModuleSetup}):flyoutView.view==="moduleSetup"&&allowedModules.includes(flyoutView.module)?external_kbnSharedDeps_React_default.a.createElement(ModuleSetupView,{moduleId:flyoutView.module,onClose:closeFlyout,onViewModuleList:allowedModules.length>1?showModuleList:undefined}):null))};const ModuleSetupView=({moduleId:moduleId,onClose:onClose,onViewModuleList:onViewModuleList})=>{switch(moduleId){case"logs_ui_analysis":return external_kbnSharedDeps_React_default.a.createElement(LogAnalysisSetupFlyoutSubPage,{onViewModuleList:onViewModuleList},external_kbnSharedDeps_React_default.a.createElement(LogEntryRateSetupView,{onClose:onClose}));case"logs_ui_categories":return external_kbnSharedDeps_React_default.a.createElement(LogAnalysisSetupFlyoutSubPage,{onViewModuleList:onViewModuleList},external_kbnSharedDeps_React_default.a.createElement(LogEntryCategoriesSetupView,{onClose:onClose}))}};const LogAnalysisSetupFlyoutSubPage=({children:children,onViewModuleList:onViewModuleList})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"flexStart",direction:"column",gutterSize:"none"},onViewModuleList?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{flush:"left",iconSide:"left",iconType:"arrowLeft",onClick:onViewModuleList},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.analysis.setupFlyoutGotoListButtonLabel",defaultMessage:"All Machine Learning jobs"}))):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,children));var source_error_page=__webpack_require__(171);var source_loading_page=__webpack_require__(110);var elastic_datemath=__webpack_require__(95);var elastic_datemath_default=__webpack_require__.n(elastic_datemath);var external_kbnSharedDeps_Moment_=__webpack_require__(58);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);var observability_public_=__webpack_require__(57);var recreate_job_callout=__webpack_require__(183);const JobConfigurationOutdatedCallout=({hasSetupCapabilities:hasSetupCapabilities,moduleName:moduleName,onRecreateMlJob:onRecreateMlJob})=>external_kbnSharedDeps_React_default.a.createElement(recreate_job_callout["a"],{hasSetupCapabilities:hasSetupCapabilities,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.jobConfigurationOutdatedCalloutTitle",{defaultMessage:"The {moduleName} ML job configuration is outdated",values:{moduleName:moduleName}}),onRecreateMlJob:onRecreateMlJob},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.analysis.jobConfigurationOutdatedCalloutMessage",defaultMessage:"The {moduleName} ML job was created using a different source configuration. Recreate the job to apply the current configuration. This removes previously detected anomalies.",values:{moduleName:moduleName},tagName:"p"}));const JobDefinitionOutdatedCallout=({hasSetupCapabilities:hasSetupCapabilities,moduleName:moduleName,onRecreateMlJob:onRecreateMlJob})=>external_kbnSharedDeps_React_default.a.createElement(recreate_job_callout["a"],{hasSetupCapabilities:hasSetupCapabilities,title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.jobDefinitionOutdatedCalloutTitle",{defaultMessage:"The {moduleName} ML job definition is outdated",values:{moduleName:moduleName}}),onRecreateMlJob:onRecreateMlJob},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.analysis.jobDefinitionOutdatedCalloutMessage",defaultMessage:"A newer version of the {moduleName} ML job is available. Recreate the job to deploy the newer version. This removes previously detected anomalies.",values:{moduleName:moduleName},tagName:"p"}));const JobStoppedCallout=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"primary",title:jobStoppedTitle},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.analysis.jobStoppedCalloutMessage",defaultMessage:"The ML job has been stopped manually or due to a lack of resources. New log entries will not be processed until the job has been restarted.",tagName:"p"}));const jobStoppedTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.jobStoppedCalloutTitle",{defaultMessage:"ML job stopped"});var rison=__webpack_require__(17);var use_link_props=__webpack_require__(23);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const AnalyzeInMlButton=({jobId:jobId,partition:partition,timeRange:timeRange})=>{const linkProps=Object(use_link_props["a"])(typeof partition==="string"?getEntitySpecificSingleMetricViewerLink(jobId,timeRange,{"event.dataset":partition}):getOverallAnomalyExplorerLinkDescriptor(jobId,timeRange));const buttonLabel=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.analysis.analyzeInMlButtonLabel",defaultMessage:"Analyze in ML"});return typeof partition==="string"?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],_extends({fill:false,size:"s"},linkProps),buttonLabel):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],_extends({fill:true,size:"s"},linkProps),buttonLabel)};const getOverallAnomalyExplorerLinkDescriptor=(jobId,timeRange)=>{const _convertTimeRangeToPa=convertTimeRangeToParams(timeRange),from=_convertTimeRangeToPa.from,to=_convertTimeRangeToPa.to;const _g=Object(rison["encode"])({ml:{jobIds:[jobId]},time:{from:from,to:to}});return{app:"ml",pathname:"/explorer",search:{_g:_g}}};const getEntitySpecificSingleMetricViewerLink=(jobId,timeRange,entities)=>{const _convertTimeRangeToPa2=convertTimeRangeToParams(timeRange),from=_convertTimeRangeToPa2.from,to=_convertTimeRangeToPa2.to;const _g=Object(rison["encode"])({ml:{jobIds:[jobId]},time:{from:from,to:to,mode:"absolute"}});const _a=Object(rison["encode"])({mlTimeSeriesExplorer:{entities:entities}});return{app:"ml",pathname:"/timeseriesexplorer",search:{_g:_g,_a:_a}}};const convertTimeRangeToParams=timeRange=>({from:new Date(timeRange.startTime).toISOString(),to:new Date(timeRange.endTime).toISOString()});const FirstUseCallout=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"success",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.onboardingSuccessTitle",{defaultMessage:"Success!"})},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.onboardingSuccessContent",{defaultMessage:"Please allow a few minutes for our machine learning robots to begin collecting data."})));const LogAnalysisJobProblemIndicator=({hasOutdatedJobConfigurations:hasOutdatedJobConfigurations,hasOutdatedJobDefinitions:hasOutdatedJobDefinitions,hasSetupCapabilities:hasSetupCapabilities,hasStoppedJobs:hasStoppedJobs,isFirstUse:isFirstUse,moduleName:moduleName,onRecreateMlJobForReconfiguration:onRecreateMlJobForReconfiguration,onRecreateMlJobForUpdate:onRecreateMlJobForUpdate})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,hasOutdatedJobDefinitions?external_kbnSharedDeps_React_default.a.createElement(JobDefinitionOutdatedCallout,{hasSetupCapabilities:hasSetupCapabilities,moduleName:moduleName,onRecreateMlJob:onRecreateMlJobForUpdate}):null,hasOutdatedJobConfigurations?external_kbnSharedDeps_React_default.a.createElement(JobConfigurationOutdatedCallout,{hasSetupCapabilities:hasSetupCapabilities,moduleName:moduleName,onRecreateMlJob:onRecreateMlJobForReconfiguration}):null,hasStoppedJobs?external_kbnSharedDeps_React_default.a.createElement(JobStoppedCallout,null):null,isFirstUse?external_kbnSharedDeps_React_default.a.createElement(FirstUseCallout,null):null);var quality_warning_notices=__webpack_require__(240);const CategoryJobNoticesSection=({hasOutdatedJobConfigurations:hasOutdatedJobConfigurations,hasOutdatedJobDefinitions:hasOutdatedJobDefinitions,hasSetupCapabilities:hasSetupCapabilities,hasStoppedJobs:hasStoppedJobs,isFirstUse:isFirstUse,moduleName:moduleName,onRecreateMlJobForReconfiguration:onRecreateMlJobForReconfiguration,onRecreateMlJobForUpdate:onRecreateMlJobForUpdate,qualityWarnings:qualityWarnings})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(LogAnalysisJobProblemIndicator,{hasOutdatedJobConfigurations:hasOutdatedJobConfigurations,hasOutdatedJobDefinitions:hasOutdatedJobDefinitions,hasSetupCapabilities:hasSetupCapabilities,hasStoppedJobs:hasStoppedJobs,isFirstUse:isFirstUse,moduleName:moduleName,onRecreateMlJobForReconfiguration:onRecreateMlJobForReconfiguration,onRecreateMlJobForUpdate:onRecreateMlJobForUpdate}),external_kbnSharedDeps_React_default.a.createElement(quality_warning_notices["b"],{hasSetupCapabilities:hasSetupCapabilities,qualityWarnings:qualityWarnings,onRecreateMlJob:onRecreateMlJobForReconfiguration}));function view_log_in_context_slicedToArray(arr,i){return view_log_in_context_arrayWithHoles(arr)||view_log_in_context_iterableToArrayLimit(arr,i)||view_log_in_context_unsupportedIterableToArray(arr,i)||view_log_in_context_nonIterableRest()}function view_log_in_context_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function view_log_in_context_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return view_log_in_context_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return view_log_in_context_arrayLikeToArray(o,minLen)}function view_log_in_context_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function view_log_in_context_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function view_log_in_context_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useViewLogInContext=props=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(),_useState2=view_log_in_context_slicedToArray(_useState,2),contextEntry=_useState2[0],setContextEntry=_useState2[1];const startTimestamp=props.startTimestamp,endTimestamp=props.endTimestamp,sourceId=props.sourceId;return[{startTimestamp:startTimestamp,endTimestamp:endTimestamp,sourceId:sourceId,contextEntry:contextEntry},{setContextEntry:setContextEntry}]};const ViewLogInContext=constate_cjs_default()(useViewLogInContext);function useInterval(callback,delay){const savedCallback=Object(external_kbnSharedDeps_React_["useRef"])(callback);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{savedCallback.current=callback},[callback]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{function tick(){savedCallback.current()}if(delay!==null){const id=setInterval(tick,delay);return()=>clearInterval(id)}},[delay])}function use_viewport_dimensions_slicedToArray(arr,i){return use_viewport_dimensions_arrayWithHoles(arr)||use_viewport_dimensions_iterableToArrayLimit(arr,i)||use_viewport_dimensions_unsupportedIterableToArray(arr,i)||use_viewport_dimensions_nonIterableRest()}function use_viewport_dimensions_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_viewport_dimensions_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_viewport_dimensions_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_viewport_dimensions_arrayLikeToArray(o,minLen)}function use_viewport_dimensions_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_viewport_dimensions_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_viewport_dimensions_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const getViewportWidth=()=>window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;const getViewportHeight=()=>window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;function useViewportDimensions(){const _useState=Object(external_kbnSharedDeps_React_["useState"])({width:getViewportWidth(),height:getViewportHeight()}),_useState2=use_viewport_dimensions_slicedToArray(_useState,2),dimensions=_useState2[0],setDimensions=_useState2[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const updateDimensions=Object(external_kbnSharedDeps_Lodash_["throttle"])(()=>{setDimensions({width:getViewportWidth(),height:getViewportHeight()})},250);window.addEventListener("resize",updateDimensions);return()=>window.removeEventListener("resize",updateDimensions)},[]);return dimensions}var log_stream=__webpack_require__(287);function _templateObject(){const data=_taggedTemplateLiteral(["\n  padding: 16px;\n  width: ",";\n  height: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function page_view_log_in_context_slicedToArray(arr,i){return page_view_log_in_context_arrayWithHoles(arr)||page_view_log_in_context_iterableToArrayLimit(arr,i)||page_view_log_in_context_unsupportedIterableToArray(arr,i)||page_view_log_in_context_nonIterableRest()}function page_view_log_in_context_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function page_view_log_in_context_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return page_view_log_in_context_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return page_view_log_in_context_arrayLikeToArray(o,minLen)}function page_view_log_in_context_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function page_view_log_in_context_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function page_view_log_in_context_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const MODAL_MARGIN=25;const PageViewLogInContext=()=>{const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(ViewLogInContext.Context),_useContext2=page_view_log_in_context_slicedToArray(_useContext,2),_useContext2$=_useContext2[0],contextEntry=_useContext2$.contextEntry,startTimestamp=_useContext2$.startTimestamp,endTimestamp=_useContext2$.endTimestamp,sourceId=_useContext2$.sourceId,setContextEntry=_useContext2[1].setContextEntry;const closeModal=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setContextEntry(undefined),[setContextEntry]);const _useViewportDimension=useViewportDimensions(),vw=_useViewportDimension.width,vh=_useViewportDimension.height;const contextQuery=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{if(contextEntry&&!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(contextEntry.context)){return Object.entries(contextEntry.context).reduce((kuery,[key,value])=>{const currentExpression="".concat(key,' : "').concat(value,'"');if(kuery.length>0){return"".concat(kuery," AND ").concat(currentExpression)}else{return currentExpression}},"")}},[contextEntry]);if(!contextEntry){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:closeModal,maxWidth:false},external_kbnSharedDeps_React_default.a.createElement(LogInContextWrapper,{width:vw-MODAL_MARGIN*2,height:vh-MODAL_MARGIN*2},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",responsive:false,wrap:false,style:{height:"100%"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(LogEntryContext,{context:contextEntry.context})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1},external_kbnSharedDeps_React_default.a.createElement(log_stream["LogStream"],{sourceId:sourceId,startTimestamp:startTimestamp,endTimestamp:endTimestamp,query:contextQuery,center:contextEntry.cursor,highlight:contextEntry.id,height:"100%"}))))))};const LogInContextWrapper=observability_public_["euiStyled"].div(_templateObject(),props=>typeof props.width==="number"?"".concat(props.width,"px"):props.width,props=>typeof props.height==="number"?"".concat(props.height,"px"):props.height);const LogEntryContext=({context:context})=>{let text;if("container.id"in context){text=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.viewInContext.logsFromContainerTitle",defaultMessage:"Displayed logs are from container {container}",values:{container:context["container.id"]}})}if("host.name"in context){const shortenedFilePath=context["log.file.path"].length>45?context["log.file.path"].slice(0,20)+"..."+context["log.file.path"].slice(-25):context["log.file.path"];text=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.viewInContext.logsFromFileTitle",defaultMessage:"Displayed logs are from file {file} and host {host}",values:{file:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:context["log.file.path"]},external_kbnSharedDeps_React_default.a.createElement("span",null,shortenedFilePath)),host:context["host.name"]}})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},text)))};const BetaBadge=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBetaBadge"],{"aria-label":betaBadgeLabel,label:betaBadgeLabel,tooltipContent:betaBadgeTooltipContent,className:"eui-alignMiddle"});const betaBadgeLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.common.tabBetaBadgeLabel",{defaultMessage:"Beta"});const betaBadgeTooltipContent=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.common.tabBetaBadgeTooltipContent",{defaultMessage:"This feature is under active development. Extra functionality is coming, and some functionality may change."});var loading_overlay_wrapper=__webpack_require__(129);const DatasetsSelector=({availableDatasets:availableDatasets,isLoading:isLoading=false,onChangeDatasetSelection:onChangeDatasetSelection,selectedDatasets:selectedDatasets})=>{const options=Object(external_kbnSharedDeps_React_["useMemo"])(()=>availableDatasets.map(dataset=>({value:dataset,label:Object(log_analysis["getFriendlyNameForPartitionId"])(dataset)})),[availableDatasets]);const selectedOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>options.filter(({value:value})=>value!=null&&selectedDatasets.includes(value)),[options,selectedDatasets]);const handleChange=Object(external_kbnSharedDeps_React_["useCallback"])(newSelectedOptions=>onChangeDatasetSelection(newSelectedOptions.map(({value:value})=>value).filter(isDefined)),[onChangeDatasetSelection]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{"aria-label":datasetFilterPlaceholder,isLoading:isLoading,onChange:handleChange,options:options,placeholder:datasetFilterPlaceholder,selectedOptions:selectedOptions})};const datasetFilterPlaceholder=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.datasetFilterPlaceholder",{defaultMessage:"Filter by datasets"});const isDefined=value=>value!=null;var external_kbnSharedDeps_ElasticNumeral_=__webpack_require__(64);var external_kbnSharedDeps_ElasticNumeral_default=__webpack_require__.n(external_kbnSharedDeps_ElasticNumeral_);var useSet=__webpack_require__(248);var useSet_default=__webpack_require__.n(useSet);const RowExpansionButton=({isExpanded:isExpanded,item:item,onCollapse:onCollapse,onExpand:onExpand})=>{const handleClick=Object(external_kbnSharedDeps_React_["useCallback"])(()=>isExpanded?onCollapse(item):onExpand(item),[isExpanded,item,onCollapse,onExpand]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:handleClick,"aria-label":isExpanded?collapseAriaLabel:expandAriaLabel,iconType:isExpanded?"arrowUp":"arrowDown"})};const collapseAriaLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.table.collapseRowLabel",{defaultMessage:"Collapse"});const expandAriaLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.table.expandRowLabel",{defaultMessage:"Expand"});const AnomalySeverityIndicator=({anomalyScore:anomalyScore})=>{const severityColor=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getColorForAnomalyScore(anomalyScore),[anomalyScore]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHealth"],{color:severityColor},Object(log_analysis["formatAnomalyScore"])(anomalyScore))};const getColorForAnomalyScore=anomalyScore=>{const severityCategory=Object(log_analysis["getSeverityCategoryForScore"])(anomalyScore);if(severityCategory!=null&&severityCategory in log_analysis["ML_SEVERITY_COLORS"]){return log_analysis["ML_SEVERITY_COLORS"][severityCategory]}else{return"subdued"}};const AnomalySeverityIndicatorList=({datasets:datasets})=>external_kbnSharedDeps_React_default.a.createElement("ul",null,datasets.map(dataset=>{const datasetLabel=Object(log_analysis["getFriendlyNameForPartitionId"])(dataset.name);return external_kbnSharedDeps_React_default.a.createElement("li",{key:datasetLabel},external_kbnSharedDeps_React_default.a.createElement(AnomalySeverityIndicator,{anomalyScore:dataset.maximumAnomalyScore}))}));var http_api_log_analysis=__webpack_require__(97);function get_log_entry_category_examples_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function get_log_entry_category_examples_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){get_log_entry_category_examples_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){get_log_entry_category_examples_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callGetLogEntryCategoryExamplesAPI=function(){var _ref=get_log_entry_category_examples_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var sourceId,startTime,endTime,categoryId,exampleCount,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:sourceId=requestArgs.sourceId,startTime=requestArgs.startTime,endTime=requestArgs.endTime,categoryId=requestArgs.categoryId,exampleCount=requestArgs.exampleCount;_context.next=3;return fetch(http_api_log_analysis["f"],{method:"POST",body:JSON.stringify(http_api_log_analysis["u"].encode({data:{categoryId:categoryId,exampleCount:exampleCount,sourceId:sourceId,timeRange:{startTime:startTime,endTime:endTime}}}))});case 3:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api_log_analysis["v"])(response));case 5:case"end":return _context.stop()}}),_callee)})));return function callGetLogEntryCategoryExamplesAPI(_x,_x2){return _ref.apply(this,arguments)}}();function use_log_entry_category_examples_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_log_entry_category_examples_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_log_entry_category_examples_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_log_entry_category_examples_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function use_log_entry_category_examples_slicedToArray(arr,i){return use_log_entry_category_examples_arrayWithHoles(arr)||use_log_entry_category_examples_iterableToArrayLimit(arr,i)||use_log_entry_category_examples_unsupportedIterableToArray(arr,i)||use_log_entry_category_examples_nonIterableRest()}function use_log_entry_category_examples_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_log_entry_category_examples_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_log_entry_category_examples_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_log_entry_category_examples_arrayLikeToArray(o,minLen)}function use_log_entry_category_examples_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_log_entry_category_examples_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_log_entry_category_examples_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogEntryCategoryExamples=({categoryId:categoryId,endTime:endTime,exampleCount:exampleCount,sourceId:sourceId,startTime:startTime})=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=use_log_entry_category_examples_slicedToArray(_useState,2),logEntryCategoryExamples=_useState2[0],setLogEntryCategoryExamples=_useState2[1];const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"creation",createPromise:function(){var _createPromise=use_log_entry_category_examples_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return callGetLogEntryCategoryExamplesAPI({sourceId:sourceId,startTime:startTime,endTime:endTime,categoryId:categoryId,exampleCount:exampleCount},services.http.fetch);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})));function createPromise(){return _createPromise.apply(this,arguments)}return createPromise}(),onResolve:({data:{examples:examples}})=>{setLogEntryCategoryExamples(examples)}},[categoryId,endTime,exampleCount,sourceId,startTime]),_useTrackedPromise2=use_log_entry_category_examples_slicedToArray(_useTrackedPromise,2),getLogEntryCategoryExamplesRequest=_useTrackedPromise2[0],getLogEntryCategoryExamples=_useTrackedPromise2[1];const isLoadingLogEntryCategoryExamples=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getLogEntryCategoryExamplesRequest.state==="pending",[getLogEntryCategoryExamplesRequest.state]);const hasFailedLoadingLogEntryCategoryExamples=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getLogEntryCategoryExamplesRequest.state==="rejected",[getLogEntryCategoryExamplesRequest.state]);return{getLogEntryCategoryExamples:getLogEntryCategoryExamples,hasFailedLoadingLogEntryCategoryExamples:hasFailedLoadingLogEntryCategoryExamples,isLoadingLogEntryCategoryExamples:isLoadingLogEntryCategoryExamples,logEntryCategoryExamples:logEntryCategoryExamples}};const LogEntryExampleMessagesEmptyIndicator=({onReload:onReload})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",justifyContent:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"eui-textNoWrap"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.logEntryExamples.exampleEmptyDescription",defaultMessage:"No examples found within the selected time range. Increase the log entry retention period to improve message sample availability."})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:onReload,size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.logEntryExamples.exampleEmptyReloadButtonLabel",defaultMessage:"Reload"}))));const LogEntryExampleMessagesFailureIndicator=({onRetry:onRetry})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",justifyContent:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"eui-textNoWrap"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"danger"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.logEntryExamples.exampleLoadingFailureDescription",defaultMessage:"Failed to load examples."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:onRetry,size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.logEntryExamples.exampleLoadingFailureRetryButtonLabel",defaultMessage:"Retry"}))));const LogEntryExampleMessagesLoadingIndicator=({exampleCount:exampleCount})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,Array.from(new Array(exampleCount),(_value,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingContent"],{key:index,lines:1})));function log_entry_examples_templateObject(){const data=log_entry_examples_taggedTemplateLiteral(["\n  align-items: stretch;\n  flex-direction: column;\n  flex: 1 0 0%;\n  overflow: hidden;\n"]);log_entry_examples_templateObject=function _templateObject(){return data};return data}function log_entry_examples_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const LogEntryExampleMessages=({isLoading:isLoading,hasFailedLoading:hasFailedLoading,exampleCount:exampleCount,hasResults:hasResults,onReload:onReload,children:children})=>external_kbnSharedDeps_React_default.a.createElement(Wrapper,null,isLoading?external_kbnSharedDeps_React_default.a.createElement(LogEntryExampleMessagesLoadingIndicator,{exampleCount:exampleCount}):hasFailedLoading?external_kbnSharedDeps_React_default.a.createElement(LogEntryExampleMessagesFailureIndicator,{onRetry:onReload}):!hasResults?external_kbnSharedDeps_React_default.a.createElement(LogEntryExampleMessagesEmptyIndicator,{onReload:onReload}):children);const Wrapper=observability_public_["euiStyled"].div(log_entry_examples_templateObject());var log_text_stream=__webpack_require__(162);var log_entry_context_menu=__webpack_require__(146);function category_example_message_slicedToArray(arr,i){return category_example_message_arrayWithHoles(arr)||category_example_message_iterableToArrayLimit(arr,i)||category_example_message_unsupportedIterableToArray(arr,i)||category_example_message_nonIterableRest()}function category_example_message_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function category_example_message_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return category_example_message_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return category_example_message_arrayLikeToArray(o,minLen)}function category_example_message_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function category_example_message_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function category_example_message_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const exampleMessageScale="medium";const exampleTimestampFormat="dateTime";const CategoryExampleMessage=({id:id,dataset:dataset,message:message,timestamp:timestamp,timeRange:timeRange,tiebreaker:tiebreaker,context:context})=>{const trackMetric=Object(observability_public_["useUiTracker"])({app:"infra_logs"});const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(ViewLogInContext.Context),_useContext2=category_example_message_slicedToArray(_useContext,2),setContextEntry=_useContext2[1].setContextEntry;const humanFriendlyDataset=Object(log_analysis["getFriendlyNameForPartitionId"])(dataset);const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=category_example_message_slicedToArray(_useState,2),isHovered=_useState2[0],setIsHovered=_useState2[1];const setHovered=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsHovered(true),[]);const setNotHovered=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsHovered(false),[]);const _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=category_example_message_slicedToArray(_useState3,2),isMenuOpen=_useState4[0],setIsMenuOpen=_useState4[1];const openMenu=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsMenuOpen(true),[]);const closeMenu=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsMenuOpen(false),[]);const viewInStreamLinkProps=Object(use_link_props["a"])({app:"logs",pathname:"stream",search:{logPosition:Object(rison["encode"])({end:external_kbnSharedDeps_Moment_default()(timeRange.endTime).format("YYYY-MM-DDTHH:mm:ss.SSSZ"),position:{tiebreaker:tiebreaker,time:timestamp},start:external_kbnSharedDeps_Moment_default()(timeRange.startTime).format("YYYY-MM-DDTHH:mm:ss.SSSZ"),streamLive:false}),flyoutOptions:Object(rison["encode"])({surroundingLogsId:id}),logFilter:Object(rison["encode"])({expression:"".concat(log_analysis["partitionField"],": ").concat(dataset),kind:"kuery"})}});return external_kbnSharedDeps_React_default.a.createElement(log_text_stream["e"],{scale:exampleMessageScale,onMouseEnter:setHovered,onMouseLeave:setNotHovered},external_kbnSharedDeps_React_default.a.createElement(log_text_stream["a"],columnWidths[timestampColumnId],external_kbnSharedDeps_React_default.a.createElement(log_text_stream["f"],{format:exampleTimestampFormat,time:timestamp})),external_kbnSharedDeps_React_default.a.createElement(log_text_stream["a"],columnWidths[messageColumnId],external_kbnSharedDeps_React_default.a.createElement(log_text_stream["d"],{columnValue:{columnId:messageColumnId,message:[{field:"message",value:[message],highlights:[]}]},highlights:noHighlights,isActiveHighlight:false,wrapMode:"none"})),external_kbnSharedDeps_React_default.a.createElement(log_text_stream["a"],columnWidths[datasetColumnId],external_kbnSharedDeps_React_default.a.createElement(log_text_stream["c"],{columnValue:{columnId:datasetColumnId,field:"event.dataset",value:[humanFriendlyDataset],highlights:[]},highlights:noHighlights,isActiveHighlight:false,wrapMode:"none"})),external_kbnSharedDeps_React_default.a.createElement(log_text_stream["a"],columnWidths[iconColumnId],isHovered||isMenuOpen?external_kbnSharedDeps_React_default.a.createElement(log_entry_context_menu["a"],{isOpen:isMenuOpen,onOpen:openMenu,onClose:closeMenu,items:[{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.categoryExample.viewInStreamText",{defaultMessage:"View in stream"}),onClick:viewInStreamLinkProps.onClick,href:viewInStreamLinkProps.href},{label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.categoryExample.viewInContextText",{defaultMessage:"View in context"}),onClick:()=>{const logEntry={id:id,context:context,cursor:{time:timestamp,tiebreaker:tiebreaker},columns:[]};trackMetric({metric:"view_in_context__categories"});setContextEntry(logEntry)}}]}):null))};const noHighlights=[];const timestampColumnId="category-example-timestamp-column";const messageColumnId="category-examples-message-column";const datasetColumnId="category-examples-dataset-column";const iconColumnId="category-examples-icon-column";const columnWidths={[timestampColumnId]:{growWeight:0,shrinkWeight:0,baseWidth:"332px"},[messageColumnId]:{growWeight:1,shrinkWeight:0,baseWidth:"0%"},[datasetColumnId]:{growWeight:0,shrinkWeight:0,baseWidth:"400px"},[iconColumnId]:{growWeight:0,shrinkWeight:0,baseWidth:"32px"}};const exampleMessageColumnConfigurations=[{timestampColumn:{id:timestampColumnId}},{messageColumn:{id:messageColumnId}},{fieldColumn:{field:"event.dataset",id:datasetColumnId}}];const category_details_row_exampleCount=5;const CategoryDetailsRow=({categoryId:categoryId,timeRange:timeRange,sourceId:sourceId})=>{const _useLogEntryCategoryE=useLogEntryCategoryExamples({categoryId:categoryId,endTime:timeRange.endTime,exampleCount:category_details_row_exampleCount,sourceId:sourceId,startTime:timeRange.startTime}),getLogEntryCategoryExamples=_useLogEntryCategoryE.getLogEntryCategoryExamples,hasFailedLoadingLogEntryCategoryExamples=_useLogEntryCategoryE.hasFailedLoadingLogEntryCategoryExamples,isLoadingLogEntryCategoryExamples=_useLogEntryCategoryE.isLoadingLogEntryCategoryExamples,logEntryCategoryExamples=_useLogEntryCategoryE.logEntryCategoryExamples;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{getLogEntryCategoryExamples()},[getLogEntryCategoryExamples]);return external_kbnSharedDeps_React_default.a.createElement(LogEntryExampleMessages,{isLoading:isLoadingLogEntryCategoryExamples,hasFailedLoading:hasFailedLoadingLogEntryCategoryExamples,hasResults:logEntryCategoryExamples.length>0,exampleCount:category_details_row_exampleCount,onReload:getLogEntryCategoryExamples},logEntryCategoryExamples.map((example,exampleIndex)=>external_kbnSharedDeps_React_default.a.createElement(CategoryExampleMessage,{key:exampleIndex,id:example.id,dataset:example.dataset,message:example.message,timeRange:timeRange,timestamp:example.timestamp,tiebreaker:example.tiebreaker,context:example.context})))};function _templateObject3(){const data=category_expression_taggedTemplateLiteral(["\n  font-weight: bold;\n"]);_templateObject3=function _templateObject3(){return data};return data}function _templateObject2(){const data=category_expression_taggedTemplateLiteral(["\n  color: ",";\n"]);_templateObject2=function _templateObject2(){return data};return data}function category_expression_templateObject(){const data=category_expression_taggedTemplateLiteral(["\n  font-family: ",";\n  word-break: break-all;\n"]);category_expression_templateObject=function _templateObject(){return data};return data}function category_expression_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const RegularExpressionRepresentation=Object(external_kbnSharedDeps_React_["memo"])(({maximumSegmentCount:maximumSegmentCount=30,regularExpression:regularExpression})=>{const segments=regularExpression.split(collapsedRegularExpressionCharacters);return external_kbnSharedDeps_React_default.a.createElement(CategoryPattern,null,segments.slice(0,maximumSegmentCount).map((segment,segmentIndex)=>[segmentIndex>0?external_kbnSharedDeps_React_default.a.createElement(CategoryPatternWildcard,{key:"wildcard-".concat(segmentIndex)},"⁕"):null,external_kbnSharedDeps_React_default.a.createElement(CategoryPatternSegment,{key:"segment-".concat(segmentIndex)},segment.replace(escapedRegularExpressionCharacters,"$1"))]),segments.length>maximumSegmentCount?external_kbnSharedDeps_React_default.a.createElement(CategoryPatternWildcard,{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.truncatedPatternSegmentDescription",{defaultMessage:"{extraSegmentCount, plural, one {one more segment} other {# more segments}}",values:{extraSegmentCount:segments.length-maximumSegmentCount}})},"…"):null)});const CategoryPattern=observability_public_["euiStyled"].span(category_expression_templateObject(),props=>props.theme.eui.euiCodeFontFamily);const CategoryPatternWildcard=observability_public_["euiStyled"].span(_templateObject2(),props=>props.theme.eui.euiColorMediumShade);const CategoryPatternSegment=observability_public_["euiStyled"].span(_templateObject3());const collapsedRegularExpressionCharacters=/\.[+*]\??/g;const escapedRegularExpressionCharacters=/\\([\\^$*+?.()\[\]])/g;function analyze_dataset_in_ml_action_extends(){analyze_dataset_in_ml_action_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return analyze_dataset_in_ml_action_extends.apply(this,arguments)}const AnalyzeCategoryDatasetInMlAction=({categorizationJobId:categorizationJobId,categoryId:categoryId,dataset:dataset,timeRange:timeRange})=>{const linkProps=Object(use_link_props["a"])(getEntitySpecificSingleMetricViewerLink(categorizationJobId,timeRange,{"event.dataset":dataset,mlcategory:"".concat(categoryId)}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:analyseCategoryDatasetInMlTooltipDescription,delay:"long"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],analyze_dataset_in_ml_action_extends({"aria-label":analyseCategoryDatasetInMlButtonLabel,iconType:"machineLearningApp","data-test-subj":"analyzeCategoryDatasetInMlButton"},linkProps)))};const analyseCategoryDatasetInMlButtonLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.analyzeCategoryInMlButtonLabel",{defaultMessage:"Analyze in ML"});const analyseCategoryDatasetInMlTooltipDescription=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.analyzeCategoryInMlTooltipDescription",{defaultMessage:"Analyze this category in the ML app."});const DatasetActionsList=({categorizationJobId:categorizationJobId,categoryId:categoryId,datasets:datasets,timeRange:timeRange})=>external_kbnSharedDeps_React_default.a.createElement("ul",null,datasets.map(dataset=>{const datasetLabel=Object(log_analysis["getFriendlyNameForPartitionId"])(dataset.name);return external_kbnSharedDeps_React_default.a.createElement("li",{key:datasetLabel},external_kbnSharedDeps_React_default.a.createElement(AnalyzeCategoryDatasetInMlAction,{categorizationJobId:categorizationJobId,categoryId:categoryId,dataset:dataset.name,timeRange:timeRange}))}));function datasets_list_templateObject(){const data=datasets_list_taggedTemplateLiteral(["\n  display: inline-block;\n  margin-bottom: 2.5px;\n  margin-top: 1px;\n"]);datasets_list_templateObject=function _templateObject(){return data};return data}function datasets_list_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const DatasetsList=({datasets:datasets})=>external_kbnSharedDeps_React_default.a.createElement("ul",null,datasets.map(dataset=>{const datasetLabel=Object(log_analysis["getFriendlyNameForPartitionId"])(dataset.name);return external_kbnSharedDeps_React_default.a.createElement("li",{key:datasetLabel},external_kbnSharedDeps_React_default.a.createElement(DatasetLabel,null,datasetLabel))}));const DatasetLabel=observability_public_["euiStyled"].div(datasets_list_templateObject());function single_metric_comparison_templateObject(){const data=single_metric_comparison_taggedTemplateLiteral(["\n  white-space: nowrap;\n"]);single_metric_comparison_templateObject=function _templateObject(){return data};return data}function single_metric_comparison_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const SingleMetricComparison=({currentValue:currentValue,previousValue:previousValue})=>{const changeFactor=currentValue/previousValue-1;if(changeFactor<0){return external_kbnSharedDeps_React_default.a.createElement(NoWrapSpan,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"sortDown",color:"danger"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"danger"},formatPercentage(changeFactor)))}else if(changeFactor>0&&Number.isFinite(changeFactor)){return external_kbnSharedDeps_React_default.a.createElement(NoWrapSpan,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"sortUp",color:"success"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"secondary"},formatPercentage(changeFactor)))}else if(changeFactor>0&&!Number.isFinite(changeFactor)){return external_kbnSharedDeps_React_default.a.createElement(NoWrapSpan,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"sortUp",color:"success"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"secondary"},newCategoryTrendLabel))}return null};const formatPercentage=value=>external_kbnSharedDeps_ElasticNumeral_default()(value).format("+0,0 %");const newCategoryTrendLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.newCategoryTrendLabel",{defaultMessage:"new"});const NoWrapSpan=observability_public_["euiStyled"].span(single_metric_comparison_templateObject());var external_kbnSharedDeps_ElasticCharts_=__webpack_require__(61);var external_kbnSharedDeps_ElasticEuiChartsTheme_=__webpack_require__(70);var use_kibana_ui_setting=__webpack_require__(103);function single_metric_sparkline_slicedToArray(arr,i){return single_metric_sparkline_arrayWithHoles(arr)||single_metric_sparkline_iterableToArrayLimit(arr,i)||single_metric_sparkline_unsupportedIterableToArray(arr,i)||single_metric_sparkline_nonIterableRest()}function single_metric_sparkline_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function single_metric_sparkline_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return single_metric_sparkline_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return single_metric_sparkline_arrayLikeToArray(o,minLen)}function single_metric_sparkline_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function single_metric_sparkline_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function single_metric_sparkline_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const timestampAccessor="timestamp";const valueAccessor=["value"];const sparklineSize={height:20,width:100};const SingleMetricSparkline=({metric:metric,timeRange:timeRange})=>{const _useKibanaUiSetting=Object(use_kibana_ui_setting["a"])("theme:darkMode"),_useKibanaUiSetting2=single_metric_sparkline_slicedToArray(_useKibanaUiSetting,1),isDarkMode=_useKibanaUiSetting2[0];const theme=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[external_kbnSharedDeps_ElasticEuiChartsTheme_["EUI_SPARKLINE_THEME_PARTIAL"],isDarkMode?external_kbnSharedDeps_ElasticEuiChartsTheme_["EUI_CHARTS_THEME_DARK"].theme:external_kbnSharedDeps_ElasticEuiChartsTheme_["EUI_CHARTS_THEME_LIGHT"].theme],[isDarkMode]);const xDomain=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({max:timeRange.endTime,min:timeRange.startTime}),[timeRange]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Chart"],{size:sparklineSize},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Settings"],{showLegend:false,theme:theme,tooltip:"none",xDomain:xDomain}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["AreaSeries"],{data:metric,id:"metric",xAccessor:timestampAccessor,xScaleType:"time",yAccessors:valueAccessor}))};const LogEntryCountSparkline=({currentCount:currentCount,histograms:histograms,timeRange:timeRange})=>{const metric=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{var _histograms$find$buck,_histograms$find,_histograms$find$buck2;return(_histograms$find$buck=(_histograms$find=histograms.find(histogram=>histogram.histogramId==="history"))===null||_histograms$find===void 0?void 0:(_histograms$find$buck2=_histograms$find.buckets)===null||_histograms$find$buck2===void 0?void 0:_histograms$find$buck2.map(({startTime:timestamp,logEntryCount:value})=>({timestamp:timestamp,value:value})))!==null&&_histograms$find$buck!==void 0?_histograms$find$buck:[]},[histograms]);const referenceCount=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{var _histograms$find$buck3,_histograms$find2,_histograms$find2$buc,_histograms$find2$buc2;return(_histograms$find$buck3=(_histograms$find2=histograms.find(histogram=>histogram.histogramId==="reference"))===null||_histograms$find2===void 0?void 0:(_histograms$find2$buc=_histograms$find2.buckets)===null||_histograms$find2$buc===void 0?void 0:(_histograms$find2$buc2=_histograms$find2$buc[0])===null||_histograms$find2$buc2===void 0?void 0:_histograms$find2$buc2.logEntryCount)!==null&&_histograms$find$buck3!==void 0?_histograms$find$buck3:0},[histograms]);const overallTimeRange=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({endTime:timeRange.endTime,startTime:timeRange.startTime-(timeRange.endTime-timeRange.startTime)}),[timeRange.endTime,timeRange.startTime]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(SingleMetricSparkline,{metric:metric,timeRange:overallTimeRange}),external_kbnSharedDeps_React_default.a.createElement(SingleMetricComparison,{previousValue:referenceCount,currentValue:currentCount}))};function top_categories_table_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function top_categories_table_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){top_categories_table_ownKeys(Object(source),true).forEach((function(key){top_categories_table_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{top_categories_table_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function top_categories_table_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function top_categories_table_slicedToArray(arr,i){return top_categories_table_arrayWithHoles(arr)||top_categories_table_iterableToArrayLimit(arr,i)||top_categories_table_unsupportedIterableToArray(arr,i)||top_categories_table_nonIterableRest()}function top_categories_table_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function top_categories_table_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return top_categories_table_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return top_categories_table_arrayLikeToArray(o,minLen)}function top_categories_table_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function top_categories_table_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function top_categories_table_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function top_categories_table_templateObject(){const data=top_categories_table_taggedTemplateLiteral(["\n  &.euiTableRow--topAligned .euiTableRowCell {\n    vertical-align: top;\n  }\n"]);top_categories_table_templateObject=function _templateObject(){return data};return data}function top_categories_table_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const TopCategoriesTable=Object(observability_public_["euiStyled"])(({categorizationJobId:categorizationJobId,className:className,sourceId:sourceId,timeRange:timeRange,topCategories:topCategories})=>{const _useSet=useSet_default()(new Set),_useSet2=top_categories_table_slicedToArray(_useSet,2),expandedCategories=_useSet2[0],_useSet2$=_useSet2[1],expandCategory=_useSet2$.add,collapseCategory=_useSet2$.remove;const columns=Object(external_kbnSharedDeps_React_["useMemo"])(()=>createColumns(timeRange,categorizationJobId,expandedCategories,expandCategory,collapseCategory),[categorizationJobId,collapseCategory,expandCategory,expandedCategories,timeRange]);const expandedRowContentsById=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[...expandedCategories].reduce((aggregatedCategoryRows,categoryId)=>top_categories_table_objectSpread(top_categories_table_objectSpread({},aggregatedCategoryRows),{},{[categoryId]:external_kbnSharedDeps_React_default.a.createElement(CategoryDetailsRow,{categoryId:categoryId,sourceId:sourceId,timeRange:timeRange})}),{}),[expandedCategories,sourceId,timeRange]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{columns:columns,itemIdToExpandedRowMap:expandedRowContentsById,itemId:"categoryId",items:topCategories,rowProps:{className:"".concat(className," euiTableRow--topAligned")}})})(top_categories_table_templateObject());const createColumns=(timeRange,categorizationJobId,expandedCategories,expandCategory,collapseCategory)=>[{align:"right",field:"logEntryCount",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.countColumnTitle",{defaultMessage:"Message count"}),render:logEntryCount=>external_kbnSharedDeps_ElasticNumeral_default()(logEntryCount).format("0,0"),width:"120px"},{field:"histograms",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.trendColumnTitle",{defaultMessage:"Trend"}),render:(histograms,item)=>external_kbnSharedDeps_React_default.a.createElement(LogEntryCountSparkline,{currentCount:item.logEntryCount,histograms:histograms,timeRange:timeRange}),width:"220px"},{field:"regularExpression",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.categoryColumnTitle",{defaultMessage:"Category"}),truncateText:true,render:regularExpression=>external_kbnSharedDeps_React_default.a.createElement(RegularExpressionRepresentation,{regularExpression:regularExpression})},{field:"datasets",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.datasetColumnTitle",{defaultMessage:"Datasets"}),render:datasets=>external_kbnSharedDeps_React_default.a.createElement(DatasetsList,{datasets:datasets}),width:"200px"},{align:"right",field:"maximumAnomalyScore",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.maximumAnomalyScoreColumnTitle",{defaultMessage:"Maximum anomaly score"}),render:(_maximumAnomalyScore,item)=>external_kbnSharedDeps_React_default.a.createElement(AnomalySeverityIndicatorList,{datasets:item.datasets}),width:"160px"},{actions:[{render:category=>external_kbnSharedDeps_React_default.a.createElement(DatasetActionsList,{categorizationJobId:categorizationJobId,categoryId:category.categoryId,datasets:category.datasets,timeRange:timeRange})}],width:"40px"},{align:"right",isExpander:true,render:item=>external_kbnSharedDeps_React_default.a.createElement(RowExpansionButton,{isExpanded:expandedCategories.has(item.categoryId),item:item.categoryId,onCollapse:collapseCategory,onExpand:expandCategory}),width:"40px"}];const TopCategoriesSection=({availableDatasets:availableDatasets,hasSetupCapabilities:hasSetupCapabilities,isLoadingDatasets:isLoadingDatasets=false,isLoadingTopCategories:isLoadingTopCategories=false,jobId:jobId,onChangeDatasetSelection:onChangeDatasetSelection,onRequestRecreateMlJob:onRequestRecreateMlJob,selectedDatasets:selectedDatasets,sourceId:sourceId,timeRange:timeRange,topCategories:topCategories})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m","aria-label":title},external_kbnSharedDeps_React_default.a.createElement("h1",null,title," ",external_kbnSharedDeps_React_default.a.createElement(BetaBadge,null)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(create_job_button["b"],{hasSetupCapabilities:hasSetupCapabilities,onClick:onRequestRecreateMlJob,size:"s"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(AnalyzeInMlButton,{jobId:jobId,timeRange:timeRange}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(DatasetsSelector,{availableDatasets:availableDatasets,isLoading:isLoadingDatasets,onChangeDatasetSelection:onChangeDatasetSelection,selectedDatasets:selectedDatasets}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(loading_overlay_wrapper["a"],{isLoading:isLoadingTopCategories,loadingChildren:external_kbnSharedDeps_React_default.a.createElement(LoadingOverlayContent,null)},external_kbnSharedDeps_React_default.a.createElement(TopCategoriesTable,{categorizationJobId:jobId,sourceId:sourceId,timeRange:timeRange,topCategories:topCategories})));const title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.topCategoriesSectionTitle",{defaultMessage:"Log message categories"});const loadingAriaLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.topCategoriesSectionLoadingAriaLabel",{defaultMessage:"Loading message categories"});const LoadingOverlayContent=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl","aria-label":loadingAriaLabel});function get_top_log_entry_categories_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function get_top_log_entry_categories_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){get_top_log_entry_categories_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){get_top_log_entry_categories_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callGetTopLogEntryCategoriesAPI=function(){var _ref=get_top_log_entry_categories_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var sourceId,startTime,endTime,categoryCount,datasets,intervalDuration,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:sourceId=requestArgs.sourceId,startTime=requestArgs.startTime,endTime=requestArgs.endTime,categoryCount=requestArgs.categoryCount,datasets=requestArgs.datasets;intervalDuration=endTime-startTime;_context.next=4;return fetch(http_api_log_analysis["d"],{method:"POST",body:JSON.stringify(http_api_log_analysis["q"].encode({data:{sourceId:sourceId,timeRange:{startTime:startTime,endTime:endTime},categoryCount:categoryCount,datasets:datasets,histograms:[{id:"history",timeRange:{startTime:startTime-intervalDuration,endTime:endTime},bucketCount:10},{id:"reference",timeRange:{startTime:startTime-intervalDuration,endTime:startTime},bucketCount:1}]}}))});case 4:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api_log_analysis["r"])(response));case 6:case"end":return _context.stop()}}),_callee)})));return function callGetTopLogEntryCategoriesAPI(_x,_x2){return _ref.apply(this,arguments)}}();function get_log_entry_category_datasets_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function get_log_entry_category_datasets_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){get_log_entry_category_datasets_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){get_log_entry_category_datasets_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callGetLogEntryCategoryDatasetsAPI=function(){var _ref=get_log_entry_category_datasets_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var sourceId,startTime,endTime,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:sourceId=requestArgs.sourceId,startTime=requestArgs.startTime,endTime=requestArgs.endTime;_context.next=3;return fetch(http_api_log_analysis["e"],{method:"POST",body:JSON.stringify(http_api_log_analysis["s"].encode({data:{sourceId:sourceId,timeRange:{startTime:startTime,endTime:endTime}}}))});case 3:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api_log_analysis["t"])(response));case 5:case"end":return _context.stop()}}),_callee)})));return function callGetLogEntryCategoryDatasetsAPI(_x,_x2){return _ref.apply(this,arguments)}}();function use_log_entry_categories_results_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_log_entry_categories_results_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_log_entry_categories_results_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_log_entry_categories_results_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function use_log_entry_categories_results_slicedToArray(arr,i){return use_log_entry_categories_results_arrayWithHoles(arr)||use_log_entry_categories_results_iterableToArrayLimit(arr,i)||use_log_entry_categories_results_unsupportedIterableToArray(arr,i)||use_log_entry_categories_results_nonIterableRest()}function use_log_entry_categories_results_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_log_entry_categories_results_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_log_entry_categories_results_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_log_entry_categories_results_arrayLikeToArray(o,minLen)}function use_log_entry_categories_results_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_log_entry_categories_results_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_log_entry_categories_results_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogEntryCategoriesResults=({categoriesCount:categoriesCount,filteredDatasets:filteredDatasets,endTime:endTime,onGetLogEntryCategoryDatasetsError:onGetLogEntryCategoryDatasetsError,onGetTopLogEntryCategoriesError:onGetTopLogEntryCategoriesError,sourceId:sourceId,startTime:startTime})=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=use_log_entry_categories_results_slicedToArray(_useState,2),topLogEntryCategories=_useState2[0],setTopLogEntryCategories=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=use_log_entry_categories_results_slicedToArray(_useState3,2),logEntryCategoryDatasets=_useState4[0],setLogEntryCategoryDatasets=_useState4[1];const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"creation",createPromise:function(){var _createPromise=use_log_entry_categories_results_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return callGetTopLogEntryCategoriesAPI({sourceId:sourceId,startTime:startTime,endTime:endTime,categoryCount:categoriesCount,datasets:filteredDatasets},services.http.fetch);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})));function createPromise(){return _createPromise.apply(this,arguments)}return createPromise}(),onResolve:({data:{categories:categories}})=>{setTopLogEntryCategories(categories)},onReject:error=>{if(error instanceof Error&&!(error instanceof use_tracked_promise["a"])&&onGetTopLogEntryCategoriesError){onGetTopLogEntryCategoriesError(error)}}},[categoriesCount,endTime,filteredDatasets,sourceId,startTime]),_useTrackedPromise2=use_log_entry_categories_results_slicedToArray(_useTrackedPromise,2),getTopLogEntryCategoriesRequest=_useTrackedPromise2[0],getTopLogEntryCategories=_useTrackedPromise2[1];const _useTrackedPromise3=Object(use_tracked_promise["b"])({cancelPreviousOn:"creation",createPromise:function(){var _createPromise2=use_log_entry_categories_results_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return callGetLogEntryCategoryDatasetsAPI({sourceId:sourceId,startTime:startTime,endTime:endTime},services.http.fetch);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})));function createPromise(){return _createPromise2.apply(this,arguments)}return createPromise}(),onResolve:({data:{datasets:datasets}})=>{setLogEntryCategoryDatasets(datasets)},onReject:error=>{if(error instanceof Error&&!(error instanceof use_tracked_promise["a"])&&onGetLogEntryCategoryDatasetsError){onGetLogEntryCategoryDatasetsError(error)}}},[categoriesCount,endTime,sourceId,startTime]),_useTrackedPromise4=use_log_entry_categories_results_slicedToArray(_useTrackedPromise3,2),getLogEntryCategoryDatasetsRequest=_useTrackedPromise4[0],getLogEntryCategoryDatasets=_useTrackedPromise4[1];const isLoadingTopLogEntryCategories=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getTopLogEntryCategoriesRequest.state==="pending",[getTopLogEntryCategoriesRequest.state]);const isLoadingLogEntryCategoryDatasets=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getLogEntryCategoryDatasetsRequest.state==="pending",[getLogEntryCategoryDatasetsRequest.state]);const isLoading=Object(external_kbnSharedDeps_React_["useMemo"])(()=>isLoadingTopLogEntryCategories||isLoadingLogEntryCategoryDatasets,[isLoadingLogEntryCategoryDatasets,isLoadingTopLogEntryCategories]);return{getLogEntryCategoryDatasets:getLogEntryCategoryDatasets,getTopLogEntryCategories:getTopLogEntryCategories,isLoading:isLoading,isLoadingLogEntryCategoryDatasets:isLoadingLogEntryCategoryDatasets,isLoadingTopLogEntryCategories:isLoadingTopLogEntryCategories,logEntryCategoryDatasets:logEntryCategoryDatasets,topLogEntryCategories:topLogEntryCategories}};var Either=__webpack_require__(11);var lib_function=__webpack_require__(16);var pipeable=__webpack_require__(14);var use_url_state=__webpack_require__(96);var use_kibana_timefilter_time=__webpack_require__(173);function use_log_entry_categories_results_url_state_slicedToArray(arr,i){return use_log_entry_categories_results_url_state_arrayWithHoles(arr)||use_log_entry_categories_results_url_state_iterableToArrayLimit(arr,i)||use_log_entry_categories_results_url_state_unsupportedIterableToArray(arr,i)||use_log_entry_categories_results_url_state_nonIterableRest()}function use_log_entry_categories_results_url_state_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_log_entry_categories_results_url_state_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_log_entry_categories_results_url_state_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_log_entry_categories_results_url_state_arrayLikeToArray(o,minLen)}function use_log_entry_categories_results_url_state_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_log_entry_categories_results_url_state_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_log_entry_categories_results_url_state_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const autoRefreshRT=lib["union"]([lib["type"]({interval:lib["number"],isPaused:lib["boolean"]}),lib["undefined"]]);const stringTimeRangeRT=lib["type"]({startTime:lib["string"],endTime:lib["string"]});const urlTimeRangeRT=lib["union"]([stringTimeRangeRT,lib["undefined"]]);const TIME_RANGE_URL_STATE_KEY="timeRange";const AUTOREFRESH_URL_STATE_KEY="autoRefresh";const TIME_DEFAULTS={from:"now-2w",to:"now"};const useLogEntryCategoriesResultsUrlState=()=>{const _useKibanaTimefilterT=Object(use_kibana_timefilter_time["a"])(TIME_DEFAULTS),_useKibanaTimefilterT2=use_log_entry_categories_results_url_state_slicedToArray(_useKibanaTimefilterT,1),getTime=_useKibanaTimefilterT2[0];const _getTime=getTime(),start=_getTime.from,end=_getTime.to;const _useUrlState=Object(use_url_state["b"])({defaultState:{startTime:start,endTime:end},decodeUrlState:value=>Object(pipeable["pipe"])(urlTimeRangeRT.decode(value),Object(Either["fold"])(Object(lib_function["constant"])(undefined),lib_function["identity"])),encodeUrlState:urlTimeRangeRT.encode,urlStateKey:TIME_RANGE_URL_STATE_KEY,writeDefaultState:true}),_useUrlState2=use_log_entry_categories_results_url_state_slicedToArray(_useUrlState,2),timeRange=_useUrlState2[0],setTimeRange=_useUrlState2[1];Object(use_kibana_timefilter_time["b"])(TIME_DEFAULTS,{from:timeRange.startTime,to:timeRange.endTime});const _useUrlState3=Object(use_url_state["b"])({defaultState:{isPaused:false,interval:6e4},decodeUrlState:value=>Object(pipeable["pipe"])(autoRefreshRT.decode(value),Object(Either["fold"])(Object(lib_function["constant"])(undefined),lib_function["identity"])),encodeUrlState:autoRefreshRT.encode,urlStateKey:AUTOREFRESH_URL_STATE_KEY,writeDefaultState:true}),_useUrlState4=use_log_entry_categories_results_url_state_slicedToArray(_useUrlState3,2),autoRefresh=_useUrlState4[0],setAutoRefresh=_useUrlState4[1];return{timeRange:timeRange,setTimeRange:setTimeRange,autoRefresh:autoRefresh,setAutoRefresh:setAutoRefresh}};function page_results_content_templateObject(){const data=page_results_content_taggedTemplateLiteral(["\n  flex: 1 0 0%;\n  flex-direction: column;\n\n  .euiFlexGroup--responsive > .euiFlexItem {\n    flex-basis: auto !important;\n  }\n"]);page_results_content_templateObject=function _templateObject(){return data};return data}function page_results_content_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function page_results_content_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function page_results_content_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){page_results_content_ownKeys(Object(source),true).forEach((function(key){page_results_content_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{page_results_content_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function page_results_content_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function page_results_content_slicedToArray(arr,i){return page_results_content_arrayWithHoles(arr)||page_results_content_iterableToArrayLimit(arr,i)||page_results_content_unsupportedIterableToArray(arr,i)||page_results_content_nonIterableRest()}function page_results_content_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function page_results_content_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return page_results_content_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return page_results_content_arrayLikeToArray(o,minLen)}function page_results_content_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function page_results_content_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function page_results_content_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const JOB_STATUS_POLLING_INTERVAL=3e4;const LogEntryCategoriesResultsContent=({onOpenSetup:onOpenSetup})=>{Object(observability_public_["useTrackPageview"])({app:"infra_logs",path:"log_entry_categories_results"});Object(observability_public_["useTrackPageview"])({app:"infra_logs",path:"log_entry_categories_results",delay:15e3});const _useLogAnalysisCapabi=useLogAnalysisCapabilitiesContext(),hasLogAnalysisSetupCapabilities=_useLogAnalysisCapabi.hasLogAnalysisSetupCapabilities;const _useLogEntryCategorie=useLogEntryCategoriesModuleContext(),fetchJobStatus=_useLogEntryCategorie.fetchJobStatus,fetchModuleDefinition=_useLogEntryCategorie.fetchModuleDefinition,moduleDescriptor=_useLogEntryCategorie.moduleDescriptor,setupStatus=_useLogEntryCategorie.setupStatus,hasOutdatedJobConfigurations=_useLogEntryCategorie.hasOutdatedJobConfigurations,hasOutdatedJobDefinitions=_useLogEntryCategorie.hasOutdatedJobDefinitions,hasStoppedJobs=_useLogEntryCategorie.hasStoppedJobs,jobIds=_useLogEntryCategorie.jobIds,categoryQualityWarnings=_useLogEntryCategorie.categoryQualityWarnings,sourceId=_useLogEntryCategorie.sourceConfiguration.sourceId;const _useLogEntryCategorie2=useLogEntryCategoriesResultsUrlState(),selectedTimeRange=_useLogEntryCategorie2.timeRange,setSelectedTimeRange=_useLogEntryCategorie2.setTimeRange,autoRefresh=_useLogEntryCategorie2.autoRefresh,setAutoRefresh=_useLogEntryCategorie2.setAutoRefresh;const _useState=Object(external_kbnSharedDeps_React_["useState"])(()=>({lastChangedTime:Date.now(),timeRange:stringToNumericTimeRange(selectedTimeRange)})),_useState2=page_results_content_slicedToArray(_useState,2),categoryQueryTimeRange=_useState2[0],setCategoryQueryTimeRange=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=page_results_content_slicedToArray(_useState3,2),categoryQueryDatasets=_useState4[0],setCategoryQueryDatasets=_useState4[1];const _useKibana=Object(public_["useKibana"])(),services=_useKibana.services;const showLoadDataErrorNotification=Object(external_kbnSharedDeps_React_["useCallback"])(error=>{var _services$notificatio;(_services$notificatio=services.notifications)===null||_services$notificatio===void 0?void 0:_services$notificatio.toasts.addError(error,{title:loadDataErrorTitle})},[services.notifications]);const _useLogEntryCategorie3=useLogEntryCategoriesResults({categoriesCount:25,endTime:categoryQueryTimeRange.timeRange.endTime,filteredDatasets:categoryQueryDatasets,onGetTopLogEntryCategoriesError:showLoadDataErrorNotification,sourceId:sourceId,startTime:categoryQueryTimeRange.timeRange.startTime}),getLogEntryCategoryDatasets=_useLogEntryCategorie3.getLogEntryCategoryDatasets,getTopLogEntryCategories=_useLogEntryCategorie3.getTopLogEntryCategories,isLoadingLogEntryCategoryDatasets=_useLogEntryCategorie3.isLoadingLogEntryCategoryDatasets,isLoadingTopLogEntryCategories=_useLogEntryCategorie3.isLoadingTopLogEntryCategories,logEntryCategoryDatasets=_useLogEntryCategorie3.logEntryCategoryDatasets,topLogEntryCategories=_useLogEntryCategorie3.topLogEntryCategories;const handleQueryTimeRangeChange=Object(external_kbnSharedDeps_React_["useCallback"])(({start:startTime,end:endTime})=>{setCategoryQueryTimeRange(previousQueryParameters=>page_results_content_objectSpread(page_results_content_objectSpread({},previousQueryParameters),{},{timeRange:stringToNumericTimeRange({startTime:startTime,endTime:endTime}),lastChangedTime:Date.now()}))},[setCategoryQueryTimeRange]);const handleSelectedTimeRangeChange=Object(external_kbnSharedDeps_React_["useCallback"])(selectedTime=>{if(selectedTime.isInvalid){return}setSelectedTimeRange({startTime:selectedTime.start,endTime:selectedTime.end});handleQueryTimeRangeChange(selectedTime)},[setSelectedTimeRange,handleQueryTimeRangeChange]);const handleAutoRefreshChange=Object(external_kbnSharedDeps_React_["useCallback"])(({isPaused:isPaused,refreshInterval:interval})=>{setAutoRefresh({isPaused:isPaused,interval:interval})},[setAutoRefresh]);const hasResults=Object(external_kbnSharedDeps_React_["useMemo"])(()=>topLogEntryCategories.length>0,[topLogEntryCategories.length]);const isFirstUse=Object(external_kbnSharedDeps_React_["useMemo"])(()=>(setupStatus.type==="skipped"&&!!setupStatus.newlyCreated||setupStatus.type==="succeeded")&&!hasResults,[hasResults,setupStatus]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{getTopLogEntryCategories()},[getTopLogEntryCategories,categoryQueryDatasets,categoryQueryTimeRange.lastChangedTime]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{getLogEntryCategoryDatasets()},[getLogEntryCategoryDatasets,categoryQueryTimeRange.lastChangedTime]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{fetchModuleDefinition()},[fetchModuleDefinition]);useInterval(()=>{fetchJobStatus()},JOB_STATUS_POLLING_INTERVAL);useInterval(()=>{handleQueryTimeRangeChange({start:selectedTimeRange.startTime,end:selectedTimeRange.endTime})},autoRefresh.isPaused?null:autoRefresh.interval);return external_kbnSharedDeps_React_default.a.createElement(ViewLogInContext.Provider,{sourceId:sourceId,startTimestamp:categoryQueryTimeRange.timeRange.startTime,endTimestamp:categoryQueryTimeRange.timeRange.endTime},external_kbnSharedDeps_React_default.a.createElement(ResultsContentPage,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperDatePicker"],{start:selectedTimeRange.startTime,end:selectedTimeRange.endTime,onTimeChange:handleSelectedTimeRangeChange,isPaused:autoRefresh.isPaused,refreshInterval:autoRefresh.interval,onRefreshChange:handleAutoRefreshChange}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(CategoryJobNoticesSection,{hasOutdatedJobConfigurations:hasOutdatedJobConfigurations,hasOutdatedJobDefinitions:hasOutdatedJobDefinitions,hasSetupCapabilities:hasLogAnalysisSetupCapabilities,hasStoppedJobs:hasStoppedJobs,isFirstUse:isFirstUse,moduleName:moduleDescriptor.moduleName,onRecreateMlJobForReconfiguration:onOpenSetup,onRecreateMlJobForUpdate:onOpenSetup,qualityWarnings:categoryQualityWarnings})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"m"},external_kbnSharedDeps_React_default.a.createElement(TopCategoriesSection,{availableDatasets:logEntryCategoryDatasets,hasSetupCapabilities:hasLogAnalysisSetupCapabilities,isLoadingDatasets:isLoadingLogEntryCategoryDatasets,isLoadingTopCategories:isLoadingTopLogEntryCategories,jobId:jobIds["log-entry-categories-count"],onChangeDatasetSelection:setCategoryQueryDatasets,onRequestRecreateMlJob:onOpenSetup,selectedDatasets:categoryQueryDatasets,sourceId:sourceId,timeRange:categoryQueryTimeRange.timeRange,topCategories:topLogEntryCategories}))))),external_kbnSharedDeps_React_default.a.createElement(PageViewLogInContext,null))};const stringToNumericTimeRange=timeRange=>({startTime:external_kbnSharedDeps_Moment_default()(elastic_datemath_default.a.parse(timeRange.startTime,{momentInstance:external_kbnSharedDeps_Moment_default.a})).valueOf(),endTime:external_kbnSharedDeps_Moment_default()(elastic_datemath_default.a.parse(timeRange.endTime,{momentInstance:external_kbnSharedDeps_Moment_default.a,roundUp:true})).valueOf()});const ResultsContentPage=Object(observability_public_["euiStyled"])(external_kbnSharedDeps_ElasticEui_["EuiPage"])(page_results_content_templateObject());const loadDataErrorTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.loadDataErrorTitle",{defaultMessage:"Failed to load category data"});const LogEntryCategoriesSetupContent=({onOpenSetup:onOpenSetup})=>{Object(observability_public_["useTrackPageview"])({app:"infra_logs",path:"log_entry_categories_setup"});Object(observability_public_["useTrackPageview"])({app:"infra_logs",path:"log_entry_categories_setup",delay:15e3});return external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["a"],{"data-test-subj":"logEntryCategoriesSetupPage"},external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["c"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.logEntryCategories.setupTitle",defaultMessage:"Set up log category analysis"})),external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["b"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.logEntryCategories.setupDescription",defaultMessage:"To enable log categories, set up a machine learning job."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:onOpenSetup},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.logEntryCategories.showAnalysisSetupButtonLabel",defaultMessage:"ML setup"}))))};const LogEntryCategoriesPageContent=()=>{const _useLogSourceContext=Object(log_source["c"])(),hasFailedLoadingSource=_useLogSourceContext.hasFailedLoadingSource,isLoading=_useLogSourceContext.isLoading,isUninitialized=_useLogSourceContext.isUninitialized,loadSource=_useLogSourceContext.loadSource,loadSourceFailureMessage=_useLogSourceContext.loadSourceFailureMessage;const _useLogAnalysisCapabi=useLogAnalysisCapabilitiesContext(),hasLogAnalysisCapabilites=_useLogAnalysisCapabi.hasLogAnalysisCapabilites,hasLogAnalysisReadCapabilities=_useLogAnalysisCapabi.hasLogAnalysisReadCapabilities,hasLogAnalysisSetupCapabilities=_useLogAnalysisCapabi.hasLogAnalysisSetupCapabilities;const _useLogEntryCategorie=useLogEntryCategoriesModuleContext(),fetchJobStatus=_useLogEntryCategorie.fetchJobStatus,setupStatus=_useLogEntryCategorie.setupStatus,jobStatus=_useLogEntryCategorie.jobStatus;const _useLogAnalysisSetupF=useLogAnalysisSetupFlyoutStateContext(),showModuleSetup=_useLogAnalysisSetupF.showModuleSetup;const showCategoriesModuleSetup=Object(external_kbnSharedDeps_React_["useCallback"])(()=>showModuleSetup("logs_ui_categories"),[showModuleSetup]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(hasLogAnalysisReadCapabilities){fetchJobStatus()}},[fetchJobStatus,hasLogAnalysisReadCapabilities]);if(isLoading||isUninitialized){return external_kbnSharedDeps_React_default.a.createElement(source_loading_page["a"],null)}else if(hasFailedLoadingSource){return external_kbnSharedDeps_React_default.a.createElement(source_error_page["a"],{errorMessage:loadSourceFailureMessage!==null&&loadSourceFailureMessage!==void 0?loadSourceFailureMessage:"",retry:loadSource})}else if(!hasLogAnalysisCapabilites){return external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["g"],null)}else if(!hasLogAnalysisReadCapabilities){return external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["e"],null)}else if(setupStatus.type==="initializing"){return external_kbnSharedDeps_React_default.a.createElement(loading_page["a"],{message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.logEntryCategories.jobStatusLoadingMessage",{defaultMessage:"Checking status of categorization jobs..."})})}else if(setupStatus.type==="unknown"){return external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["d"],{retry:fetchJobStatus})}else if(Object(log_analysis["isJobStatusWithResults"])(jobStatus["log-entry-categories-count"])){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(LogEntryCategoriesResultsContent,{onOpenSetup:showCategoriesModuleSetup}),external_kbnSharedDeps_React_default.a.createElement(LogAnalysisSetupFlyout,{allowedModules:allowedSetupModules}))}else if(!hasLogAnalysisSetupCapabilities){return external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["f"],null)}else{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(LogEntryCategoriesSetupContent,{onOpenSetup:showCategoriesModuleSetup}),external_kbnSharedDeps_React_default.a.createElement(LogAnalysisSetupFlyout,{allowedModules:allowedSetupModules}))}};const allowedSetupModules=["logs_ui_categories"];var use_kibana_space=__webpack_require__(188);const LogEntryCategoriesPageProviders=({children:children})=>{const _useLogSourceContext=Object(log_source["c"])(),sourceConfiguration=_useLogSourceContext.sourceConfiguration,sourceId=_useLogSourceContext.sourceId;const _useActiveKibanaSpace=Object(use_kibana_space["a"])(),space=_useActiveKibanaSpace.space;if((sourceConfiguration===null||sourceConfiguration===void 0?void 0:sourceConfiguration.configuration.logAlias)==null||space==null){return null}return external_kbnSharedDeps_React_default.a.createElement(LogEntryCategoriesModuleProvider,{indexPattern:sourceConfiguration.configuration.logAlias,sourceId:sourceId,spaceId:space.id,timestampField:sourceConfiguration.configuration.fields.timestamp},external_kbnSharedDeps_React_default.a.createElement(LogAnalysisSetupFlyoutStateProvider,null,children))};const LogEntryCategoriesPage=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiErrorBoundary"],null,external_kbnSharedDeps_React_default.a.createElement(LogEntryCategoriesPageProviders,null,external_kbnSharedDeps_React_default.a.createElement(components_page["a"],{"data-test-subj":"logsLogEntryCategoriesPage"},external_kbnSharedDeps_React_default.a.createElement(LogEntryCategoriesPageContent,null))));var query_string=__webpack_require__(26);function data_formatters_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function data_formatters_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){data_formatters_ownKeys(Object(source),true).forEach((function(key){data_formatters_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{data_formatters_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function data_formatters_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const getLogEntryRatePartitionedSeries=results=>results.histogramBuckets.reduce((buckets,bucket)=>[...buckets,...bucket.partitions.map(partition=>({group:Object(log_analysis["getFriendlyNameForPartitionId"])(partition.partitionId),time:bucket.startTime,value:partition.averageActualLogEntryRate}))],[]);const getLogEntryRateCombinedSeries=results=>results.histogramBuckets.reduce((buckets,bucket)=>[...buckets,{time:bucket.startTime,value:bucket.partitions.reduce((accumulatedValue,partition)=>accumulatedValue+partition.averageActualLogEntryRate,0)}],[]);const getLogEntryRateSeriesForPartition=(results,partitionId)=>results.partitionBuckets[partitionId].buckets.reduce((buckets,bucket)=>[...buckets,{time:bucket.startTime,value:bucket.averageActualLogEntryRate}],[]);const getAnnotationsForPartition=(results,partitionId)=>results.partitionBuckets[partitionId].buckets.reduce((annotatedBucketsBySeverity,bucket)=>{const severityCategory=Object(log_analysis["getSeverityCategoryForScore"])(bucket.maximumAnomalyScore);if(!severityCategory){return annotatedBucketsBySeverity}return data_formatters_objectSpread(data_formatters_objectSpread({},annotatedBucketsBySeverity),{},{[severityCategory]:[...annotatedBucketsBySeverity[severityCategory],{coordinates:{x0:bucket.startTime,x1:bucket.startTime+results.bucketDuration},details:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.partitionMaxAnomalyScoreAnnotationLabel",{defaultMessage:"Max anomaly score: {maxAnomalyScore}",values:{maxAnomalyScore:Object(log_analysis["formatAnomalyScore"])(bucket.maximumAnomalyScore)}})}]})},{warning:[],minor:[],major:[],critical:[]});const getTotalNumberOfLogEntriesForPartition=(results,partitionId)=>results.partitionBuckets[partitionId].totalNumberOfLogEntries;const getAnnotationsForAll=results=>results.histogramBuckets.reduce((annotatedBucketsBySeverity,bucket)=>{const maxAnomalyScoresByPartition=bucket.partitions.reduce((bucketMaxAnomalyScoresByPartition,partition)=>{if(!Object(log_analysis["getSeverityCategoryForScore"])(partition.maximumAnomalyScore)){return bucketMaxAnomalyScoresByPartition}return[...bucketMaxAnomalyScoresByPartition,{partitionName:Object(log_analysis["getFriendlyNameForPartitionId"])(partition.partitionId),maximumAnomalyScore:Object(log_analysis["formatAnomalyScore"])(partition.maximumAnomalyScore)}]},[]);if(maxAnomalyScoresByPartition.length===0){return annotatedBucketsBySeverity}const severityCategory=Object(log_analysis["getSeverityCategoryForScore"])(Math.max(...maxAnomalyScoresByPartition.map(partitionScore=>partitionScore.maximumAnomalyScore)));if(!severityCategory){return annotatedBucketsBySeverity}const sortedMaxAnomalyScoresByPartition=maxAnomalyScoresByPartition.sort((a,b)=>b.maximumAnomalyScore-a.maximumAnomalyScore);return data_formatters_objectSpread(data_formatters_objectSpread({},annotatedBucketsBySeverity),{},{[severityCategory]:[...annotatedBucketsBySeverity[severityCategory],{coordinates:{x0:bucket.startTime,x1:bucket.startTime+results.bucketDuration},details:JSON.stringify({anomalyScoresByPartition:sortedMaxAnomalyScoresByPartition})}]})},{warning:[],minor:[],major:[],critical:[]});const getTopAnomalyScoreAcrossAllPartitions=results=>{const allTopScores=Object.values(results.partitionBuckets).reduce((scores,partition)=>[...scores,partition.topAnomalyScore],[]);return Math.max(...allTopScores)};function chart_slicedToArray(arr,i){return chart_arrayWithHoles(arr)||chart_iterableToArrayLimit(arr,i)||chart_unsupportedIterableToArray(arr,i)||chart_nonIterableRest()}function chart_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function chart_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return chart_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return chart_arrayLikeToArray(o,minLen)}function chart_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function chart_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function chart_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const AnomaliesChart=({chartId:chartId,series:series,annotations:annotations,setTimeRange:setTimeRange,timeRange:timeRange,renderAnnotationTooltip:renderAnnotationTooltip,isLoading:isLoading})=>{const _useKibanaUiSetting=Object(use_kibana_ui_setting["a"])("dateFormat","Y-MM-DD HH:mm:ss.SSS"),_useKibanaUiSetting2=chart_slicedToArray(_useKibanaUiSetting,1),dateFormat=_useKibanaUiSetting2[0];const _useKibanaUiSetting3=Object(use_kibana_ui_setting["a"])("theme:darkMode"),_useKibanaUiSetting4=chart_slicedToArray(_useKibanaUiSetting3,1),isDarkMode=_useKibanaUiSetting4[0];const chartDateFormatter=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object(external_kbnSharedDeps_ElasticCharts_["niceTimeFormatter"])([timeRange.startTime,timeRange.endTime]),[timeRange]);const logEntryRateSpecId="averageValues";const tooltipProps=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({headerFormatter:tooltipData=>external_kbnSharedDeps_Moment_default()(tooltipData.value).format(dateFormat)}),[dateFormat]);const handleBrushEnd=Object(external_kbnSharedDeps_React_["useCallback"])(({x:x})=>{if(!x){return}const _x=chart_slicedToArray(x,2),startTime=_x[0],endTime=_x[1];setTimeRange({endTime:endTime,startTime:startTime})},[setTimeRange]);return!isLoading&&!series.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomalySectionLogRateChartNoData",{defaultMessage:"There is no log rate data to display."})),titleSize:"m"}):external_kbnSharedDeps_React_default.a.createElement(loading_overlay_wrapper["a"],{isLoading:isLoading},external_kbnSharedDeps_React_default.a.createElement("div",{style:{height:160,width:"100%"}},series.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Chart"],{className:"log-entry-rate-chart"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Axis"],{id:"timestamp",position:"bottom",showOverlappingTicks:true,tickFormat:chartDateFormatter}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Axis"],{id:"values",position:"left",tickFormat:value=>external_kbnSharedDeps_ElasticNumeral_default()(value.toPrecision(3)).format("0[.][00]a")}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["BarSeries"],{id:logEntryRateSpecId,name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesSectionLineSeriesName",{defaultMessage:"Log entries per 15 minutes (avg)"}),xScaleType:"time",yScaleType:"linear",xAccessor:"time",yAccessors:["value"],data:series,barSeriesStyle:barSeriesStyle}),renderAnnotations(annotations,chartId,renderAnnotationTooltip),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["Settings"],{onBrushEnd:handleBrushEnd,tooltip:tooltipProps,baseTheme:isDarkMode?external_kbnSharedDeps_ElasticCharts_["DARK_THEME"]:external_kbnSharedDeps_ElasticCharts_["LIGHT_THEME"],xDomain:{min:timeRange.startTime,max:timeRange.endTime}})):null))};const severityConfigs={warning:{id:"anomalies-warning",style:{fill:log_analysis["ML_SEVERITY_COLORS"].warning,opacity:.7}},minor:{id:"anomalies-minor",style:{fill:log_analysis["ML_SEVERITY_COLORS"].minor,opacity:.7}},major:{id:"anomalies-major",style:{fill:log_analysis["ML_SEVERITY_COLORS"].major,opacity:.7}},critical:{id:"anomalies-critical",style:{fill:log_analysis["ML_SEVERITY_COLORS"].critical,opacity:.7}}};const renderAnnotations=(annotations,chartId,renderAnnotationTooltip)=>Object.entries(annotations).map((entry,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticCharts_["RectAnnotation"],{key:"".concat(chartId,":").concat(entry[0]),dataValues:entry[1],id:severityConfigs[entry[0]].id,style:severityConfigs[entry[0]].style,renderTooltip:renderAnnotationTooltip}));const barSeriesStyle={rect:{fill:"#D3DAE6",opacity:.6}};var external_kbnSharedDeps_ElasticEuiLibServices_=__webpack_require__(71);function get_log_entry_examples_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function get_log_entry_examples_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){get_log_entry_examples_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){get_log_entry_examples_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callGetLogEntryExamplesAPI=function(){var _ref=get_log_entry_examples_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var sourceId,startTime,endTime,dataset,exampleCount,categoryId,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:sourceId=requestArgs.sourceId,startTime=requestArgs.startTime,endTime=requestArgs.endTime,dataset=requestArgs.dataset,exampleCount=requestArgs.exampleCount,categoryId=requestArgs.categoryId;_context.next=3;return fetch(http_api_log_analysis["g"],{method:"POST",body:JSON.stringify(http_api_log_analysis["w"].encode({data:{dataset:dataset,exampleCount:exampleCount,sourceId:sourceId,timeRange:{startTime:startTime,endTime:endTime},categoryId:categoryId}}))});case 3:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api_log_analysis["x"])(response));case 5:case"end":return _context.stop()}}),_callee)})));return function callGetLogEntryExamplesAPI(_x,_x2){return _ref.apply(this,arguments)}}();function use_log_entry_examples_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_log_entry_examples_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_log_entry_examples_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_log_entry_examples_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function use_log_entry_examples_slicedToArray(arr,i){return use_log_entry_examples_arrayWithHoles(arr)||use_log_entry_examples_iterableToArrayLimit(arr,i)||use_log_entry_examples_unsupportedIterableToArray(arr,i)||use_log_entry_examples_nonIterableRest()}function use_log_entry_examples_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_log_entry_examples_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_log_entry_examples_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_log_entry_examples_arrayLikeToArray(o,minLen)}function use_log_entry_examples_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_log_entry_examples_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_log_entry_examples_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogEntryExamples=({dataset:dataset,endTime:endTime,exampleCount:exampleCount,sourceId:sourceId,startTime:startTime,categoryId:categoryId})=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=use_log_entry_examples_slicedToArray(_useState,2),logEntryExamples=_useState2[0],setLogEntryExamples=_useState2[1];const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"creation",createPromise:function(){var _createPromise=use_log_entry_examples_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return callGetLogEntryExamplesAPI({sourceId:sourceId,startTime:startTime,endTime:endTime,dataset:dataset,exampleCount:exampleCount,categoryId:categoryId},services.http.fetch);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})));function createPromise(){return _createPromise.apply(this,arguments)}return createPromise}(),onResolve:({data:{examples:examples}})=>{setLogEntryExamples(examples)}},[dataset,endTime,exampleCount,sourceId,startTime]),_useTrackedPromise2=use_log_entry_examples_slicedToArray(_useTrackedPromise,2),getLogEntryExamplesRequest=_useTrackedPromise2[0],getLogEntryExamples=_useTrackedPromise2[1];const isLoadingLogEntryExamples=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getLogEntryExamplesRequest.state==="pending",[getLogEntryExamplesRequest.state]);const hasFailedLoadingLogEntryExamples=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getLogEntryExamplesRequest.state==="rejected",[getLogEntryExamplesRequest.state]);return{getLogEntryExamples:getLogEntryExamples,hasFailedLoadingLogEntryExamples:hasFailedLoadingLogEntryExamples,isLoadingLogEntryExamples:isLoadingLogEntryExamples,logEntryExamples:logEntryExamples}};var column_headers=__webpack_require__(246);var job_parameters=__webpack_require__(178);var source_configuration=__webpack_require__(119);var datetime=__webpack_require__(187);var url_state=__webpack_require__(106);function fetch_log_entries_item_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function fetch_log_entries_item_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){fetch_log_entries_item_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){fetch_log_entries_item_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const fetchLogEntriesItem=function(){var _ref=fetch_log_entries_item_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(http_api["f"],{method:"POST",body:JSON.stringify(http_api["q"].encode(requestArgs))});case 2:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api["r"])(response));case 4:case"end":return _context.stop()}}),_callee)})));return function fetchLogEntriesItem(_x,_x2){return _ref.apply(this,arguments)}}();function log_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function log_flyout_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){log_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){log_flyout_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function log_flyout_slicedToArray(arr,i){return log_flyout_arrayWithHoles(arr)||log_flyout_iterableToArrayLimit(arr,i)||log_flyout_unsupportedIterableToArray(arr,i)||log_flyout_nonIterableRest()}function log_flyout_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_flyout_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_flyout_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_flyout_arrayLikeToArray(o,minLen)}function log_flyout_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_flyout_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_flyout_arrayWithHoles(arr){if(Array.isArray(arr))return arr}let FlyoutVisibility;(function(FlyoutVisibility){FlyoutVisibility["hidden"]="hidden";FlyoutVisibility["visible"]="visible"})(FlyoutVisibility||(FlyoutVisibility={}));const useLogFlyout=()=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const _useLogSourceContext=Object(log_source["c"])(),sourceId=_useLogSourceContext.sourceId;const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=log_flyout_slicedToArray(_useState,2),flyoutVisible=_useState2[0],setFlyoutVisibility=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(null),_useState4=log_flyout_slicedToArray(_useState3,2),flyoutId=_useState4[0],setFlyoutId=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])(null),_useState6=log_flyout_slicedToArray(_useState5,2),flyoutItem=_useState6[0],setFlyoutItem=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])(null),_useState8=log_flyout_slicedToArray(_useState7,2),surroundingLogsId=_useState8[0],setSurroundingLogsId=_useState8[1];const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"creation",createPromise:function(){var _createPromise=log_flyout_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(flyoutId){_context.next=2;break}return _context.abrupt("return");case 2:_context.next=4;return fetchLogEntriesItem({sourceId:sourceId,id:flyoutId},services.http.fetch);case 4:return _context.abrupt("return",_context.sent);case 5:case"end":return _context.stop()}}),_callee)})));function createPromise(){return _createPromise.apply(this,arguments)}return createPromise}(),onResolve:response=>{if(response){const data=response.data;setFlyoutItem(data||null)}}},[sourceId,flyoutId]),_useTrackedPromise2=log_flyout_slicedToArray(_useTrackedPromise,2),loadFlyoutItemRequest=_useTrackedPromise2[0],loadFlyoutItem=_useTrackedPromise2[1];const isLoading=Object(external_kbnSharedDeps_React_["useMemo"])(()=>loadFlyoutItemRequest.state==="pending",[loadFlyoutItemRequest.state]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(flyoutId){loadFlyoutItem()}},[loadFlyoutItem,flyoutId]);return{flyoutVisible:flyoutVisible,setFlyoutVisibility:setFlyoutVisibility,flyoutId:flyoutId,setFlyoutId:setFlyoutId,surroundingLogsId:surroundingLogsId,setSurroundingLogsId:setSurroundingLogsId,isLoading:isLoading,flyoutItem:flyoutItem}};const LogFlyout=constate_cjs_default()(useLogFlyout);const WithFlyoutOptionsUrlState=()=>{const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(LogFlyout.Context),flyoutVisible=_useContext.flyoutVisible,setFlyoutVisibility=_useContext.setFlyoutVisibility,flyoutId=_useContext.flyoutId,setFlyoutId=_useContext.setFlyoutId,surroundingLogsId=_useContext.surroundingLogsId,setSurroundingLogsId=_useContext.setSurroundingLogsId;return external_kbnSharedDeps_React_default.a.createElement(url_state["a"],{urlState:{flyoutVisibility:flyoutVisible?FlyoutVisibility.visible:FlyoutVisibility.hidden,flyoutId:flyoutId,surroundingLogsId:surroundingLogsId},urlStateKey:"flyoutOptions",mapToUrlState:mapToUrlState,onChange:newUrlState=>{if(newUrlState&&newUrlState.flyoutId){setFlyoutId(newUrlState.flyoutId)}if(newUrlState&&newUrlState.surroundingLogsId){setSurroundingLogsId(newUrlState.surroundingLogsId)}if(newUrlState&&newUrlState.flyoutVisibility===FlyoutVisibility.visible){setFlyoutVisibility(true)}if(newUrlState&&newUrlState.flyoutVisibility===FlyoutVisibility.hidden){setFlyoutVisibility(false)}},onInitialize:initialUrlState=>{if(initialUrlState&&initialUrlState.flyoutId){setFlyoutId(initialUrlState.flyoutId)}if(initialUrlState&&initialUrlState.surroundingLogsId){setSurroundingLogsId(initialUrlState.surroundingLogsId)}if(initialUrlState&&initialUrlState.flyoutVisibility===FlyoutVisibility.visible){setFlyoutVisibility(true)}if(initialUrlState&&initialUrlState.flyoutVisibility===FlyoutVisibility.hidden){setFlyoutVisibility(false)}}})};const mapToUrlState=value=>value?{flyoutId:mapToFlyoutIdState(value.flyoutId),flyoutVisibility:mapToFlyoutVisibilityState(value.flyoutVisibility),surroundingLogsId:mapToSurroundingLogsIdState(value.surroundingLogsId)}:undefined;const mapToFlyoutIdState=subject=>subject&&Object(external_kbnSharedDeps_Lodash_["isString"])(subject)?subject:undefined;const mapToSurroundingLogsIdState=subject=>subject&&Object(external_kbnSharedDeps_Lodash_["isString"])(subject)?subject:undefined;const mapToFlyoutVisibilityState=subject=>{if(subject){if(subject==="visible"){return FlyoutVisibility.visible}if(subject==="hidden"){return FlyoutVisibility.hidden}}};function log_entry_example_templateObject(){const data=log_entry_example_taggedTemplateLiteral(["\n  border-bottom: none;\n  box-shadow: none;\n  padding-right: 0;\n"]);log_entry_example_templateObject=function _templateObject(){return data};return data}function log_entry_example_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function log_entry_example_extends(){log_entry_example_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return log_entry_example_extends.apply(this,arguments)}function log_entry_example_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function log_entry_example_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){log_entry_example_ownKeys(Object(source),true).forEach((function(key){log_entry_example_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{log_entry_example_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function log_entry_example_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function log_entry_example_slicedToArray(arr,i){return log_entry_example_arrayWithHoles(arr)||log_entry_example_iterableToArrayLimit(arr,i)||log_entry_example_unsupportedIterableToArray(arr,i)||log_entry_example_nonIterableRest()}function log_entry_example_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_entry_example_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_entry_example_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_entry_example_arrayLikeToArray(o,minLen)}function log_entry_example_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_entry_example_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_entry_example_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const log_entry_example_exampleMessageScale="medium";const log_entry_example_exampleTimestampFormat="time";const MENU_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logAnomalies.logEntryExamplesMenuLabel",{defaultMessage:"View actions for log entry"});const VIEW_DETAILS_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.logEntryExamplesViewDetailsLabel",{defaultMessage:"View details"});const VIEW_IN_STREAM_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.logEntryExamplesViewInStreamLabel",{defaultMessage:"View in stream"});const VIEW_ANOMALY_IN_ML_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.logEntryExamplesViewAnomalyInMlLabel",{defaultMessage:"View anomaly in machine learning"});const LogEntryExampleMessage=({id:id,dataset:dataset,message:message,timestamp:timestamp,tiebreaker:tiebreaker,timeRange:timeRange,anomaly:anomaly})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=log_entry_example_slicedToArray(_useState,2),isHovered=_useState2[0],setIsHovered=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=log_entry_example_slicedToArray(_useState3,2),isMenuOpen=_useState4[0],setIsMenuOpen=_useState4[1];const openMenu=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsMenuOpen(true),[]);const closeMenu=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsMenuOpen(false),[]);const setItemIsHovered=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsHovered(true),[]);const setItemIsNotHovered=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setIsHovered(false),[]);const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(LogFlyout.Context),setFlyoutVisibility=_useContext.setFlyoutVisibility,setFlyoutId=_useContext.setFlyoutId;const humanFriendlyDataset=Object(log_analysis["getFriendlyNameForPartitionId"])(dataset);const viewInStreamLinkProps=Object(use_link_props["a"])({app:"logs",pathname:"stream",search:{logPosition:Object(rison["encode"])({end:external_kbnSharedDeps_Moment_default()(timeRange.endTime).format("YYYY-MM-DDTHH:mm:ss.SSSZ"),position:{tiebreaker:tiebreaker,time:timestamp},start:external_kbnSharedDeps_Moment_default()(timeRange.startTime).format("YYYY-MM-DDTHH:mm:ss.SSSZ"),streamLive:false}),flyoutOptions:Object(rison["encode"])({surroundingLogsId:id}),logFilter:Object(rison["encode"])({expression:"".concat(job_parameters["i"],": ").concat(dataset),kind:"kuery"})}});const viewAnomalyInMachineLearningLinkProps=Object(use_link_props["a"])(getEntitySpecificSingleMetricViewerLink(anomaly.jobId,timeRange,log_entry_example_objectSpread({[job_parameters["i"]]:dataset},anomaly.categoryId?{mlcategory:anomaly.categoryId}:{})));const menuItems=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{if(!viewInStreamLinkProps.onClick||!viewAnomalyInMachineLearningLinkProps.onClick){return undefined}return[{label:VIEW_DETAILS_LABEL,onClick:()=>{setFlyoutId(id);setFlyoutVisibility(true)}},{label:VIEW_IN_STREAM_LABEL,onClick:viewInStreamLinkProps.onClick,href:viewInStreamLinkProps.href},{label:VIEW_ANOMALY_IN_ML_LABEL,onClick:viewAnomalyInMachineLearningLinkProps.onClick,href:viewAnomalyInMachineLearningLinkProps.href}]},[id,setFlyoutId,setFlyoutVisibility,viewInStreamLinkProps,viewAnomalyInMachineLearningLinkProps]);return external_kbnSharedDeps_React_default.a.createElement(log_text_stream["e"],{scale:log_entry_example_exampleMessageScale,onMouseEnter:setItemIsHovered,onMouseLeave:setItemIsNotHovered},external_kbnSharedDeps_React_default.a.createElement(log_text_stream["a"],log_entry_example_columnWidths[log_entry_example_timestampColumnId],external_kbnSharedDeps_React_default.a.createElement(log_text_stream["f"],{format:log_entry_example_exampleTimestampFormat,time:timestamp})),external_kbnSharedDeps_React_default.a.createElement(log_text_stream["a"],log_entry_example_columnWidths[log_entry_example_messageColumnId],external_kbnSharedDeps_React_default.a.createElement(log_text_stream["d"],{columnValue:{columnId:log_entry_example_messageColumnId,message:[{field:"message",value:[message],highlights:[]}]},highlights:log_entry_example_noHighlights,isActiveHighlight:false,wrapMode:"none"})),external_kbnSharedDeps_React_default.a.createElement(log_text_stream["a"],log_entry_example_columnWidths[log_entry_example_datasetColumnId],external_kbnSharedDeps_React_default.a.createElement(log_text_stream["c"],{columnValue:{columnId:log_entry_example_datasetColumnId,field:"event.dataset",value:[humanFriendlyDataset],highlights:[]},highlights:log_entry_example_noHighlights,isActiveHighlight:false,wrapMode:"none"})),external_kbnSharedDeps_React_default.a.createElement(log_text_stream["a"],log_entry_example_extends({key:"logColumn iconLogColumn iconLogColumn:details"},log_entry_example_columnWidths[log_text_stream["h"]]),(isHovered||isMenuOpen)&&menuItems?external_kbnSharedDeps_React_default.a.createElement(log_text_stream["b"],{"aria-label":MENU_LABEL,isOpen:isMenuOpen,onOpen:openMenu,onClose:closeMenu,items:menuItems}):null))};const log_entry_example_noHighlights=[];const log_entry_example_timestampColumnId="log-entry-example-timestamp-column";const log_entry_example_messageColumnId="log-entry-examples-message-column";const log_entry_example_datasetColumnId="log-entry-examples-dataset-column";const DETAIL_FLYOUT_ICON_MIN_WIDTH=32;const COLUMN_PADDING=8;const log_entry_example_columnWidths={[log_entry_example_timestampColumnId]:{growWeight:0,shrinkWeight:0,baseWidth:"122px"},[log_entry_example_messageColumnId]:{growWeight:1,shrinkWeight:0,baseWidth:"0%"},[log_entry_example_datasetColumnId]:{growWeight:0,shrinkWeight:0,baseWidth:"250px"},[log_text_stream["h"]]:{growWeight:0,shrinkWeight:0,baseWidth:"".concat(DETAIL_FLYOUT_ICON_MIN_WIDTH+2*COLUMN_PADDING,"px")}};const log_entry_example_exampleMessageColumnConfigurations=[{timestampColumn:{id:log_entry_example_timestampColumnId}},{messageColumn:{id:log_entry_example_messageColumnId}},{fieldColumn:{field:"event.dataset",id:log_entry_example_datasetColumnId}}];const LogEntryExampleMessageHeaders=({dateTime:dateTime})=>external_kbnSharedDeps_React_default.a.createElement(LogEntryExampleMessageHeadersWrapper,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,log_entry_example_exampleMessageColumnConfigurations.map(columnConfiguration=>{if(Object(source_configuration["c"])(columnConfiguration)){return external_kbnSharedDeps_React_default.a.createElement(column_headers["a"],{key:columnConfiguration.timestampColumn.id,columnWidth:log_entry_example_columnWidths[columnConfiguration.timestampColumn.id],"data-test-subj":"logColumnHeader timestampLogColumnHeader"},Object(datetime["a"])(dateTime))}else if(Object(source_configuration["b"])(columnConfiguration)){return external_kbnSharedDeps_React_default.a.createElement(column_headers["a"],{columnWidth:log_entry_example_columnWidths[columnConfiguration.messageColumn.id],"data-test-subj":"logColumnHeader messageLogColumnHeader",key:columnConfiguration.messageColumn.id},"Message")}else if(Object(source_configuration["a"])(columnConfiguration)){return external_kbnSharedDeps_React_default.a.createElement(column_headers["a"],{columnWidth:log_entry_example_columnWidths[columnConfiguration.fieldColumn.id],"data-test-subj":"logColumnHeader fieldLogColumnHeader",key:columnConfiguration.fieldColumn.id},columnConfiguration.fieldColumn.field)}}),external_kbnSharedDeps_React_default.a.createElement(column_headers["a"],{columnWidth:log_entry_example_columnWidths[log_text_stream["h"]],"data-test-subj":"logColumnHeader contextMenuLogColumnHeader",key:"icon-column-header"},null)));const LogEntryExampleMessageHeadersWrapper=Object(observability_public_["euiStyled"])(column_headers["c"])(log_entry_example_templateObject());function expanded_row_templateObject(){const data=expanded_row_taggedTemplateLiteral(["\n  overflow: hidden;\n"]);expanded_row_templateObject=function _templateObject(){return data};return data}function expanded_row_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const EXAMPLE_COUNT=5;const examplesTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesTableExamplesTitle",{defaultMessage:"Example log entries"});const AnomaliesTableExpandedRow=({anomaly:anomaly,timeRange:timeRange})=>{const _useLogSourceContext=Object(log_source["c"])(),sourceId=_useLogSourceContext.sourceId;const _useLogEntryExamples=useLogEntryExamples({dataset:anomaly.dataset,endTime:anomaly.startTime+anomaly.duration,exampleCount:EXAMPLE_COUNT,sourceId:sourceId,startTime:anomaly.startTime,categoryId:anomaly.categoryId}),getLogEntryExamples=_useLogEntryExamples.getLogEntryExamples,hasFailedLoadingLogEntryExamples=_useLogEntryExamples.hasFailedLoadingLogEntryExamples,isLoadingLogEntryExamples=_useLogEntryExamples.isLoadingLogEntryExamples,logEntryExamples=_useLogEntryExamples.logEntryExamples;useMount_default()(()=>{getLogEntryExamples()});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(ExpandedContentWrapper,{direction:"column"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,examplesTitle)),external_kbnSharedDeps_React_default.a.createElement(LogEntryExampleMessages,{isLoading:isLoadingLogEntryExamples,hasFailedLoading:hasFailedLoadingLogEntryExamples,hasResults:logEntryExamples.length>0,exampleCount:EXAMPLE_COUNT,onReload:getLogEntryExamples},logEntryExamples.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(LogEntryExampleMessageHeaders,{dateTime:logEntryExamples[0].timestamp}),logEntryExamples.map((example,exampleIndex)=>external_kbnSharedDeps_React_default.a.createElement(LogEntryExampleMessage,{key:exampleIndex,id:example.id,dataset:example.dataset,message:example.message,timestamp:example.timestamp,tiebreaker:example.tiebreaker,timeRange:timeRange,anomaly:anomaly}))):null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{titleSize:"s",title:"".concat(external_kbnSharedDeps_ElasticNumeral_default()(anomaly.typical).format("0.00a")," ").concat(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesExpandedRowTypicalRateTitle",{defaultMessage:"{typicalCount, plural, one {message} other {messages}}",values:{typicalCount:anomaly.typical}})),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesExpandedRowTypicalRateDescription",{defaultMessage:"Typical"})})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiStat"],{titleSize:"s",title:"".concat(external_kbnSharedDeps_ElasticNumeral_default()(anomaly.actual).format("0.00a")," ").concat(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesExpandedRowActualRateTitle",{defaultMessage:"{actualCount, plural, one {message} other {messages}}",values:{actualCount:anomaly.actual}})),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesExpandedRowActualRateDescription",{defaultMessage:"Actual"})}))))))};const ExpandedContentWrapper=Object(observability_public_["euiStyled"])(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"])(expanded_row_templateObject());function table_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function table_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){table_ownKeys(Object(source),true).forEach((function(key){table_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{table_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function table_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function table_slicedToArray(arr,i){return table_arrayWithHoles(arr)||table_iterableToArrayLimit(arr,i)||table_unsupportedIterableToArray(arr,i)||table_nonIterableRest()}function table_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function table_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return table_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return table_arrayLikeToArray(o,minLen)}function table_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function table_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function table_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const anomalyScoreColumnName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesTableAnomalyScoreColumnName",{defaultMessage:"Anomaly score"});const anomalyMessageColumnName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesTableAnomalyMessageName",{defaultMessage:"Anomaly"});const anomalyStartTimeColumnName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesTableAnomalyStartTime",{defaultMessage:"Start time"});const datasetColumnName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesTableAnomalyDatasetName",{defaultMessage:"Dataset"});const AnomaliesTable=({results:results,timeRange:timeRange,setTimeRange:setTimeRange,changeSortOptions:changeSortOptions,sortOptions:sortOptions,changePaginationOptions:changePaginationOptions,paginationOptions:paginationOptions,fetchNextPage:fetchNextPage,fetchPreviousPage:fetchPreviousPage,page:page,isLoading:isLoading})=>{const _useKibanaUiSetting=Object(use_kibana_ui_setting["a"])("dateFormat","Y-MM-DD HH:mm:ss"),_useKibanaUiSetting2=table_slicedToArray(_useKibanaUiSetting,1),dateFormat=_useKibanaUiSetting2[0];const tableSortOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({sort:sortOptions}),[sortOptions]);const tableItems=Object(external_kbnSharedDeps_React_["useMemo"])(()=>results.map(anomaly=>({id:anomaly.id,dataset:anomaly.dataset,datasetName:Object(log_analysis["getFriendlyNameForPartitionId"])(anomaly.dataset),anomalyScore:Object(log_analysis["formatAnomalyScore"])(anomaly.anomalyScore),startTime:anomaly.startTime,type:anomaly.type,typical:anomaly.typical,actual:anomaly.actual})),[results]);const _useSet=useSet_default()(new Set),_useSet2=table_slicedToArray(_useSet,2),expandedIds=_useSet2[0],_useSet2$=_useSet2[1],expandId=_useSet2$.add,collapseId=_useSet2$.remove;const expandedIdsRowContents=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[...expandedIds].reduce((aggregatedRows,id)=>{const anomaly=results.find(_anomaly=>_anomaly.id===id);return table_objectSpread(table_objectSpread({},aggregatedRows),{},{[id]:anomaly?external_kbnSharedDeps_React_default.a.createElement(AnomaliesTableExpandedRow,{anomaly:anomaly,timeRange:timeRange}):null})},{}),[expandedIds,results,timeRange]);const handleTableChange=Object(external_kbnSharedDeps_React_["useCallback"])(({sort:sort={}})=>{changeSortOptions(sort)},[changeSortOptions]);const columns=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[{field:"anomalyScore",name:anomalyScoreColumnName,sortable:true,truncateText:true,dataType:"number",width:"130px",render:anomalyScore=>external_kbnSharedDeps_React_default.a.createElement(AnomalySeverityIndicator,{anomalyScore:anomalyScore})},{name:anomalyMessageColumnName,truncateText:true,render:item=>external_kbnSharedDeps_React_default.a.createElement(AnomalyMessage,{actual:item.actual,typical:item.typical,type:item.type})},{field:"startTime",name:anomalyStartTimeColumnName,sortable:true,truncateText:true,width:"230px",render:startTime=>external_kbnSharedDeps_Moment_default()(startTime).format(dateFormat)},{field:"datasetName",name:datasetColumnName,sortable:true,truncateText:true,width:"200px"},{align:external_kbnSharedDeps_ElasticEuiLibServices_["RIGHT_ALIGNMENT"],width:"40px",isExpander:true,render:item=>external_kbnSharedDeps_React_default.a.createElement(RowExpansionButton,{isExpanded:expandedIds.has(item.id),item:item.id,onExpand:expandId,onCollapse:collapseId})}],[collapseId,expandId,expandedIds,dateFormat]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(loading_overlay_wrapper["a"],{isLoading:isLoading},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{items:tableItems,itemId:"id",itemIdToExpandedRowMap:expandedIdsRowContents,isExpandable:true,hasActions:true,columns:columns,sorting:tableSortOptions,onChange:handleTableChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(PaginationControls,{fetchNextPage:fetchNextPage,fetchPreviousPage:fetchPreviousPage,page:page,isLoading:isLoading})))};const AnomalyMessage=({actual:actual,typical:typical,type:type})=>{const moreThanExpectedAnomalyMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesTableMoreThanExpectedAnomalyMessage",{defaultMessage:"more log messages in this {type, select, logRate {dataset} logCategory {category}} than expected",values:{type:type}});const fewerThanExpectedAnomalyMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesTableFewerThanExpectedAnomalyMessage",{defaultMessage:"fewer log messages in this {type, select, logRate {dataset} logCategory {category}} than expected",values:{type:type}});const isMore=actual>typical;const message=isMore?moreThanExpectedAnomalyMessage:fewerThanExpectedAnomalyMessage;const ratio=isMore?actual/typical:typical/actual;const icon=isMore?"sortUp":"sortDown";const useRatio=ratio!==Infinity;const ratioMessage=useRatio?"".concat(Object(log_analysis["formatOneDecimalPlace"])(ratio),"x"):"";return external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:icon})," ","".concat(ratioMessage," ").concat(message))};const previousPageLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesTablePreviousPageLabel",{defaultMessage:"Previous page"});const nextPageLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesTableNextPageLabel",{defaultMessage:"Next page"});const PaginationControls=({fetchPreviousPage:fetchPreviousPage,fetchNextPage:fetchNextPage,page:page,isLoading:isLoading})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"arrowLeft",isDisabled:!fetchPreviousPage||isLoading,onClick:fetchPreviousPage,"aria-label":previousPageLabel}),external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement("strong",null,page)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"arrowRight",isDisabled:!fetchNextPage||isLoading,onClick:fetchNextPage,"aria-label":nextPageLabel}))));const ManageJobsButton=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],props,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.analysis.manageMlJobsButtonLabel",defaultMessage:"Manage ML jobs"}));function anomalies_templateObject(){const data=anomalies_taggedTemplateLiteral(["\n  white-space: nowrap;\n"]);anomalies_templateObject=function _templateObject(){return data};return data}function anomalies_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const AnomaliesResults=({isLoadingLogRateResults:isLoadingLogRateResults,isLoadingAnomaliesResults:isLoadingAnomaliesResults,logEntryRateResults:logEntryRateResults,setTimeRange:setTimeRange,timeRange:timeRange,onViewModuleList:onViewModuleList,anomalies:anomalies,changeSortOptions:changeSortOptions,sortOptions:sortOptions,changePaginationOptions:changePaginationOptions,paginationOptions:paginationOptions,fetchNextPage:fetchNextPage,fetchPreviousPage:fetchPreviousPage,page:page})=>{const logEntryRateSeries=Object(external_kbnSharedDeps_React_["useMemo"])(()=>logEntryRateResults&&logEntryRateResults.histogramBuckets?getLogEntryRateCombinedSeries(logEntryRateResults):[],[logEntryRateResults]);const anomalyAnnotations=Object(external_kbnSharedDeps_React_["useMemo"])(()=>logEntryRateResults&&logEntryRateResults.histogramBuckets?getAnnotationsForAll(logEntryRateResults):{warning:[],minor:[],major:[],critical:[]},[logEntryRateResults]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m","aria-label":anomalies_title},external_kbnSharedDeps_React_default.a.createElement("h1",null,anomalies_title))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(ManageJobsButton,{onClick:onViewModuleList,size:"s"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),(!logEntryRateResults||logEntryRateResults&&logEntryRateResults.histogramBuckets&&!logEntryRateResults.histogramBuckets.length)&&(!anomalies||anomalies.length===0)?external_kbnSharedDeps_React_default.a.createElement(loading_overlay_wrapper["a"],{isLoading:isLoadingLogRateResults||isLoadingAnomaliesResults,loadingChildren:external_kbnSharedDeps_React_default.a.createElement(anomalies_LoadingOverlayContent,null)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomalySectionNoDataTitle",{defaultMessage:"There is no data to display."})),titleSize:"m",body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomalySectionNoDataBody",{defaultMessage:"You may want to adjust your time range."}))})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(AnomaliesChart,{chartId:"overall",isLoading:isLoadingLogRateResults,setTimeRange:setTimeRange,timeRange:timeRange,series:logEntryRateSeries,annotations:anomalyAnnotations,renderAnnotationTooltip:anomalies_renderAnnotationTooltip}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(AnomaliesTable,{results:anomalies,setTimeRange:setTimeRange,timeRange:timeRange,changeSortOptions:changeSortOptions,changePaginationOptions:changePaginationOptions,sortOptions:sortOptions,paginationOptions:paginationOptions,fetchNextPage:fetchNextPage,fetchPreviousPage:fetchPreviousPage,page:page,isLoading:isLoadingAnomaliesResults})))};const anomalies_title=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesSectionTitle",{defaultMessage:"Anomalies"});const overallAnomalyScoreLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.overallAnomalyChartMaxScoresLabel",{defaultMessage:"Max anomaly scores:"});const AnnotationTooltip=({details:details})=>{const parsedDetails=JSON.parse(details);return external_kbnSharedDeps_React_default.a.createElement(TooltipWrapper,null,external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement("b",null,overallAnomalyScoreLabel)),external_kbnSharedDeps_React_default.a.createElement("ul",null,parsedDetails.anomalyScoresByPartition.map(({partitionName:partitionName,maximumAnomalyScore:maximumAnomalyScore})=>external_kbnSharedDeps_React_default.a.createElement("li",{key:"overall-anomaly-chart-".concat(partitionName)},external_kbnSharedDeps_React_default.a.createElement("span",null,"".concat(partitionName,": "),external_kbnSharedDeps_React_default.a.createElement("b",null,maximumAnomalyScore))))))};const anomalies_renderAnnotationTooltip=details=>{if(!details){return external_kbnSharedDeps_React_default.a.createElement("div",null)}return external_kbnSharedDeps_React_default.a.createElement(AnnotationTooltip,{details:details})};const TooltipWrapper=Object(observability_public_["euiStyled"])("div")(anomalies_templateObject());const anomalies_loadingAriaLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysis.anomaliesSectionLoadingAriaLabel",{defaultMessage:"Loading anomalies"});const anomalies_LoadingOverlayContent=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl","aria-label":anomalies_loadingAriaLabel});function get_log_entry_anomalies_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function get_log_entry_anomalies_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){get_log_entry_anomalies_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){get_log_entry_anomalies_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callGetLogEntryAnomaliesAPI=function(){var _ref=get_log_entry_anomalies_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var sourceId,startTime,endTime,sort,pagination,datasets,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:sourceId=requestArgs.sourceId,startTime=requestArgs.startTime,endTime=requestArgs.endTime,sort=requestArgs.sort,pagination=requestArgs.pagination,datasets=requestArgs.datasets;_context.next=3;return fetch(http_api_log_analysis["c"],{method:"POST",body:JSON.stringify(http_api_log_analysis["o"].encode({data:{sourceId:sourceId,timeRange:{startTime:startTime,endTime:endTime},sort:sort,pagination:pagination,datasets:datasets}}))});case 3:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api_log_analysis["p"])(response));case 5:case"end":return _context.stop()}}),_callee)})));return function callGetLogEntryAnomaliesAPI(_x,_x2){return _ref.apply(this,arguments)}}();function get_log_entry_anomalies_datasets_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function get_log_entry_anomalies_datasets_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){get_log_entry_anomalies_datasets_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){get_log_entry_anomalies_datasets_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callGetLogEntryAnomaliesDatasetsAPI=function(){var _ref=get_log_entry_anomalies_datasets_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var sourceId,startTime,endTime,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:sourceId=requestArgs.sourceId,startTime=requestArgs.startTime,endTime=requestArgs.endTime;_context.next=3;return fetch(http_api_log_analysis["b"],{method:"POST",body:JSON.stringify(http_api_log_analysis["m"].encode({data:{sourceId:sourceId,timeRange:{startTime:startTime,endTime:endTime}}}))});case 3:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api_log_analysis["n"])(response));case 5:case"end":return _context.stop()}}),_callee)})));return function callGetLogEntryAnomaliesDatasetsAPI(_x,_x2){return _ref.apply(this,arguments)}}();function use_log_entry_anomalies_results_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_log_entry_anomalies_results_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_log_entry_anomalies_results_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_log_entry_anomalies_results_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function use_log_entry_anomalies_results_slicedToArray(arr,i){return use_log_entry_anomalies_results_arrayWithHoles(arr)||use_log_entry_anomalies_results_iterableToArrayLimit(arr,i)||use_log_entry_anomalies_results_unsupportedIterableToArray(arr,i)||use_log_entry_anomalies_results_nonIterableRest()}function use_log_entry_anomalies_results_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_log_entry_anomalies_results_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_log_entry_anomalies_results_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_log_entry_anomalies_results_arrayLikeToArray(o,minLen)}function use_log_entry_anomalies_results_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_log_entry_anomalies_results_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_log_entry_anomalies_results_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function use_log_entry_anomalies_results_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function use_log_entry_anomalies_results_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){use_log_entry_anomalies_results_ownKeys(Object(source),true).forEach((function(key){use_log_entry_anomalies_results_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{use_log_entry_anomalies_results_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function use_log_entry_anomalies_results_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const stateReducer=(state,action)=>{const resetPagination={page:1,paginationCursor:undefined};switch(action.type){case"changePaginationOptions":return use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread({},state),resetPagination),action.payload);case"changeSortOptions":return use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread({},state),resetPagination),action.payload);case"changeHasNextPage":return use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread({},state),action.payload);case"changeLastReceivedCursors":return use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread({},state),action.payload);case"fetchNextPage":return state.lastReceivedCursors?use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread({},state),{},{page:state.page+1,paginationCursor:{searchAfter:state.lastReceivedCursors.nextPageCursor}}):state;case"fetchPreviousPage":return state.lastReceivedCursors?use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread({},state),{},{page:state.page-1,paginationCursor:{searchBefore:state.lastReceivedCursors.previousPageCursor}}):state;case"changeTimeRange":return use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread({},state),resetPagination),action.payload);case"changeFilteredDatasets":return use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread({},state),resetPagination),action.payload);default:return state}};const STATE_DEFAULTS={page:1,lastReceivedCursors:undefined,paginationCursor:undefined,hasNextPage:false};const useLogEntryAnomaliesResults=({endTime:endTime,startTime:startTime,sourceId:sourceId,defaultSortOptions:defaultSortOptions,defaultPaginationOptions:defaultPaginationOptions,onGetLogEntryAnomaliesDatasetsError:onGetLogEntryAnomaliesDatasetsError,filteredDatasets:filteredDatasets})=>{const initStateReducer=stateDefaults=>use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread({},stateDefaults),{},{paginationOptions:defaultPaginationOptions,sortOptions:defaultSortOptions,filteredDatasets:filteredDatasets,timeRange:{start:startTime,end:endTime}});const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const _useReducer=Object(external_kbnSharedDeps_React_["useReducer"])(stateReducer,STATE_DEFAULTS,initStateReducer),_useReducer2=use_log_entry_anomalies_results_slicedToArray(_useReducer,2),reducerState=_useReducer2[0],dispatch=_useReducer2[1];const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=use_log_entry_anomalies_results_slicedToArray(_useState,2),logEntryAnomalies=_useState2[0],setLogEntryAnomalies=_useState2[1];const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"creation",createPromise:function(){var _createPromise=use_log_entry_anomalies_results_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _reducerState$timeRan,queryStartTime,queryEndTime,sortOptions,paginationOptions,paginationCursor,queryFilteredDatasets;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_reducerState$timeRan=reducerState.timeRange,queryStartTime=_reducerState$timeRan.start,queryEndTime=_reducerState$timeRan.end,sortOptions=reducerState.sortOptions,paginationOptions=reducerState.paginationOptions,paginationCursor=reducerState.paginationCursor,queryFilteredDatasets=reducerState.filteredDatasets;_context.next=3;return callGetLogEntryAnomaliesAPI({sourceId:sourceId,startTime:queryStartTime,endTime:queryEndTime,sort:sortOptions,pagination:use_log_entry_anomalies_results_objectSpread(use_log_entry_anomalies_results_objectSpread({},paginationOptions),{},{cursor:paginationCursor}),datasets:queryFilteredDatasets},services.http.fetch);case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}),_callee)})));function createPromise(){return _createPromise.apply(this,arguments)}return createPromise}(),onResolve:({data:{anomalies:anomalies,paginationCursors:requestCursors,hasMoreEntries:hasMoreEntries}})=>{const paginationCursor=reducerState.paginationCursor;if(requestCursors){dispatch({type:"changeLastReceivedCursors",payload:{lastReceivedCursors:requestCursors}})}if(!paginationCursor||paginationCursor&&"searchAfter"in paginationCursor){dispatch({type:"changeHasNextPage",payload:{hasNextPage:hasMoreEntries}})}else if(paginationCursor&&"searchBefore"in paginationCursor){dispatch({type:"changeHasNextPage",payload:{hasNextPage:true}})}setLogEntryAnomalies(anomalies)}},[sourceId,dispatch,reducerState.timeRange,reducerState.sortOptions,reducerState.paginationOptions,reducerState.paginationCursor,reducerState.filteredDatasets]),_useTrackedPromise2=use_log_entry_anomalies_results_slicedToArray(_useTrackedPromise,2),getLogEntryAnomaliesRequest=_useTrackedPromise2[0],getLogEntryAnomalies=_useTrackedPromise2[1];const changeSortOptions=Object(external_kbnSharedDeps_React_["useCallback"])(nextSortOptions=>{dispatch({type:"changeSortOptions",payload:{sortOptions:nextSortOptions}})},[dispatch]);const changePaginationOptions=Object(external_kbnSharedDeps_React_["useCallback"])(nextPaginationOptions=>{dispatch({type:"changePaginationOptions",payload:{paginationOptions:nextPaginationOptions}})},[dispatch]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{dispatch({type:"changeTimeRange",payload:{timeRange:{start:startTime,end:endTime}}})},[startTime,endTime]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{dispatch({type:"changeFilteredDatasets",payload:{filteredDatasets:filteredDatasets}})},[filteredDatasets]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{getLogEntryAnomalies()},[getLogEntryAnomalies]);const handleFetchNextPage=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{if(reducerState.lastReceivedCursors){dispatch({type:"fetchNextPage"})}},[dispatch,reducerState]);const handleFetchPreviousPage=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{if(reducerState.lastReceivedCursors){dispatch({type:"fetchPreviousPage"})}},[dispatch,reducerState]);const isLoadingLogEntryAnomalies=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getLogEntryAnomaliesRequest.state==="pending",[getLogEntryAnomaliesRequest.state]);const hasFailedLoadingLogEntryAnomalies=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getLogEntryAnomaliesRequest.state==="rejected",[getLogEntryAnomaliesRequest.state]);const _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=use_log_entry_anomalies_results_slicedToArray(_useState3,2),logEntryAnomaliesDatasets=_useState4[0],setLogEntryAnomaliesDatasets=_useState4[1];const _useTrackedPromise3=Object(use_tracked_promise["b"])({cancelPreviousOn:"creation",createPromise:function(){var _createPromise2=use_log_entry_anomalies_results_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return callGetLogEntryAnomaliesDatasetsAPI({sourceId:sourceId,startTime:startTime,endTime:endTime},services.http.fetch);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}),_callee2)})));function createPromise(){return _createPromise2.apply(this,arguments)}return createPromise}(),onResolve:({data:{datasets:datasets}})=>{setLogEntryAnomaliesDatasets(datasets)},onReject:error=>{if(error instanceof Error&&!(error instanceof use_tracked_promise["a"])&&onGetLogEntryAnomaliesDatasetsError){onGetLogEntryAnomaliesDatasetsError(error)}}},[endTime,sourceId,startTime]),_useTrackedPromise4=use_log_entry_anomalies_results_slicedToArray(_useTrackedPromise3,2),getLogEntryAnomaliesDatasetsRequest=_useTrackedPromise4[0],getLogEntryAnomaliesDatasets=_useTrackedPromise4[1];const isLoadingDatasets=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getLogEntryAnomaliesDatasetsRequest.state==="pending",[getLogEntryAnomaliesDatasetsRequest.state]);const hasFailedLoadingDatasets=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getLogEntryAnomaliesDatasetsRequest.state==="rejected",[getLogEntryAnomaliesDatasetsRequest.state]);useMount_default()(()=>{getLogEntryAnomaliesDatasets()});return{logEntryAnomalies:logEntryAnomalies,getLogEntryAnomalies:getLogEntryAnomalies,isLoadingLogEntryAnomalies:isLoadingLogEntryAnomalies,isLoadingDatasets:isLoadingDatasets,hasFailedLoadingDatasets:hasFailedLoadingDatasets,datasets:logEntryAnomaliesDatasets,hasFailedLoadingLogEntryAnomalies:hasFailedLoadingLogEntryAnomalies,changeSortOptions:changeSortOptions,sortOptions:reducerState.sortOptions,changePaginationOptions:changePaginationOptions,paginationOptions:reducerState.paginationOptions,fetchPreviousPage:reducerState.page>1?handleFetchPreviousPage:undefined,fetchNextPage:reducerState.hasNextPage?handleFetchNextPage:undefined,page:reducerState.page}};function get_log_entry_rate_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function get_log_entry_rate_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){get_log_entry_rate_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){get_log_entry_rate_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const callGetLogEntryRateAPI=function(){var _ref=get_log_entry_rate_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var sourceId,startTime,endTime,bucketDuration,datasets,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:sourceId=requestArgs.sourceId,startTime=requestArgs.startTime,endTime=requestArgs.endTime,bucketDuration=requestArgs.bucketDuration,datasets=requestArgs.datasets;_context.next=3;return fetch(http_api_log_analysis["h"],{method:"POST",body:JSON.stringify(http_api_log_analysis["y"].encode({data:{sourceId:sourceId,timeRange:{startTime:startTime,endTime:endTime},bucketDuration:bucketDuration,datasets:datasets}}))});case 3:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api_log_analysis["z"])(response));case 5:case"end":return _context.stop()}}),_callee)})));return function callGetLogEntryRateAPI(_x,_x2){return _ref.apply(this,arguments)}}();function use_log_entry_rate_results_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function use_log_entry_rate_results_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){use_log_entry_rate_results_ownKeys(Object(source),true).forEach((function(key){use_log_entry_rate_results_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{use_log_entry_rate_results_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function use_log_entry_rate_results_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function use_log_entry_rate_results_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function use_log_entry_rate_results_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){use_log_entry_rate_results_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){use_log_entry_rate_results_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function use_log_entry_rate_results_slicedToArray(arr,i){return use_log_entry_rate_results_arrayWithHoles(arr)||use_log_entry_rate_results_iterableToArrayLimit(arr,i)||use_log_entry_rate_results_unsupportedIterableToArray(arr,i)||use_log_entry_rate_results_nonIterableRest()}function use_log_entry_rate_results_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_log_entry_rate_results_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_log_entry_rate_results_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_log_entry_rate_results_arrayLikeToArray(o,minLen)}function use_log_entry_rate_results_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_log_entry_rate_results_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_log_entry_rate_results_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogEntryRateResults=({sourceId:sourceId,startTime:startTime,endTime:endTime,bucketDuration:bucketDuration=15*60*1e3,filteredDatasets:filteredDatasets})=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=use_log_entry_rate_results_slicedToArray(_useState,2),logEntryRate=_useState2[0],setLogEntryRate=_useState2[1];const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"resolution",createPromise:function(){var _createPromise=use_log_entry_rate_results_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return callGetLogEntryRateAPI({sourceId:sourceId,startTime:startTime,endTime:endTime,bucketDuration:bucketDuration,datasets:filteredDatasets},services.http.fetch);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}),_callee)})));function createPromise(){return _createPromise.apply(this,arguments)}return createPromise}(),onResolve:({data:data})=>{setLogEntryRate({bucketDuration:data.bucketDuration,totalNumberOfLogEntries:data.totalNumberOfLogEntries,histogramBuckets:data.histogramBuckets,partitionBuckets:formatLogEntryRateResultsByPartition(data),anomalies:formatLogEntryRateResultsByAllAnomalies(data)})},onReject:()=>{setLogEntryRate(null)}},[sourceId,startTime,endTime,bucketDuration,filteredDatasets]),_useTrackedPromise2=use_log_entry_rate_results_slicedToArray(_useTrackedPromise,2),getLogEntryRateRequest=_useTrackedPromise2[0],getLogEntryRate=_useTrackedPromise2[1];const isLoading=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getLogEntryRateRequest.state==="pending",[getLogEntryRateRequest.state]);return{getLogEntryRate:getLogEntryRate,isLoading:isLoading,logEntryRate:logEntryRate}};const formatLogEntryRateResultsByPartition=results=>{const partitionedBuckets=results.histogramBuckets.reduce((partitionResults,bucket)=>bucket.partitions.reduce((_partitionResults,partition)=>use_log_entry_rate_results_objectSpread(use_log_entry_rate_results_objectSpread({},_partitionResults),{},{[partition.partitionId]:{buckets:_partitionResults[partition.partitionId]?[..._partitionResults[partition.partitionId].buckets,use_log_entry_rate_results_objectSpread({startTime:bucket.startTime},partition)]:[use_log_entry_rate_results_objectSpread({startTime:bucket.startTime},partition)]}}),partitionResults),{});const resultsByPartition={};Object.entries(partitionedBuckets).map(([key,value])=>{const anomalyScores=value.buckets.reduce((scores,bucket)=>[...scores,bucket.maximumAnomalyScore],[]);const totalNumberOfLogEntries=value.buckets.reduce((total,bucket)=>total+=bucket.numberOfLogEntries,0);resultsByPartition[key]={topAnomalyScore:Math.max(...anomalyScores),totalNumberOfLogEntries:totalNumberOfLogEntries,buckets:value.buckets}});return resultsByPartition};const formatLogEntryRateResultsByAllAnomalies=results=>results.histogramBuckets.reduce((anomalies,bucket)=>bucket.partitions.reduce((_anomalies,partition)=>{if(partition.anomalies.length>0){partition.anomalies.forEach(anomaly=>{_anomalies.push(use_log_entry_rate_results_objectSpread({partitionId:partition.partitionId},anomaly))});return _anomalies}else{return _anomalies}},anomalies),[]);function use_log_entry_rate_results_url_state_slicedToArray(arr,i){return use_log_entry_rate_results_url_state_arrayWithHoles(arr)||use_log_entry_rate_results_url_state_iterableToArrayLimit(arr,i)||use_log_entry_rate_results_url_state_unsupportedIterableToArray(arr,i)||use_log_entry_rate_results_url_state_nonIterableRest()}function use_log_entry_rate_results_url_state_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_log_entry_rate_results_url_state_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_log_entry_rate_results_url_state_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_log_entry_rate_results_url_state_arrayLikeToArray(o,minLen)}function use_log_entry_rate_results_url_state_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_log_entry_rate_results_url_state_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_log_entry_rate_results_url_state_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const use_log_entry_rate_results_url_state_autoRefreshRT=lib["union"]([lib["type"]({interval:lib["number"],isPaused:lib["boolean"]}),lib["undefined"]]);const use_log_entry_rate_results_url_state_stringTimeRangeRT=lib["type"]({startTime:lib["string"],endTime:lib["string"]});const use_log_entry_rate_results_url_state_urlTimeRangeRT=lib["union"]([use_log_entry_rate_results_url_state_stringTimeRangeRT,lib["undefined"]]);const use_log_entry_rate_results_url_state_TIME_RANGE_URL_STATE_KEY="timeRange";const use_log_entry_rate_results_url_state_AUTOREFRESH_URL_STATE_KEY="autoRefresh";const use_log_entry_rate_results_url_state_TIME_DEFAULTS={from:"now-2w",to:"now"};const useLogAnalysisResultsUrlState=()=>{const _useKibanaTimefilterT=Object(use_kibana_timefilter_time["a"])(use_log_entry_rate_results_url_state_TIME_DEFAULTS),_useKibanaTimefilterT2=use_log_entry_rate_results_url_state_slicedToArray(_useKibanaTimefilterT,1),getTime=_useKibanaTimefilterT2[0];const _getTime=getTime(),start=_getTime.from,end=_getTime.to;const _useUrlState=Object(use_url_state["b"])({defaultState:{startTime:start,endTime:end},decodeUrlState:value=>Object(pipeable["pipe"])(use_log_entry_rate_results_url_state_urlTimeRangeRT.decode(value),Object(Either["fold"])(Object(lib_function["constant"])(undefined),lib_function["identity"])),encodeUrlState:use_log_entry_rate_results_url_state_urlTimeRangeRT.encode,urlStateKey:use_log_entry_rate_results_url_state_TIME_RANGE_URL_STATE_KEY,writeDefaultState:true}),_useUrlState2=use_log_entry_rate_results_url_state_slicedToArray(_useUrlState,2),timeRange=_useUrlState2[0],setTimeRange=_useUrlState2[1];Object(use_kibana_timefilter_time["b"])(use_log_entry_rate_results_url_state_TIME_DEFAULTS,{from:timeRange.startTime,to:timeRange.endTime});const _useUrlState3=Object(use_url_state["b"])({defaultState:{isPaused:false,interval:3e4},decodeUrlState:value=>Object(pipeable["pipe"])(use_log_entry_rate_results_url_state_autoRefreshRT.decode(value),Object(Either["fold"])(Object(lib_function["constant"])(undefined),lib_function["identity"])),encodeUrlState:use_log_entry_rate_results_url_state_autoRefreshRT.encode,urlStateKey:use_log_entry_rate_results_url_state_AUTOREFRESH_URL_STATE_KEY,writeDefaultState:true}),_useUrlState4=use_log_entry_rate_results_url_state_slicedToArray(_useUrlState3,2),autoRefresh=_useUrlState4[0],setAutoRefresh=_useUrlState4[1];return{timeRange:timeRange,setTimeRange:setTimeRange,autoRefresh:autoRefresh,setAutoRefresh:setAutoRefresh}};var components_loading=__webpack_require__(120);var use_visibility_state=__webpack_require__(144);var apm_public_=__webpack_require__(72);function log_entry_actions_menu_extends(){log_entry_actions_menu_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return log_entry_actions_menu_extends.apply(this,arguments)}function log_entry_actions_menu_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function log_entry_actions_menu_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){log_entry_actions_menu_ownKeys(Object(source),true).forEach((function(key){log_entry_actions_menu_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{log_entry_actions_menu_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function log_entry_actions_menu_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const UPTIME_FIELDS=["container.id","host.ip","kubernetes.pod.uid"];const LogEntryActionsMenu=({logItem:logItem})=>{const _useVisibilityState=Object(use_visibility_state["a"])(false),hide=_useVisibilityState.hide,isVisible=_useVisibilityState.isVisible,show=_useVisibilityState.show;const apmLinkDescriptor=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getAPMLink(logItem),[logItem]);const uptimeLinkDescriptor=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getUptimeLink(logItem),[logItem]);const uptimeLinkProps=Object(use_link_props["a"])(log_entry_actions_menu_objectSpread({app:"uptime"},uptimeLinkDescriptor?uptimeLinkDescriptor:{}));const apmLinkProps=Object(use_link_props["a"])(log_entry_actions_menu_objectSpread({app:"apm"},apmLinkDescriptor?apmLinkDescriptor:{}));const menuItems=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],log_entry_actions_menu_extends({"data-test-subj":"logEntryActionsMenuItem uptimeLogEntryActionsMenuItem",disabled:!uptimeLinkDescriptor,icon:"uptimeApp",key:"uptimeLink"},uptimeLinkProps),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logEntryActionsMenu.uptimeActionLabel",defaultMessage:"View status in Uptime"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuItem"],log_entry_actions_menu_extends({"data-test-subj":"logEntryActionsMenuItem apmLogEntryActionsMenuItem",disabled:!apmLinkDescriptor,icon:"apmApp",key:"apmLink"},apmLinkProps),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logEntryActionsMenu.apmActionLabel",defaultMessage:"View in APM"}))],[uptimeLinkDescriptor,apmLinkDescriptor,apmLinkProps,uptimeLinkProps]);const hasMenuItems=Object(external_kbnSharedDeps_React_["useMemo"])(()=>menuItems.length>0,[menuItems]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{anchorPosition:"downRight",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"logEntryActionsMenuButton",disabled:!hasMenuItems,iconSide:"right",iconType:"arrowDown",onClick:show},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logEntryActionsMenu.buttonLabel",defaultMessage:"Actions"})),closePopover:hide,id:"logEntryActionsMenu",isOpen:isVisible,panelPaddingSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{items:menuItems}))};const getUptimeLink=logItem=>{const searchExpressions=logItem.fields.filter(({field:field,value:value})=>value!=null&&UPTIME_FIELDS.includes(field)).reduce((acc,fieldItem)=>{const field=fieldItem.field,value=fieldItem.value;return acc.concat(value.map(val=>"".concat(field,":").concat(val)))},[]);if(searchExpressions.length===0){return undefined}return{app:"uptime",hash:"/",search:{search:"".concat(searchExpressions.join(" or "))}}};const getAPMLink=logItem=>{const traceIdEntry=logItem.fields.find(({field:field,value:value})=>value[0]!=null&&field==="trace.id");if(!traceIdEntry){return undefined}const timestampField=logItem.fields.find(({field:field})=>field==="@timestamp");const timestamp=timestampField?timestampField.value[0]:null;const _ref=timestamp?(()=>{const from=new Date(timestamp);const to=new Date(timestamp);from.setMinutes(from.getMinutes()-10);to.setMinutes(to.getMinutes()+10);return{rangeFrom:from.toISOString(),rangeTo:to.toISOString()}})():{rangeFrom:"now-1y",rangeTo:"now"},rangeFrom=_ref.rangeFrom,rangeTo=_ref.rangeTo;return{app:"apm",hash:Object(apm_public_["getTraceUrl"])({traceId:traceIdEntry.value[0],rangeFrom:rangeFrom,rangeTo:rangeTo})}};function log_entry_flyout_templateObject(){const data=log_entry_flyout_taggedTemplateLiteral(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n"]);log_entry_flyout_templateObject=function _templateObject(){return data};return data}function log_entry_flyout_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const LogEntryFlyout=({flyoutItem:flyoutItem,loading:loading,setFlyoutVisibility:setFlyoutVisibility,setFilter:setFilter})=>{const createFilterHandler=Object(external_kbnSharedDeps_React_["useCallback"])(field=>()=>{if(!flyoutItem){return}const filter="".concat(field.field,':"').concat(field.value,'"');const timestampMoment=external_kbnSharedDeps_Moment_default()(flyoutItem.key.time);let target;if(timestampMoment.isValid()){target={time:timestampMoment.valueOf(),tiebreaker:flyoutItem.key.tiebreaker}}setFilter(filter,flyoutItem.id,target)},[flyoutItem,setFilter]);const closeFlyout=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setFlyoutVisibility(false),[setFlyoutVisibility]);const columns=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[{field:"field",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logFlyout.fieldColumnLabel",{defaultMessage:"Field"}),sortable:true},{field:"value",name:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logFlyout.valueColumnLabel",{defaultMessage:"Value"}),sortable:true,render:(_name,item)=>external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{content:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logFlyout.setFilterTooltip",{defaultMessage:"View event with filter"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"text",iconType:"filter","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logFlyout.filterAriaLabel",{defaultMessage:"Filter"}),onClick:createFilterHandler(item)})),formatValue(item.value))}],[createFilterHandler]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:closeFlyout,size:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",{id:"flyoutTitle"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{defaultMessage:"Log event document details",id:"xpack.infra.logFlyout.flyoutTitle"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},flyoutItem!==null?external_kbnSharedDeps_React_default.a.createElement(LogEntryActionsMenu,{logItem:flyoutItem}):null))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,loading||flyoutItem===null?external_kbnSharedDeps_React_default.a.createElement(InfraFlyoutLoadingPanel,null,external_kbnSharedDeps_React_default.a.createElement(components_loading["a"],{height:"100%",width:"100%",text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logFlyout.loadingMessage",{defaultMessage:"Loading Event"})})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{columns:columns,items:flyoutItem.fields})))};const InfraFlyoutLoadingPanel=observability_public_["euiStyled"].div(log_entry_flyout_templateObject());function formatValue(value){return value.length>1?value.join(", "):value[0]}function log_entry_rate_page_results_content_templateObject(){const data=log_entry_rate_page_results_content_taggedTemplateLiteral(["\n  flex: 1 0 0%;\n\n  .euiFlexGroup--responsive > .euiFlexItem {\n    flex-basis: auto !important;\n  }\n"]);log_entry_rate_page_results_content_templateObject=function _templateObject(){return data};return data}function log_entry_rate_page_results_content_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function log_entry_rate_page_results_content_slicedToArray(arr,i){return log_entry_rate_page_results_content_arrayWithHoles(arr)||log_entry_rate_page_results_content_iterableToArrayLimit(arr,i)||log_entry_rate_page_results_content_unsupportedIterableToArray(arr,i)||log_entry_rate_page_results_content_nonIterableRest()}function log_entry_rate_page_results_content_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_entry_rate_page_results_content_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_entry_rate_page_results_content_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_entry_rate_page_results_content_arrayLikeToArray(o,minLen)}function log_entry_rate_page_results_content_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_entry_rate_page_results_content_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_entry_rate_page_results_content_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const SORT_DEFAULTS={direction:"desc",field:"anomalyScore"};const PAGINATION_DEFAULTS={pageSize:25};const LogEntryRateResultsContent=()=>{var _useKibana$services$a,_logEntryRate$histogr,_logEntryRate$histogr2;Object(observability_public_["useTrackPageview"])({app:"infra_logs",path:"log_entry_rate_results"});Object(observability_public_["useTrackPageview"])({app:"infra_logs",path:"log_entry_rate_results",delay:15e3});const navigateToApp=(_useKibana$services$a=Object(public_["useKibana"])().services.application)===null||_useKibana$services$a===void 0?void 0:_useKibana$services$a.navigateToApp;const _useLogSourceContext=Object(log_source["c"])(),sourceId=_useLogSourceContext.sourceId;const _useLogAnalysisCapabi=useLogAnalysisCapabilitiesContext(),hasLogAnalysisSetupCapabilities=_useLogAnalysisCapabi.hasLogAnalysisSetupCapabilities;const _useLogEntryRateModul=useLogEntryRateModuleContext(),hasOutdatedLogEntryRateJobConfigurations=_useLogEntryRateModul.hasOutdatedJobConfigurations,hasOutdatedLogEntryRateJobDefinitions=_useLogEntryRateModul.hasOutdatedJobDefinitions,hasStoppedLogEntryRateJobs=_useLogEntryRateModul.hasStoppedJobs,logEntryRateModuleDescriptor=_useLogEntryRateModul.moduleDescriptor,logEntryRateSetupStatus=_useLogEntryRateModul.setupStatus;const _useLogEntryCategorie=useLogEntryCategoriesModuleContext(),categoryQualityWarnings=_useLogEntryCategorie.categoryQualityWarnings,hasOutdatedLogEntryCategoriesJobConfigurations=_useLogEntryCategorie.hasOutdatedJobConfigurations,hasOutdatedLogEntryCategoriesJobDefinitions=_useLogEntryCategorie.hasOutdatedJobDefinitions,hasStoppedLogEntryCategoriesJobs=_useLogEntryCategorie.hasStoppedJobs,logEntryCategoriesModuleDescriptor=_useLogEntryCategorie.moduleDescriptor,logEntryCategoriesSetupStatus=_useLogEntryCategorie.setupStatus;const _useLogAnalysisResult=useLogAnalysisResultsUrlState(),selectedTimeRange=_useLogAnalysisResult.timeRange,setSelectedTimeRange=_useLogAnalysisResult.setTimeRange,autoRefresh=_useLogAnalysisResult.autoRefresh,setAutoRefresh=_useLogAnalysisResult.setAutoRefresh;const _useState=Object(external_kbnSharedDeps_React_["useState"])(()=>({value:page_results_content_stringToNumericTimeRange(selectedTimeRange),lastChangedTime:Date.now()})),_useState2=log_entry_rate_page_results_content_slicedToArray(_useState,2),queryTimeRange=_useState2[0],setQueryTimeRange=_useState2[1];const linkToLogStream=Object(external_kbnSharedDeps_React_["useCallback"])((filter,id,timeKey)=>{const params={logPosition:Object(rison["encode"])({end:external_kbnSharedDeps_Moment_default()(queryTimeRange.value.endTime).format("YYYY-MM-DDTHH:mm:ss.SSSZ"),position:timeKey,start:external_kbnSharedDeps_Moment_default()(queryTimeRange.value.startTime).format("YYYY-MM-DDTHH:mm:ss.SSSZ"),streamLive:false}),flyoutOptions:Object(rison["encode"])({surroundingLogsId:id}),logFilter:Object(rison["encode"])({expression:filter,kind:"kuery"})};navigateToApp===null||navigateToApp===void 0?void 0:navigateToApp("logs",{path:"/stream?".concat(Object(query_string["stringify"])(params))})},[queryTimeRange,navigateToApp]);const bucketDuration=Object(external_kbnSharedDeps_React_["useMemo"])(()=>getBucketDuration(queryTimeRange.value.startTime,queryTimeRange.value.endTime),[queryTimeRange.value.endTime,queryTimeRange.value.startTime]);const _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=log_entry_rate_page_results_content_slicedToArray(_useState3,2),selectedDatasets=_useState4[0],setSelectedDatasets=_useState4[1];const _useLogEntryRateResul=useLogEntryRateResults({sourceId:sourceId,startTime:queryTimeRange.value.startTime,endTime:queryTimeRange.value.endTime,bucketDuration:bucketDuration,filteredDatasets:selectedDatasets}),getLogEntryRate=_useLogEntryRateResul.getLogEntryRate,isLoading=_useLogEntryRateResul.isLoading,logEntryRate=_useLogEntryRateResul.logEntryRate;const _useLogEntryAnomalies=useLogEntryAnomaliesResults({sourceId:sourceId,startTime:queryTimeRange.value.startTime,endTime:queryTimeRange.value.endTime,defaultSortOptions:SORT_DEFAULTS,defaultPaginationOptions:PAGINATION_DEFAULTS,filteredDatasets:selectedDatasets}),isLoadingLogEntryAnomalies=_useLogEntryAnomalies.isLoadingLogEntryAnomalies,logEntryAnomalies=_useLogEntryAnomalies.logEntryAnomalies,page=_useLogEntryAnomalies.page,fetchNextPage=_useLogEntryAnomalies.fetchNextPage,fetchPreviousPage=_useLogEntryAnomalies.fetchPreviousPage,changeSortOptions=_useLogEntryAnomalies.changeSortOptions,changePaginationOptions=_useLogEntryAnomalies.changePaginationOptions,sortOptions=_useLogEntryAnomalies.sortOptions,paginationOptions=_useLogEntryAnomalies.paginationOptions,datasets=_useLogEntryAnomalies.datasets,isLoadingDatasets=_useLogEntryAnomalies.isLoadingDatasets;const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(LogFlyout.Context),flyoutVisible=_useContext.flyoutVisible,setFlyoutVisibility=_useContext.setFlyoutVisibility,flyoutItem=_useContext.flyoutItem,isFlyoutLoading=_useContext.isLoading;const handleQueryTimeRangeChange=Object(external_kbnSharedDeps_React_["useCallback"])(({start:startTime,end:endTime})=>{setQueryTimeRange({value:page_results_content_stringToNumericTimeRange({startTime:startTime,endTime:endTime}),lastChangedTime:Date.now()})},[setQueryTimeRange]);const handleSelectedTimeRangeChange=Object(external_kbnSharedDeps_React_["useCallback"])(selectedTime=>{if(selectedTime.isInvalid){return}setSelectedTimeRange({startTime:selectedTime.start,endTime:selectedTime.end});handleQueryTimeRangeChange(selectedTime)},[setSelectedTimeRange,handleQueryTimeRangeChange]);const handleChartTimeRangeChange=Object(external_kbnSharedDeps_React_["useCallback"])(({startTime:startTime,endTime:endTime})=>{handleSelectedTimeRangeChange({end:new Date(endTime).toISOString(),isInvalid:false,start:new Date(startTime).toISOString()})},[handleSelectedTimeRangeChange]);const handleAutoRefreshChange=Object(external_kbnSharedDeps_React_["useCallback"])(({isPaused:isPaused,refreshInterval:interval})=>{setAutoRefresh({isPaused:isPaused,interval:interval})},[setAutoRefresh]);const _useLogAnalysisSetupF=useLogAnalysisSetupFlyoutStateContext(),showModuleList=_useLogAnalysisSetupF.showModuleList,showModuleSetup=_useLogAnalysisSetupF.showModuleSetup;const showLogEntryRateSetup=Object(external_kbnSharedDeps_React_["useCallback"])(()=>showModuleSetup("logs_ui_analysis"),[showModuleSetup]);const showLogEntryCategoriesSetup=Object(external_kbnSharedDeps_React_["useCallback"])(()=>showModuleSetup("logs_ui_categories"),[showModuleSetup]);const hasLogRateResults=((_logEntryRate$histogr=logEntryRate===null||logEntryRate===void 0?void 0:(_logEntryRate$histogr2=logEntryRate.histogramBuckets)===null||_logEntryRate$histogr2===void 0?void 0:_logEntryRate$histogr2.length)!==null&&_logEntryRate$histogr!==void 0?_logEntryRate$histogr:0)>0;const hasAnomalyResults=logEntryAnomalies.length>0;const isFirstUse=Object(external_kbnSharedDeps_React_["useMemo"])(()=>(logEntryCategoriesSetupStatus.type==="skipped"&&!!logEntryCategoriesSetupStatus.newlyCreated||logEntryCategoriesSetupStatus.type==="succeeded"||logEntryRateSetupStatus.type==="skipped"&&!!logEntryRateSetupStatus.newlyCreated||logEntryRateSetupStatus.type==="succeeded")&&!(hasLogRateResults||hasAnomalyResults),[hasAnomalyResults,hasLogRateResults,logEntryCategoriesSetupStatus,logEntryRateSetupStatus]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{getLogEntryRate()},[getLogEntryRate,selectedDatasets,queryTimeRange.lastChangedTime]);useInterval(()=>{handleQueryTimeRangeChange({start:selectedTimeRange.startTime,end:selectedTimeRange.endTime})},autoRefresh.isPaused?null:autoRefresh.interval);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(page_results_content_ResultsContentPage,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(DatasetsSelector,{availableDatasets:datasets,isLoading:isLoadingDatasets,selectedDatasets:selectedDatasets,onChangeDatasetSelection:setSelectedDatasets})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperDatePicker"],{start:selectedTimeRange.startTime,end:selectedTimeRange.endTime,onTimeChange:handleSelectedTimeRangeChange,isPaused:autoRefresh.isPaused,refreshInterval:autoRefresh.interval,onRefreshChange:handleAutoRefreshChange})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(LogAnalysisJobProblemIndicator,{hasOutdatedJobConfigurations:hasOutdatedLogEntryRateJobConfigurations,hasOutdatedJobDefinitions:hasOutdatedLogEntryRateJobDefinitions,hasSetupCapabilities:hasLogAnalysisSetupCapabilities,hasStoppedJobs:hasStoppedLogEntryRateJobs,isFirstUse:false,moduleName:logEntryRateModuleDescriptor.moduleName,onRecreateMlJobForReconfiguration:showLogEntryRateSetup,onRecreateMlJobForUpdate:showLogEntryRateSetup}),external_kbnSharedDeps_React_default.a.createElement(CategoryJobNoticesSection,{hasOutdatedJobConfigurations:hasOutdatedLogEntryCategoriesJobConfigurations,hasOutdatedJobDefinitions:hasOutdatedLogEntryCategoriesJobDefinitions,hasSetupCapabilities:hasLogAnalysisSetupCapabilities,hasStoppedJobs:hasStoppedLogEntryCategoriesJobs,isFirstUse:isFirstUse,moduleName:logEntryCategoriesModuleDescriptor.moduleName,onRecreateMlJobForReconfiguration:showLogEntryCategoriesSetup,onRecreateMlJobForUpdate:showLogEntryCategoriesSetup,qualityWarnings:categoryQualityWarnings})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"m"},external_kbnSharedDeps_React_default.a.createElement(AnomaliesResults,{isLoadingLogRateResults:isLoading,isLoadingAnomaliesResults:isLoadingLogEntryAnomalies,onViewModuleList:showModuleList,logEntryRateResults:logEntryRate,anomalies:logEntryAnomalies,setTimeRange:handleChartTimeRangeChange,timeRange:queryTimeRange.value,page:page,fetchNextPage:fetchNextPage,fetchPreviousPage:fetchPreviousPage,changeSortOptions:changeSortOptions,changePaginationOptions:changePaginationOptions,sortOptions:sortOptions,paginationOptions:paginationOptions}))))),flyoutVisible?external_kbnSharedDeps_React_default.a.createElement(LogEntryFlyout,{flyoutItem:flyoutItem,setFlyoutVisibility:setFlyoutVisibility,loading:isFlyoutLoading,setFilter:linkToLogStream}):null)};const page_results_content_stringToNumericTimeRange=timeRange=>({startTime:external_kbnSharedDeps_Moment_default()(elastic_datemath_default.a.parse(timeRange.startTime,{momentInstance:external_kbnSharedDeps_Moment_default.a})).valueOf(),endTime:external_kbnSharedDeps_Moment_default()(elastic_datemath_default.a.parse(timeRange.endTime,{momentInstance:external_kbnSharedDeps_Moment_default.a,roundUp:true})).valueOf()});const getBucketDuration=(startTime,endTime)=>{const msRange=external_kbnSharedDeps_Moment_default()(endTime).diff(external_kbnSharedDeps_Moment_default()(startTime));const bucketIntervalInMs=msRange/100;const result=log_analysis["bucketSpan"]*Math.round(bucketIntervalInMs/log_analysis["bucketSpan"]);const roundedResult=parseInt(Number(result).toFixed(0),10);return roundedResult<log_analysis["bucketSpan"]?log_analysis["bucketSpan"]:roundedResult};const page_results_content_ResultsContentPage=Object(observability_public_["euiStyled"])(external_kbnSharedDeps_ElasticEui_["EuiPage"])(log_entry_rate_page_results_content_templateObject());const LogEntryRateSetupContent=({onOpenSetup:onOpenSetup})=>{Object(observability_public_["useTrackPageview"])({app:"infra_logs",path:"log_entry_rate_setup"});Object(observability_public_["useTrackPageview"])({app:"infra_logs",path:"log_entry_rate_setup",delay:15e3});return external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["a"],{"data-test-subj":"logEntryRateSetupPage"},external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["c"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.logEntryRate.setupTitle",defaultMessage:"Set up log anomaly analysis"})),external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["b"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.logEntryRate.setupDescription",defaultMessage:"To enable log anomalies, set up a machine learning job"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:onOpenSetup},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.logEntryRate.showAnalysisSetupButtonLabel",defaultMessage:"ML Setup"}))))};const page_content_JOB_STATUS_POLLING_INTERVAL=3e4;const LogEntryRatePageContent=Object(external_kbnSharedDeps_React_["memo"])(()=>{const _useLogSourceContext=Object(log_source["c"])(),hasFailedLoadingSource=_useLogSourceContext.hasFailedLoadingSource,isLoading=_useLogSourceContext.isLoading,isUninitialized=_useLogSourceContext.isUninitialized,loadSource=_useLogSourceContext.loadSource,loadSourceFailureMessage=_useLogSourceContext.loadSourceFailureMessage;const _useLogAnalysisCapabi=useLogAnalysisCapabilitiesContext(),hasLogAnalysisCapabilites=_useLogAnalysisCapabi.hasLogAnalysisCapabilites,hasLogAnalysisReadCapabilities=_useLogAnalysisCapabi.hasLogAnalysisReadCapabilities,hasLogAnalysisSetupCapabilities=_useLogAnalysisCapabi.hasLogAnalysisSetupCapabilities;const _useLogEntryCategorie=useLogEntryCategoriesModuleContext(),fetchLogEntryCategoriesJobStatus=_useLogEntryCategorie.fetchJobStatus,fetchLogEntryCategoriesModuleDefinition=_useLogEntryCategorie.fetchModuleDefinition,logEntryCategoriesJobStatus=_useLogEntryCategorie.jobStatus,logEntryCategoriesSetupStatus=_useLogEntryCategorie.setupStatus;const _useLogEntryRateModul=useLogEntryRateModuleContext(),fetchLogEntryRateJobStatus=_useLogEntryRateModul.fetchJobStatus,fetchLogEntryRateModuleDefinition=_useLogEntryRateModul.fetchModuleDefinition,logEntryRateJobStatus=_useLogEntryRateModul.jobStatus,logEntryRateSetupStatus=_useLogEntryRateModul.setupStatus;const _useLogAnalysisSetupF=useLogAnalysisSetupFlyoutStateContext(),showModuleList=_useLogAnalysisSetupF.showModuleList;const fetchAllJobStatuses=Object(external_kbnSharedDeps_React_["useCallback"])(()=>Promise.all([fetchLogEntryCategoriesJobStatus(),fetchLogEntryRateJobStatus()]),[fetchLogEntryCategoriesJobStatus,fetchLogEntryRateJobStatus]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(hasLogAnalysisReadCapabilities){fetchAllJobStatuses()}},[fetchAllJobStatuses,hasLogAnalysisReadCapabilities]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(hasLogAnalysisReadCapabilities){fetchLogEntryCategoriesModuleDefinition()}},[fetchLogEntryCategoriesModuleDefinition,hasLogAnalysisReadCapabilities]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(hasLogAnalysisReadCapabilities){fetchLogEntryRateModuleDefinition()}},[fetchLogEntryRateModuleDefinition,hasLogAnalysisReadCapabilities]);useInterval(()=>{if(logEntryCategoriesSetupStatus.type!=="pending"&&hasLogAnalysisReadCapabilities){fetchLogEntryCategoriesJobStatus()}if(logEntryRateSetupStatus.type!=="pending"&&hasLogAnalysisReadCapabilities){fetchLogEntryRateJobStatus()}},page_content_JOB_STATUS_POLLING_INTERVAL);if(isLoading||isUninitialized){return external_kbnSharedDeps_React_default.a.createElement(source_loading_page["a"],null)}else if(hasFailedLoadingSource){return external_kbnSharedDeps_React_default.a.createElement(source_error_page["a"],{errorMessage:loadSourceFailureMessage!==null&&loadSourceFailureMessage!==void 0?loadSourceFailureMessage:"",retry:loadSource})}else if(!hasLogAnalysisCapabilites){return external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["g"],null)}else if(!hasLogAnalysisReadCapabilities){return external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["e"],null)}else if(logEntryCategoriesSetupStatus.type==="initializing"||logEntryRateSetupStatus.type==="initializing"){return external_kbnSharedDeps_React_default.a.createElement(loading_page["a"],{message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.analysisPage.loadingMessage",{defaultMessage:"Checking status of analysis jobs..."})})}else if(logEntryCategoriesSetupStatus.type==="unknown"||logEntryRateSetupStatus.type==="unknown"){return external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["d"],{retry:fetchAllJobStatuses})}else if(Object(log_analysis["isJobStatusWithResults"])(logEntryCategoriesJobStatus["log-entry-categories-count"])||Object(log_analysis["isJobStatusWithResults"])(logEntryRateJobStatus["log-entry-rate"])){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(LogEntryRateResultsContent,null),external_kbnSharedDeps_React_default.a.createElement(LogAnalysisSetupFlyout,null))}else if(!hasLogAnalysisSetupCapabilities){return external_kbnSharedDeps_React_default.a.createElement(log_analysis_setup["f"],null)}else{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(LogEntryRateSetupContent,{onOpenSetup:showModuleList}),external_kbnSharedDeps_React_default.a.createElement(LogAnalysisSetupFlyout,null))}});const LogEntryRatePageProviders=({children:children})=>{var _sourceConfiguration$,_sourceConfiguration$2,_sourceConfiguration$3,_sourceConfiguration$4;const _useLogSourceContext=Object(log_source["c"])(),sourceId=_useLogSourceContext.sourceId,sourceConfiguration=_useLogSourceContext.sourceConfiguration;const _useActiveKibanaSpace=Object(use_kibana_space["a"])(),space=_useActiveKibanaSpace.space;if((sourceConfiguration===null||sourceConfiguration===void 0?void 0:sourceConfiguration.configuration.logAlias)==null||space==null){return null}return external_kbnSharedDeps_React_default.a.createElement(LogFlyout.Provider,null,external_kbnSharedDeps_React_default.a.createElement(LogEntryRateModuleProvider,{indexPattern:(_sourceConfiguration$=sourceConfiguration===null||sourceConfiguration===void 0?void 0:sourceConfiguration.configuration.logAlias)!==null&&_sourceConfiguration$!==void 0?_sourceConfiguration$:"",sourceId:sourceId,spaceId:space.id,timestampField:(_sourceConfiguration$2=sourceConfiguration===null||sourceConfiguration===void 0?void 0:sourceConfiguration.configuration.fields.timestamp)!==null&&_sourceConfiguration$2!==void 0?_sourceConfiguration$2:""},external_kbnSharedDeps_React_default.a.createElement(LogEntryCategoriesModuleProvider,{indexPattern:(_sourceConfiguration$3=sourceConfiguration===null||sourceConfiguration===void 0?void 0:sourceConfiguration.configuration.logAlias)!==null&&_sourceConfiguration$3!==void 0?_sourceConfiguration$3:"",sourceId:sourceId,spaceId:space.id,timestampField:(_sourceConfiguration$4=sourceConfiguration===null||sourceConfiguration===void 0?void 0:sourceConfiguration.configuration.fields.timestamp)!==null&&_sourceConfiguration$4!==void 0?_sourceConfiguration$4:""},external_kbnSharedDeps_React_default.a.createElement(LogAnalysisSetupFlyoutStateProvider,null,children))))};const LogEntryRatePage=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiErrorBoundary"],null,external_kbnSharedDeps_React_default.a.createElement(LogEntryRatePageProviders,null,external_kbnSharedDeps_React_default.a.createElement(components_page["a"],{"data-test-subj":"logsLogEntryRatePage"},external_kbnSharedDeps_React_default.a.createElement(LogEntryRatePageContent,null))));function fields_configuration_panel_extends(){fields_configuration_panel_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return fields_configuration_panel_extends.apply(this,arguments)}const FieldsConfigurationPanel=({isLoading:isLoading,readOnly:readOnly,tiebreakerFieldProps:tiebreakerFieldProps,timestampFieldProps:timestampFieldProps})=>{const isTimestampValueDefault=timestampFieldProps.value==="@timestamp";const isTiebreakerValueDefault=tiebreakerFieldProps.value==="_doc";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.fieldsSectionTitle",defaultMessage:"Fields"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.sourceConfiguration.deprecationNotice",{defaultMessage:"Deprecation Notice"}),color:"warning",iconType:"help"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.deprecationMessage",defaultMessage:"Configuring these fields have been deprecated and will be removed in 8.0.0. This application is designed to work with {ecsLink}, you should adjust your indexing to use the {documentationLink}.",values:{documentationLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:"https://www.elastic.co/guide/en/infrastructure/guide/7.4/infrastructure-metrics.html",target:"BLANK"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.documentedFields",defaultMessage:"documented fields"})),ecsLink:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:"https://www.elastic.co/guide/en/ecs/current/index.html",target:"BLANK"},"ECS")}}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.timestampFieldLabel",defaultMessage:"Timestamp"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.timestampFieldDescription",defaultMessage:"Timestamp used to sort log entries"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{error:timestampFieldProps.error,fullWidth:true,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.timestampFieldRecommendedValue",defaultMessage:"The recommended value is {defaultValue}",values:{defaultValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"@timestamp")}}),isInvalid:timestampFieldProps.isInvalid,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.timestampFieldLabel",defaultMessage:"Timestamp"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],fields_configuration_panel_extends({fullWidth:true,disabled:isLoading||isTimestampValueDefault,readOnly:readOnly,isLoading:isLoading},timestampFieldProps)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.tiebreakerFieldLabel",defaultMessage:"Tiebreaker"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.tiebreakerFieldDescription",defaultMessage:"Field used to break ties between two entries with the same timestamp"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{error:tiebreakerFieldProps.error,fullWidth:true,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.tiebreakerFieldRecommendedValue",defaultMessage:"The recommended value is {defaultValue}",values:{defaultValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"_doc")}}),isInvalid:tiebreakerFieldProps.isInvalid,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.tiebreakerFieldLabel",defaultMessage:"Tiebreaker"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],fields_configuration_panel_extends({fullWidth:true,disabled:isLoading||isTiebreakerValueDefault,readOnly:readOnly,isLoading:isLoading},tiebreakerFieldProps)))))};function indices_configuration_panel_extends(){indices_configuration_panel_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return indices_configuration_panel_extends.apply(this,arguments)}const IndicesConfigurationPanel=({isLoading:isLoading,readOnly:readOnly,logAliasFieldProps:logAliasFieldProps})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.indicesSectionTitle",defaultMessage:"Indices"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("h4",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.logIndicesTitle",defaultMessage:"Log indices"})),description:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.logIndicesDescription",defaultMessage:"Index pattern for matching indices that contain log data"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{error:logAliasFieldProps.error,fullWidth:true,helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.logIndicesRecommendedValue",defaultMessage:"The recommended value is {defaultValue}",values:{defaultValue:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"logs-*,filebeat-*")}}),isInvalid:logAliasFieldProps.isInvalid,label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.logIndicesLabel",defaultMessage:"Log indices"})},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],indices_configuration_panel_extends({"data-test-subj":"logIndicesInput",fullWidth:true,disabled:isLoading,isLoading:isLoading,readOnly:readOnly},logAliasFieldProps)))));var name_configuration_panel=__webpack_require__(249);var uuid=__webpack_require__(29);function add_log_column_popover_templateObject(){const data=add_log_column_popover_taggedTemplateLiteral(["\n  width: 400px;\n"]);add_log_column_popover_templateObject=function _templateObject(){return data};return data}function add_log_column_popover_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const AddLogColumnButtonAndPopover=({addLogColumn:addLogColumn,availableFields:availableFields,isDisabled:isDisabled})=>{const _useVisibilityState=Object(use_visibility_state["a"])(false),isOpen=_useVisibilityState.isVisible,openPopover=_useVisibilityState.show,closePopover=_useVisibilityState.hide;const availableColumnOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[{optionProps:{append:external_kbnSharedDeps_React_default.a.createElement(SystemColumnBadge,null),"data-test-subj":"addTimestampLogColumn",key:"timestamp",label:"Timestamp"},columnConfiguration:{timestampColumn:{id:Object(uuid["v4"])()}}},{optionProps:{"data-test-subj":"addMessageLogColumn",append:external_kbnSharedDeps_React_default.a.createElement(SystemColumnBadge,null),key:"message",label:"Message"},columnConfiguration:{messageColumn:{id:Object(uuid["v4"])()}}},...availableFields.map(field=>({optionProps:{"data-test-subj":"addFieldLogColumn addFieldLogColumn:".concat(field),key:"field-".concat(field),label:field},columnConfiguration:{fieldColumn:{id:Object(uuid["v4"])(),field:field}}}))],[availableFields]);const availableOptions=Object(external_kbnSharedDeps_React_["useMemo"])(()=>availableColumnOptions.map(availableColumnOption=>availableColumnOption.optionProps),[availableColumnOptions]);const handleColumnSelection=Object(external_kbnSharedDeps_React_["useCallback"])(selectedOptions=>{closePopover();const selectedOptionIndex=selectedOptions.findIndex(selectedOption=>selectedOption.checked==="on");const selectedOption=availableColumnOptions[selectedOptionIndex];addLogColumn(selectedOption.columnConfiguration)},[addLogColumn,availableColumnOptions,closePopover]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{anchorPosition:"downRight",button:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"addLogColumnButton",isDisabled:isDisabled,iconType:"plusInCircle",onClick:openPopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.addLogColumnButtonLabel",defaultMessage:"Add column"})),closePopover:closePopover,id:"addLogColumn",isOpen:isOpen,ownFocus:true,panelPaddingSize:"none"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSelectable"],{height:600,listProps:selectableListProps,onChange:handleColumnSelection,options:availableOptions,searchable:true,searchProps:searchProps,singleSelection:true},(list,search)=>external_kbnSharedDeps_React_default.a.createElement(SelectableContent,{"data-test-subj":"addLogColumnPopover"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopoverTitle"],null,search),list)))};const searchProps={"data-test-subj":"fieldSearchInput"};const selectableListProps={showIcons:false};const SystemColumnBadge=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.systemColumnBadgeLabel",defaultMessage:"System"}));const SelectableContent=observability_public_["euiStyled"].div(add_log_column_popover_templateObject());function log_columns_configuration_panel_extends(){log_columns_configuration_panel_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return log_columns_configuration_panel_extends.apply(this,arguments)}const LogColumnsConfigurationPanel=({addLogColumn:addLogColumn,moveLogColumn:moveLogColumn,availableFields:availableFields,isLoading:isLoading,logColumnConfiguration:logColumnConfiguration})=>{const onDragEnd=Object(external_kbnSharedDeps_React_["useCallback"])(({source:source,destination:destination})=>destination&&moveLogColumn(source.index,destination.index),[moveLogColumn]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s","data-test-subj":"sourceConfigurationLogColumnsSectionTitle"},external_kbnSharedDeps_React_default.a.createElement("h3",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.logColumnsSectionTitle",defaultMessage:"Log Columns"})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(AddLogColumnButtonAndPopover,{addLogColumn:addLogColumn,availableFields:availableFields,isDisabled:isLoading}))),logColumnConfiguration.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDragDropContext"],{onDragEnd:onDragEnd},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDroppable"],{droppableId:"COLUMN_CONFIG_DROPPABLE_AREA"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,logColumnConfiguration.map((column,index)=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDraggable"],{key:"logColumnConfigurationPanel-".concat(column.logColumnConfiguration.id),index:index,draggableId:column.logColumnConfiguration.id,customDragHandle:true},provided=>external_kbnSharedDeps_React_default.a.createElement(LogColumnConfigurationPanel,{dragHandleProps:provided.dragHandleProps,logColumnConfigurationProps:column})))))):external_kbnSharedDeps_React_default.a.createElement(LogColumnConfigurationEmptyPrompt,null))};const LogColumnConfigurationPanel=props=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),props.logColumnConfigurationProps.type==="timestamp"?external_kbnSharedDeps_React_default.a.createElement(TimestampLogColumnConfigurationPanel,props):props.logColumnConfigurationProps.type==="message"?external_kbnSharedDeps_React_default.a.createElement(MessageLogColumnConfigurationPanel,props):external_kbnSharedDeps_React_default.a.createElement(FieldLogColumnConfigurationPanel,{logColumnConfigurationProps:props.logColumnConfigurationProps,dragHandleProps:props.dragHandleProps}));const TimestampLogColumnConfigurationPanel=({logColumnConfigurationProps:logColumnConfigurationProps,dragHandleProps:dragHandleProps})=>external_kbnSharedDeps_React_default.a.createElement(ExplainedLogColumnConfigurationPanel,{fieldName:"Timestamp",helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{tagName:"span",id:"xpack.infra.sourceConfiguration.timestampLogColumnDescription",defaultMessage:"This system field shows the log entry's time as determined by the {timestampSetting} field setting.",values:{timestampSetting:external_kbnSharedDeps_React_default.a.createElement("code",null,"timestamp")}}),removeColumn:logColumnConfigurationProps.remove,dragHandleProps:dragHandleProps});const MessageLogColumnConfigurationPanel=({logColumnConfigurationProps:logColumnConfigurationProps,dragHandleProps:dragHandleProps})=>external_kbnSharedDeps_React_default.a.createElement(ExplainedLogColumnConfigurationPanel,{fieldName:"Message",helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{tagName:"span",id:"xpack.infra.sourceConfiguration.messageLogColumnDescription",defaultMessage:"This system field shows the log entry message as derived from the document fields."}),removeColumn:logColumnConfigurationProps.remove,dragHandleProps:dragHandleProps});const FieldLogColumnConfigurationPanel=({logColumnConfigurationProps:{logColumnConfiguration:{field:field},remove:remove},dragHandleProps:dragHandleProps})=>{const fieldLogColumnTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.sourceConfiguration.fieldLogColumnTitle",{defaultMessage:"Field"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{"data-test-subj":"logColumnPanel fieldLogColumnPanel fieldLogColumnPanel:".concat(field)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement("div",log_columns_configuration_panel_extends({"data-test-subj":"moveLogColumnHandle"},dragHandleProps),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"grab"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1},fieldLogColumnTitle),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:3},external_kbnSharedDeps_React_default.a.createElement("code",null,field)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(RemoveLogColumnButton,{onClick:remove,columnDescription:"".concat(fieldLogColumnTitle," - ").concat(field)}))))};const ExplainedLogColumnConfigurationPanel=({fieldName:fieldName,helpText:helpText,removeColumn:removeColumn,dragHandleProps:dragHandleProps})=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{"data-test-subj":"logColumnPanel systemLogColumnPanel systemLogColumnPanel:".concat(fieldName)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement("div",log_columns_configuration_panel_extends({"data-test-subj":"moveLogColumnHandle"},dragHandleProps),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"grab"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1},fieldName),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:3},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},helpText)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(RemoveLogColumnButton,{onClick:removeColumn,columnDescription:String(fieldName)}))));const RemoveLogColumnButton=({onClick:onClick,columnDescription:columnDescription})=>{const removeColumnLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.sourceConfiguration.removeLogColumnButtonLabel",{defaultMessage:"Remove {columnDescription} column",values:{columnDescription:columnDescription}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"danger","data-test-subj":"removeLogColumnButton",iconType:"trash",onClick:onClick,title:removeColumnLabel,"aria-label":removeColumnLabel})};const LogColumnConfigurationEmptyPrompt=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{iconType:"list",title:external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.noLogColumnsTitle",defaultMessage:"No columns"})),body:external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.noLogColumnsDescription",defaultMessage:"Add a column to this list using the button above."}))});var input_fields=__webpack_require__(149);function indices_configuration_form_state_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function indices_configuration_form_state_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){indices_configuration_form_state_ownKeys(Object(source),true).forEach((function(key){indices_configuration_form_state_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{indices_configuration_form_state_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function indices_configuration_form_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function indices_configuration_form_state_slicedToArray(arr,i){return indices_configuration_form_state_arrayWithHoles(arr)||indices_configuration_form_state_iterableToArrayLimit(arr,i)||indices_configuration_form_state_unsupportedIterableToArray(arr,i)||indices_configuration_form_state_nonIterableRest()}function indices_configuration_form_state_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function indices_configuration_form_state_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return indices_configuration_form_state_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return indices_configuration_form_state_arrayLikeToArray(o,minLen)}function indices_configuration_form_state_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function indices_configuration_form_state_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function indices_configuration_form_state_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogIndicesConfigurationFormState=({initialFormState:initialFormState=defaultFormState})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])({}),_useState2=indices_configuration_form_state_slicedToArray(_useState,2),formStateChanges=_useState2[0],setFormStateChanges=_useState2[1];const resetForm=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setFormStateChanges({}),[]);const formState=Object(external_kbnSharedDeps_React_["useMemo"])(()=>indices_configuration_form_state_objectSpread(indices_configuration_form_state_objectSpread({},initialFormState),formStateChanges),[initialFormState,formStateChanges]);const nameFieldProps=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object(input_fields["a"])({errors:Object(input_fields["b"])(formState.name),name:"name",onChange:name=>setFormStateChanges(changes=>indices_configuration_form_state_objectSpread(indices_configuration_form_state_objectSpread({},changes),{},{name:name})),value:formState.name}),[formState.name]);const logAliasFieldProps=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object(input_fields["a"])({errors:Object(input_fields["b"])(formState.logAlias),name:"logAlias",onChange:logAlias=>setFormStateChanges(changes=>indices_configuration_form_state_objectSpread(indices_configuration_form_state_objectSpread({},changes),{},{logAlias:logAlias})),value:formState.logAlias}),[formState.logAlias]);const tiebreakerFieldFieldProps=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object(input_fields["a"])({errors:Object(input_fields["b"])(formState.tiebreakerField),name:"tiebreakerField",onChange:tiebreakerField=>setFormStateChanges(changes=>indices_configuration_form_state_objectSpread(indices_configuration_form_state_objectSpread({},changes),{},{tiebreakerField:tiebreakerField})),value:formState.tiebreakerField}),[formState.tiebreakerField]);const timestampFieldFieldProps=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object(input_fields["a"])({errors:Object(input_fields["b"])(formState.timestampField),name:"timestampField",onChange:timestampField=>setFormStateChanges(changes=>indices_configuration_form_state_objectSpread(indices_configuration_form_state_objectSpread({},changes),{},{timestampField:timestampField})),value:formState.timestampField}),[formState.timestampField]);const fieldProps=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({name:nameFieldProps,logAlias:logAliasFieldProps,tiebreakerField:tiebreakerFieldFieldProps,timestampField:timestampFieldFieldProps}),[nameFieldProps,logAliasFieldProps,tiebreakerFieldFieldProps,timestampFieldFieldProps]);const errors=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object.values(fieldProps).reduce((accumulatedErrors,{error:error})=>[...accumulatedErrors,...error],[]),[fieldProps]);const isFormValid=Object(external_kbnSharedDeps_React_["useMemo"])(()=>errors.length<=0,[errors]);const isFormDirty=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object.keys(formStateChanges).length>0,[formStateChanges]);return{errors:errors,fieldProps:fieldProps,formState:formState,formStateChanges:formStateChanges,isFormDirty:isFormDirty,isFormValid:isFormValid,resetForm:resetForm}};const defaultFormState={name:"",description:"",logAlias:"",tiebreakerField:"",timestampField:""};function log_columns_configuration_form_state_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function log_columns_configuration_form_state_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){log_columns_configuration_form_state_ownKeys(Object(source),true).forEach((function(key){log_columns_configuration_form_state_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{log_columns_configuration_form_state_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function log_columns_configuration_form_state_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function log_columns_configuration_form_state_slicedToArray(arr,i){return log_columns_configuration_form_state_arrayWithHoles(arr)||log_columns_configuration_form_state_iterableToArrayLimit(arr,i)||log_columns_configuration_form_state_unsupportedIterableToArray(arr,i)||log_columns_configuration_form_state_nonIterableRest()}function log_columns_configuration_form_state_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_columns_configuration_form_state_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_columns_configuration_form_state_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_columns_configuration_form_state_arrayLikeToArray(o,minLen)}function log_columns_configuration_form_state_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_columns_configuration_form_state_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_columns_configuration_form_state_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogColumnsConfigurationFormState=({initialFormState:initialFormState=log_columns_configuration_form_state_defaultFormState})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])({}),_useState2=log_columns_configuration_form_state_slicedToArray(_useState,2),formStateChanges=_useState2[0],setFormStateChanges=_useState2[1];const resetForm=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setFormStateChanges({}),[]);const formState=Object(external_kbnSharedDeps_React_["useMemo"])(()=>log_columns_configuration_form_state_objectSpread(log_columns_configuration_form_state_objectSpread({},initialFormState),formStateChanges),[initialFormState,formStateChanges]);const logColumnConfigurationProps=Object(external_kbnSharedDeps_React_["useMemo"])(()=>formState.logColumns.map(logColumn=>{const remove=()=>setFormStateChanges(changes=>log_columns_configuration_form_state_objectSpread(log_columns_configuration_form_state_objectSpread({},changes),{},{logColumns:formState.logColumns.filter(item=>item!==logColumn)}));if(Object(source_configuration["c"])(logColumn)){return{logColumnConfiguration:logColumn.timestampColumn,remove:remove,type:"timestamp"}}else if(Object(source_configuration["b"])(logColumn)){return{logColumnConfiguration:logColumn.messageColumn,remove:remove,type:"message"}}else{return{logColumnConfiguration:logColumn.fieldColumn,remove:remove,type:"field"}}}),[formState.logColumns]);const addLogColumn=Object(external_kbnSharedDeps_React_["useCallback"])(logColumnConfiguration=>setFormStateChanges(changes=>log_columns_configuration_form_state_objectSpread(log_columns_configuration_form_state_objectSpread({},changes),{},{logColumns:[...formState.logColumns,logColumnConfiguration]})),[formState.logColumns]);const moveLogColumn=Object(external_kbnSharedDeps_React_["useCallback"])((sourceIndex,destinationIndex)=>{if(destinationIndex>=0&&sourceIndex<=formState.logColumns.length-1){const newLogColumns=[...formState.logColumns];newLogColumns.splice(destinationIndex,0,newLogColumns.splice(sourceIndex,1)[0]);setFormStateChanges(changes=>log_columns_configuration_form_state_objectSpread(log_columns_configuration_form_state_objectSpread({},changes),{},{logColumns:newLogColumns}))}},[formState.logColumns]);const errors=Object(external_kbnSharedDeps_React_["useMemo"])(()=>logColumnConfigurationProps.length<=0?[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.logColumnListEmptyErrorMessage",defaultMessage:"The log column list must not be empty."})]:[],[logColumnConfigurationProps]);const isFormValid=Object(external_kbnSharedDeps_React_["useMemo"])(()=>errors.length<=0?true:false,[errors]);const isFormDirty=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object.keys(formStateChanges).length>0,[formStateChanges]);return{addLogColumn:addLogColumn,moveLogColumn:moveLogColumn,errors:errors,logColumnConfigurationProps:logColumnConfigurationProps,formState:formState,formStateChanges:formStateChanges,isFormDirty:isFormDirty,isFormValid:isFormValid,resetForm:resetForm}};const log_columns_configuration_form_state_defaultFormState={logColumns:[]};const useLogSourceConfigurationFormState=configuration=>{const indicesConfigurationFormState=useLogIndicesConfigurationFormState({initialFormState:Object(external_kbnSharedDeps_React_["useMemo"])(()=>configuration?{name:configuration.name,description:configuration.description,logAlias:configuration.logAlias,tiebreakerField:configuration.fields.tiebreaker,timestampField:configuration.fields.timestamp}:undefined,[configuration])});const logColumnsConfigurationFormState=useLogColumnsConfigurationFormState({initialFormState:Object(external_kbnSharedDeps_React_["useMemo"])(()=>configuration?{logColumns:configuration.logColumns}:undefined,[configuration])});const errors=Object(external_kbnSharedDeps_React_["useMemo"])(()=>[...indicesConfigurationFormState.errors,...logColumnsConfigurationFormState.errors],[indicesConfigurationFormState.errors,logColumnsConfigurationFormState.errors]);const resetForm=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{indicesConfigurationFormState.resetForm();logColumnsConfigurationFormState.resetForm()},[indicesConfigurationFormState,logColumnsConfigurationFormState]);const isFormDirty=Object(external_kbnSharedDeps_React_["useMemo"])(()=>indicesConfigurationFormState.isFormDirty||logColumnsConfigurationFormState.isFormDirty,[indicesConfigurationFormState.isFormDirty,logColumnsConfigurationFormState.isFormDirty]);const isFormValid=Object(external_kbnSharedDeps_React_["useMemo"])(()=>indicesConfigurationFormState.isFormValid&&logColumnsConfigurationFormState.isFormValid,[indicesConfigurationFormState.isFormValid,logColumnsConfigurationFormState.isFormValid]);const formState=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({name:indicesConfigurationFormState.formState.name,description:indicesConfigurationFormState.formState.description,logAlias:indicesConfigurationFormState.formState.logAlias,fields:{tiebreaker:indicesConfigurationFormState.formState.tiebreakerField,timestamp:indicesConfigurationFormState.formState.timestampField},logColumns:logColumnsConfigurationFormState.formState.logColumns}),[indicesConfigurationFormState.formState,logColumnsConfigurationFormState.formState]);const formStateChanges=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({name:indicesConfigurationFormState.formStateChanges.name,description:indicesConfigurationFormState.formStateChanges.description,logAlias:indicesConfigurationFormState.formStateChanges.logAlias,fields:{tiebreaker:indicesConfigurationFormState.formStateChanges.tiebreakerField,timestamp:indicesConfigurationFormState.formStateChanges.timestampField},logColumns:logColumnsConfigurationFormState.formStateChanges.logColumns}),[indicesConfigurationFormState.formStateChanges,logColumnsConfigurationFormState.formStateChanges]);return{addLogColumn:logColumnsConfigurationFormState.addLogColumn,moveLogColumn:logColumnsConfigurationFormState.moveLogColumn,errors:errors,formState:formState,formStateChanges:formStateChanges,isFormDirty:isFormDirty,isFormValid:isFormValid,indicesConfigurationProps:indicesConfigurationFormState.fieldProps,logColumnConfigurationProps:logColumnsConfigurationFormState.logColumnConfigurationProps,resetForm:resetForm}};var navigation_warning_prompt=__webpack_require__(30);function source_configuration_settings_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function source_configuration_settings_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){source_configuration_settings_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){source_configuration_settings_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const LogsSettingsPage=()=>{var _useKibana$services$a,_uiCapabilities$logs;const uiCapabilities=(_useKibana$services$a=Object(public_["useKibana"])().services.application)===null||_useKibana$services$a===void 0?void 0:_useKibana$services$a.capabilities;const shouldAllowEdit=(uiCapabilities===null||uiCapabilities===void 0?void 0:(_uiCapabilities$logs=uiCapabilities.logs)===null||_uiCapabilities$logs===void 0?void 0:_uiCapabilities$logs.configureSource)===true;const _useLogSourceContext=Object(log_source["c"])(),source=_useLogSourceContext.sourceConfiguration,sourceStatus=_useLogSourceContext.sourceStatus,isLoading=_useLogSourceContext.isLoading,isUninitialized=_useLogSourceContext.isUninitialized,updateSourceConfiguration=_useLogSourceContext.updateSourceConfiguration;const availableFields=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{var _sourceStatus$logInde;return(_sourceStatus$logInde=sourceStatus===null||sourceStatus===void 0?void 0:sourceStatus.logIndexFields.map(field=>field.name))!==null&&_sourceStatus$logInde!==void 0?_sourceStatus$logInde:[]},[sourceStatus]);const _useLogSourceConfigur=useLogSourceConfigurationFormState(source===null||source===void 0?void 0:source.configuration),addLogColumn=_useLogSourceConfigur.addLogColumn,moveLogColumn=_useLogSourceConfigur.moveLogColumn,indicesConfigurationProps=_useLogSourceConfigur.indicesConfigurationProps,logColumnConfigurationProps=_useLogSourceConfigur.logColumnConfigurationProps,errors=_useLogSourceConfigur.errors,resetForm=_useLogSourceConfigur.resetForm,isFormDirty=_useLogSourceConfigur.isFormDirty,isFormValid=_useLogSourceConfigur.isFormValid,formStateChanges=_useLogSourceConfigur.formStateChanges;const persistUpdates=Object(external_kbnSharedDeps_React_["useCallback"])(source_configuration_settings_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return updateSourceConfiguration(formStateChanges);case 2:resetForm();case 3:case"end":return _context.stop()}}),_callee)}))),[updateSourceConfiguration,resetForm,formStateChanges]);const isWriteable=Object(external_kbnSharedDeps_React_["useMemo"])(()=>shouldAllowEdit&&source&&source.origin!=="internal",[shouldAllowEdit,source]);if((isLoading||isUninitialized)&&!source){return external_kbnSharedDeps_React_default.a.createElement(source_loading_page["a"],null)}if(!(source===null||source===void 0?void 0:source.configuration)){return null}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiErrorBoundary"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPage"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],{className:"eui-displayBlock",restrictWidth:true,"data-test-subj":"sourceConfigurationContent"},external_kbnSharedDeps_React_default.a.createElement(navigation_warning_prompt["b"],{prompt:isFormDirty?unsavedFormPromptMessage:undefined}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(name_configuration_panel["a"],{isLoading:isLoading,nameFieldProps:indicesConfigurationProps.name,readOnly:!isWriteable})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(IndicesConfigurationPanel,{isLoading:isLoading,logAliasFieldProps:indicesConfigurationProps.logAlias,readOnly:!isWriteable})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(FieldsConfigurationPanel,{isLoading:isLoading,readOnly:!isWriteable,tiebreakerFieldProps:indicesConfigurationProps.tiebreakerField,timestampFieldProps:indicesConfigurationProps.timestampField})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(LogColumnsConfigurationPanel,{addLogColumn:addLogColumn,moveLogColumn:moveLogColumn,availableFields:availableFields,isLoading:isLoading,logColumnConfiguration:logColumnConfigurationProps})),errors.length>0?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger"},external_kbnSharedDeps_React_default.a.createElement("ul",null,errors.map((error,errorIndex)=>external_kbnSharedDeps_React_default.a.createElement("li",{key:errorIndex},error)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"})):null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,isWriteable&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,isLoading?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"primary",isLoading:true,fill:true},"Loading"))):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"discardSettingsButton",color:"danger",iconType:"cross",isDisabled:isLoading||!isFormDirty,onClick:()=>{resetForm()}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.discardSettingsButtonLabel",defaultMessage:"Discard"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"applySettingsButton",color:"primary",isDisabled:!isFormDirty||!isFormValid,fill:true,onClick:persistUpdates},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.sourceConfiguration.applySettingsButtonLabel",defaultMessage:"Apply"}))))))))))};const unsavedFormPromptMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logSourceConfiguration.unsavedFormPromptMessage",{defaultMessage:"Are you sure you want to leave? Changes will be lost"});var auto_sizer=__webpack_require__(111);var d3_scale=__webpack_require__(150);var d3_shape=__webpack_require__(395);function density_chart_templateObject2(){const data=density_chart_taggedTemplateLiteral(["\n  fill: ",";\n"]);density_chart_templateObject2=function _templateObject2(){return data};return data}function density_chart_templateObject(){const data=density_chart_taggedTemplateLiteral(["\n  fill: ",";\n"]);density_chart_templateObject=function _templateObject(){return data};return data}function density_chart_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const DensityChart=({buckets:buckets,start:start,end:end,width:width,height:height})=>{if(start>=end||height<=0||width<=0||buckets.length<=0){return null}const yScale=Object(d3_scale["scaleTime"])().domain([start,end]).range([0,height]);const xMax=Object(external_kbnSharedDeps_Lodash_["max"])(buckets.map(bucket=>bucket.entriesCount))||0;const xScale=Object(d3_scale["scaleLinear"])().domain([0,xMax]).range([0,width]);const path=Object(d3_shape["area"])().x0(xScale(0)).x1(bucket=>xScale(bucket.entriesCount)).y0(bucket=>yScale(bucket.start)).y1(bucket=>yScale(bucket.end)).curve(d3_shape["curveMonotoneY"]);const firstBucket=buckets[0];const lastBucket=buckets[buckets.length-1];const pathBuckets=[{start:start,end:start,entriesCount:firstBucket.entriesCount},...buckets,{start:lastBucket.end,end:lastBucket.end,entriesCount:lastBucket.entriesCount},{start:end,end:end,entriesCount:0}];const pathData=path(pathBuckets);return external_kbnSharedDeps_React_["createElement"]("g",null,external_kbnSharedDeps_React_["createElement"](DensityChartPositiveBackground,{width:width,height:height}),external_kbnSharedDeps_React_["createElement"](PositiveAreaPath,{d:pathData||""}))};const DensityChartPositiveBackground=observability_public_["euiStyled"].rect(density_chart_templateObject(),props=>props.theme.darkMode?props.theme.eui.euiColorLightShade:props.theme.eui.euiColorLightestShade);const PositiveAreaPath=observability_public_["euiStyled"].path(density_chart_templateObject2(),props=>props.theme.darkMode?props.theme.eui.euiColorMediumShade:props.theme.eui.euiColorLightShade);function highlighted_interval_templateObject2(){const data=highlighted_interval_taggedTemplateLiteral(["\n  fill: ",";\n  fill-opacity: 0.3;\n  stroke: ",";\n  stroke-width: 1;\n"]);highlighted_interval_templateObject2=function _templateObject2(){return data};return data}function highlighted_interval_templateObject(){const data=highlighted_interval_taggedTemplateLiteral(["\n  stroke: ",";\n  stroke-width: 1;\n"]);highlighted_interval_templateObject=function _templateObject(){return data};return data}function highlighted_interval_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const HighlightedInterval=({className:className,end:end,getPositionOfTime:getPositionOfTime,start:start,targetWidth:targetWidth,width:width,target:target})=>{const yStart=getPositionOfTime(start);const yEnd=getPositionOfTime(end);const yTarget=target&&getPositionOfTime(target);return external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_React_["Fragment"],null,yTarget&&external_kbnSharedDeps_React_["createElement"](HighlightTargetMarker,{className:className,x1:0,x2:targetWidth,y1:yTarget,y2:yTarget}),external_kbnSharedDeps_React_["createElement"](HighlightPolygon,{className:className,points:" ".concat(targetWidth,",").concat(yStart," ").concat(width,",").concat(yStart," ").concat(width,",").concat(yEnd,"  ").concat(targetWidth,",").concat(yEnd)}))};HighlightedInterval.displayName="HighlightedInterval";const HighlightTargetMarker=observability_public_["euiStyled"].line(highlighted_interval_templateObject(),props=>props.theme.eui.euiColorPrimary);const HighlightPolygon=observability_public_["euiStyled"].polygon(highlighted_interval_templateObject2(),props=>props.theme.eui.euiColorPrimary,props=>props.theme.eui.euiColorPrimary);var classnames=__webpack_require__(397);var classnames_default=__webpack_require__.n(classnames);const POPOVER_ARROW_SIZE=12;class search_marker_tooltip_SearchMarkerTooltip extends external_kbnSharedDeps_React_["PureComponent"]{render(){const _this$props=this.props,children=_this$props.children,markerPosition=_this$props.markerPosition;return external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiPortal"],null,external_kbnSharedDeps_React_["createElement"]("div",null,external_kbnSharedDeps_React_["createElement"](auto_sizer["a"],{content:false,bounds:true},({measureRef:measureRef,bounds:{width:width,height:height}})=>{const _ref=width&&height?Object(external_kbnSharedDeps_ElasticEui_["calculatePopoverPosition"])(markerPosition,{width:width,height:height},"left",16,["left"]):{left:-9999,top:0},top=_ref.top,left=_ref.left;return external_kbnSharedDeps_React_["createElement"]("div",{className:"euiToolTip euiToolTip--left euiToolTipPopover",style:{left:left,top:top},ref:measureRef},external_kbnSharedDeps_React_["createElement"]("div",{className:"euiToolTip__arrow",style:{left:width||0,top:(height||0)/2-POPOVER_ARROW_SIZE/2}}),external_kbnSharedDeps_React_["createElement"]("div",null,children))})))}}function _templateObject4(){const data=search_marker_taggedTemplateLiteral(["\n  fill: ",";\n"]);_templateObject4=function _templateObject4(){return data};return data}function search_marker_templateObject3(){const data=search_marker_taggedTemplateLiteral(["\n  fill: ",";\n  opacity: 0;\n  transition: opacity "," ease-in;\n  cursor: pointer;\n\n  ",":hover & {\n    opacity: 0.3;\n  }\n"]);search_marker_templateObject3=function _templateObject3(){return data};return data}function search_marker_templateObject2(){const data=search_marker_taggedTemplateLiteral(["\n  animation: "," "," ease-in both;\n"]);search_marker_templateObject2=function _templateObject2(){return data};return data}function search_marker_templateObject(){const data=search_marker_taggedTemplateLiteral(["\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n"]);search_marker_templateObject=function _templateObject(){return data};return data}function search_marker_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function search_marker_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class search_marker_SearchMarker extends external_kbnSharedDeps_React_["PureComponent"]{constructor(...args){super(...args);search_marker_defineProperty(this,"state",{hoveredPosition:null});search_marker_defineProperty(this,"handleClick",evt=>{evt.stopPropagation();this.props.jumpToTarget(this.props.bucket.representativeKey)});search_marker_defineProperty(this,"handleMouseEnter",evt=>{this.setState({hoveredPosition:evt.currentTarget.getBoundingClientRect()})});search_marker_defineProperty(this,"handleMouseLeave",()=>{this.setState({hoveredPosition:null})})}render(){const _this$props=this.props,bucket=_this$props.bucket,height=_this$props.height,width=_this$props.width;const hoveredPosition=this.state.hoveredPosition;const bulge=bucket.entriesCount>1?external_kbnSharedDeps_React_["createElement"](SearchMarkerForegroundRect,{x:"-2",y:"-2",width:"4",height:height+2,rx:"2",ry:"2"}):external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_["createElement"](SearchMarkerForegroundRect,{x:"-1",y:"0",width:"2",height:height}),external_kbnSharedDeps_React_["createElement"](SearchMarkerForegroundRect,{x:"-2",y:height/2-2,width:"4",height:"4",rx:"2",ry:"2"}));return external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_React_["Fragment"],null,hoveredPosition?external_kbnSharedDeps_React_["createElement"](search_marker_tooltip_SearchMarkerTooltip,{markerPosition:hoveredPosition},external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.searchResultTooltip",defaultMessage:"{bucketCount, plural, one {# highlighted entry} other {# highlighted entries}}",values:{bucketCount:bucket.entriesCount}})):null,external_kbnSharedDeps_React_["createElement"](SearchMarkerGroup,{onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},external_kbnSharedDeps_React_["createElement"](SearchMarkerBackgroundRect,{x:"0",y:"0",width:width,height:height}),bulge))}}const fadeInAnimation=Object(observability_public_["keyframes"])(search_marker_templateObject());const SearchMarkerGroup=observability_public_["euiStyled"].g(search_marker_templateObject2(),fadeInAnimation,props=>props.theme.eui.euiAnimSpeedExtraSlow);const SearchMarkerBackgroundRect=observability_public_["euiStyled"].rect(search_marker_templateObject3(),props=>props.theme.eui.euiColorAccent,props=>props.theme.eui.euiAnimSpeedNormal,SearchMarkerGroup);const SearchMarkerForegroundRect=observability_public_["euiStyled"].rect(_templateObject4(),props=>props.theme.eui.euiColorAccent);class search_markers_SearchMarkers extends external_kbnSharedDeps_React_["PureComponent"]{render(){const _this$props=this.props,buckets=_this$props.buckets,start=_this$props.start,end=_this$props.end,width=_this$props.width,height=_this$props.height,jumpToTarget=_this$props.jumpToTarget,className=_this$props.className;const classes=classnames_default()("minimapSearchMarkers",className);if(start>=end||height<=0||Object.keys(buckets).length<=0){return null}const yScale=Object(d3_scale["scaleTime"])().domain([start,end]).range([0,height]);return external_kbnSharedDeps_React_["createElement"]("g",{transform:"translate(".concat(width/2,", 0)"),className:classes},buckets.map(bucket=>external_kbnSharedDeps_React_["createElement"]("g",{key:"".concat(bucket.representativeKey.time,":").concat(bucket.representativeKey.tiebreaker),transform:"translate(0, ".concat(yScale(bucket.start),")")},external_kbnSharedDeps_React_["createElement"](search_marker_SearchMarker,{bucket:bucket,height:yScale(bucket.end)-yScale(bucket.start),width:width,jumpToTarget:jumpToTarget}))))}}function getTimeLabelFormat(start,end){const diff=Math.abs(end-start);if(diff<15*1e3){return":%S.%L"}if(diff<16*60*1e3){return"%I:%M:%S"}return}function time_ruler_templateObject2(){const data=time_ruler_taggedTemplateLiteral(["\n  stroke: ",";\n  stroke-opacity: 0.5;\n  stroke-width: 1px;\n"]);time_ruler_templateObject2=function _templateObject2(){return data};return data}function time_ruler_templateObject(){const data=time_ruler_taggedTemplateLiteral(["\n  font-size: 9px;\n  line-height: ",";\n  fill: ",";\n  user-select: none;\n  pointer-events: none;\n"]);time_ruler_templateObject=function _templateObject(){return data};return data}function time_ruler_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const TimeRuler=({end:end,height:height,start:start,tickCount:tickCount,width:width})=>{const yScale=Object(d3_scale["scaleTime"])().domain([start,end]).range([0,height]);const ticks=yScale.ticks(tickCount);const formatTick=yScale.tickFormat(tickCount,getTimeLabelFormat(start,end));return external_kbnSharedDeps_React_["createElement"]("g",null,ticks.map((tick,tickIndex)=>{const y=yScale(tick);return external_kbnSharedDeps_React_["createElement"]("g",{key:"tick".concat(tickIndex)},external_kbnSharedDeps_React_["createElement"](TimeRulerTickLabel,{x:0,y:y-4},formatTick(tick)),external_kbnSharedDeps_React_["createElement"](TimeRulerGridLine,{x1:0,y1:y,x2:width,y2:y}))}))};TimeRuler.displayName="TimeRuler";const TimeRulerTickLabel=observability_public_["euiStyled"].text(time_ruler_templateObject(),props=>props.theme.eui.euiLineHeight,props=>props.theme.eui.textColors.subdued);const TimeRulerGridLine=observability_public_["euiStyled"].line(time_ruler_templateObject2(),props=>props.theme.darkMode?props.theme.eui.euiColorDarkestShade:props.theme.eui.euiColorDarkShade);function log_minimap_templateObject3(){const data=log_minimap_taggedTemplateLiteral(["\n  cursor: pointer;\n  fill: ",";\n  & "," {\n    visibility: hidden;\n  }\n  &:hover "," {\n    visibility: visible;\n  }\n"]);log_minimap_templateObject3=function _templateObject3(){return data};return data}function log_minimap_templateObject2(){const data=log_minimap_taggedTemplateLiteral(["\n  pointer-events: none;\n  stroke-width: 1px;\n  stroke: ",";\n"]);log_minimap_templateObject2=function _templateObject2(){return data};return data}function log_minimap_templateObject(){const data=log_minimap_taggedTemplateLiteral(["\n  stroke: ",";\n  stroke-width: 1px;\n"]);log_minimap_templateObject=function _templateObject(){return data};return data}function log_minimap_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function log_minimap_slicedToArray(arr,i){return log_minimap_arrayWithHoles(arr)||log_minimap_iterableToArrayLimit(arr,i)||log_minimap_unsupportedIterableToArray(arr,i)||log_minimap_nonIterableRest()}function log_minimap_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_minimap_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_minimap_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_minimap_arrayLikeToArray(o,minLen)}function log_minimap_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_minimap_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_minimap_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function log_minimap_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const TIMERULER_WIDTH=50;function calculateYScale(start,end,height){return Object(d3_scale["scaleLinear"])().domain([start||0,end||0]).range([0,height])}class log_minimap_LogMinimap extends external_kbnSharedDeps_React_["Component"]{constructor(props){super(props);log_minimap_defineProperty(this,"handleClick",event=>{const minimapTop=event.currentTarget.getBoundingClientRect().top;const clickedYPosition=event.clientY-minimapTop;const clickedTime=Math.floor(this.getYScale().invert(clickedYPosition));this.props.jumpToTarget({tiebreaker:0,time:clickedTime})});log_minimap_defineProperty(this,"getYScale",()=>{const _this$props=this.props,start=_this$props.start,end=_this$props.end,height=_this$props.height;return calculateYScale(start,end,height)});log_minimap_defineProperty(this,"getPositionOfTime",time=>this.getYScale()(time));log_minimap_defineProperty(this,"updateTimeCursor",event=>{const svgPosition=event.currentTarget.getBoundingClientRect();const timeCursorY=event.clientY-svgPosition.top;this.setState({timeCursorY:timeCursorY})});this.state={timeCursorY:0,target:props.target}}render(){const _this$props2=this.props,start=_this$props2.start,end=_this$props2.end,className=_this$props2.className,height=_this$props2.height,highlightedInterval=_this$props2.highlightedInterval,jumpToTarget=_this$props2.jumpToTarget,summaryBuckets=_this$props2.summaryBuckets,summaryHighlightBuckets=_this$props2.summaryHighlightBuckets,width=_this$props2.width;const _this$state=this.state,timeCursorY=_this$state.timeCursorY,target=_this$state.target;const _calculateYScale$doma=calculateYScale(start,end,height).domain(),_calculateYScale$doma2=log_minimap_slicedToArray(_calculateYScale$doma,2),minTime=_calculateYScale$doma2[0],maxTime=_calculateYScale$doma2[1];const tickCount=height?Math.floor(height/50):12;return external_kbnSharedDeps_React_["createElement"](MinimapWrapper,{className:className,height:height,preserveAspectRatio:"none",viewBox:"0 0 ".concat(width," ").concat(height),width:width,onClick:this.handleClick,onMouseMove:this.updateTimeCursor},external_kbnSharedDeps_React_["createElement"](MinimapBorder,{x1:TIMERULER_WIDTH,x2:TIMERULER_WIDTH,y1:0,y2:height}),external_kbnSharedDeps_React_["createElement"](TimeRuler,{start:minTime,end:maxTime,width:TIMERULER_WIDTH,height:height,tickCount:tickCount}),external_kbnSharedDeps_React_["createElement"]("g",{transform:"translate(".concat(TIMERULER_WIDTH,", 0)")},external_kbnSharedDeps_React_["createElement"](DensityChart,{buckets:summaryBuckets,start:minTime,end:maxTime,width:width-TIMERULER_WIDTH,height:height}),external_kbnSharedDeps_React_["createElement"](search_markers_SearchMarkers,{buckets:summaryHighlightBuckets||[],start:minTime,end:maxTime,width:width-TIMERULER_WIDTH,height:height,jumpToTarget:jumpToTarget})),highlightedInterval?external_kbnSharedDeps_React_["createElement"](HighlightedInterval,{end:highlightedInterval.end,getPositionOfTime:this.getPositionOfTime,start:highlightedInterval.start,targetWidth:TIMERULER_WIDTH,width:width,target:target}):null,external_kbnSharedDeps_React_["createElement"](TimeCursor,{x1:TIMERULER_WIDTH,x2:width,y1:timeCursorY,y2:timeCursorY}))}}const MinimapBorder=observability_public_["euiStyled"].line(log_minimap_templateObject(),props=>props.theme.eui.euiColorMediumShade);const TimeCursor=observability_public_["euiStyled"].line(log_minimap_templateObject2(),props=>props.theme.darkMode?props.theme.eui.euiColorDarkestShade:props.theme.eui.euiColorDarkShade);const MinimapWrapper=observability_public_["euiStyled"].svg(log_minimap_templateObject3(),props=>props.theme.eui.euiColorEmptyShade,TimeCursor,TimeCursor);var log_filter=__webpack_require__(127);var useThrottle=__webpack_require__(252);var useThrottle_default=__webpack_require__.n(useThrottle);function fetch_log_entries_highlights_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function fetch_log_entries_highlights_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){fetch_log_entries_highlights_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){fetch_log_entries_highlights_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const fetchLogEntriesHighlights=function(){var _ref=fetch_log_entries_highlights_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(http_api["e"],{method:"POST",body:JSON.stringify(http_api["o"].encode(requestArgs))});case 2:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api["p"])(response));case 4:case"end":return _context.stop()}}),_callee)})));return function fetchLogEntriesHighlights(_x,_x2){return _ref.apply(this,arguments)}}();function log_entry_highlights_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function log_entry_highlights_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){log_entry_highlights_ownKeys(Object(source),true).forEach((function(key){log_entry_highlights_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{log_entry_highlights_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function log_entry_highlights_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function log_entry_highlights_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function log_entry_highlights_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){log_entry_highlights_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){log_entry_highlights_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function log_entry_highlights_slicedToArray(arr,i){return log_entry_highlights_arrayWithHoles(arr)||log_entry_highlights_iterableToArrayLimit(arr,i)||log_entry_highlights_unsupportedIterableToArray(arr,i)||log_entry_highlights_nonIterableRest()}function log_entry_highlights_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_entry_highlights_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_entry_highlights_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_entry_highlights_arrayLikeToArray(o,minLen)}function log_entry_highlights_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_entry_highlights_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_entry_highlights_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogEntryHighlights=(sourceId,sourceVersion,startTimestamp,endTimestamp,centerPoint,size,filterQuery,highlightTerms)=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=log_entry_highlights_slicedToArray(_useState,2),logEntryHighlights=_useState2[0],setLogEntryHighlights=_useState2[1];const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"resolution",createPromise:function(){var _createPromise=log_entry_highlights_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(!startTimestamp||!endTimestamp||!centerPoint||!highlightTerms.length)){_context.next=2;break}throw new Error("Skipping request: Insufficient parameters");case 2:_context.next=4;return fetchLogEntriesHighlights({sourceId:sourceId,startTimestamp:startTimestamp,endTimestamp:endTimestamp,center:centerPoint,size:size,query:filterQuery||undefined,highlightTerms:highlightTerms},services.http.fetch);case 4:return _context.abrupt("return",_context.sent);case 5:case"end":return _context.stop()}}),_callee)})));function createPromise(){return _createPromise.apply(this,arguments)}return createPromise}(),onResolve:response=>{setLogEntryHighlights(response.data)}},[sourceId,startTimestamp,endTimestamp,centerPoint,size,filterQuery,highlightTerms]),_useTrackedPromise2=log_entry_highlights_slicedToArray(_useTrackedPromise,2),loadLogEntryHighlightsRequest=_useTrackedPromise2[0],loadLogEntryHighlights=_useTrackedPromise2[1];Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setLogEntryHighlights([])},[highlightTerms]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(highlightTerms.filter(highlightTerm=>highlightTerm.length>0).length&&startTimestamp&&endTimestamp){loadLogEntryHighlights()}else{setLogEntryHighlights([])}},[endTimestamp,filterQuery,highlightTerms,loadLogEntryHighlights,sourceVersion,startTimestamp]);const logEntryHighlightsById=Object(external_kbnSharedDeps_React_["useMemo"])(()=>logEntryHighlights.reduce((accumulatedLogEntryHighlightsById,highlightData)=>highlightData.entries.reduce((singleHighlightLogEntriesById,entry)=>{const highlightsForId=singleHighlightLogEntriesById[entry.id]||[];return log_entry_highlights_objectSpread(log_entry_highlights_objectSpread({},singleHighlightLogEntriesById),{},{[entry.id]:[...highlightsForId,entry]})},accumulatedLogEntryHighlightsById),{}),[logEntryHighlights]);return{logEntryHighlights:logEntryHighlights,logEntryHighlightsById:logEntryHighlightsById,loadLogEntryHighlightsRequest:loadLogEntryHighlightsRequest}};function fetch_log_summary_highlights_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function fetch_log_summary_highlights_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){fetch_log_summary_highlights_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){fetch_log_summary_highlights_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const fetchLogSummaryHighlights=function(){var _ref=fetch_log_summary_highlights_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(http_api["h"],{method:"POST",body:JSON.stringify(http_api["u"].encode(requestArgs))});case 2:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api["v"])(response));case 4:case"end":return _context.stop()}}),_callee)})));return function fetchLogSummaryHighlights(_x,_x2){return _ref.apply(this,arguments)}}();const SUMMARY_BUCKET_COUNT=100;function useBucketSize(startTimestamp,endTimestamp){const bucketSize=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{if(!startTimestamp||!endTimestamp){return null}return(endTimestamp-startTimestamp)/SUMMARY_BUCKET_COUNT},[startTimestamp,endTimestamp]);return bucketSize}function log_summary_highlights_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function log_summary_highlights_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){log_summary_highlights_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){log_summary_highlights_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function log_summary_highlights_slicedToArray(arr,i){return log_summary_highlights_arrayWithHoles(arr)||log_summary_highlights_iterableToArrayLimit(arr,i)||log_summary_highlights_unsupportedIterableToArray(arr,i)||log_summary_highlights_nonIterableRest()}function log_summary_highlights_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_summary_highlights_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_summary_highlights_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_summary_highlights_arrayLikeToArray(o,minLen)}function log_summary_highlights_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_summary_highlights_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_summary_highlights_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogSummaryHighlights=(sourceId,sourceVersion,startTimestamp,endTimestamp,filterQuery,highlightTerms)=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=log_summary_highlights_slicedToArray(_useState,2),logSummaryHighlights=_useState2[0],setLogSummaryHighlights=_useState2[1];const bucketSize=useBucketSize(startTimestamp,endTimestamp);const _useTrackedPromise=Object(use_tracked_promise["b"])({cancelPreviousOn:"resolution",createPromise:function(){var _createPromise=log_summary_highlights_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(!startTimestamp||!endTimestamp||!bucketSize||!highlightTerms.length)){_context.next=2;break}throw new Error("Skipping request: Insufficient parameters");case 2:_context.next=4;return fetchLogSummaryHighlights({sourceId:sourceId,startTimestamp:startTimestamp,endTimestamp:endTimestamp,bucketSize:bucketSize,query:filterQuery,highlightTerms:highlightTerms},services.http.fetch);case 4:return _context.abrupt("return",_context.sent);case 5:case"end":return _context.stop()}}),_callee)})));function createPromise(){return _createPromise.apply(this,arguments)}return createPromise}(),onResolve:response=>{setLogSummaryHighlights(response.data)}},[sourceId,startTimestamp,endTimestamp,bucketSize,filterQuery,highlightTerms]),_useTrackedPromise2=log_summary_highlights_slicedToArray(_useTrackedPromise,2),loadLogSummaryHighlightsRequest=_useTrackedPromise2[0],loadLogSummaryHighlights=_useTrackedPromise2[1];const debouncedLoadSummaryHighlights=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object(external_kbnSharedDeps_Lodash_["debounce"])(loadLogSummaryHighlights,275),[loadLogSummaryHighlights]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setLogSummaryHighlights([])},[highlightTerms]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(highlightTerms.filter(highlightTerm=>highlightTerm.length>0).length&&startTimestamp&&endTimestamp){debouncedLoadSummaryHighlights()}else{setLogSummaryHighlights([])}},[bucketSize,debouncedLoadSummaryHighlights,filterQuery,highlightTerms,sourceVersion,startTimestamp,endTimestamp]);return{logSummaryHighlights:logSummaryHighlights,loadLogSummaryHighlightsRequest:loadLogSummaryHighlightsRequest}};var log_entry=__webpack_require__(167);function next_and_previous_slicedToArray(arr,i){return next_and_previous_arrayWithHoles(arr)||next_and_previous_iterableToArrayLimit(arr,i)||next_and_previous_unsupportedIterableToArray(arr,i)||next_and_previous_nonIterableRest()}function next_and_previous_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function next_and_previous_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return next_and_previous_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return next_and_previous_arrayLikeToArray(o,minLen)}function next_and_previous_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function next_and_previous_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function next_and_previous_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useNextAndPrevious=({highlightTerms:highlightTerms,jumpToTargetPosition:jumpToTargetPosition,logEntryHighlights:logEntryHighlights,visibleMidpoint:visibleMidpoint})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=next_and_previous_slicedToArray(_useState,2),currentTimeKey=_useState2[0],setCurrentTimeKey=_useState2[1];const entries=Object(external_kbnSharedDeps_React_["useMemo"])(()=>logEntryHighlights&&logEntryHighlights.length>0?logEntryHighlights[0].entries:[],[logEntryHighlights]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{setCurrentTimeKey(null)},[highlightTerms]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(currentTimeKey){jumpToTargetPosition(currentTimeKey)}},[currentTimeKey,jumpToTargetPosition]);Object(external_kbnSharedDeps_React_["useEffect"])(()=>{if(currentTimeKey===null&&entries.length>0){const initialIndex=visibleMidpoint?clampValue(Object(log_entry["b"])(entries,visibleMidpoint),0,entries.length-1):0;const initialTimeKey=Object(log_entry["c"])(entries[initialIndex]);setCurrentTimeKey(initialTimeKey)}},[currentTimeKey,entries,setCurrentTimeKey,visibleMidpoint]);const indexOfCurrentTimeKey=Object(external_kbnSharedDeps_React_["useMemo"])(()=>{if(currentTimeKey&&entries.length>0){return Object(log_entry["a"])(entries,currentTimeKey)}else{return null}},[currentTimeKey,entries]);const hasPreviousHighlight=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object(external_kbnSharedDeps_Lodash_["isNumber"])(indexOfCurrentTimeKey)&&indexOfCurrentTimeKey>0,[indexOfCurrentTimeKey]);const hasNextHighlight=Object(external_kbnSharedDeps_React_["useMemo"])(()=>entries.length>0&&Object(external_kbnSharedDeps_Lodash_["isNumber"])(indexOfCurrentTimeKey)&&indexOfCurrentTimeKey<entries.length-1,[indexOfCurrentTimeKey,entries]);const goToPreviousHighlight=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{if(entries.length&&Object(external_kbnSharedDeps_Lodash_["isNumber"])(indexOfCurrentTimeKey)){const previousIndex=indexOfCurrentTimeKey-1;const entryTimeKey=Object(log_entry["c"])(entries[previousIndex]);setCurrentTimeKey(entryTimeKey)}},[indexOfCurrentTimeKey,entries]);const goToNextHighlight=Object(external_kbnSharedDeps_React_["useCallback"])(()=>{if(entries.length>0&&Object(external_kbnSharedDeps_Lodash_["isNumber"])(indexOfCurrentTimeKey)){const nextIndex=indexOfCurrentTimeKey+1;const entryTimeKey=Object(log_entry["c"])(entries[nextIndex]);setCurrentTimeKey(entryTimeKey)}},[indexOfCurrentTimeKey,entries]);return{currentHighlightKey:currentTimeKey,hasPreviousHighlight:hasPreviousHighlight,hasNextHighlight:hasNextHighlight,goToPreviousHighlight:goToPreviousHighlight,goToNextHighlight:goToNextHighlight}};const clampValue=(value,minValue,maxValue)=>Math.min(Math.max(value,minValue),maxValue);var log_position=__webpack_require__(105);function log_highlights_slicedToArray(arr,i){return log_highlights_arrayWithHoles(arr)||log_highlights_iterableToArrayLimit(arr,i)||log_highlights_unsupportedIterableToArray(arr,i)||log_highlights_nonIterableRest()}function log_highlights_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_highlights_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_highlights_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_highlights_arrayLikeToArray(o,minLen)}function log_highlights_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_highlights_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_highlights_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const FETCH_THROTTLE_INTERVAL=3e3;const useLogHighlightsState=({sourceId:sourceId,sourceVersion:sourceVersion,centerCursor:centerCursor,size:size,filterQuery:filterQuery})=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=log_highlights_slicedToArray(_useState,2),highlightTerms=_useState2[0],setHighlightTerms=_useState2[1];const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(log_position["a"].Context),visibleMidpoint=_useContext.visibleMidpoint,jumpToTargetPosition=_useContext.jumpToTargetPosition,startTimestamp=_useContext.startTimestamp,endTimestamp=_useContext.endTimestamp;const throttledStartTimestamp=useThrottle_default()(startTimestamp,FETCH_THROTTLE_INTERVAL);const throttledEndTimestamp=useThrottle_default()(endTimestamp,FETCH_THROTTLE_INTERVAL);const _useLogEntryHighlight=useLogEntryHighlights(sourceId,sourceVersion,throttledStartTimestamp,throttledEndTimestamp,centerCursor,size,filterQuery,highlightTerms),logEntryHighlights=_useLogEntryHighlight.logEntryHighlights,logEntryHighlightsById=_useLogEntryHighlight.logEntryHighlightsById,loadLogEntryHighlightsRequest=_useLogEntryHighlight.loadLogEntryHighlightsRequest;const _useLogSummaryHighlig=useLogSummaryHighlights(sourceId,sourceVersion,throttledStartTimestamp,throttledEndTimestamp,filterQuery,highlightTerms),logSummaryHighlights=_useLogSummaryHighlig.logSummaryHighlights,loadLogSummaryHighlightsRequest=_useLogSummaryHighlig.loadLogSummaryHighlightsRequest;const _useNextAndPrevious=useNextAndPrevious({visibleMidpoint:visibleMidpoint,logEntryHighlights:logEntryHighlights,highlightTerms:highlightTerms,jumpToTargetPosition:jumpToTargetPosition}),currentHighlightKey=_useNextAndPrevious.currentHighlightKey,hasPreviousHighlight=_useNextAndPrevious.hasPreviousHighlight,hasNextHighlight=_useNextAndPrevious.hasNextHighlight,goToPreviousHighlight=_useNextAndPrevious.goToPreviousHighlight,goToNextHighlight=_useNextAndPrevious.goToNextHighlight;return{highlightTerms:highlightTerms,setHighlightTerms:setHighlightTerms,logEntryHighlights:logEntryHighlights,logEntryHighlightsById:logEntryHighlightsById,logSummaryHighlights:logSummaryHighlights,loadLogEntryHighlightsRequest:loadLogEntryHighlightsRequest,loadLogSummaryHighlightsRequest:loadLogSummaryHighlightsRequest,currentHighlightKey:currentHighlightKey,hasPreviousHighlight:hasPreviousHighlight,hasNextHighlight:hasNextHighlight,goToPreviousHighlight:goToPreviousHighlight,goToNextHighlight:goToNextHighlight}};const LogHighlightsState=constate_cjs_default()(useLogHighlightsState);const createCancellationSignal=()=>{const cancellationSignal={isCancelled:false,cancel:()=>{cancellationSignal.isCancelled=true}};return cancellationSignal};const useCancellableEffect=(effect,deps)=>{Object(external_kbnSharedDeps_React_["useEffect"])(()=>{const cancellationSignal=createCancellationSignal();effect(()=>cancellationSignal.isCancelled);return cancellationSignal.cancel},deps)};function fetch_log_summary_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function fetch_log_summary_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){fetch_log_summary_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){fetch_log_summary_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const fetchLogSummary=function(){var _ref=fetch_log_summary_asyncToGenerator(regeneratorRuntime.mark((function _callee(requestArgs,fetch){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(http_api["i"],{method:"POST",body:JSON.stringify(http_api["w"].encode(requestArgs))});case 2:response=_context.sent;return _context.abrupt("return",Object(runtime_types["b"])(http_api["x"])(response));case 4:case"end":return _context.stop()}}),_callee)})));return function fetchLogSummary(_x,_x2){return _ref.apply(this,arguments)}}();function log_summary_slicedToArray(arr,i){return log_summary_arrayWithHoles(arr)||log_summary_iterableToArrayLimit(arr,i)||log_summary_unsupportedIterableToArray(arr,i)||log_summary_nonIterableRest()}function log_summary_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_summary_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_summary_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_summary_arrayLikeToArray(o,minLen)}function log_summary_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_summary_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_summary_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogSummary=(sourceId,startTimestamp,endTimestamp,filterQuery)=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=log_summary_slicedToArray(_useState,2),logSummaryBuckets=_useState2[0],setLogSummaryBuckets=_useState2[1];const bucketSize=useBucketSize(startTimestamp,endTimestamp);useCancellableEffect(getIsCancelled=>{if(startTimestamp===null||endTimestamp===null||bucketSize===null){return}fetchLogSummary({sourceId:sourceId,startTimestamp:startTimestamp,endTimestamp:endTimestamp,bucketSize:bucketSize,query:filterQuery},services.http.fetch).then(response=>{if(!getIsCancelled()){setLogSummaryBuckets(response.data.buckets)}})},[sourceId,filterQuery,startTimestamp,endTimestamp,bucketSize]);return{buckets:logSummaryBuckets,start:startTimestamp,end:endTimestamp}};const with_summary_FETCH_THROTTLE_INTERVAL=3e3;const WithSummary=({children:children})=>{const _useLogSourceContext=Object(log_source["c"])(),sourceId=_useLogSourceContext.sourceId;const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(log_filter["a"].Context),filterQuery=_useContext.filterQuery;const _useContext2=Object(external_kbnSharedDeps_React_["useContext"])(log_position["a"].Context),startTimestamp=_useContext2.startTimestamp,endTimestamp=_useContext2.endTimestamp;const throttledStartTimestamp=useThrottle_default()(startTimestamp,with_summary_FETCH_THROTTLE_INTERVAL);const throttledEndTimestamp=useThrottle_default()(endTimestamp,with_summary_FETCH_THROTTLE_INTERVAL);const _useLogSummary=useLogSummary(sourceId,throttledStartTimestamp,throttledEndTimestamp,filterQuery),buckets=_useLogSummary.buckets,start=_useLogSummary.start,end=_useLogSummary.end;return children({buckets:buckets,start:start,end:end})};function log_view_configuration_slicedToArray(arr,i){return log_view_configuration_arrayWithHoles(arr)||log_view_configuration_iterableToArrayLimit(arr,i)||log_view_configuration_unsupportedIterableToArray(arr,i)||log_view_configuration_nonIterableRest()}function log_view_configuration_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_view_configuration_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_view_configuration_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_view_configuration_arrayLikeToArray(o,minLen)}function log_view_configuration_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_view_configuration_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_view_configuration_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useLogViewConfiguration=()=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])("medium"),_useState2=log_view_configuration_slicedToArray(_useState,2),textScale=_useState2[0],setTextScale=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(true),_useState4=log_view_configuration_slicedToArray(_useState3,2),textWrap=_useState4[0],setTextWrap=_useState4[1];return{availableTextScales:log_view_configuration_availableTextScales,setTextScale:setTextScale,setTextWrap:setTextWrap,textScale:textScale,textWrap:textWrap}};const LogViewConfiguration=constate_cjs_default()(useLogViewConfiguration);const log_view_configuration_availableTextScales=["large","medium","small"];const WithLogTextviewUrlState=()=>{const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(LogViewConfiguration.Context),textScale=_useContext.textScale,textWrap=_useContext.textWrap,setTextScale=_useContext.setTextScale,setTextWrap=_useContext.setTextWrap;const urlState=Object(external_kbnSharedDeps_React_["useMemo"])(()=>({textScale:textScale,wrap:textWrap}),[textScale,textWrap]);return external_kbnSharedDeps_React_default.a.createElement(url_state["a"],{urlState:urlState,urlStateKey:"logTextview",mapToUrlState:with_log_textview_mapToUrlState,onChange:newUrlState=>{if(newUrlState&&newUrlState.textScale){setTextScale(newUrlState.textScale)}if(newUrlState&&typeof newUrlState.wrap!=="undefined"){setTextWrap(newUrlState.wrap)}},onInitialize:newUrlState=>{if(newUrlState&&newUrlState.textScale){setTextScale(newUrlState.textScale)}if(newUrlState&&typeof newUrlState.wrap!=="undefined"){setTextWrap(newUrlState.wrap)}}})};const with_log_textview_mapToUrlState=value=>value?{textScale:mapToTextScaleUrlState(value.textScale),wrap:mapToWrapUrlState(value.wrap)}:undefined;const mapToTextScaleUrlState=value=>log_view_configuration_availableTextScales.includes(value)?value:undefined;const mapToWrapUrlState=value=>typeof value==="boolean"?value:undefined;var useMountedState=__webpack_require__(116);var useMountedState_default=__webpack_require__.n(useMountedState);var time=__webpack_require__(165);var fetch_log_entries=__webpack_require__(244);function log_entries_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function log_entries_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){log_entries_ownKeys(Object(source),true).forEach((function(key){log_entries_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{log_entries_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function log_entries_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function log_entries_slicedToArray(arr,i){return log_entries_arrayWithHoles(arr)||log_entries_iterableToArrayLimit(arr,i)||log_entries_unsupportedIterableToArray(arr,i)||log_entries_nonIterableRest()}function log_entries_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_entries_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_entries_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_entries_arrayLikeToArray(o,minLen)}function log_entries_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_entries_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_entries_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function log_entries_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function log_entries_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){log_entries_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){log_entries_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const DESIRED_BUFFER_PAGES=2;const LIVE_STREAM_INTERVAL=5e3;var Action;(function(Action){Action[Action["FetchingNewEntries"]=0]="FetchingNewEntries";Action[Action["FetchingMoreEntries"]=1]="FetchingMoreEntries";Action[Action["ReceiveNewEntries"]=2]="ReceiveNewEntries";Action[Action["ReceiveEntriesBefore"]=3]="ReceiveEntriesBefore";Action[Action["ReceiveEntriesAfter"]=4]="ReceiveEntriesAfter";Action[Action["ErrorOnNewEntries"]=5]="ErrorOnNewEntries";Action[Action["ErrorOnMoreEntries"]=6]="ErrorOnMoreEntries";Action[Action["ExpandRange"]=7]="ExpandRange"})(Action||(Action={}));const logEntriesInitialCallbacks={fetchNewerEntries:function(){var _fetchNewerEntries=log_entries_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:case"end":return _context.stop()}}),_callee)})));function fetchNewerEntries(){return _fetchNewerEntries.apply(this,arguments)}return fetchNewerEntries}()};const logEntriesInitialState={entries:[],topCursor:null,bottomCursor:null,centerCursor:null,isReloading:true,isLoadingMore:false,lastLoadedTime:null,hasMoreBeforeStart:false,hasMoreAfterEnd:false};const cleanDuplicateItems=(entriesA,entriesB)=>{const ids=new Set(entriesB.map(item=>item.id));return entriesA.filter(item=>!ids.has(item.id))};const shouldFetchNewEntries=({prevParams:prevParams,timeKey:timeKey,filterQuery:filterQuery,topCursor:topCursor,bottomCursor:bottomCursor,startTimestamp:startTimestamp,endTimestamp:endTimestamp})=>{const shouldLoadWithNewDates=prevParams?startTimestamp!==prevParams.startTimestamp&&startTimestamp>prevParams.startTimestamp||endTimestamp!==prevParams.endTimestamp&&endTimestamp<prevParams.endTimestamp:true;const shouldLoadWithNewFilter=prevParams?filterQuery!==prevParams.filterQuery:true;const shouldLoadAroundNewPosition=timeKey&&(!topCursor||!bottomCursor||!Object(time["d"])(topCursor,bottomCursor,timeKey));return shouldLoadWithNewDates||shouldLoadWithNewFilter||shouldLoadAroundNewPosition};var ShouldFetchMoreEntries;(function(ShouldFetchMoreEntries){ShouldFetchMoreEntries[ShouldFetchMoreEntries["Before"]=0]="Before";ShouldFetchMoreEntries[ShouldFetchMoreEntries["After"]=1]="After"})(ShouldFetchMoreEntries||(ShouldFetchMoreEntries={}));const shouldFetchMoreEntries=({pagesAfterEnd:pagesAfterEnd,pagesBeforeStart:pagesBeforeStart},{hasMoreBeforeStart:hasMoreBeforeStart,hasMoreAfterEnd:hasMoreAfterEnd})=>{if(pagesBeforeStart===null||pagesAfterEnd===null)return false;if(pagesBeforeStart<DESIRED_BUFFER_PAGES&&hasMoreBeforeStart)return ShouldFetchMoreEntries.Before;if(pagesAfterEnd<DESIRED_BUFFER_PAGES&&hasMoreAfterEnd)return ShouldFetchMoreEntries.After;return false};const useFetchEntriesEffect=(state,dispatch,props)=>{const _useKibanaContextForP=Object(use_kibana["b"])(),services=_useKibanaContextForP.services;const isMounted=useMountedState_default()();const _useState=Object(external_kbnSharedDeps_React_["useState"])(),_useState2=log_entries_slicedToArray(_useState,2),prevParams=_useState2[0],cachePrevParams=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=log_entries_slicedToArray(_useState3,2),startedStreaming=_useState4[0],setStartedStreaming=_useState4[1];const dispatchIfMounted=Object(external_kbnSharedDeps_React_["useCallback"])(action=>isMounted()?dispatch(action):undefined,[dispatch,isMounted]);const runFetchNewEntriesRequest=function(){var _ref=log_entries_asyncToGenerator(regeneratorRuntime.mark((function _callee2(overrides={}){var commonFetchArgs,fetchArgs,_yield$fetchLogEntrie,payload;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(!props.startTimestamp||!props.endTimestamp)){_context2.next=2;break}return _context2.abrupt("return");case 2:dispatchIfMounted({type:Action.FetchingNewEntries});_context2.prev=3;commonFetchArgs={sourceId:overrides.sourceId||props.sourceId,startTimestamp:overrides.startTimestamp||props.startTimestamp,endTimestamp:overrides.endTimestamp||props.endTimestamp,query:overrides.filterQuery||props.filterQuery};fetchArgs=props.timeKey?log_entries_objectSpread(log_entries_objectSpread({},commonFetchArgs),{},{center:props.timeKey}):log_entries_objectSpread(log_entries_objectSpread({},commonFetchArgs),{},{before:"last"});_context2.next=8;return Object(fetch_log_entries["a"])(fetchArgs,services.http.fetch);case 8:_yield$fetchLogEntrie=_context2.sent;payload=_yield$fetchLogEntrie.data;dispatchIfMounted({type:Action.ReceiveNewEntries,payload:payload});if(!props.timeKey&&payload.bottomCursor){setTimeout(()=>{if(isMounted()){props.jumpToTargetPosition(payload.bottomCursor)}})}else if(props.timeKey&&payload.topCursor&&payload.bottomCursor&&!Object(time["d"])(payload.topCursor,payload.bottomCursor,props.timeKey)){props.jumpToTargetPosition(payload.topCursor)}_context2.next=17;break;case 14:_context2.prev=14;_context2.t0=_context2["catch"](3);dispatchIfMounted({type:Action.ErrorOnNewEntries});case 17:case"end":return _context2.stop()}}),_callee2,null,[[3,14]])})));return function runFetchNewEntriesRequest(){return _ref.apply(this,arguments)}}();const runFetchMoreEntriesRequest=function(){var _ref2=log_entries_asyncToGenerator(regeneratorRuntime.mark((function _callee3(direction,overrides={}){var getEntriesBefore,commonFetchArgs,fetchArgs,_yield$fetchLogEntrie2,payload;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!(!props.startTimestamp||!props.endTimestamp)){_context3.next=2;break}return _context3.abrupt("return");case 2:getEntriesBefore=direction===ShouldFetchMoreEntries.Before;if(!(getEntriesBefore&&!state.topCursor||!state.bottomCursor)){_context3.next=5;break}return _context3.abrupt("return");case 5:dispatchIfMounted({type:Action.FetchingMoreEntries});_context3.prev=6;commonFetchArgs={sourceId:overrides.sourceId||props.sourceId,startTimestamp:overrides.startTimestamp||props.startTimestamp,endTimestamp:overrides.endTimestamp||props.endTimestamp,query:overrides.filterQuery||props.filterQuery};fetchArgs=getEntriesBefore?log_entries_objectSpread(log_entries_objectSpread({},commonFetchArgs),{},{before:state.topCursor}):log_entries_objectSpread(log_entries_objectSpread({},commonFetchArgs),{},{after:state.bottomCursor});_context3.next=11;return Object(fetch_log_entries["a"])(fetchArgs,services.http.fetch);case 11:_yield$fetchLogEntrie2=_context3.sent;payload=_yield$fetchLogEntrie2.data;dispatchIfMounted({type:getEntriesBefore?Action.ReceiveEntriesBefore:Action.ReceiveEntriesAfter,payload:payload});return _context3.abrupt("return",payload.bottomCursor);case 17:_context3.prev=17;_context3.t0=_context3["catch"](6);dispatchIfMounted({type:Action.ErrorOnMoreEntries});case 20:case"end":return _context3.stop()}}),_callee3,null,[[6,17]])})));return function runFetchMoreEntriesRequest(_x){return _ref2.apply(this,arguments)}}();const fetchNewEntriesEffectDependencies=Object.values(Object(external_kbnSharedDeps_Lodash_["pick"])(props,["sourceId","filterQuery","timeKey","startTimestamp","endTimestamp"]));const fetchNewEntriesEffect=()=>{if(props.isStreaming&&prevParams)return;if(shouldFetchNewEntries(log_entries_objectSpread(log_entries_objectSpread(log_entries_objectSpread({},props),state),{},{prevParams:prevParams}))){runFetchNewEntriesRequest()}cachePrevParams(props)};const fetchMoreEntriesEffectDependencies=[...Object.values(Object(external_kbnSharedDeps_Lodash_["pick"])(props,["pagesAfterEnd","pagesBeforeStart"])),Object.values(Object(external_kbnSharedDeps_Lodash_["pick"])(state,["hasMoreBeforeStart","hasMoreAfterEnd"]))];const fetchMoreEntriesEffect=()=>{if(state.isLoadingMore||props.isStreaming)return;const direction=shouldFetchMoreEntries(props,state);switch(direction){case ShouldFetchMoreEntries.Before:case ShouldFetchMoreEntries.After:runFetchMoreEntriesRequest(direction);break;default:break}};const fetchNewerEntries=Object(external_kbnSharedDeps_React_["useCallback"])(Object(external_kbnSharedDeps_Lodash_["throttle"])(()=>runFetchMoreEntriesRequest(ShouldFetchMoreEntries.After),500),[props,state.bottomCursor]);const streamEntriesEffectDependencies=[props.isStreaming,state.isLoadingMore,state.isReloading];const streamEntriesEffect=()=>{log_entries_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var endTimestamp,newEntriesEnd;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!(props.isStreaming&&!state.isLoadingMore&&!state.isReloading)){_context4.next=18;break}endTimestamp=Date.now();if(!startedStreaming){_context4.next=7;break}_context4.next=5;return new Promise(res=>setTimeout(res,LIVE_STREAM_INTERVAL));case 5:_context4.next=12;break;case 7:props.jumpToTargetPosition({tiebreaker:0,time:endTimestamp});setStartedStreaming(true);if(!state.hasMoreAfterEnd){_context4.next=12;break}runFetchNewEntriesRequest({endTimestamp:endTimestamp});return _context4.abrupt("return");case 12:_context4.next=14;return runFetchMoreEntriesRequest(ShouldFetchMoreEntries.After,{endTimestamp:endTimestamp});case 14:newEntriesEnd=_context4.sent;if(newEntriesEnd){props.jumpToTargetPosition(newEntriesEnd)}_context4.next=19;break;case 18:if(!props.isStreaming){setStartedStreaming(false)}case 19:case"end":return _context4.stop()}}),_callee4)})))()};const expandRangeEffect=()=>{if(!prevParams||!prevParams.startTimestamp||!prevParams.endTimestamp){return}if(props.timestampsLastUpdate===prevParams.timestampsLastUpdate){return}const shouldExpand={before:props.startTimestamp<prevParams.startTimestamp,after:props.endTimestamp>prevParams.endTimestamp};dispatchIfMounted({type:Action.ExpandRange,payload:shouldExpand})};const expandRangeEffectDependencies=[prevParams===null||prevParams===void 0?void 0:prevParams.startTimestamp,prevParams===null||prevParams===void 0?void 0:prevParams.endTimestamp,props.startTimestamp,props.endTimestamp,props.timestampsLastUpdate];Object(external_kbnSharedDeps_React_["useEffect"])(fetchNewEntriesEffect,fetchNewEntriesEffectDependencies);Object(external_kbnSharedDeps_React_["useEffect"])(fetchMoreEntriesEffect,fetchMoreEntriesEffectDependencies);Object(external_kbnSharedDeps_React_["useEffect"])(streamEntriesEffect,streamEntriesEffectDependencies);Object(external_kbnSharedDeps_React_["useEffect"])(expandRangeEffect,expandRangeEffectDependencies);return{fetchNewerEntries:fetchNewerEntries,checkForNewEntries:runFetchNewEntriesRequest}};const useLogEntriesState=props=>{const _useReducer=Object(external_kbnSharedDeps_React_["useReducer"])(logEntriesStateReducer,logEntriesInitialState),_useReducer2=log_entries_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];const _useFetchEntriesEffec=useFetchEntriesEffect(state,dispatch,props),fetchNewerEntries=_useFetchEntriesEffec.fetchNewerEntries,checkForNewEntries=_useFetchEntriesEffec.checkForNewEntries;const callbacks={fetchNewerEntries:fetchNewerEntries,checkForNewEntries:checkForNewEntries};return[state,callbacks]};const logEntriesStateReducer=(prevState,action)=>{var _action$payload$hasMo,_action$payload$hasMo2;switch(action.type){case Action.ReceiveNewEntries:return log_entries_objectSpread(log_entries_objectSpread({},prevState),{},{entries:action.payload.entries,topCursor:action.payload.topCursor,bottomCursor:action.payload.bottomCursor,centerCursor:getCenterCursor(action.payload.entries),lastLoadedTime:new Date,isReloading:false,hasMoreBeforeStart:(_action$payload$hasMo=action.payload.hasMoreBefore)!==null&&_action$payload$hasMo!==void 0?_action$payload$hasMo:prevState.hasMoreBeforeStart,hasMoreAfterEnd:(_action$payload$hasMo2=action.payload.hasMoreAfter)!==null&&_action$payload$hasMo2!==void 0?_action$payload$hasMo2:prevState.hasMoreAfterEnd});case Action.ReceiveEntriesBefore:{var _action$payload$hasMo3;const newEntries=action.payload.entries;const prevEntries=cleanDuplicateItems(prevState.entries,newEntries);const entries=[...newEntries,...prevEntries];const update={entries:entries,isLoadingMore:false,hasMoreBeforeStart:(_action$payload$hasMo3=action.payload.hasMoreBefore)!==null&&_action$payload$hasMo3!==void 0?_action$payload$hasMo3:prevState.hasMoreBeforeStart,topCursor:newEntries.length>0?action.payload.topCursor:prevState.topCursor,centerCursor:getCenterCursor(entries),lastLoadedTime:new Date};return log_entries_objectSpread(log_entries_objectSpread({},prevState),update)}case Action.ReceiveEntriesAfter:{var _action$payload$hasMo4;const newEntries=action.payload.entries;const prevEntries=cleanDuplicateItems(prevState.entries,newEntries);const entries=[...prevEntries,...newEntries];const update={entries:entries,isLoadingMore:false,hasMoreAfterEnd:(_action$payload$hasMo4=action.payload.hasMoreAfter)!==null&&_action$payload$hasMo4!==void 0?_action$payload$hasMo4:prevState.hasMoreAfterEnd,bottomCursor:newEntries.length>0?action.payload.bottomCursor:prevState.bottomCursor,centerCursor:getCenterCursor(entries),lastLoadedTime:new Date};return log_entries_objectSpread(log_entries_objectSpread({},prevState),update)}case Action.FetchingNewEntries:return log_entries_objectSpread(log_entries_objectSpread({},prevState),{},{isReloading:true,entries:[],topCursor:null,bottomCursor:null,centerCursor:null,hasMoreBeforeStart:true,hasMoreAfterEnd:true});case Action.FetchingMoreEntries:return log_entries_objectSpread(log_entries_objectSpread({},prevState),{},{isLoadingMore:true});case Action.ErrorOnNewEntries:return log_entries_objectSpread(log_entries_objectSpread({},prevState),{},{isReloading:false});case Action.ErrorOnMoreEntries:return log_entries_objectSpread(log_entries_objectSpread({},prevState),{},{isLoadingMore:false});case Action.ExpandRange:{const hasMoreBeforeStart=action.payload.before?true:prevState.hasMoreBeforeStart;const hasMoreAfterEnd=action.payload.after?true:prevState.hasMoreAfterEnd;return log_entries_objectSpread(log_entries_objectSpread({},prevState),{},{hasMoreBeforeStart:hasMoreBeforeStart,hasMoreAfterEnd:hasMoreAfterEnd})}default:throw new Error}};function getCenterCursor(entries){return entries.length>0?entries[Math.floor(entries.length/2)].cursor:null}const LogEntriesState=constate_cjs_default()(useLogEntriesState);function with_stream_items_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function with_stream_items_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){with_stream_items_ownKeys(Object(source),true).forEach((function(key){with_stream_items_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{with_stream_items_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function with_stream_items_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function with_stream_items_slicedToArray(arr,i){return with_stream_items_arrayWithHoles(arr)||with_stream_items_iterableToArrayLimit(arr,i)||with_stream_items_unsupportedIterableToArray(arr,i)||with_stream_items_nonIterableRest()}function with_stream_items_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function with_stream_items_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return with_stream_items_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return with_stream_items_arrayLikeToArray(o,minLen)}function with_stream_items_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function with_stream_items_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function with_stream_items_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const WithStreamItems=({children:children})=>{const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(LogEntriesState.Context),_useContext2=with_stream_items_slicedToArray(_useContext,2),logEntries=_useContext2[0],logEntriesCallbacks=_useContext2[1];const _useContext3=Object(external_kbnSharedDeps_React_["useContext"])(LogHighlightsState.Context),currentHighlightKey=_useContext3.currentHighlightKey,logEntryHighlightsById=_useContext3.logEntryHighlightsById;const items=Object(external_kbnSharedDeps_React_["useMemo"])(()=>logEntries.isReloading?[]:logEntries.entries.map(logEntry=>createLogEntryStreamItem(logEntry,logEntryHighlightsById[logEntry.id]||[])),[logEntries.entries,logEntries.isReloading,logEntryHighlightsById]);return children(with_stream_items_objectSpread(with_stream_items_objectSpread(with_stream_items_objectSpread({},logEntries),logEntriesCallbacks),{},{items:items,currentHighlightKey:currentHighlightKey}))};const createLogEntryStreamItem=(logEntry,highlights)=>({kind:"logEntry",logEntry:logEntry,highlights:highlights});var autocomplete_field=__webpack_require__(164);function toolbar_templateObject(){const data=toolbar_taggedTemplateLiteral(["\n  border-top: none;\n  border-right: none;\n  border-left: none;\n  border-radius: 0;\n  padding: "," ",";\n"]);toolbar_templateObject=function _templateObject(){return data};return data}function toolbar_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}const Toolbar=Object(observability_public_["euiStyled"])(external_kbnSharedDeps_ElasticEui_["EuiPanel"]).attrs(()=>({grow:false,paddingSize:"none"}))(toolbar_templateObject(),props=>props.theme.eui.euiSizeS,props=>props.theme.eui.euiSizeL);function log_customization_menu_templateObject(){const data=log_customization_menu_taggedTemplateLiteral(["\n  min-width: 200px;\n"]);log_customization_menu_templateObject=function _templateObject(){return data};return data}function log_customization_menu_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function log_customization_menu_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class log_customization_menu_LogCustomizationMenu extends external_kbnSharedDeps_React_["Component"]{constructor(...args){super(...args);log_customization_menu_defineProperty(this,"state",{isShown:false});log_customization_menu_defineProperty(this,"show",()=>{this.setState({isShown:true})});log_customization_menu_defineProperty(this,"hide",()=>{this.setState({isShown:false})});log_customization_menu_defineProperty(this,"toggleVisibility",()=>{this.setState(state=>({isShown:!state.isShown}))})}render(){const children=this.props.children;const isShown=this.state.isShown;const menuButton=external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"text",iconType:"eye",onClick:this.toggleVisibility,size:"xs"},external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.customizeLogs.customizeButtonLabel",defaultMessage:"Customize"}));return external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"customizePopover",button:menuButton,closePopover:this.hide,isOpen:isShown,anchorPosition:"downRight",ownFocus:true},external_kbnSharedDeps_React_["createElement"](CustomizationMenuContent,null,children))}}const CustomizationMenuContent=observability_public_["euiStyled"].div(log_customization_menu_templateObject());function log_highlights_menu_templateObject2(){const data=log_highlights_menu_taggedTemplateLiteral(["\n  width: 300px;\n"]);log_highlights_menu_templateObject2=function _templateObject2(){return data};return data}function log_highlights_menu_templateObject(){const data=log_highlights_menu_taggedTemplateLiteral(["\n  padding-left: ",";\n"]);log_highlights_menu_templateObject=function _templateObject(){return data};return data}function log_highlights_menu_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function log_highlights_menu_slicedToArray(arr,i){return log_highlights_menu_arrayWithHoles(arr)||log_highlights_menu_iterableToArrayLimit(arr,i)||log_highlights_menu_unsupportedIterableToArray(arr,i)||log_highlights_menu_nonIterableRest()}function log_highlights_menu_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function log_highlights_menu_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return log_highlights_menu_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return log_highlights_menu_arrayLikeToArray(o,minLen)}function log_highlights_menu_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function log_highlights_menu_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function log_highlights_menu_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const LogHighlightsMenu=({onChange:onChange,isLoading:isLoading,activeHighlights:activeHighlights,hasPreviousHighlight:hasPreviousHighlight,goToPreviousHighlight:goToPreviousHighlight,hasNextHighlight:hasNextHighlight,goToNextHighlight:goToNextHighlight})=>{const _useVisibilityState=Object(use_visibility_state["a"])(false),isPopoverOpen=_useVisibilityState.isVisible,closePopover=_useVisibilityState.hide,togglePopover=_useVisibilityState.toggle;const _useState=Object(external_kbnSharedDeps_React_["useState"])(""),_useState2=log_highlights_menu_slicedToArray(_useState,2),highlightTerm=_useState2[0],_setHighlightTerm=_useState2[1];const debouncedOnChange=Object(external_kbnSharedDeps_React_["useMemo"])(()=>Object(external_kbnSharedDeps_Lodash_["debounce"])(onChange,275),[onChange]);const setHighlightTerm=Object(external_kbnSharedDeps_React_["useCallback"])(valueOrUpdater=>_setHighlightTerm(previousHighlightTerm=>{const newHighlightTerm=typeof valueOrUpdater==="function"?valueOrUpdater(previousHighlightTerm):valueOrUpdater;if(newHighlightTerm!==previousHighlightTerm){debouncedOnChange([newHighlightTerm])}return newHighlightTerm}),[debouncedOnChange]);const changeHighlightTerm=Object(external_kbnSharedDeps_React_["useCallback"])(e=>{const value=e.target.value;setHighlightTerm(value)},[setHighlightTerm]);const clearHighlightTerm=Object(external_kbnSharedDeps_React_["useCallback"])(()=>setHighlightTerm(""),[setHighlightTerm]);const button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"text",size:"xs",iconType:"brush",onClick:togglePopover},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.highlights.highlightsPopoverButtonLabel",defaultMessage:"Highlights"}),activeHighlights?external_kbnSharedDeps_React_default.a.createElement(ActiveHighlightsIndicator,null):null);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"popover",button:button,isOpen:isPopoverOpen,closePopover:closePopover,ownFocus:true},external_kbnSharedDeps_React_default.a.createElement(LogHighlightsMenuContent,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:termsFieldLabel,fullWidth:true,value:highlightTerm,onChange:changeHighlightTerm,isLoading:isLoading,"aria-label":termsFieldLabel})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":goToPreviousHighlightLabel,iconType:"arrowUp",onClick:goToPreviousHighlight,title:goToPreviousHighlightLabel,isDisabled:!hasPreviousHighlight})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":goToNextHighlightLabel,iconType:"arrowDown",onClick:goToNextHighlight,title:goToNextHighlightLabel,isDisabled:!hasNextHighlight})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":clearTermsButtonLabel,color:"danger",isDisabled:highlightTerm==="",iconType:"trash",onClick:clearHighlightTerm,title:clearTermsButtonLabel})))))};const termsFieldLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.highlights.highlightTermsFieldLabel",{defaultMessage:"Terms to highlight"});const clearTermsButtonLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.highlights.clearHighlightTermsButtonLabel",{defaultMessage:"Clear terms to highlight"});const goToPreviousHighlightLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.highlights.goToPreviousHighlightButtonLabel",{defaultMessage:"Jump to previous highlight"});const goToNextHighlightLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.highlights.goToNextHighlightButtonLabel",{defaultMessage:"Jump to next highlight"});const ActiveHighlightsIndicator=Object(observability_public_["euiStyled"])(external_kbnSharedDeps_ElasticEui_["EuiIcon"]).attrs(({theme:theme})=>({type:"checkInCircleFilled",size:"m",color:theme===null||theme===void 0?void 0:theme.eui.euiColorAccent}))(log_highlights_menu_templateObject(),props=>props.theme.eui.paddingSizes.xs);const LogHighlightsMenuContent=observability_public_["euiStyled"].div(log_highlights_menu_templateObject2());function isTextScale(maybeTextScale){return["small","medium","large"].includes(maybeTextScale)}function log_text_scale_controls_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class log_text_scale_controls_LogTextScaleControls extends external_kbnSharedDeps_React_["PureComponent"]{constructor(...args){super(...args);log_text_scale_controls_defineProperty(this,"setTextScale",textScale=>{if(isTextScale(textScale)){this.props.setTextScale(textScale)}})}render(){const _this$props=this.props,availableTextScales=_this$props.availableTextScales,textScale=_this$props.textScale;return external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.customizeLogs.textSizeFormRowLabel",defaultMessage:"Text Size"})},external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiRadioGroup"],{options:availableTextScales.map(availableTextScale=>({id:availableTextScale.toString(),label:external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.customizeLogs.textSizeRadioGroup",defaultMessage:"{textScale, select, small {Small} medium {Medium} large {Large} other {{textScale}} }",values:{textScale:availableTextScale}})})),idSelected:textScale,onChange:this.setTextScale}))}}function log_text_wrap_controls_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class log_text_wrap_controls_LogTextWrapControls extends external_kbnSharedDeps_React_["PureComponent"]{constructor(...args){super(...args);log_text_wrap_controls_defineProperty(this,"toggleWrap",()=>{this.props.setTextWrap(!this.props.wrap)})}render(){const wrap=this.props.wrap;return external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.customizeLogs.lineWrappingFormRowLabel",defaultMessage:"Line Wrapping"})},external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_["createElement"](external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.customizeLogs.wrapLongLinesSwitchLabel",defaultMessage:"Wrap long lines"}),checked:wrap,onChange:this.toggleWrap}))}}var with_kuery_autocompletion=__webpack_require__(151);const LogDatepicker=({startDateExpression:startDateExpression,endDateExpression:endDateExpression,isStreaming:isStreaming,onUpdateDateRange:onUpdateDateRange,onStartStreaming:onStartStreaming,onStopStreaming:onStopStreaming})=>{const handleTimeChange=Object(external_kbnSharedDeps_React_["useCallback"])(({start:start,end:end,isInvalid:isInvalid})=>{if(onUpdateDateRange&&!isInvalid){onUpdateDateRange({startDateExpression:start,endDateExpression:end})}},[onUpdateDateRange]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperDatePicker"],{start:startDateExpression,end:endDateExpression,onTimeChange:handleTimeChange,showUpdateButton:false,isDisabled:isStreaming})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},isStreaming?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"primary",iconType:"pause",iconSide:"left",onClick:onStopStreaming},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.stopStreamingButtonLabel",defaultMessage:"Stop streaming"})):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"play",iconSide:"left",onClick:onStartStreaming},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.infra.logs.startStreamingButtonLabel",defaultMessage:"Stream live"}))))};const LogsToolbar=()=>{const _useLogSourceContext=Object(log_source["c"])(),derivedIndexPattern=_useLogSourceContext.derivedIndexPattern;const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(LogViewConfiguration.Context),availableTextScales=_useContext.availableTextScales,setTextScale=_useContext.setTextScale,setTextWrap=_useContext.setTextWrap,textScale=_useContext.textScale,textWrap=_useContext.textWrap;const _useContext2=Object(external_kbnSharedDeps_React_["useContext"])(log_filter["a"].Context),filterQueryDraft=_useContext2.filterQueryDraft,isFilterQueryDraftValid=_useContext2.isFilterQueryDraftValid,applyLogFilterQuery=_useContext2.applyLogFilterQuery,setLogFilterQueryDraft=_useContext2.setLogFilterQueryDraft;const _useContext3=Object(external_kbnSharedDeps_React_["useContext"])(LogFlyout.Context),setSurroundingLogsId=_useContext3.setSurroundingLogsId;const _useContext4=Object(external_kbnSharedDeps_React_["useContext"])(LogHighlightsState.Context),setHighlightTerms=_useContext4.setHighlightTerms,loadLogEntryHighlightsRequest=_useContext4.loadLogEntryHighlightsRequest,highlightTerms=_useContext4.highlightTerms,hasPreviousHighlight=_useContext4.hasPreviousHighlight,hasNextHighlight=_useContext4.hasNextHighlight,goToPreviousHighlight=_useContext4.goToPreviousHighlight,goToNextHighlight=_useContext4.goToNextHighlight;const _useContext5=Object(external_kbnSharedDeps_React_["useContext"])(log_position["a"].Context),isStreaming=_useContext5.isStreaming,startLiveStreaming=_useContext5.startLiveStreaming,stopLiveStreaming=_useContext5.stopLiveStreaming,startDateExpression=_useContext5.startDateExpression,endDateExpression=_useContext5.endDateExpression,updateDateRange=_useContext5.updateDateRange;return external_kbnSharedDeps_React_default.a.createElement(Toolbar,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",justifyContent:"spaceBetween",gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(with_kuery_autocompletion["a"],{indexPattern:derivedIndexPattern},({isLoadingSuggestions:isLoadingSuggestions,loadSuggestions:loadSuggestions,suggestions:suggestions})=>external_kbnSharedDeps_React_default.a.createElement(autocomplete_field["a"],{isLoadingSuggestions:isLoadingSuggestions,isValid:isFilterQueryDraftValid,loadSuggestions:loadSuggestions,disabled:isStreaming,onChange:expression=>{setSurroundingLogsId(null);setLogFilterQueryDraft(expression)},onSubmit:expression=>{setSurroundingLogsId(null);applyLogFilterQuery(expression)},placeholder:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logsPage.toolbar.kqlSearchFieldPlaceholder",{defaultMessage:"Search for log entries… (e.g. host.name:host-1)"}),suggestions:suggestions,value:filterQueryDraft?filterQueryDraft.expression:"","aria-label":external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logsPage.toolbar.kqlSearchFieldAriaLabel",{defaultMessage:"Search for log entries"})}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(log_customization_menu_LogCustomizationMenu,null,external_kbnSharedDeps_React_default.a.createElement(log_text_wrap_controls_LogTextWrapControls,{wrap:textWrap,setTextWrap:setTextWrap}),external_kbnSharedDeps_React_default.a.createElement(log_text_scale_controls_LogTextScaleControls,{availableTextScales:availableTextScales,textScale:textScale,setTextScale:setTextScale}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(LogHighlightsMenu,{onChange:setHighlightTerms,isLoading:loadLogEntryHighlightsRequest.state==="pending",activeHighlights:highlightTerms.filter(highlightTerm=>highlightTerm.length>0).length>0,goToPreviousHighlight:goToPreviousHighlight,goToNextHighlight:goToNextHighlight,hasPreviousHighlight:hasPreviousHighlight,hasNextHighlight:hasNextHighlight})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(LogDatepicker,{startDateExpression:startDateExpression,endDateExpression:endDateExpression,onStartStreaming:startLiveStreaming,onStopStreaming:stopLiveStreaming,isStreaming:isStreaming,onUpdateDateRange:updateDateRange}))))};function page_logs_content_templateObject(){const data=page_logs_content_taggedTemplateLiteral(["\n  flex: 1 0 0%;\n  overflow: hidden;\n  min-width: 100px;\n  max-width: 100px;\n  display: flex;\n  flex-direction: column;\n"]);page_logs_content_templateObject=function _templateObject(){return data};return data}function page_logs_content_taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function page_logs_content_slicedToArray(arr,i){return page_logs_content_arrayWithHoles(arr)||page_logs_content_iterableToArrayLimit(arr,i)||page_logs_content_unsupportedIterableToArray(arr,i)||page_logs_content_nonIterableRest()}function page_logs_content_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function page_logs_content_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return page_logs_content_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return page_logs_content_arrayLikeToArray(o,minLen)}function page_logs_content_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function page_logs_content_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function page_logs_content_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const LogsPageLogsContent=()=>{const _useLogSourceContext=Object(log_source["c"])(),sourceConfiguration=_useLogSourceContext.sourceConfiguration,sourceId=_useLogSourceContext.sourceId;const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(LogViewConfiguration.Context),textScale=_useContext.textScale,textWrap=_useContext.textWrap;const _useContext2=Object(external_kbnSharedDeps_React_["useContext"])(LogFlyout.Context),setFlyoutVisibility=_useContext2.setFlyoutVisibility,flyoutVisible=_useContext2.flyoutVisible,setFlyoutId=_useContext2.setFlyoutId,surroundingLogsId=_useContext2.surroundingLogsId,setSurroundingLogsId=_useContext2.setSurroundingLogsId,flyoutItem=_useContext2.flyoutItem,isLoading=_useContext2.isLoading;const _useContext3=Object(external_kbnSharedDeps_React_["useContext"])(LogHighlightsState.Context),logSummaryHighlights=_useContext3.logSummaryHighlights;const _useContext4=Object(external_kbnSharedDeps_React_["useContext"])(log_filter["a"].Context),applyLogFilterQuery=_useContext4.applyLogFilterQuery;const _useContext5=Object(external_kbnSharedDeps_React_["useContext"])(log_position["a"].Context),isStreaming=_useContext5.isStreaming,targetPosition=_useContext5.targetPosition,visibleMidpointTime=_useContext5.visibleMidpointTime,visibleTimeInterval=_useContext5.visibleTimeInterval,reportVisiblePositions=_useContext5.reportVisiblePositions,jumpToTargetPosition=_useContext5.jumpToTargetPosition,startLiveStreaming=_useContext5.startLiveStreaming,stopLiveStreaming=_useContext5.stopLiveStreaming,startDateExpression=_useContext5.startDateExpression,endDateExpression=_useContext5.endDateExpression,updateDateRange=_useContext5.updateDateRange;const _useContext6=Object(external_kbnSharedDeps_React_["useContext"])(ViewLogInContext.Context),_useContext7=page_logs_content_slicedToArray(_useContext6,2),setContextEntry=_useContext7[1].setContextEntry;const setFilter=Object(external_kbnSharedDeps_React_["useCallback"])((filter,flyoutItemId,timeKey)=>{applyLogFilterQuery(filter);if(timeKey){jumpToTargetPosition(timeKey)}setSurroundingLogsId(flyoutItemId);stopLiveStreaming()},[applyLogFilterQuery,jumpToTargetPosition,setSurroundingLogsId,stopLiveStreaming]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(WithLogTextviewUrlState,null),external_kbnSharedDeps_React_default.a.createElement(WithFlyoutOptionsUrlState,null),external_kbnSharedDeps_React_default.a.createElement(LogsToolbar,null),external_kbnSharedDeps_React_default.a.createElement(PageViewLogInContext,null),flyoutVisible?external_kbnSharedDeps_React_default.a.createElement(LogEntryFlyout,{setFilter:setFilter,setFlyoutVisibility:setFlyoutVisibility,flyoutItem:flyoutItem,loading:isLoading}):null,external_kbnSharedDeps_React_default.a.createElement(components_page["c"],{key:"".concat(sourceId,"-").concat(sourceConfiguration===null||sourceConfiguration===void 0?void 0:sourceConfiguration.version)},external_kbnSharedDeps_React_default.a.createElement(WithStreamItems,null,({currentHighlightKey:currentHighlightKey,hasMoreAfterEnd:hasMoreAfterEnd,hasMoreBeforeStart:hasMoreBeforeStart,isLoadingMore:isLoadingMore,isReloading:isReloading,items:items,lastLoadedTime:lastLoadedTime,fetchNewerEntries:fetchNewerEntries,checkForNewEntries:checkForNewEntries})=>external_kbnSharedDeps_React_default.a.createElement(log_text_stream["g"],{columnConfigurations:sourceConfiguration&&sourceConfiguration.configuration.logColumns||[],hasMoreAfterEnd:hasMoreAfterEnd,hasMoreBeforeStart:hasMoreBeforeStart,isLoadingMore:isLoadingMore,isReloading:isReloading,isStreaming:isStreaming,items:items,jumpToTarget:jumpToTargetPosition,lastLoadedTime:lastLoadedTime,loadNewerItems:fetchNewerEntries,reloadItems:checkForNewEntries,reportVisibleInterval:reportVisiblePositions,scale:textScale,target:targetPosition,wrap:textWrap,setFlyoutItem:setFlyoutId,setFlyoutVisibility:setFlyoutVisibility,setContextEntry:setContextEntry,highlightedItem:surroundingLogsId?surroundingLogsId:null,currentHighlightKey:currentHighlightKey,startDateExpression:startDateExpression,endDateExpression:endDateExpression,updateDateRange:updateDateRange,startLiveStreaming:startLiveStreaming})),external_kbnSharedDeps_React_default.a.createElement(auto_sizer["a"],{content:true,bounds:true,detectAnyWindowResize:"height"},({measureRef:measureRef,bounds:{height:height=0},content:{width:width=0}})=>external_kbnSharedDeps_React_default.a.createElement(LogPageMinimapColumn,{ref:measureRef},external_kbnSharedDeps_React_default.a.createElement(WithSummary,null,({buckets:buckets,start:start,end:end})=>external_kbnSharedDeps_React_default.a.createElement(WithStreamItems,null,({isReloading:isReloading})=>external_kbnSharedDeps_React_default.a.createElement(log_minimap_LogMinimap,{start:start,end:end,height:height,width:width,highlightedInterval:isReloading?null:visibleTimeInterval,jumpToTarget:jumpToTargetPosition,summaryBuckets:buckets,summaryHighlightBuckets:logSummaryHighlights.length>0?logSummaryHighlights[0].buckets:[],target:visibleMidpointTime})))))))};const LogPageMinimapColumn=observability_public_["euiStyled"].div(page_logs_content_templateObject());var no_indices=__webpack_require__(148);var components_source_configuration=__webpack_require__(208);function page_no_indices_content_extends(){page_no_indices_content_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return page_no_indices_content_extends.apply(this,arguments)}const LogsPageNoIndicesContent=()=>{var _application$capabili,_application$capabili2;const _useKibana=Object(public_["useKibana"])(),application=_useKibana.services.application;const canConfigureSource=(application===null||application===void 0?void 0:(_application$capabili=application.capabilities)===null||_application$capabili===void 0?void 0:(_application$capabili2=_application$capabili.logs)===null||_application$capabili2===void 0?void 0:_application$capabili2.configureSource)?true:false;const tutorialLinkProps=Object(use_link_props["a"])({app:"home",hash:"/tutorial_directory/logging"});return external_kbnSharedDeps_React_default.a.createElement(no_indices["a"],{"data-test-subj":"noLogsIndicesPrompt",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logsPage.noLoggingIndicesTitle",{defaultMessage:"Looks like you don't have any logging indices."}),message:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logsPage.noLoggingIndicesDescription",{defaultMessage:"Let's add some!"}),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],page_no_indices_content_extends({},tutorialLinkProps,{color:"primary",fill:true,"data-test-subj":"logsViewSetupInstructionsButton"}),external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logsPage.noLoggingIndicesInstructionsActionLabel",{defaultMessage:"View setup instructions"}))),canConfigureSource?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(components_source_configuration["a"],{app:"logs","data-test-subj":"configureSourceButton"},external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.configureSourceActionLabel",{defaultMessage:"Change source configuration"}))):null)})};const StreamPageContent=()=>{const _useLogSourceContext=Object(log_source["c"])(),hasFailedLoadingSource=_useLogSourceContext.hasFailedLoadingSource,isLoading=_useLogSourceContext.isLoading,isUninitialized=_useLogSourceContext.isUninitialized,loadSource=_useLogSourceContext.loadSource,loadSourceFailureMessage=_useLogSourceContext.loadSourceFailureMessage,sourceStatus=_useLogSourceContext.sourceStatus;if(isLoading||isUninitialized){return external_kbnSharedDeps_React_default.a.createElement(source_loading_page["a"],null)}else if(hasFailedLoadingSource){return external_kbnSharedDeps_React_default.a.createElement(source_error_page["a"],{errorMessage:loadSourceFailureMessage!==null&&loadSourceFailureMessage!==void 0?loadSourceFailureMessage:"",retry:loadSource})}else if((sourceStatus===null||sourceStatus===void 0?void 0:sourceStatus.logIndexStatus)!=="missing"){return external_kbnSharedDeps_React_default.a.createElement(LogsPageLogsContent,null)}else{return external_kbnSharedDeps_React_default.a.createElement(LogsPageNoIndicesContent,null)}};const StreamPageHeader=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(document_title["a"],{title:previousTitle=>external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.streamPage.documentTitle",{defaultMessage:"{previousTitle} | Stream",values:{previousTitle:previousTitle}})}));function page_providers_slicedToArray(arr,i){return page_providers_arrayWithHoles(arr)||page_providers_iterableToArrayLimit(arr,i)||page_providers_unsupportedIterableToArray(arr,i)||page_providers_nonIterableRest()}function page_providers_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function page_providers_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return page_providers_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return page_providers_arrayLikeToArray(o,minLen)}function page_providers_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function page_providers_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function page_providers_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const LogFilterStateProvider=({children:children})=>{const _useLogSourceContext=Object(log_source["c"])(),derivedIndexPattern=_useLogSourceContext.derivedIndexPattern;return external_kbnSharedDeps_React_default.a.createElement(log_filter["a"].Provider,{indexPattern:derivedIndexPattern},external_kbnSharedDeps_React_default.a.createElement(log_filter["b"],null),children)};const ViewLogInContextProvider=({children:children})=>{const _useContext=Object(external_kbnSharedDeps_React_["useContext"])(log_position["a"].Context),startTimestamp=_useContext.startTimestamp,endTimestamp=_useContext.endTimestamp;const _useLogSourceContext2=Object(log_source["c"])(),sourceId=_useLogSourceContext2.sourceId;if(!startTimestamp||!endTimestamp){return null}return external_kbnSharedDeps_React_default.a.createElement(ViewLogInContext.Provider,{startTimestamp:startTimestamp,endTimestamp:endTimestamp,sourceId:sourceId},children)};const LogEntriesStateProvider=({children:children})=>{const _useLogSourceContext3=Object(log_source["c"])(),sourceId=_useLogSourceContext3.sourceId;const _useContext2=Object(external_kbnSharedDeps_React_["useContext"])(log_position["a"].Context),startTimestamp=_useContext2.startTimestamp,endTimestamp=_useContext2.endTimestamp,timestampsLastUpdate=_useContext2.timestampsLastUpdate,targetPosition=_useContext2.targetPosition,pagesBeforeStart=_useContext2.pagesBeforeStart,pagesAfterEnd=_useContext2.pagesAfterEnd,isStreaming=_useContext2.isStreaming,jumpToTargetPosition=_useContext2.jumpToTargetPosition,isInitialized=_useContext2.isInitialized;const _useContext3=Object(external_kbnSharedDeps_React_["useContext"])(log_filter["a"].Context),filterQuery=_useContext3.filterQuery;if(!startTimestamp||!endTimestamp){return null}const entriesProps={startTimestamp:startTimestamp,endTimestamp:endTimestamp,timestampsLastUpdate:timestampsLastUpdate,timeKey:targetPosition,pagesBeforeStart:pagesBeforeStart,pagesAfterEnd:pagesAfterEnd,filterQuery:filterQuery,sourceId:sourceId,isStreaming:isStreaming,jumpToTargetPosition:jumpToTargetPosition};if(!isInitialized){return null}return external_kbnSharedDeps_React_default.a.createElement(LogEntriesState.Provider,entriesProps,children)};const LogHighlightsStateProvider=({children:children})=>{const _useLogSourceContext4=Object(log_source["c"])(),sourceId=_useLogSourceContext4.sourceId,sourceConfiguration=_useLogSourceContext4.sourceConfiguration;const _useContext4=Object(external_kbnSharedDeps_React_["useContext"])(LogEntriesState.Context),_useContext5=page_providers_slicedToArray(_useContext4,1),_useContext5$=_useContext5[0],topCursor=_useContext5$.topCursor,bottomCursor=_useContext5$.bottomCursor,centerCursor=_useContext5$.centerCursor,entries=_useContext5$.entries;const _useContext6=Object(external_kbnSharedDeps_React_["useContext"])(log_filter["a"].Context),filterQuery=_useContext6.filterQuery;const highlightsProps={sourceId:sourceId,sourceVersion:sourceConfiguration===null||sourceConfiguration===void 0?void 0:sourceConfiguration.version,entriesStart:topCursor,entriesEnd:bottomCursor,centerCursor:centerCursor,size:entries.length,filterQuery:filterQuery};return external_kbnSharedDeps_React_default.a.createElement(LogHighlightsState.Provider,highlightsProps,children)};const LogsPageProviders=({children:children})=>{const _useLogSourceContext5=Object(log_source["c"])(),sourceStatus=_useLogSourceContext5.sourceStatus;if((sourceStatus===null||sourceStatus===void 0?void 0:sourceStatus.logIndexStatus)==="missing"){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,children)}return external_kbnSharedDeps_React_default.a.createElement(LogViewConfiguration.Provider,null,external_kbnSharedDeps_React_default.a.createElement(LogFlyout.Provider,null,external_kbnSharedDeps_React_default.a.createElement(log_position["a"].Provider,null,external_kbnSharedDeps_React_default.a.createElement(log_position["b"],null),external_kbnSharedDeps_React_default.a.createElement(ViewLogInContextProvider,null,external_kbnSharedDeps_React_default.a.createElement(LogFilterStateProvider,null,external_kbnSharedDeps_React_default.a.createElement(LogEntriesStateProvider,null,external_kbnSharedDeps_React_default.a.createElement(LogHighlightsStateProvider,null,children)))))))};const StreamPage=()=>{Object(observability_public_["useTrackPageview"])({app:"infra_logs",path:"stream"});Object(observability_public_["useTrackPageview"])({app:"infra_logs",path:"stream",delay:15e3});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiErrorBoundary"],null,external_kbnSharedDeps_React_default.a.createElement(LogsPageProviders,null,external_kbnSharedDeps_React_default.a.createElement(components_page["a"],{"data-test-subj":"infraLogsPage"},external_kbnSharedDeps_React_default.a.createElement(StreamPageHeader,null),external_kbnSharedDeps_React_default.a.createElement(StreamPageContent,null))))};const LogsPageContent=()=>{var _useKibana$services$a,_uiCapabilities$logs,_kibana$services,_kibana$services$appl;const uiCapabilities=(_useKibana$services$a=Object(public_["useKibana"])().services.application)===null||_useKibana$services$a===void 0?void 0:_useKibana$services$a.capabilities;const _useLogSourceContext=Object(log_source["c"])(),initialize=_useLogSourceContext.initialize;const kibana=Object(public_["useKibana"])();useMount_default()(()=>{initialize()});const streamTab={app:"logs",title:streamTabTitle,pathname:"/stream"};const anomaliesTab={app:"logs",title:anomaliesTabTitle,pathname:"/anomalies"};const logCategoriesTab={app:"logs",title:logCategoriesTabTitle,pathname:"/log-categories"};const settingsTab={app:"logs",title:settingsTabTitle,pathname:"/settings"};return external_kbnSharedDeps_React_default.a.createElement(components_page["a"],null,external_kbnSharedDeps_React_default.a.createElement(document_title["a"],{title:pageTitle}),external_kbnSharedDeps_React_default.a.createElement(help_center_content["a"],{feedbackLink:feedbackLinkUrl,appName:pageTitle}),external_kbnSharedDeps_React_default.a.createElement(header["a"],{breadcrumbs:[{text:pageTitle}],readOnlyBadge:!(uiCapabilities===null||uiCapabilities===void 0?void 0:(_uiCapabilities$logs=uiCapabilities.logs)===null||_uiCapabilities$logs===void 0?void 0:_uiCapabilities$logs.save)}),external_kbnSharedDeps_React_default.a.createElement(app_navigation["a"],{"aria-label":pageTitle},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"none",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(routed_tabs["a"],{tabs:[streamTab,anomaliesTab,logCategoriesTab,settingsTab]})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(log_threshold["a"],null)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{href:(_kibana$services=kibana.services)===null||_kibana$services===void 0?void 0:(_kibana$services$appl=_kibana$services.application)===null||_kibana$services$appl===void 0?void 0:_kibana$services$appl.getUrlForApp("/home#/tutorial_directory/logging"),size:"s",color:"primary",iconType:"plusInCircle"},ADD_DATA_LABEL)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:streamTab.pathname,component:StreamPage}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:anomaliesTab.pathname,component:LogEntryRatePage}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:logCategoriesTab.pathname,component:LogEntryCategoriesPage}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:settingsTab.pathname,component:LogsSettingsPage}),external_kbnSharedDeps_React_default.a.createElement(redirect_with_query_params["a"],{from:"/analysis",to:anomaliesTab.pathname,exact:true}),external_kbnSharedDeps_React_default.a.createElement(redirect_with_query_params["a"],{from:"/log-rate",to:anomaliesTab.pathname,exact:true}),external_kbnSharedDeps_React_default.a.createElement(redirect_with_query_params["a"],{from:"/",to:streamTab.pathname,exact:true})))};const pageTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.header.logsTitle",{defaultMessage:"Logs"});const streamTabTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.index.streamTabTitle",{defaultMessage:"Stream"});const anomaliesTabTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.index.anomaliesTabTitle",{defaultMessage:"Anomalies"});const logCategoriesTabTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.index.logCategoriesBetaBadgeTitle",{defaultMessage:"Categories"});const settingsTabTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logs.index.settingsTabTitle",{defaultMessage:"Settings"});const feedbackLinkUrl="https://discuss.elastic.co/c/logs";const ADD_DATA_LABEL=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.infra.logsHeaderAddDataButtonLabel",{defaultMessage:"Add data"});var source_id=__webpack_require__(133);function logs_page_providers_slicedToArray(arr,i){return logs_page_providers_arrayWithHoles(arr)||logs_page_providers_iterableToArrayLimit(arr,i)||logs_page_providers_unsupportedIterableToArray(arr,i)||logs_page_providers_nonIterableRest()}function logs_page_providers_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function logs_page_providers_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return logs_page_providers_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return logs_page_providers_arrayLikeToArray(o,minLen)}function logs_page_providers_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function logs_page_providers_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function logs_page_providers_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const page_providers_LogsPageProviders=({children:children})=>{const _useSourceId=Object(source_id["b"])(),_useSourceId2=logs_page_providers_slicedToArray(_useSourceId,1),sourceId=_useSourceId2[0];const _useKibana=Object(public_["useKibana"])(),services=_useKibana.services;return external_kbnSharedDeps_React_default.a.createElement(log_source["a"],{sourceId:sourceId,fetch:services.http.fetch},external_kbnSharedDeps_React_default.a.createElement(LogAnalysisCapabilitiesProvider,null,children))};const LogsPage=()=>external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiErrorBoundary"],null,external_kbnSharedDeps_React_default.a.createElement(page_providers_LogsPageProviders,null,external_kbnSharedDeps_React_default.a.createElement(LogsPageContent,null)));var apollo_client=__webpack_require__(258);var common_providers=__webpack_require__(266);var common_styles=__webpack_require__(195);const renderApp=(core,plugins,{element:element,history:history})=>{const apolloClient=Object(apollo_client["a"])(core.http.fetch);Object(common_styles["b"])(element);external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(LogsApp,{apolloClient:apolloClient,core:core,history:history,plugins:plugins}),element);return()=>{external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(element)}};const LogsApp=({apolloClient:apolloClient,core:core,history:history,plugins:plugins})=>{var _uiCapabilities$logs;const uiCapabilities=core.application.capabilities;return external_kbnSharedDeps_React_default.a.createElement(common_providers["b"],{core:core,plugins:plugins},external_kbnSharedDeps_React_default.a.createElement(common_providers["a"],{apolloClient:apolloClient,triggersActionsUI:plugins.triggersActionsUi},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Router"],{history:history},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:"/link-to",component:link_to_logs["a"]}),(uiCapabilities===null||uiCapabilities===void 0?void 0:(_uiCapabilities$logs=uiCapabilities.logs)===null||_uiCapabilities$logs===void 0?void 0:_uiCapabilities$logs.show)&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:"/",component:LogsPage}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{component:_404["a"]})))))}}}]);