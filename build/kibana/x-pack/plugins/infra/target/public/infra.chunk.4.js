/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["infra_bundle_jsonpfunction"]=window["infra_bundle_jsonpfunction"]||[]).push([[4],{104:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AlertPrefillProvider}));__webpack_require__.d(__webpack_exports__,"b",(function(){return useAlertPrefillContext}));var constate_cjs=__webpack_require__(76);var constate_cjs_default=__webpack_require__.n(constate_cjs);var external_kbnSharedDeps_Lodash_=__webpack_require__(4);var external_kbnSharedDeps_React_=__webpack_require__(2);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useMetricThresholdAlertPrefill=()=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])({groupBy:undefined,filterQuery:undefined,metrics:[]}),_useState2=_slicedToArray(_useState,2),prefillOptionsState=_useState2[0],setPrefillOptionsState=_useState2[1];const groupBy=prefillOptionsState.groupBy,filterQuery=prefillOptionsState.filterQuery,metrics=prefillOptionsState.metrics;return{groupBy:groupBy,filterQuery:filterQuery,metrics:metrics,setPrefillOptions(newState){if(!Object(external_kbnSharedDeps_Lodash_["isEqual"])(newState,prefillOptionsState))setPrefillOptionsState(newState)}}};function use_inventory_alert_prefill_slicedToArray(arr,i){return use_inventory_alert_prefill_arrayWithHoles(arr)||use_inventory_alert_prefill_iterableToArrayLimit(arr,i)||use_inventory_alert_prefill_unsupportedIterableToArray(arr,i)||use_inventory_alert_prefill_nonIterableRest()}function use_inventory_alert_prefill_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_inventory_alert_prefill_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_inventory_alert_prefill_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_inventory_alert_prefill_arrayLikeToArray(o,minLen)}function use_inventory_alert_prefill_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_inventory_alert_prefill_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_inventory_alert_prefill_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useInventoryAlertPrefill=()=>{const _useState=Object(external_kbnSharedDeps_React_["useState"])("host"),_useState2=use_inventory_alert_prefill_slicedToArray(_useState,2),nodeType=_useState2[0],setNodeType=_useState2[1];const _useState3=Object(external_kbnSharedDeps_React_["useState"])(),_useState4=use_inventory_alert_prefill_slicedToArray(_useState3,2),filterQuery=_useState4[0],setFilterQuery=_useState4[1];const _useState5=Object(external_kbnSharedDeps_React_["useState"])({type:"cpu"}),_useState6=use_inventory_alert_prefill_slicedToArray(_useState5,2),metric=_useState6[0],setMetric=_useState6[1];const _useState7=Object(external_kbnSharedDeps_React_["useState"])([]),_useState8=use_inventory_alert_prefill_slicedToArray(_useState7,2),customMetrics=_useState8[0],setCustomMetrics=_useState8[1];return{nodeType:nodeType,filterQuery:filterQuery,metric:metric,customMetrics:customMetrics,setNodeType:setNodeType,setFilterQuery:setFilterQuery,setMetric:setMetric,setCustomMetrics:setCustomMetrics}};function use_alert_prefill_slicedToArray(arr,i){return use_alert_prefill_arrayWithHoles(arr)||use_alert_prefill_iterableToArrayLimit(arr,i)||use_alert_prefill_unsupportedIterableToArray(arr,i)||use_alert_prefill_nonIterableRest()}function use_alert_prefill_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function use_alert_prefill_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return use_alert_prefill_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return use_alert_prefill_arrayLikeToArray(o,minLen)}function use_alert_prefill_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function use_alert_prefill_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function use_alert_prefill_arrayWithHoles(arr){if(Array.isArray(arr))return arr}const useAlertPrefill=()=>{const metricThresholdPrefill=useMetricThresholdAlertPrefill();const inventoryPrefill=useInventoryAlertPrefill();return{metricThresholdPrefill:metricThresholdPrefill,inventoryPrefill:inventoryPrefill}};const _createContainer=constate_cjs_default()(useAlertPrefill),_createContainer2=use_alert_prefill_slicedToArray(_createContainer,2),AlertPrefillProvider=_createContainer2[0],useAlertPrefillContext=_createContainer2[1]},113:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useHTTPRequest}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__);var _utils_use_tracked_promise__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(79);var _src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8);var _src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_3__);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function useHTTPRequest(pathname,method,body,decode=(response=>response),fetch,toastWarning){var _kibana$services$http;const kibana=Object(_src_plugins_kibana_react_public__WEBPACK_IMPORTED_MODULE_3__["useKibana"])();const fetchService=fetch?fetch:(_kibana$services$http=kibana.services.http)===null||_kibana$services$http===void 0?void 0:_kibana$services$http.fetch;const toast=toastWarning?toastWarning:kibana.notifications.toasts.warning;const _useState=Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null),_useState2=_slicedToArray(_useState,2),response=_useState2[0],setResponse=_useState2[1];const _useState3=Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];const _useTrackedPromise=Object(_utils_use_tracked_promise__WEBPACK_IMPORTED_MODULE_2__["b"])({cancelPreviousOn:"resolution",createPromise:()=>{if(!fetchService){throw new Error("HTTP service is unavailable")}return fetchService(pathname,{method:method,body:body})},onResolve:resp=>setResponse(decode(resp)),onReject:e=>{var _err$response,_err$response2,_err$response3;const err=e;if(e&&e instanceof _utils_use_tracked_promise__WEBPACK_IMPORTED_MODULE_2__["a"]){return}setError(err);toast({toastLifeTimeMs:3e3,title:_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__["i18n"].translate("xpack.infra.useHTTPRequest.error.title",{defaultMessage:"Error while fetching resource"}),body:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,err.response?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h5",null,_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__["i18n"].translate("xpack.infra.useHTTPRequest.error.status",{defaultMessage:"Error"})),(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.statusText," (",(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status,")",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h5",null,_kbn_i18n__WEBPACK_IMPORTED_MODULE_1__["i18n"].translate("xpack.infra.useHTTPRequest.error.url",{defaultMessage:"URL"})),(_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.url):react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h5",null,err.message))})}},[pathname,body,method,fetch,toast]),_useTrackedPromise2=_slicedToArray(_useTrackedPromise,2),request=_useTrackedPromise2[0],makeRequest=_useTrackedPromise2[1];const loading=Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(()=>{if(request.state==="resolved"&&response===null){return true}return request.state==="pending"},[request.state,response]);return{response:response,error:error,loading:loading,makeRequest:makeRequest}}},170:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useSourceViaHttp}));var external_kbnSharedDeps_React_=__webpack_require__(2);var Either=__webpack_require__(11);var lib_function=__webpack_require__(16);var pipeable=__webpack_require__(14);var constate_cjs=__webpack_require__(76);var constate_cjs_default=__webpack_require__.n(constate_cjs);var lib=__webpack_require__(0);var external_kbnSharedDeps_Moment_=__webpack_require__(58);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const TimestampFromString=new lib["Type"]("TimestampFromString",input=>typeof input==="number",(input,context)=>Object(pipeable["pipe"])(lib["string"].validate(input,context),Object(Either["chain"])(stringInput=>{const momentValue=external_kbnSharedDeps_Moment_default()(stringInput);return momentValue.isValid()?lib["success"](momentValue.valueOf()):lib["failure"](stringInput,context)})),output=>new Date(output).toISOString());const SavedSourceConfigurationFieldsRuntimeType=lib["partial"]({container:lib["string"],host:lib["string"],pod:lib["string"],tiebreaker:lib["string"],timestamp:lib["string"]});const SavedSourceConfigurationTimestampColumnRuntimeType=lib["type"]({timestampColumn:lib["type"]({id:lib["string"]})});const SavedSourceConfigurationMessageColumnRuntimeType=lib["type"]({messageColumn:lib["type"]({id:lib["string"]})});const SavedSourceConfigurationFieldColumnRuntimeType=lib["type"]({fieldColumn:lib["type"]({id:lib["string"],field:lib["string"]})});const SavedSourceConfigurationColumnRuntimeType=lib["union"]([SavedSourceConfigurationTimestampColumnRuntimeType,SavedSourceConfigurationMessageColumnRuntimeType,SavedSourceConfigurationFieldColumnRuntimeType]);const SavedSourceConfigurationRuntimeType=lib["partial"]({name:lib["string"],description:lib["string"],metricAlias:lib["string"],logAlias:lib["string"],inventoryDefaultView:lib["string"],metricsExplorerDefaultView:lib["string"],fields:SavedSourceConfigurationFieldsRuntimeType,logColumns:lib["array"](SavedSourceConfigurationColumnRuntimeType)});const pickSavedSourceConfiguration=value=>{const name=value.name,description=value.description,metricAlias=value.metricAlias,logAlias=value.logAlias,fields=value.fields,inventoryDefaultView=value.inventoryDefaultView,metricsExplorerDefaultView=value.metricsExplorerDefaultView,logColumns=value.logColumns;const container=fields.container,host=fields.host,pod=fields.pod,tiebreaker=fields.tiebreaker,timestamp=fields.timestamp;return{name:name,description:description,metricAlias:metricAlias,logAlias:logAlias,inventoryDefaultView:inventoryDefaultView,metricsExplorerDefaultView:metricsExplorerDefaultView,fields:{container:container,host:host,pod:pod,tiebreaker:tiebreaker,timestamp:timestamp},logColumns:logColumns}};const StaticSourceConfigurationFieldsRuntimeType=lib["partial"](_objectSpread(_objectSpread({},SavedSourceConfigurationFieldsRuntimeType.props),{},{message:lib["array"](lib["string"])}));const StaticSourceConfigurationRuntimeType=lib["partial"]({name:lib["string"],description:lib["string"],metricAlias:lib["string"],logAlias:lib["string"],inventoryDefaultView:lib["string"],metricsExplorerDefaultView:lib["string"],fields:StaticSourceConfigurationFieldsRuntimeType,logColumns:lib["array"](SavedSourceConfigurationColumnRuntimeType)});const SourceConfigurationFieldsRuntimeType=lib["type"](_objectSpread({},StaticSourceConfigurationFieldsRuntimeType.props));const SourceConfigurationRuntimeType=lib["type"](_objectSpread(_objectSpread({},SavedSourceConfigurationRuntimeType.props),{},{fields:SourceConfigurationFieldsRuntimeType,logColumns:lib["array"](SavedSourceConfigurationColumnRuntimeType)}));const SourceRuntimeType=lib["intersection"]([lib["type"]({id:lib["string"],origin:lib["keyof"]({fallback:null,internal:null,stored:null}),configuration:SourceConfigurationRuntimeType}),lib["partial"]({version:lib["string"],updatedAt:lib["number"]})]);const SourceStatusFieldRuntimeType=lib["type"]({name:lib["string"],type:lib["string"],searchable:lib["boolean"],aggregatable:lib["boolean"],displayable:lib["boolean"]});const SourceStatusRuntimeType=lib["type"]({logIndicesExist:lib["boolean"],metricIndicesExist:lib["boolean"],indexFields:lib["array"](SourceStatusFieldRuntimeType)});const SourceResponseRuntimeType=lib["type"]({source:SourceRuntimeType,status:SourceStatusRuntimeType});const SourceConfigurationSavedObjectRuntimeType=lib["intersection"]([lib["type"]({id:lib["string"],attributes:SavedSourceConfigurationRuntimeType}),lib["partial"]({version:lib["string"],updated_at:TimestampFromString})]);var use_http_request=__webpack_require__(113);var runtime_types=__webpack_require__(13);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function use_source_via_http_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function use_source_via_http_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){use_source_via_http_ownKeys(Object(source),true).forEach((function(key){use_source_via_http_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{use_source_via_http_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function use_source_via_http_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}const pickIndexPattern=(source,type)=>{if(!source){return"unknown-index"}if(type==="logs"){return source.configuration.logAlias}if(type==="metrics"){return source.configuration.metricAlias}return"".concat(source.configuration.logAlias,",").concat(source.configuration.metricAlias)};const useSourceViaHttp=({sourceId:sourceId="default",type:type="both",fetch:fetch,toastWarning:toastWarning})=>{const decodeResponse=response=>Object(pipeable["pipe"])(SourceResponseRuntimeType.decode(response),Object(Either["fold"])(Object(runtime_types["c"])(runtime_types["a"]),lib_function["identity"]));const _useHTTPRequest=Object(use_http_request["a"])("/api/metrics/source/".concat(sourceId,"/").concat(type),"GET",null,decodeResponse,fetch,toastWarning),error=_useHTTPRequest.error,loading=_useHTTPRequest.loading,response=_useHTTPRequest.response,makeRequest=_useHTTPRequest.makeRequest;Object(external_kbnSharedDeps_React_["useEffect"])(()=>{_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return makeRequest();case 2:case"end":return _context.stop()}}),_callee)})))()},[makeRequest]);const createDerivedIndexPattern=Object(external_kbnSharedDeps_React_["useCallback"])((indexType=type)=>({fields:(response===null||response===void 0?void 0:response.source)?response.status.indexFields:[],title:pickIndexPattern(response===null||response===void 0?void 0:response.source,indexType)}),[response,type]);const source=Object(external_kbnSharedDeps_React_["useMemo"])(()=>response?use_source_via_http_objectSpread(use_source_via_http_objectSpread({},response.source),{},{status:response.status}):null,[response]);return{createDerivedIndexPattern:createDerivedIndexPattern,source:source,loading:loading,error:error}};const SourceViaHttp=constate_cjs_default()(useSourceViaHttp);const _SourceViaHttp=_slicedToArray(SourceViaHttp,2),SourceViaHttpProvider=_SourceViaHttp[0],useSourceViaHttpContext=_SourceViaHttp[1]},197:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MetricsExplorerKueryBar}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);var react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);var _containers_with_kuery_autocompletion__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(151);var _components_autocomplete_field__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(164);var _src_plugins_data_public__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(62);var _src_plugins_data_public__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_4__);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function validateQuery(query){try{_src_plugins_data_public__WEBPACK_IMPORTED_MODULE_4__["esKuery"].fromKueryExpression(query)}catch(err){return false}return true}const MetricsExplorerKueryBar=({derivedIndexPattern:derivedIndexPattern,onSubmit:onSubmit,onChange:onChange,value:value,placeholder:placeholder})=>{const _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(value||""),_useState2=_slicedToArray(_useState,2),draftQuery=_useState2[0],setDraftQuery=_useState2[1];const _useState3=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(true),_useState4=_slicedToArray(_useState3,2),isValid=_useState4[0],setValidation=_useState4[1];Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(()=>{if(value){setDraftQuery(value)}},[value]);const handleChange=query=>{setValidation(validateQuery(query));setDraftQuery(query);if(onChange){onChange(query)}};const filteredDerivedIndexPattern=_objectSpread(_objectSpread({},derivedIndexPattern),{},{fields:derivedIndexPattern.fields});const defaultPlaceholder=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.infra.homePage.toolbar.kqlSearchFieldPlaceholder",{defaultMessage:"Search for infrastructure data… (e.g. host.name:host-1)"});return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_containers_with_kuery_autocompletion__WEBPACK_IMPORTED_MODULE_2__["a"],{indexPattern:filteredDerivedIndexPattern},({isLoadingSuggestions:isLoadingSuggestions,loadSuggestions:loadSuggestions,suggestions:suggestions})=>react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_autocomplete_field__WEBPACK_IMPORTED_MODULE_3__["a"],{"aria-label":placeholder,isLoadingSuggestions:isLoadingSuggestions,isValid:isValid,loadSuggestions:loadSuggestions,onChange:handleChange,onSubmit:onSubmit,placeholder:placeholder||defaultPlaceholder,suggestions:suggestions,value:draftQuery}))}},201:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getIntervalInSeconds}));const intervalUnits=["y","M","w","d","h","m","s","ms"];const INTERVAL_STRING_RE=new RegExp("^([0-9\\.]*)\\s*("+intervalUnits.join("|")+")$");const units={ms:.001,s:1,m:60,h:3600,d:86400,w:86400*7,M:86400*30,y:86400*356};const getIntervalInSeconds=interval=>{const matches=interval.match(INTERVAL_STRING_RE);if(matches){return parseFloat(matches[1])*units[matches[2]]}throw new Error("Invalid interval string format.")}}}]);